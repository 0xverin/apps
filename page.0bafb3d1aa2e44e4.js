"use strict";(("undefined"!=typeof self?self:this).webpackChunk_polkadot_apps=("undefined"!=typeof self?self:this).webpackChunk_polkadot_apps||[]).push([[9768],{66425:(e,s,t)=>{t.d(s,{d:()=>Z,Z:()=>W});var a=t(52322),n=t(2784),o=t(24732),r=t(88909),i=t(69316),l=t(37198),c=t(5469);const d={available:!0,bonded:!0,free:!0,locked:!0,reserved:!0,total:!0},u=o.zo.section`
  .balanceExpander {
    justify-content: flex-start;

    .column {
      width: auto;
      max-width: 18.57rem;

      label {
        text-align: left;
        color: inherit;
      }

      .ui--Expander-content .ui--FormatBalance-value {
        font-size: var(--font-size-small);
      }
    }
  }
`,m=n.memo((function({address:e,className:s}){const{t}=(0,c.$)();return(0,a.jsxs)(u,{className:s,children:[(0,a.jsx)("div",{className:"ui--AddressMenu-sectionHeader",children:t("balance")}),(0,a.jsx)(o.hl,{address:e,className:"balanceExpander",withBalance:d,withLabel:!0},e)]})}));var h=t(90778),p=t(71984),x=t(38894),g=t(19008),b=t(74076),f=t(48783),j=t(1632);const v=n.memo((function({judgement:{judgementName:e,registrars:s}}){const t=(0,n.useMemo)((()=>(0,j.v8)(e)),[e]);return(0,a.jsx)(o.GI,{closeOnScroll:!0,position:"middle",value:(0,a.jsx)(o.v2,{children:s.map((e=>e&&(0,a.jsx)(o.N,{value:e.address},e.address)))}),children:(0,a.jsx)(o.Vp,{color:t,label:`${s.length} ${e}`,size:"tiny"})})})),y=o.zo.div`
  margin-top: 0.714rem;

  &:not(.no-judgements) {
    .ui--Tag:hover {
      cursor: pointer;
    }
  }
`,C=n.memo((function({address:e,className:s=""}){const{t}=(0,c.$)(),n=(0,f.Z)(e);return 0===n.length?(0,a.jsx)("div",{className:`${s} no-judgements`,"data-testid":"judgements",children:(0,a.jsx)(o.Vp,{color:"yellow",label:t("No judgements"),size:"tiny"},"NoJudgements")}):(0,a.jsx)(y,{className:s,"data-testid":"judgements",children:n.map((s=>(0,a.jsx)(v,{judgement:s},`${e}${s.judgementName}`)))})}));var w=t(9118);const N=[{text:"Unknown",value:0},{text:"Fee paid",value:1},{text:"Reasonable",value:2},{text:"Known good",value:3},{text:"Out of date",value:4},{text:"Low quality",value:5}],k={transform:e=>e.isSome?e.unwrap().info.hash.toHex():null},S=n.memo((function({address:e,registrars:s,toggleJudgement:t}){const{t:r}=(0,c.$)(),{api:i}=(0,h.h)(),l=(0,w.W7)(i.query.identity.identityOf,[e],k),[d]=(0,n.useState)((()=>s.map((({address:e})=>e)))),[u,m]=(0,n.useState)(null),[p,x]=(0,n.useState)(2),[g,b]=(0,n.useState)(-1);return(0,n.useEffect)((()=>{const e=s.find((({address:e})=>u===e));b(e?e.index:-1)}),[u,s]),(0,a.jsxs)(o.u_,{header:r("Provide judgement"),onClose:t,size:"small",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.rp,{filter:d,label:r("registrar account"),onChange:m,type:"account"}),(0,a.jsx)(o.II,{isDisabled:!0,label:r("registrar index"),value:-1===g?r("invalid/unknown registrar account"):g.toString()}),(0,a.jsx)(o.Lt,{label:r("judgement"),onChange:x,options:N,value:p}),l?(0,a.jsx)(o.II,{defaultValue:l,isDisabled:!0,label:r("identity hash")}):null===l?(0,a.jsx)(o.oy,{content:r("No identity associated with account")}):(0,a.jsx)(o.$j,{noLabel:!0})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:u,icon:"check",isDisabled:!l||-1===g,label:r("Judge"),onStart:t,params:4===i.tx.identity.provideJudgement.meta.args.length?[g,e,p,l]:[g,e,p],tx:i.tx.identity.provideJudgement})})]})})),I=n.memo((function(){return(0,a.jsxs)("svg",{fill:"none",height:"40",viewBox:"0 0 40 40",width:"40",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,a.jsx)("circle",{cx:"20",cy:"20",fill:"url(#pattern0)",r:"20"}),(0,a.jsxs)("defs",{children:[(0,a.jsx)("pattern",{height:"1",id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",children:(0,a.jsx)("use",{transform:"scale(0.00277778)",xlinkHref:"#image0"})}),(0,a.jsx)("image",{height:"360",id:"image0",width:"360",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAFoCAYAAAB65WHVAAAeFElEQVR4Ae2d6VrbyrZFz/u/RmhCsyE0aSD0bQhdCJAACXH2k9T5pu9VjmJkW7K6VVrjB5/B2JZVa9So6bJU+s+///4b+KENYAAGYMAeA/+hKPaKQk2oCQzAgBhA0HyC4BMUDMCAUQYQtNHCkKBIUDAAAwgaQZOeYAAGjDKAoI0WhvREeoIBGEDQCJr0BAMwYJQBBG20MKQn0hMMwACCRtCkJxiAAaMMIGijhSE9kZ5gAAYQNIImPcEADBhlAEEbLQzpifQEAzCAoBE06QkGYMAoAwjaaGFIT6QnGIABBI2gSU8wAANGGUDQRgtDeiI9wQAMIGgETXqCARgwygCCNloY0hPpCQZgAEEjaNITDMCAUQYQtNHCkJ5ITzAAAwgaQZOeYAAGjDKAoI0WhvREeoIBGEDQCJr0BAMwYJQBBG20MKQn0hMMwACCRtCkJxiAAaMMIGijhSE9kZ5gAAYQNIImPcEADBhlAEEbLQzpifQEAzCAoBE06QkGYMAoAwjaaGFIT6QnGIABBI2gSU8wAANGGUDQRgtDeiI9wQAMIGgETXqCARgwygCCNloY0hPpCQZgAEEjaNITDMCAUQYQtNHCkJ5ITzAAAwgaQZOeYAAGjDKAoI0WhvREeoIBGEDQCJr0BAMwYJQBBG20MKQn0hMMwACCRtCkJxiAAaMMIGijhSE9kZ5gAAYQNIImPcEADBhlAEEbLQzpifQEAzCAoBE06QkGYMAoAwjaaGFIT6QnGIABBI2gSU8wAANGGUDQRgtDeiI9wQAMIGgETXqCARgwygCCNloY0hPpCQZgAEEjaNITDMCAUQYQtNHCkJ5ITzAAAwgaQUeVnn7//h0eHx/Dzc1NuLi4CKenp+Ho6CgcHByE/f39/o9+1336nx6jxz48PAQ9F+khvZgYQNAI2qy0fv78Ga6urvrSfffuXVhYWAivXr0q9aPX0GtJ5nptbSOmDst79TXAIGgEbUZQvV4vXF9fh52dnbC4uFhKxEVErm1pm9q23gMS9CVBy/VG0Ai6VSFp2kFJdmNjI8zMzDQm5WEC13vQe9F7YkoEUbctbwSNoFsRtOaR9/b2wtzcXOtSHiZrvTe9R73Xtjsq2/c5WCBoBN2ofO7u7sL79+/D1NSUWTFnCVvvWe8dUfoUZVt1R9AIuhHp3N/fh7dv30Yl5SxRax+0L211WLbra4BA0Ai6Vtk8PT3153SzZBfzfZqn1r4hTF/CbLreCBpB1yIZfcF2eHgYpqeno0/NwwYS7Zv2kS8TkXRd4kbQCLpyQWuudmlpqbNiHhS29pX5aSRdh6QRNIKuTNBJao7tC8BB4U7yt/aZNI2kq5Y0gkbQlQj6x48fYW1tzU1qHiZxtYHaouqOyuv5lD+CRtClZXJ7e2v6eOZhMq3rfh0/rTZBqj6lWmXdETSCLiWS8/Pz6I5prkvM6dfVlIfapsrOymv5Ez6CRtATS0QrxqWlxO8vF3JSGyFWf2KtquYIGkFPJBCdAo2QXwo5q03UVlV1WF7Hl+wRNIIuLA+t/JYlIu4bLmy1GXL1Jdcq6o2gEXQhcZCch0t43ABFkkbQRaWNoBF0bkEfHx+TnEteMEBtWLST8ni/YkfQCDqXMHTpqHEJkf/nS9dqS6TrV7pFao+gEfRYWeg05i6vqdH0wKK25NRwBJ1H1AgaQY8UtK7ZNz8/T3ouObUxOAioTbkeIpIeJ2kEjaBHCnp9fR05VyznRNZq23EdlP/7ljiCRtBDJXFycoKca5JzImm1MRL2LeFR9UfQCDpTEN++feMU7prlLEnrlHC19ahOyv/8ChxBI+hMObx584b03ICgJWm1NRL2K+FRtUfQCPqFHJjayHe4XDJNUcUtUx0IOkvUCBpB/yVoHVkwOztLem4oPSdyV5tzVAeSHpQ0gkbQfwl6a2sLOTcs50TSavvBDsrfvqWNoBH0Hyk8PDzwxWBLcpak9YWhaoCUfUs5XX8EjaD/CGFjY4P03KKgJWnVIN1B+d23rBE0gu4LQckt+ajNbfNfEqbbnBTtW8rpQRlBI+i+oJl7blfKaUEzF42gE0kjaATdP3qAxZDsCFq14IgOJC1JI2gEHVjn2Y6ckyTNutEIGkEj5/70xuLiIvPPLX85mIg5uVVNko+53PqVNQnauaRvb2+RszE5J5JWbZCzXzmToJ3LWQBwAVh70xuJoHd3dxG08z5KgnYOwNzcHAnaaIJWbUjQJGggcCrp+/t75GxUzkmKVo2QtF9Jk6Cdylmd/vDwEEEbF/TR0RGCdtxHEbTj4q+trSFo44JWjUjQJGggcCbq379/c6Vu43LWNIdOWlGtkLRPSZOgnYk56eh3d3ek5wgELUmrVknduPUlagTtVNCnp6cIOhJBq1aI2ZeYk3ojaKeCZnEku8c/J0dwJLfb29sI2mk/RdBOC7+6ukqCjiRBq1ZJouLWV5JG0E4FzQkq8SRoTljxJeX0IIygHQq61+uRniNJz8k0h2qW7rj87kPaCNqhoLl6SjzpORE0V1nxIeTBgRdBOxQ0K9jFJ2gOtUPQfIRyIuvr62umOCKb4lDNBtMVf3df2iRoJ1JOd+bz83MEHZmgLy4uELTDvoqgHRb98+fPCDoyQatm6UGW37ufnlVjBO1Q0GdnZwgaQSP8CPo+go6gSFWnJRJ0fF8SkqB9JObBvo6gETRpOoI0jaARNB95nMhaXzglx9dyG0eavry8pH866Z/pFE2Cdlj0L1++IOgIUnN68FTN0h2X330kagTtUNCsBR1Hak4LmmsT+hDy4MCLoB0K+unpiQQdWYJWzQY7L393X9oI2qGgdQmlqakpJB2JpFUrLnvVfRlnDbgI2qGgBcLCwgKCjkTQqlVW5+W+7ksbQTsV9Pr6OoKORNCqFTLuvoyzaoygnQp6d3cXQUciaNUqq/NyX/eljaCdCpqzCeM5koOTVLov4mGDLYJ2KmgW7Y9H0CzWj6D5COVQ1K9fv2aaw/g0h2o0LF1xf/fFTYJ2KOakY7979w5BGxe0apTUi9vuC3mwxgjasaA/ffqEoI0LWjUa7LT87UfUCNqxoB8fHxG0cUFzBqEfGWcNvAjasaAFxNLSEpI2Kunl5WXSs/P+iaCdA3B0dISgjQpatclKVdznJ1UjaOeCZprD7uF2qg0y9iPjrFojaOeCFhSrq6ukaGMpem1tDTnTN7lobNao5e2+8/NzBG1M0KqJNw7Z35efFkjQjNKh1+uFubk5JG1E0qoFy4u+lJVHgSNoBN1PaoeHhwjaiKBVC48yYp9fDkoIGkH3ZfD8/BxmZmaQdMuSVg1UC2T1UlYe2wRBI+g/Mtjf30fQLQv64ODgTz08Col9/ntgQtAI+o8QlNxmZ2eRdEuSVtuTnv8WlHdhI2gE/UfQ6gzHx8cIuiVBq+29C4n9/3uAQtAI+i8p6OiBxcVFJN2wpNXmHLnxt5yQ9b8cBw0ELzvFly9fEHTDglabw+JLFr23CQmaBJ0phs3NTSTdkKTV1t5FxP5nD04IGkFnyuHnz5+cvNKAoHVSitoaQWULynu7IGgEPVQOTHXUv5DSzc3N0Pb3Lif2nzloOseYAWpvb4+pjpqStNoWCZGcRzFAgh4jqFGN5+F/OrJAK6u9qklSXl9XbcpRG8h5nEMQNIIem+I0R7qwsICkKxqk1JbMOyPncXLW/xE0gh4raIHy/ft3zjKsQNA6W1Btmadz8hgkjqARdG5Z6Aut6elpkvSEolbb8aUg0i0y8CJoBJ1b0ALr6uoqTE1NIemCklabqe2KdE4ei8wRNIIuLI3Ly0skXUDQkrPaDOEi3KIMIGgEPZE4lAaZ7hh/nLTaiOSMmIuKOXk8gkbQEwlaAH39+pUvDkckaX0hqDZKOhu3iLooAwgaQZcSiI5I4BC8l0labcLRGgi5qJAHH4+gEXQpQQsoLTK/vr7OF4f/n6bVFiy8j5wHZTvJ3wgaQZcWtMDTWXG6XJPXMwOT/dZlwzhDEDlPIuOs5yBoBF2JoBO4bm9vXU55aEqD+WbEnPSDqm4RNIKuVNAC89evX2F7e9tNmta+ap+r6pS8DqJPGEDQCLo2sShNLy8vd1bU2jftY9KZuEWsVTOAoBF07YL59OlTpxb/1yL72qeqOyOvh+AHGUDQCLoR0fR6vf4Vw1+/fh1totZ715W3tS+DHYm/kWsdDCBoBN2obCS309PTqK4critu6z0jZiRch4RHvSaCRtCNCjoNoy6p9f79e5Premj9DL03rraNlNPMNv07gkbQrQk6gV0ndZydnfVPdmlzpTxtWyeZ6L1wogliTvhs8xZBI+jWBZ3uADpcTYsLbW1thaWlpdrnq7UNbUvb5FA5pJxm0cLvCBpBmxL0YKdQktUi9ycnJ+Hjx49hdXU1zM/PFxa3nqPn6jX0WnpNUjJCHuTN2t8IGkGbFvSoDqPr+mlBoru7u75wJd3kR/fpf1z7DwmPYsj6/xA0go5W0NY7F++PwaEsAwgaQSNoGIABowwgaKOFKTvy8nzSGwzEzwCCRtCkJxiAAaMMIGijhSH9xJ9+qCE1LMsAgkbQpCcYgAGjDCBoo4UpO/LyfNIbDMTPAIJG0KQnGIABowwgaKOFIf3En36oITUsywCCRtCkJxiAAaMMIGijhSk78vJ80hsMxM8AgkbQpCcYgAGjDCBoo4Uh/cSffqghNSzLAIJG0KQnGIABowwgaKOFKTvy8nzSGwzEzwCCRtCkJxiAAaMMIGijhSH9xJ9+qCE1LMsAgkbQpCcYgAGjDCBoo4UpO/LyfNIbDMTPAIJG0KQnGIABowwgaKOFIf3En36oITUsywCCRtCkJxiAAaMMIGijhSk78vJ80hsMxM8AgkbQpCcYgAGjDCBoo4Uh/cSffqghNSzLAIJG0KQnGIABowwgaKOFKTvy8nzSGwzEzwCCRtCkJxiAAaMMIGijhSH9xJ9+qCE1LMsAgkbQpCcYgAGjDCBoo4UpO/LyfNIbDMTPAIJG0KQnGIABowwgaKOFIf0UTz+/f/8O+qHtircdbWazzRA0gjYltF6vF75//x5ubm7C+fl5ODo6Cru7u2FzczO8ffs2rKyshH/++ScsLCyE2dnZMDU1FV69epX5o//pMXqsnqPn6jX0WnpNvba2oW1pm9o2orIpKq91QdAIunEpPT8/h9vb2/D58+ewv78fPnz4EN68eRPm5uYyRTtMwHXcr/eg96L3pPem96j3qvfsVRLsd3uDFoJG0LWJR4lUcvv06VPY2dkJa2trJiQ8qdglb+2D9kX7pH0jdbcnLw8DB4JG0JUIOpHxyclJ2NjY6E8pTCrC2J6n6RPts/YdaSPsKgcOBI2gJxL009NTuLi4CNvb2/0pgVFzwbEJt+z7VVtomkRtozZSW1XZaXktP4MAgkbQueTx+PgYzs7O+l+w6Uu3shLz9ny1mb6cVBuqLZGsH8mWqTWCRtCZstCXYpeXl2FrayssLi4i5CFHikw60KhN1bZqY76ARNbDJI6gEfQfQd/f3/cPPVtdXR15+NqkUuJ5ww8HVJvrsD/VYFhn5X5/IkfQjgWtkzp0DLDmSufn50nJFafkSQck1UI1+fLlCyfeOO6fGpARtDMAJOXr6+v+UQc6iWNSifC87DRcdbuoRjpCRDXjLEkSNB+vOihsdWylsY8fP/bPrKtaIrxec7JWDUnWfkRNgu6gkJO5ym/fvvVPabZwhh4Sr1biqqlOV1eNk3pz2z1xI+iOCfrXr1/h9PQ0LC8vM31hZE657sFJtVbNVXsk3S1JI+iOCPru7q4/hTE9PY2YnYh5UPyqvaZAxAKi7oaoEXTEgtbcshbz0Vlrg52Vv6udUoitPcWE2OCLxbhFjaAjFPTPnz/DwcFB1AsPxSa8WN+v5qrFipghVccnawQdkaC1poNWUmMaw3c6nmSwEDNih3VB4pI0go5A0A8PD/11HFiQCDFPIuf0c8SQ1gQRUyRq+7JG0IYFrbSjL30QM2JOS7aK38WU2CJR25Y0gjYoaM0X6lRfxIyYq5DxqNcQY2KNOWqbokbQhgStRe+1YM7MzAxHZTg9VG6UTOv8n5gTe1whxpaoEbQRQWthd9ZZJjHXKeE8ry0GxSLz0zZEjaBbFrS+rNGVpvN0Hh6DwJtiYH19nS8SW3aDBkkE3VIRdALB4eEhh8wxlWF2cNaheWKUk13aS9MIugVBa4Eb1sogDTeVhstuR6yyKFM7kkbQDQv6+PiY1ExqNpuah8lcaVrsMjfdrKgRdEOC/vHjR1hbW4uuYw7rsNzv8xOAGBbLiLoZUSPoBgT99etX1s0gNXdmcNb6HmIaSdcvaQRds6BPTk444QQ5d0bOyScnneAitpF0vZJG0DUJWt98b21tda5jJh2UW59THIN1F+Mc5VGfpBF0DYJ+fn4OOo50EGb+RmpdZECsi3nSdPWiRtAVC1qgsoA+Iu6iiEftk5hH0gja9CitBWeWlpZIzsw5u2RA7LPoUrWSJkFXlKCVHpAzyXlUyvTwP/UBknR1kkbQFQhaK4CtrKy4TE0epMM+Fht41RdYFa8aSSPokoLWN9jv379HzkxrwECKAfUJju4oL2kEXVLQe3t7dMxUxyRtFkubXW4v9Q2O7CgnaQRdQtBXV1fIGTnDwAgG1EeQ9OSSRtATCvrx8THMzs7SOUd0zi6nQ/Yt3ycF9RH1FSQ9maQR9ISC5kSUfB0UkdFO6isIGkE3BsH5+TnJmeQMAwUYUJ9B0sUlTYIumKB1jOfr16/pnAU6JymaFK0+w/HRCLr2UXp3dxc5I2cYmIAB9R1SdDFJk6ALJGidxqorS5AISYQwUJwB9R1OBUfQtY3S+/v7yHmC5ITMisusq22mPkSKzi9pEnTOBK2zonQlia52HPYLiTbBgPoQZxgi6MpH6cvLS+RMeoaBChhQXyJF55M0CTpngv7w4QOds4LO2URKYxu2Pw2oLyFoBF0ZBPpIxlmDtjs9Uo6nPupLTHMg6MoEfXd3R3omPcNAhQyoT5Gix0uaKY4cUxy6ejEJLZ6ERq3s14orgo+XswYwBJ1D0B8/fkTQFaYnBGpfoHXXSH2KBD1e0gg6h6BXV1cRNIKGgQoZUJ9C0Ai6EggWFxfpnBV2zrrTGa9vP6GrTyFoBF0JBBsbGwgaQcNAhQxwqN14OTMHnWN6Q42k9QNYwc5+KiM5x1Ej9SXW5EDQlaTn5GPYxcUFCarCBIVM45BpHXVSX0r6FbejRc2XhDlTtEBiqsOvVOoQlcfXVB9CyqOlnG4fBF1A0FpwfH5+niRNkoaBCRhQ32HR/vxylqgRdAFBq8Fubm7onBN0To9pkX3++xOX+k46HfL7eFkj6IKCFlSsC/13x0NEtMc4BlgHeryMswYsBD2BoLXQy8rKCkmaJA0DORhQX2FxJATd6Menp6cnDr3L0TnHJSv+3+30rUPq1Fey0iH3jZc2CXqCBJ2AxXx0t+XC4FG+vsw7j5dw4pOsWwRdQtBq0KOjIz7mkqRhIIMB9Y0s6XBffmkj6JKCFmxcbaV80iKtdqsNOZU7v4RHDVgIugJB93q9sLy8TIrKSFGIt1vizVNP9QX1iVHi4X/5BI6gKxC0YNMXIVz125+M8gjL02PUB/hSMJ988wxSCLoiQaux7+/vw8zMDEmaJO2SAbGvPpBHPDwmn8QRdIWCFnTX19cuO6enlMi+Zn9SEvuIN59487YTgq5Y0Gr4s7MzJE2KdsWAmM8rHR6XX+IIugZBC8DDw0NXHZRUmZ0qPbSLWEe6+aVbpK0QdE2CVhH29vaQNEm60wyI8SLC4bHFRI6gaxS0YNza2up0B/WQENnH7E8HYhvhFhNu0fZC0DULGklnd26kF3e7IOd6xZyIHEE3IGg19ubmJkma6Y5OMCCWE4FwW6+oEXRDgtZyi0x3xJ0aSf2v+gyzdGi9Uk4Pegi6IUEnjb6zs9OJFIWs/A02YjfhmNtmJI2gGxa0wOaKLP7kFvuAxhVRmhHy4MCHoFsQtIpwcnJCkmZOOgoGxOqgOPi7GWEj6JYELcAvLi7C1NRUFJ009gTI+y/+qUVsilFk3IyMs9oZQbcoaBXk69evYXZ2FkmTpk0xICbFZpY0uK85YSPolgUt2B8eHsLi4qKpDkriLJ44u9JmYlFMIuLmRDysrRG0AUGrOM/Pz2FtbQ1Jk6RbZUAMisVhwuD+ZqWNoI0IWuDr+FIOw/ObXNtO4GKPY5ybFfC4AQ9BGxJ0Uqzz8/MwPT3dapJqWxZsv7mBSqyJuYQ/bu1IGkEbFLQ6yLdv35iXZrqj9kFa881iDSnbkXK6FgjaqKBVpF+/fnHFcCRdm6R15W0xlhYCv9sSNYI2LOiks+hqFVzrsLmP/F2fXhFLXAHFloiTvj54i6AjELSKpsOe3rx5U1ua6rqU2L//G+DEEIfQxSFn9XsEHYmgVSx9w67LC3H2IWm66IAjZsQOR2nEI2cEHZGcVazk5/v376Rp5qZzf5pSahYzCT/c/q8vWW8LEnRKfNaLlX5/SkLHx8ccjoeoh4pah8+JEVJzPEJO93H9jqAjFXRSSM0nrq+vD+2kRT8K8/huTJ+ICeaa4xVz0r8RdOSCTgp5eXkZFhYWELXzRC0GxELCBbdxSxpBd0TQ6oi9Xi8cHBww7eFQ0prOUO3FAFKOW8rp+iHoDgk6Kezj4yMnuDiStE44Uc2T+nOLoIEhArHf398zP91hUWueWTVGyN0R8mAtSdARiHawaEX/1sLrq6urzE93RNaqJYvpd1fK6f6NoB0IOin49fV1WFlZQdSRilq1Uw2TenLbfUkjaEeCTjq00tfbt28RdSSiVq1IzN2XcdI/07cI2qGgEwB0dtnm5ianjhsUtU7NVm04A9CnmJM+iqAdCzqB4OnpqX+I1vz8PKm6ZVmrBjpcTjVJ6sOtX0kjaAT9RwQ6Jfjq6orpjxYkrWkMtT2nZfuVcdZAjKAR9B9BpwHRcbX7+/ucnVijrHXWn9qYY5iRcrrvpX9H0Ag6U9BpSO7u7sLu7m6Ym5tjCqSksNWGaku1abqN+R1JZzGAoBF0IVHoaILt7e3AfHX+RZXUVmozjsRAwlkSHnUfgkbQhQSdhkkXGz06OuqfBMNFBP4nbLWFTiZR23BBVqSc7jNFf0fQCHpiQadhe35+7q+ipqS4vLzsbipkaWmpn5K1kpzaIt02/I6kJ2UAQSPoWmQiSemsN30JpjTZpYveal+0T9o37SNCRsCTCnjc8xA0gq5F0FngaQF5JUwd5/vu3bsojhDRkRZ6r3rPeu8sgo+Ms9iu6z4EjaAbE3QWxFq/WGfLKYmenJyEnZ2dvhA1ZaAjHuqc29ZraxvaliSsbes96L3oPbG2MjLOYrbJ+xA0gm5V0Hlg1xSCkqsOTZM8P3/+3P85PT3tC1XX3VPCTf/oPslWj0ker+fqNfRaTEsg3zzstf0YBI2gzQu67U7C9pF5WwwgaASNoGEABowygKCNFqatEZvtkhZhwA4DCBpBk55gAAaMMoCgjRaGFGMnxVALatEWAwgaQZOeYAAGjDKAoI0Wpq0Rm+2SFmHADgMIGkGTnmAABowygKCNFoYUYyfFUAtq0RYDCBpBk55gAAaMMoCgjRamrRGb7ZIWYcAOAwgaQZOeYAAGjDKAoI0WhhRjJ8VQC2rRFgMIGkGTnmAABowygKCNFqatEZvtkhZhwA4DCBpBk55gAAaMMoCgjRaGFGMnxVALatEWAwgaQZOeYAAGjDKAoI0Wpq0Rm+2SFmHADgMIGkGTnmAABowygKCNFoYUYyfFUAtq0RYDCBpBk55gAAaMMoCgjRamrRGb7ZIWYcAOAwgaQZOeYAAGjDKAoI0WhhRjJ8VQC2rRFgMIGkGTnmAABowygKCNFqatEZvtkhZhwA4DCBpBk55gAAaMMoCgjRaGFGMnxVALatEWAwgaQZOeYAAGjDKAoI0Wpq0Rm+2SFmHADgMIGkGTnmAABowygKCNFoYUYyfFUAtq0RYDCBpBk55gAAaMMoCgjRamrRGb7ZIWYcAOAwgaQZOeYAAGjDKAoI0WhhRjJ8VQC2rRFgMIGkGTnmAABowygKCNFqatEZvtkhZhwA4DCBpBk55gAAaMMoCgjRaGFGMnxVALatEWAwgaQZOeYAAGjDKAoI0Wpq0Rm+2SFmHADgMIGkGTnmAABowygKCNFoYUYyfFUAtq0RYDCBpBk55gAAaMMoCgjRamrRGb7ZIWYcAOAwgaQZOeYAAGjDKAoI0WhhRjJ8VQC2rRFgMIGkGTnmAABowygKCNFqatEZvtkhZhwA4DCBpBk55gAAaMMvBfNudY0IVxrEoAAAAASUVORK5CYII="})]})]})})),A=n.memo((function({address:e,identity:s}){const{t}=(0,c.$)(),{api:r}=(0,h.h)(),{isRegistrar:i,registrars:l}=(0,p.F)(),[d,u]=(0,x.O)(),m=(0,g.x)(e),f=(0,n.useMemo)((()=>m?.map((e=>(0,a.jsx)(o.ax,{className:"subs",isPadded:!1,value:e},e.toString())))),[m]);return s&&s.isExistent&&r.query.identity?.identityOf?(0,a.jsxs)("section",{className:"withDivider","data-testid":"identity-section",children:[(0,a.jsxs)("div",{className:"ui--AddressMenu-section ui--AddressMenu-identity",children:[(0,a.jsx)("div",{className:"ui--AddressMenu-sectionHeader",children:t("identity")}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.jb,{icon:(0,a.jsx)(I,{}),subtitle:s.legal,title:s.display}),(0,a.jsx)(C,{address:e}),(0,a.jsxs)("div",{className:"ui--AddressMenu-identityTable",children:[s.parent&&(0,a.jsxs)("div",{className:"tr parent",children:[(0,a.jsx)("div",{className:"th",children:t("parent")}),(0,a.jsx)("div",{className:"td",children:(0,a.jsx)(o.ax,{className:"parent",isPadded:!1,value:s.parent})})]}),s.email&&(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"th",children:t("email")}),(0,a.jsx)("div",{className:"td",children:(0,b.vq)(s.email)||!s.isKnownGood?s.email:(0,a.jsx)("a",{href:`mailto:${s.email}`,rel:"noopener noreferrer",target:"_blank",children:s.email})})]}),s.web&&(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"th",children:t("website")}),(0,a.jsx)("div",{className:"td",children:(0,b.vq)(s.web)||!s.isKnownGood?s.web:(0,a.jsx)("a",{href:s.web.replace(/^(https?:\/\/)?/g,"https://"),rel:"noopener noreferrer",target:"_blank",children:s.web})})]}),s.twitter&&(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"th",children:t("twitter")}),(0,a.jsx)("div",{className:"td",children:(0,b.vq)(s.twitter)||!s.isKnownGood?s.twitter:(0,a.jsx)("a",{href:s.twitter.startsWith("https://twitter.com/")?s.twitter:`https://twitter.com/${s.twitter}`,rel:"noopener noreferrer",target:"_blank",children:s.twitter})})]}),s.riot&&(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"th",children:t("riot")}),(0,a.jsx)("div",{className:"td",children:s.riot})]}),!!m?.length&&(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"th top",children:t("subs")}),(0,a.jsx)("div",{className:"td","data-testid":"subs",children:m.length>4?(0,a.jsx)(o.xH,{summary:m.length,children:f}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"subs-number",children:m.length}),f]})})]})]})]})]}),i&&(0,a.jsx)("div",{className:"ui--AddressMenu-section",children:(0,a.jsx)("div",{className:"ui--AddressMenu-actions",children:(0,a.jsx)("ul",{children:(0,a.jsx)("li",{children:(0,a.jsx)(o.JH,{icon:"address-card",label:t("Add identity judgment"),onClick:u})})})})}),d&&i&&(0,a.jsx)(S,{address:e,registrars:l,toggleJudgement:u},"modal-judgement")]}):null})),E=n.memo((function({isMultisig:e,meta:s}){const{t}=(0,c.$)();if(!e||!s)return null;const{threshold:n,who:r}=s;return(0,a.jsxs)("section",{className:"ui--AddressMenu-multisig withDivider",children:[(0,a.jsx)("div",{className:"ui--AddressMenu-sectionHeader",children:t("multisig")}),(0,a.jsxs)("div",{className:"ui--AddressMenu-multisigTable",children:[(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"th",children:t("threshold")}),(0,a.jsxs)("div",{className:"td",children:[n,"/",r.length]})]}),(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"th signatories",children:t("signatories")}),(0,a.jsx)("div",{className:"td",children:r?.map((e=>(0,a.jsx)(o.ax,{value:e},e)))})]})]})]})}));var M=t(63198),P=t(69187),T=t(33661),D=t(14868);const F=o.zo.div`
  width: 100%;

  .ui--Button-Group {
    display: flex;
    flex-direction: row;
    justify-content: space-around;
    margin-bottom: 0;
  }
`,V=n.memo((function({className:e="",flags:s,isEditing:t,isEditingName:r,onCancel:i,onForgetAddress:l,onSaveName:d,onSaveTags:u,onUpdateName:m,recipientId:p,toggleIsEditingName:g,toggleIsEditingTags:b}){const{t:f}=(0,c.$)(),[j,v]=(0,x.O)(),y=(0,h.h)(),C=(0,n.useCallback)((()=>{l(),m&&m()}),[l,m]),w=(0,n.useCallback)((()=>{s.isEditable&&g(),b()}),[s.isEditable,g,b]),N=(0,n.useCallback)((()=>{d(),m&&m()}),[d,m]),k=(0,n.useCallback)((()=>{r&&(s.isInContacts||s.isOwned)&&(N(),g())}),[r,s.isInContacts,s.isOwned,N,g]),S=(0,n.useCallback)((()=>{t&&(k(),u()),w()}),[t,w,k,u]);return(0,a.jsxs)(F,{className:`${e} ui--AddressMenu-buttons`,children:[t?(0,a.jsxs)(o.zx.Group,{children:[(0,a.jsx)(o.zx,{icon:"times",label:f("Cancel"),onClick:i}),(0,a.jsx)(o.zx,{icon:"save",label:f("Save"),onClick:S})]}):(0,a.jsxs)(o.zx.Group,{children:[(0,T.m)(y.api.tx.balances?.transfer)&&(0,a.jsx)(o.zx,{icon:"paper-plane",isDisabled:t,label:f("Send"),onClick:v}),!s.isOwned&&!s.isInContacts&&(0,a.jsx)(o.zx,{icon:"plus",isDisabled:t,label:f("Save"),onClick:N}),!s.isOwned&&s.isInContacts&&(0,a.jsx)(o.zx,{icon:"ban",isDisabled:t,label:f("Remove"),onClick:C}),(0,a.jsx)(o.zx,{icon:"edit",isDisabled:!s.isEditable,label:f("Edit"),onClick:S})]}),j&&(0,a.jsx)(D.Z,{onClose:v,recipientId:p},"modal-transfer")]})}));var R=t(72282),q=t.n(R);const O=n.memo((function({accountIndex:e,defaultValue:s,editingName:t,flags:n,onChange:r,value:i}){const{t:l}=(0,c.$)(),[d,u]=(0,x.O)(),m=()=>{};return(0,a.jsxs)("div",{className:"ui--AddressSection",children:[(0,a.jsx)(o.k,{size:80,value:i}),(0,a.jsxs)("div",{className:"ui--AddressSection__AddressColumn",children:[(0,a.jsx)(o.RV,{override:t?(0,a.jsx)(o.II,{className:"name--input",defaultValue:s,label:"name-input",onChange:r,withLabel:!1}):n.isEditable?s.toUpperCase()||l("<unknown>"):void 0,value:i,withSidebar:!1}),(0,a.jsx)("div",{className:"ui--AddressMenu-addr",children:i}),e&&(0,a.jsxs)("div",{className:"ui--AddressMenu-index",children:[(0,a.jsxs)("label",{children:[l("index"),":"]})," ",e]})]}),(0,a.jsx)("div",{className:"ui--AddressSection__CopyColumn",children:(0,a.jsx)("div",{className:"ui--AddressMenu-copyaddr",children:(0,a.jsx)(q(),{text:i,children:(0,a.jsx)("span",{children:(0,a.jsx)(o.zx.Group,{children:(0,a.jsx)(o.zx,{icon:d?"check":"copy",label:l(d?"Copied":"Copy"),onClick:d?m:u,onMouseLeave:d?u:m})})})})})})]})})),z=o.zo.div`
  .ui--Tag {
    margin: 0.2rem 1rem 0.2rem 0.571rem;
  }
`,B=n.memo((function({className:e="",flags:{isCouncil:s,isDevelopment:t,isExternal:n,isInjected:r,isMultisig:i,isNominator:l,isProxied:d,isSociety:u,isSudo:m,isTechCommittee:h,isValidator:p}}){const{t:x}=(0,c.$)(),g=s||t||n||r||i||d||u||m||h||p||l;return g?(0,a.jsxs)(z,{className:`${e} ui--AddressMenu-flags`,children:[g&&(0,a.jsx)("h5",{children:x("Flags")}),(0,a.jsxs)("div",{children:[p&&(0,a.jsx)(o.WN,{color:"theme",label:x("Validator")}),l&&(0,a.jsx)(o.WN,{color:"theme",label:x("Nominator")}),n&&(i?(0,a.jsx)(o.WN,{color:"green",label:x("Multisig")}):d?(0,a.jsx)(o.WN,{color:"grey",label:x("Proxied")}):(0,a.jsx)(o.WN,{color:"grey",label:x("External")})),r&&(0,a.jsx)(o.WN,{color:"grey",label:x("Injected")}),t&&(0,a.jsx)(o.WN,{color:"grey",label:x("Test account")}),s&&(0,a.jsx)(o.WN,{color:"blue",label:x("Council")}),u&&(0,a.jsx)(o.WN,{color:"green",label:x("Society")}),h&&(0,a.jsx)(o.WN,{color:"orange",label:x("Technical committee")}),m&&(0,a.jsx)(o.WN,{color:"pink",label:x("Sudo key")})]})]}):null})),$=n.memo((function({accountIndex:e,address:s,isBeingEdited:t,onUpdateName:r,sidebarRef:i}){const{flags:c,isEditing:d,isEditingName:u,isEditingTags:m,name:h,onForgetAddress:p,onSaveName:x,onSaveTags:g,setIsEditingName:b,setIsEditingTags:f,setName:j,setTags:v,tags:y,toggleIsEditingName:C,toggleIsEditingTags:w}=(0,l.B)(s),N=(0,n.useMemo)((()=>[i]),[i]);(0,n.useEffect)((()=>{t(d())}),[t,d]);const k=(0,n.useCallback)((()=>{if(d())try{const e=P.Nn.getAccount(s)||P.Nn.getAddress(s);j(e?.meta.name||""),v(e?.meta.tags?e.meta.tags.sort():[]),b(!1),f(!1)}catch(e){}}),[d,j,v,b,f,s]);return(0,M.O)(N,k),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O,{accountIndex:e,defaultValue:h,editingName:u,flags:c,onChange:j,value:s}),(0,a.jsx)("div",{className:"ui--AddressMenu-tags","data-testid":"sidebar-tags",children:(0,a.jsx)(o.$G,{isEditable:!0,isEditing:m,onChange:v,value:y,withEditButton:!1,withTitle:!0})}),(0,a.jsx)(B,{flags:c}),(0,a.jsx)(V,{flags:c,isEditing:d(),isEditingName:u,onCancel:k,onForgetAddress:p,onSaveName:x,onSaveTags:g,onUpdateName:r,recipientId:s,toggleIsEditingName:C,toggleIsEditingTags:w})]})})),L=(0,o.zo)(r.Z)`
  display: flex;
  flex-direction: column;
  background-color: var(--bg-sidebar);
  max-width: 30.42rem;
  min-width: 30.42rem;
  overflow-y: hidden;
  padding: 0 0 3.286rem;

  input {
    width: auto !important;
  }

  .ui--AddressMenu-header {
    align-items: center;
    background: var(--bg-tabs);
    border-bottom: 1px solid var(--border-table);
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 1.35rem 1rem 1rem 1rem;
  }

  .ui--AddressSection {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    width: 100%;

    .ui--AddressSection__AddressColumn {
      flex: 1;
      margin-left: 1rem;

      .ui--AccountName {
        max-width: 21.5rem;
        overflow: hidden;
        white-space: normal;
      }
    }

    .ui--AddressSection__CopyColumn {
      margin-left: 1rem;

      .ui--AccountName {
        max-width: 10rem;
        overflow: hidden;
      }
    }
  }

  .ui--AddressMenu-addr,
  .ui--AddressMenu-index {
    text-align: left;
    font-size: var(--font-size-small);
  }

  .ui--AddressMenu-addr {
    word-break: break-all;
    width: 24ch;
    margin: 0.571rem 0;
    color: var(--color-label);
  }

  .ui--AddressMenu-copyaddr,
  .ui--AddressMenu-index {
    text-align: left;
    font-size: var(--font-size-small);
  }

  .ui--AddressMenu-copyaaddr {
    word-break: break-all;
    width: 12ch;
    margin: 0.371rem 0;
    color: var(--color-label);
  }


  .ui--AddressMenu-index {
    display: flex;
    flex-direction: row;

    label {
      font-size: var(--font-size-small);
      margin-right: 0.4rem;
      text-transform: capitalize;
    }
  }

  section {
    position: relative;

    &:not(:last-child) {
      margin-bottom: 1rem;
    }

    .ui--AddressMenu-sectionHeader {
      display: flex;
      justify-content: space-between;
      align-items: center;
      text-transform: capitalize;

      margin-bottom: 0.57rem;
      width: 100%;

      color: var(--color-text);
      font-size: 1.143rem;
    }

    &.withDivider {
      padding-top: 1rem;

      ::before {
        position: absolute;
        top: 0;
        left: 0;

        content: '';
        width: 100%;
        height: 1px;
        background-color: var(--border-table);
      }
    }
  }

  .ui--AddressMenu-identity,
  .ui--AddressMenu-multisig {
    .ui--AddressMenu-identityTable,
    .ui--AddressMenu-multisigTable {
      font-size: var(--font-size-small);
      margin-top: 0.6rem;

      .tr {
        padding: 0.25rem 0;
        display: inline-flex;
        align-items: center;
        width: 100%;

        .th {
          text-transform: uppercase;
          color: var(--color-label);
          font-weight: var(--font-weight-normal);
          text-align: left;
          flex-basis: 25%;
          font-size: var(--font-size-tiny);

          &.top {
            align-self: flex-start;
          }
        }

        .td {
          flex: 1;
          overflow: hidden;
          padding-left: 0.6rem;
          text-overflow: ellipsis;
        }
      }

      .ui--AddressMini, .subs-number {
        margin-bottom: 0.4rem;
        padding: 0;
      }

      .subs-number {
        font-size: var(--font-size-base);
        margin-bottom: 0.714rem;
      }
    }

    .parent {
      padding: 0 !important;
    }
  }

  && .column {
    align-items: center;

    .ui--FormatBalance:first-of-type {
      margin-bottom: 0.4rem;
    }

    .ui--FormatBalance {
      line-height: 1rem;
    }
  }

  .ui--AddressMenu-buttons {
    .ui--Button-Group {
      margin-bottom: 0;
    }
  }

  .ui--AddressMenu-tags,
  .ui--AddressMenu-flags {
    margin: 0.75rem 0 0;
    width: 100%;
  }

  .ui--AddressMenu-identityIcon {
    background: ${i.Iv}66;
  }

  .ui--AddressMenu-actions {
    ul {
      list-style-type: none;
      margin-block-start: 0;
      margin-block-end: 0;
      padding-inline-start: 1rem;

      li {
        margin: 0.2rem 0;
      }
    }
  }

  .inline-icon {
    cursor: pointer;
    margin: 0 0 0 0.5rem;
    color: ${i.Iv};
  }

  .name--input {
    .ui.input {
      margin: 0 !important;

      > input {
      }
    }
  }

  &.inEditMode {
    .ui--AddressMenu-flags {
      opacity: 60%;
    }
  }

  .ui--AddressMenu-multisig .th.signatories {
    align-self: flex-start;
  }

  .ui--ScrollSection {
    padding: 1rem;
    overflow: auto;
  }

  .ui--LinkSection {
    border-top: 1px solid var(--border-table);
    padding: 0.5rem 0 0.571rem;
    width: 100%;
    position: absolute;
    bottom: 0;

    span {
      margin: 0 0.5rem;
    }
  }
`,H=n.memo((function({address:e,className:s="",dataTestId:t,onClose:r,onUpdateName:i}){const[c,d]=(0,n.useState)(!1),{accountIndex:u,flags:h,identity:p,meta:x}=(0,l.B)(e),g=(0,n.useRef)(null);return(0,a.jsxs)(L,{className:`${s}${c?" inEditMode":""}`,dataTestId:t,onClose:r,position:"right",sidebarRef:g,children:[(0,a.jsx)("div",{className:"ui--AddressMenu-header","data-testid":"sidebar-address-menu",children:(0,a.jsx)($,{accountIndex:u,address:e,isBeingEdited:d,onUpdateName:i,sidebarRef:g})}),(0,a.jsxs)("div",{className:"ui--ScrollSection",children:[(0,a.jsx)(m,{address:e}),(0,a.jsx)(A,{address:e,identity:p}),(0,a.jsx)(E,{isMultisig:h.isMultisig,meta:x})]}),(0,a.jsx)("section",{className:"ui--LinkSection",children:(0,a.jsx)(o.NR,{data:e,isSidebar:!0,type:"address"})})]})})),_=[null,null],Z=n.createContext(void 0),W=n.memo((function({children:e}){const[[s,t],o]=(0,n.useState)(_),r=(0,n.useCallback)((()=>o([null,null])),[]);return(0,a.jsxs)(Z.Provider,{value:o,children:[e,s&&(0,a.jsx)(H,{address:s,dataTestId:"account-sidebar",onClose:r,onUpdateName:t})]})}))},75994:(e,s,t)=>{t.d(s,{Z:()=>tt});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(34814),l=t(83337),c=t(11798),d=t(90778),u=t(45479),m=t(38894),h=t(54131),p=t(32980),x=t(19276),g=t(47623),b=t(69187),f=t(16039),j=t(95292),v=t(33661),y=t(31667),C=t(98551),w=t(55858),N=t(74076),k=t(17965),S=t(81503),I=t(6851),A=t(21924),E=t(57594),M=t(52926),P=t(46186),T=t(5469),D=t(1632),F=t(43151);function V({onChange:e,onEnter:s}){const{t}=(0,T.$)(),[{isPass1Valid:o,password1:i},l]=(0,n.useState)({isPass1Valid:!1,password1:""}),[{isPass2Valid:c,password2:d},u]=(0,n.useState)({isPass2Valid:!1,password2:""});(0,n.useEffect)((()=>e(i,o&&c)),[i,e,o,c]);const m=(0,n.useCallback)((e=>{l({isPass1Valid:b.Nn.isPassValid(e),password1:e}),u({isPass2Valid:b.Nn.isPassValid(d)&&d===e,password2:d})}),[d]),h=(0,n.useCallback)((e=>u({isPass2Valid:b.Nn.isPassValid(e)&&e===i,password2:e})),[i]);return(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:t("The password and password confirmation for this account. This is required to authenticate any transactions made and to encrypt the keypair.")}),(0,a.jsx)("p",{children:t("Ensure you are using a strong password for proper account protection.")})]}),children:[(0,a.jsx)(r.ro,{className:"full",isError:!o,label:t("password"),onChange:m,onEnter:s,value:i}),(0,a.jsx)(r.ro,{className:"full",isError:!c,label:t("password (repeat)"),onChange:h,onEnter:s,value:d}),(0,a.jsx)(r.YV,{value:i})]})}const R=n.memo((({name:{isNameValid:e,name:s},onCommit:t,setName:o,setPassword:i})=>{const{t:l}=(0,F.$)(),c=(0,n.useCallback)((e=>o({isNameValid:!!e.trim(),name:e})),[o]),d=(0,n.useCallback)(((e,s)=>i({isPasswordValid:s,password:e})),[i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.u_.Columns,{hint:l("The name for this account and how it will appear under your addresses. With an on-chain identity, it can be made available to others."),children:(0,a.jsx)(r.II,{className:"full",isError:!e,label:l("name"),onChange:c,onEnter:t,placeholder:l("new account"),value:s})}),(0,a.jsx)(V,{onChange:d,onEnter:t})]})})),q=n.memo((function({address:e,derivePath:s,name:t,pairType:n,seed:o}){const{t:i}=(0,T.$)(),l=o&&o.split(" "),c=(0,N.vq)(o)?`${o.slice(10)} … ${o.slice(-8)}`:l&&l.map(((e,s)=>s%3?"…":e)).join(" ");return(0,a.jsx)(r.u_.Content,{children:(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:i('We will provide you with a generated backup file after your account is created. As long as you have access to your account you can always download this file later by clicking on "Backup" button from the Accounts section.')}),(0,a.jsx)("p",{children:i("Please make sure to save this file in a secure location as it is required, together with your password, to restore your account.")})]}),children:[e&&t&&(0,a.jsx)(r.mV,{defaultName:t,isInline:!0,noDefaultNameOpacity:!0,value:e}),c&&(0,a.jsx)(r.qG,{label:i("partial seed"),value:c}),(0,a.jsx)(r.qG,{label:i("keypair type"),value:n}),(0,a.jsx)(r.qG,{label:i("derivation path"),value:s||i("<none provided>")})]})})})),O="m/44'/60'/0'/0/0",z=n.memo((function({className:e,derivePath:s,deriveValidation:t,onChange:o,seedType:i}){const{t:l}=(0,T.$)(),[c,d]=(0,n.useState)(0),[u,h]=(0,n.useState)(j.nw),[p]=(0,n.useState)((()=>new Array(10).fill(0).map(((e,s)=>({key:s,text:l("Address index {{index}}",{replace:{index:s}}),value:s}))))),[x,g]=(0,m.O)(),[b,f]=(0,m.O)(),v=(0,n.useRef)({INVALID_DERIVATION_PATH:l("This is an invalid derivation path."),PASSWORD_IGNORED:l("Password are ignored for hex seed"),SOFT_NOT_ALLOWED:l("Soft derivation paths are not allowed on ed25519"),WARNING_SLASH_PASSWORD:l('Your password contains at least one "/" character. Disregard this warning if it is intended.')});return(0,n.useEffect)((()=>{o(`m/44'/60'/0'/0/${b?Number(u):c}`)}),[u,o,b,c]),(0,a.jsxs)(r.u_.Columns,{className:e,hint:l("raw"===i?"The derivation path is only relevant when deriving keys from a mnemonic.":"The derivation path allows you to create different accounts from the same base mnemonic."),children:["bip"===i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"saveToggle",children:(0,a.jsx)(r.XZ,{label:(0,a.jsx)(a.Fragment,{children:l("Use custom address index")}),onChange:f,value:b})}),b?(0,a.jsx)(r.Rn,{isDecimal:!1,label:l("Custom index"),onChange:h,value:u}):(0,a.jsx)(r.Lt,{label:l("address index"),onChange:d,options:p,value:c}),(0,a.jsx)("div",{className:"saveToggle",children:(0,a.jsx)(r.XZ,{label:(0,a.jsx)(a.Fragment,{children:l("Use custom derivation path")}),onChange:g,value:x})}),x?(0,a.jsx)(r.II,{isError:!!t?.error,label:l("secret derivation path"),onChange:o,placeholder:O,tabIndex:-1,value:s}):null]}):(0,a.jsx)(r.Pd,{content:l("The derivation path is only relevant when deriving keys from a mnemonic.")}),t?.error&&(0,a.jsx)(r.oy,{content:v.current[t.error]||t.error}),t?.warning&&(0,a.jsx)(r.Pd,{content:v.current[t.warning]})]})}));var B=t(72570);const $=(0,t(77004).h)(20),L=n.memo((function({className:e,onClose:s}){const{t}=(0,T.$)(),{api:o}=(0,d.h)(),{getLedger:i}=(0,u.c)(),[l,c]=(0,n.useState)(0),[m,h]=(0,n.useState)(0),[p,x]=(0,n.useState)(null),[{isNameValid:g,name:f},j]=(0,n.useState)({isNameValid:!1,name:""}),[v,y]=(0,n.useState)(!1),C=(0,n.useRef)($.map((e=>({text:t("Account type {{index}}",{replace:{index:e}}),value:e})))),w=(0,n.useRef)($.map((e=>({text:t("Address index {{index}}",{replace:{index:e}}),value:e})))),N=(0,n.useCallback)((e=>j({isNameValid:!!e.trim(),name:e})),[]),k=(0,n.useCallback)((()=>{x(null),y(!0),async function(e,s,t,a,n){const{address:o}=await s().getAddress(!1,a,n);b.Nn.addHardware(o,"ledger",{accountOffset:a,addressOffset:n,genesisHash:e.genesisHash.toHex(),name:t||`ledger ${a}/${n}`})}(o,i,f,l,m).then((()=>s())).catch((e=>{console.error(e),y(!1),x(e)}))}),[l,m,o,i,f,s]);return(0,a.jsxs)(r.u_,{className:e,header:t("Add account via Ledger"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:t("The name for this account as it will appear under your accounts."),children:(0,a.jsx)(r.II,{autoFocus:!0,className:"full",isError:!g,label:t("name"),onChange:N,placeholder:t("account name"),value:f})}),(0,a.jsx)(r.u_.Columns,{hint:t("The account type that you wish to create. This is the top-level derivation."),children:(0,a.jsx)(r.Lt,{label:t("account type"),onChange:c,options:C.current,value:l})}),(0,a.jsxs)(r.u_.Columns,{hint:t("The address index on the account that you wish to add. This is the second-level derivation."),children:[(0,a.jsx)(r.Lt,{label:t("address index"),onChange:h,options:w.current,value:m}),p&&(0,a.jsx)(r.oy,{content:p.message})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"plus",isBusy:v,isDisabled:!g,label:t("Save"),onClick:k})})]})})),H=B.uG.filter((({hasLedgerSupport:e})=>e)),_=n.memo((function({className:e,onChange:s,seedType:t}){const{t:o}=(0,T.$)(),[i,l]=(0,n.useState)(0),[c,d]=(0,n.useState)(0),[u,m]=(0,n.useState)("polkadot"),h=(0,n.useRef)(H.map((({displayName:e,network:s})=>({text:e,value:s})))),p=(0,n.useRef)($.map((e=>({text:o("Account type {{index}}",{replace:{index:e}}),value:e})))),x=(0,n.useRef)($.map((e=>({text:o("Address index {{index}}",{replace:{index:e}}),value:e}))));return(0,n.useEffect)((()=>{const e=H.find((({network:e})=>e===u));s(`m/44'/${e?.slip44}'/${i}'/0'/${c}'`)}),[i,c,u,s]),(0,a.jsx)(r.u_.Columns,{className:e,hint:o("The derivation will be constructed from the values you specify."),children:"bip"===t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Lt,{label:o("Ledger app type (originated from)"),onChange:m,options:h.current,value:u}),(0,a.jsx)(r.Lt,{label:o("account type"),onChange:l,options:p.current,value:i}),(0,a.jsx)(r.Lt,{label:o("address index"),onChange:d,options:x.current,value:c})]}):(0,a.jsx)(r.oy,{content:o("Derivation for Ledger-type accounts are only available on mnemonic seeds.")})})})),Z=navigator.userAgent.toLowerCase().indexOf(" electron/")>-1,W=n.memo((function(){const{t:e}=(0,T.$)();return Z?null:(0,a.jsx)(r.Pd,{content:(0,a.jsxs)(a.Fragment,{children:[e("Consider storing your account in a signer such as a browser extension, hardware device, QR-capable phone wallet (non-connected) or desktop application for optimal account security.")," ",e("Future versions of the web-only interface will drop support for non-external accounts, much like the IPFS version.")]})})}));function U(e,s,t){return"ed25519-ledger"===t?(0,w.c)((0,S.O)(e,s).secretKey.slice(0,32)):"ethereum"===t?`${e}/${s}`:`${e}${s}`}function J(e,s,t){return b.Nn.createFromUri(U(e,s,t),{},"ed25519-ledger"===t?"ed25519":t).address}function G(e,s,t,a="sr25519"){const n=function(e,s){switch(s){case"bip":return(0,E._)();case"dev":return y.g;default:return e||(0,w.c)((0,M.F)())}}(e,t);return{address:J(n,s,a),derivePath:s,deriveValidation:void 0,isSeedValid:!0,pairType:a,seed:n,seedType:t}}function Q(e,s,t,a){let n=null,o=function(e,s,t,a){try{const{password:n,path:o}=(0,I.Q)("ethereum"===a?`${e}/${t}`:`${e}${t}`);let r={};return n?.includes("/")&&(r={warning:"WARNING_SLASH_PASSWORD"}),"ed25519"===a&&o.some((({isSoft:e})=>e))?{...r,error:"SOFT_NOT_ALLOWED"}:"raw"===s&&n?{...r,error:"PASSWORD_IGNORED"}:"ethereum"!==a||(0,A.p)(t)?r:{...r,error:"INVALID_DERIVATION_PATH"}}catch(e){return{error:e.message}}}(e,t,s,a),r=!1;if("raw"===t)r=function(e){return e.length>0&&e.length<=32||function(e){return(0,N.vq)(e)&&66===e.length}(e)}(e);else{const s=e.split(" ");"ed25519-ledger"===a&&25===s.length?(s.pop(),r=(0,P.S)(s.join(" "))):r=(0,P.S)(e)}if(!o?.error&&r)try{n=J(e,s,a)}catch(e){console.error(e),o={error:e.message?e.message:e.toString()},r=!1}return{address:n,derivePath:s,deriveValidation:o,isSeedValid:r,pairType:a,seed:e,seedType:t}}const Y=(0,r.zo)(r.u_)`
  .accounts--Creator-advanced {
    margin-top: 1rem;
    overflow: visible;
  }

  .ui--CopyButton.copyMoved {
    position: absolute;
    right: 9.25rem;
    top: 1.15rem;
  }

  && .TextAreaWithDropdown {
    textarea {
      width: 80%;
    }
    .ui.buttons {
      width: 20%;
    }
  }

  .saveToggle {
    text-align: right;

    .ui--Checkbox {
      margin: 0.8rem 0;

      > label {
        font-weight: var(--font-weight-normal);
      }
    }
  }
`,K=n.memo((function({className:e="",onClose:s,onStatusChange:t,seed:o,type:i}){const{t:l}=(0,T.$)(),{api:c,isDevelopment:m,isEthereum:h}=(0,d.h)(),{isLedgerEnabled:p}=(0,u.c)(),[{address:x,derivePath:g,deriveValidation:j,isSeedValid:v,pairType:y,seed:w,seedType:N},S]=(0,n.useState)((()=>G(o,h?O:"",o?"raw":"bip",h?"ethereum":i))),[I,A]=(0,n.useState)(!1),[E,M,P]=(0,C.t)(),[F,V]=(0,n.useState)(!1),[{isNameValid:B,name:$},L]=(0,n.useState)((()=>({isNameValid:!1,name:""}))),[{isPasswordValid:H,password:Z},J]=(0,n.useState)((()=>({isPasswordValid:!1,password:""}))),K=!!x&&I&&!j?.error&&v,X=B&&H,ee=K&&X,se=(0,n.useRef)({INVALID_DERIVATION_PATH:l("This is an invalid derivation path."),PASSWORD_IGNORED:l("Password are ignored for hex seed"),SOFT_NOT_ALLOWED:l("Soft derivation paths are not allowed on ed25519"),WARNING_SLASH_PASSWORD:l('Your password contains at least one "/" character. Disregard this warning if it is intended.')}),te=(0,n.useRef)((m?[{text:l("Development"),value:"dev"}]:[]).concat({text:l("Mnemonic"),value:"bip"},h?{text:l("Private Key"),value:"raw"}:{text:l("Raw seed"),value:"raw"})),ae=(0,n.useCallback)((e=>S(Q(w,e,N,y))),[y,w,N]),ne=(0,n.useCallback)((e=>S(Q(e,g,N,y))),[g,y,N]),oe=(0,n.useCallback)((e=>S(Q(w,h?O:"",N,e))),[w,N,h]),re=(0,n.useCallback)((e=>{e!==N&&S(G(null,g,e,y))}),[g,y,N]),ie=(0,n.useCallback)((()=>A(!I)),[I]),le=(0,n.useCallback)((()=>{ee&&(V(!0),(0,k.Y)((()=>{const e={genesisHash:m?void 0:c.genesisHash.toString(),isHardware:!1,name:$.trim()},a=function(e,s,t,{genesisHash:a,name:n,tags:o=[]},r,i){return(0,D.ol)((()=>b.Nn.addUri(U(e,s,t),r,{genesisHash:a,isHardware:!1,name:n,tags:o},"ed25519-ledger"===t?"ed25519":t)),i)}(w,g,y,e,Z,l("created account"));t(a),V(!1),s()})))}),[c,g,m,ee,$,s,t,y,Z,w,l]);return(0,a.jsxs)(Y,{className:e,header:l("Add an account via seed {{step}}/{{STEPS_COUNT}}",{replace:{STEPS_COUNT:3,step:E}}),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{children:(0,a.jsx)(r.mV,{defaultName:$,fullLength:!0,isEditableName:!1,noDefaultNameOpacity:!0,value:v&&x||null})}),1===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.u_.Columns,{hint:l("The secret seed value for this account. Ensure that you keep this in a safe place, with access to the seed you can re-create the account."),children:(0,a.jsxs)(r.Kx,{isError:!v,isReadOnly:"dev"===N,label:l("bip"===N?"mnemonic seed":"dev"===N?"development seed":h?"ethereum private key":"seed (hex or string)"),onChange:ne,seed:w,withLabel:!0,children:[(0,a.jsx)(r.qi,{className:"copyMoved",type:"bip"===N?l("mnemonic"):"raw"===N?h?l("private key"):"seed":l("raw seed"),value:w}),(0,a.jsx)(r.Lt,{defaultValue:N,isButton:!0,onChange:re,options:te.current})]})}),(0,a.jsxs)(r.xH,{className:"accounts--Creator-advanced",isPadded:!0,summary:l("Advanced creation options"),children:["ethereum"!==y&&(0,a.jsx)(r.u_.Columns,{hint:l("If you are moving accounts between applications, ensure that you use the correct type."),children:(0,a.jsx)(r.Lt,{defaultValue:y,label:l("keypair crypto type"),onChange:oe,options:h?f.X.availableCryptosEth:p?f.X.availableCryptosLedger:f.X.availableCryptos,tabIndex:-1})}),"ed25519-ledger"===y?(0,a.jsx)(_,{onChange:ae,seedType:N}):"ethereum"===y?(0,a.jsx)(z,{derivePath:g,deriveValidation:j,onChange:ae,seed:w,seedType:N}):(0,a.jsxs)(r.u_.Columns,{hint:l("The derivation path allows you to create different accounts from the same base mnemonic."),children:[(0,a.jsx)(r.II,{isDisabled:"raw"===N,isError:!!j?.error,label:l("secret derivation path"),onChange:ae,placeholder:l("raw"===N?"sr25519"===y?"//hard/soft":"//hard":"sr25519"===y?"//hard/soft///password":"//hard///password"),tabIndex:-1,value:g}),j?.error&&(0,a.jsx)(r.oy,{content:se.current[j.error]||j.error}),j?.warning&&(0,a.jsx)(r.Pd,{content:se.current[j.warning]})]})]}),(0,a.jsxs)(r.u_.Columns,{children:[(0,a.jsx)(W,{}),(0,a.jsx)("div",{className:"saveToggle",children:(0,a.jsx)(r.XZ,{label:(0,a.jsx)(a.Fragment,{children:l("I have saved my mnemonic seed safely")}),onChange:ie,value:I})})]})]}),2===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R,{name:{isNameValid:B,name:$},onCommit:le,setName:L,setPassword:J}),";",(0,a.jsx)(r.u_.Columns,{children:(0,a.jsx)(W,{})})]}),3===E&&x&&(0,a.jsx)(q,{derivePath:g,isBusy:F,pairType:"ed25519-ledger"===y?"ed25519":y,seed:w})]}),(0,a.jsxs)(r.u_.Actions,{children:[1===E&&(0,a.jsx)(r.zx,{activeOnEnter:!0,icon:"step-forward",isDisabled:!K,label:l("Next"),onClick:M}),2===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"step-backward",label:l("Prev"),onClick:P}),(0,a.jsx)(r.zx,{activeOnEnter:!0,icon:"step-forward",isDisabled:!X,label:l("Next"),onClick:M})]}),3===E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"step-backward",label:l("Prev"),onClick:P}),(0,a.jsx)(r.zx,{activeOnEnter:!0,icon:"plus",isBusy:F,label:l("Save"),onClick:le})]})]})]})}));var X=t(56623),ee=t(48731);const se=["application/json","text/plain"].join(", "),te=n.memo((function({className:e="",onClose:s,onStatusChange:t}){const{t:o}=(0,T.$)(),{api:i,isDevelopment:l,isEthereum:c}=(0,d.h)(),[u,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[x,g]=(0,n.useState)(null),[{isPassValid:f,password:j},v]=(0,n.useState)({isPassValid:!1,password:""}),y=(0,n.useMemo)((()=>l?null:i.genesisHash.toHex()),[i,l]),C=(0,n.useMemo)((()=>h?.meta.genesisHash&&h.meta.genesisHash!==y),[y,h]),w=(0,n.useCallback)((e=>p(function(e,s,t,a){try{const s=b.Nn.createFromJson(JSON.parse((0,X.z)(e)),{genesisHash:a});return t?(0,ee.hu)("ethereum"===s.type,"JSON File does not contain an ethereum type key pair"):(0,ee.hu)("ethereum"!==s.type,"JSON contains an ethereum keytype, this is not available on this network"),s}catch(e){console.error(e),s(e.message?e.message:e.toString())}return null}(e,g,c,y))),[y,c]),N=(0,n.useCallback)((e=>v({isPassValid:b.Nn.isPassValid(e),password:e})),[]),S=(0,n.useCallback)((()=>{h&&(m(!0),(0,k.Y)((()=>{const e={action:"restore"};try{b.Nn.addPair(h,j),e.status="success",e.account=h.address,e.message=o("account restored"),r.rp.setLastValue("account",h.address)}catch(s){v((e=>({...e,isPassValid:!1}))),e.status="error",e.message=s.message,console.error(s)}m(!1),t(e),"error"!==e.status&&s()})))}),[s,t,h,j,o]);return(0,a.jsxs)(r.u_,{className:e,header:o("Add via backup file"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{children:(0,a.jsx)(r.mV,{defaultName:h?.meta.name||null,noDefaultNameOpacity:!0,value:h?.address||null})}),(0,a.jsx)(r.u_.Columns,{hint:o("Supply a backed-up JSON file, encrypted with your account-specific password."),children:(0,a.jsx)(r.ht,{accept:se,className:"full",isError:!h,label:o("backup file"),onChange:w,withLabel:!0})}),(0,a.jsx)(r.u_.Columns,{hint:o("The password previously used to encrypt this account."),children:(0,a.jsx)(r.ro,{autoFocus:!0,className:"full",isError:!f,label:o("password"),onChange:N,onEnter:S,value:j})}),(0,a.jsxs)(r.u_.Columns,{children:[x&&(0,a.jsx)(r.oy,{content:x}),C&&(0,a.jsx)(r.Pd,{content:o('The network from which this account was originally generated is different than the network you are currently connected to. Once imported ensure you toggle the "allow on any network" option for the account to keep it visible on the current network.')}),(0,a.jsx)(W,{})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"sync",isBusy:u,isDisabled:!h||!f,label:o("Restore"),onClick:S})})]})}));var ae=t(48801),ne=t.n(ae),oe=t(5122),re=t(37146),ie=t(11677);function le(e,s,t){return s.reduce(((e,s)=>(s===t||e.includes(s)||e.push(s),e)),e)}const ce=(0,ie.e)("useKnownAddresses",(function(e){const{accounts:{allAccounts:s},addresses:{allAddresses:t}}=(0,re.i)();return(0,n.useMemo)((()=>le(le([],s,e),t,e)),[s,t,e])})),de=new(ne())(2),ue=["application/json"].join(", "),me=(0,r.zo)(r.u_)`
  .signaturesFileToggle {
    width: 100%;
    text-align: right;
  }
`,he=n.memo((function({className:e="",onClose:s,onStatusChange:t}){const{api:o,isDevelopment:i}=(0,d.h)(),{t:l}=(0,T.$)(),c=ce(),[{isNameValid:u,name:m},h]=(0,n.useState)({isNameValid:!1,name:""}),[{isUploadedFileValid:p,uploadedFileError:x,uploadedSignatories:g},f]=(0,n.useState)({isUploadedFileValid:!0,uploadedFileError:"",uploadedSignatories:[]}),[j,v]=(0,n.useState)([""]),[y,C]=(0,n.useState)(!1),[{isThresholdValid:w,threshold:N},k]=(0,n.useState)({isThresholdValid:!0,threshold:de}),S=(0,n.useCallback)((()=>{const e={genesisHash:i?void 0:o.genesisHash.toString(),name:m.trim()},a=function(e,s,{genesisHash:t,name:a,tags:n=[]},o){const r={action:"create"};try{const i=b.Nn.addMultisig(e,s,{genesisHash:t,name:a,tags:n}),{address:l}=i.pair;r.account=l,r.status="success",r.message=o}catch(e){r.status="error",r.message=e.message}return r}(j,N,e,l("created multisig"));t(a),s()}),[o.genesisHash,i,m,s,t,j,l,N]),I=(0,n.useCallback)((e=>h({isNameValid:e.trim().length>=3,name:e})),[]),A=(0,n.useCallback)((e=>e&&k({isThresholdValid:e.gte(de)&&e.lten(j.length),threshold:e})),[j]),E=(0,n.useCallback)((e=>{const s=function(e){let s,t="";try{s=JSON.parse((0,X.z)(e)),(0,ee.hu)(Array.isArray(s)&&!!s.length,"JSON file should contain an array of signatories"),s=s.filter((e=>(0,oe.Y)(e))),s=[...new Set(s)],(0,ee.hu)(s.length<=16,"Maximum you can have 16 signatories")}catch(e){s=[],t=e.message?e.message:e.toString()}return{isUploadedFileValid:!t,uploadedFileError:t,uploadedSignatories:s}}(e);f(s),(s.isUploadedFileValid||g.length)&&v(s.uploadedSignatories.length?s.uploadedSignatories:[""])}),[g]),M=(0,n.useCallback)((()=>{f({isUploadedFileValid:p,uploadedFileError:x,uploadedSignatories:[]})}),[x,p]),P=(0,n.useCallback)((e=>{M(),v(e)}),[M]),D=u&&w;return(0,a.jsxs)(me,{className:e,header:l("Add multisig"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{children:(0,a.jsx)(r.ZD,{className:"signaturesFileToggle",label:l("Upload JSON file with signatories"),onChange:C,value:y})}),!y&&(0,a.jsx)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:l("The signatories has the ability to create transactions using the multisig and approve transactions sent by others.Once the threshold is reached with approvals, the multisig transaction is enacted on-chain.")}),(0,a.jsx)("p",{children:l("Since the multisig function like any other account, once created it is available for selection anywhere accounts are used and needs to be funded before use.")})]}),children:(0,a.jsx)(r.m3,{available:c,availableLabel:l("available signatories"),maxCount:16,onChange:P,valueLabel:l("selected signatories")})}),y&&(0,a.jsxs)(r.u_.Columns,{hint:l("Supply a JSON file with the list of signatories."),children:[(0,a.jsx)(r.ht,{accept:ue,className:"full",clearContent:!g.length&&p,isError:!p,label:l("upload signatories list"),onChange:E,withLabel:!0}),!!g.length&&(0,a.jsx)(r.jN,{label:l("found signatories"),labelExtra:(0,a.jsx)(r.JH,{icon:"sync",label:l("Reset"),onClick:M}),children:(0,a.jsx)("div",{className:"ui--Static ui dropdown selection",children:g.map((e=>(0,a.jsx)("div",{children:(0,a.jsx)(r.ax,{value:e,withSidebar:!1})},e)))})}),x&&(0,a.jsx)(r.oy,{content:x})]}),(0,a.jsx)(r.u_.Columns,{hint:l("The threshold for approval should be less or equal to the number of signatories for this multisig."),children:(0,a.jsx)(r.Rn,{isError:!w,label:l("threshold"),onChange:A,value:N})}),(0,a.jsx)(r.u_.Columns,{hint:l("The name is for unique identification of the account in your owner lists."),children:(0,a.jsx)(r.II,{autoFocus:!0,className:"full",isError:!u,label:l("name"),onChange:I,placeholder:l("multisig name")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!D,label:l("Create"),onClick:S})})]})}));var pe=t(74065);function xe(e,s,t,a=j.nw){const n=s.toString();return{address:n,delay:a,isOwned:e.includes(n),type:t}}const ge=(0,ie.e)("useProxies",(function(e){const{api:s}=(0,d.h)(),{allAccounts:t}=(0,i.x)(),a=(0,pe.X)(),[o,r]=(0,n.useState)(null);return(0,n.useEffect)((()=>{r(null),e&&s.query.proxy&&s.query.proxy.proxies(e).then((([e])=>{const n=3===s.tx.proxy.addProxy.meta.args.length?e.map((({delay:e,delegate:s,proxyType:a})=>xe(t,s,a,e))):e.map((([e,s])=>xe(t,e,s))),o=n.filter((({isOwned:e})=>e));a.current&&r({isEmpty:0===o.length,owned:o,proxies:n})})).catch(console.error)}),[t,s,e,a]),o})),be=n.memo((function({className:e="",onClose:s,onStatusChange:t}){const{api:o,isDevelopment:i}=(0,d.h)(),{t:l}=(0,T.$)(),[{isNameValid:c,name:u},m]=(0,n.useState)({isNameValid:!1,name:""}),[h,p]=(0,n.useState)(null),x=ge(h),g=(0,n.useCallback)((()=>{if(h){const e={genesisHash:i?void 0:o.genesisHash.toString(),name:u.trim()},a=function(e,{genesisHash:s,name:t,tags:a=[]},n){const o={action:"create"};try{b.Nn.addExternal(e,{genesisHash:s,isProxied:!0,name:t,tags:a}),o.account=e,o.status="success",o.message=n}catch(e){o.status="error",o.message=e.message}return o}(h,e,l("added proxy"));t(a),s()}}),[o.genesisHash,i,u,s,t,h,l]),f=(0,n.useCallback)((e=>m({isNameValid:e.trim().length>=3,name:e})),[]),j=c&&!!h&&x&&!x.isEmpty;return(0,a.jsxs)(r.u_,{className:e,header:l("Add proxied account"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:l("The address that has previously setup a proxy to one of the accounts that you control."),children:(0,a.jsx)(r.bm,{autoFocus:!0,isError:!x||x.isEmpty,label:l("proxied account"),onChange:p,placeholder:l("address being proxied")})}),(0,a.jsx)(r.u_.Columns,{hint:l("The name is for unique identification of the account in your owner lists."),children:(0,a.jsx)(r.II,{className:"full",isError:!c,label:l("name"),onChange:f,placeholder:l("proxied name")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!j,label:l("Add"),onClick:g})})]})})),fe=(0,r.zo)(r.u_)`
  .qr-wrapper {
    margin: 0 auto;
    max-width: 30rem;
  }
`,je=n.memo((function({className:e="",onClose:s,onStatusChange:t}){const{t:o}=(0,T.$)(),{api:i,isEthereum:c}=(0,d.h)(),{isIpfs:u}=(0,l.g)(),[{isNameValid:m,name:h},p]=(0,n.useState)({isNameValid:!1,name:""}),[{address:x,isAddress:g,scanned:f,warning:j},v]=(0,n.useState)({address:"",isAddress:!1,scanned:null}),[{isPasswordValid:y,password:C},w]=(0,n.useState)({isPasswordValid:!1,password:""}),N=!!x&&m&&(g||y),k=(0,n.useMemo)((()=>!!f&&!!f.genesisHash&&!i.genesisHash.eq(f.genesisHash)),[f,i]),S=(0,n.useCallback)((e=>p({isNameValid:!!e.trim(),name:e})),[]),I=(0,n.useCallback)(((e,s)=>w({isPasswordValid:s,password:e})),[]),A=(0,n.useCallback)((e=>{v({address:e.isAddress?e.content:b.Nn.createFromUri(e.content,{},"sr25519").address,isAddress:e.isAddress,scanned:e}),e.name&&S(e.name)}),[S]),E=(0,n.useCallback)((e=>{v({address:"",isAddress:!1,scanned:null,warning:e.message})}),[]),M=(0,n.useCallback)((()=>{if(!f||!N)return;const{content:e,isAddress:a}=f,n={genesisHash:f.genesisHash||i.genesisHash.toHex(),name:h.trim()},l=a?c?b.Nn.addExternal(e).pair.address:b.Nn.addExternal(e,n).pair.address:b.Nn.addUri(e,C,n,"sr25519").pair.address;r.rp.setLastValue("account",l),t({account:l,action:"create",message:o("created account"),status:"success"}),s()}),[i,N,h,s,t,C,f,c,o]);return(0,a.jsxs)(fe,{className:e,header:o("Add account via Qr"),onClose:s,size:"large",children:[(0,a.jsx)(r.u_.Content,{children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.u_.Columns,{children:(0,a.jsx)(r.mV,{defaultName:h,noDefaultNameOpacity:!0,value:f.content})}),(0,a.jsxs)(r.u_.Columns,{hint:o("The local name for this account. Changing this does not affect your on-line identity, so this is only used to indicate the name of the account locally."),children:[(0,a.jsx)(r.II,{autoFocus:!0,className:"full",isError:!m,label:o("name"),onChange:S,onEnter:M,value:h}),k&&(0,a.jsx)(r.Pd,{content:o("The genesisHash for the scanned account does not match the genesisHash of the connected chain. The account will not be usable on this chain.")})]}),!g&&(0,a.jsx)(V,{onChange:I,onEnter:M})]}):(0,a.jsxs)(r.u_.Columns,{hint:o("Provide the account QR from the module/external application for scanning. Once detected as valid, you will be taken to the next step to add the account to your list."),children:[(0,a.jsx)("div",{className:"qr-wrapper",children:(0,a.jsx)(r.CU,{isEthereum:c,onError:E,onScan:A})}),j&&(0,a.jsx)(r.Pd,{content:j})]})}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!f||!N||!g&&u,label:o("Save"),onClick:M})})]})}));var ve=t(9118);const ye={transform:e=>e.map((([e])=>e))},Ce={transform:([[e],s])=>s.map(((s,t)=>{if(!s.isCasting)return null;const a=s.asCasting;return[e[t][1],a.votes.map((([e])=>e)),a]})).filter((e=>!!e)),withParamsTransform:!0},we={transform:([[e],s])=>s.map(((s,t)=>s.isSome?[e[t],s.unwrap()]:null)).filter((e=>!!e)),withParamsTransform:!0},Ne=(0,ie.e)("useAccountLocks",(function(e,s,t){const{api:a}=(0,d.h)(),o=(0,n.useMemo)((()=>[t]),[t]),r=(0,ve.W7)(o&&a.query[s]?.classLocksFor,o,ye),i=(0,n.useMemo)((()=>function(e,s){if(s)return[s.map((s=>[e,s]))]}(t,r)),[t,r]),l=(0,ve.W7)(i&&a.query[s]?.votingFor.multi,i,Ce),c=(0,n.useMemo)((()=>function(e){if(e&&e.length){const s=e.reduce(((e,[,s])=>e.concat(s)),[]);if(s.length)return[s]}}(l)),[l]),u=(0,ve.W7)(c&&a.query[e]?.referendumInfoFor.multi,c,we);return(0,n.useMemo)((()=>l&&u&&function(e,s,t,a){const n=e.consts[s].voteLockingPeriod,o=[];for(let e=0;e<t.length;e++){const[s,,r]=t[e];for(let e=0;e<r.votes.length;e++){const[t,i]=r.votes[e],l=a.find((([e])=>e.eq(t)));if(l){const[,e]=l;let a,r,c=0,d="None";if(i.isStandard){const{balance:s,vote:t}=i.asStandard;a=s,(e.isApproved&&t.isAye||e.isRejected&&t.isNay)&&(c=t.conviction.index,d=t.conviction.type)}else if(i.isSplit){const{aye:e,nay:s}=i.asSplit;a=e.add(s)}else if(i.isSplitAbstain){const{abstain:e,aye:s,nay:t}=i.asSplitAbstain;a=s.add(t).add(e)}else console.error(`Unable to handle ${i.type}`);e.isOngoing?r=j.Ew:e.isKilled?r=e.asKilled:e.isCancelled||e.isTimedOut?r=e.isCancelled?e.asCancelled[0]:e.asTimedOut[0]:e.isApproved||e.isRejected?r=n.muln(c).add(e.isApproved?e.asApproved[0]:e.asRejected[0]):console.error(`Unable to handle ${e.type}`),a&&r&&o.push({classId:s,endBlock:r,locked:d,refId:t,total:a})}}}return o}(a,s,l,u)),[a,s,u,l])}));var ke=t(86135),Se=t(54383),Ie=t(83696),Ae=t(78627),Ee=t(37198),Me=t(14681),Pe=t(92730),Te=t(46782),De=t.n(Te);const Fe=n.memo((function({address:e,onClose:s}){const{t}=(0,T.$)(),[o,i]=(0,n.useState)(!1),[{isPassTouched:l,password:c},d]=(0,n.useState)({isPassTouched:!1,password:""}),[u,m]=(0,n.useState)(!1),h=!u&&b.Nn.isPassValid(c),p=(0,n.useCallback)((e=>{m(!1),d({isPassTouched:!0,password:e})}),[]),x=(0,n.useCallback)((()=>{i(!0),(0,k.Y)((()=>{try{const s=e&&b.Nn.getPair(e),t=s&&b.Nn.backupAccount(s,c),a=new Blob([JSON.stringify(t)],{type:"application/json; charset=utf-8"});De().saveAs(a,`${e}.json`)}catch(e){return m(!0),i(!1),void console.error(e)}i(!1),s()}))}),[e,s,c]);return(0,a.jsxs)(r.u_,{className:"app--accounts-Modal",header:t("Backup account"),onClose:s,children:[(0,a.jsx)(r.u_.Content,{children:(0,a.jsxs)(r.mV,{isInline:!0,value:e,children:[(0,a.jsx)("p",{children:t('An encrypted backup file will be created once you have pressed the "Download" button. This can be used to re-import your account on any other machine.')}),(0,a.jsx)("p",{children:t("Save this backup file in a secure location. Additionally, the password associated with this account is needed together with this backup file in order to restore your account.")}),(0,a.jsx)("div",{children:(0,a.jsx)(r.ro,{autoFocus:!0,isError:l&&!h,label:t("password"),onChange:p,onEnter:x,tabIndex:0,value:c})})]})}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"download",isBusy:o,isDisabled:!h,label:t("Download"),onClick:x})})]})})),Ve=n.memo((function({address:e,className:s="",onClose:t}){const{t:o}=(0,T.$)(),[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)({isValid:!1,password:""}),[u,m]=(0,n.useState)({isValid:!1,password:""}),[{isOldValid:h,oldPass:p},x]=(0,n.useState)({isOldValid:!1,oldPass:""}),g=(0,n.useCallback)((e=>d({isValid:b.Nn.isPassValid(e),password:e})),[]),f=(0,n.useCallback)((e=>m({isValid:b.Nn.isPassValid(e)&&c.password===e,password:e})),[c]),j=(0,n.useCallback)((e=>x({isOldValid:b.Nn.isPassValid(e),oldPass:e})),[]),v=(0,n.useCallback)((()=>{const s=e&&b.Nn.getPair(e);s&&(l(!0),(0,k.Y)((()=>{try{s.isLocked||s.lock(),s.decodePkcs8(p)}catch(e){return x((e=>({...e,isOldValid:!1}))),void l(!1)}try{b.Nn.encryptAccount(s,c.password)}catch(e){return m((e=>({...e,isValid:!1}))),void l(!1)}l(!1),t()})))}),[e,c,p,t]);return(0,a.jsxs)(r.u_,{className:`${s} app--accounts-Modal`,header:o("Change account password"),onClose:t,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.mV,{isInline:!0,value:e}),(0,a.jsx)(r.u_.Columns,{hint:o("The existing account password as specified when this account was created or when it was last changed."),children:(0,a.jsx)(r.ro,{autoFocus:!0,isError:!h,label:o("your current password"),onChange:j,tabIndex:1,value:p})}),(0,a.jsxs)(r.u_.Columns,{hint:o("This will apply to any future use of this account as stored on this browser. Ensure that you securely store this new password and that it is strong and unique to the account."),children:[(0,a.jsx)(r.ro,{isError:!c.isValid,label:o("your new password"),onChange:g,onEnter:v,tabIndex:2,value:c.password}),(0,a.jsx)(r.ro,{isError:!u.isValid,label:o("password (repeat)"),onChange:f,onEnter:v,tabIndex:2,value:u.password}),(0,a.jsx)(r.YV,{value:c.password})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"sign-in-alt",isBusy:i,isDisabled:!c.isValid||!u.isValid||!h,label:o("Change"),onClick:v})})]})}));var Re=t(36609);const qe=n.memo((function({amount:e,delegatingAccount:s,onError:t}){const{t:o}=(0,T.$)(),{api:i}=(0,d.h)(),l=(0,ve.W7)(i.derive.balances?.all,[s]),[{error:c,warning:u},m]=(0,n.useState)({error:null,warning:null});return(0,n.useEffect)((()=>{if(l?.freeBalance&&e?.gt(j.nw)){let s=null;e.gte(l.freeBalance)&&(s=o("The maximum amount you can delegate is the amount of funds available on the delegating account.")),m((e=>{const a=e.error!==s?s:e.error,n=e.warning;return t(a||n?{error:a,warning:n}:null),{error:a,warning:n}}))}}),[i,t,e,o,l]),c?(0,a.jsx)(r.oy,{content:c}):u?(0,a.jsx)(r.Pd,{content:u}):null})),Oe=n.memo((function({onClose:e,previousAmount:s,previousConviction:t,previousDelegatedAccount:o,previousDelegatingAccount:i}){const{t:l}=(0,T.$)(),{api:c}=(0,d.h)(),[u,m]=(0,n.useState)(null),[h]=(0,n.useState)(),[p,x]=(0,n.useState)(s),[g,b]=(0,n.useState)(i||null),[f,v]=(0,n.useState)(o||null),y=void 0===t?0:t.toNumber(),[C,w]=(0,n.useState)(y),N=p?.toString()!==s?.toString()||f!==o||g!==i||C!==t?.toNumber();return(0,a.jsxs)(r.u_,{className:"staking--Delegate",header:l(o?"democracy vote delegation":"delegate democracy vote"),onClose:e,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:l("Any democracy vote performed by the delegated account will result in an additional vote from the delegating account")}),(0,a.jsx)("p",{children:l("If the delegated account is currently voting in a referendum, the delegating vote and conviction will be added.")})]}),children:[(0,a.jsx)(r.rp,{label:l("delegating account"),onChange:b,type:"account",value:g}),(0,a.jsx)(r.rp,{label:l("delegated account"),onChange:v,type:"account",value:f})]}),(0,a.jsxs)(r.u_.Columns,{hint:l("The amount to allocate and the conviction that will be applied to all votes made on a referendum."),children:[(0,a.jsx)(r.H,{autoFocus:!0,isError:!!u?.error,isZeroable:!1,label:l("delegating amount"),labelExtra:(0,a.jsx)(Re.Z,{label:(0,a.jsx)("span",{className:"label",children:l("balance")}),params:g}),maxValue:h,onChange:x,value:p}),(0,a.jsx)(qe,{amount:p,delegatingAccount:g,onError:m}),(0,a.jsx)(r.v,{label:l("conviction"),onChange:w,value:C,voteLockingPeriod:c.consts.democracy.voteLockingPeriod||c.consts.democracy.enactmentPeriod})]})]}),(0,a.jsxs)(r.u_.Actions,{children:[o&&(0,a.jsx)(r.cA,{accountId:g,icon:"trash-alt",label:l("Undelegate"),onStart:e,tx:c.tx.democracy.undelegate}),(0,a.jsx)(r.cA,{accountId:g,icon:"sign-in-alt",isDisabled:!p?.gt(j.nw)||!!u?.error||!N,label:l(o?"Save delegation":"Delegate"),onStart:e,params:[f,C,p],tx:c.tx.democracy.delegate})]})]})}));var ze=t(27421),Be=t(55736);const $e=n.memo((function({className:e="",from:s,onClose:t}){const{t:o}=(0,T.$)(),{api:i,isDevelopment:l}=(0,d.h)(),{queueAction:c}=(0,ke.L)(),[u]=(0,n.useState)((()=>b.Nn.getPair(s))),[h,p]=(0,n.useState)(!1),[{isNameValid:x,name:g},f]=(0,n.useState)({isNameValid:!1,name:""}),[{isPasswordValid:j,password:v},y]=(0,n.useState)({isPasswordValid:!1,password:""}),[{address:C,deriveError:w},N]=(0,n.useState)({address:null,deriveError:null}),[S,I]=(0,m.O)(),[{isLocked:A,lockedError:E},M]=(0,n.useState)({isLocked:u.isLocked,lockedError:null}),[{isRootValid:P,rootPass:F},V]=(0,n.useState)({isRootValid:!1,rootPass:""}),[O,z]=(0,n.useState)(""),B=(0,ze.N)(O),$=!!C&&!w&&x&&j;(0,n.useEffect)((()=>{M({isLocked:u.isLocked,lockedError:null})}),[u]),(0,n.useEffect)((()=>{!A&&N((()=>{let e=null;const s=function(e,s){if(e.includes("///"))return"Password paths are not supported on keys derived from others";try{const{path:t}=(0,Be.c)(e);if("ed25519"===s&&t.some((({isSoft:e})=>e)))return"Soft derivation paths are not allowed on ed25519"}catch(e){return console.error(e),e.message}return null}(B,u.type);return s||(e=u.derive(B).address),{address:e,deriveError:s}}))}),[B,A,u]);const L=(0,n.useCallback)((e=>{V({isRootValid:!!e,rootPass:e}),M((({isLocked:e})=>({isLocked:e,lockedError:null})))}),[]),H=(0,n.useCallback)((()=>{p(!0),(0,k.Y)((()=>{try{u.decodePkcs8(F),M({isLocked:u.isLocked,lockedError:null})}catch(e){console.error(e),M({isLocked:!0,lockedError:e.message})}p(!1)}))}),[F,u]),_=(0,n.useCallback)((()=>{$&&(p(!0),(0,k.Y)((()=>{const e=function(e,s,t,a,n,o){return(0,D.ol)((()=>{const n=e.derive(s);return n.setMeta({...n.meta,genesisHash:o,name:t,parentAddress:e.address,tags:[]}),b.Nn.addPair(n,a||"")}),n)}(u,O,g,v,o("created account"),l?void 0:i.genesisHash.toString());c(e),p(!1),t()})))}),[i,l,$,g,t,v,c,u,O,o]),Z=(0,a.jsx)(r.rp,{isDisabled:!0,label:o("derive root account"),value:s});return(0,a.jsxs)(r.u_,{className:e,header:o("Derive account from pair"),onClose:t,children:[C&&S?(0,a.jsx)(q,{address:C,derivePath:O,isBusy:h,name:g,pairType:u.type}):(0,a.jsxs)(r.u_.Content,{children:[A&&(0,a.jsxs)(a.Fragment,{children:[Z,(0,a.jsx)(r.ro,{autoFocus:!0,isError:!!E,label:o("password"),onChange:L,value:F})]}),!A&&(0,a.jsxs)(r.mV,{defaultName:g,noDefaultNameOpacity:!0,value:w?"":C,children:[Z,(0,a.jsx)(r.II,{autoFocus:!0,label:o("derivation path"),onChange:z,placeholder:o("//hard/soft")}),w&&(0,a.jsx)(r.oy,{content:w}),(0,a.jsx)(R,{name:{isNameValid:x,name:g},onCommit:_,setName:f,setPassword:y}),";"]})]}),(0,a.jsx)(r.u_.Actions,{children:A?(0,a.jsx)(r.zx,{icon:"lock",isBusy:h,isDisabled:!P,label:o("Unlock"),onClick:H}):S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"step-backward",label:o("Prev"),onClick:I}),(0,a.jsx)(r.zx,{icon:"plus",isBusy:h,label:o("Save"),onClick:_})]}):(0,a.jsx)(r.zx,{icon:"step-forward",isDisabled:!$,label:o("Next"),onClick:I})})]})})),Le=[" ","\t"];function He(e,s,t){e.isRaw&&(s&&s(!0),t((0,X.z)(e.asRaw.toU8a(!0))))}function _e(e,s,t,a,n,o,r=Le,i=Le){return!e||!!s&&s.length>=t&&a.reduce(((e,t)=>e&&s.includes(t)),!0)&&(!o.length||o.some((e=>s.startsWith(e))))&&!n.some((e=>s.includes(e)))&&!r.some((e=>s.startsWith(e)))&&!i.some((e=>s.endsWith(e)))}const Ze=n.memo((function({address:e,className:s="",onClose:t}){const{t:o}=(0,T.$)(),{api:i}=(0,d.h)(),l=(0,ve.W7)(i.query.identity.identityOf,[e]),[{info:u,okAll:m,okDisplay:h,okEmail:p,okLegal:x,okRiot:g,okTwitter:b,okWeb:f},j]=(0,n.useState)({info:{},okAll:!1}),[v,y]=(0,n.useState)(!1),[C,w]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!1),[S,I]=(0,n.useState)(!1),[A,E]=(0,n.useState)(!1),[M,P]=(0,n.useState)((()=>((0,c.Ly)(e).name||"").replace(/\(.*\)/,"").trim())),[D,F]=(0,n.useState)(""),[V,R]=(0,n.useState)(""),[q,O]=(0,n.useState)(""),[z,B]=(0,n.useState)(""),[$,L]=(0,n.useState)(""),[H,_]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{if(l&&l.isSome){const{info:e}=l.unwrap();He(e.display,null,P),He(e.email,y,F),He(e.legal,w,R),He(e.riot,k,O),He(e.twitter,I,B),He(e.web,E,L),[e.display,e.email,e.legal,e.riot,e.twitter,e.web].some((e=>!!e.isRaw&&(_(!0),!0)))}}),[l]),(0,n.useEffect)((()=>{const e=_e(!0,M,1,[],[],[]),s=_e(v,D,3,["@"],Le,[]),t=_e(C,V,1,[],[],[]),a=_e(N,q,6,[":"],Le,["@","~"]),n=_e(S,z,3,[],Le,["@"]),o=_e(A,$,8,["."],Le,["https://","http://"]);j({info:{display:{[e?"raw":"none"]:M||null},email:{[s&&v?"raw":"none"]:s&&v?D:null},legal:{[t&&C?"raw":"none"]:t&&C?V:null},riot:{[a&&N?"raw":"none"]:a&&N?q:null},twitter:{[n&&S?"raw":"none"]:n&&S?z:null},web:{[o&&A?"raw":"none"]:o&&A?$:null}},okAll:e&&s&&t&&a&&n&&o,okDisplay:e,okEmail:s,okLegal:t,okRiot:a,okTwitter:n,okWeb:o})}),[v,C,N,S,A,M,D,V,q,z,$]),(0,a.jsxs)(r.u_,{className:s,header:o("Register identity"),onClose:t,children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.II,{autoFocus:!0,isError:!h,label:o("display name"),maxLength:32,onChange:P,placeholder:o("My On-Chain Name"),value:M}),(0,a.jsx)(r.II,{isDisabled:!C,isError:!x,label:o("legal name"),labelExtra:(0,a.jsx)(r.ZD,{label:o("include field"),onChange:w,value:C}),maxLength:32,onChange:R,placeholder:o("Full Legal Name"),value:C?V:"<none>"}),(0,a.jsx)(r.II,{isDisabled:!v,isError:!p,label:o("email"),labelExtra:(0,a.jsx)(r.ZD,{label:o("include field"),onChange:y,value:v}),maxLength:32,onChange:F,placeholder:o("somebody@example.com"),value:v?D:"<none>"}),(0,a.jsx)(r.II,{isDisabled:!A,isError:!f,label:o("web"),labelExtra:(0,a.jsx)(r.ZD,{label:o("include field"),onChange:E,value:A}),maxLength:32,onChange:L,placeholder:o("https://example.com"),value:A?$:"<none>"}),(0,a.jsx)(r.II,{isDisabled:!S,isError:!b,label:o("twitter"),labelExtra:(0,a.jsx)(r.ZD,{label:o("include field"),onChange:I,value:S}),onChange:B,placeholder:o("@YourTwitterName"),value:S?z:"<none>"}),(0,a.jsx)(r.II,{isDisabled:!N,isError:!g,label:o("riot name"),labelExtra:(0,a.jsx)(r.ZD,{label:o("include field"),onChange:k,value:N}),maxLength:32,onChange:O,placeholder:o("@yourname:matrix.org"),value:N?q:"<none>"}),(0,a.jsx)(r.H,{defaultValue:i.consts.identity?.basicDeposit,isDisabled:!0,label:o("total deposit")})]}),(0,a.jsxs)(r.u_.Actions,{children:[(0,a.jsx)(r.cA,{accountId:e,icon:"trash-alt",isDisabled:!H,label:o("Clear Identity"),onStart:t,tx:i.tx.identity.clearIdentity}),(0,a.jsx)(r.cA,{accountId:e,isDisabled:!m,label:o("Set Identity"),onStart:t,params:[u],tx:i.tx.identity.setIdentity})]})]})}));var We=t(19008);const Ue=n.memo((function({address:e,index:s,name:t,setAddress:o,setName:i,t:l}){const c=(0,n.useCallback)((e=>o(s,e||"")),[s,o]),d=(0,n.useCallback)((e=>i(s,e||"")),[s,i]);return(0,a.jsxs)(r.P0,{children:[(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.rp,{defaultValue:e,label:l("address {{index}}",{replace:{index:s+1}}),onChange:c})}),(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.II,{defaultValue:t,isError:!t,isFull:!0,label:l("sub name"),onChange:d})})]})})),Je={withParams:!0},Ge=n.memo((function({address:e,className:s,onClose:t}){const{t:o}=(0,T.$)(),{api:l}=(0,d.h)(),{allAccounts:c}=(0,i.x)(),u=(0,We.x)(e),m=(0,ve.W7)(u&&0!==u.length&&l.query.identity.superOf.multi,[u],Je),[h,p]=(0,n.useState)();(0,n.useEffect)((()=>{m?p(function([[e],s]){return e.reduce(((e,t,a)=>{const n=s[a];if(n.isSome){const[,s]=n.unwrap();s.isRaw&&e.push([t,(0,X.z)(s.asRaw)])}return e}),[])}(m)):u&&!u.length&&p([])}),[c,u,m]);const x=(0,n.useCallback)((()=>p((e=>e&&e.concat([[c[0],""]])))),[c]),g=(0,n.useCallback)((()=>p((e=>e&&e.slice(0,e.length-1)))),[]),b=(0,n.useCallback)(((e,s)=>p((t=>(t||[]).map((([t,a],n)=>[e===n?s:t,a]))))),[]),f=(0,n.useCallback)(((e,s)=>p((t=>(t||[]).map((([t,a],n)=>[t,e===n?s:a]))))),[]);return(0,a.jsxs)(r.u_,{className:s,header:o("Register sub-identities"),onClose:t,size:"large",children:[(0,a.jsx)(r.u_.Content,{children:h?(0,a.jsxs)("div",{children:[h.length?h.map((([e,s],t)=>(0,a.jsx)(Ue,{address:e,index:t,name:s,setAddress:b,setName:f,t:o},t))):(0,a.jsx)("article",{children:o("No sub identities set.")}),(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(r.zx,{icon:"plus",label:o("Add sub"),onClick:x}),(0,a.jsx)(r.zx,{icon:"minus",isDisabled:0===h.length,label:o("Remove sub"),onClick:g})]})]}):(0,a.jsx)(r.$j,{label:o("Retrieving sub-identities")})}),(0,a.jsx)(r.u_.Actions,{children:h&&(0,a.jsx)(r.cA,{accountId:e,isDisabled:h.some((([e,s])=>!e||!s)),label:o("Set Subs"),onStart:t,params:[h.map((([e,s])=>[e,{raw:s}]))],tx:l.tx.identity.setSubs})})]})}));var Qe=t(56949);const Ye={callData:null,callError:null,callInfo:null},Ke=(0,r.zo)(r.u_)`
  .tipToggle {
    width: 100%;
    text-align: right;
  }
`,Xe=n.memo((function({className:e="",onClose:s,ongoing:t,threshold:o,who:l}){const{t:c}=(0,T.$)(),{api:u}=(0,d.h)(),{allAccounts:m}=(0,i.x)(),[h,p]=(0,n.useState)(""),[{callData:x,callError:g,callInfo:b},f]=(0,n.useState)(Ye),{encodedCallLength:j,weight:v}=(0,Qe.h7)(x),[y,C]=(0,n.useState)((()=>t[0][0].toHex())),[{isMultiCall:w,multisig:k},S]=(0,n.useState)((()=>({isMultiCall:!1,multisig:null}))),[I,A]=(0,n.useState)(!0),[E,M]=(0,n.useState)([]),[P,D]=(0,n.useState)(null),[F,V]=(0,n.useState)([]),[R,q]=(0,n.useState)("aye"),[O,z]=(0,n.useState)(null),B=(0,n.useRef)([{text:c("Approve this call hash"),value:"aye"},{text:c("Cancel this call hash"),value:"nay"}]),$=(0,n.useMemo)((()=>t.map((([e])=>({text:e.toHex(),value:e.toHex()})))),[t]);(0,n.useEffect)((()=>{const[,e]=t.find((([e])=>e.eq(y)))||[null,null];S({isMultiCall:!!e&&e.approvals.length+1>=o,multisig:e}),f(Ye)}),[y,t,o]),(0,n.useEffect)((()=>{M(l.map((e=>u.createType("AccountId",e))).filter((e=>!e.eq(P))))}),[u,P,l]),(0,n.useEffect)((()=>{const e=k&&k.approvals.length>=o;V(l.map((e=>u.createType("AccountId",e).toString())).filter((s=>m.some((e=>e===s))&&k&&("nay"===R?k.depositor.eq(s):e||!k.approvals.some((e=>e.eq(s)))))))}),[u,m,k,o,R,l]),(0,n.useEffect)((()=>{if(h)try{(0,ee.hu)((0,N.vq)(h),"Hex call data required");const e=u.createType("Call",h);(0,ee.hu)(e.hash.eq(y),"Call data does not match the existing call hash");const s=u.registry.findMetaCall(e.callIndex);f({callData:e,callError:null,callInfo:s})}catch(e){f({callData:null,callError:e.message,callInfo:null})}else f(Ye)}),[u,h,y]),(0,n.useEffect)((()=>{const e=u.tx.multisig||u.tx.utility;z((()=>y&&k?"aye"===R?w&&I?x?5===e.asMulti.meta.args.length?e.asMulti(o,E,k.when,x.toHex(),v):6===e.asMulti.meta.args.length?e.asMulti(o,E,k.when,x.toHex(),!1,v):e.asMulti(o,E,k.when,x):null:5===e.approveAsMulti.meta.args.length?e.approveAsMulti(o,E,k.when,y,v):e.approveAsMulti(o,E,k.when,y):e.cancelAsMulti(o,E,k.when,y):null))}),[u,x,y,I,w,E,k,o,R,v]);const L="aye"===R;return(0,a.jsxs)(Ke,{className:e,header:c("Pending call hashes"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:c("The call hash from the list of available and unapproved calls."),children:(0,a.jsx)(r.Lt,{label:c("pending hashes {{count}}",{replace:{count:$.length}}),onChange:C,options:$,value:y})}),k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.u_.Columns,{hint:c("The creator for this multisig call"),children:(0,a.jsx)(r.rp,{defaultValue:k.depositor,isDisabled:!0,label:c("depositor")})}),(0,a.jsx)(r.u_.Columns,{hint:c("The current approvals applied to this multisig"),children:(0,a.jsx)(r.xH,{isPadded:!0,summary:c("Existing approvals ({{approvals}}/{{threshold}})",{replace:{approvals:k.approvals.length,threshold:o}}),children:k.approvals.map((e=>(0,a.jsx)(r.ax,{isPadded:!1,value:e},ee.hu.toString())))})})]}),(0,a.jsx)(r.u_.Columns,{hint:c("The operation type to apply. For approvals both non-final and final approvals are supported."),children:(0,a.jsx)(r.Lt,{label:c("approval type"),onChange:q,options:B.current,value:R})}),0!==F.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.u_.Columns,{hint:c("For approvals outstanding approvers will be shown, for hashes that should be cancelled the first approver is required."),children:(0,a.jsx)(r.rp,{filter:F,label:c("signatory"),onChange:D})}),"aye"===R&&w&&(0,a.jsxs)(a.Fragment,{children:[I&&(0,a.jsxs)(r.u_.Columns,{hint:c("The call data for this transaction matching the hash. Once sent, the multisig will be executed against this."),children:[x&&b?(0,a.jsx)(r.xH,{isPadded:!0,summary:`${b.section}.${b.method}`,summaryMeta:b.meta,children:(0,a.jsx)(r.Ig,{className:"details",value:x})}):(0,a.jsx)(r.II,{autoFocus:!0,isError:!h||!!g,label:c("call data for final approval"),onChange:p}),g&&(0,a.jsx)(r.oy,{content:g})]}),(0,a.jsx)(r.u_.Columns,{hint:c("Swap to a non-executing approval type, with subsequent calls providing the actual call data."),children:(0,a.jsx)(r.ZD,{className:"tipToggle",label:c(w?"Multisig message with call (for final approval)":"Multisig approval with hash (non-final approval)"),onChange:A,value:I})})]})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:P,extrinsic:O,icon:L?"check":"times",isDisabled:!O||L&&(!F.length||!!x&&!j),label:L?"Approve":"Reject",onStart:s})})]})}));var es=t(79760);const ss={type:"all"},ts=[[],j.nw];function as(e,s,t,a=0){return 2===e.tx.proxy.removeProxy.meta.args.length?e.tx.proxy.removeProxy(s,t):e.tx.proxy.removeProxy(s,t,a)}function ns({index:e,onRemove:s,typeOpts:t,value:[o,i]}){const{t:l}=(0,T.$)(),c=(0,n.useCallback)((()=>{o&&s(o,i,e)}),[o,e,s,i]);return(0,a.jsxs)("div",{className:"proxy-container",children:[(0,a.jsxs)("div",{className:"input-column",children:[(0,a.jsx)(r.rp,{defaultValue:o,isDisabled:!0,label:l("proxy account")}),(0,a.jsx)(r.Lt,{isDisabled:!0,label:"type",options:t,value:i.toNumber()})]}),(0,a.jsx)("div",{className:"buttons-column",children:(0,a.jsx)(r.zx,{icon:"times",onClick:c})})]})}function os({index:e,onChangeAccount:s,onChangeType:t,onRemove:o,proxiedAccount:i,typeOpts:l,value:[c,d]}){const{t:u}=(0,T.$)(),m=(0,n.useCallback)((t=>s(e,t)),[e,s]),h=(0,n.useCallback)((s=>t(e,s)),[e,t]),p=(0,n.useCallback)((()=>o(e)),[e,o]);return(0,a.jsxs)("div",{className:"proxy-container",children:[(0,a.jsxs)("div",{className:"input-column",children:[(0,a.jsx)(r.rp,{isError:!c,label:u("proxy account"),onChange:m,type:"account",value:c}),c&&c.eq(i)&&(0,a.jsx)(r.oy,{content:u("You should not setup proxies to act as a self-proxy.")}),(0,a.jsx)(r.Lt,{label:"type",onChange:h,options:l,value:d.toNumber()})]}),(0,a.jsx)("div",{className:"buttons-column",children:(0,a.jsx)(r.zx,{icon:"times",onClick:p})})]},`addedProxy-${e}`)}function rs(e,s=0){const t=e.registry.lookup.names.filter((e=>e.endsWith("RuntimeProxyType")));return e.createType(t.length?t[0]:"ProxyType",s)}const is=(0,r.zo)(r.u_)`
  .proxy-container {
    display: grid;
    grid-column-gap: 0.5rem;
    grid-template-columns: minmax(0, 1fr) auto;
    margin-bottom: 1rem;

    .input-column {
      grid-column: 1;
    }

    .buttons-column {
      grid-column: 2;
      padding-top: 0.3rem;
    }
  }
`,ls=n.memo((function({className:e,onClose:s,previousProxy:[t]=ts,proxiedAccount:o}){const{t:i}=(0,T.$)(),{api:l}=(0,d.h)(),[c,u]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[p,x]=(0,n.useState)(null),[g,b]=(0,n.useState)((()=>t.map((({delegate:e,proxyType:s})=>[e,s])))),[f,j]=(0,n.useState)([]),v=(0,es.b)(p,ss),y=(0,n.useMemo)((()=>l.consts.proxy.proxyDepositFactor.muln(c.length+m.length).iadd(l.consts.proxy.proxyDepositBase)),[l,c,m]),C=(0,n.useRef)(function(e){return rs(e).defKeys.map(((e,s)=>({text:e,value:s}))).filter((({text:e})=>!e.startsWith("__Unused")))}(l));(0,n.useEffect)((()=>{h(f.filter((e=>!!e[0])).map((([e,s])=>function(e,s,t,a=0){return 2===e.tx.proxy.addProxy.meta.args.length?e.tx.proxy.addProxy(s,t):e.tx.proxy.addProxy(s,t,a)}(l,e,s))))}),[l,f]),(0,n.useEffect)((()=>{x((()=>[...c,...m]))}),[c,m]);const w=(0,n.useCallback)((()=>j((e=>[...e,[e.length?e[e.length-1][0]:g.length?g[g.length-1][0]:l.createType("AccountId",o),rs(l)]]))),[l,g,o]),N=(0,n.useCallback)((e=>j((s=>s.filter(((s,t)=>t!==e))))),[]),k=(0,n.useCallback)(((e,s,t)=>{b((e=>e.filter(((e,s)=>s!==t)))),u((t=>[...t,as(l,e,s)]))}),[l]),S=(0,n.useCallback)(((e,s)=>j((t=>{const a=[...t];return a[e][0]=s?l.createType("AccountId",s):null,a}))),[l]),I=(0,n.useCallback)(((e,s)=>j((t=>{const a=[...t];return a[e][1]=rs(l,s),a}))),[l]),A=f.some((([e])=>e&&e.eq(o)));return(0,a.jsxs)(is,{className:e,header:i("Proxy overview"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:i("Any account set as proxy will be able to perform actions in place of the proxied account"),children:(0,a.jsx)(r.rp,{isDisabled:!0,label:i("proxied account"),type:"account",value:o})}),(0,a.jsxs)(r.u_.Columns,{hint:i("If you add several proxy accounts for the same proxy type (e.g 2 accounts set as proxy for Governance), then any of those 2 accounts will be able to perform governance actions on behalf of the proxied account"),children:[g.map(((e,s)=>(0,a.jsx)(ns,{index:s,onRemove:k,typeOpts:C.current,value:e},`${e.toString()}-${s}`))),f.map(((e,s)=>(0,a.jsx)(os,{index:s,onChangeAccount:S,onChangeType:I,onRemove:N,proxiedAccount:o,typeOpts:C.current,value:e},`${e.toString()}-${s}`))),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"plus",label:i("Add proxy"),onClick:w})})]}),(0,a.jsx)(r.u_.Columns,{hint:i("A deposit paid by the proxied account that can not be used while the proxy is in existence. The deposit is returned when the proxy is destroyed. The amount reserved is based on the base deposit and number of proxies"),children:(0,a.jsx)(r.H,{defaultValue:y,isDisabled:!0,label:i("reserved balance")})}),(0,a.jsx)(r.u_.Columns,{children:(0,a.jsx)(r.RN,{})})]}),(0,a.jsxs)(r.u_.Actions,{children:[0!==t.length&&(0,a.jsx)(r.cA,{accountId:o,icon:"trash-alt",label:i("Clear all"),onStart:s,tx:l.tx.proxy.removeProxies}),(0,a.jsx)(r.cA,{accountId:o,extrinsic:v,icon:"sign-in-alt",isDisabled:A||!c.length&&!m.length,onStart:s})]})]})})),cs=n.memo((function({address:e,className:s="",onClose:t}){const{t:o}=(0,T.$)(),{api:i}=(0,d.h)(),[l,c]=(0,n.useState)(null);return(0,a.jsxs)(r.u_,{className:s,header:o("Initiate account recovery"),onClose:t,children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.rp,{isDisabled:!0,label:o("the account to recover to"),value:e}),(0,a.jsx)(r.rp,{label:o("recover this account"),onChange:c,type:"allPlus"})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:e,icon:"recycle",isDisabled:!l||l===e,label:o("Start recovery"),onStart:t,params:[l],tx:i.tx.recovery.initiateRecovery})})]})}));var ds=t(65606);const us=n.memo((function({address:e,className:s="",onClose:t}){const{t:o}=(0,T.$)(),{api:i}=(0,d.h)(),l=ce(e),[c,u]=(0,n.useState)(),[m,h]=(0,n.useState)([]),[p,x]=(0,n.useState)(),g=!c,b=!m.length,f=!p||!p.gtn(0)||p.gtn(m.length);return(0,a.jsxs)(r.u_,{className:s,header:o("Setup account as recoverable"),onClose:t,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:o("The recoverable account is protected against the loss of seed/access by a social process."),children:(0,a.jsx)(r.rp,{isDisabled:!0,label:o("the account to make recoverable"),value:e})}),(0,a.jsx)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:o("These are trusted individuals that can verify and approve any recovery actions. With recovery, once the threshold is reached, the funds associated with the account can be moved to a new destination.")}),(0,a.jsx)("p",{children:o("The helpers should be able to verify, via an off-chain mechanism, that the account owner indeed wishes to recover access and as such provide any approvals. In the cases of malicious recovery procedures, they will have the power to stop it.")})]}),children:(0,a.jsx)(r.m3,{available:l,availableLabel:o("available social recovery helpers"),maxCount:16,onChange:h,valueLabel:o("trusted social recovery helpers")})}),(0,a.jsxs)(r.u_.Columns,{hint:o("The threshold for approvals and the delay is the protection associated with the account. The delay should be such that any colluding recovery attempts does have a window to stop."),children:[(0,a.jsx)(r.Rn,{isError:f,label:o("recovery threshold"),onChange:x}),(0,a.jsx)(r.Rn,{isError:g,isZeroable:!0,label:o("recovery block delay"),onChange:u})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:e,icon:"share-alt",isDisabled:b||f||g,label:o("Make recoverable"),onStart:t,params:[(0,ds.i)(m),p,c],tx:i.tx.recovery.createRecovery})})]})}));var ms=t(14868);const hs=n.memo((function({accountDelegating:e,onClose:s}){const{t}=(0,T.$)(),{api:n}=(0,d.h)();return(0,a.jsxs)(r.u_,{className:"staking--Undelegate",header:t("Undelegate"),onClose:s,size:"large",children:[(0,a.jsx)(r.u_.Content,{children:(0,a.jsx)(r.u_.Columns,{hint:t("You will remove any delegation made by this acccount"),children:(0,a.jsx)(r.rp,{defaultValue:e,isDisabled:!0,label:t("delegating account")})})}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:e,icon:"sign-in-alt",label:t("Undelegate"),onStart:s,tx:n.tx.democracy.undelegate})})]})}));var ps=t(67405),xs=t(60864);const gs=(0,ie.e)("useMultisigApprovals",(function(e){const{events:s}=(0,ps.d)(),{api:t}=(0,d.h)(),[a,o]=(0,n.useState)(),[r,i]=(0,xs.y)(1),l=(0,pe.X)();return(0,n.useEffect)((()=>{s.some((({record:{event:{data:s,section:t}}})=>"multisig"===t&&s.some((s=>"AccountId"===s.toRawType()&&s.eq(e)))))&&i()}),[e,s,i]),(0,n.useEffect)((()=>{r&&t.query.multisig?.multisigs.entries(e).then((e=>{l.current&&o(e.filter((([,e])=>e.isSome)).map((([e,s])=>[e.args[1],s.unwrap()])))})).catch(console.error)}),[e,t,l,r]),a})),bs={available:!1,bonded:!1,locked:!1,redeemable:!1,reserved:!1,total:!0,unlocking:!1,vested:!1},fs={available:!0,bonded:!0,locked:!0,nonce:!0,redeemable:!0,reserved:!0,total:!1,unlocking:!0,vested:!0};function js(e){return e?.unlocking?e.unlocking.filter((({remainingEras:e,value:s})=>s.gt(j.nw)&&e.gt(j.nw))).map((e=>e.value)).reduce(((e,s)=>e.iadd(s)),new(ne())(0)):j.nw}function vs(e,s,t){return e.tx.utility&&t.length?e.tx.utility.batch(t.map((s=>e.tx.democracy.removeVote(s))).concat(e.tx.democracy.unlock(s))):null}function ys(e,s,t,a="convictionVoting"){if(!e.tx.utility||!t.length)return null;const n=t.map((([s,t])=>e.tx[a].removeVote(s,t)));return t.reduce(((e,[s])=>(e.find((e=>e.eq(s)))||e.push(s),e)),[]).forEach((t=>{n.push(e.tx[a].unlock(t,s))})),e.tx.utility.batch(n)}const Cs={transform:e=>e.unwrapOr(null)},ws=r.zo.tr`
  .devBadge {
    opacity: var(--opacity-light);
  }
`,Ns=n.memo((function({account:{address:e,meta:s},className:t="",delegation:o,filter:i,isFavorite:l,proxy:c,setBalance:h,toggleFavorite:p}){const{t:x}=(0,T.$)(),[g,f]=(0,m.O)(!1),{queueExtrinsic:y}=(0,ke.L)(),C=(0,d.h)(),{getLedger:w}=(0,u.c)(),N=(0,Se.C)(),k=(0,Ie.r)(e),S=(0,Ae._)(e),I=(0,ve.W7)(C.api.derive.democracy?.locks,[e]),A=(0,ve.W7)(C.api.query.recovery?.recoverable,[e],Cs),E=gs(e),M=ge(e),{flags:{isDevelopment:P,isEditable:F,isEthereum:V,isExternal:R,isHardware:q,isInjected:O,isMultisig:z,isProxied:B},genesisHash:$,identity:L,name:H,onSetGenesisHash:_,tags:Z}=(0,Ee.B)(e),W=Ne("referenda","convictionVoting",e),[{democracyUnlockTx:U},J]=(0,n.useState)({democracyUnlockTx:null,ids:[]}),[{referendaUnlockTx:G},Q]=(0,n.useState)({ids:[],referendaUnlockTx:null}),[Y,K]=(0,n.useState)(null),[X,ee]=(0,m.O)(),[se,te]=(0,m.O)(),[ae,ne]=(0,m.O)(),[oe,re]=(0,m.O)(),[ie,le]=(0,m.O)(),[ce,de]=(0,m.O)(),[ue,me]=(0,m.O)(),[he,pe]=(0,m.O)(),[xe,be]=(0,m.O)(),[fe,je]=(0,m.O)(),[ye,Ce]=(0,m.O)(),[we,Te]=(0,m.O)(),[De,Re]=(0,m.O)();(0,n.useEffect)((()=>{k&&(h(e,{bonded:S?.stakingLedger.active?.unwrap()||j.nw,locked:k.lockedBalance,redeemable:S?.redeemable||j.nw,total:k.freeBalance.add(k.reservedBalance),transferrable:k.availableBalance,unbonding:js(S)}),C.api.tx.vesting?.vest&&K((()=>k.vestingLocked.isZero()?null:C.api.tx.vesting.vest())))}),[e,C,k,h,S]),(0,n.useEffect)((()=>{N&&I&&J((s=>{const t=I.filter((({isFinished:e,unlockAt:s})=>e&&N.gt(s))).map((({referendumId:e})=>e));return JSON.stringify(s.ids)===JSON.stringify(t)?s:{democracyUnlockTx:vs(C.api,e,t),ids:t}}))}),[e,C,N,I]),(0,n.useEffect)((()=>{N&&W&&Q((s=>{const t=W.filter((({endBlock:e})=>e.gt(j.nw)&&N.gt(e))).map((({classId:e,refId:s})=>[e,s]));return JSON.stringify(s.ids)===JSON.stringify(t)?s:{ids:t,referendaUnlockTx:ys(C.api,e,t)}}))}),[e,C,N,W]);const qe=(0,n.useMemo)((()=>function(e,s,t){if(0===e.length)return!0;const a=e.toLowerCase();return t.reduce(((e,s)=>e||s.toLowerCase().includes(a)),s.toLowerCase().includes(a))}(i,H,Z)),[H,i,Z]),ze=(0,n.useCallback)((()=>{if(!e)return;const s={account:e,action:"forget"};try{b.Nn.forgetAccount(e),s.status="success",s.message=x("account forgotten")}catch(e){s.status="error",s.message=e.message}}),[e,x]),Be=(0,n.useCallback)((()=>U&&y({accountId:e,extrinsic:U})),[e,U,y]),Le=(0,n.useCallback)((()=>G&&y({accountId:e,extrinsic:G})),[e,G,y]),He=(0,n.useCallback)((()=>Y&&y({accountId:e,extrinsic:Y})),[e,y,Y]),_e=(0,n.useCallback)((()=>{(async function(e,s){const t=e();await t.getAddress(!0,s.accountOffset||0,s.addressOffset||0)})(w,s).catch((e=>{console.error(`ledger: ${e.message}`)}))}),[w,s]),We=(0,n.useMemo)((()=>[(0,D.xv)("identityGroup",[(0,v.m)(C.api.tx.identity?.setIdentity)&&!q&&(0,a.jsx)(r.v2.Item,{icon:"link",label:x("Set on-chain identity"),onClick:re},"identityMain"),(0,v.m)(C.api.tx.identity?.setSubs)&&L?.display&&!q&&(0,a.jsx)(r.v2.Item,{icon:"vector-square",label:x("Set on-chain sub-identities"),onClick:le},"identitySub"),(0,v.m)(C.api.tx.democracy?.unlock)&&U&&(0,a.jsx)(r.v2.Item,{icon:"broom",label:x("Clear expired democracy locks"),onClick:Be},"clearDemocracy"),(0,v.m)(C.api.tx.convictionVoting?.unlock)&&G&&(0,a.jsx)(r.v2.Item,{icon:"broom",label:x("Clear expired referenda locks"),onClick:Le},"clearReferenda"),(0,v.m)(C.api.tx.vesting?.vest)&&Y&&(0,a.jsx)(r.v2.Item,{icon:"unlock",label:x("Unlock vested amount"),onClick:He},"vestingVest")],x("Identity")),(0,D.xv)("deriveGroup",[!(V||R||q||O||z||C.isEthereum)&&(0,a.jsx)(r.v2.Item,{icon:"download",label:x("Derive account via derivation path"),onClick:te},"deriveAccount"),q&&(0,a.jsx)(r.v2.Item,{icon:"eye",label:x("Show address on hardware device"),onClick:_e},"showHwAddress")],x("Derive")),(0,D.xv)("backupGroup",[!(R||q||O||z||P)&&(0,a.jsx)(r.v2.Item,{icon:"database",label:x("Create a backup file for this account"),onClick:ee},"backupJson"),!(R||q||O||z||P)&&(0,a.jsx)(r.v2.Item,{icon:"edit",label:x("Change this account's password"),onClick:pe},"changePassword"),!(O||P)&&(0,a.jsx)(r.v2.Item,{icon:"trash-alt",label:x("Forget this account"),onClick:ne},"forgetAccount")],x("Backup")),(0,v.m)(C.api.tx.recovery?.createRecovery)&&(0,D.xv)("reoveryGroup",[!A&&(0,a.jsx)(r.v2.Item,{icon:"redo",label:x("Make recoverable"),onClick:je},"makeRecoverable"),(0,a.jsx)(r.v2.Item,{icon:"screwdriver",label:x("Initiate recovery for another"),onClick:be},"initRecovery")],x("Recovery")),(0,v.m)(C.api.tx.multisig?.asMulti)&&z&&(0,D.xv)("multisigGroup",[(0,a.jsx)(r.v2.Item,{icon:"file-signature",isDisabled:!E||!E.length,label:x("Multisig approvals"),onClick:de},"multisigApprovals")],x("Multisig")),(0,v.m)(C.api.query.democracy?.votingOf)&&o?.accountDelegated&&(0,D.xv)("undelegateGroup",[(0,a.jsx)(r.v2.Item,{icon:"user-edit",label:x("Change democracy delegation"),onClick:Te},"changeDelegate"),(0,a.jsx)(r.v2.Item,{icon:"user-minus",label:x("Undelegate"),onClick:Re},"undelegate")],x("Undelegate")),(0,D.xv)("delegateGroup",[(0,v.m)(C.api.query.democracy?.votingOf)&&!o?.accountDelegated&&(0,a.jsx)(r.v2.Item,{icon:"user-plus",label:x("Delegate democracy votes"),onClick:Te},"delegate"),(0,v.m)(C.api.query.proxy?.proxies)&&(0,a.jsx)(r.v2.Item,{icon:"sitemap",label:c?.[0].length?x("Manage proxies"):x("Add proxy"),onClick:me},"proxy-overview")],x("Delegate")),F&&!C.isDevelopment&&(0,D.xv)("genesisGroup",[(0,a.jsx)(r.H_,{className:"accounts--network-toggle",genesisHash:$,onChange:_},"chainlock")])].filter((e=>e))),[Be,Le,_e,He,C,o,U,$,L,P,F,V,R,q,O,z,E,_,c,G,A,x,ee,Te,te,ne,re,le,de,pe,me,be,je,Re,Y]);return qe?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ws,{className:`${t} isExpanded isFirst packedBottom`,children:[(0,a.jsx)(r.iA.Column.Favorite,{address:e,isFavorite:l,toggle:p}),(0,a.jsxs)("td",{className:"address all relative",children:[(0,a.jsx)(r.N,{parentAddress:s.parentAddress,value:e,withShortAddress:!0}),X&&(0,a.jsx)(Fe,{address:e,onClose:ee},"modal-backup-account"),we&&(0,a.jsx)(Oe,{onClose:Te,previousAmount:o?.amount,previousConviction:o?.conviction,previousDelegatedAccount:o?.accountDelegated,previousDelegatingAccount:e},"modal-delegate"),se&&(0,a.jsx)($e,{from:e,onClose:te},"modal-derive-account"),ae&&(0,a.jsx)(r.u5,{address:e,onClose:ne,onForget:ze},"modal-forget-account"),oe&&(0,a.jsx)(Ze,{address:e,onClose:re},"modal-identity-main"),ie&&(0,a.jsx)(Ge,{address:e,onClose:le},"modal-identity-sub"),he&&(0,a.jsx)(Ve,{address:e,onClose:pe},"modal-change-pass"),ye&&(0,a.jsx)(ms.Z,{onClose:Ce,senderId:e},"modal-transfer"),ue&&(0,a.jsx)(ls,{onClose:me,previousProxy:c,proxiedAccount:e},"modal-proxy-overview"),z&&ce&&E&&0!==E.length&&(0,a.jsx)(Xe,{address:e,onClose:de,ongoing:E,threshold:s.threshold,who:s.who},"multisig-approve"),xe&&(0,a.jsx)(cs,{address:e,onClose:be},"recover-account"),fe&&(0,a.jsx)(us,{address:e,onClose:je},"recover-setup"),De&&(0,a.jsx)(hs,{accountDelegating:e,onClose:Re},"modal-delegate"),(0,a.jsxs)("div",{className:"absolute",children:[s.genesisHash?(0,a.jsx)(r.Ct,{color:"transparent"}):P?(0,a.jsx)(r.Ct,{className:"warning",hover:x("This is a development account derived from the known development seed. Do not use for any funds on a non-development network."),icon:"wrench"}):(0,a.jsx)(r.Ct,{className:"warning",hover:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:x('This account is available on all networks. It is recommended to link to a specific network via the account options ("only this network" option) to limit availability. For accounts from an extension, set the network on the extension.')}),(0,a.jsx)("p",{children:x("This does not send any transaction, rather it only sets the genesis in the account JSON.")})]}),icon:"exclamation-triangle"}),A&&(0,a.jsx)(r.Ct,{className:"recovery",hover:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:x("This account is recoverable, with the following friends:")}),(0,a.jsx)("div",{children:A.friends.map(((e,s)=>(0,a.jsx)(r.N,{value:e},s)))}),(0,a.jsx)("table",{children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:x("threshold")}),(0,a.jsx)("td",{children:(0,Me.u)(A.threshold)})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:x("delay")}),(0,a.jsx)("td",{children:(0,Me.u)(A.delayPeriod)})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:x("deposit")}),(0,a.jsx)("td",{children:(0,Pe.a)(A.deposit)})]})]})})]}),icon:"redo"}),B&&M?.isEmpty&&(0,a.jsx)(r.Ct,{className:"important",hover:x("Proxied account has no owned proxies"),icon:"sitemap",info:"0"}),z&&E&&0!==E.length&&(0,a.jsx)(r.Ct,{className:"important",color:"purple",hover:x("Multisig approvals pending"),hoverAction:x("View pending approvals"),icon:"file-signature",onClick:de}),o?.accountDelegated&&(0,a.jsx)(r.Ct,{className:"information",hover:x("This account has a governance delegation"),hoverAction:x("Manage delegation"),icon:"calendar-check",onClick:Te}),c&&0!==c[0].length&&C.api.tx.utility&&(0,a.jsx)(r.Ct,{className:"information",hover:1===c[0].length?x("This account has a proxy set"):x("This account has {{proxyNumber}} proxies set",{replace:{proxyNumber:c[0].length}}),hoverAction:x("Manage proxies"),icon:"sitemap",onClick:me})]})]}),(0,a.jsx)("td",{className:"actions button",children:(0,a.jsxs)(r.zx.Group,{children:[(0,v.m)(C.api.tx.balances?.transfer)&&(0,a.jsx)(r.zx,{className:"send-button",icon:"paper-plane",label:x("send"),onClick:Ce}),(0,a.jsx)(r.GI,{isDisabled:!We.length,value:(0,a.jsx)(r.v2,{children:We})})]})}),(0,a.jsx)(r.iA.Column.Expand,{isExpanded:g,toggle:f})]}),(0,a.jsxs)(ws,{className:`${t} isExpanded ${g?"":"isLast"} packedTop`,children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{className:"balance all",colSpan:2,children:(0,a.jsx)(r.hl,{address:e,balancesAll:k,withBalance:bs})}),(0,a.jsx)("td",{})]}),(0,a.jsxs)(ws,{className:`${t} ${g?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,a.jsx)("td",{}),(0,a.jsxs)("td",{className:"balance columar",colSpan:2,children:[(0,a.jsx)(r.hl,{address:e,balancesAll:k,convictionLocks:W,withBalance:fs}),(0,a.jsxs)(r.P0,{size:"tiny",children:[(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)("div",{"data-testid":"tags",children:(0,a.jsx)(r.$G,{value:Z,withTitle:!0})})}),(0,a.jsxs)(r.P0.Column,{children:[(0,a.jsx)("h5",{children:x("account type")}),(0,a.jsx)(r.lK,{accountId:e})]})]}),(0,a.jsx)(r.P0,{is100:!0,children:(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.NR,{data:e,type:"address",withTitle:!0})})})]}),(0,a.jsx)("td",{})]})]}):null}));var ks=t(73352);const Ss=r.zo.article`
  .box {
    padding: 0 0.5rem;
  }
`,Is=n.memo((function({children:e,className:s="",type:t}){return(0,a.jsx)(Ss,{className:`${s} ${t} centered`,children:(0,a.jsx)("div",{className:"box",children:e})})})),As=n.memo((function(){const e=(0,ks.Z)(),{t:s}=(0,T.$)();return e?(0,a.jsx)(Is,{type:"error",children:(0,a.jsxs)("p",{children:[s("You have {{claimCount}} accounts that need attestations. Use the Claim Tokens app on the navigation bar to complete the process. Until you do, your balances for those accounts will not be reflected.",{replace:{claimCount:e}})," ",(0,a.jsx)("a",{href:"#/claims",children:s("Claim tokens...")})]})}):null}));var Es=t(54924),Ms=t(61349),Ps=t(76075),Ts=t(79444),Ds=t(345),Fs=t(69356),Vs=t(30242);const Rs=(0,Es.qY)(),qs=Rs&&Rs.name||null,Os=qs&&Object.keys(Ts.l).includes(qs),zs=(0,Fs.onlyOnWeb)(n.memo((function(){const{t:e}=(0,T.$)(),{hasInjectedAccounts:s}=(0,d.h)(),t=(0,Ps.Z)(),o=(0,n.useRef)(e("Since some extensions, such as the polkadot-js extension, protects you against all community reported phishing sites, there are valid reasons to use them for additional protection, even if you are not storing accounts in it."));return Os&&qs?Ds.LW?s?t?(0,a.jsxs)(Is,{type:"warning",children:[(0,a.jsxs)("p",{children:[1===t?e("You have 1 extension that needs to be updated with the latest chain properties in order to display the correct information for the chain you are connected to."):e("You have {{upgradableCount}} extensions that need to be updated with the latest chain properties in order to display the correct information for the chain you are connected to.",{replace:{upgradableCount:t}}),e(" This update includes chain metadata and chain properties.")]}),(0,a.jsx)("p",{children:(0,a.jsxs)(Ms.cC,{children:["Visit your ",(0,a.jsx)("a",{href:"#/settings/metadata",children:"settings page"})," to apply the updates to the injected extensions."]},"extensionUpgrade")})]}):null:(0,a.jsxs)(Is,{type:"warning",children:[(0,a.jsx)("p",{children:e("One or more extensions are detected in your browser, however no accounts has been injected.")}),(0,a.jsx)("p",{children:e("Ensure that the extension has accounts, some accounts are visible globally and available for this chain and that you gave the application permission to access accounts from the extension to use them.")}),(0,a.jsx)("p",{children:o.current})]}):(0,a.jsxs)(Is,{type:"warning",children:[(0,a.jsx)("p",{children:e("It is recommended that you create/store your accounts securely and externally from the app. On {{yourBrowser}} the following browser extensions are available for use -",{replace:{yourBrowser:(0,Vs.k)(qs)}})}),(0,a.jsx)("ul",{children:Ts.l[qs].map((({desc:s,link:t,name:n})=>(0,a.jsxs)("li",{children:[(0,a.jsx)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:n})," (",e(s),")"]},n)))}),(0,a.jsxs)("p",{children:[e("Accounts injected from any of these extensions will appear in this application and be available for use. The above list is updated as more extensions with external signing capability become available.")," ",(0,a.jsx)("a",{href:"https://github.com/polkadot-js/extension",rel:"noopener noreferrer",target:"_blank",children:e("Learn more...")})]}),(0,a.jsx)("p",{children:o.current})]}):null})));var Bs=t(43814),$s=t(58607);const Ls=n.memo((function({balance:e,className:s}){const{t}=(0,Bs.$)();return(0,a.jsxs)(r.Ty,{className:s,children:[(0,a.jsx)(r.Jy,{label:t("total balance"),children:(0,a.jsx)($s.Z,{className:e?"":"--tmp",value:e?.total||1})}),(0,a.jsx)(r.Jy,{className:"media--900",label:t("total transferrable"),children:(0,a.jsx)($s.Z,{className:e?"":"--tmp",value:e?.transferrable||1})}),(0,a.jsx)(r.Jy,{label:t("total locked"),children:(0,a.jsx)($s.Z,{className:e?"":"--tmp",value:e?.locked||1})}),e?.bonded.gtn(0)&&(0,a.jsx)(r.Jy,{className:"media--1100",label:t("bonded"),children:(0,a.jsx)($s.Z,{value:e.bonded})}),e?.redeemable.gtn(0)&&(0,a.jsx)(r.Jy,{className:"media--1500",label:t("redeemable"),children:(0,a.jsx)($s.Z,{value:e.redeemable})}),e?.unbonding.gtn(0)&&(0,a.jsx)(r.Jy,{className:"media--1300",label:t("unbonding"),children:(0,a.jsx)($s.Z,{value:e.unbonding})})]})})),Hs={sortBy:"date",sortFromMax:!0},_s=["accounts","injected","qr","hardware","proxied","multisig","testing"],Zs=r.zo.div`
  .ui--Dropdown {
    width: 15rem;
  }

  .header-box {
    .dropdown-section {
      display: flex;
      flex-direction: row;
      align-items: center;
    }

    .ui--Button-Group {
      margin-left: auto;
    }
  }
`,Ws=n.memo((function({className:e="",onStatusChange:s}){const{t}=(0,T.$)(),{api:o,isElectron:y}=(0,d.h)(),{allAccounts:C,hasAccounts:w}=(0,i.x)(),{isIpfs:N}=(0,l.g)(),{isLedgerEnabled:k}=(0,u.c)(),[S,I]=(0,m.O)(),[A,E]=(0,m.O)(),[M,P]=(0,m.O)(),[F,V]=(0,m.O)(),[R,q]=(0,m.O)(),[O,z]=(0,m.O)(),[B,$]=(0,h.r)("accounts:favorites"),[H,_]=(0,n.useState)({accounts:{}}),[Z,W]=(0,n.useState)(""),[U,J]=(0,n.useState)([]),[{sortBy:G,sortFromMax:Q},Y]=(0,n.useState)(Hs),X=(0,p.W)(),ee=(0,x.N)(),se=(0,g.q)(),ae=(0,n.useCallback)((e=>Y((({sortFromMax:s})=>({sortBy:e,sortFromMax:s})))),[]),ne=(0,n.useCallback)((()=>Y((({sortBy:e,sortFromMax:s})=>({sortBy:e,sortFromMax:!s})))),[]),oe=(0,n.useRef)(D.r.map((e=>({text:e,value:e})))),re=(0,n.useCallback)(((e,s)=>_((({accounts:t})=>{t[e]=s;const a=e=>Object.values(t).reduce(((s,t)=>s.add(t[e])),j.nw);return{accounts:t,summary:{bonded:a("bonded"),locked:a("locked"),redeemable:a("redeemable"),total:a("total"),transferrable:a("transferrable"),unbonding:a("unbonding")}}}))),[]),ie=(0,n.useMemo)((()=>y||!N&&"on"===f.X.get().storage),[y,N]),le=(0,n.useMemo)((()=>Object.fromEntries(B.map((e=>[e,!0])))),[B]),ce=(0,n.useMemo)((()=>(0,v.m)((o.tx.multisig||o.tx.utility)?.approveAsMulti)),[o]),de=(0,n.useMemo)((()=>(0,v.m)(o.tx.proxy?.addProxy)),[o]),ue=(0,n.useMemo)((()=>C.map(((e,s)=>{const t=X&&X[s]?.isDelegating&&X[s]?.asDelegating,a=t&&{accountDelegated:t.target.toString(),amount:t.balance,conviction:t.conviction}||void 0;return{account:b.Nn.getAccount(e),address:e,delegation:a,isFavorite:le[e??""]??!1}})).filter((e=>!!e.account)).reduce(((e,s)=>(e[s.address]=s,e)),{})),[C,le,X]),me=(0,n.useMemo)((()=>{const e={accounts:[[(0,a.jsxs)(a.Fragment,{children:[t("accounts"),(0,a.jsx)("div",{className:"sub",children:t("all locally stored accounts")})]})]],hardware:[[(0,a.jsxs)(a.Fragment,{children:[t("hardware"),(0,a.jsx)("div",{className:"sub",children:t("accounts managed via hardware devices")})]})]],injected:[[(0,a.jsxs)(a.Fragment,{children:[t("extension"),(0,a.jsx)("div",{className:"sub",children:t("accounts available via browser extensions")})]})]],multisig:[[(0,a.jsxs)(a.Fragment,{children:[t("multisig"),(0,a.jsx)("div",{className:"sub",children:t("on-chain multisig accounts")})]})]],proxied:[[(0,a.jsxs)(a.Fragment,{children:[t("proxied"),(0,a.jsx)("div",{className:"sub",children:t("on-chain proxied accounts")})]})]],qr:[[(0,a.jsxs)(a.Fragment,{children:[t("via qr"),(0,a.jsx)("div",{className:"sub",children:t("accounts available via mobile devices")})]})]],testing:[[(0,a.jsxs)(a.Fragment,{children:[t("development"),(0,a.jsx)("div",{className:"sub",children:t("accounts derived via development seeds")})]})]]};return Object.values(e).forEach((e=>{e[0][1]="start",e[0][2]=4})),e}),[t]),pe=(0,n.useMemo)((()=>function(e){const s={accounts:[],hardware:[],injected:[],multisig:[],proxied:[],qr:[],testing:[]};for(let t=0;t<e.length;t++){const{account:a,address:n}=e[t],o=(0,c.C9)(n);a?.meta.isHardware?s.hardware.push(n):a?.meta.isTesting?s.testing.push(n):"injected"===o?s.injected.push(n):"multisig"===o?s.multisig.push(n):"proxied"===o?s.proxied.push(n):"qr"===o?s.qr.push(n):s.accounts.push(n)}return s}(U)),[U]),xe=(0,n.useMemo)((()=>Object.values(ue).reduce(((e,{account:s,address:t,delegation:n,isFavorite:o},r)=>(e[t]=(0,a.jsx)(Ns,{account:s,delegation:n,filter:Z,isFavorite:o,proxy:ee?.[r],setBalance:re,toggleFavorite:$},t),e)),{})),[ue,Z,ee,re,$]),ge=(0,n.useMemo)((()=>_s.reduce(((e,s)=>{const t=pe[s];return t.length&&(e[s]=t.map((e=>xe[e]))),e}),{})),[pe,xe]);return(0,n.useEffect)((()=>{J((e=>[...e.map((e=>ue[e.address])).filter((e=>!!e)),...Object.keys(ue).filter((s=>!e.find((e=>s===e.address)))).map((e=>ue[e]))]))}),[ue]),(0,n.useEffect)((()=>{J((e=>(0,D.nZ)(e,ue,H.accounts,G,Q)))}),[ue,H,G,Q]),(0,a.jsxs)(Zs,{className:e,children:[S&&(0,a.jsx)(K,{onClose:I,onStatusChange:s}),A&&(0,a.jsx)(te,{onClose:E,onStatusChange:s}),M&&(0,a.jsx)(L,{onClose:P}),F&&(0,a.jsx)(he,{onClose:V,onStatusChange:s}),R&&(0,a.jsx)(be,{onClose:q,onStatusChange:s}),O&&(0,a.jsx)(je,{onClose:z,onStatusChange:s}),(0,a.jsx)(zs,{}),(0,a.jsx)(As,{}),(0,a.jsx)(Ls,{balance:H.summary}),(0,a.jsxs)(r.Ty,{className:"header-box",children:[(0,a.jsxs)("section",{className:"dropdown-section media--1300","data-testid":"sort-by-section",children:[(0,a.jsx)(r.ak,{className:"media--1500",defaultValue:G,label:t("sort by"),onChange:ae,onClick:ne,options:oe.current,sortDirection:Q?"ascending":"descending"}),(0,a.jsx)(r.HS,{filterOn:Z,label:t("filter by name or tags"),setFilter:W})]}),(0,a.jsxs)(r.zx.Group,{children:[ie&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",label:t("Account"),onClick:I}),(0,a.jsx)(r.zx,{icon:"sync",label:t("From JSON"),onClick:E})]}),(0,a.jsx)(r.zx,{icon:"qrcode",label:t("From Qr"),onClick:z}),k&&(0,a.jsx)(r.zx,{icon:"project-diagram",label:t("From Ledger"),onClick:P}),(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!ce||!w,label:t("Multisig"),onClick:V}),(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!de||!w,label:t("Proxied"),onClick:q})]})]}),se&&U.length?_s.map((e=>ge[e]&&(0,a.jsx)(r.iA,{empty:t("No accounts"),header:me[e],isSplit:!0,children:ge[e]},e))):(0,a.jsx)(r.iA,{empty:se&&U&&t("You don't have any accounts. Some features are currently hidden and will only become available once you have accounts."),header:me.accounts})]})}));var Us=t(61261),Js=t(76116),Gs=t(22420);const Qs=r.zo.tr`
  text-align: center;

  &:hover {
    background: #f9f8f7;
  }

  .vanity--Match-addr {
    font-size: 1.1rem;

    .no {
      color: inherit;
    }

    .yes {
      color: red;
    }
  }

  .vanity--Match-buttons,
  .vanity--Match-data,
  .vanity--Match-icon {
    display: inline-block;
    vertical-align: middle;
  }

  .vanity--Match-item {
    display: inline-block;
    font: var(--font-mono);
    margin: 0 auto;
    padding: 0.5em;
    position: relative;
  }

  .vanity--Match-seed {
    opacity: 0.45;
    padding: 0 1rem;
  }
`,Ys=n.memo((function({address:e,className:s="",count:t,offset:o,onCreateToggle:i,onRemove:l,seed:c}){const{t:d}=(0,T.$)(),u=(0,n.useMemo)((()=>(0,w.c)(c)),[c]),m=(0,n.useCallback)((()=>i(u)),[u,i]),h=(0,n.useCallback)((()=>l(e)),[e,l]);return(0,a.jsxs)(Qs,{className:s,children:[(0,a.jsx)("td",{className:"number",colSpan:2,children:(0,a.jsx)(r.k,{className:"vanity--Match-icon",value:e})}),(0,a.jsx)("td",{className:"address all",children:(0,a.jsxs)("div",{className:"vanity--Match-addr",children:[(0,a.jsx)("span",{className:"no",children:e.slice(0,o)}),(0,a.jsx)("span",{className:"yes",children:e.slice(o,t+o)}),(0,a.jsx)("span",{className:"no",children:e.slice(t+o)})]})}),(0,a.jsx)("td",{className:"hash",children:u}),(0,a.jsxs)("td",{className:"button",children:[(0,a.jsx)(r.zx,{icon:"plus",label:d("Save"),onClick:m}),(0,a.jsx)(r.zx,{icon:"times",onClick:h})]})]})})),Ks=[{text:"No",value:!1},{text:"Yes",value:!0}],Xs=r.zo.div`
  .vanity--App-matches {
    overflow-x: auto;
    padding: 1em 0;
  }

  .vanity--App-stats {
    padding: 1em 0 0 0;
    opacity: 0.45;
    text-align: center;
  }
`,et=n.memo((function({className:e="",onStatusChange:s}){const{t}=(0,T.$)(),{api:o,isEthereum:i}=(0,d.h)(),l=(0,n.useRef)([]),c=(0,n.useRef)(!1),u=(0,pe.X)(),[m,h]=(0,n.useState)(null),[{elapsed:p,isRunning:x,keyCount:g,matches:b},j]=(0,n.useState)({elapsed:0,isRunning:!1,keyCount:-1,keyTime:0,matches:[],startAt:0}),[{isMatchValid:v,match:y},C]=(0,n.useState)({isMatchValid:!0,match:"Some"}),[w,N]=(0,n.useState)("ed25519"),[S,I]=(0,n.useState)(!0),A=(0,n.useCallback)((()=>h(null)),[]),E=(0,n.useCallback)((()=>{const e=l.current;l.current=[],0!==e.length&&u.current&&j((({isRunning:s,keyCount:t,keyTime:a,matches:n,startAt:o})=>{let r=t,i=a;const l=e.reduce(((e,{elapsed:s,found:t})=>(r+=t.length,i+=s,e.concat(t))),n);return{elapsed:Date.now()-o,isRunning:s,keyCount:r,keyTime:i,matches:l.sort(Gs.Z).slice(0,25),startAt:o}}))}),[u]),M=(0,n.useCallback)((()=>{if(!c.current)return E();(0,k.Y)((()=>{u.current&&(25===l.current.length&&E(),l.current.push((0,Us.Z)({match:y,runs:10,ss58Format:o.registry.chainSS58||0,type:w,withCase:S,withHex:!0})),M())}))}),[E,o,y,u,c,w,S]),P=(0,n.useCallback)((e=>C({isMatchValid:Js.Z.test(e)&&0!==e.length&&e.length<31,match:e})),[]),D=(0,n.useCallback)((e=>j((s=>({...s,matches:s.matches.filter((s=>s.address!==e))})))),[]),F=(0,n.useCallback)((()=>j((({elapsed:e,isRunning:s,keyCount:t,keyTime:a,matches:n,startAt:o})=>({elapsed:e,isRunning:!s,keyCount:s?t:0,keyTime:s?a:0,matches:n,startAt:s?o:Date.now()})))),[]);(0,n.useEffect)((()=>{c.current=x,x&&M()}),[M,x]);const V=(0,n.useMemo)((()=>[[t("matches"),"start",2],[t("Evaluated {{count}} keys in {{elapsed}}s ({{avg}} keys/s)",{replace:{avg:(g/(p/1e3)).toFixed(3),count:g,elapsed:(p/1e3).toFixed(2)}}),"start --digits"],[t("secret"),"start"],[]]),[p,g,t]);return(0,a.jsxs)(Xs,{className:e,children:[(0,a.jsxs)("div",{className:"ui--row",children:[(0,a.jsx)(r.II,{autoFocus:!0,className:"medium",isDisabled:x,isError:!v,label:t("Search for"),onChange:P,onEnter:F,value:y}),(0,a.jsx)(r.Lt,{className:"medium",isDisabled:x,label:t("case sensitive"),onChange:I,options:Ks,value:S})]}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Lt,{className:"medium",defaultValue:w,label:t("keypair crypto type"),onChange:N,options:i?f.X.availableCryptosEth:f.X.availableCryptos})}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:x?"stop":"sign-in-alt",isDisabled:!v,label:t(x?"Stop generation":"Start generation"),onClick:F})}),0!==b.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("article",{className:"warning centered",children:t('Ensure that you utilized the "Save" functionality before using a generated address to receive funds. Without saving the address and the associated seed any funds sent to it will be lost.')}),(0,a.jsx)(r.iA,{className:"vanity--App-matches",empty:t("No matches found"),header:V,children:b.map((e=>(0,n.createElement)(Ys,{...e,key:e.address,onCreateToggle:h,onRemove:D})))})]}),m&&(0,a.jsx)(K,{onClose:A,onStatusChange:s,seed:m,type:w})]})})),st=["vanity"],tt=n.memo((function({basePath:e,onStatusChange:s}){const{t}=(0,T.$)(),{hasAccounts:c}=(0,i.x)(),{isIpfs:d}=(0,l.g)(),u=(0,n.useRef)([{isRoot:!0,name:"overview",text:t("My accounts")},{name:"vanity",text:t("Vanity generator")}]);return(0,a.jsxs)("main",{className:"accounts--App",children:[(0,a.jsx)(r.mQ,{basePath:e,hidden:c&&!d?void 0:st,items:u.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/vanity`,children:(0,a.jsx)(et,{onStatusChange:s})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(Ws,{onStatusChange:s})})]})]})}))},14868:(e,s,t)=>{t.d(s,{Z:()=>g});var a=t(52322),n=t(2784),o=t(2727),r=t(24732),i=t(5305),l=t(90778),c=t(9118),d=t(13940),u=t(95292),m=t(17965),h=t(33661),p=t(5469);const x=(0,r.zo)(i.Z)`
  .balance {
    margin-bottom: 0.5rem;
    text-align: right;
    padding-right: 1rem;

    .label {
      opacity: 0.7;
    }
  }

  label.with-help {
    flex-basis: 10rem;
  }

  .typeToggle {
    text-align: right;
  }

  .typeToggle+.typeToggle {
    margin-top: 0.375rem;
  }
`,g=n.memo((function({className:e="",onClose:s,recipientId:t,senderId:g}){const{t:b}=(0,p.$)(),{api:f}=(0,l.h)(),[j,v]=(0,n.useState)(u.nw),[y]=(0,n.useState)(!0),[C,w]=(0,n.useState)(!0),[N,k]=(0,n.useState)(!1),[[S,I],A]=(0,n.useState)([null,!1]),[E,M]=(0,n.useState)(null),[P,T]=(0,n.useState)(null),[[,D],F]=(0,n.useState)([null,null]),V=(0,c.W7)(f.derive.balances?.all,[g||P]),R=(0,c.W7)(f.query.system.account,[g||P]);(0,n.useEffect)((()=>{const e=g||P,s=t||E;V&&V.accountId?.eq(e)&&e&&s&&f.call.transactionPaymentApi&&f.tx.balances?(0,m.Y)((async()=>{try{const t=f.tx.balances.transfer(s,V.availableBalance),{partialFee:a}=await t.paymentInfo(e),n=a.muln(110).div(u.S8),o=V.availableBalance.sub(n);A(f.consts.balances&&o.gt(f.consts.balances.existentialDeposit)?[o,!1]:[null,!0])}catch(e){console.error(e)}})):A([null,!1])}),[f,V,t,g,E,P]),(0,n.useEffect)((()=>{(async function(e,s){return[null,s?await(0,o.fF)(s):null]})(0,t||E).then(F).catch(console.error)}),[t,g,E,P]);const q=!R||(function(e){return!!e.refcount}(R)?R.refcount.isZero():R.consumers.isZero()),O=!C&&V&&V.accountId?.eq(g||P)&&S&&q;return(0,a.jsxs)(x,{className:"app--accounts-Modal",header:b("Send funds"),onClose:s,size:"large",children:[(0,a.jsx)(i.Z.Content,{children:(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(i.Z.Columns,{hint:b("The transferred balance will be subtracted (along with fees) from the sender account."),children:(0,a.jsx)(r.rp,{defaultValue:g,isDisabled:!!g,label:b("send from account"),labelExtra:(0,a.jsx)(d.Z,{label:b("transferrable"),params:g||P}),onChange:T,type:"account"})}),(0,a.jsxs)(i.Z.Columns,{hint:b("The beneficiary will have access to the transferred fees when the transaction is included in a block."),children:[(0,a.jsx)(r.rp,{defaultValue:t,isDisabled:!!t,label:b("send to address"),labelExtra:(0,a.jsx)(d.Z,{label:b("transferrable"),params:t||E}),onChange:M,type:"allPlus"}),D&&(0,a.jsx)(r.oy,{content:b("The recipient is associated with a known phishing site on {{url}}",{replace:{url:D}})})]}),(0,a.jsx)(i.Z.Columns,{hint:b("If the recipient account is new, the balance needs to be more than the existential deposit. Likewise if the sending account balance drops below the same value, the account will be removed from the state."),children:O&&N?(0,a.jsx)(r.H,{autoFocus:!0,defaultValue:S,isDisabled:!0,label:b("transferrable minus fees")},S?.toString()):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.H,{autoFocus:!0,isError:!y,isZeroable:!0,label:b("amount"),maxValue:S,onChange:v}),(0,a.jsx)(r.H,{defaultValue:f.consts.balances?.existentialDeposit,isDisabled:!0,label:b("existential deposit")})]})}),(0,a.jsxs)(i.Z.Columns,{hint:b("With the keep-alive option set, the account is protected against removal due to low balances."),children:[(0,h.m)(f.tx.balances?.transferKeepAlive)&&(0,a.jsx)(r.ZD,{className:"typeToggle",label:b(C?"Transfer with account keep-alive checks":"Normal transfer without keep-alive checks"),onChange:w,value:C}),O&&(0,a.jsx)(r.ZD,{className:"typeToggle",label:b("Transfer the full account balance, reap the sender"),onChange:k,value:N}),!C&&!q&&(0,a.jsx)(r.Pd,{content:b("There is an existing reference count on the sender account. As such the account cannot be reaped from the state.")}),I&&(0,a.jsx)(r.Pd,{content:b("The transaction, after application of the transfer fees, will drop the available balance below the existential deposit. As such the transfer will fail. The account needs more free funds to cover the transaction fees.")})]})]})}),(0,a.jsx)(i.Z.Actions,{children:(0,a.jsx)(r.cA,{accountId:g||P,icon:"paper-plane",isDisabled:!(y&&(t||E)&&j&&!D),label:b("Make Transfer"),onStart:s,params:O&&N?(0,h.m)(f.tx.balances?.transferAll)?[t||E,!1]:[t||E,S]:[t||E,j],tx:O&&N&&(0,h.m)(f.tx.balances?.transferAll)?f.tx.balances?.transferAll:C?f.tx.balances?.transferKeepAlive:f.tx.balances?.transfer})})]})}))},5469:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-accounts")}},10189:(e,s,t)=>{t.d(s,{Z:()=>n});var a=t(34814);const n=(0,t(11677).e)("useCounter",(function(){const{hasAccounts:e}=(0,a.x)();return e?null:"!"}))},1632:(e,s,t)=>{t.d(s,{nZ:()=>x,ol:()=>h,r:()=>p,v8:()=>g,xv:()=>u});var a=t(52322),n=t(46782),o=t.n(n),r=t(2784),i=t(41186),l=t(24732),c=t(11798),d=t(95292);function u(e,s,t){const n=s.filter((e=>!!e));return n.length?(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(l.v2.Divider,{}),t&&(0,a.jsx)(l.v2.Header,{children:t}),n]},e):null}function m({json:e,pair:s}){o().saveAs(new Blob([JSON.stringify(e)],{type:"application/json; charset=utf-8"}),`${s.address}.json`)}function h(e,s){const t={action:"create",message:s,status:"success"};try{const s=e(),a=s.pair.address;t.account=a,"web"===(0,i.getEnvironment)()&&m(s),m(s),l.rp.setLastValue("account",a)}catch(e){t.status="error",t.message=e.message}return t}const p=["parent","name","date","balances"];function x(e,s,t,a,n){return[...e].sort(function(e,s,t,a){function n(e,s){const t=a?1:-1;return(a,n)=>t*s(e(a),e(n))}switch(t){case"parent":return n((function s(t){if(t){const a=t.account?.meta.parentAddress||"";return s(e[a])+t.address}return""}),((e,s)=>e.localeCompare(s)));case"name":return n((e=>(0,c.Ly)(e.address).name??""),((e,s)=>e.localeCompare(s)));case"date":return n((e=>e.account?.meta.whenCreated??0),((e,s)=>e-s));case"balances":return n((e=>s[e.address]?.total??d.nw),((e,s)=>e.cmp(s)))}}(s,t,a,n)).sort(((e,s)=>e.isFavorite===s.isFavorite?0:s.isFavorite?1:-1))}function g(e){return"Erroneous"===e||"Low quality"===e?"red":"green"}},28096:(e,s,t)=>{t.d(s,{Z:()=>A});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(81642),l=t(38894),c=t(54131),d=t(47623),u=t(90778),m=t(9118),h=t(69187),p=t(48533),x=t(73493),g=t(61349);function b(){return(0,g.$G)("app-addresses")}const f=n.memo((function({onClose:e,onStatusChange:s}){const{t}=b(),{api:o,isEthereum:i}=(0,u.h)(),[{isNameValid:l,name:c},d]=(0,n.useState)({isNameValid:!1,name:""}),[{address:g,addressInput:f,isAddressExisting:j,isAddressValid:v},y]=(0,n.useState)({address:"",addressInput:"",isAddressExisting:!1,isAddressValid:!1,isPublicKey:!1}),C=(0,m.W7)(!!g&&v&&o.derive.accounts.info,[g]),w=v&&l&&!!C?.accountId,N=(0,n.useCallback)((e=>{let s="",t=!0,a=!1,n=!1;try{if(i){const t=(0,p.G)(e);s=(0,x.K)(t),n=20===t.length}else{const t=h.Nn.decodeAddress(e);s=h.Nn.encodeAddress(t),n=32===t.length}if(!t){const e=h.Nn.getAddress(s);if(e){const s=e.meta.name||c;a=!0,t=!0,d({isNameValid:!!(s||"").trim(),name:s})}}}catch(e){t=!1}y({address:t?s:"",addressInput:e,isAddressExisting:a,isAddressValid:t,isPublicKey:n})}),[i,c]),k=(0,n.useCallback)((e=>d({isNameValid:!!e.trim(),name:e})),[]),S=(0,n.useCallback)((()=>{const a={action:"create"};if(w&&C?.accountId){try{const e=C.accountId.toString();h.Nn.saveAddress(e,{genesisHash:h.Nn.genesisHash,name:c.trim(),tags:[]}),a.account=e,a.status=e?"success":"error",a.message=t(j?"address edited":"address created"),r.rp.setLastValue("address",e)}catch(e){a.status="error",a.message=e.message}s(a),e()}}),[C,j,w,c,e,s,t]);return(0,a.jsxs)(r.u_,{header:t("Add an address"),onClose:e,children:[(0,a.jsx)(r.u_.Content,{children:(0,a.jsxs)(r.mV,{defaultName:c,noDefaultNameOpacity:!0,value:v?C?.accountId?.toString():void 0,children:[(0,a.jsx)(r.II,{autoFocus:!0,className:"full",isError:!v,label:t("address"),onChange:N,onEnter:S,placeholder:t("new address"),value:f}),(0,a.jsx)(r.II,{className:"full",isError:!l,label:t("name"),onChange:k,onEnter:S,value:c})]})}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"save",isDisabled:!w,label:t("Save"),onClick:S})})]})}));var j=t(14868),v=t(60773),y=t(83696),C=t(33661);const w={available:!1,bonded:!1,locked:!1,redeemable:!1,reserved:!1,total:!0,unlocking:!1,vested:!1},N={available:!0,bonded:!0,locked:!0,nonce:!0,redeemable:!0,reserved:!0,total:!1,unlocking:!0,vested:!0},k=n.memo((function({address:e,className:s="",filter:t,isFavorite:o,toggleFavorite:i}){const{t:c}=b(),d=(0,u.h)(),m=(0,v.Y)(e),p=(0,y.r)(e),[x,g]=(0,n.useState)([]),[f,k]=(0,n.useState)(""),[S,I]=(0,n.useState)(null),[A,E]=(0,n.useState)(null),[M,P]=(0,n.useState)(!1),[T,D]=(0,n.useState)(!1),[F,V]=(0,n.useState)(!0),[R,q]=(0,l.O)(!1),O=(0,n.useCallback)((e=>g(e.sort())),[]);(0,n.useEffect)((()=>{const s=h.Nn.getAddress(e);I(s||null),E(s&&s.meta.genesisHash||null)}),[]),(0,n.useEffect)((()=>{const{identity:e,nickname:s}=m||{};(0,C.m)(d.api.query.identity?.identityOf)?e?.display&&k(e.display):s&&k(s)}),[d,m]),(0,n.useEffect)((()=>{const s=h.Nn.getAddress(e);O(s?.meta?.tags||[]),k(s?.meta?.name||"")}),[O,e]),(0,n.useEffect)((()=>{if(0===t.length)V(!0);else{const e=t.toLowerCase();V(x.reduce(((s,t)=>s||t.toLowerCase().includes(e)),f.toLowerCase().includes(e)))}}),[f,t,x]);const z=(0,n.useCallback)((s=>{E(s);const t=h.Nn.getAddress(e);t&&h.Nn.saveAddress(e,{...t.meta,genesisHash:s}),E(s)}),[e]),B=(0,n.useCallback)((()=>P(!M)),[M]),$=(0,n.useCallback)((()=>D(!T)),[T]),L=(0,n.useCallback)((()=>{if(e){const s={account:e,action:"forget"};try{h.Nn.forgetAddress(e),s.status="success",s.message=c("address forgotten")}catch(e){s.status="error",s.message=e.message}}}),[e,c]);if(!F)return null;const H=(0,a.jsxs)(r.v2,{children:[(0,a.jsx)(r.v2.Item,{isDisabled:!1,label:c("Forget this address"),onClick:B}),!d.isDevelopment&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.v2.Divider,{}),(0,a.jsx)(r.H_,{className:"addresses--network-toggle",genesisHash:A,onChange:z})]})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:`${s} isExpanded isFirst packedBottom`,children:[(0,a.jsx)(r.iA.Column.Favorite,{address:e,isFavorite:o,toggle:i}),(0,a.jsxs)("td",{className:"address all",children:[(0,a.jsx)(r.N,{value:e,withShortAddress:!0}),e&&S&&(0,a.jsxs)(a.Fragment,{children:[M&&(0,a.jsx)(r.u5,{address:S.address,mode:"address",onClose:B,onForget:L},"modal-forget-account"),T&&(0,a.jsx)(j.Z,{onClose:$,recipientId:e},"modal-transfer")]})]}),(0,a.jsx)("td",{className:"actions button",children:(0,a.jsxs)(r.zx.Group,{children:[(0,C.m)(d.api.tx.balances?.transfer)&&(0,a.jsx)(r.zx,{className:"send-button",icon:"paper-plane",label:c("send"),onClick:$},"send"),(0,a.jsx)(r.GI,{value:H})]})}),(0,a.jsx)(r.iA.Column.Expand,{isExpanded:R,toggle:q})]}),(0,a.jsxs)("tr",{className:`${s} isExpanded ${R?"":"isLast"} packedTop`,children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{className:"balance all",colSpan:2,children:(0,a.jsx)(r.hl,{address:e,balancesAll:p,withBalance:w})}),(0,a.jsx)("td",{})]}),(0,a.jsxs)("tr",{className:`${s} ${R?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,a.jsx)("td",{}),(0,a.jsxs)("td",{className:"balance columar",colSpan:2,children:[(0,a.jsx)(r.hl,{address:e,balancesAll:p,withBalance:N}),(0,a.jsx)(r.P0,{size:"tiny",children:(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)("div",{"data-testid":"tags",children:(0,a.jsx)(r.$G,{value:x,withTitle:!0})})})}),(0,a.jsx)(r.P0,{is100:!0,children:(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.NR,{data:e,type:"address",withTitle:!0})})})]}),(0,a.jsx)("td",{})]})]})})),S=r.zo.div`
  .summary-box-contacts {
    align-items: center;
  }
`,I=n.memo((function({className:e="",onStatusChange:s}){const{t}=b(),{allAddresses:o}=(0,i.J)(),[u,m]=(0,l.O)(!1),[h,p]=(0,c.r)("accounts:favorites"),[x,g]=(0,n.useState)(),[j,v]=(0,n.useState)(""),y=(0,d.q)(),C=(0,n.useRef)([[t("contacts"),"start",4]]);return(0,n.useEffect)((()=>{g(o.map((e=>({address:e,isFavorite:h.includes(e)}))).sort(((e,s)=>e.isFavorite===s.isFavorite?0:s.isFavorite?1:-1)))}),[o,h]),(0,a.jsxs)(S,{className:e,children:[u&&(0,a.jsx)(f,{onClose:m,onStatusChange:s}),(0,a.jsxs)(r.Ty,{className:"summary-box-contacts",children:[(0,a.jsx)("section",{children:(0,a.jsx)(r.HS,{className:"media--1000",filterOn:j,label:t("filter by name or tags"),setFilter:v})}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"plus",label:t("Add contact"),onClick:m})})]}),(0,a.jsx)(r.iA,{empty:y&&x&&t("no addresses saved yet, add any existing address"),header:C.current,isSplit:!0,children:y&&x?.map((({address:e,isFavorite:s})=>(0,a.jsx)(k,{address:e,filter:j,isFavorite:s,toggleFavorite:p},e)))})]})})),A=n.memo((function({basePath:e,onStatusChange:s}){const{t}=b(),i=(0,n.useRef)([{isRoot:!0,name:"contacts",text:t("My contacts")}]);return(0,a.jsxs)("main",{children:[(0,a.jsx)(r.mQ,{basePath:e,items:i.current}),(0,a.jsx)(o.rs,{children:(0,a.jsx)(o.AW,{children:(0,a.jsx)(I,{onStatusChange:s})})})]})}))},49307:(e,s,t)=>{t.d(s,{Z:()=>L});var a=t(52322),n=t(2784),o=t(7267),r=t(92858),i=t(24732),l=t(90778),c=t(9118),d=t(70563),u=t(61349);function m(){return(0,u.$G)("app-alliance")}var h=t(62837);const p=n.memo((function({className:e,value:{cid:{codec:s,hash_:{code:t},version:n},ipfs:o}}){const r=(0,h.Y)(o);return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)("td",{className:"start all",children:r&&(0,a.jsx)("a",{href:r.ipfsUrl,rel:"noopener noreferrer",target:"_blank",children:r.ipfsHash})}),(0,a.jsx)("td",{className:"number",children:n.type}),(0,a.jsxs)("td",{className:"number",children:["0x",s.toString(16)]}),(0,a.jsxs)("td",{className:"number",children:["0x",t.toString(16)]})]})})),x=n.memo((function({accouncements:e,className:s}){const{t}=m(),o=(0,n.useRef)([[t("annoucements"),"start"],[t("version"),"number"],[t("codec"),"number"],[t("code"),"number"]]);return(0,a.jsx)("div",{className:s,children:(0,a.jsx)(i.iA,{empty:e&&t("No annoucements"),header:o.current,children:e&&e.map((e=>(0,a.jsx)(p,{value:e},e.key)))})})}));var g=t(38894),b=t(54383),f=t(34814);const j=n.memo((function({className:e,members:s,onClose:t,unscrupulous:{accounts:o}}){const{t:r}=m(),{api:c}=(0,l.h)(),{allAccounts:d}=(0,f.x)(),[u,h]=(0,n.useState)(null),p=(0,n.useMemo)((()=>d.filter((e=>!s.some((({accountId:s})=>s===e))&&!o.some((s=>s===e))))),[o,d,s]);return(0,a.jsxs)(i.u_,{className:e,header:r("Join alliance"),onClose:t,size:"large",children:[(0,a.jsxs)(i.u_.Content,{children:[(0,a.jsx)(i.u_.Columns,{hint:r("This account will be submitted to join the aliance. It will be allocated one of the alliance roles upon joining, starting with Ally."),children:(0,a.jsx)(i.rp,{filter:p,label:r("alliance account"),onChange:h,type:"account"})}),(0,a.jsx)(i.u_.Columns,{hint:r("The bond will be reserved for the duration of your alliance membership."),children:(0,a.jsx)(i.H,{defaultValue:c.consts.alliance.allyDeposit,isDisabled:!0,label:r("alliance deposit")})})]}),(0,a.jsx)(i.u_.Actions,{children:(0,a.jsx)(i.cA,{accountId:u,onStart:t,tx:c.tx.alliance.joinAlliance})})]})}));var v=t(86135),y=t(11677);const C=(0,y.e)("useMemberInfo",(function(e){const{api:s}=(0,l.h)(),t=(0,c.W7)(s.query.alliance.upForKicking,[e]),a=(0,c.W7)(s.query.alliance.retiringMembers,[e]),o=(0,c.W7)(s.query.alliance.depositOf,[e]);return(0,n.useMemo)((()=>o&&{accountId:e,deposit:o.unwrapOr(null),isUpForKicking:t&&t.isTrue,retiringAt:a&&a.unwrapOr(null)}),[e,o,a,t])})),w=n.memo((function({bestNumber:e,className:s,info:{accountId:t,role:o},isPrime:r,isVoter:c}){const{t:d}=m(),{api:u}=(0,l.h)(),{allAccounts:h}=(0,f.x)(),p=C(t),{queueExtrinsic:x}=(0,v.L)(),g=!!u.tx.alliance.giveRetirementNotice,b=(0,n.useMemo)((()=>h.includes(t)),[h,t]),j=(0,n.useCallback)((()=>x({accountId:t,extrinsic:u.tx.alliance.retire()})),[t,u,x]),y=(0,n.useCallback)((()=>x({accountId:t,extrinsic:u.tx.alliance.giveRetirementNotice()})),[t,u,x]);return(0,a.jsxs)("tr",{className:s,children:[(0,a.jsxs)("td",{className:"address all relative",children:[(0,a.jsx)(i.N,{value:t}),(0,a.jsx)("div",{className:"absolute",children:p&&p.isRetiringAt&&(0,a.jsx)(i.Vp,{color:"yellow",hover:d("Is retiring"),label:d("retirting")})||p&&p.isUpForKicking&&(0,a.jsx)(i.Vp,{color:"red",hover:d("Up for kicking"),label:d("kicking")})||r&&(0,a.jsx)(i.Vp,{color:"green",hover:d("Current prime member, default voting"),label:d("prime voter")})||c&&(0,a.jsx)(i.Vp,{color:"green",hover:d("Allowed to vote on motions"),label:d("voter")})})]}),(0,a.jsx)("td",{className:"number",children:o}),(0,a.jsx)("td",{className:"button",children:b&&(0,a.jsx)(i.GI,{value:(0,a.jsxs)(i.v2,{children:[g&&(0,a.jsx)(i.v2.Item,{isDisabled:!(!p||!p.isRetiringAt),label:d("Announce retirement"),onClick:y}),(0,a.jsx)(i.v2.Item,{isDisabled:!!p&&(p.isUpForKicking||!!g&&(!e||!p.isRetiringAt||p.isRetiringAt.lt(e))),label:d("Retire"),onClick:j})]})},"settings")})]})}));var N=t(14681);const k=n.memo((function({className:e,members:s,rule:t}){const{t:n}=m(),o=(0,h.Y)(t&&t.cid&&t.cid.ipfs);return(0,a.jsxs)(i.Ty,{className:e,children:[(0,a.jsx)(i.Jy,{label:n("rule"),children:t?t.hasRule?o?(0,a.jsx)("a",{href:o.ipfsUrl,rel:"noopener noreferrer",target:"_blank",children:o.ipfsShort}):n("yes"):n("no"):(0,a.jsx)("span",{className:"--tmp",children:n("no")})}),(0,a.jsx)(i.Jy,{label:n("members"),children:s?(0,N.u)(s.length):(0,a.jsx)("span",{className:"--tmp",children:"99"})})]})})),S=n.memo((function({className:e,members:s,prime:t,rule:o,unscrupulous:r,voters:l}){const{t:c}=m(),[d,u]=(0,g.O)(),h=(0,b.C)(),p=(0,n.useRef)([[c("members"),"start",3]]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(k,{members:s,rule:o}),(0,a.jsxs)(i.zx.Group,{children:[(0,a.jsx)(i.zx,{icon:"add",isDisabled:!s||!r,label:c("Join"),onClick:u}),s&&r&&d&&(0,a.jsx)(j,{members:s,onClose:u,unscrupulous:r})]}),(0,a.jsx)(i.iA,{empty:s&&c("No members"),header:p.current,isSplit:!0,maxColumns:2,children:s&&s.map((e=>(0,a.jsx)(w,{bestNumber:h,info:e,isPrime:t===e.accountId,isVoter:!!l&&l.includes(e.accountId)},e.accountId)))})]})})),I=n.memo((function({className:e,value:s}){return(0,a.jsx)("tr",{className:e,children:(0,a.jsx)("td",{className:"address all",children:(0,a.jsx)(i.N,{value:s})})})})),A=n.memo((function({className:e,value:s}){return(0,a.jsx)("tr",{className:e,children:(0,a.jsx)("td",{className:"start all",children:s})})})),E=n.memo((function({className:e,unscrupulous:s}){const{t}=m(),o=(0,n.useRef)([[t("accounts"),"start"]]),r=(0,n.useRef)([[t("websites"),"start"]]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(i.iA,{empty:s&&s.accounts&&t("No accounts"),header:o.current,children:s&&s.accounts.map((e=>(0,a.jsx)(I,{value:e},e)))}),(0,a.jsx)(i.iA,{empty:s&&s.websites&&t("No websites"),header:r.current,children:s&&s.websites.map((e=>(0,a.jsx)(A,{value:e},e)))})]})}));var M=t(67292);function P(e){return{cid:e,ipfs:(0,M.c)(e),key:e.toHex()}}const T={transform:e=>e.map(P)},D=(0,y.e)("useAnnouncements",(function(){const{api:e}=(0,l.h)();return(0,c.W7)(e.query.alliance.announcements,[],T)})),F=["Retiring","Ally","Fellow"],V=(0,y.e)("useMembers",(function(){const{api:e}=(0,l.h)(),[s,t]=(0,n.useState)(),a=(0,c.W7)(e.query.alliance.members,[F[0]]),o=(0,c.W7)(e.query.alliance.members,[F[1]]),r=(0,c.W7)(e.query.alliance.members,[F[2]]);return(0,n.useEffect)((()=>{a&&o&&r&&t(((e=[])=>function(e,...s){const t=[];for(let a=0;a<F.length;a++){const n=F[a],o=s[a];for(let s=0;s<o.length;s++){const a=o[s].toString(),r=e.find((e=>e.accountId===a&&e.role===n));t.push(r||{accountId:a,role:n})}}return t.reverse()}(e,a,o,r)))}),[a,o,r]),s})),R={transform:e=>e.isSome?{cid:P(e.unwrap()),hasRule:!0}:{cid:null,hasRule:!1}},q=(0,y.e)("useRule",(function(){const{api:e}=(0,l.h)();return(0,c.W7)(e.query.alliance.rule,[],R)}));function O(e){return e.map((e=>e.toString()))}const z={transform:e=>O(e)},B={transform:e=>O(e.filter((e=>e.isAscii)))},$=(0,y.e)("useUnscrupulous",(function(){const{api:e}=(0,l.h)(),s=(0,c.W7)(e.query.alliance.unscrupulousAccounts,[],z),t=(0,c.W7)(e.query.alliance.unscrupulousWebsites,[],B);return(0,n.useMemo)((()=>s&&t&&{accounts:s,websites:t}),[s,t])})),L=n.memo((function({basePath:e,className:s}){const{t}=m(),{api:u}=(0,l.h)(),h=(0,c.W7)(u.derive.alliance.proposalHashes),{isMember:p,members:g,prime:b}=(0,d.V)("alliance"),f=D(),j=V(),v=q(),y=$(),C=(0,n.useCallback)((e=>"alliance"===e),[]),w=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")},{name:"motions",text:t("Motions ({{count}})",{replace:{count:h&&h.length||0}})},{name:"announcements",text:t("Announcements ({{count}})",{replace:{count:f&&f.length||0}})},{name:"unscrupulous",text:t("Unscrupulous")}]),[f,h,t]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(i.mQ,{basePath:e,items:w}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/announcements`,children:(0,a.jsx)(x,{accouncements:f})}),(0,a.jsx)(o.AW,{path:`${e}/motions`,children:(0,a.jsx)(r.Z,{defaultProposal:u.tx.alliance.addUnscrupulousItems,defaultThreshold:.6666666666666666,filter:C,isMember:p,members:g,prime:b,proposalHashes:h,type:"alliance"})}),(0,a.jsx)(o.AW,{path:`${e}/unscrupulous`,children:(0,a.jsx)(E,{unscrupulous:y})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(S,{isVoter:p,members:j,prime:b,rule:v,unscrupulous:y,voters:g})})]})]})}))},58370:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(2784),n=t(90778),o=t(9118);const r=(0,t(11677).e)("useCounter",(function(){const{api:e,isApiReady:s}=(0,n.h)(),t=(0,o.W7)(s&&e.derive.alliance.proposalHashes);return(0,a.useMemo)((()=>t&&t.length||0),[t])}))},25467:(e,s,t)=>{t.d(s,{Z:()=>W});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(34814),l=t(95292),c=t(14681),d=t(61349);function u(){return(0,d.$G)("app-assets")}var m=t(58607),h=t(90778),p=t(38894);const x=n.memo((function({accountId:e,assetId:s,className:t,minBalance:o,siFormat:[i,l]}){const{t:c}=u(),{api:d}=(0,h.h)(),[m,x]=(0,p.O)(),[g,b]=(0,n.useState)(),[f,j]=(0,n.useState)(null),[v,y]=(0,n.useState)(!0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"paper-plane",label:c("send"),onClick:x}),m&&(0,a.jsxs)(r.u_,{className:t,header:c("transfer asset"),onClose:x,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:c("The account to transfer from. This account should have sufficient assets for this transfer."),children:(0,a.jsx)(r.rp,{defaultValue:e,isDisabled:!0,label:c("send from")})}),(0,a.jsx)(r.u_.Columns,{hint:c("The beneficiary will have access to the transferred asset when the transaction is included in a block."),children:(0,a.jsx)(r.rp,{label:c("send to address"),onChange:j,type:"allPlus"})}),(0,a.jsx)(r.u_.Columns,{hint:c("The amount of tokens to transfer to the account."),children:(0,a.jsx)(r.H,{autoFocus:!0,label:c("amount to transfer"),onChange:b,siDecimals:i,siSymbol:l})}),(0,a.jsx)(r.u_.Columns,{hint:c("The minimum balance allowed for the asset."),children:(0,a.jsx)(r.H,{defaultValue:o,isDisabled:!0,label:c("minimum balance"),siDecimals:i,siSymbol:l})}),(0,a.jsx)(r.u_.Columns,{hint:c("With the keep-alive option set, the account is protected against removal due to low balances."),children:(0,a.jsx)(r.ZD,{className:"typeToggle",label:c(v?"Transfer with account keep-alive checks":"Normal transfer without keep-alive checks"),onChange:y,value:v})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:e,icon:"paper-plane",isDisabled:!f||!g,label:c("Send"),onStart:x,params:[s,f,g],tx:v?d.tx.assets.transferKeepAlive:d.tx.assets.transfer})})]})]})})),g=n.memo((function({account:{balance:e,isFrozen:s,reason:t,sufficient:n},accountId:o,assetId:i,className:l,minBalance:c,siFormat:d}){const{t:h}=u();return(0,a.jsxs)("tr",{className:l,children:[(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(r.N,{value:o})}),(0,a.jsx)("td",{className:"start",children:s.isTrue?h("Yes"):h("No")}),(0,a.jsx)("td",{className:"start",children:n?n.isTrue?h("Yes"):h("No"):t?.toString()}),(0,a.jsx)("td",{className:"number all",children:(0,a.jsx)(m.Z,{format:d,value:e})}),(0,a.jsx)("td",{className:"button",children:(0,a.jsx)(x,{accountId:o,assetId:i,minBalance:c,siFormat:d})})]})}));var b=t(9118),f=t(11677);const j={transform:([[e],s])=>({accounts:e.map((([,e],t)=>{const a=s[t];return{account:(n=a,n.isSome||n.isNone?a.unwrapOr(null):a),accountId:e};var n})).filter((e=>!!e.account&&!e.account.balance.isZero())),assetId:e[0][0]}),withParamsTransform:!0},v=(0,f.e)("useBalances",(function(e){const{api:s}=(0,h.h)(),{allAccounts:t}=(0,i.x)(),a=(0,n.useMemo)((()=>[t.map((s=>[e,s]))]),[t,e]),o=(0,b.W7)(a&&s.query.assets.account.multi,a,j);return o&&e&&o.assetId===e&&o.accounts||null})),y=r.zo.div`
  table {
    overflow: auto;
  }
`,C=n.memo((function({className:e,infos:s=[]}){const{t}=u(),[o,i]=(0,n.useState)(0),[l,d]=(0,n.useState)(null),m=v(l?.id),h=(0,n.useRef)([[t("accounts"),"start"],[t("frozen"),"start"],[t("sufficient"),"start"],[],[]]),p=(0,n.useMemo)((()=>s.filter((e=>!(!e.details||!e.metadata||e.details.supply.isZero()))).sort(((e,s)=>e.id.cmp(s.id)))),[s]),x=(0,n.useMemo)((()=>p.map((({id:e,metadata:s},t)=>({text:`${s.name.toUtf8()} (${(0,c.u)(e)})`,value:t})))),[p]),b=(0,n.useMemo)((()=>l?[l.metadata.decimals.toNumber(),l.metadata.symbol.toUtf8().toUpperCase()]:[0,"NONE"]),[l]);return(0,n.useEffect)((()=>{d((()=>o>=0&&o<p.length?p[o]:null))}),[p,o]),(0,a.jsx)(y,{className:e,children:(0,a.jsx)(r.iA,{empty:l&&m&&t("No accounts with balances found for the asset"),filter:x.length?(0,a.jsx)(r.Lt,{isFull:!0,label:t("the asset to query for balances"),onChange:i,options:x,value:o}):void 0,header:h.current,children:l&&m?.map((({account:e,accountId:s})=>(0,a.jsx)(g,{account:e,accountId:s,assetId:l.id,minBalance:l.details.minBalance,siFormat:b},s)))})})})),w=n.memo((function({className:e,details:{issuer:s,minBalance:t},id:o,metadata:i,onClose:l}){const{t:c}=u(),{api:d}=(0,h.h)(),[m,p]=(0,n.useState)(),[x,g]=(0,n.useState)(null),b=(0,n.useMemo)((()=>m&&m.gte(t)),[m,t]),[f,j]=(0,n.useMemo)((()=>[i.decimals.toNumber(),i.symbol.toUtf8().toUpperCase()]),[i]);return(0,a.jsxs)(r.u_,{className:e,header:c("mint asset"),onClose:l,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:c("The recipient account for this minting operation."),children:(0,a.jsx)(r.rp,{defaultValue:s,isDisabled:!0,label:c("issuer account")})}),(0,a.jsx)(r.u_.Columns,{hint:c("The recipient account for this minting operation."),children:(0,a.jsx)(r.rp,{label:c("mint to address"),onChange:g,type:"allPlus"})}),(0,a.jsx)(r.u_.Columns,{hint:c("The amount of tokens to issue to the account."),children:(0,a.jsx)(r.H,{autoFocus:!0,isError:!b,isZeroable:!1,label:c("amount to issue"),onChange:p,siDecimals:f,siSymbol:j})}),(0,a.jsx)(r.u_.Columns,{hint:c("The minimum balance allowed for the asset."),children:(0,a.jsx)(r.H,{defaultValue:t,isDisabled:!0,label:c("minimum balance"),siDecimals:f,siSymbol:j})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:s,icon:"plus",isDisabled:!x||!b,label:c("Mint"),onStart:l,params:[o,x,m],tx:d.tx.assets.mint})})]})})),N=n.memo((function({className:e,details:s,id:t,metadata:n}){const{t:o}=u(),[i,l]=(0,p.O)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:n.isFrozen.isTrue,label:o("Mint"),onClick:l}),i&&(0,a.jsx)(w,{className:e,details:s,id:t,metadata:n,onClose:l})]})})),k=n.memo((function({className:e,value:{details:s,id:t,isIssuerMe:o,metadata:i}}){const l=(0,n.useMemo)((()=>i?[i.decimals.toNumber(),i.symbol.toUtf8()]:[0,"---"]),[i]);return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)(r.iA.Column.Id,{value:t}),(0,a.jsx)("td",{className:"together",children:i?.name.toUtf8()}),(0,a.jsx)("td",{className:"address media--1000",children:s&&(0,a.jsx)(r.N,{value:s.owner})}),(0,a.jsx)("td",{className:"address media--1300",children:s&&(0,a.jsx)(r.N,{value:s.admin})}),(0,a.jsx)("td",{className:"address media--1600",children:s&&(0,a.jsx)(r.N,{value:s.issuer})}),(0,a.jsx)("td",{className:"address media--1900",children:s&&(0,a.jsx)(r.N,{value:s.freezer})}),(0,a.jsx)("td",{className:"number all",children:s&&(0,a.jsx)(m.Z,{format:l,value:s.supply})}),(0,a.jsx)("td",{className:"button",children:s&&i&&o&&(0,a.jsx)(N,{details:s,id:t,metadata:i})})]})})),S=n.memo((function({className:e,infos:s}){const{t}=u(),o=(0,n.useRef)([[t("assets"),"start",2],[t("owner"),"address media--1000"],[t("admin"),"address media--1300"],[t("issuer"),"address media--1600"],[t("freezer"),"address media--1900"],[t("supply")],[]]);return(0,a.jsx)(r.iA,{className:e,empty:s&&t("No assets found"),header:o.current,children:s?.map((e=>(0,a.jsx)(k,{value:e},e.key)))})}));var I=t(98551),A=t(79760);const E=n.memo((function({assetIds:e,className:s="",defaultValue:t,onChange:o,openId:i}){const{t:c}=u(),{api:d}=(0,h.h)(),[m]=(0,n.useState)((()=>t)),[p]=(0,n.useState)((()=>i)),[x,g]=(0,n.useState)(null),[b,f]=(0,n.useState)(),[j,v]=(0,n.useState)(),[y,C]=(0,n.useState)((()=>t?.assetName)),[w,N]=(0,n.useState)((()=>t?.assetSymbol)),[k,S]=(0,n.useState)(),[I,A]=(0,n.useMemo)((()=>j&&w?[j.toNumber(),w.toUpperCase()]:[0,"NONE"]),[j,w]),E=(0,n.useMemo)((()=>!!j&&j.lten(20)),[j]),M=(0,n.useMemo)((()=>!!y&&y.length>=3&&y.length<=32),[y]),P=(0,n.useMemo)((()=>!!w&&w.length>=3&&w.length<=7),[w]),T=(0,n.useMemo)((()=>!!b&&b.gt(l.nw)&&!e.some((e=>e.eq(b)))),[b,e]);return(0,n.useEffect)((()=>{o(b&&y&&w&&j&&T&&M&&P&&E&&x&&k&&!k.isZero()?{accountId:x,assetDecimals:j,assetId:b,assetName:y,assetSymbol:w,minBalance:k}:null)}),[d,x,j,b,e,y,w,T,M,P,E,k,o]),(0,a.jsxs)(r.u_.Content,{className:s,children:[(0,a.jsx)(r.u_.Columns,{hint:c("The account that is to be used to create this asset and setup the initial metadata."),children:(0,a.jsx)(r.rp,{defaultValue:m?.accountId,label:c("creator account"),onChange:g,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:c("The descriptive name for this asset."),children:(0,a.jsx)(r.II,{autoFocus:!0,defaultValue:m?.assetName,isError:!M,label:c("asset name"),onChange:C})}),(0,a.jsx)(r.u_.Columns,{hint:c("The symbol that will represent this asset."),children:(0,a.jsx)(r.II,{defaultValue:m?.assetSymbol,isError:!P,label:c("asset symbol"),onChange:N})}),(0,a.jsx)(r.u_.Columns,{hint:c("The number of decimals for this token. Max allowed via the UI is set to 20."),children:(0,a.jsx)(r.Rn,{defaultValue:m?.assetDecimals,isError:!E,label:c("asset decimals"),onChange:v})}),(0,a.jsx)(r.u_.Columns,{hint:c("The minimum balance for the asset. This is specified in the units and decimals as requested."),children:(0,a.jsx)(r.H,{defaultValue:m?.minBalance,isZeroable:!1,label:c("minimum balance"),onChange:S,siDecimals:I,siSymbol:A})}),(0,a.jsx)(r.u_.Columns,{hint:c("The selected id for the asset. This should not match an already-existing asset id."),children:(0,a.jsx)(r.Rn,{defaultValue:m?.assetId||p,isError:!T,isZeroable:!1,label:c("asset id"),onChange:f})})]})})),M=n.memo((function({accountId:e,className:s="",defaultValue:t,onChange:o}){const{t:i}=u(),{api:l}=(0,h.h)(),[c]=(0,n.useState)((()=>t)),[d,m]=(0,n.useState)(null),[p,x]=(0,n.useState)(null),[g,b]=(0,n.useState)(null);return(0,n.useEffect)((()=>{o(d&&p&&g?{adminId:d,freezerId:p,issuerId:g}:null)}),[l,d,p,g,o]),(0,a.jsxs)(r.u_.Content,{className:s,children:[(0,a.jsx)(r.u_.Columns,{hint:i("The account that is to be used for ongoing admin on the token."),children:(0,a.jsx)(r.rp,{defaultValue:c?.adminId||e,label:i("admin account"),onChange:m,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:i("The account that is to be used for issuing this token."),children:(0,a.jsx)(r.rp,{defaultValue:c?.issuerId||e,label:i("issuer account"),onChange:b,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:i("The account that is to be used for performing freezing."),children:(0,a.jsx)(r.rp,{defaultValue:c?.freezerId||e,label:i("freezer account"),onChange:x,type:"account"})})]})})),P={type:"all"},T=n.memo((function({assetIds:e,className:s,onClose:t,openId:o}){const{t:i}=u(),{api:l}=(0,h.h)(),[c,d,m]=(0,I.t)(),[p,x]=(0,n.useState)(null),[g,b]=(0,n.useState)(null),[f,j]=(0,n.useMemo)((()=>p?[l.tx.assets.create(p.assetId,p.accountId,p.minBalance),l.tx.assets.setMetadata(p.assetId,p.assetName,p.assetSymbol,p.assetDecimals)]:[null,null]),[l,p]),v=(0,n.useMemo)((()=>p&&g&&(g.adminId!==p.accountId||g.freezerId!==p.accountId||g.issuerId!==p.accountId)?l.tx.assets.setTeam(p.assetId,g.issuerId,g.adminId,g.freezerId):null),[l,p,g]),y=(0,n.useMemo)((()=>f&&j&&g&&(v?[f,j,v]:[f,j])),[f,j,g,v]),C=(0,A.b)(y,P);return(0,a.jsxs)(r.u_,{className:s,header:i("create asset {{step}}/{{steps}}",{replace:{step:c,steps:2}}),onClose:t,size:"large",children:[1===c&&(0,a.jsx)(E,{assetIds:e,defaultValue:p,onChange:x,openId:o}),2===c&&p&&(0,a.jsx)(M,{accountId:p.accountId,defaultValue:g,onChange:b}),(0,a.jsxs)(r.u_.Actions,{children:[1===c&&(0,a.jsx)(r.zx,{icon:"step-forward",isDisabled:!p,label:i("Next"),onClick:d}),2===c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"step-backward",label:i("Prev"),onClick:m}),(0,a.jsx)(r.cA,{accountId:p?.accountId,extrinsic:C,icon:"plus",label:i("Create"),onStart:t})]})]})]})})),D=n.memo((function({assetIds:e,className:s,openId:t}){const{t:n}=u(),{hasAccounts:o}=(0,i.x)(),[l,c]=(0,p.O)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!e||!o,label:n("Create"),onClick:c}),l&&e&&(0,a.jsx)(T,{assetIds:e,className:s,onClose:c,openId:t})]})})),F=n.memo((function({className:e,numAssets:s}){const{t}=u();return(0,a.jsx)(r.Ty,{className:e,children:(0,a.jsx)(r.Jy,{label:t("assets"),children:(0,c.u)(s)})})})),V=n.memo((function({className:e,ids:s,infos:t,openId:n}){return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(F,{numAssets:s?.length}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(D,{assetIds:s,openId:n})}),(0,a.jsx)(S,{infos:t})]})}));var R=t(12298),q=t(39824);const O=[],z={transform:e=>e.map((({args:[e]})=>e))};function B(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:a}})=>{"Created"===a||"ForceCreated"===a?s.push(e):t.push(e)})),{added:s,removed:t}}const $=(0,f.e)("useAssetIds",(function(){const{api:e}=(0,h.h)(),s=(0,R.k)(e.query.assets.asset,O,z);return(0,q.N)([e.events.assets.Created,e.events.assets.Destroyed,e.events.assets.ForceCreated],B,s)})),L={isAdminMe:!1,isFreezerMe:!1,isIssuerMe:!1,isOwnerMe:!1},H={withParams:!0};function _(e,s){const t=s.toString();return e.some((e=>e===t))}const Z=(0,f.e)("useAssetInfos",(function(e){const{api:s}=(0,h.h)(),{allAccounts:t}=(0,i.x)(),a=(0,b.W7)(s.query.assets.metadata.multi,[e],H),o=(0,b.W7)(s.query.assets.asset.multi,[e],H),[r,l]=(0,n.useState)();return(0,n.useEffect)((()=>{o&&a&&o[0][0].length===a[0][0].length&&l(o[0][0].map(((e,s)=>function(e,s,t,a){const n=t.unwrapOr(null);return{...n?{isAdminMe:_(e,n.admin),isFreezerMe:_(e,n.freezer),isIssuerMe:_(e,n.issuer),isOwnerMe:_(e,n.owner)}:L,details:n,id:s,key:s.toString(),metadata:a.isEmpty?null:a}}(t,e,o[1][s],a[1][s]))))}),[t,o,e,a]),r})),W=n.memo((function({basePath:e,className:s}){const{t}=u(),{hasAccounts:c}=(0,i.x)(),d=$(),m=Z(d),h=(0,n.useRef)([{isRoot:!0,name:"overview",text:t("Overview")},{name:"balances",text:t("Balances")}]),p=(0,n.useMemo)((()=>c&&m&&m.some((({details:e,metadata:s})=>!(!e||!s)))?[]:["balances"]),[c,m]),x=(0,n.useMemo)((()=>function(e){if(!e||!e.length)return l.If;const s=e.find(((s,t)=>0===t?!s.eq(l.If):!s.sub(l.If).eq(e[t-1])));return s?s.sub(l.If):e[e.length-1].add(l.If)}(d)),[d]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,hidden:p,items:h.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/balances`,children:(0,a.jsx)(C,{infos:m})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(V,{ids:d,infos:m,openId:x})})]})]})}))},9178:(e,s,t)=>{t.d(s,{Z:()=>ye});var a=t(52322),n=t(2784),o=t(24732),r=t(68920),i=t(58607),l=t(48801),c=t.n(l),d=t(14681),u=t(61349);function m(){return(0,u.$G)("app-bounties")}const h=n.memo((function({className:e="",info:{bestNumber:s,bounties:t,bountyCount:l,childCount:u}}){const{t:h}=m(),{spendPeriod:p}=(0,r._)(),x=(0,n.useMemo)((()=>(t||[]).reduce(((e,{bounty:{value:s}})=>e.iadd(s)),new(c())(0))),[t]);return(0,a.jsxs)(o.Ty,{className:`${e} ui--BountySummary`,children:[(0,a.jsxs)("section",{children:[t&&(0,a.jsx)(o.Jy,{label:h("active"),children:(0,d.u)(t.length)}),l&&t&&(0,a.jsx)(o.Jy,{label:h("past"),children:(0,d.u)(l.subn(t.length))}),u&&(0,a.jsx)(o.Jy,{label:h("children"),children:(0,d.u)(u)})]}),(0,a.jsx)("section",{children:(0,a.jsx)(o.Jy,{label:h("active total"),children:(0,a.jsx)(i.Z,{value:x,withSi:!0})})}),(0,a.jsx)("section",{children:s&&!p.isZero()&&(0,a.jsx)(o.Jy,{label:h("funding period"),progress:{total:p,value:s.mod(p),withTime:!0}})})]})}));var p=t(38894),x=t(11677);const g=(0,x.e)("useBountyStatus",(function(e){return(0,n.useCallback)((()=>(e=>{let s={beneficiary:void 0,bountyStatus:e.type,curator:void 0,unlockAt:void 0,updateDue:void 0};return e.isCuratorProposed&&(s={...s,bountyStatus:"CuratorProposed",curator:e.asCuratorProposed.curator}),e.isActive&&(s={...s,curator:e.asActive.curator,updateDue:e.asActive.updateDue}),e.isPendingPayout&&(s={...s,beneficiary:e.asPendingPayout.beneficiary,bountyStatus:"PendingPayout",curator:e.asPendingPayout.curator,unlockAt:e.asPendingPayout.unlockAt}),s})(e)),[e])()}));var b=t(95292),f=t(90778),j=t(9118),v=t(54383);const y=(0,x.e)("useBounties",(function(){const{api:e}=(0,f.h)(),s=(0,j.W7)(e.derive.bounties.bounties),t=(0,j.W7)((e.query.bounties||e.query.treasury).bountyCount),a=(0,j.W7)(e.query.childBounties?.childBountyCount),o=(0,v.C)(),r=(0,n.useMemo)((()=>function(e){const s=e.consts.bounties||e.consts.treasury,t=e.tx.bounties||e.tx.treasury;return{bountyCuratorDeposit:s.bountyCuratorDeposit||b.nw,bountyDepositBase:s.bountyDepositBase,bountyUpdatePeriod:s.bountyUpdatePeriod,bountyValueMinimum:s.bountyValueMinimum,dataDepositPerByte:s.dataDepositPerByte,maximumReasonLength:s.maximumReasonLength.toNumber(),acceptCurator:t.acceptCurator,approveBounty:t.approveBounty,awardBounty:t.awardBounty,claimBounty:t.claimBounty,closeBounty:t.closeBounty,extendBountyExpiry:t.extendBountyExpiry,proposeBounty:t.proposeBounty,proposeCurator:t.proposeCurator,unassignCurator:t.unassignCurator}}(e)),[e]);return(0,n.useMemo)((()=>({...r,bestNumber:o,bounties:s,bountyCount:t,childCount:a})),[o,s,t,a,r])})),C={dark:"#8E8E8E",light:"#4D4D4D"},w=o.zo.div((({theme:e})=>`\n  display: flex;\n  align-items: center;\n  font-size: var(--font-size-small);\n  line-height: 1.5rem;\n\n  .info-icon {\n    margin-right: 0.2rem;\n\n    svg {\n      color: ${C[e.theme]};\n    }\n  }\n\n  .description {\n    font-weight: var(--font-weight-normal);\n    var(font-size: var(--font-size-tiny);)\n    line-height: 0.864rem;\n    color: var(--color-label);\n    word-wrap: break-word;\n  }\n`)),N=n.memo((function({className:e="",description:s,type:t="info"}){return(0,a.jsxs)(w,{className:e,children:["warning"===t&&(0,a.jsx)("div",{className:"info-icon",children:(0,a.jsx)(o.JO,{icon:"exclamation-triangle"})}),(0,a.jsx)("div",{className:"description",children:s})]})})),k=new(c())("10000"),S=n.memo((function({bestNumber:e,blocksUntilUpdate:s,status:t}){const{t:o}=m(),{unlockAt:r}=g(t),{bountyUpdatePeriod:i}=y(),l=(0,n.useMemo)((()=>r?.sub(e)),[e,r]),c=i?.muln(10).div(b.S8),d=c??k;return(0,a.jsxs)("div",{children:[s?.lte(b.nw)&&(0,a.jsx)(N,{description:o("Update overdue"),type:"warning"}),s?.lt(d)&&s?.gt(b.nw)&&(0,a.jsx)(N,{description:o("Close deadline"),type:"warning"}),t.isApproved&&(0,a.jsx)(N,{description:o("Waiting for Bounty Funding"),type:"info"}),t.isCuratorProposed&&(0,a.jsx)(N,{description:o("Waiting for Curator's acceptance"),type:"info"}),l?.lt(b.nw)&&(0,a.jsx)(N,{description:o("Waiting for implementer to claim"),type:"info"})]})})),I={Active:["closeBounty","unassignCurator"],Approved:[],CuratorProposed:["closeBounty","unassignCurator"],Funded:["proposeCurator","closeBounty"],PendingPayout:["unassignCurator"],Proposed:["approveBounty","closeBounty"]};function A(e,s){return function(e,s){return e.find((({proposal:e})=>e&&e.method===s))}(e,function(e,s){const t=e.map((({proposal:e})=>e&&e.method));return function(e){return I[e.type]}(s).find((e=>t.includes(e)))}(e,s))??null}var E=t(34814);function M(e,s){return e.length>s?e.substring(0,s-1)+String.fromCharCode(8230):e}const P=n.memo((function({curatorId:e,description:s,index:t}){const{t:r}=m(),{awardBounty:i}=y(),{allAccounts:l}=(0,E.x)(),[c,d]=(0,p.O)(),[u,h]=(0,n.useState)(null);return(0,n.useMemo)((()=>l.includes(e.toString())),[l,e])?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.zx,{icon:"award",isDisabled:!1,label:r("Reward implementer"),onClick:d}),c&&(0,a.jsxs)(o.u_,{header:`${r("award bounty")} - "${M(s,30)}"`,onClose:d,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:r("The Curator account that will be used to send this transaction. Any applicable fees will be paid by this account."),children:(0,a.jsx)(o.rp,{defaultValue:e,isDisabled:!0,label:r("award with account"),type:"account",withLabel:!0})}),(0,a.jsx)(o.u_.Columns,{hint:r("Reward the bounty to an implementer's account. The implementer will be able to claim the funds after a delay period."),children:(0,a.jsx)(o.rp,{label:r("implementer account"),onChange:h,withLabel:!0})})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:e,icon:"check",label:r("Approve"),onStart:d,params:[t,u],tx:i})})]})]}):null}));var T=t(70563);const D=(0,x.e)("useUserRole",(function(e){const{allAccounts:s,hasAccounts:t}=(0,E.x)(),{isMember:a}=(0,T.V)("council");return(0,n.useMemo)((()=>{const n=!!e&&s.includes(e.toString()),o=[];return n&&o.push("Curator"),a&&o.push("Member"),t&&o.push("User"),{isCurator:n,roles:o}}),[s,e,t,a])})),F=n.memo((function({curatorId:e,description:s,fee:t,index:r}){const{t:i}=m(),{acceptCurator:l}=y(),{isCurator:c}=D(e),{bountyCuratorDeposit:d}=y(),[u,h]=(0,p.O)(),x=(0,n.useMemo)((()=>{return e=d,t.mul(e).div(b.uy);var e}),[t,d]);return c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.zx,{icon:"check",isDisabled:!1,label:i("Accept"),onClick:h}),u&&(0,a.jsxs)(o.u_,{header:`${i("accept curator role")} - "${M(s,30)}"`,onClose:h,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:i("Only the account proposed as curator by the council can create the assign curator transaction"),children:(0,a.jsx)(o.rp,{isDisabled:!0,label:i("curator account"),type:"account",value:e.toString(),withLabel:!0})}),(0,a.jsx)(o.u_.Columns,{hint:i("This amount will be sent to your account after bounty is rewarded and you claim curator's fee."),children:(0,a.jsx)(o.H,{defaultValue:t.toString(),isDisabled:!0,label:i("curator's fee")})}),(0,a.jsx)(o.u_.Columns,{hint:i("This amount will be reserved from your account and returned after bounty claim is confirmed or if you give up, unless you are slashed earlier."),children:(0,a.jsx)(o.H,{defaultValue:x.toString(),isDisabled:!0,label:i("curator's deposit")})})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:e,icon:"check",label:i("Accept Curator Role"),onStart:h,params:[r],tx:l})})]})]}):null})),V=n.memo((function({beneficiaryId:e,index:s,payoutDue:t}){const{t:r}=m(),{claimBounty:i}=y(),{allAccounts:l}=(0,E.x)();return(0,n.useMemo)((()=>function(e,s,t){return t.ltn(0)&&e.includes(s.toString())}(l,e,t)),[l,e,t])?(0,a.jsx)(o.cA,{accountId:e,icon:"plus",label:r("Claim"),params:[s],tx:i}):null}));var R=t(30943),q=t(81190);const O=["approveBounty","closeBounty"],z=n.memo((function({description:e,index:s,proposals:t}){const{t:r}=m(),{api:i}=(0,f.h)(),{isMember:l,members:d}=(0,T.V)("council"),u=(0,q.m)("council"),{approveBounty:h,closeBounty:x}=y(),[g,b]=(0,p.O)(),[j,v]=(0,n.useState)(null),[C,w]=(0,n.useState)();(0,n.useEffect)((()=>{d&&w(new(c())(Math.ceil(d.length*(0,R.mo)(i))))}),[i,d]);const N=(0,n.useRef)(h(s)),k=(0,n.useRef)(x(s)),S=(0,n.useMemo)((()=>0!==t?.filter((({proposal:e})=>e&&O.includes(e.method))).length),[t]);return l&&!S&&u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.zx,{icon:"step-forward",isDisabled:!1,label:r("Initiate voting"),onClick:b}),g&&(0,a.jsxs)(o.u_,{header:`${r("Initiate voting")} - "${M(e,30)}"`,onClose:b,size:"large",children:[(0,a.jsx)(o.u_.Content,{children:(0,a.jsx)(o.u_.Columns,{hint:r('The council member that will create a motion, submission equates to an "aye" vote for chosen option.'),children:(0,a.jsx)(o.rp,{filter:d,label:r("vote with account"),onChange:v,type:"account",withLabel:!0})})}),(0,a.jsxs)(o.u_.Actions,{children:[(0,a.jsx)(o.cA,{accountId:j,icon:"check",isDisabled:!1,label:r("Approve"),onStart:b,params:[C,N.current,N.current.length],tx:i.tx[u].propose}),(0,a.jsx)(o.cA,{accountId:j,icon:"ban",isDisabled:!1,label:r("Reject"),onStart:b,params:[C,k.current,k.current.length],tx:i.tx[u].propose})]})]})]}):null})),B=["proposeCurator"],$=n.memo((function({description:e,index:s,proposals:t,value:r}){const{t:i}=m(),{api:l}=(0,f.h)(),{isMember:d,members:u}=(0,T.V)("council"),h=(0,q.m)("council"),{proposeCurator:x}=y(),[g,b]=(0,p.O)(),[j,v]=(0,n.useState)(null),[C,w]=(0,n.useState)(null),[N,k]=(0,n.useState)(),[S,I]=(0,n.useState)(),[A,E]=(0,n.useState)(!1);(0,n.useEffect)((()=>{u&&k(new(c())(Math.ceil(u.length*(0,R.mo)(l))))}),[l,u]);const P=(0,n.useMemo)((()=>C&&x(s,C,S)),[C,S,s,x]),D=(0,n.useMemo)((()=>0!==t?.filter((({proposal:e})=>e&&B.includes(e.method))).length),[t]);return(0,n.useEffect)((()=>{E(!!S&&!!r?.gt(S))}),[r,S]),d&&!D&&h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.zx,{icon:"step-forward",isDisabled:!1,label:i("Propose curator"),onClick:b}),g&&(0,a.jsxs)(o.u_,{header:`${i("Propose curator")} - "${M(e,30)}"`,onClose:b,size:"large",testId:"propose-curator-modal",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:i("The council member that will create the motion."),children:(0,a.jsx)(o.rp,{filter:u,label:i("proposing account"),onChange:v,type:"account",withLabel:!0})}),(0,a.jsx)(o.u_.Columns,{hint:i("Choose a curator whose background and expertise is such that they are capable of determining when the task is complete."),children:(0,a.jsx)(o.rp,{label:i("select curator"),onChange:w,withLabel:!0})}),(0,a.jsxs)(o.u_.Columns,{hint:i("Part of the bounty value that will go to the Curator as a reward for their work"),children:[(0,a.jsx)(o.H,{isError:!A,isZeroable:!0,label:i("curator's fee"),onChange:I,value:S}),!A&&(0,a.jsx)(o.oy,{content:i("Curator's fee can't be higher than bounty value.")})]})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:j,icon:"check",isDisabled:!A,label:i("Propose curator"),onStart:b,params:[N,P,P?.length],tx:l.tx[h].propose})})]})]}):null}));function L({bestNumber:e,description:s,fee:t,index:o,proposals:r,status:i,value:l}){const{beneficiary:c,curator:d,unlockAt:u}=g(i),m=(0,n.useMemo)((()=>u?.sub(e)),[e,u]);return(0,a.jsxs)(a.Fragment,{children:[i.isProposed&&(0,a.jsx)(z,{description:s,index:o,proposals:r}),i.isFunded&&(0,a.jsx)($,{description:s,index:o,proposals:r,value:l}),i.isCuratorProposed&&d&&t&&(0,a.jsx)(F,{curatorId:d,description:s,fee:t,index:o}),i.isPendingPayout&&c&&m&&(0,a.jsx)(V,{beneficiaryId:c,index:o,payoutDue:m}),i.isActive&&d&&(0,a.jsx)(P,{curatorId:d,description:s,index:o})]})}const H=n.memo((function({curatorId:e,description:s,index:t,toggleOpen:n}){const{t:r}=m(),{unassignCurator:i}=y();return(0,a.jsxs)(o.u_,{header:`${r("reject curator")} - "${M(s,30)}"`,onClose:n,size:"large",children:[(0,a.jsx)(o.u_.Content,{children:(0,a.jsx)(o.u_.Columns,{hint:r("Only the account proposed as curator by the council can create the unassign curator transaction "),children:(0,a.jsx)(o.rp,{isDisabled:!0,label:r("curator account"),type:"account",value:e.toString(),withLabel:!0})})}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:e,icon:"times",label:r("Reject"),onStart:n,params:[t],tx:i})})]})})),_=n.memo((function({description:e,index:s,toggleOpen:t}){const{t:r}=m(),{api:i}=(0,f.h)(),{members:l}=(0,T.V)("council"),d=(0,q.m)("council"),{closeBounty:u}=y(),[h,p]=(0,n.useState)(null),[x,g]=(0,n.useState)();(0,n.useEffect)((()=>{l&&g(new(c())(Math.ceil(l.length*(0,R.mo)(i))))}),[i,l]);const b=(0,n.useRef)(u(s));return d?(0,a.jsxs)(o.u_,{header:`${r("close bounty")} - "${M(e,30)}"`,onClose:t,size:"large",children:[(0,a.jsx)(o.u_.Content,{children:(0,a.jsx)(o.u_.Columns,{hint:r('The council member that will create the close bounty proposal, submission equates to an "aye" vote.'),children:(0,a.jsx)(o.rp,{filter:l,label:r("propose with account"),onChange:p,type:"account",withLabel:!0})})}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:h,icon:"ban",isDisabled:!1,label:r("Close Bounty"),onStart:t,params:[x,b.current,b.current.length],tx:i.tx[d].propose})})]}):null}));var Z=t(97794);const W=n.memo((function({curatorId:e,description:s,index:t,toggleOpen:r}){const{t:i}=m(),{bountyUpdatePeriod:l,extendBountyExpiry:c}=y(),[d,u]=(0,n.useState)(""),[h,p]=(0,Z.h)(l),x=(0,n.useCallback)((e=>{u(e)}),[]),g=(0,n.useMemo)((()=>l&&function(e,s){return new Date(Date.now()+e.muln(s).toNumber())}(l,h)),[l,h]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.u_,{header:`${i("extend expiry")} - "${M(s,30)}"`,onClose:r,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:i("Only curator can extend the bounty time."),children:(0,a.jsx)(o.rp,{isDisabled:!0,label:i("curator account"),type:"account",value:e.toString(),withLabel:!0})}),g&&(0,a.jsx)(o.u_.Columns,{hint:i(`Bounty expiry time will be set to ${p} from now.`),children:(0,a.jsx)(o.II,{isDisabled:!0,label:i("new expiry date and time"),value:`${g.toLocaleDateString()} ${g.toLocaleTimeString()}`})}),(0,a.jsx)(o.u_.Columns,{hint:i("The note that will be added to the transaction. It won't be stored on chain"),children:(0,a.jsx)(o.II,{autoFocus:!0,defaultValue:"",label:i("bounty remark"),onChange:x,value:d})})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:e,icon:"check",label:i("Accept"),onStart:r,params:[t,d],tx:c})})]})})})),U=n.memo((function({curatorId:e,description:s,index:t,toggleOpen:n}){const{t:r}=m(),{unassignCurator:i}=y();return(0,a.jsxs)(o.u_,{header:`${r("give up curator's role")} - "${M(s,30)}"`,onClose:n,size:"large",children:[(0,a.jsx)(o.u_.Content,{children:(0,a.jsx)(o.u_.Columns,{hint:r("You are giving up your curator role, the bounty will return to the Funded state. You will get your deposit back."),children:(0,a.jsx)(o.rp,{isDisabled:!0,label:r("curator account"),type:"account",value:e.toString(),withLabel:!0})})}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:e,icon:"check",label:r("Give up"),onStart:n,params:[t],tx:i})})]})})),J=n.memo((function({action:e,curatorId:s,description:t,index:r,toggleOpen:i}){const{t:l}=m(),{api:d}=(0,f.h)(),{members:u}=(0,T.V)("council"),h=(0,q.m)("council"),{unassignCurator:p}=y(),[x,g]=(0,n.useState)(null),[b,j]=(0,n.useState)(),{allAccounts:v}=(0,E.x)();(0,n.useEffect)((()=>{u&&j(new(c())(Math.ceil(u.length*(0,R.mo)(d))))}),[d,u]);const C=(0,n.useMemo)((()=>p(r)),[r,p]),w=(0,n.useMemo)((()=>({SlashCuratorAction:{filter:v,header:l("This action will Slash the Curator."),params:[r],proposingAccountTip:l("The account that will create the transaction."),tip:l("Curator's deposit will be slashed and curator will be unassigned. Bounty will return to the Funded state."),title:l("Slash curator"),tx:p},SlashCuratorMotion:{filter:u,header:l("This action will create a Council motion to slash the Curator."),params:[b,C,C?.length],proposingAccountTip:l('The council member that will create the motion, submission equates to an "aye" vote.'),tip:l("If the motion is approved, Curator's deposit will be slashed and Curator will be unassigned. Bounty will return to the Funded state."),title:l("Slash curator"),tx:h&&d.tx[h].propose},UnassignCurator:{filter:u,header:l("This action will create a Council motion to unassign the Curator."),params:[b,C,C?.length],proposingAccountTip:l('The council member that will create the motion, submission equates to an "aye" vote.'),tip:l("If the motion is approved, the current Curator will be unassigned and the Bounty will return to the Funded state."),title:l("Unassign curator"),tx:h&&d.tx[h].propose}})),[l,r,p,d,v,h,u,b,C]),{filter:N,params:k,proposingAccountTip:S,tip:I,title:A,tx:P}=w[e];return P?(0,a.jsxs)(o.u_,{header:`${A} - "${M(t,30)}"`,onClose:i,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:S,children:(0,a.jsx)(o.rp,{filter:N,label:l("proposing account"),onChange:g,type:"account",withLabel:!0})}),(0,a.jsx)(o.u_.Columns,{hint:I,children:(0,a.jsx)(o.rp,{defaultValue:s,isDisabled:!0,label:l("current curator"),withLabel:!0})})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:x,icon:"check",label:"Approve",onStart:i,params:k,tx:P})})]}):null})),G=n.memo((function({bestNumber:e,className:s,description:t,index:r,proposals:i,status:l}){const[c,d]=(0,p.O)(),[u,h]=(0,p.O)(),[x,f]=(0,p.O)(),[j,v]=(0,p.O)(),[y,C]=(0,p.O)(),[w,N]=(0,n.useState)(),{t:k}=m(),{isMember:S}=(0,T.V)("council"),{curator:I,updateDue:A}=g(l),{isCurator:E,roles:M}=D(I),P=function(e,s,t){const a=[];return s.isCuratorProposed&&e.includes("Member")&&a.push("UnassignCurator"),s.isActive&&(e.includes("Member")&&a.push("SlashCuratorMotion"),e.includes("User")&&t&&t.lt(b.nw)&&a.push("SlashCuratorAction")),s.isPendingPayout&&e.includes("Member")&&a.push("SlashCuratorMotion"),a}(M,l,(0,n.useMemo)((()=>A?.sub(e)),[e,A])),F=(0,n.useRef)({SlashCuratorAction:k("Slash curator"),SlashCuratorMotion:k("Slash curator (Council)"),UnassignCurator:k("Unassign curator")}),V=(0,n.useMemo)((()=>i?.find((({proposal:e})=>e&&"closeBounty"===e.method))),[i]),R=(0,n.useMemo)((()=>i?.find((({proposal:e})=>e&&"unassignCurator"===e.method))),[i]),q=(l.isFunded||l.isActive||l.isCuratorProposed)&&S&&!V,O=l.isCuratorProposed&&E,z=l.isActive&&E,B=l.isActive&&E,$=(l.isCuratorProposed||l.isActive||l.isPendingPayout)&&!R&&0!==P.length,L=!(q||O||B||$||z),Z=(0,n.useCallback)((e=>()=>{N(e),f()}),[f]);return L?null:(0,a.jsxs)("div",{className:s,children:[c&&(0,a.jsx)(_,{description:t,index:r,toggleOpen:d}),u&&I&&(0,a.jsx)(H,{curatorId:I,description:t,index:r,toggleOpen:h}),j&&I&&(0,a.jsx)(W,{curatorId:I,description:t,index:r,toggleOpen:v}),y&&I&&(0,a.jsx)(U,{curatorId:I,description:t,index:r,toggleOpen:C}),x&&I&&w&&(0,a.jsx)(J,{action:w,curatorId:I,description:t,index:r,toggleOpen:f}),(0,a.jsx)(o.GI,{value:(0,a.jsxs)(o.v2,{className:"settings-menu",children:[q&&(0,a.jsx)(o.v2.Item,{label:k("Close"),onClick:d},"closeBounty"),O&&(0,a.jsx)(o.v2.Item,{label:k("Reject curator"),onClick:h},"rejectCurator"),B&&(0,a.jsx)(o.v2.Item,{label:k("Extend expiry"),onClick:v},"extendExpiry"),z&&(0,a.jsx)(o.v2.Item,{label:k("Give up"),onClick:C},"giveUpCurator"),$&&P.map((e=>(0,a.jsx)(o.v2.Item,{label:F.current[e],onClick:Z(e)},e)))]})})]})})),Q=o.zo.div`
  margin-top: 0.28rem;
  font-size: var(--font-size-tiny);
  line-height: 0.85rem;
  color: var(--color-label);
`,Y=n.memo((function({className:e="",dataTestId:s="",description:t}){return(0,a.jsx)(Q,{className:e,"data-testid":s,children:t})})),K=o.zo.div`
  margin-left: 0.2rem;
`,X=n.memo((function({className:e,proposal:s,status:t}){const r=function(e,s){return e.proposal&&"unassignCurator"!==e.proposal.method?e.proposal.method:s.isCuratorProposed?"unassignCurator":"slashCurator"}(s,t),{t:i}=m(),l=(0,n.useRef)({approveBounty:i("Bounty approval under voting"),closeBounty:i("Bounty rejection under voting"),proposeCurator:i("Curator proposal under voting"),slashCurator:i("Curator slash under voting"),unassignCurator:i("Unassign curator under voting")});return(0,a.jsx)(K,{className:e,"data-testid":"voting-description",children:r&&l.current[r]&&(0,a.jsx)(o.ob,{help:l.current[r]})})})),ee=o.zo.a`
  line-height: 0.85rem;
  font-size: var(--font-size-tiny);
  text-decoration: underline;
`,se=n.memo((function({className:e}){const{t:s}=m();return(0,a.jsx)(ee,{className:e,href:"#/council/motions",children:s("Voting")})})),te=o.zo.div`
  .voting-summary-text {
    font-size: var(--font-size-small);
    line-height: 1.5rem;
    color: var(--color-label);

    span {
      min-width: 0.5rem;
      margin-right: 0.5rem;
    }
  }

  .link-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    line-height: 1.5rem;
  }
`,ae=n.memo((function({className:e,proposal:s,status:t}){const{members:o}=(0,T.V)("council"),{t:r}=m(),i=(0,n.useMemo)((()=>s?.votes?.ayes?.length),[s]),l=(0,n.useMemo)((()=>s?.votes?.nays?.length),[s]),c=(0,n.useMemo)((()=>s?.votes?.threshold.toNumber()),[s]),d=(0,n.useMemo)((()=>o?.length&&c?o.length-c+1:0),[o,c]);return(0,a.jsx)(a.Fragment,{children:s&&(0,a.jsxs)(te,{className:e,"data-testid":"voting-summary",children:[(0,a.jsxs)("div",{className:"voting-summary-text",children:[(0,a.jsx)("span",{children:r("Aye")})," ",(0,a.jsxs)("b",{children:[i,"/",c]})]}),(0,a.jsxs)("div",{className:"voting-summary-text",children:[(0,a.jsx)("span",{children:r("Nay")})," ",(0,a.jsxs)("b",{children:[l,"/",d]})]}),(0,a.jsxs)("div",{className:"link-info",children:[(0,a.jsx)(se,{}),(0,a.jsx)(X,{proposal:s,status:t})]})]})})})),ne=n.memo((function({beneficiary:e,proposals:s,status:t}){const{t:r}=m(),i=(0,n.useMemo)((()=>s&&A(s,t)),[s,t]);return(0,a.jsxs)(a.Fragment,{children:[i&&(0,a.jsx)(ae,{proposal:i,status:t}),e&&(0,a.jsxs)("div",{children:[(0,a.jsx)(o.N,{value:e}),(0,a.jsx)(Y,{description:r("Beneficiary")})]})]})})),oe=o.zo.div`
  display: flex;
  align-items: center;
`,re=n.memo((function({bountyStatus:e,className:s=""}){return(0,a.jsx)(oe,{className:s,"data-testid":"bountyStatus",children:(t=e,t.replace(/([a-z])([A-Z])/g,"$1 $2"))});var t})),ie=n.memo((function({curator:e,isFromProposal:s}){const{t}=m();return(0,a.jsxs)("div",{children:[(0,a.jsx)(o.N,{value:e.toString()}),s&&(0,a.jsx)(Y,{description:t("Proposed Curator")})]})}));var le=t(65874);const ce=n.memo((function({dueBlocks:e,endBlock:s,label:t}){return(0,a.jsx)(a.Fragment,{children:e.gtn(0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(le.Z,{value:e,children:[" (",t,")"]}),"#",(0,d.u)(s)]})})})),de={ayes:"check",nays:"times"},ue=o.zo.div`
  width: 50%;

  .vote-numbers {
    display: flex;
    align-items: center;
    margin-bottom: 0.85rem;
  }

  .vote-numbers-icon svg {
    max-width: 10px;
    color: var(--color-label);
  }

  .vote-numbers-label {
    margin-left: 0.75rem;
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-tiny);
    line-height: 0.85rem;
    text-transform: uppercase;
    color: var(--color-label);
  }
`,me=n.memo((function({className:e,option:s,proposals:t,status:r}){const{t:i}=m(),l=(0,n.useMemo)((()=>A(t,r)),[t,r]),c=(0,n.useMemo)((()=>"ayes"===s?l?.votes?.ayes:l?.votes?.nays),[l,s]),d=(0,n.useMemo)((()=>c?.map((e=>(0,a.jsx)("div",{className:"voter","data-testid":`voters_${s}_${e.toString()}`,children:(0,a.jsx)(o.N,{value:e})},e.toString())))),[s,c]);return(0,a.jsx)(a.Fragment,{children:l&&(0,a.jsxs)(ue,{className:e,children:[(0,a.jsxs)("div",{className:"vote-numbers",children:[(0,a.jsx)("span",{className:"vote-numbers-icon",children:(0,a.jsx)(o.JO,{icon:de[s]})}),(0,a.jsxs)("span",{className:"vote-numbers-label",children:["ayes"===s&&i("Aye: {{count}}",{replace:{count:c?c.length:0}}),"nays"===s&&i("Nay: {{count}}",{replace:{count:c?c.length:0}})]})]}),d]})})})),he=o.zo.tr`
  .description-column {
    max-width: 200px;

    div {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }

  & .links {
    display: inline-flex;
  }

  & .inline-balance {
    width: 50%;
    font-size: var(--font-size-base);
    line-height: normal;
  }

  .column {
    align-items: center;
    display: flex;
    padding: 0 0 0.5rem;

    h5 {
      text-align: right;
      padding: 0 1.7rem 0 0;
      width: 50%;
    }
  }

  & .td-info-action-row {
    padding-right: 0;
  }

  .td-row {
    display: flex;
    justify-content: space-between;
    align-items: center;

    & :only-child {
      margin-left: auto;
    }
  }

  .bounty-action-row {
    display: flex;
    justify-content: flex-end;
    align-items: center;

    & > * + * {
      margin-left: 0.6rem;
    }
  }

  .block-to-time {
    font-size: var(--font-size-tiny);
    line-height: 1.5rem;
    color: var(--color-label);
  }

  & .votes-table {
    display: flex;
    justify-content: space-between;
  }
`,pe=n.memo((function({bestNumber:e,bounty:s,className:t="",description:r,index:l,proposals:c}){const{t:d}=m(),[u,h]=(0,p.O)(!1),{bond:x,curatorDeposit:b,fee:f,proposer:j,status:v,value:y}=s,{beneficiary:C,bountyStatus:w,curator:N,unlockAt:k,updateDue:I}=g(v),E=(0,n.useMemo)((()=>I?.sub(e)),[e,I]),M=(0,n.useMemo)((()=>k?.sub(e)),[e,k]),P=(0,n.useMemo)((()=>{if(N)return{curator:N,isFromProposal:!1};const e=c&&A(c,v);return"proposeCurator"===e?.proposal?.method?{curator:e.proposal.args[1],isFromProposal:!0}:null}),[N,c,v]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(he,{className:`${t} isExpanded isFirst ${u?"":"isLast"}`,children:[(0,a.jsx)(o.iA.Column.Id,{value:l}),(0,a.jsx)("td",{className:"description-column","data-testid":"description",children:(0,a.jsx)("div",{title:r,children:r})}),(0,a.jsx)("td",{children:(0,a.jsx)(re,{bountyStatus:w})}),(0,a.jsx)(o.iA.Column.Balance,{value:y}),(0,a.jsx)("td",{children:P&&(0,a.jsx)(ie,{curator:P.curator,isFromProposal:P.isFromProposal})}),(0,a.jsxs)("td",{children:[M&&k&&(0,a.jsx)(ce,{dueBlocks:M,endBlock:k,label:d("payout")}),E&&I&&(0,a.jsx)(ce,{dueBlocks:E,endBlock:I,label:d("update")}),(0,a.jsx)(S,{bestNumber:e,blocksUntilUpdate:E,status:v}),(0,a.jsx)(L,{bestNumber:e,description:r,fee:f,index:l,proposals:c,status:v,value:y})]}),(0,a.jsx)("td",{children:(0,a.jsx)(ne,{beneficiary:C,proposals:c,status:v})}),(0,a.jsx)("td",{className:"actions",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(G,{bestNumber:e,description:r,index:l,proposals:c,status:v}),(0,a.jsx)(o.Vh,{expanded:u,onClick:h})]})})]}),(0,a.jsxs)(he,{className:`${t} ${u?"isExpanded isLast":"isCollapsed"}`,children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{className:"columar",colSpan:3,children:(0,a.jsxs)(o.P0,{children:[(0,a.jsx)(o.P0.Column,{children:(0,a.jsx)(o.NR,{data:l,type:"bounty",withTitle:!0})}),(0,a.jsxs)(o.P0.Column,{children:[(0,a.jsxs)("div",{className:"column",children:[(0,a.jsx)("h5",{children:d("Proposer")}),(0,a.jsx)(o.N,{value:j})]}),(0,a.jsxs)("div",{className:"column",children:[(0,a.jsx)("h5",{children:d("Bond")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(i.Z,{value:x})})]}),N&&(0,a.jsxs)("div",{className:"column",children:[(0,a.jsx)("h5",{children:d("Curator's fee")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(i.Z,{value:f})})]}),(0,a.jsx)("div",{className:"column",children:N&&!b.isZero()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:d("Curator's deposit")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(i.Z,{value:b})})]})})]})]})}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{}),(0,a.jsx)("td",{children:c&&(0,a.jsxs)("div",{className:"votes-table",children:[(0,a.jsx)(me,{option:"ayes",proposals:c,status:v}),(0,a.jsx)(me,{option:"nays",proposals:c,status:v})]})}),(0,a.jsx)("td",{})]})]})})),xe=(0,x.e)("useBalance",(function(e){const{api:s}=(0,f.h)();return(0,j.W7)(s.derive.balances?.all,[e])?.availableBalance}));function ge(e){return new Blob([e]).size}const be=b.nw,fe=n.memo((function(){const{t:e}=m(),{bountyDepositBase:s,bountyValueMinimum:t,dataDepositPerByte:r,maximumReasonLength:i,proposeBounty:l}=y(),[c,d]=(0,n.useState)(null),u=xe(c),[h,x]=(0,n.useState)(""),[g,b]=(0,n.useState)(s),[f,j]=(0,n.useState)(be),[v,C]=(0,p.O)(),[w,N]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),[I,A]=(0,n.useState)(!1);(0,n.useEffect)((()=>{N(h?.length>=1&&ge(h)<=i)}),[i,h]),(0,n.useEffect)((()=>{S(!!f?.gte(t))}),[t,f]),(0,n.useEffect)((()=>{A(!!u?.gte(g))}),[u,g]);const E=I&&w&&k,M=(0,n.useCallback)((e=>{var t,a;x(e),b((t=e,a=r,s.add(a.muln(ge(t)))))}),[s,r]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.zx,{icon:"plus",isDisabled:!1,label:e("Add Bounty"),onClick:C}),v&&(0,a.jsxs)(o.u_,{className:"ui--AddBountyModal",header:e("Add Bounty"),onClose:C,children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsxs)(o.u_.Columns,{hint:e("Description of the Bounty (to be stored on-chain)"),children:[(0,a.jsx)(o.II,{autoFocus:!0,defaultValue:"",isError:!w,label:e("bounty title"),onChange:M,value:h}),!w&&""!==h&&(0,a.jsx)(o.oy,{content:e("Title too long")})]}),(0,a.jsxs)(o.u_.Columns,{hint:e("How much should be paid out for completed Bounty. Upon funding, the amount will be reserved in treasury."),children:[(0,a.jsx)(o.H,{isError:!k,isZeroable:!0,label:e("bounty requested allocation"),onChange:j,value:f}),!k&&!f?.eq(be)&&(0,a.jsx)(o.oy,{content:e("Allocation value is smaller than the minimum bounty value.")})]}),(0,a.jsx)(o.u_.Columns,{hint:e("Proposer bond depends on bounty title length."),children:(0,a.jsx)(o.H,{defaultValue:g.toString(),isDisabled:!0,label:e("bounty bond")})}),(0,a.jsxs)(o.u_.Columns,{hint:e("This account will propose the bounty. Bond amount will be reserved on its balance."),children:[(0,a.jsx)(o.rp,{isError:!I,label:e("submit with account"),onChange:d,type:"account",withLabel:!0}),!I&&(0,a.jsx)(o.oy,{content:e("Account does not have enough funds.")})]})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:c,icon:"plus",isDisabled:!c||!E,label:e("Add Bounty"),onStart:C,params:[f,h],tx:l})})]})]})})),je=o.zo.div`
  .bounties-table-wrapper table {
    tr {
      td, &:not(.filter) th {
        &:last-child {
          padding-right: 1.14rem;
        }
      }
    }
  }

  .ui--IdentityIcon {
    margin-right: 0.42rem;
  }

  .via-identity .name {
    font-size: var(--font-size-base);
    line-height: 1.7rem;
    text-transform: initial;
    filter: initial;
    opacity: 1;
  }
`,ve=n.memo((function({className:e}){const{t:s}=m(),t=y(),r=(0,n.useMemo)((()=>t&&t.bounties&&[...t.bounties].sort(((e,s)=>s.index.cmp(e.index)))),[t]),i=(0,n.useRef)([[s("bounties"),"start",3],[s("value")],[s("curator"),"start"],[s("next action"),"start",3]]);return(0,a.jsxs)(je,{className:e,children:[(0,a.jsx)(h,{info:t}),(0,a.jsx)(o.zx.Group,{children:(0,a.jsx)(fe,{})}),(0,a.jsx)(o.iA,{className:"bounties-table-wrapper",empty:r&&s("No open bounties"),header:i.current,children:r&&t.bestNumber&&r.map((({bounty:e,description:s,index:n,proposals:o})=>(0,a.jsx)(pe,{bestNumber:t.bestNumber,bounty:e,description:s,index:n,proposals:o},n.toNumber())))})]})})),ye=n.memo((function({basePath:e,className:s=""}){const{t}=m(),r=(0,n.useRef)([{isRoot:!0,name:"index",text:t("Overview")}]);return(0,a.jsxs)("main",{className:`${s} bounties--App`,children:[(0,a.jsx)(o.mQ,{basePath:e,items:r.current}),(0,a.jsx)(ve,{})]})}))},19739:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(2784),n=t(90778),o=t(9118);const r=(0,t(11677).e)("useCounter",(function(){const{api:e,isApiReady:s}=(0,n.h)(),t=(0,o.W7)(s&&e.derive.bounties?.bounties);return(0,a.useMemo)((()=>t?.length||0),[t])}))},6742:(e,s,t)=>{t.d(s,{Z:()=>Z});var a=t(52322),n=t(2784),o=t(24732);const r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["January","February","March","April","May","June","July","August","September","October","November","December"];var l=t(54371),c=t(14681),d=t(61349);function u(){return(0,d.$G)("app-calendar")}function m(e){const s=new Date(e);return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s}function h(e,s=1){const t=e.getMonth();return 11===t?new Date(e.getFullYear()+1,0,s):new Date(e.getFullYear(),t+1,s)}function p(e,s){const t=m(e);t.setDate(1);const a=h(t),n=m(s),o=h(t,0).getDate(),i=[];for(let e=1;e<=o;e++)i.push(e);return{dateMonth:t,dateMonthNext:a,dateSelected:n,days:i,startClass:`start${r[t.getDay()]}`}}function x(e){return new Date(e).toISOString().split(".")[0].replaceAll("-","").replaceAll(":","")+"Z"}const g={day:"numeric",month:"long",weekday:"long",year:"numeric"};function b(e,s){return(0,a.jsx)("div",{className:"itemLink",children:(0,a.jsx)("a",{href:`#/${e}`,children:s})})}const f=o.zo.div`
  align-items: flex-start;
  display: flex;
  justify-content: flex-start;
  margin: 0.5rem 0.75rem;

  > div+div {
    margin-left: 0.5rem;
  }

  > div.itemTime+div.itemBlock {
    margin-left: 0.25rem;
  }

  .exportCal {
    padding: 0;
    position: absolute;
    right: 1.5rem;

    .ui--Icon {
      width: 0.7rem;
      height: 0.7rem;
    }
  }

  .exportCal-allEvents {
    right: 3.5rem;
  }

  .itemBlock {
    background: #aaa;
    color: #eee;
    font-size: var(--font-size-small);
    align-self: center;
    padding: 0.075rem 0.375rem;
    border-radius: 0.25rem;
  }

  .itemDate {
    padding: 0 0.375rem;
    border-radius: 0.25rem;
    width: 17rem;
  }

  .itemTime {
    background: #999;
    color: #eee;
    padding: 0 0.375rem;
    border-radius: 0.25rem;
  }
`,j=n.memo((function({className:e,item:{blockNumber:s,date:t,info:r,type:i},showAllEvents:d}){const{t:m}=u(),[h,p]=(0,n.useState)(""),j=(0,n.useCallback)((()=>function(e,s){const t="BEGIN:VCALENDAR\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\nPRODID:-//Test Cal//EN\nVERSION:2.0\nBEGIN:VEVENT\nUID:test-1\nDTSTART;VALUE=DATE:"+x(e)+"\nDTEND;VALUE=DATE:"+x(new Date(new Date(e).setHours(new Date(e).getHours()+1)))+"\nSUMMARY:"+s+"\nDESCRIPTION:"+s+"\nEND:VEVENT\nEND:VCALENDAR",a=encodeURI(s)+".ics",n=new File([t],a,{type:"text/plain"}),o=window.document.createElement("a");o.href=window.URL.createObjectURL(n),o.download=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(o.href)}(t,h)),[h,t]),v=(0,n.useMemo)((()=>{const e=r&&((0,l.H)(r)?r:(0,c.u)(r)),s=["councilElection"].includes(i)?b("council",m("via Council")):["councilMotion"].includes(i)?b("council/motions",m("via Council/Motions")):["democracyDispatch","scheduler"].includes(i)?b("democracy/dispatch",m("via Democracy/Dispatch")):["democracyLaunch","referendumDispatch","referendumVote"].includes(i)?b("/democracy",m("via Democracy")):["societyChallenge","societyRotate"].includes(i)?b("society",m("via Society")):["stakingEpoch","stakingEra"].includes(i)?b("staking",m("via Staking")):["stakingSlash"].includes(i)?b("staking/slashes",m("via Staking/Slashed")):["treasurySpend"].includes(i)?b("treasury",m("via Treasury")):["parachainLease"].includes(i)?b("parachains",m("via Parachains")):["parachainAuction"].includes(i)?b("parachains/auction",m("via Parachains/Auction")):void 0;let t="";switch(i){case"councilElection":t=m("Election of new council candidates");break;case"councilMotion":t=m("Voting ends on council motion {{id}}",{replace:{id:e}});break;case"democracyDispatch":t=m("Enactment of the result of referendum {{id}}",{replace:{id:e}});break;case"democracyLaunch":t=m("Start of the next referendum voting period");break;case"parachainAuction":t=m("End of the current parachain auction {{id}}",{replace:{id:e}});break;case"parachainLease":t=m("Start of the next parachain lease period {{id}}",{replace:{id:e}});break;case"referendumDispatch":t=m("Potential dispatch of referendum {{id}} (if passed)",{replace:{id:e}});break;case"referendumVote":t=m("Voting ends for referendum {{id}}",{replace:{id:e}});break;case"scheduler":t=e?m("Execute named scheduled task {{id}}",{replace:{id:e}}):m("Execute anonymous scheduled task");break;case"stakingEpoch":t=m("Start of a new staking session {{id}}",{replace:{id:e}});break;case"stakingEra":t=m("Start of a new staking era {{id}}",{replace:{id:e}});break;case"stakingSlash":t=m("Application of slashes from era {{id}}",{replace:{id:e}});break;case"treasurySpend":t=m("Start of next spending period");break;case"societyChallenge":t=m("Start of next membership challenge period");break;case"societyRotate":t=m("Acceptance of new members and bids");break;default:return function(e){throw new Error(`We should not get here, unhandled ${e}`)}(i)}return p(t),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"itemDesc",children:t}),s]})}),[r,m,i]);return(0,a.jsxs)(f,{className:e,children:[d&&(0,a.jsx)("div",{className:"itemDate",children:t.toLocaleString(void 0,g)}),(0,a.jsx)("div",{className:"itemTime",children:t.toLocaleTimeString().split(":").slice(0,2).join(":")}),(0,a.jsxs)("div",{className:"itemBlock",children:["#",(0,c.u)(s)]}),v,t&&(0,a.jsx)(o.zx,{className:d?"exportCal exportCal-allEvents":"exportCal",icon:"calendar-plus",onClick:j})]})})),v=36e5,y=o.zo.div`
  align-items: center;
  display: flex;
  position: relative;
  z-index: 2;

  &:nth-child(odd) {
    background: var(--bg-table);
  }

  &.isPast {
    opacity: 0.75;
  }

  .hourContainer {
    flex: 1;
    padding: 0.25rem 0;
  }

  .hourLabel {
    flex: 0;
    font-size: var(--font-size-small);
    font-weight: var(--font-weight-normal);
    line-height: 1;
    min-width: 5.5rem;
    opacity: var(--opacity-light);
    padding: 0.5rem 1rem;
    text-align: right;
    text-transform: uppercase;
    z-index: 1;
  }

  &.hasItems .hourLabel {
    font-size: 1.1rem;
    font-weight: var(--font-weight-normal);
    opacity: 1;
    padding: 0.7rem 1rem;
  }
`,C=n.memo((function({className:e="",date:s,hour:t,index:o,minutes:r,scheduled:i}){const l=(0,n.useMemo)((()=>function(e,s,t,a){const n=e.getTime()+t*v,o=n+v,r=n+6e4*s;return a.filter((({dateTime:e})=>e>=r&&e<o)).sort(((e,s)=>e.dateTime-s.dateTime||e.type.localeCompare(s.type)))}(s,r,o,i)),[s,o,r,i]),c=`${` ${t}`.slice(-2)} ${t>=12?"pm":"am"}`;return(0,a.jsxs)(y,{className:`${e}${l.length?" hasItems":""}`,children:[(0,a.jsx)("div",{className:"hourLabel"+(l.length?" highlight--color":""),children:c}),(0,a.jsx)("div",{className:"hourContainer",children:l.map(((e,s)=>(0,a.jsx)(j,{item:e},s)))})]})})),w=n.memo((function(){const[e,s]=(0,n.useState)(new Date);return(0,n.useEffect)((()=>{const e=setInterval((()=>s(new Date)),1e3);return()=>{clearInterval(e)}}),[]),(0,a.jsx)(a.Fragment,{children:e.toLocaleTimeString().split(":").slice(0,2).join(":")})})),N=(()=>{const e=[];for(let s=0;s<24;s++)e.push(s);return e})(),k=o.zo.div`
  flex: 1;

  .dayHeader {
    align-items: center;
    display: flex;
    font-size: 1.25rem;
    justify-content: space-between;
    padding: 1rem 1.5rem 0;
  }

  .hoursContainer {
    z-index: 1;
  }
`,S=n.memo((function({className:e,date:s,hasNextDay:t,now:r,scheduled:l,setNextDay:c,setPrevDay:d,setView:m}){const{t:h}=u(),p=(0,n.useRef)(i.map((e=>h(e)))),[x,g,b]=(0,n.useMemo)((()=>[s.getMonth()===r.getMonth()&&s.getFullYear()===r.getFullYear()&&s.getDate()===r.getDate(),r.getHours(),r.getMinutes()]),[s,r]),f=(0,n.useCallback)((()=>m(!0)),[m]);return(0,a.jsxs)(k,{className:e,children:[(0,a.jsxs)("h1",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.zx,{className:"all-events-button",icon:"list",onClick:f}),s.getDate()," ",p.current[s.getMonth()]," ",s.getFullYear()," ",x&&(0,a.jsx)(w,{})]}),(0,a.jsxs)(o.zx.Group,{children:[(0,a.jsx)(o.zx,{icon:"chevron-left",isDisabled:x,onClick:d}),(0,a.jsx)(o.zx,{icon:"chevron-right",isDisabled:!t,onClick:c})]})]}),(0,a.jsx)("div",{className:"hoursContainer highlight--bg-faint",children:N.map(((e,t)=>(0,a.jsx)(C,{date:s,hour:e,index:t,minutes:x&&g===t?b:0,scheduled:l},e)))})]})})),I=864e5,A=o.zo.div`
  background-color: transparent;
  border: 1px solid transparent;
  border-radius: 50%;
  line-height: 1;
  padding: 1rem;
  position: relative;
  text-align: center;
  z-index: 1;

  &:before {
    border-radius: 50%;
  }

  &:not(.isDisabled) {
    cursor: pointer;
  }

  &:not(.isSelected):hover {
    background: #f7f5f3;
  }

  .eventIndicator {
    border: 0.25rem solid transparent;
    border-radius: 50%;
    height: 0.25rem;
    position: absolute;
    right: 0.625rem;
    top: 0.625rem;
    width: 0.25rem;
  }

  &.isDisabled {
    opacity: 0.375;

    &:hover {
      background: transparent;
    }

    .eventIndicator {
      display: none;
    }
  }
`,E=n.memo((function({className:e="",dateMonth:s,day:t,isCurrent:o,isDisabled:r,scheduled:i,setDay:l}){const c=(0,n.useMemo)((()=>{const e=s.getTime()+(t-1)*I,a=e+I;return i.some((({dateTime:s})=>s>=e&&s<a))}),[s,t,i]),d=(0,n.useCallback)((()=>{!r&&l(t)}),[t,r,l]);return(0,a.jsxs)(A,{className:`${e} day ${r?"isDisabled":o?"highlight--bg-light highlight--color isSelected":""}`,onClick:d,children:[t,c&&(0,a.jsx)("div",{className:"eventIndicator highlight--border"})]})})),M=o.zo.div`
  flex: 0;
  max-width: max-content;

  .calendar {
    padding: 1rem 1.5rem;

    .dateGrid,
    .dayOfWeek {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
    }

    .dateGrid {
      margin-top: 0.5em;
    }

    &.startSun .dateGrid .day:first-child { grid-column: 1 }
    &.startMon .dateGrid .day:first-child { grid-column: 2 }
    &.startTue .dateGrid .day:first-child { grid-column: 3 }
    &.startWed .dateGrid .day:first-child { grid-column: 4 }
    &.startThu .dateGrid .day:first-child { grid-column: 5 }
    &.startFri .dateGrid .day:first-child { grid-column: 6 }
    &.startSat .dateGrid .day:first-child { grid-column: 7 }

    .dayOfWeek {
      > * {
        font-size: var(--font-size-tiny);
        font-weight: var(--font-weight-normal);
        letter-spacing: 0.1em;
        text-align: center;
        text-transform: uppercase;
      }
    }

    .monthIndicator {
      align-items: center;
      display: flex;
      font-size: 1.25rem;
      justify-content: space-between;
    }
  }
`,P=n.memo((function({className:e,hasNextMonth:s,lastDay:t,now:l,scheduled:c,setDay:d,setNextMonth:m,setPrevMonth:h,state:{dateMonth:p,dateSelected:x,days:g,startClass:b}}){const{t:f}=u(),j=(0,n.useRef)(r.map((e=>f(e)))),v=(0,n.useRef)(i.map((e=>f(e)))),[y,C,w,N,k]=(0,n.useMemo)((()=>[p.getFullYear()===x.getFullYear(),p.getMonth()===x.getMonth(),l.getFullYear()===p.getFullYear(),l.getMonth()===p.getMonth(),l.getMonth()>p.getMonth()]),[p,x,l]);return(0,a.jsxs)(M,{className:e,children:[(0,a.jsxs)("h1",{children:[(0,a.jsxs)("div",{children:[v.current[p.getMonth()]," ",p.getFullYear()]}),(0,a.jsxs)(o.zx.Group,{children:[(0,a.jsx)(o.zx,{icon:"chevron-left",isDisabled:w&&(k||N),onClick:h}),(0,a.jsx)(o.zx,{icon:"chevron-right",isDisabled:!s,onClick:m})]})]}),(0,a.jsxs)("div",{className:`calendar ${b}`,children:[(0,a.jsx)("div",{className:"dayOfWeek",children:j.current.map((e=>(0,a.jsx)("div",{children:f(e)},e)))}),(0,a.jsx)("div",{className:"dateGrid",children:g.map((e=>(0,a.jsx)(E,{dateMonth:p,day:e,isCurrent:y&&C&&e===x.getDate(),isDisabled:w&&(k||N&&l.getDate()>e)||!s&&e>t,scheduled:c,setDay:d},e)))})]})]})})),T=o.zo.div`
  flex: 0;
  max-width: max-content;

  .all-events-rows {
    padding: 10px 0;
    font-size: 13px;
    &:nth-child(odd) {
      background: var(--bg-table);
    }
  }

  .allEventsWrapper {
    padding-inline-start: 10px;
  }
`,D=n.memo((function({className:e,scheduled:s,setView:t}){const{t:r}=u(),i=(0,n.useMemo)((()=>s.sort(((e,s)=>e.dateTime-s.dateTime))),[s]),l=(0,n.useCallback)((()=>t(!1)),[t]);return(0,a.jsxs)(T,{className:e,children:[(0,a.jsx)("h1",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(o.zx,{className:"all-events-button",icon:"calendar",onClick:l}),r("Upcoming Events")]})}),(0,a.jsx)("ul",{className:"allEventsWrapper",children:i.map(((e,s)=>(0,a.jsx)(j,{className:"all-events-rows",item:e,showAllEvents:!0},s)))})]})}));var F=t(31132),V=t(90778),R=t(56360),q=t(54383),O=t(9118),z=t(11677),B=t(95292);function $(e,s){const t=new Date(Date.now()+e.mul(s).toNumber());return{date:t,dateTime:t.getTime()}}function L(e,s){return s.reduce(((e,[s,t])=>e.filter((({type:e})=>e!==s)).concat(...t.map((e=>(e.type=s,e))))),e)}const H=(0,z.e)("useScheduled",(function(){const{api:e}=(0,V.h)(),s=(0,R.n)(),t=(0,q.C)(),a=(0,F.f)(),o=(0,O.W7)(e.query.auctions?.auctionInfo),r=(0,O.W7)(e.derive.council?.proposals),i=(0,O.W7)(e.derive.democracy?.dispatchQueue),l=(0,O.W7)(e.derive.democracy?.referendums),c=(0,O.W7)(e.query.scheduler?.agenda?.entries),d=(0,O.W7)(e.derive.session?.progress),u=(0,O.W7)(e.query.staking?.unappliedSlashes.entries),[m,h]=(0,n.useState)([]);return(0,n.useEffect)((()=>{t&&i&&h((e=>L(e,function(e,s,t){return t.map((({at:t,index:a})=>{const n=t.sub(e);return["democracyDispatch",[{...$(n,s),blockNumber:t,blocks:n,info:a}]]}))}(t,s,i))))}),[t,s,i]),(0,n.useEffect)((()=>{t&&r&&h((e=>L(e,function(e,s,t){return[["councilMotion",t.map((({hash:t,votes:a})=>{if(!a)return null;const n=t.toHex(),o=a.end.sub(e);return{...$(o,s),blockNumber:a.end,blocks:o,info:`${n.slice(0,6)}…${n.slice(-4)}`}})).filter((e=>!!e))]]}(t,s,r))))}),[t,s,r]),(0,n.useEffect)((()=>{t&&l&&h((e=>L(e,function(e,s,t){return t.reduce(((t,{index:a,status:n})=>{const o=n.end.add(n.delay).isub(e),r=n.end.sub(e).isub(B.If);return t.push(["referendumVote",[{...$(r,s),blockNumber:e.add(r),blocks:r,info:a}]]),t.push(["referendumDispatch",[{...$(o,s),blockNumber:e.add(o),blocks:o,info:a,isPending:!0}]]),t}),[])}(t,s,l))))}),[t,s,l]),(0,n.useEffect)((()=>{t&&c&&h((e=>L(e,function(e,s,t){return[["scheduler",t.filter((([,e])=>e.some((e=>e.isSome)))).reduce(((t,[a,n])=>{const o=a.args[0];return n.filter((e=>e.isSome)).map((e=>e.unwrap())).reduce(((t,{maybeId:a})=>{const n=a.unwrapOr(null),r=o.sub(e);return t.push({...$(r,s),blockNumber:o,blocks:r,info:n?n.isAscii?n.toUtf8():n.toHex():null}),t}),t)}),[])]]}(t,s,c))))}),[t,s,c]),(0,n.useEffect)((()=>{t&&d?.sessionLength.gt(B.If)&&h((a=>L(a,function(e,s,t,a,n){const o=t.eraLength.sub(t.eraProgress),r=t.sessionLength.sub(t.sessionProgress),i=n?.mul(t.eraLength),l=i?a.filter((([,e])=>e.length)).map((([a])=>{const n=a.args[0],o=t.activeEra.sub(n).isub(B.If).imul(t.eraLength).iadd(t.eraProgress),r=i.sub(o);return{...$(r,s),blockNumber:e.add(r),blocks:r,info:n}})):[];return[["stakingEpoch",[{...$(r,s),blockNumber:e.add(r),blocks:r,info:t.currentIndex.add(B.If)}]],["stakingEra",[{...$(o,s),blockNumber:e.add(o),blocks:o,info:t.activeEra.add(B.If)}]],["stakingSlash",l]]}(t,s,d,u||[],e.consts.staking?.slashDeferDuration))))}),[e,t,s,d,u]),(0,n.useEffect)((()=>{t&&o?.isSome&&h((e=>L(e,function(e,s,t,[a,n]){const o=n.sub(e);return[["parachainAuction",[{...$(o,s),blockNumber:n,blocks:o,info:`${a.toString()} - ${a.add(t).toString()}`}]]]}(t,s,a,o.unwrap()))))}),[o,t,s,a]),(0,n.useEffect)((()=>{t&&h((a=>L(a,function(e,s,t){return t.map((([t,a,n=B.nw,o=B.nw])=>{if(!a)return[t,[]];const r=e.sub(o),i=a.sub(r.mod(a));return[t,[{...$(i,s),blockNumber:r.add(i),blocks:i,info:r.div(a).iadd(n)}]]}))}(t,s,[["councilElection",(e.consts.elections||e.consts.phragmenElection||e.consts.electionsPhragmen)?.termDuration],["democracyLaunch",e.consts.democracy?.launchPeriod],["parachainLease",e.consts.slots?.leasePeriod,B.If,e.consts.slots?.leaseOffset],["societyChallenge",e.consts.society?.challengePeriod],["societyRotate",e.consts.society?.rotationPeriod],["treasurySpend",e.consts.treasury?.spendPeriod]]))))}),[e,t,s]),m})),_=o.zo.main`
  .calendarFlex {
    align-items: flex-start;
    display: flex;
    flex-wrap: nowrap;

    .wrapper-style {
      flex: 1;

      .upcoming-events {
        position: relative;
        max-width: 100%;
      }
    }

    > div {
      background-color: var(--bg-table);
      border: 1px solid var(--border-table);
      border-radius: 0.25rem;

      &+div {
        margin-left: 1.5rem;
      }

      .ui--Button-Group {
        margin: 0;
      }
    }

    h1 {
      align-items: center;
      border-bottom: 0.25rem solid var(--bg-page);
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0.5rem 0.5rem 1rem;

      > div:first-child {
        align-items: center;
        display: inline-flex;
      }

      .all-events-button {
        margin-right: 1rem;
      }

      .ui--Button {
        font-size: var(--font-size-small);
      }
    }
  }
`,Z=n.memo((function({basePath:e,className:s}){const{t}=u(),r=H(),[i,l]=(0,n.useState)((()=>new Date)),[c,d]=(0,n.useState)((()=>p(i,i))),[m,x]=(0,n.useState)(!1),g=(0,n.useRef)([{isRoot:!0,name:"view",text:t("Upcoming events")}]);(0,n.useEffect)((()=>{const e=setInterval((()=>l(new Date)),3e4);return()=>{clearInterval(e)}}),[]);const[b,f,j]=(0,n.useMemo)((()=>{const e=new Date(c.dateSelected);e.setDate(e.getDate()+1);const s=e.getTime(),t=c.dateMonthNext.getTime(),a=r.some((({dateTime:e})=>e>=t));return[a,a||r.some((({dateTime:e})=>e>=s)),a?42:r.reduce(((e,{date:s})=>s.getFullYear()===c.dateMonth.getFullYear()&&s.getMonth()===c.dateMonth.getMonth()?Math.max(e,s.getDate()):e),0)]}),[c,r]),v=(0,n.useCallback)((()=>d((({dateMonth:e,dateSelected:s})=>p(h(e),s)))),[]),y=(0,n.useCallback)((()=>d((({dateMonth:e,dateSelected:s})=>p(function(e){const s=e.getMonth();return 0===s?new Date(e.getFullYear()-1,11,1):new Date(e.getFullYear(),s-1,1)}(e),s)))),[]),C=(0,n.useCallback)((()=>d((({dateSelected:e})=>{const s=new Date(e);return s.setDate(s.getDate()+1),p(s,s)}))),[]),w=(0,n.useCallback)((()=>d((({dateSelected:e})=>{const s=new Date(e);return s.setDate(s.getDate()-1),p(s,s)}))),[]),N=(0,n.useCallback)((e=>d((({dateMonth:s})=>{const t=new Date(s);return t.setDate(e),p(t,t)}))),[]),k=(0,n.useCallback)((e=>x(e)),[]);return(0,a.jsxs)(_,{className:s,children:[(0,a.jsx)(o.mQ,{basePath:e,items:g.current}),(0,a.jsxs)("div",{className:"calendarFlex",children:[(0,a.jsx)(P,{hasNextMonth:b,lastDay:j,now:i,scheduled:r,setDay:N,setNextMonth:v,setPrevMonth:y,state:c}),(0,a.jsx)("div",{className:"wrapper-style",children:m?(0,a.jsx)(D,{className:"upcoming-events",scheduled:r,setView:k}):(0,a.jsx)(S,{date:c.dateSelected,hasNextDay:f,now:i,scheduled:r,setNextDay:C,setPrevDay:w,setView:k})})]})]})}))},75798:(e,s,t)=>{t.d(s,{Z:()=>J});var a=t(52322),n=t(2784),o=t(72282),r=t.n(o),i=t(61349),l=t(24732),c=t(39764),d=t(90778),u=t(9118),m=t(56623),h=t(55858),p=t(94175),x=t(34814),g=t(58607),b=t(95292);function f(){return(0,i.$G)("app-claims")}(0,i.Zh)(["app-claims"]);var j=t(97637),v=t.n(j),y=t(23802),C=t(64021),w=t(84195),N=t(48533),k=t(48731),S=t(51330),I=t(64071);function A(e){const s=e.toLowerCase(),t=(0,I.Cl)(s.substring(2)).substring(2);let a="0x";for(let e=0;e<40;e++)a=`${a}${parseInt(t[e],16)>7?s[e+2].toUpperCase():s[e+2]}`;return a}function E(e,{recovery:s,signature:t}){const a=function(e){const s=(0,C.d)(`Ethereum Signed Message:\n${e.length.toString()}${e}`),t=(0,I.ij)(s);return(0,w.Y)(t)}(e),n=v().recover(a,t,s);return o=v().publicKeyConvert(n,!1).slice(1),A(`0x${(0,I.Cl)(o).slice(-40)}`);var o}function M(e,s){switch(e){case"Polkadot":case"Polkadot CC1":return function(e){if(!e)return;const s=e.isRegular?"https://statement.polkadot.network/regular.html":"https://statement.polkadot.network/saft.html";return{sentence:`I hereby agree to the terms of the statement whose SHA-256 multihash is ${e.isRegular?"Qmc1XYqT6S39WNp2UeiRUrZichUWUPpGEThDE6dAb3f6Ny":"QmXEkMahfhHJPzT3RjkXiZVFi77ZeVeuxtAjhojGRNYckz"}. (This may be found at the URL: ${s})`,url:s}}(s);default:return}}function P(e,s,t,a,n,o){return a?o||!n?{params:[t,a],tx:e.tx.claims.claim}:{params:[t,a,M(s,n)?.sentence],tx:e.tx.claims.claimAttest}:{}}const T="\nfont-size: var(--font-size-h3);\ndisplay: flex;\nflex-direction: column;\njustify-content: center;\nmin-height: 12rem;\nalign-items: center;\nmargin: 0 1rem;\n\nh3 {\n  font-family: monospace;\n  font-size: 1.5rem;\n  max-width: 100%;\n  margin: 0.5rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\nh2 {\n  margin: 0.5rem 0 2rem;\n  font-family: monospace;\n  font-size: 2.5rem;\n  font-weight: var(--font-weight-normal);\n}\n",D=l.zo.div`${T}`,F=n.memo((function({accountId:e,className:s="",ethereumAddress:t,ethereumSignature:o,isOldClaimProcess:r,onSuccess:i,statementKind:c}){const{t:u}=f(),{api:m,systemChain:h}=(0,d.h)(),[p,x]=(0,n.useState)(null),[j,v]=(0,n.useState)(!1);if((0,n.useEffect)((()=>{t&&(v(!0),m.query.claims.claims(t).then((e=>{x(e.unwrapOr(b.nw)),v(!1)})).catch((e=>{console.error(e),v(!1)})))}),[m,t]),!t||j||!p)return null;const y=p.gt(b.nw);return(0,a.jsx)(l.Zb,{isError:!y,isSuccess:y,children:(0,a.jsxs)(D,{className:s,children:[u("Your Ethereum account"),(0,a.jsx)("h2",{children:A(t.toString())}),y?(0,a.jsxs)(a.Fragment,{children:[u("has a valid claim for"),(0,a.jsx)("h2",{children:(0,a.jsx)(g.Z,{value:p})}),(0,a.jsx)(l.zx.Group,{children:(0,a.jsx)(l.cA,{icon:"paper-plane",isUnsigned:!0,label:u("Claim"),onSuccess:i,...P(m,h,e,o,c,r)})})]}):(0,a.jsx)(a.Fragment,{children:u("does not appear to have a valid claim. Please double check that you have signed the transaction correctly on the correct ETH account.")})]})})}));function V({statementUrl:e,systemChain:s}){const{t}=f();switch(s){case"Polkadot":case"Polkadot CC1":return e?(0,a.jsx)("iframe",{src:e}):null;default:return(0,a.jsx)("p",{children:t("Warning: we did not find any attest statement for {{chain}}",{replace:{chain:s}})})}}const R=l.zo.div`
  .statement{
    border: 1px solid #c2c2c2;
    background: #f2f2f2;
    height: 15rem;
    padding: 1rem;
    width: 100%;
    margin: 1rem 0;
    white-space: normal;

    p {
      color: var(--color-text) !important;
    }

    iframe {
      border: 0;
      height: 100%;
      width: 100%;
    }
  }

  .statementUrl{
    margin-left: 0.3rem
  }
`,q=n.memo((function({className:e,kind:s,systemChain:t}){const{t:n}=f(),o=M(t,s)?.url;return o?(0,a.jsxs)(R,{className:e,children:[n("Please read these terms and conditions carefully. By submitting this statement, you are deemed to have accepted these Terms and Conditions. If you do not agree to these terms, please refrain from accessing or proceeding. You can also find them at:"),(0,a.jsx)("a",{className:"statementUrl",href:o,rel:"noopener noreferrer",target:"_blank",children:o}),(0,a.jsx)("div",{className:"statement",children:(0,a.jsx)(V,{statementUrl:o,systemChain:t})})]}):null})),O=l.zo.div`${T}`,z=n.memo((function({accountId:e,className:s,ethereumAddress:t,onSuccess:o,statementKind:r,systemChain:i}){const c=(0,x.x)(),{t:u}=f(),{api:m}=(0,d.h)(),[h,p]=(0,n.useState)(null),[j,v]=(0,n.useState)(!1);(0,n.useEffect)((()=>{t&&(v(!0),m.query.claims.claims(t).then((e=>{p(e.unwrapOr(b.nw)),v(!1)})).catch((e=>{console.error(e),v(!1)})))}),[m,t]);const y=(0,n.useMemo)((()=>M(i,r)?.sentence),[i,r]);if(j||!h)return null;const C=h.isZero();return C||!y?(0,a.jsx)(l.Zb,{isError:!0,children:(0,a.jsxs)(O,{className:s,children:[C&&(0,a.jsx)("p",{children:u("There is no on-chain claimable balance associated with the Ethereum account {{ethereumAddress}}",{replace:{ethereumAddress:t}})}),!y&&(0,a.jsx)("p",{children:u("There is no on-chain attestation statement associated with the Ethereum account {{ethereumAddress}}",{replace:{ethereumAddress:t}})})]})}):c.isAccount(e)?(0,a.jsx)(l.Zb,{isSuccess:!0,children:(0,a.jsxs)(O,{className:s,children:[(0,a.jsx)(q,{kind:r,systemChain:i}),(0,a.jsx)("h2",{children:(0,a.jsx)(g.Z,{label:u("Account balance:"),value:h})}),(0,a.jsx)(l.zx.Group,{children:(0,a.jsx)(l.cA,{accountId:e,icon:"paper-plane",isDisabled:!y,label:u("I agree"),onSuccess:o,params:[y],tx:m.tx.claims.attest})})]})}):(0,a.jsx)(l.Zb,{isError:!0,children:(0,a.jsxs)(O,{className:s,children:[u("We found a pre-claim with this Polkadot address. However, attesting requires signing with this account. To continue with attesting, please add this account as an owned account first."),(0,a.jsx)("h2",{children:(0,a.jsx)(g.Z,{label:u("Account balance:"),value:h})})]})})}));var B=t(15153);const $=l.zo.div`
  font-size: var(--font-size-h3);
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-height: 8rem;
  align-items: center;
  margin: 0 1rem;

  .ui--AddressMini-address {
    max-width: 20rem;
  }
`,L=n.memo((function({className:e}){const{t:s}=f(),t=(0,B.Z)();return t.length?(0,a.jsx)(l.Zb,{isError:!0,children:(0,a.jsxs)($,{className:e,children:[t.length>1?s("You need to sign an attestation for the following accounts:"):s("You need to sign an attestation for the following account:"),t.map((e=>(0,a.jsx)(l.ax,{value:e},e)))]})}):null}));var H;!function(e){e[e.Account=0]="Account",e[e.ETHAddress=1]="ETHAddress",e[e.Sign=2]="Sign",e[e.Claim=3]="Claim"}(H||(H={}));const _="PRECLAIMS_LOADING",Z=l.zo.pre`
  cursor: copy;
  font: var(--font-mono);
  border: 1px dashed #c2c2c2;
  background: #f2f2f2;
  padding: 1rem;
  width: 100%;
  margin: 1rem 0;
  white-space: normal;
  word-break: break-all;
`,W=l.zo.textarea`
  font: var(--font-mono);
  padding: 1rem;
  border: 1px solid var(--border-input);
  border-radius: 0.25rem;
  margin: 1rem 0;
  resize: none;
  width: 100%;

  &::placeholder {
    color: rgba(0, 0, 0, 0.5);
  }

  &::-ms-input-placeholder {
    color: rgba(0, 0, 0, 0.5);
  }

  &:-ms-input-placeholder {
    color: rgba(0, 0, 0, 0.5);
  }
`,U={transform:e=>e.unwrapOr(null)},J=n.memo((function({basePath:e}){const[s,t]=(0,n.useState)(!1),[o,x]=(0,n.useState)(null),[g,b]=(0,n.useState)(null),[j,v]=(0,n.useState)(H.Account),[C,I]=(0,n.useState)(null),{api:A,systemChain:P}=(0,d.h)(),{t:T}=f(),[D,V]=(0,n.useState)(_),R=!!D&&D!==_,O=(0,n.useRef)([{isRoot:!0,name:"create",text:T("Claim tokens")}]);(0,n.useEffect)((()=>{if(C){if(v(H.Account),x(null),V(_),!A.query.claims||!A.query.claims.preclaims)return V(null);A.query.claims.preclaims(C).then((e=>{const s=e.unwrapOr(null)?.toString();x(s),V(s)})).catch((e=>{console.error(e),V(null)}))}}),[C,A.query.claims,A.query.claims.preclaims]);const B=!A.tx.claims.claimAttest;(0,n.useEffect)((()=>{s&&setTimeout((()=>{t(!1)}),1e3)}),[s]);const $=(0,n.useCallback)((()=>{v(H.Account)}),[]),J=(0,n.useCallback)((()=>{v(H.Sign)}),[]),G=(0,n.useCallback)((()=>{v(H.Claim)}),[]),Q=(0,n.useCallback)((()=>{R?G():o||B?J():v(H.ETHAddress)}),[o,G,J,R,B]),Y=(0,n.useCallback)((e=>{const{value:s}=e.target,{ethereumAddress:t,signature:a}=function(e){try{const{msg:s,sig:t}=JSON.parse(e||"{}");if(!s||!t)throw new Error("Invalid signature object");const a=function(e){const s=(0,N.G)(e);(0,k.hu)(65===s.length,`Invalid signature length, expected 65 found ${s.length}`);let t=s[64];t<27&&(t+=27);const a=t-27;return(0,k.hu)(0===a||1===a,"Invalid signature v value"),{recovery:a,signature:(0,w.Y)(s.slice(0,64))}}(t);return{error:null,ethereumAddress:y.default.createType("EthereumAddress",E(s,a)),signature:y.default.createType("EcdsaSignature",(0,S.e)(a.signature,new Uint8Array([a.recovery])))}}catch(e){return console.error(e),{error:e,ethereumAddress:null,signature:null}}}(s);x(t?.toString()),b(a)}),[]),K=(0,n.useCallback)((e=>{x(e.trim())}),[]),X=(0,n.useCallback)((()=>{t(!0)}),[]),ee=(0,u.W7)(!R&&!B&&!!o&&A.query.claims.signing,[o],U),se=M(P,ee)?.sentence||"",te=(0,m.z)(A.consts.claims.prefix.toU8a(!0)),ae=C?`${te}${(0,h.c)((0,p.m)(C),-1,!1)}${se}`:"";return(0,a.jsxs)("main",{children:[(0,a.jsx)(l.mQ,{basePath:e,items:O.current}),!B&&(0,a.jsx)(L,{}),(0,a.jsx)("h1",{children:(0,a.jsxs)(i.cC,{children:["Claim your ",(0,a.jsx)("em",{children:c.k.abbr})," tokens"]})}),(0,a.jsxs)(l.P0,{children:[(0,a.jsxs)(l.P0.Column,{children:[(0,a.jsxs)(l.Zb,{withBottomMargin:!0,children:[(0,a.jsx)("h2",{children:T("1. Select your {{chain}} account",{replace:{chain:P}})}),(0,a.jsx)(l.rp,{defaultValue:C,label:T("claim to account"),onChange:I,type:"all"}),j===H.Account&&(0,a.jsx)(l.zx.Group,{children:(0,a.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:D===_,label:T(D===_?"Loading":"Continue"),onClick:Q})})]}),j>=H.ETHAddress&&!R&&!B&&(0,a.jsxs)(l.Zb,{withBottomMargin:!0,children:[(0,a.jsx)("h2",{children:T("2. Enter the ETH address from the sale.")}),(0,a.jsx)(l.II,{autoFocus:!0,className:"full",label:T("Pre-sale ethereum address"),onChange:K,value:o||""}),j===H.ETHAddress&&(0,a.jsx)(l.zx.Group,{children:(0,a.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:!o,label:T("Continue"),onClick:J})})]}),j>=H.Sign&&!R&&(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)("h2",{children:T("{{step}}. Sign with your ETH address",{replace:{step:B?"2":"3"}})}),!B&&(0,a.jsx)(q,{kind:ee,systemChain:P}),(0,a.jsx)("div",{children:T("Copy the following string and sign it with the Ethereum account you used during the pre-sale in the wallet of your choice, using the string as the payload, and then paste the transaction signature object below:")}),(0,a.jsx)(r(),{onCopy:X,text:ae,children:(0,a.jsx)(Z,{"data-for":"tx-payload","data-tip":!0,children:ae})}),(0,a.jsx)(l.u,{place:"right",text:T(s?"copied":"click to copy"),trigger:"tx-payload"}),(0,a.jsx)("div",{children:T("Paste the signed message into the field below. The placeholder text is there as a hint to what the message should look like:")}),(0,a.jsx)(W,{onChange:Y,placeholder:`{\n  "address": "0x ...",\n  "msg": "${te}:...",\n  "sig": "0x ...",\n  "version": "2"\n}`,rows:10}),j===H.Sign&&(0,a.jsx)(l.zx.Group,{children:(0,a.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:!C||!g,label:T("Confirm claim"),onClick:G})})]})]}),(0,a.jsx)(l.P0.Column,{children:C&&j>=H.Claim&&(R?(0,a.jsx)(z,{accountId:C,ethereumAddress:o,onSuccess:$,statementKind:ee,systemChain:P}):(0,a.jsx)(F,{accountId:C,ethereumAddress:o,ethereumSignature:g,isOldClaimProcess:B,onSuccess:$,statementKind:ee}))})]})]})}))},73352:(e,s,t)=>{t.d(s,{Z:()=>o});var a=t(11677),n=t(15153);const o=(0,a.e)("useCounter",(function(){return(0,n.Z)().length}))},15153:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(2784),n=t(34814),o=t(90778),r=t(74065),i=t(9118);const l=(0,t(11677).e)("usePolkadotPreclaims",(function(){const{allAccounts:e}=(0,n.x)(),{api:s}=(0,o.h)(),t=(0,r.X)(),[l,c]=(0,a.useState)([]),d=(0,i.W7)(s.query.claims?.preclaims?.multi,[e],{transform:s=>s.map(((s,t)=>[e[t],s])).filter((([,e])=>e.isSome)).map((([e,s])=>[e,s.unwrap()]))});return(0,a.useEffect)((()=>{d&&s.queryMulti(d.reduce(((e,[,t])=>e.concat([[s.query.claims.claims,t],[s.query.claims.vesting,t]])),[]),(e=>{t.current&&c(d.filter(((s,t)=>e[2*t].isSome||e[2*t+1].isSome)).map((([e])=>e)))})).catch(console.error)}),[s,e,t,d]),l}))},2799:(e,s,t)=>{t.d(s,{Z:()=>y});var a=t(52322),n=t(2784),o=t(24732),r=t(75387),i=t(36609),l=t(14681);const c=n.memo((function({className:e,info:{accountId:s,deposit:t,isInvulnerable:r,lastBlock:c},lastBlock:d}){const u=(0,n.useMemo)((()=>c?(0,l.u)(c):d),[c,d]);return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)("td",{className:"badge number",children:r&&(0,a.jsx)(o.Ct,{color:"green",icon:"shield"})}),(0,a.jsx)("td",{className:"address all",children:(0,a.jsx)(o.N,{value:s})}),(0,a.jsx)(o.iA.Column.Balance,{value:t}),(0,a.jsx)("td",{className:"number",children:(0,a.jsx)(i.Z,{params:s})}),(0,a.jsx)("td",{className:"number",children:u})]})}));var d=t(90778),u=t(9118),m=t(61349);function h(){return(0,m.$G)("app-collator")}const p=n.memo((function({className:e}){const{t:s}=h(),{api:t}=(0,d.h)(),n=(0,u.W7)(t.query.collatorSelection.desiredCandidates);return(0,a.jsx)(o.Ty,{className:e,children:(0,a.jsx)("section",{children:n&&(0,a.jsx)(o.Jy,{label:s("desired"),children:(0,l.u)(n)})})})}));var x=t(11677);const g={transform:e=>e.map((e=>({accountId:e.toString(),isInvulnerable:!0})))},b={transform:e=>Array.isArray(e)?e.map((({deposit:e,who:s})=>({accountId:s.toString(),deposit:e,isInvulnerable:!1}))):e.strings.map((e=>({accountId:e,isInvulnerable:!1})))},f={transform:([[e],s])=>e.reduce(((e,t,a)=>({...e,[t]:s[a]})),{}),withParamsTransform:!0},j=(0,x.e)("useCollatorImpl",(function(){const{api:e}=(0,d.h)(),[s,t]=(0,n.useState)(),a=(0,n.useMemo)((()=>s&&s.map((({accountId:e})=>e))),[s]),o=(0,u.W7)(e.query.collatorSelection.invulnerables,[],g),r=(0,u.W7)(e.query.collatorSelection.candidates,[],b),i=(0,u.W7)(a&&e.query.collatorSelection.lastAuthoredBlock?.multi,[a],f);return(0,n.useEffect)((()=>o&&r&&t((()=>[...o,...r]))),[r,o]),(0,n.useEffect)((()=>i&&t((e=>e&&function(e,s){let t=!1;const a=e.map((e=>!s[e.accountId]||e.lastBlock&&s[e.accountId].eq(e.lastBlock)?e:(t=!0,{...e,lastBlock:s[e.accountId]})));return t?a:e}(e,i)))),[i]),s})),v=n.memo((function({className:e}){const{t:s}=h(),t=j(),{byAuthor:i}=(0,r.E)(),l=(0,n.useRef)([[s("collators"),"start",2],[s("deposit"),"number"],[s("balance"),"number"],[s("last #"),"number"]]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(p,{}),(0,a.jsx)(o.iA,{empty:t&&s("No running collators"),header:l.current,children:t&&t.map((e=>(0,a.jsx)(c,{info:e,lastBlock:i[e.accountId]},e.accountId)))})]})})),y=n.memo((function({basePath:e,className:s}){const{t}=h(),r=(0,n.useRef)([{isRoot:!0,name:"index",text:t("Overview")}]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(o.mQ,{basePath:e,items:r.current}),(0,a.jsx)(v,{})]})}))},22516:(e,s,t)=>{t.d(s,{Z:()=>He});var a=t(52322),n=t(2784),o=t(61349);function r(){return(0,o.$G)("app-contracts")}(0,o.Zh)(["app-contracts"]);var i=t(24732),l=t(38894),c=t(10161),d=t.n(c),u=t(23729),m=t.n(u),h=t(8257),p=t(57139),x=t(54371);const g="code:";class b extends(d()){#e={};get hasCode(){return 0!==Object.keys(this.#e).length}getAllCode(){return Object.values(this.#e)}getCode(e){return this.#e[e]}saveCode(e,s){const t=((0,x.H)(e)?p.api.registry.createType("Hash",e):e).toHex(),a=this.getCode(t),n={...a?a.json:{},...s,codeHash:t,genesisHash:p.api.genesisHash.toHex(),whenCreated:a?.json.whenCreated||Date.now()},o=`${g}${n.codeHash}`;m().set(o,n),this.addCode(o,n)}forgetCode(e){this.removeCode(`${g}${e}`,e)}loadAll(e){try{const s=p.api.genesisHash.toHex();m().each(((e,t)=>{e&&e.genesisHash===s&&t.startsWith(g)&&this.addCode(t,e)})),e&&e()}catch(e){console.error("Unable to load code",e)}}addCode(e,s){try{this.#e[s.codeHash]={contractAbi:s.abi?new h.P(s.abi,p.api.registry.getChainProperties()):void 0,json:s},this.emit("new-code")}catch(t){console.error(t),this.removeCode(e,s.codeHash)}}removeCode(e,s){try{delete this.#e[s],m().remove(e),this.emit("removed-code")}catch(e){console.error(e)}}}const f=new b;var j=t(90778),v=t(9118),y=t(16613);const C="<unknown>",w=(0,i.zo)(y.Z)`
  .ui--CodeRow-icon {
    margin-right: -0.5em;
    background: #eee;
    border-radius: 50%;
    color: #666;
    width: 26px;
    height: 26px;
    display: flex;
    justify-content: center;
    align-items: center;
  }
`,N=n.memo((function({buttons:e,children:s,className:t,code:{json:o},isInline:r,withTags:l}){const[c,d]=(0,n.useState)(o.name||C),[u,m]=(0,n.useState)(o.tags||[]),[h,p]=(0,n.useState)(o.codeHash||"0x");(0,n.useEffect)((()=>{d(o.name||C),m(o.tags||[]),p(o.codeHash||"0x")}),[o]);const x=(0,n.useCallback)((()=>{c.trim()&&h&&f.saveCode(h,{name:c})}),[h,c]),g=(0,n.useCallback)((()=>{h&&f.saveCode(h,{tags:u})}),[h,u]);return(0,a.jsx)(w,{buttons:e,className:t,icon:(0,a.jsx)("div",{className:"ui--CodeRow-icon",children:(0,a.jsx)(i.JO,{icon:"code"})}),isInline:r,name:c,onChangeName:d,onChangeTags:m,onSaveName:x,onSaveTags:g,tags:l?u:void 0,children:s})}));var k=t(14681),S=t(83488),I=t(45469);const A=i.zo.div`
  font: var(--font-mono);
  font-weight: var(--font-weight-normal);
  flex-grow: 1;

  .ui--MessageSignature-mutates {
    color: #ff8600;
    margin-left: 0.5rem;
    opacity: var(--opacity-light);
  }

  .ui--MessageSignature-name {
    color: #2f8ddb;
    font-weight: var(--font-weight-normal);
  }

  .ui--MessageSignature-type {
    color: #21a2b2;
  }

  .ui--MessageSignature-returnType {
    color: #ff8600;
  }
`,E=n.memo((function({className:e,message:{args:s,isConstructor:t,isMutating:o,method:l,returnType:c},params:d=[],withTooltip:u=!1}){const{t:m}=r(),{api:h}=(0,j.h)();return(0,a.jsxs)(A,{className:e,children:[(0,a.jsx)("span",{className:"ui--MessageSignature-name",children:l})," ","(",s.map((({name:e,type:t},o)=>{return(0,a.jsxs)(n.Fragment,{children:[e,":"," ",(0,a.jsx)("span",{className:"ui--MessageSignature-type",children:d&&d[o]?(0,a.jsx)("b",{children:(r=d[o].toString(),r.length>20?`${r.substring(0,10)}…${r.substring(r.length-10)}`:r)}):(0,I.RH)(h.registry,t)}),o<s.length-1&&", "]},`${e}-args-${o}`);var r})),")",!t&&c&&(0,a.jsxs)(a.Fragment,{children:[":"," ",(0,a.jsx)("span",{className:"ui--MessageSignature-returnType",children:(0,I.RH)(h.registry,c)})]}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.JO,{className:"ui--MessageSignature-mutates",icon:"database",tooltip:`mutates-${l}`}),u&&(0,a.jsx)(i.u,{text:m("Mutates contract state"),trigger:`mutates-${l}`})]})]})}));function M(e){let s=!1;return e.map((e=>e.trim())).filter((e=>e)).filter(((e,t)=>!(s||(t||e.startsWith("#"))&&(s=!0,1))))}const P=i.zo.div`
  align-items: center;
  border-radius: 0.25rem;
  display: flex;
  padding: 0.25rem 0.75rem 0.25rem 0;

  &.disabled {
    opacity: 1 !important;
    background: #eee !important;
    color: #555 !important;
  }

  .info {
    flex: 1 1;
    margin-left: 1.5rem;

    .docs {
      font-size: var(--font-size-small);
      font-weight: var(--font-weight-normal);
    }
  }

  .result {
    min-width: 15rem;
  }

  &+& {
    margin-top: 0.5rem;
  }
`,T=n.memo((function({className:e="",index:s,lastResult:t,message:o,onSelect:l}){const{t:c}=r(),d=(0,n.useCallback)((()=>l&&l(s)),[s,l]);return(0,a.jsxs)(P,{className:`${e} ${l?"":"exempt-hover"} ${o.isConstructor?"constructor":""}`,children:[l&&(o.isConstructor?(0,a.jsx)(i.zx,{className:"accessory",icon:"upload",label:c("deploy"),onClick:d}):(0,a.jsx)(i.zx,{className:"accessory",icon:"play",isDisabled:!o.isMutating&&!o.args.length&&t?.result.isOk,label:o.isMutating?c("exec"):c("read"),onClick:d})),(0,a.jsxs)("div",{className:"info",children:[(0,a.jsx)(E,{asConstructor:o.isConstructor,message:o,withTooltip:!0}),(0,a.jsx)("div",{className:"docs",children:o.docs.length?M(o.docs).map(((e,s)=>(0,a.jsx)("div",{children:e},`${o.identifier}-docs-${s}`))):(0,a.jsxs)("i",{children:[" ",c("No documentation provided")," "]})})]}),t&&t.result.isOk&&t.output&&(0,a.jsx)(i.r_,{className:"result",isFull:!0,label:c("current value"),children:(0,S.Z)("Text",t.output)})]},`${o.identifier}-${s}`)})),D="0x".padEnd(66,"0");function F(e){return e.map(((e,s)=>[e,s])).sort(((e,s)=>e[0].identifier.localeCompare(s[0].identifier))).sort(((e,s)=>e[0].isMutating===s[0].isMutating?0:e[0].isMutating?-1:1))}const V=i.zo.div`
  padding-bottom: 0.75rem !important;

  &.isLabelled {
    background: var(--bg-input);
    box-sizing: border-box;
    border: 1px solid var(--border-input);
    border-radius: .28571429rem;
    padding: 1rem 1rem 0.5rem;
    width: 100%;
  }
`,R=n.memo((function({className:e="",contract:s,contractAbi:{constructors:t,info:{source:o},messages:l},isLabelled:c,isWatching:d,onSelect:u,onSelectConstructor:m,trigger:h,withConstructors:p,withMessages:x,withWasm:g}){const{t:b}=r(),{api:f}=(0,j.h)(),y=(0,v.W7)(s&&f.query.contracts.contractInfoOf,[s?.address]),[C,w]=(0,n.useState)(!1),[N,S]=(0,n.useState)([]),I=(0,n.useCallback)((e=>{d&&w(e)}),[d]),A=(0,n.useCallback)((()=>{y&&s&&Promise.all(l.map((e=>e.isMutating||0!==e.args.length?Promise.resolve(void 0):s.query[e.method](D,{gasLimit:-1,value:0}).catch((s=>console.error(`contract.query.${e.method}:: ${s.message}`))).then((()=>{}))))).then(S).catch(console.error)}),[s,l,y]);(0,n.useEffect)((()=>{(C||h)&&y&&s&&A()}),[A,s,C,y,h]);const E=(0,n.useCallback)(((e,s)=>{}),[]),M=(0,n.useCallback)((e=>u&&u(e,E)),[E,u]);return(0,a.jsxs)(V,{className:`${e} ui--Messages ${c?"isLabelled":""}`,children:[p&&(0,a.jsx)(i.xH,{summary:b("Constructors ({{count}})",{replace:{count:t.length}}),children:F(t).map((([e,s])=>(0,a.jsx)(T,{index:s,message:e,onSelect:m},s)))}),x&&(0,a.jsx)(i.xH,{onClick:I,summary:b("Messages ({{count}})",{replace:{count:l.length}}),children:F(l).map((([e,s])=>(0,a.jsx)(T,{index:s,lastResult:N[s],message:e,onSelect:M},s)))}),g&&0!==o.wasm.length&&(0,a.jsx)("div",{children:b("{{size}} WASM bytes",{replace:{size:(0,k.u)(o.wasm.length)}})})]})}));var q=t(11677),O=t(56623);function z(e,s){return{abi:e[0]||null,abiName:null,contractAbi:e[1]||null,errorText:null,isAbiError:!1,isAbiSupplied:!!e[1],isAbiValid:!s||!!e[1]}}const B={abi:null,abiName:null,contractAbi:null,errorText:null,isAbiError:!1,isAbiSupplied:!1,isAbiValid:!1},$=(0,q.e)("useAbi",(function(e=[null,null],s=null,t=!1){const[a,o]=(0,n.useState)((()=>z(e,t)));return(0,n.useEffect)((()=>o((s=>e[0]&&s.abi!==e[0]?z(e,t):s))),[e,t]),{...a,onChangeAbi:(0,n.useCallback)(((e,t)=>{const a=(0,O.z)(e);try{o({abi:a,abiName:t.replace(".contract","").replace(".json","").replace("_"," "),contractAbi:new h.P(a,p.api.registry.getChainProperties()),errorText:null,isAbiError:!1,isAbiSupplied:!0,isAbiValid:!0}),s&&f.saveCode(s,{abi:a})}catch(e){console.error(e),o({...B,errorText:e.message})}}),[s]),onRemoveAbi:(0,n.useCallback)((()=>{o(B),s&&f.saveCode(s,{abi:null})}),[s])}})),L=i.zo.tr`
  .codeHash {
    div {
      display: inline;

      &:first-child {
        font-family: monospace;
        margin-right: 0.5rem;
      }
    }
  }
`,H=n.memo((function({className:e,code:s,onShowDeploy:t}){const{t:o}=r(),{api:c}=(0,j.h)(),d=(0,v.W7)(c.query.contracts.codeStorage,[s.json.codeHash]),[u,m]=(0,l.O)(),{contractAbi:h}=$([s.json.abi,s.contractAbi],s.json.codeHash,!0),p=(0,n.useCallback)((()=>t(s.json.codeHash,0)),[s,t]),x=(0,n.useCallback)((e=>{t&&t(s.json.codeHash,e||0)}),[s,t]),g=(0,n.useCallback)((()=>{try{f.forgetCode(s.json.codeHash)}catch(e){console.error(e)}finally{m()}}),[s,m]);return(0,a.jsxs)(L,{className:e,children:[(0,a.jsx)("td",{className:"address top",children:(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(N,{code:s,withTags:!1}),u&&(0,a.jsx)(i.u5,{mode:"code",onClose:m,onForget:g,children:(0,a.jsxs)(N,{code:s||"",isInline:!0,children:[(0,a.jsx)("p",{children:o("You are about to remove this code from your list of available code hashes. Once completed, should you need to access it again, you will have to manually add the code hash again.")}),(0,a.jsx)("p",{children:o("This operation does not remove the uploaded code WASM and ABI from the chain, nor any deployed contracts. The forget operation only limits your access to the code on this browser.")})]})},"modal-forget-account")]})}),(0,a.jsx)("td",{className:"all top",children:h&&(0,a.jsx)(R,{contractAbi:h,onSelectConstructor:x,withConstructors:!0})}),(0,a.jsxs)("td",{className:"together codeHash",children:[(0,a.jsx)("div",{children:`${s.json.codeHash.slice(0,8)}…${s.json.codeHash.slice(-6)}`}),(0,a.jsx)(i.qi,{value:s.json.codeHash})]}),(0,a.jsx)("td",{className:"start together",children:d&&(d.isSome?o("Available"):o("Not on-chain"))}),(0,a.jsxs)("td",{className:"button",children:[(0,a.jsx)(i.zx,{icon:"trash",onClick:m}),!h&&(0,a.jsx)(i.zx,{icon:"upload",label:o("deploy"),onClick:p})]})]})})),_=n.memo((function({onShowDeploy:e}){const{t:s}=r(),t=(0,n.useRef)([[s("code hashes"),"start"],[],[],[s("status"),"start"],[]]);return(0,a.jsx)(i.iA,{empty:s("No code hashes available"),header:t.current,children:f.getAllCode().map((s=>(0,a.jsx)(H,{code:s,onShowDeploy:e},s.json.codeHash)))})}));var Z=t(17751);const W=n.memo((function({className:e,isBusy:s,isContract:t,isError:n,onChange:o,onEnter:l,value:c=""}){const{t:d}=r();return(0,a.jsx)(i.II,{className:e,isDisabled:s,isError:n,label:d(t?"contract name":"code bundle name"),onChange:o,onEnter:l,value:c})})),U=()=>{},J=n.memo((function({className:e,contractAbi:s,errorText:t,isDisabled:n,isError:o,isFull:l,isValid:c,label:d,onChange:u,onRemove:m=U,onSelectConstructor:h,withConstructors:p=!0,withLabel:x=!0,withMessages:g=!0,withWasm:b}){const{t:f}=r();return s&&c?(0,a.jsx)(i.jN,{className:e,label:d||f("contract ABI"),labelExtra:m&&(0,a.jsx)(i.JH,{icon:"trash",label:f("Remove ABI"),onClick:m}),withLabel:x,children:(0,a.jsx)(R,{contractAbi:s,isLabelled:x,onSelectConstructor:h,withConstructors:p,withMessages:g,withWasm:b})}):(0,a.jsx)("div",{className:e,children:(0,a.jsx)(i.ht,{isDisabled:n,isError:o,isFull:l,label:d||f("contract ABI"),onChange:u,placeholder:t||f("click to select or drag and drop a JSON file")})})}));var G=t(74076);const Q=n.memo((function({codeHash:e,onChange:s}){const{api:t}=(0,j.h)(),{t:o}=r(),l=(0,v.W7)((t.query.contracts||t.query.contract).codeStorage,[e]),[c,d]=(0,n.useMemo)((()=>{const t=!!e&&(0,G.vq)(e)&&66===e.length,a=!!l&&l.isSome,n=t&&a;return s(n),[t,n]}),[e,l,s]);return d||!c?null:(0,a.jsx)(i.Kd,{type:"error",children:o(c?"Unable to find on-chain WASM code for the supplied codeHash":"The codeHash is not a valid hex hash")})})),Y=n.memo((function({onClose:e}){const{t:s}=r(),[t,o]=(0,n.useState)(""),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),{abi:m,contractAbi:h,errorText:p,isAbiError:x,isAbiSupplied:g,isAbiValid:b,onChangeAbi:j,onRemoveAbi:v}=$(),y=(0,n.useCallback)((()=>{t&&d&&(f.saveCode(t,{abi:m,name:d,tags:[]}),e())}),[m,t,d,e]),C=!(0,Z.F)(d)&&d.length>0,w=l&&C&&g&&b;return(0,a.jsxs)(i.u_,{header:s("Add an existing code hash"),onClose:e,children:[(0,a.jsxs)(i.u_.Content,{children:[(0,a.jsx)(i.II,{autoFocus:!0,isError:t.length>0&&!l,label:s("code hash"),onChange:o,value:t}),(0,a.jsx)(Q,{codeHash:t,onChange:c}),(0,a.jsx)(W,{isError:!C,onChange:u,value:d||void 0}),(0,a.jsx)(J,{contractAbi:h,errorText:p,isError:x||!x,isSupplied:g,isValid:b,onChange:j,onRemove:v})]}),(0,a.jsx)(i.u_.Actions,{children:(0,a.jsx)(i.zx,{icon:"save",isDisabled:!w,label:s("Save"),onClick:y})})]})}));var K=t(75768),X=t(58800),ee=t(98551),se=t(93803),te=t(6589),ae=t(13940),ne=t(69187),oe=t(95292),re=t(6226),ie=t(11147),le=t(87418);const ce=n.memo((function({isDisabled:e,onChange:s,onEnter:t,params:o,registry:r}){const[i,l]=(0,n.useState)([]);(0,n.useEffect)((()=>{o&&l(o)}),[o]);const c=(0,n.useCallback)((e=>s(e.map((({value:e})=>e)))),[s]);return i.length?(0,a.jsx)(le.Z,{isDisabled:e,onChange:c,onEnter:t,params:i,registry:r}):null})),de=i.zo.div`
  .contracts--InputMegaGas-meter {
    text-align: right;
  }
`,ue=n.memo((function({className:e,estimatedWeight:s,isCall:t,weight:{executionTime:o,isValid:l,megaGas:c,percentage:d,setIsEmpty:u,setMegaGas:m}}){const{t:h}=r(),[p,x]=(0,n.useState)(!0),g=(0,n.useMemo)((()=>s?s.div(oe.uy).iadd(oe.If):null),[s]);(0,n.useEffect)((()=>{p&&g&&m(g)}),[g,m,p]),(0,n.useEffect)((()=>{u(p&&!!t)}),[t,u,p]);const b=!!g&&p;return(0,a.jsxs)(de,{className:e,children:[(0,a.jsx)(i.Rn,{defaultValue:g&&b?g.toString():void 0,isDisabled:b,isError:!l,isZeroable:t,label:!g||t&&p?h("max gas allowed (M)"):h("max gas allowed (M, {{estimatedMg}} estimated)",{replace:{estimatedMg:g.toString()}}),labelExtra:(s||t)&&(0,a.jsx)(i.ZD,{label:h(t?"max read gas":"use estimated gas"),onChange:x,value:p}),onChange:b?void 0:m,value:b?void 0:t&&p?oe.nw:c}),(0,a.jsxs)("div",{className:"contracts--InputMegaGas-meter",children:[h("{{executionTime}}s execution time",{replace:{executionTime:o.toFixed(3)}}),", ",h("{{percentage}}% of block weight",{replace:{percentage:d.toFixed(2)}})]})]})}));var me=t(56360),he=t(56949);const pe=(0,q.e)("useWeight",(function(){const{api:e}=(0,j.h)(),s=(0,me.n)(),[t,a]=(0,n.useState)((0,he.ZQ)(e.consts.system.blockWeights?e.consts.system.blockWeights.maxBlock:e.consts.system.maximumBlockWeight).v1Weight.div(oe.uy).div(oe.aP)),[o,r]=(0,n.useState)(!1),i=(0,n.useCallback)((s=>a(s||(0,he.ZQ)(e.consts.system.blockWeights?e.consts.system.blockWeights.maxBlock:e.consts.system.maximumBlockWeight).v1Weight.div(oe.uy).div(oe.aP))),[e]);return(0,n.useMemo)((()=>{let a=0,n=0,l=oe.nw,c=!1;return t&&(l=t.mul(oe.uy),a=l.mul(s).div((0,he.ZQ)(e.consts.system.blockWeights?e.consts.system.blockWeights.maxBlock:e.consts.system.maximumBlockWeight).v1Weight).toNumber(),n=a/s.toNumber()*100,a/=3e3,c=!t.isZero()&&n<65),{executionTime:a,isEmpty:o,isValid:o||c,megaGas:t||oe.nw,percentage:n,setIsEmpty:r,setMegaGas:i,weight:l}}),[e,s,o,t,r,i])})),xe=n.memo((function({onClose:e}){const{t:s}=r(),{api:t}=(0,j.h)(),[o,l]=(0,X.F)(),[c,d,u]=(0,ee.t)(),[[m,h],p]=(0,n.useState)([null,null]),[x,g]=(0,n.useState)(0),[b,v,y]=(0,se.Y)(oe.nw),[C,w]=(0,n.useState)([]),[[N,k],S]=(0,n.useState)([null,!1]),[I,A,M]=(0,te.n)(),{abiName:P,contractAbi:T,errorText:D,isAbiError:F,isAbiSupplied:V,isAbiValid:R,onChangeAbi:q,onRemoveAbi:O}=$(),z=pe(),B=(0,n.useMemo)((()=>R&&k&&N&&T?new K.wi(t,T,N):null),[t,T,R,k,N]),L=(0,n.useMemo)((()=>T?T.constructors.map(((e,s)=>({info:e.identifier,key:e.identifier,text:(0,a.jsx)(E,{asConstructor:!0,message:e}),value:s}))):[]),[T]);(0,n.useEffect)((()=>{g(0)}),[L]),(0,n.useEffect)((()=>{w([])}),[T,x]),(0,n.useEffect)((()=>{S(T&&(0,re.F)(T.info.source.wasm)?[T.info.source.wasm,!0]:[null,!1])}),[T]),(0,n.useEffect)((()=>{P&&M(P)}),[P,M]),(0,n.useEffect)((()=>{let e=null,s=null;try{e=B&&T?.constructors[x]?.method&&b?B.tx[T.constructors[x].method]({gasLimit:z.weight,storageDepositLimit:null,value:T?.constructors[x].isPayable?b:void 0},...C):null}catch(e){s=e.message}p((()=>[e,s]))}),[B,T,x,b,C,z]);const H=(0,n.useCallback)(((e,s)=>{S([e,(0,re.F)(e)]),M(s.replace(".wasm","").replace("_"," "))}),[M]),_=(0,n.useCallback)((e=>{e.blueprint&&f.saveCode(e.blueprint.codeHash,{abi:(0,ie.P)(e.blueprint.abi.json),name:I||"<>",tags:[]}),e.contract&&ne.Nn.saveContract(e.contract.address.toString(),{contract:{abi:(0,ie.P)(e.contract.abi.json),genesisHash:t.genesisHash.toHex()},name:I||"<>",tags:[]})}),[t,I]),U=!!o&&!(0,Z.F)(I)&&A&&k&&V&&R&&!!m&&2===c,G=F||!V;return(0,a.jsxs)(i.u_,{header:s("Upload & deploy code {{info}}",{replace:{info:`${c}/2`}}),onClose:e,children:[(0,a.jsxs)(i.u_.Content,{children:[1===c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.rp,{isInput:!1,label:s("deployment account"),labelExtra:(0,a.jsx)(ae.Z,{label:s("transferrable"),params:o}),onChange:l,type:"account",value:o}),(0,a.jsx)(J,{contractAbi:T,errorText:D,isError:G,isSupplied:V,isValid:R,label:s("json for either ABI or .contract bundle"),onChange:q,onRemove:O,withWasm:!0}),!G&&T&&(0,a.jsxs)(a.Fragment,{children:[!T.info.source.wasm.length&&(0,a.jsx)(i.ht,{isError:!k,label:s("compiled contract WASM"),onChange:H,placeholder:N&&!k&&s("The code is not recognized as being in valid WASM format")}),(0,a.jsx)(W,{isError:!A,onChange:M,value:I||void 0})]})]}),2===c&&T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Lt,{isDisabled:T.constructors.length<=1,label:s("deployment constructor"),onChange:g,options:L,value:x}),(0,a.jsx)(ce,{onChange:w,params:T.constructors[x].args,registry:T.registry}),T.constructors[x].isPayable&&(0,a.jsx)(i.H,{isError:!v,isZeroable:!0,label:s("value"),onChange:y,value:b}),(0,a.jsx)(ue,{weight:z}),h&&(0,a.jsx)(i.oy,{content:h})]})]}),(0,a.jsxs)(i.u_.Actions,{children:[1===c?(0,a.jsx)(i.zx,{icon:"step-forward",isDisabled:!B||!T,label:s("Next"),onClick:d}):(0,a.jsx)(i.zx,{icon:"step-backward",label:s("Prev"),onClick:u}),(0,a.jsx)(i.cA,{accountId:o,extrinsic:m,icon:"upload",isDisabled:!U,label:s("Deploy"),onClick:e,onSuccess:_})]})]})}));var ge=t(74065);const be={allCodes:[],codeTrigger:Date.now()},fe=(0,q.e)("useCodes",(function(){const e=(0,ge.X)(),[s,t]=(0,n.useState)(be);return(0,n.useEffect)((()=>{const s=()=>{e.current&&t({allCodes:f.getAllCode(),codeTrigger:Date.now()})};f.on("new-code",s),f.on("removed-code",s),f.loadAll(s)}),[]),s}));var je=t(17965);const ve={allContracts:[],hasContracts:!1,isContract:()=>!1},ye=(0,q.e)("useContracts",(function(){const e=(0,ge.X)(),[s,t]=(0,n.useState)(ve);return(0,n.useEffect)((()=>{const s=ne.Nn.contracts.subject.subscribe((s=>{if(e.current){const e=s?Object.keys(s):[],a=0!==e.length,n=s=>e.includes(s);t({allContracts:e,hasContracts:a,isContract:n})}}));return()=>{(0,je.Y)((()=>s.unsubscribe()))}}),[]),s})),Ce=n.memo((function({address:e,onChange:s}){const{t}=r(),{api:o}=(0,j.h)(),l=(0,v.W7)(o.query.contracts.contractInfoOf,[e]),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{try{ne.Nn.decodeAddress(e||""),d(!0)}catch(e){d(!1)}}),[e]),(0,n.useEffect)((()=>{m(!!l?.isSome)}),[l]),(0,n.useEffect)((()=>{s(c&&u)}),[c,u,s]),u||!c?null:(0,a.jsx)(i.Kd,{type:"error",children:t(c?"Unable to find deployed contract code at the specified address":"The value is not in a valid address format")})})),we=n.memo((function({onClose:e}){const{t:s}=r(),{api:t}=(0,j.h)(),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[u,m,h]=(0,te.n)("New Contract"),{abi:p,contractAbi:x,errorText:g,isAbiError:b,isAbiSupplied:f,isAbiValid:v,onChangeAbi:y,onRemoveAbi:C}=$([null,null],null,!0),w=(0,n.useCallback)((()=>{const s={action:"create"};if(o&&p&&u)try{const a={contract:{abi:p,genesisHash:t.genesisHash.toHex()},name:u,tags:[]};ne.Nn.saveContract(o,a),s.account=o,s.status=o?"success":"error",s.message="contract added",e()}catch(e){console.error(e),s.status="error",s.message=e.message}}),[p,o,t,u,e]),N=c&&m&&v;return(0,a.jsxs)(i.u_,{header:s("Add an existing contract"),onClose:e,children:[(0,a.jsx)(i.u_.Content,{children:(0,a.jsxs)(i.mV,{defaultName:u,isValid:!0,value:o||null,children:[(0,a.jsx)(i.II,{autoFocus:!0,isError:!c,label:s("contract address"),onChange:l,value:o||""}),(0,a.jsx)(Ce,{address:o,onChange:d}),(0,a.jsx)(W,{isContract:!0,isError:!m,onChange:h,value:u||void 0}),(0,a.jsx)(J,{contractAbi:x,errorText:g,isError:b||!v,isSupplied:f,isValid:v,onChange:y,onRemove:C})]})}),(0,a.jsx)(i.u_.Actions,{children:(0,a.jsx)(i.zx,{icon:"save",isDisabled:!N,label:s("Save"),onClick:w})})]})}));var Ne=t(27421),ke=t(48801),Se=t.n(ke);const Ie=i.zo.div`
  align-items: center;
  display: flex;

  .output {
    flex: 1 1;
    margin: 0.25rem 0.5rem;
  }
`,Ae=n.memo((function({className:e="",onClear:s,outcome:{from:t,message:n,output:o,params:r,result:l,when:c}}){return(0,a.jsxs)(Ie,{className:e,children:[(0,a.jsx)(i.k,{value:t}),(0,a.jsx)(i.r_,{className:"output",isError:!l.isOk,isFull:!0,label:(0,a.jsx)(E,{message:n,params:r}),labelExtra:(0,a.jsxs)("span",{className:"date-time",children:[c.toLocaleDateString()," ",c.toLocaleTimeString()]}),value:(0,S.Z)("Text",l.isOk?o:l)}),(0,a.jsx)(i.zx,{icon:"times",onClick:s})]})}));var Ee=t(11798);const Me=new(Se())(5e12).isub(oe.If),Pe=(0,i.zo)(i.u_)`
  .rpc-toggle {
    margin-top: 1rem;
    display: flex;
    justify-content: flex-end;
  }

  .clear-all {
    float: right;
  }

  .outcomes {
    margin-top: 1rem;
  }
`,Te=n.memo((function({className:e="",contract:s,messageIndex:t,onCallResult:o,onChangeMessage:c,onClose:d}){const{t:u}=r(),m=s.abi.messages[t],[h,p]=(0,X.F)(),[x,g]=(0,n.useState)(null),[b,f,j]=(0,se.Y)(oe.nw),[v,y]=(0,n.useState)([]),[C,w]=(0,n.useState)(null),[N,k]=(0,n.useState)([]),[S,I]=(0,l.O)(),A=pe(),M=(0,Ne.N)(b),P=(0,Ne.N)(N);(0,n.useEffect)((()=>{g(null),k([])}),[s,t]),(0,n.useEffect)((()=>{b&&m.isMutating&&w((()=>{try{return s.tx[m.method]({gasLimit:A.weight,storageDepositLimit:null,value:m.isPayable?b:0},...N)}catch(e){return null}}))}),[h,s,m,b,A,N]),(0,n.useEffect)((()=>{h&&m&&P&&M&&s.query[m.method](h,{gasLimit:-1,storageDepositLimit:null,value:m.isPayable?M:0},...P).then((({gasRequired:e,result:s})=>g(s.isOk?(0,he.ZQ)(e).v1Weight:null))).catch((()=>g(null)))}),[h,s,m,P,M]);const T=(0,n.useCallback)((()=>{h&&m&&b&&A&&s.query[m.method](h,{gasLimit:A.isEmpty?-1:A.weight,storageDepositLimit:null,value:m.isPayable?b:0},...N).then((e=>{y([{...e,from:h,message:m,params:N,when:new Date},...v]),o&&o(t,e)})).catch((e=>{console.error(e),o&&o(t)}))}),[h,s.query,m,t,o,v,N,b,A]),D=(0,n.useCallback)((e=>()=>y([...v.filter(((s,t)=>t!==e))])),[v]),F=!!(h&&A.isValid&&f),V=S||!m.isMutating&&!m.isPayable;return(0,a.jsxs)(Pe,{className:`${e} app--contracts-Modal`,header:u("Call a contract"),onClose:d,children:[(0,a.jsxs)(i.u_.Content,{children:[(0,a.jsx)(i.rp,{isDisabled:!0,label:u("contract to use"),type:"contract",value:s.address}),(0,a.jsx)(i.rp,{defaultValue:h,label:u("call from account"),labelExtra:(0,a.jsx)(ae.Z,{label:u("transferrable"),params:h}),onChange:p,type:"account",value:h}),null!==t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Lt,{defaultValue:t,isError:null===m,label:u("message to send"),onChange:c,options:(R=s,R?R.abi.messages.map(((e,s)=>({key:e.identifier,text:(0,a.jsx)(E,{message:e}),value:s}))):[]),value:t}),(0,a.jsx)(ce,{onChange:k,params:m?m.args:void 0,registry:s.abi.registry})]}),m.isPayable&&(0,a.jsx)(i.H,{isError:!f,isZeroable:!0,label:u("value"),onChange:j,value:b}),(0,a.jsx)(ue,{estimatedWeight:m.isMutating?x:Me,isCall:!m.isMutating,weight:A}),m.isMutating&&(0,a.jsx)(i.ZD,{className:"rpc-toggle",label:u("read contract only, no execution"),onChange:I,value:S}),v.length>0&&(0,a.jsx)(i.xH,{className:"outcomes",isOpen:!0,summary:u("Call results"),children:v.map(((e,s)=>(0,a.jsx)(Ae,{onClear:D(s),outcome:e},`outcome-${s}`)))})]}),(0,a.jsx)(i.u_.Actions,{children:V?(0,a.jsx)(i.zx,{icon:"sign-in-alt",isDisabled:!F,label:u("Read"),onClick:T}):(0,a.jsx)(i.cA,{accountId:h,extrinsic:C,icon:"sign-in-alt",isDisabled:!F||!C,label:u("Execute"),onStart:d})})]});var R}));var De=t(1346);function Fe(e){return e.unwrapOr(null)}const Ve=i.zo.tr`
  td.top a+a {
    margin-left: 0.75rem;
  }
`,Re=n.memo((function({className:e,contract:s,index:t,links:o,onCall:c}){const{t:d}=r(),{api:u}=(0,j.h)(),m=(0,v.W7)(u.query.contracts.contractInfoOf,[s.address],{transform:Fe}),[h,p]=(0,l.O)(),x=(0,n.useCallback)(((e,s)=>c(t,e,s)),[t,c]),g=(0,n.useCallback)((()=>{const e={account:s.address,action:"forget"};try{ne.Nn.forgetContract(s.address.toString()),e.status="success",e.message=d("address forgotten")}catch(s){e.status="error",e.message=s.message}p()}),[s.address,d,p]);return(0,a.jsxs)(Ve,{className:e,children:[(0,a.jsxs)("td",{className:"address top",children:[h&&(0,a.jsx)(i.u5,{address:s.address.toString(),mode:"contract",onClose:p,onForget:g},"modal-forget-contract"),(0,a.jsx)(i.ax,{value:s.address})]}),(0,a.jsx)("td",{className:"all top",children:(0,a.jsx)(R,{contract:s,contractAbi:s.abi,isWatching:!0,onSelect:x,trigger:o?.length,withMessages:!0})}),(0,a.jsx)("td",{className:"top",children:o?.map((({blockHash:e,blockNumber:s},t)=>(0,a.jsxs)("a",{href:`#/explorer/query/${e}`,children:["#",s]},`${t}-${s}`)))}),(0,a.jsx)("td",{className:"number",children:(0,a.jsx)(i.hl,{address:s.address,withBalance:!0,withBalanceToggle:!0})}),(0,a.jsx)("td",{className:"start together",children:!(0,De.o)(m)&&(m?m.type:d("Not on-chain"))}),(0,a.jsx)("td",{className:"button",children:(0,a.jsx)(i.zx,{icon:"trash",onClick:p})})]})}));const qe=n.memo((function({contracts:e}){const{t:s}=r(),{api:t}=(0,j.h)(),o=(0,v.W7)(t.derive.chain.subscribeNewBlocks),[{contractIndex:l,messageIndex:c,onCallResult:d},u]=(0,n.useState)({contractIndex:0,messageIndex:0}),[m,h]=(0,n.useState)(!1),[p,x]=(0,n.useState)({}),g=(0,n.useRef)([[s("contracts"),"start"],[void 0,void 0,3],[s("status"),"start"],[]]);(0,n.useEffect)((()=>{if(o){const s=o.block.extrinsics.filter((({method:e})=>t.tx.contracts.call.is(e))).map((({args:s})=>{const t=e.find((e=>s[0].eq(e)));return t?{blockHash:o.block.header.hash.toHex(),blockNumber:(0,k.u)(o.block.header.number),contractId:t}:null})).filter((e=>!!e));s.length&&x((e=>(s.forEach((s=>{e[s.contractId]=[s].concat(e[s.contractId]||[]).slice(0,3)})),{...e})))}}),[t,e,o]);const b=(0,n.useMemo)((()=>function(e,s=[]){return s.map((s=>function(e,s){if(s){const t=(0,Ee.oX)(s);return t?new K.vM(e,t,s):null}return null}(e,s.toString()))).filter((e=>!!e))}(t,e)),[t,e]),f=(0,n.useCallback)((()=>h((e=>!e))),[]),y=(0,n.useCallback)(((e,s,t)=>{u({contractIndex:e,messageIndex:s,onCallResult:t}),h(!0)}),[]),C=(0,n.useCallback)((e=>u((s=>({...s,messageIndex:e})))),[]),w=b[l]||null;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.iA,{empty:s("No contracts available"),header:g.current,children:b.map(((e,s)=>(0,a.jsx)(Re,{contract:e,index:s,links:p[e.address.toString()],onCall:y},e.address.toString())))}),m&&w&&(0,a.jsx)(Te,{contract:w,messageIndex:c,onCallResult:d,onChangeMessage:C,onClose:f})]})}));var Oe=t(52926);const ze=n.memo((function({codeHash:e,constructorIndex:s=0,onClose:t,setConstructorIndex:o}){const{t:l}=r(),{api:c}=(0,j.h)(),[d,u]=(0,n.useState)(null),[m,h,p]=(0,se.Y)(null),[x,g,b]=(0,se.Y)(oe.nw),[v,y]=(0,n.useState)([]),[C,w]=(0,n.useState)((()=>(0,Oe.f)())),[N,k]=(0,n.useState)(!1),S=pe();(0,n.useEffect)((()=>{y([])}),[s]);const I=(0,n.useMemo)((()=>f.getCode(e)),[e]),[A,M,P]=(0,te.n)(I&&I.json.name),{contractAbi:T,errorText:D,isAbiError:F,isAbiSupplied:V,isAbiValid:R,onChangeAbi:q,onRemoveAbi:O}=$([I&&I.json.abi,I&&I.contractAbi],e,!0),z=(0,n.useMemo)((()=>R&&e&&T?new K.b8(c,T,e):null),[c,e,T,R]),B=(0,n.useMemo)((()=>T?T.constructors.map(((e,s)=>({info:e.identifier,key:e.identifier,text:(0,a.jsx)(E,{asConstructor:!0,message:e}),value:s}))):[]),[T]);(0,n.useEffect)((()=>{x&&u((()=>{if(z&&T?.constructors[s]?.method)try{return z.tx[T.constructors[s].method]({gasLimit:S.weight,salt:N?C:null,storageDepositLimit:null,value:T?.constructors[s].isPayable?x:void 0},...v)}catch(e){return null}return null}))}),[z,T,s,x,v,C,S,N]);const L=(0,n.useCallback)((e=>{e.contract&&(ne.Nn.saveContract(e.contract.address.toString(),{contract:{abi:(0,ie.P)(e.contract.abi.json),genesisHash:c.genesisHash.toHex()},name:A,tags:[]}),t&&t())}),[c,A,t]),H=!N||C&&(!C.startsWith("0x")||(0,G.vq)(C)),_=M&&g&&S.isValid&&h&&H;return(0,a.jsxs)(i.u_,{header:l("Deploy a contract"),onClose:t,children:[(0,a.jsxs)(i.u_.Content,{children:[(0,a.jsx)(i.rp,{isInput:!1,label:l("deployment account"),labelExtra:(0,a.jsx)(ae.Z,{label:l("transferrable"),params:m}),onChange:p,type:"account",value:m}),(0,a.jsx)(W,{isContract:!0,isError:!M,onChange:P,value:A||""}),!V&&(0,a.jsx)(J,{contractAbi:T,errorText:D,isError:F,isSupplied:V,isValid:R,onChange:q,onRemove:O}),T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Lt,{isDisabled:T.constructors.length<=1,label:l("deployment constructor"),onChange:o,options:B,value:s}),(0,a.jsx)(ce,{onChange:y,params:T.constructors[s]?.args,registry:T.registry})]}),T?.constructors[s].isPayable&&(0,a.jsx)(i.H,{isError:!g,isZeroable:!0,label:l("value"),onChange:b,value:x}),(0,a.jsx)(i.II,{isDisabled:!N,label:l("unique deployment salt"),labelExtra:(0,a.jsx)(i.ZD,{label:l("use deployment salt"),onChange:k,value:N}),onChange:w,placeholder:l("0x prefixed hex, e.g. 0x1234 or ascii data"),value:N?C:l("<none>")}),(0,a.jsx)(ue,{weight:S})]}),(0,a.jsx)(i.u_.Actions,{children:(0,a.jsx)(i.cA,{accountId:m,extrinsic:d,icon:"upload",isDisabled:!_||!d,label:l("Deploy"),onClick:t,onSuccess:L,withSpinner:!0})})]})})),Be=n.memo((function({trigger:e}){const{t:s}=r(),{api:t}=(0,j.h)(),o=(0,v.W7)(t.query.contracts.accountCounter),[l,c]=(0,n.useState)(0),[d,u]=(0,n.useState)(0);return(0,n.useEffect)((()=>{o&&t.query.contracts.contractInfoOf.keys().then((e=>c(e.length))).catch(console.error)}),[t,o]),(0,n.useEffect)((()=>{t.query.contracts.codeStorage.keys().then((e=>u(e.length))).catch(console.error)}),[t,e]),(0,a.jsxs)(i.Ty,{children:[(0,a.jsx)("section",{children:(0,a.jsx)(i.Jy,{label:s("addresses"),children:(0,k.u)(o)})}),(0,a.jsxs)("section",{children:[(0,a.jsx)(i.Jy,{label:s("code hashes"),children:(0,k.u)(d)}),(0,a.jsx)(i.Jy,{label:s("contracts"),children:(0,k.u)(l)})]})]})})),$e=i.zo.div`
  .ui--Table td > article {
    background: transparent;
    border: none;
    margin: 0;
    padding: 0;
  }
`,Le=n.memo((function({className:e=""}){const{t:s}=r(),{allCodes:t,codeTrigger:o}=fe(),{allContracts:c}=ye(),[d,u]=(0,l.O)(),[m,h,p]=(0,l.O)(),[x,g]=(0,l.O)(),[b,f]=(0,l.O)(),[j,v]=(0,n.useState)(),[y,C]=(0,n.useState)(0),w=(0,n.useCallback)(((e,s)=>{v(e||(t&&t[0]?t[0].json.codeHash:void 0)),C(s),h()}),[t,h]),N=(0,n.useCallback)((()=>p(!1)),[p]);return(0,a.jsxs)($e,{className:e,children:[(0,a.jsx)(Be,{trigger:o}),(0,a.jsxs)(i.zx.Group,{children:[(0,a.jsx)(i.zx,{icon:"plus",label:s("Upload & deploy code"),onClick:f}),(0,a.jsx)(i.zx,{icon:"plus",label:s("Add an existing code hash"),onClick:g}),(0,a.jsx)(i.zx,{icon:"plus",label:s("Add an existing contract"),onClick:u})]}),(0,a.jsx)(qe,{contracts:c,updated:o}),(0,a.jsx)(_,{onShowDeploy:w,updated:o}),j&&m&&(0,a.jsx)(ze,{codeHash:j,constructorIndex:y,onClose:N,setConstructorIndex:C}),b&&(0,a.jsx)(xe,{onClose:f}),x&&(0,a.jsx)(Y,{onClose:g}),d&&(0,a.jsx)(we,{onClose:u})]})})),He=n.memo((function({basePath:e,className:s=""}){const{t}=r(),o=(0,n.useRef)([{isRoot:!0,name:"contracts",text:t("Contracts")}]);return(0,a.jsxs)("main",{className:`${s} contracts--App`,children:[(0,a.jsx)(i.mQ,{basePath:e,items:o.current}),(0,a.jsx)(Le,{})]})}))},18324:(e,s,t)=>{t.d(s,{Z:()=>Q});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(9118),c=t(70563),d=t(61349);function u(){return(0,d.$G)("app-council")}var m=t(92914),h=t(34814),p=t(87660),x=t(81190),g=t(65874),b=t(14681),f=t(38894),j=t(56949);const v=n.memo((function({hasFailed:e,hash:s,idNumber:t,proposal:o}){const{t:l}=u(),{api:c}=(0,i.h)(),[d,m]=(0,f.O)(),[h,p]=(0,n.useState)(null),{encodedCallLength:g,weight:b}=(0,j.h7)(o),v=(0,x.m)("council");return v?(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsxs)(r.u_,{header:l("Close proposal"),onClose:m,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:l("The proposal that will be affected. Once closed for the current voting round, it would need to be re-submitted to council for a subsequent voting round."),children:(0,a.jsx)(r.lV,{idNumber:t,proposal:o})}),(0,a.jsx)(r.u_.Columns,{hint:l("The council account that will apply the close for the current round."),children:(0,a.jsx)(r.rp,{label:l("close from account"),onChange:p,type:"account"})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:h,isDisabled:!e&&!g,onStart:m,params:4===c.tx[v].close.meta.args.length?e?[s,t,0,0]:[s,t,b,g]:[s,t],tx:c.tx[v].closeOperational||c.tx[v].close})})]}),(0,a.jsx)(r.zx,{icon:"times",label:l("Close"),onClick:m})]}):null})),y=n.memo((function({isAye:e,members:s,threshold:t,votes:o}){const{t:i}=u(),l=(0,n.useMemo)((()=>{const a=t.toNumber(),n=e?a:s?.length?s.length-a+1:0;return`${o.length}${n?`/${n}`:""}`}),[e,s,t,o]),c=(0,n.useCallback)((()=>o&&o.map((e=>(0,a.jsx)(r.ax,{value:e,withBalance:!1},e.toString())))),[o]);return l&&o.length?(0,a.jsx)(r.n0,{renderChildren:c,summary:i(e?"Aye {{count}}":"Nay {{count}}",{replace:{count:l}})}):null})),C=n.memo((function({hash:e,idNumber:s,isDisabled:t,members:o,prime:l,proposal:c}){const{t:d}=u(),{api:m}=(0,i.h)(),{hasAccounts:p}=(0,h.x)(),[g,b]=(0,f.O)(),[j,v]=(0,n.useState)(null),y=(0,x.m)("council");if(!p||!y)return null;const C=l?.toString()===j;return(0,a.jsxs)(a.Fragment,{children:[g&&(0,a.jsxs)(r.u_,{header:d("Vote on proposal"),onClose:b,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:d("The proposal that is being voted on. It will pass when the threshold is reached."),children:(0,a.jsx)(r.lV,{idNumber:s,proposal:c})}),(0,a.jsxs)(r.u_.Columns,{hint:d("The council account for this vote. The selection is filtered by the current members."),children:[(0,a.jsx)(r.UE,{filter:o,onChange:v}),C&&(0,a.jsx)(r.Pd,{content:d("You are voting with this collective's prime account. The vote will be the default outcome in case of any abstentions.")})]})]}),(0,a.jsxs)(r.u_.Actions,{children:[(0,a.jsx)(r.cA,{accountId:j,icon:"ban",isDisabled:t,label:d("Vote Nay"),onStart:b,params:[e,s,!1],tx:m.tx[y].vote}),(0,a.jsx)(r.cA,{accountId:j,icon:"check-to-slot",isDisabled:t,label:d("Vote Aye"),onStart:b,params:[e,s,!0],tx:m.tx[y].vote})]})]}),(0,a.jsx)(r.zx,{icon:"check-to-slot",isDisabled:t,label:d("Vote"),onClick:b})]})})),w=n.memo((function({className:e="",isMember:s,members:t,motion:{hash:o,proposal:i,votes:l},prime:c}){const{allAccounts:d}=(0,h.x)(),{hasFailed:u,isCloseable:f,isVoteable:j,remainingBlocks:w}=(0,p.I)(l,t.length,"council"),N=(0,x.m)("council"),{hasVoted:k,hasVotedAye:S}=(0,n.useMemo)((()=>{if(l){const e=d.some((e=>l.ayes.some((s=>s.eq(e))))),s=d.some((e=>l.nays.some((s=>s.eq(e)))));return{hasVoted:e||s,hasVotedAye:e,hasVotedNay:s}}return{hasVoted:!1,hasVotedAye:!1,hasVotedNay:!1}}),[d,l]);if(!l||!N)return null;const{ayes:I,end:A,index:E,nays:M,threshold:P}=l;return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)(r.iA.Column.Id,{value:E}),(0,a.jsx)(m.Z,{imageHash:o,isCollective:!0,proposal:i}),(0,a.jsx)("td",{className:"number together",children:(0,b.u)(P)}),(0,a.jsx)("td",{className:"number together",children:w&&A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{value:w}),"#",(0,b.u)(A)]})}),(0,a.jsxs)("td",{className:"expand",children:[(0,a.jsx)(y,{isAye:!0,members:t,threshold:P,votes:I}),(0,a.jsx)(y,{members:t,threshold:P,votes:M})]}),(0,a.jsxs)("td",{className:"button",children:[j&&!f&&(0,a.jsx)(C,{hash:o,idNumber:E,isDisabled:!s,members:t,prime:c,proposal:i}),f&&(0,a.jsx)(v,{hasFailed:u,hash:o,idNumber:E,proposal:i})]}),(0,a.jsx)("td",{className:"badge",children:s&&(0,a.jsx)(r.JO,{color:k?S?"green":"red":"gray",icon:"asterisk"})}),(0,a.jsx)("td",{className:"links",children:(0,a.jsx)(r.NR,{data:E,hash:o.toString(),type:"council"})})]})}));var N=t(30943),k=t(31313),S=t(95292),I=t(33661),A=t(74076);const E=n.memo((function({className:e="",isMember:s,members:t}){const{t:o}=u(),{api:l}=(0,i.h)(),[c,d]=(0,f.O)(),[m,h]=(0,n.useState)(null),[{proposal:p,proposalLength:g},b]=(0,n.useState)({proposalLength:0}),[{hash:j,isHashValid:v},y]=(0,n.useState)({isHashValid:!1}),[{imageLen:C,imageLenDefault:w,isImageLenValid:E},M]=(0,n.useState)({imageLen:S.nw,isImageLenValid:!1}),P=(0,x.m)("council"),T=(0,k.CH)(j),D=Math.min(t.length,Math.ceil((t.length||0)*(0,N.d)(l))),F=(0,n.useMemo)((()=>(0,I.m)(l.tx.preimage?.notePreimage)&&!(0,I.m)(l.tx.democracy?.notePreimage)),[l]),V=(0,n.useCallback)((e=>y({hash:e,isHashValid:(0,A.vq)(e,256)})),[]),R=(0,n.useCallback)((e=>{e&&M((s=>({imageLen:e,imageLenDefault:s.imageLenDefault,isImageLenValid:!e.isZero()})))}),[]);return(0,n.useEffect)((()=>{T?.proposalLength&&M((e=>({imageLen:e.imageLen,imageLenDefault:T.proposalLength,isImageLenValid:e.isImageLenValid})))}),[T]),(0,n.useEffect)((()=>{if(v&&j){const e=F?T&&l.tx.democracy.externalProposeMajority({Lookup:{hash:T.proposalHash,len:T.proposalLength||C}}):l.tx.democracy.externalProposeMajority(j);if(e)return b({proposal:e,proposalLength:e.encodedLength||0})}b({proposal:null,proposalLength:0})}),[l,j,F,v,C,T]),P?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!s,label:o("Propose external"),onClick:d}),c&&(0,a.jsxs)(r.u_,{className:e,header:o("Propose external (majority)"),onClose:d,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:o("The council account for the proposal. The selection is filtered by the current members."),children:(0,a.jsx)(r.rp,{filter:t,label:o("propose from account"),onChange:h,type:"account",withLabel:!0})}),(0,a.jsxs)(r.u_.Columns,{hint:o("The hash of the proposal image, either already submitted or valid for the specific call."),children:[(0,a.jsx)(r.II,{autoFocus:!0,isError:!v,label:o("preimage hash"),onChange:V,value:j}),F&&(0,a.jsx)(r.Rn,{defaultValue:w,isDisabled:!!T?.proposalLength&&!T?.proposalLength.isZero()&&v&&E,isError:!E,label:o("preimage length"),onChange:R,value:C},"inputLength")]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:m,icon:"plus",isDisabled:!D||!t.includes(m||"")||!p||F&&!E,label:o("Propose"),onStart:d,params:3===l.tx[P].propose.meta.args.length?[D,p,g]:[D,p],tx:l.tx[P].propose})})]})]}):null}));var M=t(48801),P=t.n(M);const T=n.memo((function({isMember:e,members:s}){const{t}=u(),{api:o,apiDefaultTxSudo:l}=(0,i.h)(),[c,d]=(0,f.O)(),[m,h]=(0,n.useState)(null),[{proposal:p,proposalLength:g},b]=(0,n.useState)({proposalLength:0}),[{isThresholdValid:j,threshold:v},y]=(0,n.useState)({isThresholdValid:!1}),C=(0,x.m)("council");(0,n.useEffect)((()=>{s&&y({isThresholdValid:0!==s.length,threshold:new(P())(Math.min(s.length,Math.ceil(s.length*(0,N.d)(o))))})}),[o,s]);const w=(0,n.useCallback)((e=>b({proposal:e,proposalLength:e?.encodedLength||0})),[]),k=(0,n.useCallback)((e=>y({isThresholdValid:!!e?.gtn(0),threshold:e})),[]);return C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!e,label:t("Propose motion"),onClick:d}),c&&(0,a.jsxs)(r.u_,{header:t("Propose a council motion"),onClose:d,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:t("The council account for the proposal. The selection is filtered by the current members."),children:(0,a.jsx)(r.rp,{filter:s,label:t("propose from account"),onChange:h,type:"account",withLabel:!0})}),(0,a.jsx)(r.u_.Columns,{hint:t("The desired threshold. Here set to a default of 50%+1, as applicable for general proposals."),children:(0,a.jsx)(r.Rn,{className:"medium",isError:!v||v.eqn(0)||v.gtn(s.length),label:t("threshold"),onChange:k,placeholder:t("Positive number between 1 and {{memberCount}}",{replace:{memberCount:s.length}}),value:v||S.nw})}),(0,a.jsx)(r.u_.Columns,{hint:t("The actual proposal to make, based on the selected call and parameters thereof."),children:(0,a.jsx)(r.n6,{defaultValue:l,label:t("proposal"),onChange:w})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:m,isDisabled:!p||!j,label:t("Propose"),onStart:d,params:3===o.tx[C].propose.meta.args.length?[v,p,g]:[v,p],tx:o.tx[C].propose})})]})]}):null}));var D=t(43223);const F=n.memo((function({className:e="",isMember:s,members:t}){const{t:o}=u(),{api:l}=(0,i.h)(),c=(0,D.g)(),[d,m]=(0,f.O)(),[h,p]=(0,n.useState)(null),[{proposal:g,proposalLength:b},j]=(0,n.useState)({proposal:null,proposalLength:0}),[v,y]=(0,n.useState)(0),C=(0,x.m)("council"),w=Math.ceil((t.length||0)*(0,N.FK)(l)),k=(0,n.useMemo)((()=>(c||[]).map((([e,s])=>({text:o("era {{era}}, {{count}} slashes",{replace:{count:s.length,era:e.toNumber()}}),value:e.toNumber()})))),[c,o]);return(0,n.useEffect)((()=>{const e=v&&c&&c.find((([e])=>e.eqn(v))),s=e?l.tx.staking.cancelDeferredSlash(e[0],e[1].map(((e,s)=>s))):null;j({proposal:s,proposalLength:s?.encodedLength||0})}),[l,v,c]),C&&l.tx.staking?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"sync",isDisabled:!s||!c.length,label:o("Cancel slashes"),onClick:m}),d&&(0,a.jsxs)(r.u_,{className:e,header:o("Revert pending slashes"),onClose:m,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:o("The council account for the proposal. The selection is filtered by the current members."),children:(0,a.jsx)(r.rp,{filter:t,label:o("propose from account"),onChange:p,type:"account",withLabel:!0})}),(0,a.jsx)(r.u_.Columns,{hint:o("The specific eras on which there are unapplied slashes. For each era a separate proposal is to be made."),children:k.length?(0,a.jsx)(r.Lt,{defaultValue:k[0].value,label:o("the era to cancel for"),onChange:y,options:k}):(0,a.jsx)(r.II,{isDisabled:!0,label:o("the era to cancel for"),value:o("no unapplied slashes found")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:h,icon:"sync",isDisabled:!w||!t.includes(h||"")||!g,label:o("Revert"),onStart:m,params:3===l.tx[C].propose.meta.args.length?[w,g,b]:[w,g],tx:l.tx[C].propose})})]})]}):null})),V=n.memo((function({className:e="",motions:s,prime:t}){const{t:o}=u(),{isMember:i,members:l}=(0,c.V)("council"),d=(0,n.useRef)([[o("motions"),"start",2],[o("threshold")],[o("voting end")],[o("votes"),"expand"],[],[void 0,"badge"],[]]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(T,{isMember:i,members:l}),(0,a.jsx)(E,{isMember:i,members:l}),(0,a.jsx)(F,{isMember:i,members:l})]}),(0,a.jsx)(r.iA,{empty:s&&o("No council motions"),header:d.current,children:s?.map((e=>(0,a.jsx)(w,{isMember:i,members:l,motion:e,prime:t},e.hash.toHex())))})]})}));var R=t(54383);const q=(0,t(11677).e)("useModuleElections",(function(){const{api:e}=(0,i.h)();return(0,n.useMemo)((()=>e.tx.phragmenElection?"phragmenElection":e.tx.electionsPhragmen?"electionsPhragmen":e.tx.elections?"elections":null),[e])}));var O=t(58607);const z=n.memo((function({balance:e,voters:s}){const t=(0,n.useCallback)((()=>s&&s.map((e=>(0,a.jsx)(r.ax,{value:e,withLockedVote:!0},e.toString())))),[s]);return(0,a.jsx)("tr",{className:"isExpanded isLast packedTop",children:(0,a.jsx)("td",{className:"expand all",colSpan:2,children:(0,a.jsx)(r.n0,{renderChildren:t,summary:(0,a.jsx)(O.Z,{className:e&&s?"":"--tmp",value:e})})})})})),B=n.memo((function({address:e,balance:s,className:t="",hasElections:n,isPrime:o,voters:i}){const{t:l}=u();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:`${t} isExpanded isFirst ${n?"":"isLast"}`,children:[(0,a.jsxs)("td",{className:"address all relative",children:[(0,a.jsx)(r.N,{value:e}),o&&(0,a.jsx)(r.Vp,{className:"absolute",color:"green",label:l("prime")})]}),(0,a.jsx)("td",{className:"number",children:i&&(0,b.u)(i.length)})]}),n&&(0,a.jsx)(z,{balance:s,voters:i})]})})),$=n.memo((function({allVotes:e={},electionsInfo:s,hasElections:t}){const{t:o}=u(),i=(0,n.useRef)([[o("candidates"),"start",2]]),l=(0,n.useRef)([[o("runners up"),"start",2]]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.iA,{empty:s&&o("No runners up found"),header:l.current,isSplit:!0,children:s?.runnersUp.map((([s,n])=>(0,a.jsx)(B,{address:s,balance:n,hasElections:t,voters:e[s.toString()]},s.toString())))}),(0,a.jsx)(r.iA,{empty:s&&o("No candidates found"),header:i.current,isSplit:!0,children:s?.candidates.map((s=>(0,a.jsx)(B,{address:s,hasElections:!1,voters:e[s.toString()]},s.toString())))})]})})),L=n.memo((function({allVotes:e={},className:s="",electionsInfo:t,hasElections:o,prime:i}){const{t:l}=u(),c=(0,n.useRef)([[l("members"),"start",2]]);return(0,a.jsx)(r.iA,{className:s,empty:t&&l("No members found"),header:c.current,isSplit:!0,children:t?.members.map((([s,t])=>(0,a.jsx)(B,{address:s,balance:t,hasElections:o,isPrime:i?.eq(s),voters:e[s.toString()]},s.toString())))})}));var H=t(65121);const _=n.memo((function({electionsInfo:e}){const{api:s}=(0,i.h)(),{t}=u(),[o,l]=(0,n.useState)(null),{isOpen:c,onClose:d,onOpen:m}=(0,H.d)(),h=q();return h?(0,a.jsxs)(a.Fragment,{children:[c&&(0,a.jsxs)(r.u_,{header:t("Submit your council candidacy"),onClose:d,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:t("This account will appear in the list of candidates. With enough votes in an election, it will become either a runner-up or a council member."),children:(0,a.jsx)(r.rp,{label:t("candidate account"),onChange:l,type:"account"})}),s.consts[h]&&(0,a.jsx)(r.u_.Columns,{hint:t("The bond will be reserved for the duration of your candidacy and membership."),children:(0,a.jsx)(r.H,{defaultValue:s.consts[h]?.candidacyBond,isDisabled:!0,label:t("candidacy bond")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:o,isDisabled:!e,onStart:d,params:1===s.tx[h].submitCandidacy.meta.args.length?[e?.candidates.length]:[],tx:s.tx[h].submitCandidacy})})]}),(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!e,label:t("Submit candidacy"),onClick:m})]}):null})),Z=n.memo((function({bestNumber:e,className:s="",electionsInfo:t,hasElections:n}){const{t:o}=u();return(0,a.jsxs)(r.Ty,{className:s,children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:o("seats"),children:t?(0,a.jsxs)(a.Fragment,{children:[(0,b.u)(t.members.length),t.desiredSeats&&(0,a.jsxs)(a.Fragment,{children:[" / ",(0,b.u)(t.desiredSeats)]})]}):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Jy,{label:o("runners up"),children:t?(0,a.jsxs)(a.Fragment,{children:[(0,b.u)(t.runnersUp.length),t.desiredRunnersUp&&(0,a.jsxs)(a.Fragment,{children:[" / ",(0,b.u)(t.desiredRunnersUp)]})]}):(0,a.jsx)("span",{className:"--tmp",children:"99 / 99"})}),(0,a.jsx)(r.Jy,{label:o("candidates"),children:t?(0,b.u)(t.candidateCount):(0,a.jsx)("span",{className:"--tmp",children:"99"})})]})]}),t&&t.voteCount&&(0,a.jsx)("section",{children:(0,a.jsxs)(r.Jy,{label:o("voting round"),children:["#",(0,b.u)(t.voteCount)]})}),t&&e&&t.termDuration&&t.termDuration.gt(S.nw)&&(0,a.jsx)("section",{children:(0,a.jsx)(r.Jy,{label:o("term progress"),progress:{total:t&&e?t.termDuration:S.Jo,value:t&&e?e.mod(t.termDuration):S.um,withTime:!0}})})]})})),W=n.memo((function({electionsInfo:e}){const{t:s}=u(),{api:t}=(0,i.h)(),[o,l]=(0,f.O)(),[c,d]=(0,n.useState)(null),[m,h]=(0,n.useState)([]),[p,x]=(0,n.useState)([]),[g,b]=(0,n.useState)([]),[j,v]=(0,n.useState)(S.nw),y=q();(0,n.useEffect)((()=>{if(e){const{candidates:s,members:t,runnersUp:a}=e;h(t.map((([e])=>e.toString())).concat(a.map((([e])=>e.toString()))).concat(s.map((e=>e.toString()))))}}),[e]),(0,n.useEffect)((()=>{c&&t.derive.council.votesOf(c).then((({votes:e})=>{x(e.map((e=>e.toString())).filter((e=>m.includes(e))))})).catch(console.error)}),[t,c,m]);const C=(0,n.useMemo)((()=>{const e=t.consts.elections||t.consts.phragmenElection||t.consts.electionsPhragmen;return e&&e.votingBondBase&&e.votingBondBase.add(e.votingBondFactor.muln(g.length))}),[t,g]);return y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"check-to-slot",isDisabled:0===m.length,label:s("Vote"),onClick:l}),o&&(0,a.jsxs)(r.u_,{header:s("Vote for current candidates"),onClose:l,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:s("The vote will be recorded for the selected account."),children:(0,a.jsx)(r.rp,{label:s("voting account"),onChange:d,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:s("The value associated with this vote. The amount will be locked (not available for transfer) and used in all subsequent elections."),children:(0,a.jsx)(r.xb,{accountId:c,onChange:v})}),(0,a.jsx)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:s("The votes for the members, runner-ups and candidates. These should be ordered based on your priority.")}),(0,a.jsx)("p",{children:s("In calculating the election outcome, this prioritized vote ordering will be used to determine the final score for the candidates.")})]}),children:(0,a.jsx)(r.m3,{available:m,availableLabel:s("council candidates"),defaultValue:p,maxCount:16,onChange:b,valueLabel:s("my ordered votes")})}),C&&(0,a.jsx)(r.u_.Columns,{hint:s("The amount will be reserved for the duration of your vote"),children:(0,a.jsx)(r.H,{defaultValue:C,isDisabled:!0,label:s("voting bond")})})]}),(0,a.jsxs)(r.u_.Actions,{children:[(0,a.jsx)(r.cA,{accountId:c,icon:"trash-alt",isDisabled:!p.length,label:s("Unvote all"),onStart:l,tx:t.tx[y].removeVoter}),(0,a.jsx)(r.cA,{accountId:c,isDisabled:!c||0===g.length||j.lten(0),label:s("Vote"),onStart:l,params:[g,j],tx:t.tx[y].vote})]})]})]}):null})),U={transform:e=>e.reduce(((e,[s,{votes:t}])=>(t.forEach((t=>{const a=t.toString();e[a]||(e[a]=[]),e[a].push(s)})),e)),{})},J=n.memo((function({className:e="",prime:s}){const{api:t}=(0,i.h)(),n=(0,R.C)(),o=(0,l.W7)(t.derive.elections.info),c=(0,l.W7)(t.derive.council.votes,void 0,U),d=q(),u=!!d;return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(Z,{bestNumber:n,electionsInfo:o,hasElections:!!d}),u&&(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(W,{electionsInfo:o}),(0,a.jsx)(_,{electionsInfo:o})]}),(0,a.jsx)(L,{allVotes:c,electionsInfo:o,hasElections:u,prime:s}),u&&(0,a.jsx)($,{allVotes:c,electionsInfo:o,hasElections:u})]})}));var G=t(40740);const Q=n.memo((function({basePath:e,className:s}){const{t}=u(),{api:c}=(0,i.h)(),{pathname:d}=(0,o.TH)(),m=(0,G.Z)(),h=(0,l.W7)(c.derive.council.prime),p=(0,l.W7)(c.derive.council.proposals),x=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")},{count:m,name:"motions",text:t("Motions")}]),[m,t]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,items:x}),(0,a.jsx)(o.rs,{children:(0,a.jsx)(o.AW,{path:`${e}/motions`,children:(0,a.jsx)(V,{motions:p,prime:h})})}),(0,a.jsx)(J,{className:[e,`${e}/candidates`].includes(d)?"":"--hidden",prime:h})]})}))},40740:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(34814),n=t(90778),o=t(9118),r=t(11677);const i={transform:e=>e.filter((({votes:e})=>!!e)).length},l=(0,r.e)("useCounter",(function(){const{hasAccounts:e}=(0,a.x)(),{api:s,isApiReady:t}=(0,n.h)();return(0,o.W7)(t&&e&&s.derive.council?.proposals,void 0,i)||0}))},10842:(e,s,t)=>{t.d(s,{Z:()=>g});var a=t(52322),n=t(2784),o=t(24732),r=t(90778),i=t(13940),l=t(48801),c=t.n(l),d=t(95292),u=t(54371),m=t(34323),h=t(6987);const p=(0,m.$)(""),x=(0,o.zo)(o.u_)`
  .toggleImminent {
    margin: 0.5rem 0;
    text-align: right;
  }
`,g=n.memo((function({className:e="",imageHash:s,isImminent:t=!1,onClose:l}){const{t:g}=(0,h.$)(),{api:b,apiDefaultTxSudo:f}=(0,r.h)(),[j,v]=(0,n.useState)(null),[{encodedHash:y,encodedProposal:C,storageFee:w},N]=(0,n.useState)({encodedHash:p,encodedProposal:"",storageFee:null}),[k,S]=(0,n.useState)();(0,n.useEffect)((()=>{const e=k?.method.toHex()||"",s=b.consts.democracy.preimageByteDeposit?b.consts.democracy.preimageByteDeposit.mul(e?new(c())((e.length-2)/2):d.nw):null;N({encodedHash:(0,m.$)(e),encodedProposal:e,storageFee:s})}),[b,k]);const I=(0,n.useMemo)((()=>!s||((0,u.H)(s)?s===y:s.eq(y))),[y,s]);return(0,a.jsxs)(x,{className:e,header:g("Submit preimage"),onClose:l,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:g("This account will pay the fees for the preimage, based on the size thereof."),children:(0,a.jsx)(o.rp,{label:g("send from account"),labelExtra:(0,a.jsx)(i.Z,{label:(0,a.jsx)("span",{className:"label",children:g("transferrable")}),params:j}),onChange:v,type:"account"})}),(0,a.jsxs)(o.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:g("The image (proposal) will be stored on-chain against the hash of the contents.")}),(0,a.jsx)("p",{children:g("When submitting a proposal the hash needs to be known. Proposals can be submitted with hash-only, but upon dispatch the preimage needs to be available.")})]}),children:[(0,a.jsx)(o.n6,{defaultValue:f,label:g("propose"),onChange:S}),(0,a.jsx)(o.qG,{label:g("preimage hash"),value:y,withCopy:!0})]}),!t&&w&&(0,a.jsx)(o.u_.Columns,{hint:g("The calculated storage costs based on the size and the per-bytes fee."),children:(0,a.jsx)(o.H,{defaultValue:w,isDisabled:!0,label:g("calculated storage fee")})})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:j,icon:"plus",isDisabled:!(k&&j&&I&&C),label:g("Submit preimage"),onStart:l,params:[C],tx:t?b.tx.democracy.noteImminentPreimage:b.tx.democracy.notePreimage})})]})}))},71679:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(52322),n=t(2784),o=t(24732),r=t(90778),i=t(38894),l=t(6987),c=t(10842);const d=n.memo((function({imageHash:e,isImminent:s}){const{t}=(0,l.$)(),{api:n}=(0,r.h)(),[d,u]=(0,i.O)();return n.tx.democracy.notePreimage?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.zx,{icon:"plus",label:t("Image"),onClick:u}),d&&(0,a.jsx)(c.Z,{imageHash:e,isImminent:s,onClose:u})]}):null}))},92914:(e,s,t)=>{t.d(s,{Z:()=>v});var a=t(52322),n=t(2784),o=t(24732),r=t(90778),i=t(31313),l=t(6987),c=t(9118),d=t(37245);const u=n.memo((function({className:e="",value:s}){const{t}=(0,l.$)(),{api:n}=(0,r.h)(),i=(0,c.W7)(n.derive.democracy.preimage,[s]);return i?.proposal?(0,a.jsx)(d.Z,{className:e,withBorder:!0,withPadding:!0,children:(0,a.jsx)(o.Uv,{labelHash:t("proposal hash"),value:i.proposal,withHash:!0})}):null}));var m=t(87418),h=t(6046);const p={params:[],values:[]},x={transform:e=>e.unwrapOr(null)},g=n.memo((function({className:e="",value:s}){const{t}=(0,l.$)(),{api:i}=(0,r.h)(),[d]=(0,n.useState)((()=>s.unwrap())),u=(0,c.W7)(i.query.treasury.proposals,[d],x),[{params:g,values:b},f]=(0,n.useState)(p);return(0,n.useEffect)((()=>{u&&f({params:[{name:"proposal",type:(0,h.s)("TreasuryProposal")}],values:[{isValid:!0,value:u}]})}),[u]),u?(0,a.jsx)("div",{className:e,children:(0,a.jsxs)(m.Z,{isDisabled:!0,params:g,values:b,children:[(0,a.jsx)(o.rp,{defaultValue:u.beneficiary,isDisabled:!0,label:t("beneficiary")}),(0,a.jsx)(o.H,{defaultValue:u.value,isDisabled:!0,label:t("payout")})]})}):null})),b=["externalPropose","externalProposeDefault","externalProposeMajority","fastTrack"],f=["approveProposal","rejectProposal"],j=o.zo.td`
  .shortHash {
    + div {
      margin-left: 0.5rem;
    }
  }
`,v=n.memo((function({className:e="",imageHash:s,isCollective:t,proposal:n}){const{t:c}=(0,l.$)(),{api:d}=(0,r.h)(),m=(0,i.CH)(s),h=t||d.query.democracy?.preimages?n:m?.proposal;if(!h){const t=s.toString();return(0,a.jsx)("td",{className:`${e} all hash`,children:(0,a.jsx)("div",{className:"shortHash",children:t})})}const{method:p,section:x}=h.registry.findMetaCall(h.callIndex),v="treasury"===x&&f.includes(p),y="democracy"===x&&b.includes(p);return(0,a.jsx)(j,{className:`${e} all`,children:(0,a.jsxs)(o.Uv,{labelHash:c("proposal hash"),value:h,withHash:!v&&!y,children:[y&&(0,a.jsx)(u,{value:h.args[0]}),v&&(0,a.jsx)(g,{value:h.args[0]})]})})}))},50472:(e,s,t)=>{t.d(s,{Z:()=>ie});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(38894),c=t(9118),d=t(6987),u=t(70563),m=t(30943),h=t(81190),p=t(48801),x=t.n(p),g=t(54371);const b=new(x())(600),f=new(x())(1800),j=n.memo((function({imageHash:e,members:s,threshold:t}){const{t:o}=(0,d.$)(),{api:u}=(0,i.h)(),[p,j]=(0,l.O)(),[v,y]=(0,n.useState)(null),[C,w]=(0,n.useState)(b),[N,k]=(0,n.useState)(u.consts.democracy.fastTrackVotingPeriod||f),[{proposal:S,proposalLength:I},A]=(0,n.useState)((()=>({proposalLength:0}))),[E,M]=(0,l.O)(!0),P=(0,h.m)("technicalCommittee"),T=(0,c.W7)(P&&u.query[P].proposalCount),D=(0,n.useMemo)((()=>new(x())(Math.ceil(s.length*(0,m.A_)(u,!N||u.consts.democracy.fastTrackVotingPeriod.lte(N))))),[u,s,N]),F=(0,n.useMemo)((()=>{if(!(P&&S&&T&&u.tx.utility))return null;const e=3===u.tx[P].propose.meta.args.length?u.tx[P].propose(D,S,I):u.tx[P].propose(D,S);return E&&s.length>1?u.tx.utility.batch([e,u.tx[P].vote(S.method.hash,T,!0)]):e}),[u,s,D,P,S,T,I,E]);return(0,n.useEffect)((()=>{const s=C&&!C.isZero()&&N&&!N.isZero()?u.tx.democracy.fastTrack(e,N,C):null;A({proposal:s,proposalLength:s?.length||0})}),[u,C,e,s,N]),P&&u.tx.utility?(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsxs)(r.u_,{header:o("Fast track proposal"),onClose:j,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:o("Select the committee account you wish to make the proposal with."),children:(0,a.jsx)(r.rp,{filter:s,label:o("propose from account"),onChange:y,type:"account",withLabel:!0})}),(0,a.jsx)(r.u_.Columns,{hint:o("The external proposal to send to the technical committee"),children:(0,a.jsx)(r.II,{isDisabled:!0,label:o("preimage hash"),value:(0,g.H)(e)?e:e.toHex()})}),(0,a.jsxs)(r.u_.Columns,{hint:o("The voting period and delay to apply to this proposal. The threshold is calculated from these values."),children:[(0,a.jsx)(r.Rn,{autoFocus:!0,isZeroable:!1,label:o("voting period"),onChange:k,value:N}),(0,a.jsx)(r.Rn,{isZeroable:!1,label:o("delay"),onChange:w,value:C}),(0,a.jsx)(r.Rn,{defaultValue:D,isDisabled:!0,label:o("threshold")})]}),s.length>1&&(0,a.jsx)(r.u_.Columns,{hint:o("Submit an Aye vote alongside the proposal as part of a batch"),children:(0,a.jsx)(r.ZD,{label:o("Submit Aye vote with proposal"),onChange:M,value:E})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:v,extrinsic:F,icon:"forward",isDisabled:!v,label:o("Fast track"),onStart:j})})]}),(0,a.jsx)(r.zx,{icon:"forward",isDisabled:t.isSuperMajorityApprove,label:o("Fast track"),onClick:j})]}):null}));var v=t(71679),y=t(92914);const C=n.memo((function({className:e="",value:{image:s,imageHash:t,threshold:n}}){const{isMember:o,members:i}=(0,u.V)("technicalCommittee"),[c,d]=(0,l.O)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:`${e} isExpanded isFirst ${c?"":"isLast"}`,children:[(0,a.jsx)(y.Z,{imageHash:t,proposal:s?.proposal}),(0,a.jsx)("td",{className:"address",children:s&&(0,a.jsx)(r.ax,{value:s.proposer})}),(0,a.jsx)(r.iA.Column.Balance,{value:s?.balance}),(0,a.jsx)("td",{className:"actions",children:(0,a.jsxs)(r.zx.Group,{children:[!s?.proposal&&(0,a.jsx)(v.Z,{imageHash:t}),n&&o&&(0,a.jsx)(j,{imageHash:t,members:i,threshold:n}),(0,a.jsx)(r.Vh,{expanded:c,onClick:d})]})})]}),(0,a.jsx)("tr",{className:`${e} ${c?"isExpanded isLast":"isCollapsed"}`,children:(0,a.jsx)("td",{className:"columar",colSpan:100,children:(0,a.jsx)(r.P0,{is100:!0,children:(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.NR,{data:t,type:"democracyExternal",withTitle:!0})})})})})]})})),w=n.memo((function({className:e}){const{t:s}=(0,d.$)(),{api:t}=(0,i.h)(),o=(0,c.W7)(t.derive.democracy.nextExternal),l=(0,n.useRef)([[s("external"),"start"],[s("proposer"),"address"],[s("locked")],[]]);return(0,a.jsx)(r.iA,{className:e,empty:null===o&&s("No external proposal"),header:l.current,children:o&&(0,a.jsx)(C,{value:o})})}));var N=t(10842),k=t(58607),S=t(34814);const I=n.memo((function({deposit:e,depositors:s,image:t,proposalId:o}){const{t:c}=(0,d.$)(),{hasAccounts:u}=(0,S.x)(),{api:m}=(0,i.h)(),[h,p]=(0,n.useState)(null),[x,g]=(0,l.O)();return u?(0,a.jsxs)(a.Fragment,{children:[x&&(0,a.jsxs)(r.u_,{header:c("Endorse proposal"),onClose:g,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:c("The proposal is in the queue for future referendums. One proposal from this list will move forward to voting."),children:(0,a.jsx)(r.lV,{idNumber:o,proposal:t?.proposal})}),(0,a.jsx)(r.u_.Columns,{hint:c("Endorsing a proposal that indicates your backing for the proposal. Proposals with greater interest moves up the queue for potential next referendums."),children:(0,a.jsx)(r.rp,{label:c("endorse with account"),onChange:p,type:"account",withLabel:!0})}),(0,a.jsx)(r.u_.Columns,{hint:c("The deposit will be locked for the lifetime of the proposal."),children:(0,a.jsx)(r.H,{defaultValue:e||m.consts.democracy.minimumDeposit,isDisabled:!0,label:c("deposit required")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:h,icon:"sign-in-alt",isDisabled:!h,label:c("Endorse"),onStart:g,params:2===m.tx.democracy.second.meta.args.length?[o,s.length]:[o],tx:m.tx.democracy.second})})]}),(0,a.jsx)(r.zx,{icon:"toggle-off",label:c("Endorse"),onClick:g})]}):null})),A=n.memo((function({className:e="",value:{balance:s,image:t,imageHash:o,index:i,proposer:c,seconds:u}}){const{t:m}=(0,d.$)(),[h,p]=(0,l.O)(!1),x=(0,n.useMemo)((()=>u.filter(((e,s)=>0!==s))),[u]),g=(0,n.useCallback)((()=>x.map(((e,s)=>(0,a.jsx)(r.ax,{value:e,withBalance:!1,withShrink:!0},`${s}:${e.toHex()}`)))),[x]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:`${e} isExpanded isFirst ${h?"":"isLast"}`,children:[(0,a.jsx)(r.iA.Column.Id,{value:i}),(0,a.jsx)(y.Z,{imageHash:o,proposal:t?.proposal}),(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(r.ax,{value:c})}),(0,a.jsx)("td",{className:"number together media--1200",children:(0,a.jsx)(k.Z,{value:s})}),(0,a.jsx)("td",{className:"expand",children:0!==x.length&&(0,a.jsx)(r.n0,{empty:x&&m("No endorsements"),renderChildren:g,summary:m("Endorsed ({{count}})",{replace:{count:x.length}})})}),(0,a.jsx)("td",{className:"actions",children:(0,a.jsxs)(r.zx.Group,{children:[!t?.proposal&&(0,a.jsx)(v.Z,{imageHash:o}),(0,a.jsx)(I,{deposit:s,depositors:u||[],image:t,proposalId:i}),(0,a.jsx)(r.Vh,{expanded:h,onClick:p})]})})]}),(0,a.jsxs)("tr",{className:`${e} ${h?"isExpanded isLast":"isCollapsed"}`,children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{className:"columar",colSpan:100,children:(0,a.jsx)(r.P0,{is100:!0,children:(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.NR,{data:i,type:"democracyProposal",withTitle:!0})})})})]})]})})),E=n.memo((function({className:e}){const{t:s}=(0,d.$)(),{api:t}=(0,i.h)(),o=(0,c.W7)(t.derive.democracy.proposals),l=(0,n.useRef)([[s("proposals"),"start",2],[s("proposer"),"address"],[s("locked"),"media--1200"],[void 0,void 0,2]]);return(0,a.jsx)(r.iA,{className:e,empty:o&&s("No active proposals"),header:l.current,children:o?.map((e=>(0,a.jsx)(A,{value:e},e.index.toString())))})}));var M=t(31313),P=t(13940),T=t(74076),D=t(33661);const F=n.memo((function({className:e="",onClose:s}){const{t}=(0,d.$)(),{api:o}=(0,i.h)(),[l,u]=(0,n.useState)(null),[m,h]=(0,n.useState)(),[{hash:p,isHashValid:x},g]=(0,n.useState)({isHashValid:!1}),b=(0,c.W7)(o.query.democracy.publicProps),f=(0,M.CH)(p),j=(0,n.useCallback)((e=>g({hash:e,isHashValid:(0,T.vq)(e,256)})),[]),v=m?.gte(o.consts.democracy.minimumDeposit);return(0,a.jsxs)(r.u_,{className:e,header:t("Submit proposal"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:t("The proposal will be registered from this account and the balance lock will be applied here."),children:(0,a.jsx)(r.rp,{label:t("send from account"),labelExtra:(0,a.jsx)(P.Z,{label:(0,a.jsx)("span",{className:"label",children:t("transferrable")}),params:l}),onChange:u,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:t("The hash of the preimage for the proposal as previously submitted or intended."),children:(0,a.jsx)(r.II,{autoFocus:!0,isError:!x,label:t("preimage hash"),onChange:j,value:p})}),(0,a.jsxs)(r.u_.Columns,{hint:t("The associated deposit for this proposal should be more then the minimum on-chain deposit required. It will be locked until the proposal passes."),children:[(0,a.jsx)(r.H,{defaultValue:o.consts.democracy.minimumDeposit,isError:!v,label:t("locked balance"),onChange:h}),(0,a.jsx)(r.H,{defaultValue:o.consts.democracy.minimumDeposit,isDisabled:!0,label:t("minimum deposit")})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:l,icon:"plus",isDisabled:!m||!v||!x||!l||!b||(0,D.m)(o.tx.preimage?.notePreimage)&&!(0,D.m)(o.tx.democracy?.notePreimage)&&!f,label:t("Submit proposal"),onStart:s,params:3===o.tx.democracy.propose.meta.args.length?[p,m,b?.length]:(0,D.m)(o.tx.preimage?.notePreimage)&&!(0,D.m)(o.tx.democracy?.notePreimage)?[f&&{Lookup:{hash:f.proposalHash,len:f.proposalLength}},m]:[p,m],tx:o.tx.democracy.propose})})]})}));var V=t(54383),R=t(65874),q=t(95292),O=t(14681),z=t(47538),B=t(11677),$=t(15938);const L=new(x())(-1),H=new(x())(2);function _(e,s,t,a,n,o){const r=1===o?q.If:L,i=t.add(a),l=q.If.muln(10*n).mul(i).div(q.aP);return[i,e.add(r.mul(i)),x().max(q.nw,s.add(r.mul(l)))]}function Z(e,s,{votedAye:t,votedNay:a,votedTotal:n},o,r,i){for(;;){const[l,c,d]=_(t,n,r,i,o?0:1,o?-1:1);if((0,$.Pc)(e,s,{votedAye:c,votedNay:a,votedTotal:d})!==o)return r;r=l}}function W(e,s,{votedAye:t,votedNay:a,votedTotal:n},o,r,i){for(;;){const[l,c,d]=_(a,n,r,i,o?1:0,o?1:-1);if((0,$.Pc)(e,s,{votedAye:t,votedNay:c,votedTotal:d})!==o)return r;r=l}}const U=(0,B.e)("useChangeCalc",(function(e,s,t,a){const{api:o}=(0,i.h)(),r=(0,c.W7)(o.derive.democracy.sqrtElectorate),[l,d]=(0,n.useState)({changeAye:q.nw,changeNay:q.nw});return(0,n.useEffect)((()=>{r&&d(function(e,s,t){const a=(0,$.Pc)(e,s,t);if(e.isSimpleMajority){const e=a?t.votedAye.sub(t.votedNay):t.votedNay.sub(t.votedAye);return{changeAye:t.votedNay.isZero()?q.nw:e,changeNay:t.votedAye.isZero()?q.nw:e}}let n=q.nw,o=q.nw,r=t.votedTotal.div(H);for(;!r.isZero();){n=Z(e,s,t,a,n,r),o=W(e,s,t,a,o,r);const i=r.div(H);i.isZero()&&(n=n.add(r),o=o.add(r)),r=i}return{changeAye:t.votedNay.isZero()?q.nw:a?x().min(n,t.votedAye):n,changeNay:t.votedAye.isZero()?q.nw:a?o:x().min(o,t.votedNay)}}(e,r,{votedAye:s,votedNay:t,votedTotal:a}))}),[r,e,s,t,a]),l})),J=["0.1x","1x","2x","3x","4x","5x","6x"];function G({conviction:e},s){return`${J[e.toNumber()]}${s?"/d":""} - `}const Q=n.memo((function({vote:{accountId:e,balance:s,isDelegating:t,vote:n}}){return(0,a.jsx)(r.ax,{balance:s,labelBalance:G(n,t),value:e,withBalance:!0})})),Y=[1,10,20,30,40,50,60],K=n.memo((function({className:e,count:s,isAye:t,total:o,votes:i}){const{t:l}=(0,d.$)(),c=(0,n.useMemo)((()=>i.sort(((e,s)=>{const t=e.balance.muln(Y[e.vote.conviction.toNumber()]).div(q.aP);return s.balance.muln(Y[s.vote.conviction.toNumber()]).div(q.aP).cmp(t)}))),[i]),u=(0,n.useCallback)((()=>c.map((e=>(0,a.jsx)(Q,{vote:e},e.accountId.toString())))),[c]);return(0,a.jsx)(r.n0,{className:e,empty:i&&l("No voters"),renderChildren:i.length?u:void 0,summary:(0,a.jsxs)(a.Fragment,{children:[l(t?"Aye {{count}}":"Nay {{count}}",{replace:{count:s?` (${(0,O.u)(s)})`:""}}),(0,a.jsx)("div",{children:(0,a.jsx)(k.Z,{value:o})})]})})})),X=n.memo((function({proposal:e,referendumId:s}){const{t}=(0,d.$)(),{api:o}=(0,i.h)(),{hasAccounts:c}=(0,S.x)(),[u,m]=(0,n.useState)(null),[h,p]=(0,n.useState)(),[x,g]=(0,n.useState)(1),[b,f]=(0,l.O)(),j=(0,n.useMemo)((()=>!!o.query.democracy.votingOf),[o]);if(!c)return null;const v=!!j&&!h;return(0,a.jsxs)(a.Fragment,{children:[b&&(0,a.jsxs)(r.u_,{header:t("Vote on proposal"),onClose:f,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:t("If this proposal is passed, the changes will be applied via dispatch and the deposit returned."),children:(0,a.jsx)(r.lV,{idNumber:s,proposal:e})}),(0,a.jsx)(r.u_.Columns,{hint:t("The vote will be recorded for this account. If another account delegated to this one, the delegated votes will also be counted."),children:(0,a.jsx)(r.UE,{onChange:m})}),(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:t("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,a.jsx)("p",{children:t("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]}),children:[j&&(0,a.jsx)(r.xb,{accountId:u,autoFocus:!0,onChange:p}),(0,a.jsx)(r.v,{label:t("conviction"),onChange:g,value:x,voteLockingPeriod:o.consts.democracy.voteLockingPeriod||o.consts.democracy.enactmentPeriod})]})]}),(0,a.jsxs)(r.u_.Actions,{children:[(0,a.jsx)(r.cA,{accountId:u,icon:"ban",isDisabled:v,label:t("Vote Nay"),onStart:f,params:j?[s,{Standard:{balance:h,vote:{aye:!1,conviction:x}}}]:[s,{aye:!1,conviction:x}],tx:o.tx.democracy.vote}),(0,a.jsx)(r.cA,{accountId:u,icon:"check",isDisabled:v,label:t("Vote Aye"),onStart:f,params:j?[s,{Standard:{balance:h,vote:{aye:!0,conviction:x}}}]:[s,{aye:!0,conviction:x}],tx:o.tx.democracy.vote})]})]}),(0,a.jsx)(r.zx,{icon:"check-to-slot",label:t("Vote"),onClick:f})]})}));function ee(e,s){return Math.min(100,e.muln(1e4).div(s).toNumber()/100).toFixed(2)}const se=n.memo((function({className:e="",value:{allAye:s,allNay:t,image:o,imageHash:u,index:m,isPassing:h,status:p,voteCountAye:g,voteCountNay:b,votedAye:f,votedNay:j,votedTotal:C}}){const{t:w}=(0,d.$)(),{api:N}=(0,i.h)(),{allAccounts:k}=(0,S.x)(),I=(0,V.C)(),[A,E]=(0,l.O)(!1),M=(0,c.W7)(N.query.balances?.totalIssuance),{changeAye:P,changeNay:T}=U(p.threshold,f,j,C),D=(0,n.useMemo)((()=>p.threshold.type.toString().replace("majority"," majority ")),[p]),F=f.add(j),[B,{hasVoted:$,hasVotedAye:L}]=(0,n.useMemo)((()=>{if(M){const e=s.reduce(((e,{balance:s})=>e.add(s)),new(x())(0)),a=t.reduce(((e,{balance:s})=>e.add(s)),new(x())(0)),n=s.some((({accountId:e})=>k.includes(e.toString())));return[{aye:C.isZero()?"":`${ee(e,C)}%`,nay:C.isZero()?"":`${ee(a,C)}%`,turnout:`${ee(C,M)}%`},{hasVoted:n||t.some((({accountId:e})=>k.includes(e.toString()))),hasVotedAye:n}]}return[null,{hasVoted:!1,hasVotedAye:!1}]}),[k,s,t,M,C]);if(!I||p.end.sub(I).lten(0))return null;const H=p.end.add(p.delay),_=p.end.sub(I).isub(q.If);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:`${e} isExpanded isFirst ${A?"":"isLast"}`,children:[(0,a.jsx)(r.iA.Column.Id,{value:m}),(0,a.jsx)(y.Z,{imageHash:u,proposal:o?.proposal}),(0,a.jsxs)("td",{className:"number together media--1200",children:[(0,a.jsx)(R.Z,{value:_}),w("{{blocks}} blocks",{replace:{blocks:(0,O.u)(_)}})]}),(0,a.jsxs)("td",{className:"number together media--1400",children:[(0,a.jsx)(R.Z,{value:H.sub(I)}),"#",(0,O.u)(H)]}),(0,a.jsx)("td",{className:"number together media--1400",children:B&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{children:B.turnout})})}),(0,a.jsx)("td",{className:"badge",children:(0,z.j)(h)&&(0,a.jsx)(r.Ct,{color:h?"green":"red",hover:w(h?"{{threshold}}, passing":"{{threshold}}, not passing",{replace:{threshold:D}}),icon:h?"check":"times"})}),(0,a.jsxs)("td",{className:"expand",children:[(0,a.jsx)(K,{change:P,count:g,isAye:!0,isWinning:h,total:f,votes:s}),(0,a.jsx)(K,{change:T,count:b,isAye:!1,isWinning:!h,total:j,votes:t})]}),(0,a.jsx)("td",{className:"media--1000 middle chart",children:(0,a.jsx)(r.Ex,{total:F,value:f})}),(0,a.jsx)("td",{className:"badge",children:(0,a.jsx)(r.JO,{color:$?L?"green":"red":"gray",icon:"asterisk"})}),(0,a.jsx)("td",{className:"actions",children:(0,a.jsxs)(r.zx.Group,{children:[!o?.proposal&&(0,a.jsx)(v.Z,{imageHash:u}),(0,a.jsx)(X,{proposal:o?.proposal,referendumId:m}),(0,a.jsx)(r.Vh,{expanded:A,onClick:E})]})})]}),(0,a.jsxs)("tr",{className:`${e} ${A?"isExpanded isLast":"isCollapsed"}`,children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{className:"columar",colSpan:100,children:(0,a.jsx)(r.P0,{is100:!0,children:(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.NR,{data:m,type:"democracyReferendum",withTitle:!0})})})})]})]})})),te=n.memo((function({className:e="",referendums:s}){const{t}=(0,d.$)(),o=(0,n.useRef)([[t("referenda"),"start",2],[t("remaining"),"media--1200"],[t("activate"),"media--1400"],[t("turnout"),"media--1400"],[void 0,"badge"],[t("votes"),"expand"],[void 0,"media--1000"],[void 0,void 0,2]]);return(0,a.jsx)(r.iA,{className:e,empty:s&&t("No active referendums"),header:o.current,children:s?.map((e=>(0,a.jsx)(se,{value:e},e.index.toString())))})}));var ae=t(54890);const ne={defaultValue:[void 0,void 0]},oe=n.memo((function({referendumCount:e}){const{t:s}=(0,d.$)(),{api:t}=(0,i.h)(),n=(0,c.W7)(t.derive.democracy.proposals),o=(0,V.C)(),[l,u]=(0,ae.L)([t.query.democracy.publicPropCount,t.query.democracy.referendumCount],ne);return(0,a.jsxs)(r.Ty,{children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:s("proposals"),children:n?(0,O.u)(n.length):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(r.Jy,{label:s("total"),children:l?(0,O.u)(l):(0,a.jsx)("span",{className:"--tmp",children:"99"})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:s("referenda"),children:void 0!==e?(0,O.u)(e):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(r.Jy,{label:s("total"),children:u?(0,O.u)(u):(0,a.jsx)("span",{className:"--tmp",children:"99"})})]}),t.consts.democracy.launchPeriod&&(0,a.jsx)("section",{className:"media--1100",children:(0,a.jsx)(r.Jy,{label:s("launch period"),progress:{isBlurred:!o,total:t.consts.democracy.launchPeriod,value:o?o.mod(t.consts.democracy.launchPeriod).iadd(q.If):t.consts.democracy.launchPeriod.mul(q.um).div(q.Jo),withTime:!0}})})]})})),re=n.memo((function({className:e}){const{t:s}=(0,d.$)(),{api:t}=(0,i.h)(),[n,o]=(0,l.O)(),[u,m]=(0,l.O)(),h=(0,c.W7)(t.derive.democracy.referendums);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(oe,{referendumCount:h?.length}),(0,a.jsxs)(r.zx.Group,{children:[t.tx.democracy.notePreimage&&(0,a.jsx)(r.zx,{icon:"plus",label:s("Submit preimage"),onClick:o}),(0,a.jsx)(r.zx,{icon:"plus",label:s("Submit proposal"),onClick:m})]}),n&&(0,a.jsx)(N.Z,{onClose:o}),u&&(0,a.jsx)(F,{onClose:m}),(0,a.jsx)(te,{referendums:h}),(0,a.jsx)(E,{}),(0,a.jsx)(w,{})]})})),ie=n.memo((function({basePath:e}){const{t:s}=(0,d.$)(),t=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:s("Overview")}]),[s]);return(0,a.jsxs)("main",{className:"democracy--App",children:[(0,a.jsx)(r.mQ,{basePath:e,items:t}),(0,a.jsx)(o.rs,{children:(0,a.jsx)(o.AW,{children:(0,a.jsx)(re,{})})})]})}))},6987:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-democracy")}},61491:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(2784),n=t(34814),o=t(90778),r=t(74065),i=t(9118);const l=(0,t(11677).e)("useCounter",(function(){const{hasAccounts:e}=(0,n.x)(),{api:s,isApiReady:t}=(0,o.h)(),l=(0,r.X)(),c=(0,i.W7)(t&&e&&s.derive.democracy?.proposals),d=(0,i.W7)(t&&e&&s.derive.democracy?.referendumsActive),[u,m]=(0,a.useState)(0);return(0,a.useEffect)((()=>{l.current&&m((c?.length||0)+(d?.length||0))}),[l,c,d]),u}))},54705:(e,s,t)=>{t.d(s,{Z:()=>m});var a=t(52322),n=t(2784),o=t(24732),r=t(90778),i=t(9118),l=t(53598),c=t(95292),d=t(14681),u=t(88057);const m=n.memo((function({className:e,withEra:s=!0,withSession:t=!0}){const{t:n}=(0,u.$)(),{api:m}=(0,r.h)(),h=(0,i.W7)(m.derive.session?.progress),p=(0,i.W7)(m.query.staking?.forceEra),x=n("era"),g=m.query.babe?n("epoch"):n("session"),b=h?.activeEraStart.unwrapOr(null);return(0,a.jsx)(a.Fragment,{children:m.derive.session&&(0,a.jsxs)(a.Fragment,{children:[t&&(m.query.babe?(0,a.jsx)(o.Jy,{className:e,label:g,progress:{isBlurred:!h,total:h?.sessionLength||c.Jo,value:h?.sessionProgress||c.um,withTime:!0}}):(0,a.jsxs)(o.Jy,{label:g,children:["#",h?(0,d.u)(h.currentIndex):(0,a.jsx)("span",{className:"--tmp",children:"123"}),s&&b&&(0,a.jsx)("div",{className:"isSecondary",children:" "})]})),s&&(m.query.babe?(0,a.jsx)(o.Jy,{className:e,label:x,progress:{isBlurred:!(h&&p),total:h&&p?p.isForceAlways?h.sessionLength:h.eraLength:c.Jo,value:h&&p?p.isForceAlways?h.sessionProgress:h.eraProgress:c.um,withTime:!0}}):(0,a.jsxs)(o.Jy,{className:e,label:x,children:["#",h?(0,d.u)(h.activeEra):(0,a.jsx)("span",{className:"--tmp",children:"123"}),b&&(0,a.jsxs)(l.Z,{className:(h?"":"--tmp")+" isSecondary",value:b,children:[" ",n("elapsed")]})]}))]})})}))},51406:(e,s,t)=>{t.d(s,{Z:()=>Ze});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(75387),c=t(67405),d=t(33661),u=t(47297),m=t(14681);const h={aspectRatio:6,maintainAspectRatio:!0},p=r.zo.div`
  background: var(--bg-table);
  border: 1px solid var(--border-table);
  border-radius: 0.25rem;
  margin-bottom: 1rem;
  padding: 1rem 1.5rem;
`,x=n.memo((function({className:e,colors:s,legends:t,options:n,title:o,value:{labels:i,values:l}}){return(0,a.jsx)(p,{className:e,children:(0,a.jsx)(r.kL.Line,{colors:s,labels:i,legends:t,options:n||h,title:o,values:l})})}));var g=t(88057);const b={aspectRatio:6,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0}}},f=["#00448c","#008c44","#acacac"],j=["#008c8c","#00448c","#8c4400","#acacac"],v=r.zo.div`
  .container {
    background: var(--bg-table);
    border: 1px solid var(--border-table);
    border-radius: 0.25rem;
    padding: 1rem 1.5rem;
  }

  .container+.container {
    margin-top: 1rem;
  }
`,y=n.memo((function({className:e}){const{t:s}=(0,g.$)(),t=(0,u.m)(),{bytesLegend:o,requestsLegend:i}=(0,n.useMemo)((()=>({bytesLegend:[s("sent"),s("recv"),s("average")],errorsLegend:[s("errors")],requestsLegend:[s("total"),s("requests"),s("subscriptions"),s("average")]})),[s]),{bytesChart:l,requestsChart:c}=(0,n.useMemo)((()=>function(e){const s={labels:[],values:[[],[],[]]},t={labels:[],values:[[]]},a={labels:[],values:[[],[],[],[]]},n=e.reduce(((e,{stats:{active:{requests:s,subscriptions:t}}})=>e+s+t),0);let{bytesRecv:o,bytesSent:r,errors:i}=e[0].stats.total,l=0;for(let c=1;c<e.length;c++){const{stats:{active:{requests:d,subscriptions:u},total:{bytesRecv:m,bytesSent:h,errors:p}},when:x}=e[c],g=new Date(x).toLocaleTimeString();s.labels.push(g),s.values[0].push(h-r),s.values[1].push(m-o),t.labels.push(g),t.values[0].push(p-i),a.labels.push(g),a.values[0].push(d+u),a.values[1].push(d),a.values[2].push(u),a.values[3].push(n/e.length),l+=m-o,i=p,o=m,r=h}const c=l/(e.length-1);for(let t=1;t<e.length;t++)s.values[2].push(c);return{bytesChart:s,errorsChart:t,requestsChart:a}}(t)),[t]),d=t[t.length-1],h=d&&t.length>3,p=(0,a.jsx)("span",{className:"--tmp",children:"99"}),y=(0,a.jsx)("span",{className:"--tmp",children:"1,000kB"});return(0,a.jsxs)(v,{className:e,children:[(0,a.jsxs)(r.Ty,{children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:s("sent"),children:h?(0,a.jsxs)(a.Fragment,{children:[(0,m.u)(d.stats.total.bytesSent/1024),"kB"]}):y}),(0,a.jsx)(r.Jy,{label:s("recv"),children:h?(0,a.jsxs)(a.Fragment,{children:[(0,m.u)(d.stats.total.bytesRecv/1024),"kB"]}):y})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:s("total req"),children:h?(0,a.jsx)(a.Fragment,{children:(0,m.u)(d.stats.total.requests)}):p}),(0,a.jsx)(r.Jy,{label:s("total sub"),children:h?(0,a.jsx)(a.Fragment,{children:(0,m.u)(d.stats.total.subscriptions)}):p})]})]}),(0,a.jsxs)(r.EK,{isActive:h,children:[(0,a.jsx)(x,{colors:j,legends:i,options:b,title:s("requests made"),value:c}),(0,a.jsx)(x,{colors:f,legends:o,options:b,title:s("bytes transferred"),value:l})]})]})}));var C=t(54383),w=t(74076);function N(e){return{isValid:(0,w.vq)(e,256)||/^\d+$/.test(e),value:e}}const k=(0,r.zo)(r.lm)`
  .explorer--query {
    width: 20em;
  }
`,S=n.memo((function({className:e="",value:s}){const{t}=(0,g.$)(),[{isValid:o,value:i},l]=(0,n.useState)((()=>N(s||""))),c=(0,n.useCallback)((e=>l(N(e))),[]),d=(0,n.useCallback)((()=>{o&&0!==i.length&&(window.location.hash=`/explorer/query/${i}`)}),[o,i]);return(0,a.jsx)(k,{className:`${e} ui--FilterOverlay hasOwnMaxWidth`,children:(0,a.jsx)(r.II,{className:"explorer--query",defaultValue:s,isError:!o&&0!==i.length,onChange:c,onEnter:d,placeholder:t("block hash or number to query"),withLabel:!1,children:(0,a.jsx)(r.zx,{icon:"play",onClick:d})})})}));var I=t(26643),A=t(74065),E=t(56949);const M=n.memo((function({className:e="",value:{event:s}}){const t=`${s.section}.${s.method}`;return(0,a.jsx)(r.xH,{className:e,isLeft:!0,summary:t,summaryMeta:s.meta,children:s.data.length?(0,a.jsx)(r.ju,{className:"details",eventName:t,value:s,withExpander:!0}):null})})),P=n.memo((function({className:e="",emptyLabel:s,error:t,eventClassName:o,events:i,label:l}){const{t:c}=(0,g.$)(),d=(0,n.useMemo)((()=>[[l||c("recent events"),"start"]]),[l,c]);return(0,a.jsx)(r.iA,{className:e,empty:s||c("No events available"),header:d,children:t?(0,a.jsx)("tr",{className:o,children:(0,a.jsx)("td",{children:(0,a.jsx)(r.oy,{content:c("Unable to decode the block events. {{error}}",{replace:{error:t.message}})})})},"error"):i&&i.map((e=>function(e,{blockHash:s,blockNumber:t,indexes:n,key:o,record:r}){return(0,a.jsx)("tr",{className:e,children:(0,a.jsxs)("td",{className:"overflow relative",children:[(0,a.jsx)(M,{value:r}),t&&(0,a.jsxs)("div",{className:"absolute --digits",children:[1!==n.length&&(0,a.jsxs)("span",{children:[(0,m.u)(n.length),"x "]}),(0,a.jsxs)(I.rU,{to:`/explorer/query/${s||""}`,children:[(0,m.u)(t),"-",n[0].toString().padStart(2,"0")]})]})]})},o)}(o,e)))})}));var T=t(48801),D=t.n(T);const F=new(D())(1e4),V=r.zo.tr`
  .explorer--BlockByHash-event+.explorer--BlockByHash-event {
    margin-top: 0.75rem;
  }

  .explorer--BlockByHash-nonce {
    font-size: var(--font-size-small);
    margin-left: 2.25rem;
    margin-top: -0.5rem;
    opacity: var(--opacity-light);
    text-align: left;
  }

  .explorer--BlockByHash-unsigned {
    opacity: var(--opacity-light);
    font-weight: var(--font-weight-normal);
  }

  a.isDecoded {
    display: block;
    margin-top: 0.25rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`,R=n.memo((function({blockNumber:e,className:s="",events:t,index:o,maxBlockWeight:i,value:l,withLink:c}){const{t:d}=(0,g.$)(),u=(0,n.useMemo)((()=>c?`#/extrinsics/decode/${l.toHex()}`:null),[l,c]),{method:h,section:p}=(0,n.useMemo)((()=>l.registry.findMetaCall(l.callIndex)),[l]),x=(0,n.useMemo)((()=>"timestamp"===p&&"set"===h?new Date(l.args[0].unwrap().toNumber()):void 0),[h,p,l]),b=(0,n.useMemo)((()=>{if(l.isSigned){const s=function({era:e},s){if(s&&e.isMortalEra){const t=e.asMortalEra;return[t.birth(s.toNumber()),t.death(s.toNumber())]}return null}(l,e);return s?d("mortal, valid from #{{startAt}} to #{{endsAt}}",{replace:{endsAt:(0,m.u)(s[1]),startAt:(0,m.u)(s[0])}}):d("immortal")}}),[e,d,l]),[,f,j,v]=(0,n.useMemo)((()=>function(e,s,t){const a=s?s.filter((({record:{phase:s}})=>s.isApplyExtrinsic&&s.asApplyExtrinsic.eq(e))):[],n=a.find((({record:{event:{method:e,section:s}}})=>"system"===s&&["ExtrinsicFailed","ExtrinsicSuccess"].includes(e))),o=n?"ExtrinsicSuccess"===n.record.event.method?n.record.event.data[0]:n.record.event.data[1]:void 0,r=o&&(0,E.ZQ)(o.weight);return[o,r&&r.v1Weight,r&&t?r.v1Weight.mul(F).div(t).toNumber()/100:0,a]}(o,t,i)),[o,t,i]);return(0,a.jsxs)(V,{className:s,children:[(0,a.jsxs)("td",{className:"top",colSpan:2,children:[(0,a.jsx)(r.Uv,{className:"details",mortality:b,tip:l.tip?.toBn(),value:l,withHash:!0,withSignature:!0}),u&&(0,a.jsx)("a",{className:"isDecoded",href:u,rel:"noreferrer",children:u})]}),(0,a.jsx)("td",{className:"top media--1000",colSpan:2,children:v.map((({key:e,record:s})=>(0,a.jsx)(M,{className:"explorer--BlockByHash-event",value:s},e)))}),(0,a.jsx)("td",{className:"top number media--1400",children:f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(a.Fragment,{children:(0,m.u)(f)}),(0,a.jsxs)("div",{children:[j.toFixed(2),"%"]})]})}),(0,a.jsx)("td",{className:"top media--1200",children:l.isSigned?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.ax,{value:l.signer}),(0,a.jsxs)("div",{className:"explorer--BlockByHash-nonce",children:[d("index")," ",(0,m.u)(l.nonce)]}),(0,a.jsx)(r.NR,{data:l.hash.toHex(),type:"extrinsic"})]}):x?x.toLocaleString():null})]},`extrinsic:${o}`)})),q=n.memo((function({blockNumber:e,className:s="",events:t,label:o,maxBlockWeight:i,value:l,withLink:c}){const{t:d}=(0,g.$)(),u=(0,n.useMemo)((()=>[[o||d("extrinsics"),"start",2],[d("events"),"start media--1000",2],[d("weight"),"media--1400"],[void 0,"address media--1200"]]),[o,d]);return(0,a.jsx)(r.iA,{className:s,empty:d("No extrinsics available"),header:u,isFixed:!0,children:l&&l.map(((s,n)=>(0,a.jsx)(R,{blockNumber:e,events:t,index:n,maxBlockWeight:i,value:s,withLink:c},`extrinsic:${n}`)))})}));var O=t(87418),z=t(6046);function B(e){const s=e.Types.map((e=>({type:(0,z.s)(e)}))),t=e.toArray().map((e=>({isValid:!0,value:e})));return(0,a.jsx)(O.Z,{isDisabled:!0,params:s,values:t,withExpander:!0})}const $=n.memo((function({value:e}){const{t:s}=(0,g.$)(),t=(0,n.useRef)([[s("justifications"),"start"]]),o=e.unwrapOr(null);return o?(0,a.jsx)(r.iA,{empty:s("No justifications available"),header:t.current,children:o?.map(((e,s)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"overflow",children:(0,a.jsx)(r.xH,{summary:e[0].toString(),children:B(e)})})},`justification:${s}`)))}):null}));var L=t(45409),H=t(71285),_=t(54436),Z=t(49754);function W(e){return e.value instanceof L.A?function(e){const s=Object.entries(e.Type).map((([e,s])=>({name:e,type:(0,z.s)(s)}))),t=e.toArray().map((e=>({isValid:!0,value:e})));return(0,a.jsx)(O.Z,{isDisabled:!0,params:s,values:t,withExpander:!0})}(e.value):e.value instanceof H.p?function(e){const s=e.Types.map((e=>({type:(0,z.s)(e)}))),t=e.toArray().map((e=>({isValid:!0,value:e})));return(0,a.jsx)(O.Z,{isDisabled:!0,params:s,values:t,withExpander:!0})}(e.value):e.value instanceof _.B?function(e){const s=(0,z.s)(e.Type),t=e.toArray().map((e=>({isValid:!0,value:e}))),n=t.map(((e,t)=>({name:`${t}`,type:s})));return(0,a.jsx)(O.Z,{isDisabled:!0,params:n,values:t,withExpander:!0})}(e.value):e.value instanceof Z.N?(s=e.value,(0,a.jsx)(O.Z,{isDisabled:!0,params:[{type:(0,z.s)("Bytes")}],values:[{isValid:!0,value:s}],withExpander:!0})):(0,a.jsx)("div",{children:e.value.toString().split(",").join(", ")});var s}const U=n.memo((function({value:e}){const{t:s}=(0,g.$)(),t=(0,n.useRef)([[s("logs"),"start"]]);return(0,a.jsx)(r.iA,{empty:s("No logs available"),header:t.current,children:e?.map(((e,s)=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"overflow",children:(0,a.jsx)(r.xH,{isLeft:!0,summary:e.type.toString(),children:W(e)})})},`log:${s}`)))})}));var J=t(58607),G=t(95292);const Q=n.memo((function({events:e,maxBlockWeight:s,signedBlock:t}){const{t:o}=(0,g.$)(),{api:l}=(0,i.h)(),[c,d,u]=(0,n.useMemo)((()=>function(e){return e?e.reduce((([e,s,t],{record:{event:{data:a,method:n,section:o}}})=>["balances"===o&&"Deposit"===n?e.iadd(a[1]):e,"balances"===o&&"Transfer"===n?s.iadd(a[2]):s,"system"===o&&["ExtrinsicFailed","ExtrinsicSuccess"].includes(n)?t.iadd((0,E.ZQ)(("ExtrinsicSuccess"===n?a[0]:a[1]).weight).v1Weight):t]),[new(D())(0),new(D())(0),new(D())(0)]):[]}(e)),[e]);return(0,a.jsxs)(r.Ty,{children:[(0,a.jsx)("section",{children:l.query.balances&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Jy,{label:o("deposits"),children:(0,a.jsx)(J.Z,{className:c?"":"--tmp",value:c||G.If})}),(0,a.jsx)(r.Jy,{className:"media--1000",label:o("transfers"),children:(0,a.jsx)(J.Z,{className:d?"":"--tmp",value:d||G.If})})]})}),(0,a.jsx)("section",{children:(0,a.jsx)(r.Jy,{label:o("block weight"),progress:{hideValue:!0,isBlurred:!(s&&u),total:s&&u?s:G.Jo,value:s&&u?u:G.um},children:u?(0,m.u)(u):(0,a.jsx)("span",{className:"--tmp",children:"999,999,999"})})}),(0,a.jsxs)("section",{className:"media--900",children:[(0,a.jsx)(r.Jy,{label:o("event count"),children:e?(0,m.u)(e.length):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(r.Jy,{label:o("extrinsic count"),children:t?(0,m.u)(t.block.extrinsics.length):(0,a.jsx)("span",{className:"--tmp",children:"99"})})]})]})})),Y=[["...","start",6]],K=n.memo((function({className:e="",error:s,value:t}){const{t:o}=(0,g.$)(),{api:l}=(0,i.h)(),c=(0,A.X)(),[{events:d,getBlock:u,getHeader:h,runtimeVersion:p},x]=(0,n.useState)({}),[b,f]=(0,n.useState)(s),[j,v]=(0,n.useState)(),[y,C]=(0,n.useMemo)((()=>[!!p&&l.runtimeVersion.specName.eq(p.specName)&&l.runtimeVersion.specVersion.eq(p.specVersion),l.consts.system.blockWeights&&l.consts.system.blockWeights.maxBlock&&(0,E.ZQ)(l.consts.system.blockWeights.maxBlock).v1Weight]),[l,p]);(0,n.useEffect)((()=>{s&&f(s)}),[s]);const w=(0,n.useMemo)((()=>d&&d.filter((({record:{phase:e}})=>!e.isApplyExtrinsic))),[d]);(0,n.useEffect)((()=>{t&&Promise.all([l.at(t).then((e=>Promise.all([Promise.resolve(e.runtimeVersion),e.query.system.events().catch((e=>(c.current&&v(e),null)))]))),l.rpc.chain.getBlock(t),l.derive.chain.getHeader(t)]).then((e=>{c.current&&x(function([[e,s],t,a]){return{events:s&&s.map(((e,s)=>({indexes:[s],key:`${Date.now()}-${s}-${e.hash.toHex()}`,record:e}))),getBlock:t,getHeader:a,runtimeVersion:e}}(e))})).catch((e=>{c.current&&f(e)}))}),[l,c,t]);const N=(0,n.useMemo)((()=>h?[[(0,m.u)(h.number.unwrap()),"start --digits",1],[o("hash"),"start"],[o("parent"),"start"],[o("extrinsics"),"start media--1300"],[o("state"),"start media--1200"],[p?`${p.specName.toString()}/${p.specVersion.toString()}`:void 0,"media--1000"]]:Y),[h,p,o]),k=h?.number.unwrap(),S=h?.parentHash.toHex(),M=!h?.parentHash.isEmpty;return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(Q,{events:d,maxBlockWeight:C,signedBlock:u}),(0,a.jsx)(r.iA,{header:N,children:b?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,children:(0,a.jsx)(r.oy,{content:o("Unable to retrieve the specified block details. {{error}}",{replace:{error:b.message}})})})}):u&&h&&!u.isEmpty&&!h.isEmpty&&(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"address",children:h.author&&(0,a.jsx)(r.N,{value:h.author})}),(0,a.jsx)("td",{className:"hash overflow",children:h.hash.toHex()}),(0,a.jsx)("td",{className:"hash overflow",children:M?(0,a.jsx)(I.rU,{to:`/explorer/query/${S||""}`,children:S}):S}),(0,a.jsx)("td",{className:"hash overflow media--1300",children:h.extrinsicsRoot.toHex()}),(0,a.jsx)("td",{className:"hash overflow media--1200",children:h.stateRoot.toHex()}),(0,a.jsx)("td",{className:"media--1000",children:t&&(0,a.jsx)(r.NR,{data:t,type:"block"})})]})}),u&&h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q,{blockNumber:k,events:d,maxBlockWeight:C,value:u.block.extrinsics,withLink:y}),(0,a.jsxs)(r.P0,{children:[(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(P,{error:j,eventClassName:"explorer--BlockByHash-block",events:w,label:o("system events")})}),(0,a.jsxs)(r.P0.Column,{children:[(0,a.jsx)(U,{value:h.digest.logs}),(0,a.jsx)($,{value:u.justifications})]})]})]})]})})),X=n.memo((function({value:e}){const{api:s}=(0,i.h)(),[t,o]=(0,n.useState)(null),r=(0,A.X)(),[l,c]=(0,n.useState)(null);return(0,n.useEffect)((()=>{s.rpc.chain.getBlockHash(e).then((e=>{r.current&&o(e)})).catch((e=>{console.error(1),r.current&&c(e)}))}),[s,r,e]),(0,a.jsx)(K,{error:l,value:t?t.toHex():null})})),ee=n.memo((function(){const e=(0,C.C)(),{value:s}=(0,o.UO)(),[t,r]=(0,n.useState)(s);if((0,n.useEffect)((()=>{r((t=>s&&s!==t?s:!t&&e?e.toString():t))}),[e,s]),!t)return null;const i=(0,w.vq)(t)?K:X;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{}),(0,a.jsx)(i,{value:t},t)]})}));function se(e){return Math.max(1,e.reduce(((e,{hdr:{width:s}})=>e+s),0))}function te(e){return e.reduce(((e,{arr:s,hdr:t})=>(t.height=t.isEmpty?0:1+te(s),Math.max(e,t.height))),0)}function ae({hdr:{author:e,hash:s,isEmpty:t,isFinalized:a,parent:n,width:o}}){return{author:e,hash:s,isEmpty:t,isFinalized:a,parent:n,width:o}}function ne(e){return e.length?ne(e.reduce(((e,{arr:s})=>e.concat(...s)),[])).concat({bn:e.reduce(((e,{hdr:{bn:s}})=>e||s),""),cols:e.map(ae)}):[]}function oe(e,s,t,a,n=!1){return{author:a,bn:e,hash:s,height:0,isEmpty:n,isFinalized:!1,parent:t,width:0}}function re(){return{arr:[],hdr:oe(""," "," ",null,!0)}}function ie(e){e.some((({arr:e})=>0!==e.length))&&(e.filter((({arr:e})=>0===e.length)).forEach((({arr:e})=>e.push(re()))),ie(e.reduce(((e,{arr:s})=>e.concat(...s)),[])))}function le(e){return!(!e[0]||e[0].isEmpty)&&e.reduce(((e,s,t)=>(0===t||!!s.isEmpty)&&e),!0)}function ce({author:e,hash:s,isEmpty:t,isFinalized:n,parent:o,width:i},l){return(0,a.jsx)("td",{className:`header ${t?"isEmpty":""} ${n?"isFinalized":""}`,colSpan:i,children:t?(0,a.jsx)("div",{className:"empty"}):(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(r.k,{className:"author",size:28,value:e}),(0,a.jsxs)("div",{className:"contents",children:[(0,a.jsx)("div",{className:"hash",children:s}),(0,a.jsx)("div",{className:"parent",children:o})]})]})},`${s}:${l}:${i}`)}function de(e){const s=e.length-1;let t=!1;return e.map((({bn:n,cols:o},r)=>{if(0!==r&&r!==s&&le(o)){if(t)return null;if(le(e[r-1].cols))return t=!0,(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{},"blockNumber"),(0,a.jsx)("td",{className:"header isLink",colSpan:o[0].width,children:(0,a.jsx)("div",{className:"link",children:"⋮"})})]},n)}return t=!1,(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:`#${n}`},"blockNumber"),o.map(ce)]},n)}))}const ue=r.zo.div`
  margin-bottom: 1.5rem;

  table {
    border-collapse: separate;
    border-spacing: 0.25rem;
    font: var(--font-mono);

    td {
      padding: 0.25rem 0.5rem;
      text-align: center;

      .author,
      .contents {
        display: inline-block;
        vertical-align: middle;
      }

      .author {
        margin-right: 0.25rem;
      }

      .contents {
        .hash, .parent {
          margin: 0 auto;
          max-width: 6rem;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .parent {
          font-size: var(--font-size-small);
          line-height: 0.75rem;
          max-width: 4.5rem;
        }
      }

      &.blockNumber {
        font-size: 1.25rem;
      }

      &.header {
        background: #fff;
        border: 1px solid #e6e6e6;
        border-radius: 0.25rem;

        &.isEmpty {
          background: transparent;
          border-color: transparent;
        }

        &.isFinalized {
          background: rgba(0, 255, 0, 0.1);
        }

        &.isLink {
          background: transparent;
          border-color: transparent;
          line-height: 1rem;
          padding: 0;
        }

        &.isMissing {
          background: rgba(255, 0, 0, 0.05);
        }
      }
    }
  }
`,me=n.memo((function({className:e}){const{t:s}=(0,g.$)(),{api:t}=(0,i.h)(),[o,l]=(0,n.useState)(null),c=(0,n.useRef)(new Map([["root",[]]])),d=(0,n.useRef)({numBlocks:0,numForks:0}),u=(0,n.useRef)(new Map),h=(0,n.useRef)(""),p=(0,n.useCallback)((e=>{const s=u.current.get(e);s&&!s.isFinalized&&(s.isFinalized=!0,p(s.parent))}),[]),x=(0,n.useCallback)(((e,s)=>((c.current.get(e.hash)||[]).map((e=>u.current.get(e))).filter((e=>!!e)).forEach((e=>{s.push({arr:x(e,[]),hdr:e})})),e.height=te(s),e.width=se(s),s.sort(((e,s)=>e.hdr.width>s.hdr.width||e.hdr.height>s.hdr.height||e.hdr.isFinalized?-1:e.hdr.width<s.hdr.width||e.hdr.height<s.hdr.height||s.hdr.isFinalized?1:0)),s)),[]),b=(0,n.useCallback)((()=>{const e=re();return(c.current.get("root")||[]).forEach((s=>{const t=u.current.get(s);t&&e.arr.push({arr:[],hdr:{...t}})})),e.arr.forEach((({arr:e,hdr:s})=>{x(s,e)})),ie(e.arr),e.hdr.height=te(e.arr),e.hdr.width=se(e.arr),e}),[x]),f=(0,n.useCallback)((e=>{p(e.hash.toHex())}),[p]),j=(0,n.useCallback)((e=>{const s=(0,m.u)(e.number),a=e.hash.toHex(),n=e.parentHash.toHex();let o=!1;if(h.current||(h.current=s),!u.current.has(a)){if(h.current===s&&c.current.get("root").push(a),u.current.set(a,oe(s,a,n,null)),c.current.has(n)?(o=!0,c.current.get(n).push(a)):c.current.set(n,[a]),!u.current.has(n)&&h.current!==s)return console.warn(`Retrieving missing header ${e.parentHash.toHex()}`),void t.rpc.chain.getHeader(e.parentHash).then(j).catch(console.error);d.current.numBlocks++,o&&d.current.numForks++,l(b())}}),[t,b]);return(0,n.useEffect)((()=>{let e=null,s=null;return(async()=>{e=await t.rpc.chain.subscribeFinalizedHeads(f),s=await t.rpc.chain.subscribeNewHeads(j)})().catch(console.error),()=>{e&&e(),s&&s()}}),[t,f,j]),o?(0,a.jsxs)(ue,{className:e,children:[(0,a.jsx)(r.Ty,{children:(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:s("blocks"),children:(0,m.u)(d.current.numBlocks)}),(0,a.jsx)(r.Jy,{label:s("forks"),children:(0,m.u)(d.current.numForks)})]})}),(0,a.jsx)("table",{children:(0,a.jsx)("tbody",{children:de(ne(o.arr))})})]}):null}));var he=t(17965),pe=t(9118),xe=t(11677);const ge={details:[],isLoaded:!1,maxItems:50,stdDev:0,timeAvg:0,timeMax:0,timeMin:0};function be(e){const s=e.sort(((e,s)=>e.block.number-s.block.number)).filter((({block:s},t)=>0===t||s.number>e[t-1].block.number));for(let e=0;e<s.length-1;e++){const t=s[e],a=s[e+1];a.block.number-t.block.number==1&&0===a.delay&&(a.delay=a.now-t.now)}return s.slice(-50)}function fe(e,{block:s,events:t}){const a=function({extrinsics:e}){return e.find((({method:{method:e,section:s}})=>"set"===e&&"timestamp"===s))}(s);return a?[...e,{block:{bytes:s.encodedLength,number:s.header.number.toNumber()},delay:0,events:{count:t.length,system:t.filter((({phase:e})=>!e.isApplyExtrinsic)).length},extrinsics:{bytes:s.extrinsics.reduce(((e,s)=>e+s.encodedLength),0),count:s.extrinsics.length},now:a.args[0].toNumber(),parentHash:s.header.parentHash}]:e}function je(e,s){return s.reduce(((e,s)=>fe(e,s)),e)}async function ve(e,s){return s.length?(await Promise.all(s.map((s=>e.derive.chain.getBlockByNumber(s))))).filter((e=>!!e)):[]}const ye=(0,xe.e)("useLatency",(function(){const{api:e}=(0,i.h)(),[s,t]=(0,n.useState)([]),a=(0,pe.W7)(e.derive.chain.subscribeNewBlocks),o=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{a&&(t((e=>be(fe(e,a)))),o.current||(o.current=!0,async function(e,{block:{header:s}}){const t=[];let a=s.number.toNumber();for(let e=1;a>0&&e<=50;e++)t.push(--a);return ve(e,t)}(e,a).then((e=>t((s=>be(je(s,e)))))).catch(console.error)))}),[e,a]),(0,n.useEffect)((()=>{if(s.length<=2)return;const a=s.findIndex((({block:e},t)=>t!==s.length-1&&s[t+1].block.number-e.number>1));-1!==a&&async function(e,{block:{number:s}},{block:{number:t}}){const a=[];for(let e=s+1;e<t;e++)a.push(e);return ve(e,a)}(e,s[a],s[a+1]).then((e=>t((s=>be(je(s,e)))))).catch(console.error)}),[e,s]),(0,n.useMemo)((()=>{const e=s.map((({delay:e})=>e)).filter((e=>e));if(!e.length)return ge;const t=e.reduce(((e,s)=>e+s),0)/e.length,a=Math.sqrt(e.reduce(((e,s)=>e+Math.pow(t-s,2)),0)/e.length);return{details:s,isLoaded:50===s.length,maxItems:50,stdDev:a,timeAvg:t,timeMax:Math.max(...e),timeMin:Math.min(...e)}}),[s])})),Ce=["times","blocks","extrinsics","events"],we={blocks:["#008c8c","#acacac"],events:["#00448c","#8c0044","#acacac"],extrinsics:["#448c00","#acacac"],times:["#8c8c00","#acacac"]};function Ne(e,s=1e3){return(0,a.jsxs)("span",{className:"--digits",children:[`${(e/s).toFixed(3)}`,(0,a.jsx)("span",{className:"postfix",children:" s"})]})}const ke=r.zo.div`
  .container {
    background: var(--bg-table);
    border: 1px solid var(--border-table);
    border-radius: 0.25rem;
    padding: 1rem 1.5rem;
  }

  .container+.container {
    margin-top: 1rem;
  }

  span.--digits {
    .postfix {
      font-size: var(--font-percent-tiny);
    }
  }
`,Se=n.memo((function({className:e}){const{t:s}=(0,g.$)(),{details:t,isLoaded:o,maxItems:i,stdDev:l,timeAvg:c,timeMax:d,timeMin:u}=ye(),[h,p]=(0,n.useState)((()=>new Array(Ce.length).fill(!1)));(0,n.useEffect)((()=>{if(o){const e=h.findIndex((e=>!e));-1!==e&&(0,he.Y)((()=>p(h.map(((s,t)=>t===e||s)))))}}),[o,h]);const b=(0,n.useMemo)((()=>function(e,s){const t={labels:[],values:[[],[]]},a={labels:[],values:[[],[],[]]},n={labels:[],values:[[],[]]},o={labels:[],values:[[],[]]},r=e.reduce(((e,{events:{count:s}})=>e+s),0),i=e.reduce(((e,{extrinsics:{count:s}})=>e+s),0),l=e.reduce(((e,{block:{bytes:s}})=>e+s),0);for(let s=0;s<e.length;s++){const o=(0,m.u)(e[s].block.number);t.labels.push(o),t.values[0].push(e[s].block.bytes),t.values[1].push(l/e.length),a.labels.push(o),a.values[0].push(e[s].events.count),a.values[1].push(e[s].events.system),a.values[2].push(r/e.length),n.labels.push(o),n.values[0].push(e[s].extrinsics.count),n.values[1].push(i/e.length)}const c=e.filter((({delay:e})=>e)),d=s*c.length;for(let e=0;e<c.length;e++)o.labels.push((0,m.u)(c[e].block.number)),o.values[0].push(c[e].delay/1e3),o.values[1].push(d/c.length/1e3);return{blockLast:o.values[0][o.values[0].length-1],blocks:t,events:a,extrinsics:n,times:o}}(t,c)),[t,c]),[f,j]=(0,n.useMemo)((()=>[{blocks:[s("bytes"),s("average")],events:[s("events"),s("system"),s("average")],extrinsics:[s("extrinsics"),s("average")],times:[s("blocktime"),s("average")]},{blocks:s("blocksize (last {{n}} blocks)",{replace:{n:i}}),events:s("events (last {{n}} blocks)",{replace:{n:i}}),extrinsics:s("extrinsics (last {{n}} blocks)",{replace:{n:i}}),times:s("blocktimes (last {{n}} blocks)",{replace:{n:i}})}]),[i,s]),v=(0,a.jsxs)("span",{className:"--tmp --digits",children:["0.000 ",(0,a.jsx)("span",{className:"postfix",children:"s"})]});return(0,a.jsxs)(ke,{className:e,children:[(0,a.jsxs)(r.Ty,{children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:s("avg"),children:o?Ne(c):v}),(0,a.jsx)(r.Jy,{className:"media--1000",label:s("std dev"),children:o?Ne(l):v})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:s("min"),children:o?Ne(u):v}),(0,a.jsx)(r.Jy,{label:s("max"),children:o?Ne(d):v})]}),(0,a.jsx)(r.Jy,{label:s("last"),children:o?Ne(b.blockLast,1):v})]}),(0,a.jsx)(r.EK,{isActive:o,children:Ce.map((e=>(0,a.jsx)(x,{colors:we[e],legends:f[e],title:j[e],value:b[e]},e)))})]})})),Ie=n.memo((function({value:e}){if(!e)return null;const s=e.hash.toHex();return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"number",children:(0,a.jsx)("h4",{className:"--digits",children:(0,a.jsx)(I.rU,{to:`/explorer/query/${s}`,children:(0,m.u)(e.number)})})}),(0,a.jsx)("td",{className:"all hash overflow",children:s}),(0,a.jsx)("td",{className:"address",children:e.author&&(0,a.jsx)(r.N,{value:e.author})})]})})),Ae=n.memo((function({headers:e}){const{t:s}=(0,g.$)(),t=(0,n.useRef)([[s("recent blocks"),"start",3]]);return(0,a.jsx)(r.iA,{empty:s("No blocks available"),header:t.current,children:e.filter((e=>!!e)).map((e=>(0,a.jsx)(Ie,{value:e},e.number.toString())))})}));var Ee=t(67634),Me=t(65874),Pe=t(79608),Te=t(96916),De=t(26839),Fe=t(95689),Ve=t(54705);const Re=n.memo((function({eventCount:e}){const{t:s}=(0,g.$)(),{api:t}=(0,i.h)();return(0,a.jsxs)(r.Ty,{children:[(0,a.jsxs)("section",{children:[t.query.timestamp&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Jy,{label:s("last block"),children:(0,a.jsx)(Ee.Z,{})}),(0,a.jsx)(r.Jy,{className:"media--800",label:s("target"),children:(0,a.jsx)(Me.Z,{value:G.If})})]}),t.query.balances&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Jy,{className:"media--800",label:s("total issuance"),children:(0,a.jsx)(Pe.Z,{})}),!!t.query.balances.inactiveIssuance&&(0,a.jsx)(r.Jy,{className:"media--1300",label:s("inactive issuance"),children:(0,a.jsx)(Te.Z,{})})]})]}),(0,a.jsx)("section",{className:"media--1100",children:(0,a.jsx)(Ve.Z,{withEra:!1})}),(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{className:"media--1400",label:s("last events"),children:(0,m.u)(e)}),t.query.grandpa&&(0,a.jsx)(r.Jy,{label:s("finalized"),children:(0,a.jsx)(De.Z,{})}),(0,a.jsx)(r.Jy,{label:s("best"),children:(0,a.jsx)(Fe.Z,{})})]})]})})),qe=n.memo((function({eventCount:e,events:s,headers:t}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S,{}),(0,a.jsx)(Re,{eventCount:e}),(0,a.jsxs)(r.P0,{children:[(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(Ae,{headers:t})}),(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(P,{events:s})})]})]})}));var Oe=t(69543);const ze=(0,r.zo)(r.iA)`
  overflow-x: auto;

  td.roles {
    max-width: 9ch;
    width: 9ch;
  }

  td.bestNumber {
    max-width: 11ch;
    width: 11ch;
  }
`,Be=n.memo((function({className:e="",peers:s}){const{t}=(0,g.$)(),o=(0,n.useRef)([[t("connected peers"),"start",2],[t("best hash"),"start"],[t("best #"),"number"]]),r=(0,n.useMemo)((()=>s&&function(e){return e.map((({bestHash:e,bestNumber:s,peerId:t,roles:a})=>({bestHash:e.toHex(),bestNumber:s,peerId:t.toString(),roles:(0,Oe.KT)(a)}))).sort(((e,s)=>e.peerId.localeCompare(s.peerId))).sort(((e,s)=>e.roles.localeCompare(s.roles))).sort(((e,s)=>s.bestNumber.cmp(e.bestNumber)))}(s)),[s]);return(0,a.jsx)(ze,{className:e,empty:t("no peers connected"),header:o.current,children:r?.map((({bestHash:e,bestNumber:s,peerId:t,roles:n})=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"roles",children:n}),(0,a.jsx)("td",{className:"hash overflow",children:t}),(0,a.jsx)("td",{className:"hash overflow",children:e}),(0,a.jsx)("td",{className:"number bestNumber",children:(0,m.u)(s)})]},t)))})}));var $e=t(53598);const Le={extrinsics:null,health:null,peers:null},He=n.memo((function({info:{extrinsics:e,health:s,peers:t}=Le,nextRefresh:o}){const{t:i}=(0,g.$)(),[l,c]=(0,n.useState)(G.nw);return(0,n.useEffect)((()=>{if(t){const e=t.sort(((e,s)=>s.bestNumber.cmp(e.bestNumber)))[0];c(e?e.bestNumber:G.nw)}}),[t]),(0,a.jsxs)(r.Ty,{children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:i("refresh in"),children:(0,a.jsx)($e.Z,{value:o})}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Jy,{className:"media--800",label:i("total peers"),children:(0,m.u)(s.peers)}),(0,a.jsx)(r.Jy,{className:"media--800",label:i("syncing"),children:s.isSyncing.valueOf()?i("yes"):i("no")})]})]}),e&&e.length>0&&(0,a.jsx)("section",{className:"media--1200",children:(0,a.jsx)(r.Jy,{label:i("queued tx"),children:e.length})}),(0,a.jsxs)("section",{children:[l?.gtn(0)&&(0,a.jsx)(r.Jy,{label:i("peer best"),children:(0,m.u)(l)}),(0,a.jsx)(r.Jy,{label:i("our best"),children:(0,a.jsx)(Fe.Z,{})})]})]})})),_e=n.memo((function(){const{t:e}=(0,g.$)(),{api:s}=(0,i.h)(),[t,o]=(0,n.useState)({}),[r,l]=(0,n.useState)((()=>Date.now()));return(0,n.useEffect)((()=>{const e=()=>{l(Date.now()+9900),async function(e){try{const[s,t,a,n]=await Promise.all([e.derive.chain.bestNumber(),e.rpc.system.health().catch((()=>null)),e.rpc.system.peers().catch((()=>null)),e.rpc.author.pendingExtrinsics().catch((()=>null))]);return{blockNumber:s,extrinsics:n,health:t,peers:a}}catch(e){return{}}}(s).then(o).catch(console.error)};e();const t=window.setInterval(e,9900);return()=>{window.clearInterval(t)}}),[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(He,{info:t,nextRefresh:r}),(0,a.jsx)(Be,{peers:t.peers}),(0,a.jsx)(q,{blockNumber:t.blockNumber,label:e("pending extrinsics"),value:t.extrinsics,withLink:!0})]})})),Ze=n.memo((function({basePath:e,className:s}){const{t}=(0,g.$)(),{api:u}=(0,i.h)(),{lastHeaders:m}=(0,l.E)(),{eventCount:h,events:p}=(0,c.d)(),x=(0,n.useRef)(function(e){return[{isRoot:!0,name:"chain",text:e("Chain info")},{hasParams:!0,name:"query",text:e("Block details")},{name:"latency",text:e("Latency")},{name:"forks",text:e("Forks")},{name:"node",text:e("Node info")},{name:"api",text:e("API stats")}]}(t)),b=(0,n.useRef)(function(e){return{api:`${e}/api`,forks:`${e}/forks`,latency:`${e}/latency`,node:`${e}/node`,query:[`${e}/query/:value`,`${e}/query/`]}}(e)),f=(0,n.useMemo)((()=>(0,d.m)(u.query.babe?.authorities)?[]:["forks"]),[u]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,hidden:f,items:x.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:b.current.api,children:(0,a.jsx)(y,{})}),(0,a.jsx)(o.AW,{path:b.current.forks,children:(0,a.jsx)(me,{})}),(0,a.jsx)(o.AW,{path:b.current.latency,children:(0,a.jsx)(Se,{})}),(0,a.jsx)(o.AW,{path:b.current.query,children:(0,a.jsx)(ee,{})}),(0,a.jsx)(o.AW,{path:b.current.node,children:(0,a.jsx)(_e,{})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(qe,{eventCount:h,events:p,headers:m})})]})]})}))},88057:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-explorer")}},38080:(e,s,t)=>{t.d(s,{Z:()=>w});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(48731),c=t(74076),d=t(51330),u=t(57198),m=t(65417),h=t(55858),p=t(61349);function x(){return(0,p.$G)("app-extrinsics")}const g=(0,r.zo)(r.P0)`
  .ui--Column:last-child .ui--Labelled {
    padding-left: 0.5rem;

    label {
      left: 2.05rem; /* 3.55 - 1.5 (diff from padding above) */
    }
  }
`,b=n.memo((function({className:e,extrinsic:s,isCall:t,payload:o,withData:i=!0,withHash:l=!0}){const{t:c}=x(),[d,u,m]=(0,n.useMemo)((()=>function(e,s,t){if(!s)return["0x","0x",null];const a=s.method.toU8a();let n=e?s.method.inspect():s.inspect();if(t){const e=n;n=t.inspect(),n.inner?.map(((s,t)=>(0===t&&(s.inner=e.inner,s.outer=void 0),s)))}return[(0,h.c)(a),s.registry.hash(a).toHex(),n]}(t,s,o)),[s,t,o]);return m?(0,a.jsxs)(g,{className:e,isPadded:!1,children:[(0,a.jsxs)(r.P0.Column,{children:[i&&(0,a.jsx)(r.r_,{isDisabled:!0,isTrimmed:!0,label:c("encoded call data"),value:d,withCopy:!0}),l&&(0,a.jsx)(r.r_,{isDisabled:!0,label:c("encoded call hash"),value:u,withCopy:!0})]}),(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.R2,{hex:d,inspect:m,label:c("encoding details")})})]}):null})),f={decoded:null,extrinsicCall:null,extrinsicError:null,extrinsicFn:null,extrinsicHex:null,extrinsicKey:"none",extrinsicPayload:null,isCall:!0},j=r.zo.div`
  .ui--Call--toplevel {
    margin-top: 0;
  }

  .ui--Call > .ui--Params.withBorder {
    padding-left: 2rem;
  }
`,v=n.memo((function({className:e,defaultValue:s,setLast:t}){const{encoded:h}=(0,o.UO)(),[p]=(0,n.useState)((()=>s||h)),{t:g}=x(),{api:v}=(0,i.h)(),[{decoded:y,extrinsicCall:C,extrinsicError:w,extrinsicFn:N,extrinsicKey:k,extrinsicPayload:S,isCall:I},A]=(0,n.useState)(f),E=(0,n.useCallback)((e=>{try{let s;(0,l.hu)((0,c.vq)(e),"Expected a hex-encoded call");let a=null,n=null,o=!1;try{const t=v.tx(e);(0,l.hu)(t.toHex()===e,"Cannot decode data as extrinsic, length mismatch"),n=t,s=v.createType("Call",n.method)}catch{try{s=v.createType("Call",e);const t=s.toHex();if(t===e)o=!0;else{if(!e.startsWith(t))throw new Error("Unable to decode data as Call, length mismatch in supplied data");{const t=(0,d.e)((0,u.Y)(s.encodedLength),e);a=v.createType("ExtrinsicPayload",t),(0,l.hu)((0,m.S)(a.toU8a(),t),"Unable to decode data as un-prefixed ExtrinsicPayload"),s=v.createType("Call",a.method.toHex())}}}catch{a=v.createType("ExtrinsicPayload",e),(0,l.hu)(a.toHex()===e,"Unable to decode input data as Call, Extrinsic or ExtrinsicPayload"),s=v.createType("Call",a.method.toHex())}}const{method:r,section:i}=v.registry.findMetaCall(s.callIndex),h=v.tx[i][r],p=s.callIndex.toString();n||(n=h(...s.args)),A({...f,decoded:n,extrinsicCall:s,extrinsicFn:h,extrinsicHex:e,extrinsicKey:p,extrinsicPayload:a,isCall:o}),t({call:s,fn:h,hex:e})}catch(e){A({...f,extrinsicError:e.message}),t(null)}}),[v,t]);return(0,a.jsxs)(j,{className:e,children:[(0,a.jsx)(r.II,{defaultValue:p,isError:!N,label:g("hex-encoded call"),onChange:E,placeholder:g("0x...")}),w&&(0,a.jsx)(r.oy,{content:w}),N&&C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.UT,{defaultValue:N,isDisabled:!0,label:g("decoded call")},`extrinsicKey:${k}`),(0,a.jsx)(r.Ig,{className:"details",value:C})]}),(0,a.jsx)(b,{extrinsic:y,isCall:I,payload:S,withData:!1})]})}));var y=t(36609);const C=n.memo((function({className:e,defaultValue:s}){const{t}=x(),{apiDefaultTxSudo:o}=(0,i.h)(),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),[{defaultArgs:p,defaultFn:g}]=(0,n.useState)((()=>function(e,s){return e?{defaultArgs:e.call.args.map((e=>({isValid:!0,value:e}))),defaultFn:e.fn}:{defaultFn:s}}(s,o))),f=(0,n.useCallback)((e=>h((()=>e||null))),[]),j=(0,n.useCallback)((e=>u(e?e.message:null)),[]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(r.rp,{label:t("using the selected account"),labelExtra:(0,a.jsx)(y.Z,{label:(0,a.jsx)("label",{children:t("free balance")}),params:l}),onChange:c,type:"account"}),(0,a.jsx)(r.n6,{defaultArgs:p,defaultValue:g,label:t("submit the following extrinsic"),onChange:f,onError:j}),(0,a.jsx)(b,{extrinsic:m,isCall:!0}),d&&!m&&(0,a.jsx)(r.oy,{content:d}),(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(r.cA,{extrinsic:m,icon:"sign-in-alt",isUnsigned:!0,label:t("Submit Unsigned"),withSpinner:!0}),(0,a.jsx)(r.cA,{accountId:l,extrinsic:m,icon:"sign-in-alt",label:t("Submit Transaction")})]})]})})),w=n.memo((function({basePath:e}){const{t:s}=x(),[t,i]=(0,n.useState)(null),l=(0,n.useRef)(function(e){return[{isRoot:!0,name:"create",text:e("Submission")},{hasParams:!0,name:"decode",text:e("Decode")}]}(s)),c=(0,n.useRef)(function(e){return{decode:[`${e}/decode/:encoded`,`${e}/decode`]}}(e));return(0,a.jsxs)("main",{className:"extrinsics--App",children:[(0,a.jsx)(r.mQ,{basePath:e,items:l.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:c.current.decode,children:(0,a.jsx)(v,{defaultValue:t&&t.hex,setLast:i})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(C,{defaultValue:t})})]})]})}))},58064:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(52322),n=t(2784),o=t(10257);const r=n.memo((function({basePath:e,className:s}){return(0,a.jsx)(o.Z,{basePath:e,className:s,palletColl:"fellowshipCollective",palletPoll:"fellowshipReferenda"})}))},16472:(e,s,t)=>{t.d(s,{Z:()=>n});var a=t(1398);const n=(0,t(11677).e)("useCounter",(function(){return(0,a.E)("fellowshipReferenda")}))},31043:(e,s,t)=>{t.d(s,{Z:()=>O});var a=t(52322),n=t(2784),o=t(24732),r=t(46782),i=t.n(r),l=t(86135),c=t(23729),d=t.n(c);const u={files:[],isLoad:!0};var m=t(61349);function h(){return(0,m.$G)("app-files")}var p=t(89644),x=t.n(p),g=t(345),b=t(69187),f=t(33661),j=t(17965),v=t(54827),y=t(55858),C=t(64021);const w=o.zo.div`
  width: 100%;
  background: unset;
  overflow: hidden;
  height: 1.4rem;
  border-radius: 0.7rem;
  border-style: solid;
  border-width: 1px;

  .file-progress-bar {
    transition: width 100ms ease-in-out;
    width: 0;
    height: 100%;
  }
`,N=n.memo((function({className:e="",progress:s,style:t}){return(0,a.jsx)(w,{className:`${e} highlight--border`,style:t,children:(0,a.jsx)("div",{className:"file-progress-bar highlight--bg",style:{width:`${s}%`}})})}));var k=t(48834).Buffer;const S=()=>{};function I(e){const s=e.file;return(0,a.jsxs)("div",{className:"file",children:[(0,a.jsx)(o.__,{label:s.webkitRelativePath||e.file.name}),(0,a.jsx)("span",{children:`${s.size} bytes`})]})}const A=(0,o.zo)(o.u_)`
  .files {
    max-height: 300;
    overflow: auto;
    padding-left: 2rem;
    width: 100%;

    .file {
      background-color: white;
      border-bottom: 1px solid rgba(0, 0, 0, 0.15);
      border-radius: 4px;
      padding: 5px 2rem;
    }
  }

  .progress {
    margin-left: 2rem;
    margin-top: 2rem;
    width: calc(100% - 2rem);
  }
`,E=n.memo((function({className:e,file:s,onClose:t=S,onSuccess:r=S}){const{t:i}=h(),l=(0,n.useMemo)((()=>function(e){return[{location:e("Singapore"),text:e("DCF"),value:"https://crustipfs.xyz"},{location:e("Seattle"),text:e("Crust Network"),value:"https://gw.crustfiles.app"},{location:e("Berlin"),text:e("⚡️ Thunder Gateway"),value:"https://gw.crustfiles.net"}]}(i).sort((()=>Math.random()>.5?-1:1)).map((e=>({...e,text:`${e.text??""}(${e.location??""})`})))),[i]),[c,d]=(0,n.useState)(l[0]),u=(0,n.useMemo)((()=>[{text:i("Crust Pinner"),value:"https://pin.crustcode.com"}]),[i]),[m,p]=(0,n.useState)(u[0]),[w,E]=(0,n.useState)((()=>b.Nn.getPairs()[0]||null)),[M,P]=(0,n.useState)(""),[{isInjected:T},D]=(0,n.useState)({isExternal:!1,isHardware:!1,isInjected:!1}),[F,V]=(0,n.useState)(!1),[{isUsable:R,signer:q},O]=(0,n.useState)({isUsable:!0,signer:null}),[z,B]=(0,n.useState)(""),[$,L]=(0,n.useState)(!1),H=(0,n.useMemo)((()=>{const e=104857600;if(s.file)return s.file.size>e;if(s.files){let t=0;for(const e of s.files)t+=e.size;return t>e}return!1}),[s]),[_,Z]=(0,n.useState)(""),W=H?i("Do not upload files larger than 100MB!"):_,[U,J]=(0,n.useState)({progress:0,up:!1}),[G,Q]=(0,n.useState)(null),Y=(0,n.useCallback)((e=>{e&&(P(e),E(b.Nn.getPair(e)))}),[P,E]);(0,n.useEffect)((()=>{const e=w&&w.meta||{},s=e.isExternal||!1,t=e.isHardware||!1,a=e.isInjected||!1,n=!(s||t||a);D({isExternal:s,isHardware:t,isInjected:a}),V(!a&&(w&&w.isLocked||!1)),O({isUsable:n,signer:null}),e.source&&a&&(0,g.R0)(e.source).catch((()=>null)).then((e=>O({isUsable:(0,f.m)(e?.signer?.signRaw),signer:e?.signer||null}))).catch(console.error)}),[w]);const K=(0,n.useCallback)((()=>new Promise(((e,s)=>{(0,j.Y)((()=>{try{w.decodePkcs8(z),e(1)}catch(e){s(e)}}))}))),[w,z]),X=(0,n.useCallback)((()=>{G&&G.cancel(),t()}),[G,t]),ee=(0,n.useCallback)((async()=>{if(Z(""),R&&w)try{L(!0),F&&await K();let e="";e=q&&(0,f.m)(q.signRaw)?(await q.signRaw({address:w.address,data:(0,v.$)(w.address),type:"bytes"})).signature:(0,y.c)(w.sign((0,C.d)(w.address)));const t=`${w.address}:${e}`,a=k.from(t).toString("base64"),n=`Basic ${a}`,o=`Bearer ${a}`,i=x().CancelToken.source();Q(i),J({progress:0,up:!0});const l=new FormData;if(s.file)l.append("file",s.file,s.file.name);else if(s.files)for(const e of s.files)l.append("file",e,e.webkitRelativePath);const d=c.value,u=await x().request({cancelToken:i.token,data:l,headers:{Authorization:n},maxContentLength:104857600,method:"POST",onUploadProgress:e=>{const s=e.loaded/e.total;J({progress:Math.round(99*s),up:!0})},params:{pin:!0},url:`${d}/api/v0/add`});let h;if("string"==typeof u.data){const e=u.data.replaceAll("}\n{","},{"),s=JSON.parse(`[${e}]`),t=s.length-1;h=s[t],delete s[t],h.items=s}else h=u.data;console.info("upResult:",u),Q(null),J({progress:100,up:!1});const p=m.value;await x().request({data:{cid:h.Hash,name:h.Name},headers:{Authorization:o},method:"POST",url:`${p}/psa/pins`}),r({...h,PinEndpoint:p,UpEndpoint:d})}catch(e){J({progress:0,up:!1}),L(!1),console.error(e),Z(e.message)}}),[s,K,q,F,R,w,m,c,r]),se=(0,n.useCallback)((e=>{const s=l.find((s=>s.value===e));s&&d(s)}),[l,d]),te=(0,n.useCallback)((e=>{const s=u.find((s=>s.value===e));s&&p(s)}),[u,p]);return(0,a.jsxs)(A,{className:e,header:i("Upload File"),onClose:X,open:!0,size:"medium",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{children:(0,a.jsxs)("div",{className:"files",children:[s.file&&(0,a.jsx)(I,{file:s.file}),s.files&&s.files.map(((e,s)=>(0,a.jsx)(I,{file:e},`file_item:${s}`)))]})}),(0,a.jsx)(o.u_.Columns,{children:(0,a.jsx)(o.Lt,{isDisabled:$,label:i("Select a Web3 IPFS Gateway"),onChange:se,options:l,value:c.value})}),(0,a.jsx)(o.u_.Columns,{children:(0,a.jsx)(o.Lt,{isDisabled:!0,label:i("Select a Web3 IPFS Pinner"),onChange:te,options:u,value:m.value})}),(0,a.jsxs)(o.u_.Columns,{children:[(0,a.jsx)(o.rp,{defaultValue:M,isDisabled:$,label:i("Please choose account"),labelExtra:(0,a.jsx)(o.Kc,{label:i("transferrable"),params:M}),onChange:Y,type:"account"}),!U.up&&F&&!T&&(0,a.jsx)(o.ro,{isError:!1,label:i("password"),onChange:B,value:z}),(0,a.jsx)(N,{className:"progress",progress:U.progress}),W&&(0,a.jsx)(o.oy,{content:W})]})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.zx,{icon:"arrow-circle-up",isBusy:$,isDisabled:H,label:i("Sign and Upload"),onClick:ee})})]})})),M=(0,o.zo)(o.qi)`
  .copySpan {
    display: none;
  }
`,P=o.zo.tr`
  height: 3.5rem;

  .end {
    text-align: end;
  }

  .actions {
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }
`,T=(e,s=6)=>e.length>2*s?`${e.substring(0,s)}...${e.substring(e.length-s)}`:e;function D(e){return`${e.UpEndpoint||"https://ipfs.io"}/ipfs/${e.Hash}?filename=${e.Name}`}const F=e=>()=>{window.open(D(e),"_blank")},V=()=>{},R=o.zo.main`
  h1 {
    text-transform: unset !important;
  }

  .uploadBtn {
    position: relative;
    padding: 5px 0;

    &:hover {
      .uploadMenu {
        display: block;
      }
    }
  }

  .uploadMenu {
    z-index: 200;
    display: none;
    background-color: white;
    position: absolute;
    top: 43px;
    left: 0;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.4);
    border-radius: 4px;
    overflow: hidden;
    line-height: 40px;

    .menuItem {
      cursor: pointer;
      padding: 0 2rem;
      display: flex;
      align-items: center;
      white-space: nowrap;

      &:hover {
        background-color: var(--bg-page);
      }
    }
  }
`,q=n.memo((function({className:e}){const{t:s}=h(),{queueAction:t}=(0,l.L)(),[r,c]=(0,n.useState)(!1),m=function(){const[e,s]=(0,n.useState)(u),[t,a]=(0,n.useState)(!0);(0,n.useEffect)((()=>{try{const e=d().get("files",u);e!==u&&s(e),a(!1)}catch(e){a(!1),console.error(e)}}),[]);const o=(0,n.useCallback)((t=>{const a={...e,files:t};s(a),d().set("files",a)}),[e]);return(0,n.useMemo)((()=>({...e,isLoad:t,setFiles:o})),[e,o,t])}(),[p,x]=(0,n.useState)(void 0),g=(0,n.useRef)(null),b=(0,n.useCallback)(((e=!1)=>{g.current&&(g.current.webkitdirectory=e,g.current.multiple=e,g.current.click())}),[g]),f=(0,n.useCallback)((()=>b(!1)),[b]),j=(0,n.useCallback)((()=>b(!0)),[b]),v=(0,n.useCallback)((e=>{const a=e.target.files;if(a)if(a.length>2e3)t({action:"Upload Folder",message:s("Please do not upload more than 2000 files"),status:"error"});else if(0!==a.length){if(e.target.webkitdirectory){if(a.length>=1){const e=[];for(let s=0;s<a.length;s++)e.push(a[s]);console.info(e);const[s]=e[0].webkitRelativePath.split("/");x({dir:s,files:e}),c(!0)}}else x({file:a[0]}),c(!0);e.target.value=""}else t({action:"Upload Folder",message:s("Please select non-empty folder"),status:"error"})}),[x,c,t,s]),y=(0,n.useCallback)(((e,a="queued")=>{t&&t({action:s("Import files"),message:e,status:a})}),[t,s]),C=(0,n.useRef)(null),w=(0,n.useCallback)((()=>{C.current&&C.current.click()}),[C]),N=(0,n.useCallback)((e=>{try{y(s("Importing"));const t=new FileReader,a=e.target.files;if(!a)return;if(t.readAsText(a[0],"UTF-8"),!/(.json)$/i.test(e.target.value))return y(s("file error"),"error");t.onload=e=>{const t=JSON.parse(e.target?.result);if(!Array.isArray(t))return y(s("file content error"),"error");const a=[],n={};for(const e of t)e.Hash&&e.Name&&e.UpEndpoint&&e.PinEndpoint&&(a.push(e),n[e.Hash]=!0);const o=m.files.filter((e=>!n[e.Hash]));m.setFiles([...a,...o]),y(s("Import Success"),"success")}}catch(e){y(s("file content error"),"error")}}),[m,y,s]),k=(0,n.useCallback)((()=>{c(!1)}),[]),S=(0,n.useCallback)((e=>{c(!1);const s=m.files.filter((s=>s.Hash!==e.Hash));m.setFiles([e,...s])}),[m]),I=(0,n.useCallback)((()=>{const e=new Blob([JSON.stringify(m.files)],{type:"application/json; charset=utf-8"});i().saveAs(e,"files.json")}),[m]);return(0,a.jsxs)(R,{className:e,children:[(0,a.jsx)("header",{}),(0,a.jsx)("input",{onChange:v,ref:g,style:{display:"none"},type:"file"}),(0,a.jsx)("input",{onChange:N,ref:C,style:{display:"none"},type:"file"}),p&&r&&(0,a.jsx)(E,{file:p,onClose:k,onSuccess:S}),(0,a.jsxs)("div",{style:{display:"flex",paddingBottom:"1.5rem"},children:[(0,a.jsxs)("div",{className:"uploadBtn",children:[(0,a.jsx)(o.zx,{icon:"upload",label:s("Upload"),onClick:V}),(0,a.jsxs)("div",{className:"uploadMenu",children:[(0,a.jsx)("div",{className:"menuItem",onClick:f,children:s("File")}),(0,a.jsx)("div",{className:"menuItem",onClick:j,children:s("Folder")})]})]}),(0,a.jsx)("div",{style:{flex:1}}),(0,a.jsx)(o.zx,{icon:"file-import",label:s("Import"),onClick:w}),(0,a.jsx)(o.zx,{icon:"file-export",label:s("Export"),onClick:I})]}),(0,a.jsx)(o.iA,{empty:s("No files"),emptySpinner:s("Loading"),header:[[s("files"),"start",2],[s("file cid"),"expand",2],[void 0,"start"],[s("file size"),"expand",2],[s("status"),"expand"],[s("action"),"expand"],[]],children:m.files.map(((e,t)=>(0,a.jsxs)(P,{children:[(0,a.jsxs)("td",{className:"",colSpan:2,children:[e.items&&(0,a.jsx)(o.JO,{className:"highlight--color",icon:"folder"}),T(e.Name)]}),(0,a.jsx)("td",{className:"end",colSpan:2,children:e.Hash}),(0,a.jsx)("td",{className:"",colSpan:1,children:(0,a.jsx)(M,{value:e.Hash,children:(0,a.jsx)(o.Ct,{color:"highlight",hover:s("Copy file cid"),icon:"copy"})})}),(0,a.jsx)("td",{className:"end",colSpan:2,children:`${e.Size} bytes`}),(0,a.jsx)("td",{className:"end",colSpan:1,children:(0,a.jsx)("a",{href:"https://apps.crust.network/?rpc=wss%3A%2F%2Frpc.crust.network#/storage_files",rel:"noreferrer",target:"_blank",children:s("View status in Crust")})}),(0,a.jsx)("td",{className:"end",colSpan:1,children:(0,a.jsxs)("div",{className:"actions",children:[!e.items&&(0,a.jsx)(o.Ct,{color:"highlight",hover:s("Download"),icon:"download",onClick:F(e)}),(0,a.jsx)(M,{value:D(e),children:(0,a.jsx)(o.Ct,{color:"highlight",hover:s("Copy link"),icon:"copy"})})]})}),(0,a.jsx)("td",{colSpan:1})]},`files_item-${t}`)))}),(0,a.jsx)("div",{children:s("Note: The file list is cached locally, switching browsers or devices will not keep displaying the original browser information.")})]})})),O=n.memo((function({basePath:e,className:s}){const{t}=h(),r=(0,n.useRef)([{isRoot:!0,name:"crust",text:t("Your Files")}]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(o.mQ,{basePath:e,items:r.current}),(0,a.jsx)(q,{})]})}))},79865:(e,s,t)=>{t.d(s,{Z:()=>M});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(34814),c=t(74065),d=t(11677);const u=(0,d.e)("useProxies",(function(){const{api:e}=(0,i.h)(),{allAccounts:s}=(0,l.x)(),t=(0,c.X)(),[a,o]=(0,n.useState)({});return(0,n.useEffect)((()=>{s.length&&e.query.proxy.proxies.multi(s).then((e=>t.current&&o(e.map((([e],t)=>[s[t],e.map((({delegate:e})=>e.toString()))])).filter((([,e])=>e.length)).reduce(((e,[s,t])=>({...e,[s]:t})),{})))).catch(console.error)}),[s,e,t]),a}));var m=t(38894),h=t(13940),p=t(95292),x=t(61349);function g(){return(0,x.$G)("app-gilt")}const b=n.memo((function({className:e,isDisabled:s,proxies:t}){const{t:o}=g(),{api:l}=(0,i.h)(),[c,d]=(0,m.O)(),[u,x]=(0,n.useState)(null),[b,f]=(0,n.useState)(null),[j,v]=(0,n.useState)(),[y,C]=(0,n.useState)(),w=(0,n.useMemo)((()=>u&&j&&y?l.tx.proxy.proxy(u,null,l.tx.gilt.placeBid(j,y)):null),[l,u,j,y]),N=Object.keys(t),k=!j||j.isZero()||j.lt(l.consts.gilt.minFreeze),S=!y||!y.gte(p.If)||y.gt(l.consts.gilt.queueCount);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!N.length||s,label:o("Submit Bid"),onClick:d}),c&&(0,a.jsxs)(r.u_,{className:e,header:o("submit gilt bid"),onClose:d,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsxs)(r.u_.Columns,{hint:o("This account will make the bid for the gilt and pay all associated fees."),children:[(0,a.jsx)(r.rp,{filter:N,label:o("use proxied account"),labelExtra:(0,a.jsx)(h.Z,{label:(0,a.jsx)("span",{className:"label",children:o("transferrable")}),params:u}),onChange:x,type:"account"}),u&&(0,a.jsx)(r.rp,{filter:t[u],label:o("send via proxy"),onChange:f,type:"account"})]}),(0,a.jsxs)(r.u_.Columns,{hint:o("The amount you wish to lock for the duration. It needs to be more than the gilt minimum."),children:[(0,a.jsx)(r.H,{autoFocus:!0,defaultValue:l.consts.gilt.minFreeze,isError:k,isZeroable:!1,label:o("bid amount"),onChange:v}),(0,a.jsx)(r.H,{defaultValue:l.consts.gilt.minFreeze,isDisabled:!0,label:o("minimum freeze amount")})]}),(0,a.jsxs)(r.u_.Columns,{hint:o("The number of periods this bid is to be freezed for, less than the maximum period"),children:[(0,a.jsx)(r.Rn,{defaultValue:p.If,isError:S,isZeroable:!1,label:o("lock periods"),onChange:C}),(0,a.jsx)(r.Rn,{defaultValue:l.consts.gilt.queueCount,isDisabled:!0,label:o("maximum lock periods")})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:b,extrinsic:w,icon:"check",isDisabled:k||S||!u,label:o("Bid"),onStart:d})})]})]})}));var f=t(58607),j=t(14681);const v=n.memo((function({className:e,value:{balance:s,index:t,numItems:n}}){return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)(r.iA.Column.Id,{value:t}),(0,a.jsx)("td",{className:"number all",children:(0,j.u)(n)}),(0,a.jsx)("td",{className:"all",children:(0,a.jsx)(f.Z,{value:s})})]})})),y=n.memo((function({className:e,queueTotals:s}){const{t}=g(),o=(0,n.useRef)([[t("queues"),"start"],[t("participants"),"number"],[t("balance"),"number"]]);return(0,a.jsx)(r.iA,{className:e,empty:s&&t("No active gilt queues found."),header:o.current,children:s?.map((e=>(0,a.jsx)(v,{value:e},e.index)))})}));var C=t(54383),w=t(48801);const N=new(t.n(w)())(1e4),k=n.memo((function({activeTotal:e,className:s,isDisabled:t}){const{t:n}=g(),{api:o}=(0,i.h)(),l=(0,C.C)();return(0,a.jsxs)(r.Ty,{className:s,children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:n("active"),children:n(t?"no":"yes")}),e&&(0,a.jsx)(r.Jy,{label:n("index"),children:(0,j.u)(e.index)})]}),e&&(0,a.jsxs)("section",{children:[(0,a.jsxs)(r.Jy,{label:n("proportion"),children:[(e.proportion.mul(N).imul(p.S8).div(p.Wi).toNumber()/1e4).toFixed(2),"%"]}),(0,a.jsxs)(r.Jy,{label:n("target"),children:[(e.target.mul(N).imul(p.S8).div(p.Wi).toNumber()/1e4).toFixed(2),"%"]})]}),(0,a.jsx)("section",{children:l&&(0,a.jsx)(r.Jy,{label:n("intake"),progress:{total:o.consts.gilt.intakePeriod,value:l.mod(o.consts.gilt.intakePeriod),withTime:!0}})})]})}));var S=t(54890);const I={defaultValue:{},transform:([e,s])=>({activeIndex:e.index.isZero()?null:e.index.sub(p.If),activeTotal:e,queueTotals:s.map((([e,s],t)=>({balance:s,index:t+1,numItems:e}))).filter((({balance:e})=>!e.isZero()))})},A=(0,d.e)("useInfo",(function(){const{api:e}=(0,i.h)(),s=(0,S.L)([e.query.gilt.activeTotal,e.query.gilt.queueTotals],I);return(0,n.useMemo)((()=>({info:s})),[s])})),E=n.memo((function({className:e}){const s=u(),{info:t}=A(),o=(0,n.useMemo)((()=>!t||!t.activeTotal||t.activeTotal.target.isZero()),[t]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(k,{activeTotal:t?.activeTotal,isDisabled:o}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(b,{isDisabled:o,proxies:s})}),(0,a.jsx)(y,{queueTotals:t?.queueTotals})]})})),M=n.memo((function({basePath:e,className:s}){const{t}=g(),i=(0,n.useRef)([{isRoot:!0,name:"overview",text:t("Overview")}]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,items:i.current}),(0,a.jsx)(o.rs,{children:(0,a.jsx)(o.AW,{children:(0,a.jsx)(E,{})})})]})}))},30145:(e,s,t)=>{t.d(s,{Z:()=>D});var a=t(52322),n=t(2784),o=t(24732),r=t(90778),i=t(38894),l=t(43193),c=t(34100),d=t(14714),u=t(34578),m=t(61349);function h(){return(0,m.$G)("app-js")}const p=n.memo((function({className:e="",isCustomExample:s,isRunning:t,removeSnippet:r,runJs:i,saveSnippet:l,stopJs:c}){const{t:d}=h(),[u,m]=(0,n.useState)(""),p=(0,n.useCallback)((e=>m(e)),[]),x=(0,n.useCallback)((()=>{m("")}),[]),g=(0,n.useCallback)((()=>{l(u),x()}),[x,l,u]);return(0,a.jsxs)(o.zx.Group,{className:`${e} action-button`,children:[s?(0,a.jsx)(o.zx,{icon:"trash",onClick:r}):(0,a.jsx)(o.GI,{className:"popup-local",onCloseAction:x,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.II,{autoFocus:!0,maxLength:50,min:1,onChange:p,onEnter:g,placeholder:d("Name your example"),value:u,withLabel:!1}),(0,a.jsx)(o.zx,{icon:"save",isDisabled:!u.length,label:d("Save snippet to local storage"),onClick:g})]}),children:(0,a.jsx)(o.zx,{icon:"save",isReadOnly:!1})}),t?(0,a.jsx)(o.zx,{icon:"times",onClick:c}):(0,a.jsx)(o.zx,{className:"play-button",icon:"play",onClick:i})]})})),x="polkadot-app-js-examples",g="polkadot-app-js-selected",b={children:"Custom",color:"orange",size:"tiny"};var f=t(12909),j=t(1346),v=t(17751);const y=e=>(0,f.V)(e)?e.stack?e.stack:e.toString():(0,j.o)(e)?"undefined":(0,v.F)(e)?"null":Array.isArray(e)?`[${e.map(y).join(", ")}]`:e instanceof Map?`{${[...e.entries()].map((([e,s])=>`${e.toString()}: ${y(s)}`)).join(", ")}}`:e.toString(),C=({args:e,type:s},t)=>{try{return(0,a.jsx)("div",{className:`js--Log ${s}`,children:e.map(y).join(" ")},t)}catch(e){return(0,a.jsxs)("div",{className:`js--Log ${s} error`,children:["Internal error: ",e.stack||e.message]},t)}},w=o.zo.article`
  background-color: #4e4e4e;
  color: #ffffff;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  font: var(--font-mono);
  font-variant-ligatures: common-ligatures;
  line-height: 18px;
  padding: 50px 10px 10px;
  position: relative;
  width: 40%;

  .logs-wrapper {
    display: flex;
    flex: 1;
    min-height: 0;
  }

  .logs-container {
    flex: 1;
    overflow: auto;
  }

  .logs-content {
    height: auto;
  }

  .js--Log {
    animation: fadein 0.2s;
    margin: 0 0 5px 0;
    word-break: break-all;

    &.error {
      color: #f88;
    }
  }
`,N=n.memo((function({children:e,className:s="",logs:t}){return(0,a.jsxs)(w,{className:`${s} container`,children:[(0,a.jsx)("div",{className:"logs-wrapper",children:(0,a.jsx)("div",{className:"logs-container",children:(0,a.jsx)("pre",{className:"logs-content",children:t.map(C)})})}),e]})})),k={children:"Storage",color:"blue",size:"tiny"},S=[{value:"rpcNetworkAuthoring",text:"Get authoring information",label:{color:"pink",children:"RPC",size:"tiny"},code:"// Returns all pending extrinsics, potentially grouped by sender\nconst unsub = await api.rpc.author.pendingExtrinsics((extrinsics) => {\n  if(extrinsics.length === 0){\n    console.log('No pending extrinsics');\n    return;\n  }\n  console.log(extrinsics);\n});"},{value:"rpcListenToHead",text:"Listen to new Head",label:{color:"pink",children:"RPC",size:"tiny"},code:"// subscribe to new headers, printing the full info for 5 Blocks\nlet count = 0;\nconst unsub = await api.rpc.chain.subscribeNewHeads((header) => {\n  console.log(`#${header.number}:`, header);\n\n  if (++count === 5) {\n    console.log('5 headers retrieved, unsubscribing');\n    unsub();\n  }\n});"},{value:"rpcQueryState",text:"Get state metadata",label:{color:"pink",children:"RPC",size:"tiny"},code:"// retrieve and log the complete metadata of your node\nconst metadata = await api.rpc.state.getMetadata();\n\nconsole.log('version: ' + metadata.version);\nconsole.log('formatted: ' + JSON.stringify(metadata.asLatest.toHuman(), null, 2));\n"},{value:"rpcSystemInfo",text:"Get system information",label:{color:"pink",children:"RPC",size:"tiny"},code:"// Retrieve the chain & node information information via rpc calls\nconst [chain, nodeName, nodeVersion, properties] = await Promise.all([\n  api.rpc.system.chain(),\n  api.rpc.system.name(),\n  api.rpc.system.version(),\n  api.rpc.system.properties()\n]);\nconsole.log('You are connected to chain ' + chain)\nconsole.log('You are using: ' + nodeName + ' v' + nodeVersion);\n\nif (properties.size > 0) {\n  console.log('Node specific properties:');\n  properties.forEach((value, key) => {\n    console.log(key, value);\n  });\n} else {\n  console.log('No specific chain properties found.');\n}"},{code:"// Get chain state information\n// Make our basic chain state / storage queries, all in one go\n\nconst [now, minimumValidatorCount, validators] = await Promise.all([\n  api.query.timestamp.now(),\n  api.query.staking.minimumValidatorCount(),\n  api.query.session.validators()\n]);\n\nconsole.log('The current date is: ' + now);\nconsole.log('The minimum validator count: ' + minimumValidatorCount);\n\nif (validators && validators.length > 0) {\n  // Retrieve the balances for all validators\n  console.log('Validators');\n\n  const validatorBalances = await Promise.all(\n    validators.map((authorityId) => api.query.system.account(authorityId))\n  );\n\n  validators.forEach((authorityId, index) => {\n    console.log('Validator: ' + authorityId.toString() )\n    console.log('AccountData: ' + validatorBalances[index].toHuman() );\n  });\n}\n",label:k,text:"Get chain state information",value:"storageGetInfo"},{code:"// Subscribe to system events via storage\napi.query.system.events((events) => {\n  console.log('----- Received ' + events.length + ' event(s): -----');\n  // loop through the Vec<EventRecord>\n  events.forEach((record) => {\n  // extract the phase, event and the event types\n    const { event, phase } = record;\n    const types = event.typeDef;\n    // show what we are busy with\n    console.log(event.section + ':' + event.method + '::' + 'phase=' + phase.toString());\n    console.log(event.meta.docs.toString());\n    // loop through each of the parameters, displaying the type and data\n    event.data.forEach((data, index) => {\n      console.log(types[index].type + ';' + data.toString());\n    });\n  });\n});",label:k,text:"Listen to system events",value:"storageSystemEvents"},{code:"// You may leave this example running and make a transfer\n// of any value from or to Alice address in the 'Transfer' App\nconst ALICE = '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY';\n\n// Retrieve the initial data\nlet [, { free: previous }] = await api.query.system.account(ALICE);\n\nconsole.log('ALICE has a balance of ' + previous);\n\n// Subscribe and listen to balance changes\napi.query.system.account(ALICE, ([, { free }]) => {\n  // Calculate the delta\n  const change = free.sub(previous);\n  // Only display positive value changes (Since we are pulling 'previous' above already,\n  // the initial balance change will also be zero)\n  if (!change.isZero()) {\n    previous = free;\n    console.log('New transaction of: '+ change);\n  }\n});",label:k,text:"Listen to balance changes",value:"storageListenToBalanceChange"},{code:"// You may leave this example running and make a transfer\n// of any value from or to Alice/Bob address in the 'Transfer' App\nconst ALICE = '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY';\nconst BOB = '5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty';\n\nconsole.log('Tracking balances for:', [ALICE, BOB])\n\n// Subscribe and listen to several balance changes\napi.query.system.account.multi([ALICE, BOB], (info) => {\n  console.log('Change detected, new balances: ', info)\n});",label:k,text:"Listen to multiple balances changes",value:"storageListenToMultipleBalancesChange"},{code:"// This example set shows how to make queries at a point\nconst ALICE = '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY';\n\n// retrieve the balance, once-off at the latest block\nconst { data: { free } } = await api.query.system.account(ALICE);\n\nconsole.log('Alice has a current balance of', free.toHuman());\n\n// retrieve balance updates with an optional value callback\nconst balanceUnsub = await api.query.system.account(ALICE, ({ data: { free } }) => {\n  console.log('Alice has an updated balance of', free.toHuman());\n});\n\n// retrieve the balance at a block hash in the past\nconst header = await api.rpc.chain.getHeader();\nconst prevHash = await api.rpc.chain.getBlockHash(header.number.unwrap().subn(42));\nconst { data: { free: prev } } = await api.query.system.account.at(prevHash, ALICE);\n\nconsole.log('Alice had a balance of', prev.toHuman(), '(42 blocks ago)');\n\n// useful in some situations - the value hash and storage entry size\nconst currHash = await api.query.system.account.hash(ALICE);\nconst currSize = await api.query.system.account.size(ALICE);\n\nconsole.log('Alice account entry has a value hash of', currHash, 'with a size of', currSize);",label:k,text:"Retrieve historic query data",value:"storageRetrieveInfoOnQueryKeys"},{code:"// this example shows how to retrieve the hex representation of a storage key\n\nconst ALICE = '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY';\n\n// show the key for an entry without arguments\nconsole.log(api.query.timestamp.now.key());\n\n// show the key for a map entry (single argument)\nconsole.log(api.query.system.account.key(ALICE));\n\n// show the key prefix for a map\nconsole.log(api.query.system.account.keyPrefix());\n\n// show the key for a double map\nconsole.log(api.query.staking.erasStakers.key(0, ALICE));\n\n// show the key prefix for a doublemap\nconsole.log(api.query.staking.erasStakers.keyPrefix());\n",label:k,text:"Get underlying storage key hex values",value:"storageKeys"},{value:"constsStakingParameters",text:"Get staking parameters",label:{color:"green",children:"Consts",size:"tiny"},code:"// Get SRML staking parameters as consts\n// 'parameter_types' were added to substrate with spec_version: 101.\n// This example will throw an error if used with versions before that.\n\nconst bondingDuration = api.consts.staking.bondingDuration;\nconst sessionsPerEra = api.consts.staking.sessionsPerEra;\n\nconsole.log('Staking bonding duration: ' + bondingDuration);\nconsole.log('Staking sessions per era: ' + sessionsPerEra);"},{value:"extrinsicMakeTransfer",text:"Make transfer and listen to events",label:{color:"grey",children:"Extrinsics",size:"tiny"},code:"// Make a transfer from Alice to Bob and listen to system events.\n// You need to be connected to a development chain for this example to work.\nconst ALICE = '5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY';\nconst BOB = '5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty';\n\n// Get a random number between 1 and 100000\nconst randomAmount = Math.floor((Math.random() * 100000) + 1);\n\n// Create a extrinsic, transferring randomAmount units to Bob.\nconst transfer = api.tx.balances.transfer(BOB, randomAmount);\n\n// Sign and Send the transaction\nawait transfer.signAndSend(ALICE, ({ events = [], status }) => {\n  if (status.isInBlock) {\n    console.log('Successful transfer of ' + randomAmount + ' with hash ' + status.asInBlock.toHex());\n  } else {\n    console.log('Status of transfer: ' + status.type);\n  }\n\n  events.forEach(({ phase, event: { data, method, section } }) => {\n    console.log(phase.toString() + ' : ' + section + '.' + method + ' ' + data.toString());\n  });\n});"}],I=["atob","btoa"],A={Atomics:null,Bluetooth:null,Clipboard:null,Document:null,Function:null,Location:null,ServiceWorker:null,SharedWorker:null,USB:null,global:null,window:null},E=JSON.parse(JSON.stringify(S));let M=!1;const P=o.zo.main`
  display: flex;
  flex-direction: column;
  height: 100vh;
  position: relative;

  article {
    p:last-child {
      margin-bottom: 0;
    }
  }

  .js--Selection {
    margin-bottom: 1rem;
  }

  .js--Content {
    align-content: stretch;
    align-items: stretch;
    display: flex;
    height: 100%;
    justify-content: space-between;
    margin-bottom: 0;
  }

  .js--Dropdown {
    position: relative;
    z-index: 200;

    .dropdown .menu > .item {
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
    }
  }

  .js--Editor,
  .js--Output {
    min-width: 200px;

    .action-button {
      margin: 0;
      position: absolute;
      right: 0.5rem;
      top: 0.5rem;
      z-index: 100;
    }
  }

  .js--Editor {
    flex-grow: 1;
    overflow: auto;
    padding: 0;
    position: relative;
    resize: horizontal;
    width: 60%;

    textarea {
      outline: 0;
    }

    .codeflask {
      background: transparent;
    }

    .codeflask--has-line-numbers {
      z-index: 0;
    }

    .codeflask--has-line-numbers .codeflask__flatten {
      font-size: 12px;
      line-height: 18px;
      min-width: calc(100% - 40px);
      padding-top: 50px;
      width: auto;
    }

    .codeflask__lines {
      background: #f2f2f2;
      line-height: 18px;
      padding-top: 50px;
      z-index: 100;
    }

    &::after {
      bottom: 0;
      content: '↔';
      cursor: col-resize;
      font-size: 20px;
      height: 20px;
      line-height: 18px;
      position: absolute;
      right: 0;
      width: 22px;
      z-index: 1;
    }
  }

  .ui.popup.popup-local {
    display: flex;
    flex: 1 1 100%;
    max-width: 300px;
  }

  .warnOverlay {
    left: 0;
    position: absolute;
    right: 0;
    top: -0.25rem;
    z-index: 202;

    article p:first-child {
      padding-top: 1rem;
    }

    .ui--Button-Group {
      margin-bottom: 0;
    }
  }
`,T=n.memo((function({basePath:e,className:s=""}){const{t}=h(),m=(0,r.h)(),f=(0,n.useRef)(null),[j,v]=(0,n.useState)(""),[y,C]=(0,n.useState)(!1),[w,k]=(0,n.useState)(!1),[S,T]=(0,i.O)(!0),[D,F]=(0,n.useState)([]),[V,R]=(0,n.useState)([]),[q,O]=(0,n.useState)([]),[z,B]=(0,n.useState)(E[0]),$=(0,n.useRef)([{isRoot:!0,name:"playground",text:t("Console")}]);(0,n.useEffect)((()=>{M||(E.forEach((e=>{e.code=`${function(e){const s=`api, hashing, ${e?"keyring, ":""}types, util`;return`// All code is wrapped within an async closure,\n// allowing access to ${s}.\n// (async ({ ${s} }) => {\n//   ... any user code is executed here ...\n// })();\n\n`}(m.isDevelopment)}${e.code}`})),M=!0);const e={examples:localStorage.getItem(x),selectedValue:localStorage.getItem(g)},s=e.examples?JSON.parse(e.examples):[],t=[...s,...E],a=t.find((s=>s.value===e.selectedValue));F(s),C(a&&"custom"===a.type||!1),O(t),B(a||E[0])}),[]),(0,n.useEffect)((()=>{v(z.code)}),[z]);const L=(0,n.useCallback)((()=>R([])),[]),H=(0,n.useCallback)(((e,s)=>{V.push({args:s,type:e}),R(V.slice(0))}),[V]),_=(0,n.useCallback)((()=>{f.current&&(f.current.api.disconnect().catch(console.error),f.current=null),k(!1)}),[]),Z=(0,n.useCallback)((()=>{(async function(){k(!0),L(),f.current=function({api:e,isDevelopment:s},t,a){return{...Object.keys(window).filter((e=>!e.includes("-")&&!I.includes(e))).reduce(((e,s)=>(e[s]=null,e)),{...A}),api:e.clone(),console:{error:(...e)=>a("error",e),log:(...e)=>a("log",e)},hashing:u,keyring:s?c.ZP.keyring:null,setIsRunning:t,types:l,uiKeyring:s?c.ZP:null,util:d}}(m,k,H),await f.current.api.isReady;try{const e=`(async ({${Object.keys(f.current).sort().join(",")}}) => { try { ${j} \n } catch (error) { console.error(error); setIsRunning(false); } })(injected);`;new Function("injected",e).bind({},f.current)()}catch(e){f.current.console.error(e)}k(!1)})().catch(console.error)}),[L,H,m,j]),W=(0,n.useCallback)((e=>{if(_(),e.length){const s=q.find((s=>s.value===e));s&&(localStorage.setItem(g,e),L(),C("custom"===s.type),B(s))}}),[L,_,q]),U=(0,n.useCallback)((()=>{const e=D.filter((e=>e.value!==z.value)),s=[...e,...E];F(e),C("custom"===s[0].type),O(s),W(s[0].value),localStorage.setItem(x,JSON.stringify(e))}),[W,D,z.value]),J=(0,n.useCallback)((e=>{const s={code:j,label:b,text:e,type:"custom",value:`custom-${Date.now()}`},t=[s,...D,...E];localStorage.setItem(x,JSON.stringify([s,...D])),F([s,...D]),C(!0),O(t),B(s)}),[j,D]),G="custom"===z.type?z.text:void 0;return(0,a.jsxs)(P,{className:`${s} js--App`,children:[(0,a.jsx)(o.mQ,{basePath:e,items:$.current}),(0,a.jsx)("section",{className:"js--Selection",children:(0,a.jsx)(o.Lt,{className:"js--Dropdown",isFull:!0,label:t("Select example"),onChange:W,options:q,value:z.value})}),(0,a.jsxs)("section",{className:"js--Content",children:[(0,a.jsxs)("article",{className:"container js--Editor",children:[(0,a.jsx)(p,{isCustomExample:y,isRunning:w,removeSnippet:U,runJs:Z,saveSnippet:J,snippetName:G,stopJs:_}),(0,a.jsx)(o.ML,{code:j,onEdit:v})]}),(0,a.jsx)(N,{className:"js--Output",logs:V,children:(0,a.jsx)(o.zx,{className:"action-button",icon:"eraser",onClick:L})})]}),S&&(0,a.jsx)("div",{className:"warnOverlay",children:(0,a.jsxs)("article",{className:"warning centered",children:[(0,a.jsx)("p",{children:t("This is a developer tool that allows you to execute selected snippets in a limited context.")}),(0,a.jsx)("p",{children:t("Never execute JS snippets from untrusted sources.")}),(0,a.jsx)("p",{children:t("Unless you are a developer with insight into what the specific script does to your environment (based on reading the code being executed) generally the advice would be to not use this environment.")}),(0,a.jsx)(o.zx.Group,{children:(0,a.jsx)(o.zx,{icon:"times",label:t("Close"),onClick:T})})]})})]})})),D=n.memo((function(e){return(0,a.jsx)(T,{...e})}))},51213:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(52322),n=t(2784),o=t(95499);const r=n.memo((function({basePath:e,className:s}){return(0,a.jsx)(o.Z,{basePath:e,className:s,type:"membership"})}))},16743:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(90778),n=t(9118),o=t(11677);const r={transform:e=>e.length},i=(0,o.e)("useCounter",(function(){const{api:e,isApiReady:s}=(0,a.h)();return(0,n.W7)(s&&e.query.membership?.proposals,void 0,r)||0}))},50313:(e,s,t)=>{t.d(s,{Z:()=>q});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(34814),l=t(14681),c=t(61349);function d(){return(0,c.$G)("app-nfts")}const u=n.memo((function({className:e,collectionName:s,value:{account:t,id:n,ipfsData:o}}){const i=o?.name||s,l=o?.image?`https://ipfs.io/ipfs/${o.image}`:"";return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)(r.iA.Column.Id,{value:n}),(0,a.jsx)("td",{className:"together all",children:i&&l?(0,a.jsx)(r.JH,{href:l,icon:"braille",label:i,rel:"noopener",target:"_blank"}):i}),(0,a.jsx)("td",{className:"address media--1000",children:(0,a.jsx)(r.N,{value:t})})]})}));var m=t(74065),h=t(90778),p=t(11677);const x=(0,p.e)("useAccountItems",(function(){const e=(0,m.X)(),{api:s}=(0,h.h)(),{allAccounts:t}=(0,i.x)(),[a,o]=(0,n.useState)();return(0,n.useEffect)((()=>{if(!t.length)return;const a=t.map((e=>s.query.uniques.account.keys(e)));Promise.all(a).then((s=>e.current&&o(function(e){return e.filter((e=>!!e.length)).map((e=>e.map((e=>{const[s,t,a]=e.args;return{accountId:s,collectionId:t,itemId:a}})))).flat()}(s)))).catch(console.error)}),[t,s.query.uniques.account,e]),a}));var g=t(9118),b=t(67239);const f={withParams:!0},j={transform:e=>{if(!e)return null;try{const s=JSON.parse(e);if(s&&"object"==typeof s)return{image:"string"==typeof s.image?s.image.replace(/ipfs:\/\/|ipfs\//gi,""):null,name:"string"==typeof s.name?s.name:null}}catch{}return null}},v=(0,p.e)("useItemsInfos",(function(e){const{api:s}=(0,h.h)(),[t,a]=(0,n.useState)(),o=(0,n.useMemo)((()=>e.map((({collectionId:e,itemId:s})=>[e,s]))),[e]),r=(0,g.W7)(s.query.uniques.instanceMetadataOf.multi,[o],f),i=(0,n.useMemo)((()=>{if(r&&r[1].length)return r[1].map((e=>e.isSome?e.unwrap().data.toString():""))}),[r]),l=(0,b.g)(i,j);return(0,n.useEffect)((()=>{if(l&&e.length&&r&&r[0][0].length){const[s]=r[0][0][0];if(!s.eq(o[0][0]))return;const t=r[0][0].map(((s,t)=>function([,e],s,t){const{accountId:a}=t.find((({itemId:s})=>s.eq(e)));return{account:a,id:e,ipfsData:null,key:e.toString(),metadata:s.unwrapOr(null)}}(s,r[1][t],e)));a(t.map((e=>s=>{const t=s.metadata&&s.metadata.data.toString();return{...s,ipfsData:t&&e.has(t)&&e.get(t)||null}})(l)))}}),[e,o,l,r]),t})),y=r.zo.div`
  table {
    overflow: auto;
  }
`,C=n.memo((function({className:e,infos:s=[]}){const{t}=d(),o=` - ${t("no name")} -`,[i,c]=(0,n.useState)(0),[m,h]=(0,n.useState)(null),p=x(),g=(0,n.useMemo)((()=>m&&p?p.filter((({collectionId:e})=>e.eq(m.id))):[]),[m,p]),b=v(g),f=m?.ipfsData?.name||o,j=(0,n.useMemo)((()=>p?s.filter((e=>!(!e.details||!e.metadata)&&p.some((({collectionId:s})=>e.id.eq(s))))).sort(((e,s)=>e.id.cmp(s.id))):[]),[s,p]),C=(0,n.useMemo)((()=>j.map((({id:e,ipfsData:s},t)=>({text:`${s?.name||o} (ID: ${(0,l.u)(e)})`,value:t})))),[j,o]),w=(0,n.useRef)([[t("items"),"start",2],[t("owner"),"address media--1000"]]);return(0,n.useEffect)((()=>{h((()=>i>=0&&i<j.length?j[i]:null))}),[j,i]),(0,a.jsx)(y,{className:e,children:(0,a.jsx)(r.iA,{empty:!m&&p&&t("No accounts with items found for the collection"),filter:C.length?(0,a.jsx)(r.Lt,{isFull:!0,label:t("the collection to query for items"),onChange:c,options:C,value:i}):void 0,header:w.current,children:b&&b.map((e=>(0,a.jsx)(u,{collectionName:f,value:e},e.key)))})})})),w=n.memo((function({className:e,value:{details:s,id:t,ipfsData:n}}){const{t:o}=d(),i=n?.name||"",c=n?.image?`https://ipfs.io/ipfs/${n.image}`:"";return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)(r.iA.Column.Id,{value:t}),(0,a.jsx)("td",{className:"together all",children:i&&c?(0,a.jsx)(r.JH,{href:c,icon:"braille",label:i,rel:"noopener",target:"_blank"}):i}),(0,a.jsx)("td",{className:"address media--1000",children:s&&(0,a.jsx)(r.N,{value:s.owner})}),(0,a.jsx)("td",{className:"string",children:s&&s.isFrozen.isTrue&&o("Frozen")}),(0,a.jsx)("td",{className:"number",children:s&&(0,l.u)(s.items||s.instances)})]})})),N=n.memo((function({className:e,infos:s}){const{t}=d(),o=(0,n.useRef)([[t("collections"),"start",2],[t("owner"),"address media--1000"],[t("status")],[t("items")]]);return(0,a.jsx)(r.iA,{className:e,empty:s&&t("No collections found"),header:o.current,children:s?.map((e=>(0,a.jsx)(w,{value:e},e.key)))})})),k=n.memo((function({className:e,numCollections:s}){const{t}=d();return(0,a.jsx)(r.Ty,{className:e,children:(0,a.jsx)(r.Jy,{label:t("collections"),children:(0,l.u)(s)})})})),S=n.memo((function({className:e,ids:s,infos:t}){return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(k,{numCollections:s?.length}),(0,a.jsx)(N,{infos:t})]})}));var I=t(12298),A=t(39824);const E={transform:e=>e.map((({args:[e]})=>e)).sort(((e,s)=>e.cmp(s)))};function M(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:a}})=>{"Created"===a||"ForceCreated"===a?s.push(e):t.push(e)})),{added:s,removed:t}}const P=(0,p.e)("useCollectionIds",(function(){const{api:e}=(0,h.h)(),s=(0,I.k)(e.query.uniques.class,[],E);return(0,A.N)([e.events.uniques.Created,e.events.uniques.Destroyed,e.events.uniques.ForceCreated],M,s)})),T={isAdminMe:!1,isFreezerMe:!1,isIssuerMe:!1,isOwnerMe:!1},D={withParams:!0},F={transform:e=>{if(!e)return null;try{const s=JSON.parse(e);if(s&&"object"==typeof s)return{image:"string"==typeof s.image?s.image.replace(/ipfs:\/\/|ipfs\//gi,""):null,name:"string"==typeof s.name?s.name:null}}catch{}return null}};function V(e,s){const t=s.toString();return e.some((e=>e===t))}const R=(0,p.e)("useCollectionInfos",(function(e){const{api:s}=(0,h.h)(),{allAccounts:t}=(0,i.x)(),a=(0,g.W7)(s.query.uniques.classMetadataOf.multi,[e],D),o=(0,g.W7)(s.query.uniques.class.multi,[e],D),[r,l]=(0,n.useState)(),c=(0,n.useMemo)((()=>a&&a[1].length?a[1].map((e=>e.isSome?e.unwrap().data.toString():"")):[]),[a]),d=(0,b.g)(c,F);return(0,n.useEffect)((()=>{if(d&&o&&a&&o[0][0].length===a[0][0].length){const e=o[0][0].map(((e,s)=>function(e,s,t,a){const n=t.unwrapOr(null);return{...n?{isAdminMe:V(e,n.admin),isFreezerMe:V(e,n.freezer),isIssuerMe:V(e,n.issuer),isOwnerMe:V(e,n.owner)}:T,details:n,id:s,ipfsData:null,key:s.toString(),metadata:a.unwrapOr(null)}}(t,e,o[1][s],a[1][s])));l(e.map((e=>s=>{const t=s.metadata&&s.metadata.data?.toString();return{...s,ipfsData:t&&e.has(t)&&e.get(t)||null}})(d)))}}),[t,o,e,d,a]),r})),q=n.memo((function({basePath:e,className:s}){const{t}=d(),{hasAccounts:l}=(0,i.x)(),c=P(),u=R(c),m=(0,n.useRef)([{isRoot:!0,name:"overview",text:t("Overview")},{name:"my-nfts",text:t("My NFTs")}]),h=(0,n.useMemo)((()=>l&&u&&u.some((({details:e,metadata:s})=>!(!e||!s)))?[]:["my-nfts"]),[l,u]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,hidden:h,items:m.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/my-nfts`,children:(0,a.jsx)(C,{infos:u})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(S,{ids:c,infos:u})})]})]})}))},9847:(e,s,t)=>{t.d(s,{Z:()=>g});var a=t(52322),n=t(2784),o=t(24732),r=t(90778),i=t(41411),l=t(18837),c=t(13940),d=t(95292),u=t(33661),m=t(58464);const h=Number.MAX_SAFE_INTEGER,p=["xcm","xcmPallet","polkadotXcm"];function x({paraId:e,text:s,ui:t}){return{text:(0,a.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,a.jsx)(o.Mj,{className:"ui--Dropdown-icon",logo:t.logo}),(0,a.jsx)("div",{className:"ui--Dropdown-name",children:s})]},e),value:e||-1}}const g=n.memo((function({onClose:e}){const{t:s}=(0,m.$)(),{api:t}=(0,r.h)(),[g,b]=(0,n.useState)(d.nw),[f,j]=(0,n.useState)(null),[v,y]=(0,n.useState)(null),[C,w]=(0,n.useState)(h),{allowTeleport:N,destinations:k,isParaTeleport:S,oneWay:I}=(0,i.M)(),A=(0,n.useMemo)((()=>{const e=p.filter((e=>t.tx[e]&&(0,u.m)(t.tx[e].limitedTeleportAssets)))[0];return t.tx[e].limitedTeleportAssets}),[t]),E=(0,n.useMemo)((()=>k.map(x)),[k]),M=(0,n.useMemo)((()=>k.find((({paraId:e},s)=>-1===C?0===s:C===e))?.value),[k,C]),P=(0,l.J)(M),T=(0,n.useMemo)((()=>[{V1:S?{interior:"Here",parents:1}:{interior:{X1:{ParaChain:C}},parents:0}},{V1:{interior:{X1:{AccountId32:{id:t.createType("AccountId32",f).toHex(),network:"Any"}}},parents:0}},{V1:[{fun:{Fungible:g},id:{Concrete:{interior:"Here",parents:S?1:0}}}]},0,{Unlimited:null}]),[t,g,S,f,C]),D=!!g;return(0,a.jsxs)(o.u_,{header:s("Teleport assets"),onClose:e,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:s("The transferred balance will be subtracted (along with fees) from the sender account."),children:(0,a.jsx)(o.rp,{label:s("send from account"),labelExtra:(0,a.jsx)(c.Z,{label:s("transferrable"),params:v}),onChange:y,type:"account"})}),0!==E.length&&(0,a.jsxs)(o.u_.Columns,{hint:s("The destination chain for this asset teleport. The transferred value will appear on this chain."),children:[(0,a.jsx)(o.Lt,{defaultValue:E[0].value,label:s("destination chain"),onChange:w,options:E}),!S&&I.includes(C)&&(0,a.jsx)(o.Pd,{content:s("Currently this is a one-way transfer since the on-chain runtime functionality to send the funds from the destination chain back to this account not yet available.")})]}),(0,a.jsx)(o.u_.Columns,{hint:s("The beneficiary will have access to the transferred amount when the transaction is included in a block."),children:(0,a.jsx)(o.rp,{label:s("send to address"),onChange:j,type:"allPlus"})}),(0,a.jsxs)(o.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:s("This is the amount to be teleported to the destination chain and does not account for the source or the destination transfer fee")}),(0,a.jsx)("p",{children:s("The amount deposited to the recipient will be net the calculated cross-chain fee. If the recipient address is new, the amount deposited should be greater than the Existential Deposit")})]}),children:[(0,a.jsx)(o.H,{autoFocus:!0,isError:!D,isZeroable:!0,label:s("amount"),onChange:b}),(0,a.jsx)(o.H,{defaultValue:P?.consts.balances?.existentialDeposit,isDisabled:!0,isLoading:!P,label:s("destination existential deposit")})]})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:v,icon:"share-square",isDisabled:!(N&&D&&f&&g&&P&&(S||C!==h)),label:s("Teleport"),onStart:e,params:T,tx:A})})]})}))},93242:(e,s,t)=>{t.d(s,{Z:()=>vs});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(9118),c=t(58464),d=t(31132),u=t(14681);const m=n.memo((function({auctionInfo:e,blockNumber:s,className:t="",isFirst:n,isLatest:o,value:{accountId:i,firstSlot:l,isCrowdloan:d,lastSlot:m,paraId:h,value:p}}){const{t:x}=(0,c.$)();return(0,a.jsxs)("tr",{className:t,children:[(0,a.jsx)("td",{children:n&&(0,a.jsx)("h1",{children:o?x("latest"):(0,a.jsxs)(a.Fragment,{children:["#",(0,u.u)(!s||s.isZero()?e.endBlock:s)]})})}),(0,a.jsx)(r.iA.Column.Id,{value:h}),(0,a.jsx)("td",{className:"badge",children:(0,a.jsx)(r.f,{id:h})}),(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(r.ax,{value:i})}),(0,a.jsx)("td",{className:"all number",children:x(d?"Yes":"No")}),(0,a.jsx)("td",{className:"all number together",children:l.eq(m)?(0,u.u)(l):`${(0,u.u)(l)} - ${(0,u.u)(m)}`}),(0,a.jsx)(r.iA.Column.Balance,{value:p})]})})),h=n.memo((function({auctionInfo:e,campaigns:s,className:t,winningData:o}){const{t:u}=(0,c.$)(),{api:h}=(0,i.h)(),p=(0,d.f)(),x=(0,l.W7)(h.query.crowdloan.newRaise),g=(0,n.useRef)([[u("bids"),"start",3],[u("bidder"),"address"],[u("crowdloan")],[u("leases")],[u("value")]]),b=(0,n.useMemo)((()=>{if(x&&e&&e.leasePeriod&&s.funds){const t=e.leasePeriod,a=t.add(p);return s.funds.filter((({firstSlot:e,isWinner:s,lastSlot:n,paraId:o})=>!s&&x.some((e=>e.eq(o)))&&e.gte(t)&&n.lte(a))).sort(((e,s)=>s.value.cmp(e.value)))}}),[e,s,x,p]),f=(0,n.useCallback)(((s,t)=>!t&&x&&e?.leasePeriod&&b?s.concat(...b.filter((({firstSlot:e,lastSlot:t,paraId:a,value:n})=>!s.some((s=>s.firstSlot.eq(e)&&s.lastSlot.eq(t)))&&!b.some((s=>!a.eq(s.paraId)&&e.eq(s.firstSlot)&&t.eq(s.lastSlot)&&n.lt(s.value)))))).map((e=>b.find((({firstSlot:s,lastSlot:t,value:a})=>e.firstSlot.eq(s)&&e.lastSlot.eq(t)&&e.value.lt(a)))||e)).sort(((e,s)=>e.firstSlot.eq(s.firstSlot)?e.lastSlot.cmp(s.lastSlot):e.firstSlot.cmp(s.firstSlot))):s),[e,b,x]);return(0,a.jsx)(r.iA,{className:t,empty:x&&e&&e.numAuctions&&o&&(e.endBlock&&!o.length?u("No winners in this auction"):u("No ongoing auction")),header:g.current,noBodyTag:!0,children:e&&e.leasePeriod&&o&&b&&(o.length?o.map((({blockNumber:s,winners:t},n)=>(0,a.jsx)("tbody",{children:f(t,0!==n||1!==o.length).map(((t,o)=>(0,a.jsx)(m,{auctionInfo:e,blockNumber:s,isFirst:0===o,isLatest:0===n,value:t},`${s.toString()}:${t.key}`)))},n))):0!==b.length&&(0,a.jsx)("tbody",{children:f([],!1).map(((s,t)=>(0,a.jsx)(m,{auctionInfo:e,isFirst:0===t,isLatest:!0,value:s},`latest-crowd:${s.key}`)))},"latest-crowd"))})}));var p=t(34814),x=t(54383),g=t(38894),b=t(95292);const f=n.memo((function({noCodeCheck:e,onChange:s,ownedIds:t}){const{t:o}=(0,c.$)(),[i,l]=(0,n.useState)(null),[d,u]=(0,n.useState)(0);(0,n.useEffect)((()=>{s(i&&d?{accountId:i,paraId:d}:{accountId:null,paraId:0})}),[i,s,t,d]);const m=(0,n.useMemo)((()=>t.map((({manager:e})=>e))),[t]),h=(0,n.useMemo)((()=>t.filter((({manager:e})=>e===i)).map((({paraId:e})=>({text:e.toString(),value:e.toNumber()})))),[i,t]),p=(0,n.useCallback)((s=>u(e||t.some((({hasCode:e,paraId:t})=>t.eq(s)&&e))?s:0)),[e,t]);return(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:o("This account that has been used to register the parachain. This will pay all associated fees.")}),(0,a.jsx)("p",{children:o("The parachain id is associated with the selected account via parathread registration.")})]}),children:[(0,a.jsx)(r.rp,{filter:m,label:o("parachain owner"),onChange:l,type:"account",value:i}),i&&(0,a.jsx)(r.Lt,{defaultValue:h[0].value,label:o("parachain id"),onChange:p,options:h},i),!e&&!d&&(0,a.jsx)(r.oy,{content:o("Before using this registered paraId, you need to have a WASM validation function registered on-chain")})]})})),j={accountId:null,paraId:0},v=n.memo((function({auctionInfo:e,className:s,lastWinners:t,ownedIds:o}){const{t:l}=(0,c.$)(),{api:m}=(0,i.h)(),{hasAccounts:h}=(0,p.x)(),v=(0,x.C)(),y=(0,d.E)(),[{accountId:C,paraId:w},N]=(0,n.useState)(j),[k,S]=(0,n.useState)(b.nw),[I,A]=(0,n.useState)(0),[E,M]=(0,g.O)(),P=(0,n.useMemo)((()=>{if(!e?.leasePeriod)return[];const s=e.leasePeriod.toNumber();return y.map((([e,t],a)=>({firstSlot:s+e,lastSlot:s+t,text:`${(0,u.u)(s+e)} - ${(0,u.u)(s+t)}`,value:a})))}),[e,y]),T=(0,n.useMemo)((()=>t&&t.winners.find((({firstSlot:e,lastSlot:s})=>e.eqn(P[I].firstSlot)&&s.eqn(P[I].lastSlot)))),[t,I,P]),D=!(!k||!T)&&k.lte(T.value),F=!k||k.isZero()||D;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!o.length||!h||!e?.numAuctions||!e.leasePeriod||!e.endBlock||!m.consts.auctions||v?.gte(e.endBlock.add(m.consts.auctions.endingPeriod)),label:l("Bid"),onClick:M}),E&&(0,a.jsxs)(r.u_,{className:s,header:l("Place bid"),onClose:M,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(f,{onChange:N,ownedIds:o}),(0,a.jsx)(r.u_.Columns,{hint:l("The first and last lease period for this bid. The last lease period should be after the first with the maximum determined by the auction config."),children:(0,a.jsx)(r.Lt,{label:l("bid period range (first lease - last lease)"),onChange:A,options:P,value:I})}),(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:l("The amount to to bid for this parachain lease period range.")}),(0,a.jsx)("p",{children:l("The bid should be more than the current range winner to be accepted and influence the auction outcome.")})]}),children:[(0,a.jsx)(r.H,{autoFocus:!0,isError:F,isZeroable:!1,label:l("bid amount"),onChange:S}),(0,a.jsx)(r.H,{defaultValue:T?.value,isDisabled:!0,label:l("current range winning bid")},I)]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:C,icon:"plus",isDisabled:!w||F||!e?.leasePeriod,label:l("Bid"),onStart:M,params:[w,e?.numAuctions,e?.leasePeriod?.addn(y[I][0]),e?.leasePeriod?.addn(y[I][1]),k],tx:m.tx.auctions.bid})})]})]})}));var y=t(58607);const C=n.memo((function({auctionInfo:e,className:s,lastWinners:t}){const{t:n}=(0,c.$)(),{api:o}=(0,i.h)(),d=(0,x.C)(),m=(0,l.W7)(o.query.balances?.totalIssuance);return(0,a.jsxs)(r.Ty,{className:s,children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:n("auctions"),children:e?(0,u.u)(e.numAuctions):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(r.Jy,{label:n("active"),children:e?e.leasePeriod?n("yes"):n("no"):(0,a.jsx)("span",{className:"--tmp",children:n("no")})})]}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{children:[e.leasePeriod&&(0,a.jsxs)(r.Jy,{label:n("first - last"),children:[(0,u.u)(e.leasePeriod)," - ",(0,u.u)(e.leasePeriod.add(o.consts.auctions.leasePeriodsPerSlot).isub(b.If))]}),m&&t&&(0,a.jsx)(r.Jy,{label:n("total"),progress:{hideValue:!0,total:m,value:t.total,withTime:!0},children:(0,a.jsx)(y.Z,{value:t.total,withSi:!0})})]}),(0,a.jsx)("section",{children:e?.endBlock&&d&&(d.lt(e.endBlock)?(0,a.jsxs)(r.Jy,{label:n("end period at"),progress:{hideGraph:!0,total:e.endBlock,value:d,withTime:!0},children:["#",(0,u.u)(e.endBlock)]}):(0,a.jsx)(r.Jy,{label:n("ending period"),progress:{total:o.consts.auctions?.endingPeriod,value:d.sub(e.endBlock),withTime:!0}}))})]})]})})),w=n.memo((function({auctionInfo:e,campaigns:s,className:t,ownedIds:n,winningData:o}){const i=o&&o[0];return(0,a.jsxs)("div",{className:t,children:[(0,a.jsx)(C,{auctionInfo:e,lastWinners:i}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(v,{auctionInfo:e,lastWinners:i,ownedIds:n})}),(0,a.jsx)(h,{auctionInfo:e,campaigns:s,winningData:o})]})})),N={accountId:null,paraId:0},k=n.memo((function({auctionInfo:e,bestNumber:s,className:t,leasePeriod:o,ownedIds:l}){const{t:u}=(0,c.$)(),{api:m}=(0,i.h)(),h=(0,d.E)(),[{accountId:p,paraId:x},j]=(0,n.useState)(N),[v,y]=(0,n.useState)(),[C,w]=(0,n.useState)(),[k,S]=(0,n.useState)(),[I,A]=(0,n.useState)(),[E,M]=(0,g.O)(),P=h[h.length-1][1]-h[0][0],T=!s||!C||C.lt(s),D=!k||!!o&&k.lt(o.currentPeriod),F=!I||!k||I.lt(k)||I.gt(k.addn(P)),V=(e?.leasePeriod||o?.currentPeriod.add(b.If)||1).toString();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!l.length,label:u("Add fund"),onClick:M}),E&&(0,a.jsxs)(r.u_,{className:t,header:u("Add campaign"),onClose:M,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(f,{onChange:j,ownedIds:l}),(0,a.jsx)(r.u_.Columns,{hint:u("The amount to be raised in this funding campaign."),children:(0,a.jsx)(r.H,{isZeroable:!1,label:u("crowdfund cap"),onChange:y})}),(0,a.jsx)(r.u_.Columns,{hint:u("The end block for contributions to this fund."),children:(0,a.jsx)(r.Rn,{isError:T,label:u("ending block"),onChange:w})}),(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:u("The first and last lease periods for this funding campaign.")}),(0,a.jsx)("p",{children:u("The ending lease period should be after the first and a maximum of {{maxPeriods}} periods more than the first",{replace:{maxPeriods:P}})})]}),children:[(0,a.jsx)(r.Rn,{defaultValue:V,isError:D,label:u("first period"),onChange:S}),(0,a.jsx)(r.Rn,{defaultValue:V,isError:F,label:u("last period"),onChange:A})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:p,icon:"plus",isDisabled:!x||!v?.gt(b.nw)||T||D||F,label:u("Add"),onStart:M,params:[x,v,k,I,C,null],tx:m.tx.crowdloan.create})})]})]})}));var S=t(62395),I=t(84450),A=t(65874),E=t(74076),M=t(92730);const P=[132,134],T=n.memo((function({cap:e,className:s,needsSignature:t,paraId:o,raised:l}){const{t:d}=(0,c.$)(),{api:u}=(0,i.h)(),{hasAccounts:m}=(0,p.x)(),[h,x]=(0,g.O)(),[b,f]=(0,n.useState)(null),[j,v]=(0,n.useState)(),[y,C]=(0,n.useState)(null),w=(0,n.useMemo)((()=>t&&!function(e,s){if((0,E.vq)(s)&&P.includes(s.length))try{return e.createType("MultiSignature",s),!0}catch(e){console.error(e)}return!1}(u,y)),[u,t,y]),N=e.sub(l),k=!j||j.lt(u.consts.crowdloan.minContribution),S=!(!j||!j.gt(N)),I=k||S;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!m,label:d("Contribute"),onClick:x}),h&&(0,a.jsxs)(r.u_,{className:s,header:d("Contribute to fund"),onClose:x,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:d("This account will contribute to the crowdloan."),children:(0,a.jsx)(r.rp,{label:d("contribute from"),onChange:f,type:"account",value:b})}),(0,a.jsxs)(r.u_.Columns,{hint:d("The amount to contribute from this account."),children:[(0,a.jsx)(r.H,{autoFocus:!0,defaultValue:u.consts.crowdloan.minContribution,isError:I,isZeroable:!1,label:d("contribution"),onChange:v}),k&&(0,a.jsx)(r.Pd,{content:d("The amount is less than the minimum allowed contribution of {{value}}",{replace:{value:(0,M.a)(u.consts.crowdloan.minContribution)}})}),S&&(0,a.jsx)(r.Pd,{content:d("The amount is more than the remaining contribution needed {{value}}",{replace:{value:(0,M.a)(N)}})})]}),t&&(0,a.jsxs)(r.u_.Columns,{hint:d("The verifier signature that is to be associated with this contribution."),children:[(0,a.jsx)(r.II,{isError:w,label:d("verifier signature"),onChange:C,placeholder:d("0x...")}),w&&(0,a.jsx)(r.Pd,{content:d("The hex-encoded verifier signature should be provided to you by the team running the crowdloan (based on the information you provide).")})]}),(0,a.jsxs)(r.u_.Columns,{hint:d("The above contribution should more than minimum contribution amount and less than the remaining value."),children:[(0,a.jsx)(r.H,{defaultValue:u.consts.crowdloan.minContribution,isDisabled:!0,label:d("minimum allowed")}),(0,a.jsx)(r.H,{defaultValue:N,isDisabled:!0,label:d("remaining till cap")})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:b,icon:"plus",isDisabled:I||w,label:d("Contribute"),onStart:x,params:[o,j,y],tx:u.tx.crowdloan.contribute})})]})]})})),D=n.memo((function({className:e,paraId:s}){const{t}=(0,c.$)(),{api:o}=(0,i.h)(),{hasAccounts:l}=(0,p.x)(),[d,u]=(0,g.O)(),[m,h]=(0,n.useState)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"minus",isDisabled:!l,label:t("Refund"),onClick:u}),d&&(0,a.jsxs)(r.u_,{className:e,header:t("Withdraw from fund"),onClose:u,size:"large",children:[(0,a.jsx)(r.u_.Content,{children:(0,a.jsx)(r.u_.Columns,{hint:t("This account will be used to send the transaction."),children:(0,a.jsx)(r.rp,{label:t("requesting from"),onChange:h,type:"account",value:m})})}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:m,icon:"credit-card",label:t("Refund"),onStart:u,params:[s],tx:o.tx.crowdloan.refund})})]})]})}));var F=t(11677),V=t(90107);const R={blockHash:"-",contributorsHex:[],hasLoaded:!1,myAccounts:[],myAccountsHex:[],myContributions:{}},q=(0,F.e)("useContributions",(function(e){const{api:s}=(0,i.h)(),{allAccountsHex:t}=(0,p.x)(),[a,o]=(0,n.useState)((()=>R)),r=(0,l.W7)(s.derive.crowdloan.contributions,[e]),c=(0,l.W7)(s.derive.crowdloan.ownContributions,[e,a.myAccountsHex]);return(0,n.useEffect)((()=>{r&&o((e=>{let a,n=r.contributorsHex.filter((e=>t.includes(e)));return n.length===e.myAccountsHex.length?(n=e.myAccountsHex,a=e.myAccounts):a=n.map((e=>(0,V.m)(e,s.registry.chainSS58))),{...e,...r,hasLoaded:!0,myAccounts:a,myAccountsHex:n}}))}),[s,t,r]),(0,n.useEffect)((()=>{c&&o((e=>({...e,myContributions:c})))}),[c]),a})),O=n.memo((function({bestHash:e,bestNumber:s,className:t="",isOngoing:o,leasePeriod:l,value:{info:{cap:d,depositor:m,end:h,firstPeriod:x,lastPeriod:g,raised:b,verifier:f},isCapped:j,isEnded:v,isWinner:C,paraId:w}}){const{t:N}=(0,c.$)(),{api:k}=(0,i.h)(),{isAccount:S}=(0,p.x)(),E=(0,I.jC)(w),{blockHash:M,contributorsHex:P,hasLoaded:F,myAccounts:V,myAccountsHex:R,myContributions:O}=q(w),[z,B]=(0,n.useState)((()=>({prevHash:"",prevLength:0}))),$=(0,n.useMemo)((()=>S(m.toString())),[m,S]),L=(0,n.useMemo)((()=>s&&h.gt(s)?h.sub(s):null),[s,h]),H=(0,n.useMemo)((()=>d.isZero()?"100.00%":`${(b.muln(1e4).div(d).toNumber()/100).toFixed(2)}%`),[d,b]),_=!L&&!!l&&(C?l.currentPeriod.gt(g):l.currentPeriod.gt(x)),Z=o&&!j&&!C&&!!L,W=b.isZero(),U=!b.isZero()&&_,J=0!==E.length&&E[0].homepage;return(0,n.useEffect)((()=>{B((e=>{const s=P.length;return e.prevLength!==s?{prevHash:M,prevLength:s}:e}))}),[P,M]),(0,a.jsxs)("tr",{className:t,children:[(0,a.jsx)(r.iA.Column.Id,{value:w}),(0,a.jsx)("td",{className:"badge",children:(0,a.jsx)(r.f,{id:w})}),(0,a.jsx)("td",{className:"media--800",children:N(C?"Winner":L?j?"Capped":o?"Active":"Past":"Ended")}),(0,a.jsx)("td",{className:"address media--2000",children:(0,a.jsx)(r.ax,{value:m})}),(0,a.jsxs)("td",{className:"all number together media--1200",children:[L&&(0,a.jsx)(A.Z,{value:L}),"#",(0,u.u)(h)]}),(0,a.jsx)("td",{className:"number all together",children:x.eq(g)?(0,u.u)(x):`${(0,u.u)(x)} - ${(0,u.u)(g)}`}),(0,a.jsxs)("td",{className:"number together",children:[(0,a.jsx)(y.Z,{value:b,withCurrency:!1})," / ",(0,a.jsx)(y.Z,{value:d}),(0,a.jsx)("div",{children:H}),0!==V.length&&(0,a.jsx)(r.xH,{summary:N("My contributions ({{count}})",{replace:{count:V.length}}),withBreaks:!0,children:V.map(((e,s)=>(0,a.jsx)(r.ax,{balance:O[R[s]],value:e,withBalance:!0},e)))})]}),(0,a.jsx)("td",{className:"number together media--1100",children:F?(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(r.JO,{color:z.prevHash===e?"green":"transparent",icon:"chevron-up",isPadded:!0}),0!==P.length&&(0,u.u)(P.length)]}):(0,a.jsx)("span",{className:"--tmp",children:"999"})}),(0,a.jsxs)("td",{className:"button media--1000",children:[U&&0!==P.length&&(0,a.jsx)(D,{paraId:w}),W&&(0,a.jsx)(r.cA,{accountId:m,className:"media--1400",icon:"times",isDisabled:!($||_),label:N(v?"Close":"Cancel"),params:[w],tx:k.tx.crowdloan.dissolve}),o&&Z&&(0,a.jsx)(T,{cap:d,needsSignature:f.isSome,paraId:w,raised:b}),o&&J&&(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{href:J,rel:"noopener noreferrer",target:"_blank",children:N("Homepage")}),"   "]})]})]})}));function z(e,s){return s?.sort((({key:s},{key:t})=>{const a=e[s]||!1;return a===(e[t]||!1)?0:a?-1:1}))}const B=n.memo((function({bestNumber:e,className:s,leasePeriod:t,value:o}){const{t:i}=(0,c.$)(),l=(0,S.P)(),[d,u,m]=(0,n.useMemo)((()=>function(e,s){const t=s?.currentPeriod;let a=null,n=null,o=null;return e&&t&&(a=e.filter((({firstSlot:e,isCapped:s,isEnded:a,isWinner:n})=>!(s||a||n)&&t.lte(e))),n=e.filter((({firstSlot:e,isCapped:s,isEnded:a,isWinner:n})=>s||a||n||t.gt(e))),o=e.map((({paraId:e})=>e))),[a,n,o]}(o,t)),[t,o]),h=(0,I.gW)(m),[p,x]=(0,n.useMemo)((()=>[z(h,d),z(h,u)]),[d,u,h]),g=(0,n.useRef)([[i("ongoing"),"start",2],[void 0,"media--800"],[void 0,"media--2000"],[i("ending"),"media--1200"],[i("leases")],[i("raised")],[i("count"),"media--1100"],[void 0,"media--1000"]]),b=(0,n.useRef)([[i("completed"),"start",2],[void 0,"media--800"],[void 0,"media--2000"],[i("ending"),"media--1200"],[i("leases")],[i("raised")],[i("count"),"media--1100"],[void 0,"media--1000"]]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Pd,{className:"warning centered",content:i('Do not transfer any funds directly to a specific account that is associated with a loan or a team. Use the "Contribute" action to record the contribution on-chain using the crowdloan runtime module. When the fund is dissolved, after either the parachain lease expires or the loan ending without winning, the full value will be returned to your account by the runtime. Funds sent directly to an account, without using the crowdloan functionality, may not be returned by the receiving account.')}),(0,a.jsx)(r.iA,{className:s,empty:o&&p&&i("No active campaigns found"),header:g.current,children:p?.map((s=>(0,a.jsx)(O,{bestHash:l,bestNumber:e,isOngoing:!0,value:s},s.accountId)))}),(0,a.jsx)(r.iA,{className:s,empty:o&&x&&i("No completed campaigns found"),header:b.current,children:x?.map((s=>(0,a.jsx)(O,{bestNumber:e,leasePeriod:t,value:s},s.accountId)))})]})})),$=n.memo((function({activeCap:e,activeRaised:s,className:t,fundCount:n,isLoading:o,totalCap:i,totalRaised:l}){const{t:d}=(0,c.$)();return(0,a.jsxs)(r.Ty,{className:t,children:[(0,a.jsx)(r.Jy,{label:d("funds"),children:void 0===n?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,u.u)(n)}),(0,a.jsx)(r.Jy,{label:`${d("active raised / cap")}`,progress:{hideValue:!0,isBlurred:o,total:o?b.Jo:e,value:o?b.um:s},children:(0,a.jsxs)("span",{className:o?"--tmp":"",children:[(0,a.jsx)(y.Z,{value:s,withCurrency:!1,withSi:!0})," / ",(0,a.jsx)(y.Z,{value:e,withSi:!0})]})}),(0,a.jsx)(r.Jy,{label:`${d("total raised / cap")}`,progress:{hideValue:!0,isBlurred:o,total:o?b.Jo:i,value:o?b.um:l},children:(0,a.jsxs)("span",{className:o?"--tmp":"",children:[(0,a.jsx)(y.Z,{value:l,withCurrency:!1,withSi:!0})," / ",(0,a.jsx)(y.Z,{value:i,withSi:!0})]})})]})})),L=n.memo((function({auctionInfo:e,campaigns:{activeCap:s,activeRaised:t,funds:n,isLoading:o,totalCap:i,totalRaised:l},className:c,leasePeriod:d,ownedIds:u}){const m=(0,x.C)();return(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)($,{activeCap:s,activeRaised:t,fundCount:n?.length,isLoading:o,totalCap:i,totalRaised:l}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(k,{auctionInfo:e,bestNumber:m,leasePeriod:d,ownedIds:u})}),(0,a.jsx)(B,{bestNumber:m,leasePeriod:d,value:n})]})}));var H=t(99924);const _=n.memo((function({lifecycle:e,nextAction:s}){return e&&(0,a.jsxs)(a.Fragment,{children:[e.toString(),s&&(0,a.jsx)(H.Z,{value:s.sessionIndex})]})}));var Z=t(36198);const W={transform:e=>e.number.unwrap()},U=(0,F.e)("useChainDetails",(function(e){const{api:s}=(0,Z.x)(e);return{bestNumber:(0,l.W7)(s?.rpc.chain.subscribeNewHeads,void 0,W),runtimeVersion:(0,l.W7)(s?.rpc.state.subscribeRuntimeVersion)}})),J=r.zo.div`
  .version {
    font-size: var(--font-size-small);
    white-space: nowrap;

    > div {
      display: inline-block;
      overflow: hidden;
      max-width: 10em;
      text-overflow: ellipsis;
    }
  }
`,G=n.memo((function({className:e,id:s}){const{bestNumber:t,runtimeVersion:n}=U(s);return(0,a.jsxs)(J,{className:e,children:[t&&(0,a.jsx)("div",{children:(0,u.u)(t)}),n&&(0,a.jsxs)("div",{className:"version",children:[(0,a.jsx)("div",{className:"media--1100",children:n.specName.toString()}),(0,a.jsx)("div",{className:"media--1100",children:"/"}),(0,a.jsx)("div",{children:n.specVersion.toString()})]})]})}));var Q=t(12372);const Y=n.memo((function({children:e,className:s,leasePeriod:t,value:o}){const r=(0,n.useMemo)((()=>function(e,s){return e&&s&&(0,Q.G)(s).sub(b.If).imul(e.length).iadd(e.remainder)}(t,o)),[t,o]);return r?(0,a.jsx)(A.Z,{className:s,value:r,children:e}):null})),K=n.memo((function({className:e,fromFirst:s,leasePeriod:t,periods:o}){const r=(0,n.useMemo)((()=>function(e,s){return s&&e&&e.reduce(((e,t)=>{const a=s.addn(t);return!e.length||e[e.length-1][1].add(b.If).lt(a)?e.push([a,a]):e[e.length-1][1]=a,e}),[]).map((([e,s])=>e.eq(s)?(0,u.u)(e):`${(0,u.u)(e)} - ${(0,u.u)(s)}`)).join(", ")}(o,t?.currentPeriod)),[t?.currentPeriod,o]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)("div",{children:r}),o&&(0,a.jsx)(Y,{leasePeriod:t,value:s?o[0]:o[o.length-1]+1})]})}));var X=t(54890);const ee={defaultValue:{headHex:null,leases:[],lifecycle:null,paraInfo:null,pendingAvail:null,qDmp:0,qHrmpE:0,qHrmpI:0,qUmp:0,updateAt:null,watermark:null},transform:([e,s,t,a,n,o,r,i,l,c,d])=>({headHex:e.isSome?e.unwrap().toHex():null,leases:d.map(((e,s)=>e.isSome?s:-1)).filter((e=>-1!==e)),lifecycle:t.unwrapOr(null),paraInfo:c.unwrapOr(null),pendingAvail:l.unwrapOr(null),qDmp:a.length,qHrmpE:o.length,qHrmpI:r.length,qUmp:n.length,updateAt:s.unwrapOr(null),watermark:i.unwrapOr(null)})},se=(0,F.e)("useParaInfo",(function(e){const{api:s}=(0,i.h)();return(0,X.L)([[s.query.paras.heads,e],[s.query.paras.futureCodeUpgrades,e],[s.query.paras.paraLifecycles,e],[(s.query.parasDmp||s.query.paraDmp||s.query.dmp)?.downwardMessageQueues,e],[(s.query.parasUmp||s.query.ump)?.relayDispatchQueues,e],[(s.query.parasHrmp||s.query.paraHrmp||s.query.hrmp)?.hrmpEgressChannelsIndex,e],[(s.query.parasHrmp||s.query.paraHrmp||s.query.hrmp)?.hrmpIngressChannelsIndex,e],[(s.query.parasHrmp||s.query.paraHrmp||s.query.hrmp)?.hrmpWatermarks,e],[(s.query.parasInclusion||s.query.paraInclusion||s.query.inclusion)?.pendingAvailability,e],[s.query.registrar.paras,e],[s.query.slots.leases,e]],ee)}));function te(e,s){return e?.map(((e,t)=>(0,a.jsx)(r.ax,{nameExtra:s&&(0,a.jsxs)(a.Fragment,{children:[" ",`(${(0,u.u)(s[t])})`]}),value:e},e.toString())))}const ae=r.zo.tr`
  &.isDisabled {
    td {
      opacity: 0.5
    }
  }

  td.badge.together > div {
    display: inline-block;
    margin: 0 0.25rem 0 0;
    vertical-align: middle;
  }
`,ne=n.memo((function({bestNumber:e,className:s="",id:t,lastBacked:o,lastInclusion:i,lastTimeout:l,leasePeriod:d,nextAction:m,sessionValidators:h,validators:p}){const{t:x}=(0,c.$)(),g=se(t),[b,f]=(0,n.useState)([]),j=(0,n.useMemo)((()=>e&&(i?e.sub(i.blockNumber):g.watermark?e.sub(g.watermark):void 0)),[e,i,g]),v=(0,n.useCallback)((()=>te(p&&p[1].map((({validatorId:e})=>e)),p&&p[1].map((({indexValidator:e})=>e)))),[p]),y=(0,n.useCallback)((()=>te(b)),[b]);return(0,n.useEffect)((()=>{if(h)if(g.pendingAvail){const e=g.pendingAvail.availabilityVotes.toHuman().slice(2).replace(/_/g,"").split("").map(((e,s)=>"0"===e?h[s]:null)).filter(((e,s)=>!!e&&s<h.length));e.length!==h.length&&f(e)}else f([])}),[g,h]),(0,a.jsxs)(ae,{className:`${s} ${o||i||g.watermark?"":"isDisabled"}`,children:[(0,a.jsx)(r.iA.Column.Id,{value:t}),(0,a.jsxs)("td",{className:"badge together",children:[g.paraInfo?.locked?.isFalse?(0,a.jsx)(r.Ct,{color:"orange",icon:"unlock"}):(0,a.jsx)(r.Ct,{color:"transparent"}),(0,a.jsx)(r.f,{id:t})]}),(0,a.jsxs)("td",{className:"number media--1400",children:[(0,a.jsx)(r.xH,{className:p?"":"--tmp",renderChildren:v,summary:x("Val. Group {{group}} ({{count}})",{replace:{count:(0,u.u)(p?.[1]?.length||0),group:p?p[0]:0}})}),(0,a.jsx)(r.xH,{renderChildren:y,summary:x("Non-voters ({{count}})",{replace:{count:(0,u.u)(b.length)}})})]}),(0,a.jsx)("td",{className:"start together hash media--1500",children:(0,a.jsx)("div",{className:"shortHash",children:g.headHex})}),(0,a.jsx)("td",{className:"start",children:g.updateAt&&e&&g.lifecycle?.isParachain?(0,a.jsxs)(a.Fragment,{children:[x("Upgrading"),(0,a.jsx)(A.Z,{value:g.updateAt.sub(e)}),"#",(0,u.u)(g.updateAt)]}):(0,a.jsx)(_,{lifecycle:g.lifecycle,nextAction:m})}),(0,a.jsx)("td",{className:"all"}),(0,a.jsx)("td",{className:"number",children:j&&(0,a.jsx)(A.Z,{value:j})}),(0,a.jsx)("td",{className:"number no-pad-left",children:i?(0,a.jsx)("a",{href:`#/explorer/query/${i.blockHash}`,children:(0,u.u)(i.blockNumber)}):g.watermark&&(0,u.u)(g.watermark)}),(0,a.jsx)("td",{className:"number no-pad-left media--900",children:o&&(0,a.jsx)("a",{href:`#/explorer/query/${o.blockHash}`,children:(0,u.u)(o.blockNumber)})}),(0,a.jsx)("td",{className:"number no-pad-left media--1600",children:l&&(0,a.jsx)("a",{href:`#/explorer/query/${l.blockHash}`,children:(0,u.u)(l.blockNumber)})}),(0,a.jsx)("td",{className:"number no-pad-left",children:(0,a.jsx)(G,{id:t})}),(0,a.jsx)("td",{className:"number media--1700",children:(0,u.u)(g.qHrmpI)}),(0,a.jsx)("td",{className:"number no-pad-left media--1700",children:(0,u.u)(g.qHrmpE)}),(0,a.jsx)("td",{className:"number together media--1100",children:(0,a.jsx)(K,{leasePeriod:d,periods:g.leases})})]})}));var oe=t(11147);const re={lastBacked:{},lastIncluded:{},lastTimeout:{}};function ie(e,s,t,a){try{const{descriptor:n}=s.data[0];n&&n.paraId&&(e[n.paraId.toString()]={blockHash:t,blockNumber:a,relayParent:n.relayParent.toHex()})}catch(e){throw new Error(`${s.section}.${s.method}(${(0,oe.P)(s.data)}):: ${e.message}`)}}const le=(0,F.e)("useEvents",(function(){const{api:e}=(0,i.h)(),s=(0,l.W7)(e.derive.chain.subscribeNewBlocks),[t,a]=(0,n.useState)(re);return(0,n.useEffect)((()=>{s&&a((t=>function(e,s,t){const a={},n={},o={},r=s.block.header.number.unwrap(),i=s.block.header.hash.toHex(),l=e.events.paraInclusion||e.events.parasInclusion||e.events.inclusion;let c=!1,d=!1,u=!1;return l&&s.events.forEach((({event:e,phase:s})=>{s.isApplyExtrinsic&&(l.CandidateBacked.is(e)?(ie(a,e,i,r),c=!0):l.CandidateIncluded.is(e)?(ie(n,e,i,r),d=!0):l.CandidateTimedOut.is(e)&&(ie(o,e,i,r),u=!0))})),c||d||u?{lastBacked:c?{...t.lastBacked,...a}:t.lastBacked,lastIncluded:d?{...t.lastIncluded,...n}:t.lastIncluded,lastTimeout:u?{...t.lastTimeout,...o}:t.lastTimeout}:t}(e,s,t)))}),[e,s]),t})),ce={defaultValue:[null,null,null,null]},de=(0,F.e)("useValidators",(function(e){const{api:s}=(0,i.h)(),[t,a,o,r]=(0,X.L)([s.query.session.validators,(s.query.parasScheduler||s.query.paraScheduler||s.query.scheduler)?.scheduled,(s.query.parasScheduler||s.query.paraScheduler||s.query.scheduler)?.validatorGroups,(s.query.parasShared||s.query.paraShared||s.query.shared)?.activeValidatorIndices],ce),[l,c]=(0,n.useState)({});return(0,n.useEffect)((()=>{o&&e&&r&&a&&t&&c((s=>function(e,s,t,a,n,o){return s.reduce(((e,s)=>{const r=o.find((({paraId:e})=>e&&e.eq(s)));return r?{...e,[s.toString()]:[r.groupIdx,(a[r.groupIdx.toNumber()]||[]).map((e=>[e,n[e.toNumber()]])).filter((([,e])=>e)).map((([e,s])=>({indexActive:e,indexValidator:s,validatorId:t[s.toNumber()]})))]}:e}),{...e})}(s,e,t,o,r,a)))}),[o,e,r,a,t]),(0,n.useMemo)((()=>[t,l]),[l,t])})),ue=n.memo((function({actionsQueue:e,ids:s,leasePeriod:t,scheduled:o}){const{t:i}=(0,c.$)(),l=(0,x.C)(),{lastBacked:d,lastIncluded:u,lastTimeout:m}=le(),h=(0,I.gW)(s),[p,g]=de(s),b=(0,n.useRef)([[i("parachains"),"start",2],["","media--1400"],[i("head"),"start media--1500"],[i("lifecycle"),"start"],[],[i("included"),void 0,2],[i("backed"),"no-pad-left media--900"],[i("timeout"),"no-pad-left media--1600"],[i("chain"),"no-pad-left"],[i("in/out"),"media--1700",2],[i("leases"),"media--1100"]]),f=(0,n.useMemo)((()=>function(e=[]){return e.reduce(((e,{scheduledIds:s})=>s.reduce(((e,s)=>({...e,[s.toString()]:!0})),e)),{})}(o)),[o]),j=(0,n.useMemo)((()=>s&&function(e,s){return s.map((e=>[e,e.toString()])).sort((([s,t],[a,n])=>{const o=e[t]||!1;return o===(e[n]||!1)?s.cmp(a):o?-1:1}))}(h,s)),[s,h]),v=(0,n.useMemo)((()=>function(e,s=[]){return s.reduce(((s,[t,a])=>({...s,[a]:e.find((({paraIds:e})=>e.some((e=>e.eq(t)))))})),{})}(e,j)),[e,j]);return(0,a.jsx)(r.iA,{empty:j&&i("There are no registered parachains"),header:b.current,children:j?.map((([e,s])=>(0,a.jsx)(ne,{bestNumber:l,id:e,isScheduled:f[s],lastBacked:d[s],lastInclusion:u[s],lastTimeout:m[s],leasePeriod:t,nextAction:v[s],sessionValidators:p,validators:g[s]},s)))})}));var me=t(54705),he=t(26839),pe=t(65968);const xe=function({leasePeriod:e,parachainCount:s,proposalCount:t,upcomingCount:n}){const{t:o}=(0,c.$)();return(0,a.jsxs)(r.Ty,{children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:o("parachains"),children:(0,pe.h)(s)?(0,u.u)(s):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(r.Jy,{className:"media--1000",label:o("parathreads"),children:(0,pe.h)(n)?(0,u.u)(n):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,pe.h)(t)&&(0,a.jsx)(r.Jy,{className:"media--1000",label:o("proposals"),children:(0,u.u)(t)})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:o("current lease"),children:e?(0,u.u)(e.currentPeriod):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(r.Jy,{className:"media--1200",label:o("lease period"),progress:{isBlurred:!e,total:e?e.length:b.Jo,value:e?e.progress:b.um,withTime:!0}})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:o("finalized"),children:(0,a.jsx)(he.Z,{})}),(0,a.jsx)(me.Z,{className:"media--1200",withEra:!1})]})]})},ge=n.memo((function({actionsQueue:e,className:s,leasePeriod:t,paraIds:n,proposals:o,threadIds:r}){return(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)(xe,{leasePeriod:t,parachainCount:n?.length,proposalCount:o?.proposalIds.length,upcomingCount:r?.length}),(0,a.jsx)(ue,{actionsQueue:e,ids:n,leasePeriod:t,scheduled:o?.scheduled})]})}));var be=t(48801),fe=t.n(be);const je=new(fe())(2e3),ve=je.sub(b.If),ye=n.memo((function({className:e,nextParaId:s,onClose:t}){const{t:o}=(0,c.$)(),{api:l}=(0,i.h)(),[d,u]=(0,n.useState)(null);return(0,a.jsxs)(r.u_,{className:e,header:o("Reserve ParaId"),onClose:t,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:o("This account will be used to the Id reservation and for the future parathread."),children:(0,a.jsx)(r.rp,{label:o("reserve from"),onChange:u,type:"account",value:d})}),(0,a.jsx)(r.u_.Columns,{hint:o("The Id of this parachain as known on the network (selected from nextFreeId)"),children:(0,a.jsx)(r.Rn,{defaultValue:s,isDisabled:!0,label:o("parachain id")})}),(0,a.jsx)(r.u_.Columns,{hint:o("The reservation fee for this Id"),children:(0,a.jsx)(r.H,{defaultValue:l.consts.registrar.paraDeposit,isDisabled:!0,label:o("reserved deposit")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:d,icon:"plus",isDisabled:!s,onStart:t,params:[],tx:l.tx.registrar.reserve})})]})}));var Ce=t(88311);const we=n.memo((function({className:e,nextParaId:s,onClose:t,ownedIds:o}){const{t:l}=(0,c.$)(),{api:d}=(0,i.h)(),[u,m]=(0,n.useState)(null),[h,p]=(0,n.useState)(),[x,g]=(0,n.useState)(null),[b,j]=(0,n.useState)(null),v=(0,n.useCallback)((e=>j((0,Ce.N)(e))),[]),y=(0,n.useCallback)((e=>g((0,Ce.N)(e))),[]),C=(0,n.useCallback)((({accountId:e,paraId:s})=>{m(e),p(new(fe())(s))}),[]),w=(0,n.useMemo)((()=>d.consts.registrar.paraDeposit.add(d.consts.registrar.dataDepositPerByte.muln(x?x.length:0)).iadd(d.consts.registrar.dataDepositPerByte.muln(b?b.length:0))),[d,x,b]),N=!h||!h.gt(ve);return(0,a.jsxs)(r.u_,{className:e,header:l("Register parathread"),onClose:t,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[d.tx.registrar.reserve?(0,a.jsx)(f,{noCodeCheck:!0,onChange:C,ownedIds:o}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.u_.Columns,{hint:l("This account will be associated with the parachain and pay the deposit."),children:(0,a.jsx)(r.rp,{label:l("register from"),onChange:m,type:"account",value:u})}),(0,a.jsx)(r.u_.Columns,{hint:l("The id of this parachain as known on the network"),children:(0,a.jsx)(r.Rn,{autoFocus:!0,defaultValue:s,isError:N,isZeroable:!1,label:l("parachain id"),onChange:p})})]}),(0,a.jsx)(r.u_.Columns,{hint:l("The WASM validation function for this parachain."),children:(0,a.jsx)(r.ht,{isError:!x,label:l("code"),onChange:y})}),(0,a.jsx)(r.u_.Columns,{hint:l("The genesis state for this parachain."),children:(0,a.jsx)(r.ht,{isError:!b,label:l("initial state"),onChange:v})}),(0,a.jsx)(r.u_.Columns,{hint:l("The reservation fee for this parachain, including base fee and per-byte fees"),children:(0,a.jsx)(r.H,{defaultValue:w,isDisabled:!0,label:l("reserved deposit")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:u,icon:"plus",isDisabled:!x||!b||N,onStart:t,params:[h,b,x],tx:d.tx.registrar.register})})]})})),Ne={transform:e=>e.isZero()?je:e},ke=n.memo((function({className:e,ownedIds:s}){const{t}=(0,c.$)(),{api:n}=(0,i.h)(),[o,d]=(0,g.O)(),[u,m]=(0,g.O)(),h=(0,l.W7)(n.query.registrar.nextFreeParaId,[],Ne);return(0,a.jsxs)(r.zx.Group,{className:e,children:[(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!n.tx.registrar.reserve,label:t("ParaId"),onClick:m}),u&&(0,a.jsx)(ye,{nextParaId:h,onClose:m}),(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!!n.tx.registrar.reserve&&!s.length,label:t("ParaThread"),onClick:d}),o&&(0,a.jsx)(we,{nextParaId:h,onClose:d,ownedIds:s})]})})),Se={defaultValue:{headHex:null,lifecycle:null,manager:null},transform:([e,s,t,a])=>({headHex:e.isSome?e.unwrap().toHex():s.isSome?s.unwrap().genesisHead.toHex():null,lifecycle:t.unwrapOr(null),manager:a.isSome?a.unwrap().manager:null})},Ie=(0,F.e)("useThreadInfo",(function(e){const{api:s}=(0,i.h)();return(0,X.L)([[s.query.paras.heads,e],[s.query.paras.upcomingParasGenesis,e],[s.query.paras.paraLifecycles,e],[s.query.registrar.paras,e]],Se)})),Ae=n.memo((function({id:e,leasePeriod:s,leases:t,nextAction:o}){const{t:l}=(0,c.$)(),{api:d}=(0,i.h)(),{isAccount:u}=(0,p.x)(),{headHex:m,lifecycle:h,manager:x}=Ie(e),g=(0,n.useMemo)((()=>s?.currentPeriod&&t&&t.map((({period:e})=>e))),[s?.currentPeriod,t]),b=u(x?.toString());return(0,a.jsxs)("tr",{children:[(0,a.jsx)(r.iA.Column.Id,{value:e}),(0,a.jsx)("td",{className:"badge",children:(0,a.jsx)(r.f,{id:e})}),(0,a.jsx)("td",{className:"address media--2000",children:x&&(0,a.jsx)(r.N,{value:x})}),(0,a.jsx)("td",{className:"start together hash media--1500",children:(0,a.jsx)("div",{className:"shortHash",children:m})}),(0,a.jsx)("td",{className:"start",children:(0,a.jsx)(_,{lifecycle:h,nextAction:o})}),(0,a.jsx)("td",{className:"all"}),(0,a.jsx)("td",{className:"number no-pad-left"}),(0,a.jsx)("td",{className:"number together",children:s&&t&&g&&(t.length?(0,a.jsx)(K,{fromFirst:!0,leasePeriod:s,periods:g}):l("None"))}),(0,a.jsx)("td",{className:"button media--900",children:(0,a.jsx)(r.cA,{accountId:x,icon:"times",isDisabled:!b,label:l("Deregister"),params:[e],tx:d.tx.registrar.deregister})})]})})),Ee=(0,F.e)("useParaMap",(function(e){const{api:s}=(0,i.h)(),t=(0,I.gW)(e),a=(0,n.useCallback)((([[e],s])=>function(e,s,t){return s.reduce(((e,s,a)=>(e.push([s,t[a].map(((e,s)=>{if(e.isNone)return null;const[t,a]=e.unwrap();return{accountId:t,balance:a,period:s}})).filter((e=>!!e))]),e)),[]).sort((([s,t],[a,n])=>{const o=e[s.toString()]||!1,r=e[a.toString()]||!1;return t.length&&n.length?t[0].period-n[0].period||s.cmp(a):t.length?-1:n.length?1:o===r?s.cmp(a):o?-1:1}))}(t,e,s)),[t]);return(0,l.W7)(e&&s.query.slots.leases.multi,[e],{transform:a,withParamsTransform:!0})})),Me=n.memo((function({actionsQueue:e,className:s,ids:t,leasePeriod:o,ownedIds:i}){const{t:l}=(0,c.$)(),d=Ee(t),u=(0,n.useRef)([[l("parathreads"),"start",2],["","media--2000"],[l("head"),"start media--1500"],[l("lifecycle"),"start"],[],[],[l("leases")],["","media--900"]]);return(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)(ke,{ownedIds:i}),(0,a.jsx)(r.iA,{empty:o&&t&&(0===t.length||d)&&l("There are no available parathreads"),header:u.current,children:o&&d?.map((([s,t])=>(0,a.jsx)(Ae,{id:s,leasePeriod:o,leases:t,nextAction:e.find((({paraIds:e})=>e.some((e=>e.eq(s)))))},s.toString())))})]})}));function Pe({address:e,index:s,setAddress:t,t:o}){const i=(0,n.useCallback)((e=>e&&t(s,e)),[s,t]);return(0,a.jsx)(r.rp,{defaultValue:e,label:o("validator {{index}}",{replace:{index:s+1}}),onChange:i})}const Te=n.memo((function({className:e,onClose:s}){const{t}=(0,c.$)(),{api:o}=(0,i.h)(),[l,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(),[x,g]=(0,n.useState)((()=>b.D_.mul(b.aP.pow(new(fe())(o.registry.chainDecimals[0]))))),[f,j]=(0,n.useState)([""]),[{isWasmValid:v,wasm:y},C]=(0,n.useState)({isWasmValid:!1,wasm:null}),[w,N]=(0,n.useState)(null),k=(0,n.useCallback)((e=>N((0,Ce.N)(e))),[]),S=(0,n.useCallback)(((e,s)=>C({isWasmValid:s,wasm:e})),[]),I=(0,n.useCallback)(((e,s)=>j((t=>t.map(((t,a)=>a===e?s:t))))),[]),A=(0,n.useCallback)((()=>j((e=>[...e,""]))),[]),E=(0,n.useCallback)((()=>j((e=>[...e.slice(0,e.length-1)]))),[]),M=u.length>=3,P=f.some(((e,s)=>f.some(((t,a)=>s!==a&&e===t))));return(0,a.jsxs)(r.u_,{className:e,header:t("Propose parachain"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:t("This account will be associated with the parachain and pay the deposit."),children:(0,a.jsx)(r.rp,{label:t("propose from"),onChange:d,type:"account",value:l})}),(0,a.jsxs)(r.u_.Columns,{hint:t("The name for this parachain, the id and the allocated/requested balance."),children:[(0,a.jsx)(r.II,{autoFocus:!0,isError:!M,label:t("parachain name"),onChange:m}),(0,a.jsx)(r.Rn,{isZeroable:!1,label:t("requested id"),onChange:p}),(0,a.jsx)(r.H,{defaultValue:x,label:t("initial balance"),onChange:g})]}),(0,a.jsxs)(r.u_.Columns,{hint:t("The WASM validation function as well as the genesis state for this parachain."),children:[(0,a.jsx)(r.RF,{isError:!v,label:t("validation code"),onChange:S,placeholder:y&&!v&&t("The code is not recognized as being in valid WASM format")}),(0,a.jsx)(r.ht,{isError:!w,label:t("genesis state"),onChange:k})]}),(0,a.jsxs)(r.u_.Columns,{hint:t("The validators for this parachain. At least one is required and where multiple is supplied, they need to be unique."),children:[f.map(((e,s)=>(0,a.jsx)(Pe,{address:e,index:s,setAddress:I,t},s))),!f.length&&(0,a.jsx)(r.Pd,{content:t("You need to supply at last one running validator for your parachain alongside this request.")}),P&&(0,a.jsx)(r.Pd,{content:t("You have duplicated validator entries, ensure each is unique.")}),(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(r.zx,{icon:"plus",label:t("Add validator"),onClick:A}),(0,a.jsx)(r.zx,{icon:"minus",isDisabled:0===f.length,label:t("Remove validator"),onClick:E})]})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:l,icon:"plus",isDisabled:!(v&&w&&M&&f.length&&h?.gt(b.nw)),onStart:s,params:[h,u,y,w,f,x],tx:o.tx.proposeParachain?.proposeParachain})})]})})),De=n.memo((function(){const{t:e}=(0,c.$)(),{hasAccounts:s}=(0,p.x)(),[t,n]=(0,g.O)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!s,label:e("Propose"),onClick:n})}),t&&(0,a.jsx)(Te,{onClose:n})]})}));var Fe=t(74421);const Ve=(0,F.e)("useProposal",(function(e,s,t){const{api:a}=(0,i.h)(),o=(0,l.W7)(a.query.proposeParachain.proposals,[e]);return(0,n.useMemo)((()=>({id:e,isApproved:s.some((s=>s.eq(e))),isScheduled:t.some((({scheduledIds:s})=>s.some((s=>s.eq(e))))),proposal:o&&o.isSome?o.unwrap():void 0})),[s,e,o,t])})),Re=n.memo((function({approvedIds:e,id:s,scheduled:t}){const{t:o}=(0,c.$)(),{api:l}=(0,i.h)(),{allAccounts:d}=(0,p.x)(),{hasSudoKey:m,sudoKey:h}=(0,Fe.p)(),x=Ve(s,e,t),g=(0,n.useMemo)((()=>l.tx.sudo&&m?l.tx.sudo.sudo(l.tx.proposeParachain.cancelProposal(s)):d.some((e=>x.proposal?.proposer.eq(e)))?l.tx.proposeParachain.cancelProposal(s):null),[l,d,m,s,x]),b=(0,n.useMemo)((()=>l.tx.sudo&&l.tx.sudo.sudo(l.tx.proposeParachain.approveProposal(s))),[l,s]),f=(0,n.useMemo)((()=>x?.proposal&&function(e,s=6){const t=e.toHex();return t.length>2*s+2?`${t.slice(0,s+2)}…${t.slice(-s)}`:"0x"===t?"":t}(x.proposal.genesisHead)),[x]),j=(0,n.useCallback)((()=>x.proposal?.validators.map((e=>(0,a.jsx)(r.ax,{value:e},e.toString())))),[x.proposal]);return(0,a.jsxs)("tr",{children:[(0,a.jsx)(r.iA.Column.Id,{value:s}),(0,a.jsx)("td",{className:"badge together",children:(x.isApproved||x.isScheduled)&&(0,a.jsx)(r.Ct,{color:"green",icon:x.isScheduled?"clock":"check"})}),(0,a.jsx)("td",{className:"badge",children:(0,a.jsx)(r.f,{id:s})}),(0,a.jsx)("td",{className:"start together",children:x.proposal?.name.toUtf8()}),(0,a.jsx)("td",{className:"address",children:x.proposal?.validators&&(0,a.jsx)(r.xH,{renderChildren:j,summary:o("Validators ({{count}})",{replace:{count:(0,u.u)(x.proposal?.validators.length)}})})}),(0,a.jsx)("td",{className:"address",children:x.proposal&&(0,a.jsx)(r.N,{value:x.proposal.proposer})}),(0,a.jsx)("td",{className:"number media--1100",children:x.proposal&&(0,a.jsx)(y.Z,{value:x.proposal.balance})}),(0,a.jsx)("td",{className:"start hash together all",children:f}),(0,a.jsx)("td",{className:"button",children:!(x.isApproved||x.isScheduled)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.cA,{accountId:h,className:"media--800",extrinsic:b,icon:"check",isDisabled:!m,label:o("Approve")}),(0,a.jsx)(r.cA,{accountId:m?h:x.proposal?.proposer,className:"media--1100",extrinsic:g,icon:"ban",isDisabled:!m||!x.proposal,label:o("Cancel")})]})})]})})),qe=n.memo((function({proposals:e}){const{t:s}=(0,c.$)(),t=(0,n.useMemo)((()=>e&&e.proposalIds.sort(((e,s)=>e.cmp(s)))),[e]),o=(0,n.useRef)([[s("proposals"),"start",3],[],[],[s("proposer"),"address"],[s("balance"),"media--1100"],[s("initial state"),"start media--1400"],[]]);return(0,a.jsx)(r.iA,{empty:e&&t&&s("There are no pending proposals"),header:o.current,children:e&&t?.map((s=>(0,a.jsx)(Re,{approvedIds:e.approvedIds,id:s,scheduled:e.scheduled},s.toString())))})})),Oe=n.memo((function({className:e,proposals:s}){return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(De,{}),(0,a.jsx)(qe,{proposals:s})]})})),ze=[b.If,b.um,b.Jo,b.bX,b.nr,b.Ln,b.wJ,b.ru,b.xZ,b.aP],Be={withParams:!0},$e=(0,F.e)("useActionsQueue",(function(){const{api:e}=(0,i.h)(),s=(0,l.W7)(e.query.session.currentIndex),t=(0,n.useMemo)((()=>s&&ze.map((e=>s.add(e)))),[s]),a=(0,l.W7)(t&&e.query.paras.actionsQueue.multi,[t],Be);return(0,n.useMemo)((()=>a?a[0][0].map(((e,s)=>({paraIds:a[1][s],sessionIndex:e}))).filter((({paraIds:e})=>e.length)):[]),[a])})),Le={transform:([e,s])=>{const[t,a]=s.unwrapOr([null,null]);return{endBlock:a,leasePeriod:t,numAuctions:e}}},He=(0,F.e)("useAuctionInfo",(function(){const{api:e}=(0,i.h)();return(0,X.L)([e.query.auctions?.auctionCounter,e.query.auctions?.auctionInfo],Le)}));var _e=t(74065),Ze=t(24305),We=t(12298),Ue=t(51330),Je=t(65417);const Ge=(0,t(64021).d)("modlpy/cfund"),Qe={activeCap:b.nw,activeRaised:b.nw,funds:null,isLoading:!0,totalCap:b.nw,totalRaised:b.nw},Ye=new Uint8Array(32);function Ke(e,s){return s.some((s=>s.eq(e)))}function Xe(e,s){return e.isWinner!==s.isWinner?e.isWinner?-1:1:e.isCapped!==s.isCapped?e.isCapped?-1:1:e.isEnded!==s.isEnded?e.isEnded?1:-1:0}const es={transform:([[e],s])=>e.map(((e,t)=>[e,s[t].unwrapOr(null)])).filter((e=>!!e[1])).map((([e,s])=>{return{accountId:(0,V.m)((t=e,(0,Ue.e)(Ge,t.toU8a(),Ye).subarray(0,32))),firstSlot:s.firstPeriod,info:s,isCrowdloan:!0,key:e.toString(),lastSlot:s.lastPeriod,paraId:e,value:s.raised};var t})).sort(((e,s)=>e.info.end.cmp(s.info.end)||e.info.firstPeriod.cmp(s.info.firstPeriod)||e.info.lastPeriod.cmp(s.info.lastPeriod)||e.paraId.cmp(s.paraId))),withParamsTransform:!0},ss={transform:([[e],s])=>e.filter(((e,t)=>0!==s[t].map((e=>e.unwrapOr(null))).filter((e=>!!e)).filter((([e])=>function(e){return(0,Je.S)(e.slice(0,Ge.length),Ge)}(e))).length)),withParamsTransform:!0},ts={transform:e=>e.map((({args:[e]})=>e))},as=(0,F.e)("useFunds",(function(){const{api:e}=(0,i.h)(),s=(0,x.C)(),t=(0,_e.X)(),a=(0,Ze.b)([e.events.crowdloan?.Created]),o=(0,We.k)(e.query.crowdloan?.funds,[],ts,a.blockHash),r=(0,l.W7)(e.query.crowdloan?.funds.multi,[o],es),c=(0,l.W7)(e.query.slots.leases.multi,[o],ss),[d,u]=(0,n.useState)(Qe);return(0,n.useEffect)((()=>{t.current&&s&&r&&c&&u((t=>function(e,s,t,a,n){const[o,r,i,l]=t.reduce((([s,t,a,n],{info:{cap:o,end:r,raised:i},isWinner:l})=>[e.gt(r)||l?s:s.iadd(i),e.gt(r)||l?t:t.iadd(o),a.iadd(i),n.iadd(o)]),[new(fe())(0),new(fe())(0),new(fe())(0),new(fe())(0)]),c=!n.activeCap.eq(r),d=!n.activeRaised.eq(o),u=!n.totalCap.eq(l),m=!n.totalRaised.eq(i),h=!n.funds||n.funds.length!==t.length||c||d||u||m||t.some((t=>function(e,s,{info:{cap:t,end:a,raised:n},paraId:o},r,i){const l=i.funds?.find((e=>e.paraId.eq(o)));return!l||!l.isEnded&&e.gt(a)||!l.isCapped&&t.sub(n).lt(s)||!l.isWinner&&Ke(o,r)}(e,s,t,a,n)));return h?{activeCap:c?r:n.activeCap,activeRaised:d?o:n.activeRaised,funds:t.map((t=>function(e,s,t,a){return t.isCapped=t.info.cap.sub(t.info.raised).lt(s),t.isEnded=e.gt(t.info.end),t.isWinner=Ke(t.paraId,a),t}(e,s,t,a))).sort(Xe),totalCap:u?l:n.totalCap,totalRaised:m?i:n.totalRaised}:n}(s,e.consts.crowdloan.minContribution,r,c,t)))}),[e,s,r,c,t]),d})),ns=(0,F.e)("useLeasePeriod",(function(){const{api:e}=(0,i.h)(),s=(0,x.C)();return(0,n.useMemo)((()=>{if(!e.consts.slots.leasePeriod||!s)return;const t=e.consts.slots.leasePeriod,a=s.sub(e.consts.slots.leaseOffset||b.nw),n=a.mod(t);return{currentPeriod:a.div(t),length:t,progress:n,remainder:t.sub(n)}}),[e,s])}));var os=t(51240);const rs={transform:e=>{const s=e.map((([{args:[e]},s])=>{if(s.isNone)return null;const t=s.unwrap();return{manager:t.manager.toString(),paraId:e,paraInfo:t}})).filter((e=>!!e));return{ids:s.map((({paraId:e})=>e)),owned:s}}},is={transform:([[e],s])=>e.map(((e,t)=>({hash:s[t].unwrapOr(null),paraId:e}))),withParamsTransform:!0},ls=(0,F.e)("useOwnedIds",(function(){const{api:e}=(0,i.h)(),{allAccounts:s}=(0,p.x)(),t=(0,Ze.b)([e.events.registrar.Registered,e.events.registrar.Reserved]),a=(0,os.t)(e.query.registrar.paras,[],rs,t.blockHash),o=(0,l.W7)(e.query.paras.currentCodeHash.multi,[a?a.ids:[]],is);return(0,n.useMemo)((()=>a&&o?a.owned.filter((e=>s.some((s=>s===e.manager)))).map((e=>({...e,hasCode:o.some((s=>!!s.hash&&s.paraId.eq(e.paraId)))}))):[]),[s,o,a])})),cs={defaultValue:[void 0,void 0]},ds={transform:e=>e.map((({args:[e]})=>e))},us={transform:e=>e.map((([{args:[e]},s])=>({scheduledIds:s,sessionIndex:e})))},ms=(0,F.e)("useProposals",(function(){const{api:e}=(0,i.h)(),s=(0,_e.X)(),t=(0,Ze.b)([e.events.proposeParachain?.ProposeParachain]),a=(0,We.k)(e.query.proposeParachain?.proposals,[],ds,t.blockHash),o=(0,os.t)(e.query.proposeParachain?.scheduledProposals,[],us,t.blockHash),[r,l]=(0,X.L)([e.query.session.currentIndex,e.query.proposeParachain?.approvedProposals],cs);return(0,n.useMemo)((()=>l&&r&&a&&o&&s.current?{approvedIds:l,proposalIds:a,scheduled:o.filter((e=>e.sessionIndex.gt(r)))}:void 0),[l,s,a,r,o])})),hs={transform:e=>e.map((([{args:[e]},s])=>{const t=s.unwrapOr(null);return t&&(t.isParathread||t.isUpgradingParathread||t.isOffboardingParathread||t.isOnboarding)?e:null})).filter((e=>!!e)).sort(((e,s)=>e.cmp(s)))},ps=(0,F.e)("useUpomingIds",(function(){const{api:e}=(0,i.h)(),s=(0,Ze.b)([e.events.session.NewSession,e.events.registrar.Registered]);return(0,os.t)(e.query.paras.paraLifecycles,[],hs,s.blockHash)})),xs=[0];function gs(e,s){return JSON.stringify({w:e})!==JSON.stringify({w:s})}function bs(e,s,t){return t.isNone?[]:t.unwrap().reduce(((t,a,n)=>{if(a.isSome){const[o,r,i]=a.unwrap(),l=s.leasePeriod||b.nw,[c,d]=e[n];t.push({accountId:o.toString(),firstSlot:l.addn(c),isCrowdloan:(0,Je.S)(Ge,o.subarray(0,Ge.length)),key:r.toString(),lastSlot:l.addn(d),paraId:r,value:i})}return t}),[])}function fs({endBlock:e},s,t){return{blockNumber:e&&s?s.add(e):s||b.nw,blockOffset:s||b.nw,total:t.reduce(((e,{value:s})=>e.iadd(s)),new(fe())(0)),winners:t}}const js=(0,F.e)("useWinningData",(function(e){const{api:s}=(0,i.h)(),t=(0,_e.X)(),a=(0,d.E)(),[o,r]=(0,n.useState)(),c=(0,x.C)(),u=(0,Ze.b)([s.events.auctions?.BidAccepted]),m=(0,n.useRef)(u),h=(0,l.W7)(s.query.auctions?.winning.entries),p=(0,l.W7)(s.query.auctions?.winning,xs);return(0,n.useEffect)((()=>{t.current&&e&&h&&r(function(e,s,t){return t.sort((([{args:[e]}],[{args:[s]}])=>e.cmp(s))).reduce(((t,[{args:[a]},n])=>{const o=bs(e,s,n);return o.length&&(0===t.length||gs(o,t[t.length-1].winners))&&t.push(fs(s,a,o)),t}),[]).reverse()}(a,e,h))}),[e,h,t,a]),(0,n.useEffect)((()=>{t.current&&e&&p&&r((s=>function(e,s,t,a){if(t&&t.length<=1){const n=t||[],o=fs(s,null,bs(e,s,a));return o.winners.length?n.length?(n[n.length-1]=o,n.slice()):[o]:n}return t}(a,e,s,p)))}),[e,p,t,a]),(0,n.useEffect)((()=>{if(e?.endBlock&&c&&c.gt(e.endBlock)&&m.current!==u){const n=c.sub(e.endBlock).iadd(b.If);m.current=u,s.query.auctions?.winning(n).then((s=>t.current&&r((t=>function(e,s,t,a,n){const o=fs(s,n,bs(e,s,a));if(o.winners.length){if(!t||!t.length)return[o];if(gs(o.winners,t[0].winners))return r=o.winners,i=t[0].winners,r.length!==i.length||r.some((({firstSlot:e,lastSlot:s,paraId:t},a)=>!t.eq(i[a].paraId)||!e.eq(i[a].firstSlot)||!s.eq(i[a].lastSlot)))?[o,...t]:(t[0]=o,[...t])}var r,i;return t}(a,e,t,s,n))))).catch(console.error)}}),[s,c,e,t,a,u,m]),o})),vs=n.memo((function({basePath:e,className:s}){const{t}=(0,c.$)(),{api:d}=(0,i.h)(),{pathname:u}=(0,o.TH)(),m=He(),h=as(),p=ns(),x=ls(),g=js(m),b=ms(),f=$e(),j=ps(),v=(0,l.W7)(d.query.paras.parachains),y=(0,n.useRef)([{isRoot:!0,name:"overview",text:t("Overview")},{name:"parathreads",text:t("Parathreads")},d.query.proposeParachain&&{name:"proposals",text:t("Proposals")},d.query.auctions&&{name:"auctions",text:t("Auctions")},d.query.crowdloan&&{name:"crowdloan",text:t("Crowdloan")}].filter((e=>!!e)));return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,items:y.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/auctions`,children:(0,a.jsx)(w,{auctionInfo:m,campaigns:h,ownedIds:x,winningData:g})}),(0,a.jsx)(o.AW,{path:`${e}/crowdloan`,children:(0,a.jsx)(L,{auctionInfo:m,campaigns:h,leasePeriod:p,ownedIds:x})}),(0,a.jsx)(o.AW,{path:`${e}/proposals`,children:(0,a.jsx)(Oe,{proposals:b})})]}),(0,a.jsx)(ge,{actionsQueue:f,className:u===e?"":"--hidden",leasePeriod:p,paraIds:v,proposals:b,threadIds:j}),(0,a.jsx)(Me,{actionsQueue:f,className:u===`${e}/parathreads`?"":"--hidden",ids:j,leasePeriod:p,ownedIds:x})]})}))},58464:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-parachains")}},31132:(e,s,t)=>{t.d(s,{E:()=>c,f:()=>d});var a=t(2784),n=t(90778),o=t(11677),r=t(48801),i=t.n(r);const l=[[0,0],[0,1],[0,2],[0,3],[1,1],[1,2],[1,3],[2,2],[2,3],[3,3]],c=(0,o.e)("useLeaseRanges",(function(){const{api:e}=(0,n.h)();return(0,a.useMemo)((()=>{if(s=e.consts.auctions?.leasePeriodsPerSlot,s){const s=[];for(let t=0;e.consts.auctions.leasePeriodsPerSlot.gtn(t);t++)for(let a=t;e.consts.auctions.leasePeriodsPerSlot.gtn(a);a++)s.push([t,a]);return s}var s;return l}),[e])})),d=(0,o.e)("useLeaseRangeMax",(function(){const e=c();return(0,a.useMemo)((()=>new(i())(e[e.length-1][1])),[e])}))},94349:(e,s,t)=>{t.d(s,{Z:()=>v});var a=t(52322),n=t(2784),o=t(61349),r=t(24732),i=t(90778),l=t(54383),c=t(54890),d=t(65874),u=t(58607),m=t(52107),h=t(95292),p=t(48801),x=t.n(p),g=t(92730),b=t(14681);const f={defaultValue:[void 0,void 0]},j=r.zo.main`
  .pollActions {
    opacity: 0.75;
  }

  .pollAll {
    margin-bottom: 0;
    padding: 0.75rem 1rem;
    text-align: center;
  }

  .pollBlocksRight {
    position: absolute;
    right: 0;
    text-align: right;
    opacity: 0.75;
    bottom: 0;

    > div {
      display: inline-block;
      padding: 0 0.75rem;

      &+div {
        border-left: 1px solid #bbb;
      }
    }
  }

  .pollContainer {
    margin: 2rem auto;
    max-width: 60rem;
  }

  .pollHeader {
    position: relative;
  }

  .options {
    margin: 1rem 0;

    .ui--Columar {
      margin: 0 -1.25rem;
      padding: 0 1.25rem;

      &:nth-child(odd) {
        background: #f9f8f7;
      }

      .ui--Column {
        padding: 1rem 1.5rem;
      }
    }

    .optionName {
      font-size: 1.2rem;
      font-weight: var(--font-weight-normal);
      line-height: 1;
      margin-bottom: 0.75rem;
    }

    .pollToggle {
      margin-top: 0.5rem;
      text-align: right;
    }

    &:not(.canVote) {
      .ui--Toggle {
        opacity: 0;

        .toggle {
          display: none;
        }
      }
    }
  }

  .result {
    align-items: center;
    display: flex;
    justify-content: flex-end;
    margin: 0;
    text-align: right;

    .ui--FormatBalance {
      font-size: 1.2rem;
      font-weight: var(--font-weight-normal);
      line-height: 1;
    }

    .ui--Progress {
      margin: 0.75rem;
    }
  }
`,v=n.memo((function({basePath:e,className:s}){const{t}=(0,o.$G)("app-poll"),{api:p}=(0,i.h)(),v=(0,l.C)(),[y,C]=(0,c.L)([p.query.balances?.totalIssuance,p.query.poll.totals],f),[w,N]=(0,n.useState)(null),[k,S]=(0,n.useState)(null),[I,A]=(0,n.useState)(!1),[E,M]=(0,n.useState)(!1),[P,T]=(0,n.useState)(!1),[D,F]=(0,n.useState)(!1),[V,R]=(0,n.useState)(),q=(0,n.useRef)([{isRoot:!0,name:"poll",text:t("Denomination poll")}]);if((0,n.useEffect)((()=>{if(y&&C){const e=(0,m.x)(h.If,...C);R(C.map((s=>s.mul(h.uy).div(e)))),p.query.poll.voteOf.entries().then((e=>{const s=e.reduce(((e,[,[,s]])=>e.iadd(s)),new(x())(0)),t=s.muln(1e4).div(y).toNumber()/100;S({percentage:t,voted:s})})).catch(console.log)}}),[p,y,C]),!C||!V||!v)return(0,a.jsx)("main",{className:s,children:(0,a.jsx)("div",{className:"pollContainer",children:(0,a.jsx)(r.$j,{label:t("Retrieving totals...")})})});const O=p.consts.poll.end.sub(v),z=O.gt(h.nw),B=[[t("No change"),t("No change from the original 2017 sale definitions; will mean a total of 10 million DOT from genesis."),I,A],[t("Split of 10x"),t("Split of 10x from the original sale; will mean a total of 100 million DOT from genesis. Apparent DOT price would be 10x lower and apparent account balances 10x higher."),E,M],[t("Split of 100x"),t("Split of 100x from the original sale; will mean a total of 1 billion DOT from genesis. Apparent DOT price would be 100x lower and apparent account balances 100x higher."),P,T],[t("Split of 1000x"),t("Split of 1000x from the original sale; will mean a total of 10 billion DOT from genesis. Apparent DOT price would be 1000x lower and apparent account balances 1000x higher."),D,F]],$=I||E||P||D;return(0,a.jsxs)(j,{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,items:q.current}),(0,a.jsxs)("div",{className:"pollContainer",children:[(0,a.jsxs)("div",{className:"pollHeader",children:[(0,a.jsx)("h1",{children:t("denomination vote")}),(0,a.jsxs)("div",{className:"pollBlocksRight",children:[k&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:t("{{balance}} voted",{replace:{balance:(0,g.a)(k.voted)}})}),(0,a.jsx)("div",{children:t("{{percentage}}% turnout",{replace:{percentage:k.percentage.toFixed(2)}})})]}),(0,a.jsxs)("div",{children:[z?(0,a.jsx)(d.Z,{value:O}):t("Completed"),(0,a.jsxs)("div",{children:["#",(0,b.u)(p.consts.poll.end)]})]})]})]}),(0,a.jsxs)("article",{className:"keepAlive",children:[(0,a.jsx)("p",{children:(0,a.jsx)(o.cC,{children:"The Polkadot DOT denomination vote: Seventy-two hours after the DOT token becomes transferable, the most popular option from this poll will decide the denomination used for the DOT token."},"poll1")}),(0,a.jsx)("p",{children:(0,a.jsxs)(o.cC,{children:["This is an ",(0,a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Approval_voting",rel:"noreferrer",target:"_blank",children:"approval vote"}),". There are four options and you may select any combination of them. The most popular of the four will be selected as the final DOT denomination three days after DOT token transfers are enabled."]},"poll2")}),(0,a.jsx)("p",{children:(0,a.jsxs)(o.cC,{children:["Please see the ",(0,a.jsx)("a",{href:"https://medium.com/polkadot-network/the-first-polkadot-vote-1fc1b8bd357b",rel:"noreferrer",target:"_blank",children:"Medium article "})," for more information"]},"poll3")}),z&&(0,a.jsx)("p",{className:"pollAll",children:(0,a.jsx)(o.cC,{children:(0,a.jsx)("b",{children:"Please vote for any combination of options"})},"poll4")}),(0,a.jsx)("div",{className:"options "+(z?"canVote":""),children:B.map((([e,s,n,o],i)=>(0,a.jsxs)(r.P0,{is60:!0,children:[(0,a.jsxs)(r.P0.Column,{className:"option",children:[(0,a.jsx)("div",{className:"optionName",children:e}),(0,a.jsx)("div",{className:"optionDesc",children:s}),z&&(0,a.jsx)(r.ZD,{className:"pollToggle",isDisabled:!z,label:t(z?n?"Aye, I support this":"Nay, I do not support this":"Voting closed"),onChange:o,value:z&&n})]}),(0,a.jsx)(r.P0.Column,{children:C[i].isZero()?(0,a.jsx)("div",{className:"result"}):(0,a.jsxs)("div",{className:"result",children:[(0,a.jsx)(u.Z,{value:C[i]}),(0,a.jsx)(r.Ex,{isDisabled:!k,total:k?.voted,value:C[i]})]})})]},i)))}),z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.rp,{label:t("vote using my account"),onChange:N,type:"account"}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.cA,{accountId:w,icon:"paper-plane",isDisabled:!$,label:t("Vote"),params:[[I,E,P,D]],tx:p.tx.poll.vote})})]})]}),(0,a.jsx)("div",{className:"pollActions",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:t("Any combination of the four options may be approved of by the voter. There is no need to select only one option!")}),(0,a.jsx)("li",{children:t("Approving of all or none of the options is equivalent and will not affect the outcome of the poll.")}),(0,a.jsx)("li",{children:t("All voters may alter their votes any number of times prior to the close of the poll.")}),(0,a.jsx)("li",{children:t("Voting costs nothing other than the transaction fee and can be done from all accounts with a non-zero spendable balance.")}),(0,a.jsx)("li",{children:t("Locked funds (e.g. for staking) are counted.")}),(0,a.jsx)("li",{children:t("No discretionary lock-voting is in place; all DOT used to vote counts the same.")}),(0,a.jsx)("li",{children:t("Voting is made on a per-account basis; a single account must all vote the same way and cannot split its vote.")}),(0,a.jsx)("li",{children:t('This vote does not affect any economics of the Polkadot platform. Staking rewards, inflation, effective market capitalisation and the underlying balances of every account remain completely unchanged. It is "merely" about what units we use to denominate the balances into "DOT" for the purpose of display.')})]})})]})]})}))},77311:(e,s,t)=>{t.d(s,{Z:()=>x});var a=t(52322),n=t(2784),o=t(24732),r=t(38894),i=t(13940),l=t(52450),c=t(90778),d=t(95292),u=t(34323);const m=(0,u.$)(""),h={encodedHash:m,encodedLength:0,encodedProposal:null,notePreimageTx:null,storageFee:d.nw},p=n.memo((function({className:e,onChange:s}){const{t}=(0,l.$)(),{api:r,apiDefaultTxSudo:i}=(0,c.h)(),[{encodedHash:p,encodedLength:x,storageFee:g},b]=(0,n.useState)(h),f=(0,n.useCallback)((e=>{b(e),s(e)}),[s]),j=(0,n.useCallback)((e=>f(function(e,s){let t=m,a=null,n=0,o=null,r=d.nw;return s&&(a=s.method.toHex(),n=Math.ceil((a.length-2)/2),t=(0,u.$)(a),o=e.tx.preimage.notePreimage(a),r=(e.consts.preimage?.baseDeposit||d.nw).add((e.consts.preimage?.byteDeposit||d.nw).muln(n))),{encodedHash:t,encodedLength:n,encodedProposal:a,notePreimageTx:o,storageFee:r}}(r,e))),[r,f]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.u_.Columns,{className:e,hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:t("The image (proposal) will be stored on-chain against the hash of the contents.")}),(0,a.jsx)("p",{children:t("When submitting a proposal the hash needs to be known. Proposals can be submitted with hash-only, but upon dispatch the preimage needs to be available.")})]}),children:[(0,a.jsx)(o.n6,{defaultValue:i,label:t("propose"),onChange:j}),(0,a.jsx)(o.qG,{label:t("preimage hash"),value:p,withCopy:!0}),(0,a.jsx)(o.qG,{label:t("preimage length"),value:x||"0",withCopy:!0})]}),!g.isZero()&&(0,a.jsx)(o.u_.Columns,{className:e,hint:t("The calculated storage costs based on the base and the per-bytes fee."),children:(0,a.jsx)(o.H,{defaultValue:g,isDisabled:!0,label:t("calculated storage fee")})})]})})),x=n.memo((function({className:e,imageHash:s}){const{t}=(0,l.$)(),[c,d]=(0,r.O)(),[u,m]=(0,n.useState)(null),[{encodedHash:x,notePreimageTx:g},b]=(0,n.useState)(h),f=!s||s===x;return(0,a.jsxs)(a.Fragment,{children:[c&&(0,a.jsxs)(o.u_,{className:e,header:t("Submit preimage"),onClose:d,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:t("This account will pay the fees for the preimage, based on the size thereof."),children:(0,a.jsx)(o.rp,{label:t("send from account"),labelExtra:(0,a.jsx)(i.Z,{label:(0,a.jsx)("span",{className:"label",children:t("transferrable")}),params:u}),onChange:m,type:"account"})}),(0,a.jsx)(p,{onChange:b})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:u,extrinsic:g,icon:"plus",isDisabled:!u||!f||!g,label:t("Submit preimage"),onStart:d})})]}),(0,a.jsx)(o.zx,{icon:"plus",label:t("Add preimage"),onClick:d})]})}))},69338:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(52322),n=t(2784),o=t(24732),r=t(56949),i=t(52450);const l=n.memo((function({className:e="",value:s}){const{t}=(0,i.$)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:`${e} all`,children:s&&s.isCompleted?(0,a.jsxs)(a.Fragment,{children:[s.proposal&&(0,a.jsx)(o.Uv,{labelHash:t("call"),value:s.proposal}),s.proposalError?(0,a.jsx)(o.oy,{content:s.proposalError}):s.proposalWarning?(0,a.jsx)(o.Pd,{content:s.proposalWarning}):null]}):(0,a.jsx)("div",{className:"--tmp",children:"balances.transfer"})}),(0,a.jsx)("td",{className:"address media--1300",children:s&&s.isCompleted?s.deposit?(0,a.jsx)(o.ax,{balance:s.deposit.amount,value:s.deposit.who,withBalance:!0}):null:(0,a.jsx)(o.ax,{className:"--tmp",value:r.TS})})]})}))},74525:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(52322),n=t(2784),o=t(24732);const r=o.zo.td`
  white-space: nowrap;

  > div {
    display: inline-block;
    vertical-align: middle;
  }

  .shortHash {
    + div {
      margin-left: 0.5rem;
    }
  }
`,i=n.memo((function({className:e="",value:s}){return(0,a.jsxs)(r,{className:`${e} hash`,children:[(0,a.jsx)("div",{className:"shortHash",children:s}),(0,a.jsx)(o.qi,{value:s})]})}))},20600:(e,s,t)=>{t.d(s,{Z:()=>S});var a=t(52322),n=t(2784),o=t(24732),r=t(52450),i=t(90778),l=t(12298),c=t(39824),d=t(11677);const u=[],m={transform:e=>e.map((({args:[e]})=>e))};function h(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:a}})=>{"Noted"===a?s.push(e):t.push(e)})),{added:s,removed:t}}const p=(0,d.e)("usePreimages",(function(){const{api:e}=(0,i.h)(),s=(0,l.k)(e.query.preimage.statusFor,u,m),t=(0,c.N)([e.events.preimage.Cleared,e.events.preimage.Noted],h,s);return(0,n.useMemo)((()=>t&&t.map((e=>e.toHex()))),[t])}));var x=t(77311),g=t(31313),b=t(14681),f=t(69338),j=t(34814);const v=n.memo((function({className:e,value:{count:s,deposit:t,proposalHash:l,status:c}}){const{t:d}=(0,r.$)(),{api:u}=(0,i.h)(),{allAccounts:m}=(0,j.x)();return(0,n.useMemo)((()=>0===s&&c&&c.isUnrequested&&t&&m.includes(t.who)),[m,s,t,c])&&t?(0,a.jsx)(o.cA,{accountId:t.who,className:e,icon:"minus",label:d("Unnote"),params:[l],tx:u.tx.preimage.unnotePreimage}):null}));var y=t(74525);const C=n.memo((function({className:e,value:s}){const t=(0,g.CH)(s);return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)(y.Z,{value:s}),(0,a.jsx)(f.Z,{value:t}),(0,a.jsx)("td",{className:"number media--1000",children:t&&t.proposalLength?(0,b.u)(t.proposalLength):(0,a.jsx)("span",{className:"--tmp",children:"999,999"})}),(0,a.jsx)("td",{className:"preimageStatus together media--1200",children:t?(0,a.jsxs)(a.Fragment,{children:[t.status&&(0,a.jsxs)("div",{children:[t.status?.type,0!==t.count&&(0,a.jsxs)(a.Fragment,{children:[" / ",(0,b.u)(t.count)]})]}),(0,a.jsx)(v,{value:t})]}):(0,a.jsx)("span",{className:"--tmp",children:"Unrequested"})})]})})),w=n.memo((function({className:e,hashes:s}){const{t}=(0,r.$)();return(0,a.jsx)(o.Ty,{className:e,children:(0,a.jsx)(o.Jy,{label:t("images"),children:void 0===s?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,b.u)(s.length)})})})),N=o.zo.div`
  td.preimageStatus {
    div+.ui--Button {
      margin-top: 0.25rem;
    }
  }
`,k=n.memo((function({className:e}){const{t:s}=(0,r.$)(),t=p(),i=(0,n.useRef)([[s("preimages"),"start",2],[void 0,"media--1300"],[s("length"),"media--1000"],[s("status"),"start media--1200"]]);return(0,a.jsxs)(N,{className:e,children:[(0,a.jsx)(w,{hashes:t}),(0,a.jsx)(o.zx.Group,{children:(0,a.jsx)(x.Z,{})}),(0,a.jsx)(o.iA,{className:e,empty:t&&s("No hashes found"),header:i.current,children:t&&t.map((e=>(0,a.jsx)(C,{value:e},e)))})]})})),S=n.memo((function({basePath:e,className:s}){const{t}=(0,r.$)(),i=(0,n.useRef)([{isRoot:!0,name:"overview",text:t("Overview")}]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(o.mQ,{basePath:e,items:i.current}),(0,a.jsx)(k,{})]})}))},52450:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-preimages")}},10257:(e,s,t)=>{t.d(s,{Z:()=>I});var a=t(52322),n=t(2784),o=t(7267),r=t(1398),i=t(99501),l=t(24732),c=t(61349);function d(){return(0,c.$G)("app-ranked")}const u=["grey","grey","yellow","orange","purple","blue","green","black"],m=u[u.length-1],h=n.memo((function({className:e,value:{accountId:s,info:{rank:t}}}){const{t:n}=d();return(0,a.jsx)("tr",{className:e,children:(0,a.jsxs)("td",{className:"address all relative",children:[(0,a.jsx)(l.N,{value:s}),(0,a.jsx)(l.Vp,{className:"absolute",color:u[t.toNumber()]||m,hover:n("Membership rank"),label:t.toString()})]})})}));var p=t(14681);const x=n.memo((function({className:e,members:s}){const{t}=d();return(0,a.jsx)(l.Ty,{className:e,children:(0,a.jsx)(l.Jy,{label:t("members"),children:void 0===s?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,p.u)(s.length)})})})),g=n.memo((function({className:e,members:s}){const{t}=d(),o=(0,n.useRef)([[t("members"),"start"]]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(x,{members:s}),(0,a.jsx)(l.iA,{className:e,empty:s&&t("No members found"),header:o.current,isSplit:!0,children:s&&s.map((e=>(0,a.jsx)(h,{value:e},e.accountId)))})]})}));var b=t(90778),f=t(9118),j=t(11677),v=t(12298),y=t(39824);const C={transform:e=>e.map((({args:[e]})=>e))};function w(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:a}})=>{"MemberAdded"===a?s.push(e):t.push(e)})),{added:s,removed:t}}const N=(0,j.e)("useMemberIds",(function(e){const{api:s}=(0,b.h)(),t=(0,v.k)(s.query[e].members,[],C);return(0,y.N)([s.events[e].MemberAdded,s.events[e].MemberRemoved],w,t)})),k={transform:([[e],s])=>{const t=s.map(((s,t)=>[s.unwrapOr(null),e[t]])).filter((e=>!!e[0])).sort((([e],[s])=>s.rank.cmp(e.rank))).map((([e,s])=>({accountId:s.toString(),info:e})));return{memberIds:t.map((({accountId:e})=>e)),memberRanks:t.map((({info:e})=>e.rank)),members:t}},withParamsTransform:!0},S=(0,j.e)("useMembers",(function(e){const{api:s}=(0,b.h)(),t=N(e),a=(0,f.W7)(t&&0!==t.length&&s.query[e].members.multi,[t],k);return(0,n.useMemo)((()=>t&&0===t.length?{memberIds:[],memberRanks:[],members:[]}:a),[t,a])})),I=n.memo((function({basePath:e,className:s,palletColl:t,palletPoll:c}){const{t:u}=d(),m=S(t),h=(0,r.E)(c),p=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:u("Overview")},{name:"referenda",text:u("Referenda ({{count}})",{replace:{count:h||0}})}]),[h,u]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(l.mQ,{basePath:e,items:p}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/referenda`,children:(0,a.jsx)(i.Z,{members:m&&m.memberIds,palletReferenda:c,palletVote:t,ranks:m&&m.memberRanks})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(g,{members:m&&m.members})})]})]})}))},41857:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(52322),n=t(2784),o=t(10257);const r=n.memo((function({basePath:e,className:s}){return(0,a.jsx)(o.Z,{basePath:e,className:s,palletColl:"rankedCollective",palletPoll:"rankedPolls"})}))},76288:(e,s,t)=>{t.d(s,{Z:()=>n});var a=t(1398);const n=(0,t(11677).e)("useCounter",(function(){return(0,a.E)("rankedPolls")}))},99501:(e,s,t)=>{t.d(s,{Z:()=>Te});var a=t(52322),n=t(2784),o=t(77311),r=t(24732),i=t(90778),l=t(9118),c=t(34814),d=t(95292),u=t(54062),m=t(80973),h=t(11677);const p=(0,h.e)("useSummary",(function(e,s){const{api:t}=(0,i.h)(),a=(0,l.W7)(t.query[e].referendumCount),o=(0,n.useMemo)((()=>function(e=[]){return e.reduce(((e,{referenda:s=[]})=>e+s.filter((e=>e.info.isOngoing)).length),0)}(s)),[s]);return(0,n.useMemo)((()=>({refActive:o,refCount:a})),[o,a])}));var x=t(38894),g=t(98551),b=t(33661),f=t(12372),j=t(57387);const v=(0,h.e)("useTrackOptions",(function(e,s,t,o){const{api:r,specName:l}=(0,i.h)();return(0,n.useMemo)((()=>function(e,s,t,n,o,r){const i=o&&o.map((e=>(0,f.G)(e))),l=r&&r.map((e=>(0,f.G)(e)));return n.filter((({id:e})=>(!i||i.some((s=>s.eq(e))))&&(!l||!l.some((s=>s.eq(e)))))).map((({id:o,info:r})=>{const i=(0,j.K2)(e,s,t,n,o.toNumber()),l=(0,j.tp)(o,r);return{text:i?.text?(0,a.jsxs)("div",{className:"trackOption",children:[(0,a.jsx)("div",{className:"normal",children:l}),(0,a.jsx)("div",{className:"faded",children:i.text})]}):l,value:o.toNumber()}}))}(r,l,e,s,t,o)),[r,o,t,e,l,s])})),y=n.memo((0,r.zo)((function({className:e,exclude:s,include:t,onChange:n,palletReferenda:o,tracks:i}){const{t:l}=(0,u.$)(),c=v(o,i,t,s);return(0,a.jsx)(r.Lt,{className:e,defaultValue:c[0].value,label:l("submission track"),onChange:n,options:c})}))`
  .trackOption {
    .faded {
      font-size: var(--font-size-small);
      font-weight: var(--font-weight-normal);
      margin-top: 0.125rem;
      opacity: 0.6;
    }
  }
`),C=r.zo.div`
  .ui--Table {
    font-size: var(--font-percent-small);
    opacity: var(--opacity-light);
    padding-left: 2rem;
  }
`,w=n.memo((function({allowEmpty:e,className:s,palletReferenda:t,tracks:o,value:l}){const{t:c}=(0,u.$)(),{api:d,specName:m}=(0,i.h)(),h=(0,n.useMemo)((()=>l&&l.map((e=>[e,(0,j.K2)(d,m,t,o,e.classId.toNumber())]))),[d,t,m,o,l]);return h?(0,a.jsxs)(C,{className:s,children:[h.length?(0,a.jsx)(r.iA,{isInline:!0,children:h.map((([{casting:e,classId:s,delegating:t},n],o)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"all",children:n&&n.trackName||s.toString()}),(0,a.jsx)("td",{className:"together",children:t&&c("delegating")||e&&`${e.length} ${1===e.length?c("vote"):c("votes")}`})]},o)))}):(0,a.jsx)(r.Pd,{content:c("This account has no voting/delating activity in the chain state")}),!e&&h.some((([{delegating:e}])=>e))&&(0,a.jsx)(r.Pd,{content:c("This account has some delegations in itself")})]}):null})),N={transform:([[e],s])=>e.reduce(((e,t,a)=>({...e,[t]:s[a].map((([e,s])=>({balance:s.toBn(),classId:e.toBn()})))})),{}),withParamsTransform:!0},k=(0,h.e)("useVotingLocks",(function(e,s){const{api:t}=(0,i.h)(),a=(0,n.useMemo)((()=>s?s.length?[s]:[]:void 0),[s]),o=(0,l.W7)(a&&a[0]&&t.query[e]?.classLocksFor?.multi,a,N);return(0,n.useMemo)((()=>a?a[0]?(0,b.m)(t.query[e]?.classLocksFor)?o:a[0].reduce(((e,s)=>({...e,[s]:[]})),{}):{}:null),[t,o,a,e])})),S={transform:([[e],s])=>e.sort(((e,s)=>e[1].cmp(s[1]))).reduce(((e,[t,a],n)=>{let o,r;if(e[t]||(e[t]=[]),s[n].isCasting)o=s[n].asCasting.votes.map((([e])=>({refId:e})));else if(s[n].isDelegating){const{conviction:e,target:t}=s[n].asDelegating;r={conviction:e.type,targetId:t.toString()}}else console.error(`Unable to handle PalletConvictionVotingVoteVoting type ${s[n].type}`);return e[t].push({casting:o,classId:a,delegating:r}),e}),{}),withParamsTransform:!0};function I(e){return e&&Object.entries(e).reduce(((e,[s,t])=>t.reduce(((e,{classId:t})=>(e.push([s,t]),e)),e)),[])}const A=(0,h.e)("useVotingFor",(function(e,s){const{api:t}=(0,i.h)(),a=k(e,s),o=(0,n.useMemo)((()=>[I(a)]),[a]),r=(0,l.W7)(o&&o[0]&&t.query[e]?.votingFor?.multi,o,S);return(0,n.useMemo)((()=>a&&o?o[0]?(0,b.m)(t.query[e]?.votingFor)?r&&function(e,s){return Object.keys(e).reduce(((e,s)=>(e[s]||(e[s]=[]),e)),s)}(a,r):a:{}:null),[t,a,o,e,r])})),E=(0,h.e)("useActivityAccount",(function(e,s){const t=(0,n.useMemo)((()=>s&&[s]||null),[s]),a=A(e,t);return a&&s?a[s]||[]:null})),M={transform:([[e],s])=>s.map(((s,t)=>s.isSome?s.unwrap()[0].toString():e[t])).reduce(((e,s)=>(e.includes(s)||e.push(s),e)),[]),withParamsTransform:!0},P=(0,h.e)("useSuperIds",(function(e){const{api:s}=(0,i.h)(),t=(0,n.useMemo)((()=>e&&[e]),[e]),a=(0,l.W7)(t&&!!t[0].length&&s.query.identity?.superOf?.multi,t,M);return(0,n.useMemo)((()=>t?t[0].length?(0,b.m)(s.query.identity?.superOf)?a:e:[]:null),[s,e,a,t])})),T=(0,h.e)("useActivity",(function(e,s){const t=P(s);return A(e,t)}));var D=t(12298);const F={transform:e=>e.map((({args:[e]})=>e.toString()))},V=(0,h.e)("useFellows",(function(){const{api:e}=(0,i.h)(),s=(0,D.k)(e.query.fellowshipCollective?.members,[],F);return(0,n.useMemo)((()=>(0,b.m)(e.query.fellowshipCollective?.members)?s:[]),[e,s])})),R=(0,h.e)("useActivityFellows",(function(e){const s=V();return T(e,s)})),q={transform:e=>e.reduce(((e,s)=>s.isSome?e.concat(s.unwrap().targets.map((e=>e.toString())).filter((s=>!e.includes(s)))):e),[])},O=(0,h.e)("useNominators",(function(){const{api:e}=(0,i.h)(),{allAccounts:s}=(0,c.x)(),t=(0,n.useMemo)((()=>[s]),[s]),a=(0,l.W7)(!!s.length&&t&&e.query.staking?.nominators?.multi,t,q);return(0,n.useMemo)((()=>(0,b.m)(e.query.staking?.nominators)&&s.length?a:[]),[s,e,a])})),z=(0,h.e)("useActivityNominators",(function(e){const s=O();return T(e,s)})),B=n.memo((function({className:e,palletReferenda:s,palletVote:t,tracks:o}){const{t:l}=(0,u.$)(),{api:d}=(0,i.h)(),{hasAccounts:m}=(0,c.x)(),[h,p]=(0,x.O)(),[f,j]=(0,x.O)(),[v,C,N]=(0,g.t)(),[k,S]=(0,n.useState)(null),[I,A]=(0,n.useState)(null),[M,P]=(0,n.useState)(0),[T,D]=(0,n.useState)(),[F,V]=(0,n.useState)(1),q=R(t),O=z(t),B=E(t,k),$=E(t,I),[L,H]=(0,n.useState)({index:0,type:"address"}),_=(0,n.useMemo)((()=>B&&o.filter((e=>!B.some((s=>e.id.eq(s.classId))))).map((({id:e})=>e))),[B,o]),Z=(0,n.useMemo)((()=>q&&Object.entries(q).map((([e,s])=>s.length>0&&{key:e,name:e,value:e})).filter((e=>!!e))),[q]),W=(0,n.useMemo)((()=>O&&Object.entries(O).map((([e])=>({key:e,name:e,value:e}))).filter((e=>!!e))),[O]),U=(0,n.useMemo)((()=>[{text:l("Addresses"),value:"address"},(0,b.m)(d.query.staking?.nominators)&&{isDisabled:!W||!W.length,text:l("Validators"),value:"validators"},(0,b.m)(d.query.fellowshipCollective?.members)&&{isDisabled:!Z||!Z.length,text:l("Fellows"),value:"fellows"}]),[Z,W,d,l]),J=(0,n.useCallback)(((e,s)=>H({index:e,type:s.toString()})),[]),G=(0,n.useMemo)((()=>T&&F&&I&&_?f?d.tx.utility.forceBatch(_.map((e=>d.tx[t].delegate(e,I,F,T)))):d.tx[t].delegate(M,I,F,T):null),[d,T,F,_,f,t,I,M]),Q=!!(k&&B&&_&&_.length>0),Y=!(!I||!$);return(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsxs)(r.u_,{className:e,header:l("Delegate votes {{step}}/{{numSteps}}",{replace:{numSteps:2,step:v}}),onClose:p,size:"large",children:[1===v&&(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsxs)(r.u_.Columns,{hint:l("Delegate from this account to another. All votes made on the target would count as a delegated vote for this account."),children:[(0,a.jsx)(r.rp,{label:l("delegate from account"),onChange:S,type:"account",withLabel:!0}),(0,a.jsx)(w,{allowEmpty:!0,palletReferenda:s,trackId:-1,tracks:o,value:B})]}),(0,a.jsxs)(r.u_.Columns,{align:"right",hint:l("Either delegate your votes for a single track as selected or delegate for all available tracks."),children:[(0,a.jsx)(r.ZD,{label:l("apply delegation to all tracks"),onChange:j,value:f}),!f&&_&&_.length>0&&(0,a.jsx)(y,{include:_,onChange:P,palletReferenda:s,tracks:o})]}),(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:l("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,a.jsx)("p",{children:l("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]}),children:[(0,a.jsx)(r.xb,{accountId:k,autoFocus:!0,label:l("delegated vote value"),onChange:D}),(0,a.jsx)(r.v,{label:l("conviction"),onChange:V,value:F,voteLockingPeriod:d.consts[t].voteLockingPeriod})]})]}),2===v&&(0,a.jsxs)(r.u_.Content,{children:[U.length>1&&(0,a.jsx)(r.u_.Columns,{align:"center",hint:l("Select from a list of pre-propulated accounts (based on your account activity) or supply your own"),children:(0,a.jsx)(r.tX,{onChange:J,options:U,value:L.index})}),(0,a.jsxs)(r.u_.Columns,{hint:l("The account that you wish to delegate to"),children:["address"===L.type?(0,a.jsx)(r.rp,{label:l("delegate to address"),onChange:A,type:"allPlus"},"address"):"validators"===L.type?(0,a.jsx)(r.rp,{defaultValue:W?.[0].value,label:l("delegate to validator"),onChange:A,options:W,type:"allPlus"},"validators"):"fellows"===L.type?(0,a.jsx)(r.rp,{defaultValue:Z?.[0].value,label:l("delegate to fellow"),onChange:A,options:Z,type:"allPlus"},"fellows"):null,(0,a.jsx)(w,{palletReferenda:s,trackId:f?-1:M,tracks:o,value:"fellows"===L.type?q&&!!I&&q[I]:"validators"===L.type?O&&!!I&&O[I]:$})]})]}),(0,a.jsxs)(r.u_.Actions,{children:[1!==v&&(0,a.jsx)(r.zx,{icon:"step-backward",label:l("Prev"),onClick:N}),2!==v&&(0,a.jsx)(r.zx,{activeOnEnter:!0,icon:"step-forward",isDisabled:1===v?!Q:!Y,label:l("Next"),onClick:C}),(0,a.jsx)(r.cA,{accountId:k,extrinsic:G,icon:"code-merge",isDisabled:!Q||!Y||2!==v,label:l("Delegate"),onStart:p})]})]}),(0,a.jsx)(r.zx,{icon:"code-merge",isDisabled:!m,label:l("Delegate"),onClick:p})]})}));var $=t(54383),L=t(56360),H=t(97794),_=t(14681),Z=t(52107),W=t(33403),U=t(65874);const J=n.memo((function({className:e="",label:s,when:t}){const n=(0,$.C)();return(0,a.jsx)("td",{className:`${e} number`,children:n&&t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:s}),t.gt(n)&&(0,a.jsx)(U.Z,{value:t.sub(n)}),(0,a.jsxs)("div",{children:["#",(0,_.u)(t)]})]})})})),G=n.memo((function({value:{info:e}}){const s=(0,n.useMemo)((()=>e.isKilled?e.asKilled:null),[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"all no-pad",colSpan:5}),(0,a.jsx)(J,{label:e.type,when:s})]})}));var Q=t(31313),Y=t(13940);const K=n.memo((function({className:e="",id:s,palletReferenda:t,track:o}){const{t:l}=(0,u.$)(),{api:c}=(0,i.h)(),[d,m]=(0,x.O)(),[h,p]=(0,n.useState)(null);return(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsxs)(r.u_,{className:e,header:l("Place decision deposit"),onClose:m,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:l("The deposit will be registered from this account and the balance lock will be applied here."),children:(0,a.jsx)(r.rp,{label:l("deposit from account"),labelExtra:(0,a.jsx)(Y.Z,{label:(0,a.jsx)("span",{className:"label",children:l("transferrable")}),params:h}),onChange:p,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:l("The referendum this deposit would apply to."),children:(0,a.jsx)(r.Rn,{defaultValue:s,isDisabled:!0,label:l("referendum id")})}),(0,a.jsx)(r.u_.Columns,{hint:l("The deposit for this proposal will be locked for the referendum duration."),children:(0,a.jsx)(r.H,{defaultValue:o.decisionDeposit,isDisabled:!0,label:l("decision deposit")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:h,icon:"plus",label:l("Place deposit"),onStart:m,params:[s],tx:c.tx[t].placeDecisionDeposit})})]}),(0,a.jsx)(r.zx,{icon:"plus",label:l("Decision deposit"),onClick:m})]})})),X=n.memo((function({className:e="",id:s,palletReferenda:t}){const{t:o}=(0,u.$)(),{api:l}=(0,i.h)(),[c,d]=(0,x.O)(),[m,h]=(0,n.useState)(null);return(0,a.jsxs)(a.Fragment,{children:[c&&(0,a.jsxs)(r.u_,{className:e,header:o("Refund decision deposit"),onClose:d,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:o("The transaction will be submitted from this account."),children:(0,a.jsx)(r.rp,{label:o("refund from account"),onChange:h,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:o("The referendum this deposit would apply to."),children:(0,a.jsx)(r.Rn,{defaultValue:s,isDisabled:!0,label:o("referendum id")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:m,icon:"minus",label:o("Refund deposit"),onStart:d,params:[s],tx:l.tx[t].refundDecisionDeposit})})]}),(0,a.jsx)(r.zx,{icon:"minus",label:o("Refund deposit"),onClick:d})]})})),ee=r.zo.td`
  .ui--AddressMini+.ui--Button {
    margin-top: 0.25rem;
  }
`,se=n.memo((function({canDeposit:e,canRefund:s,className:t="",decision:n,id:o,noMedia:i,palletReferenda:l,submit:c,track:d}){return(0,a.jsxs)(ee,{className:`${t} address ${i?"":"media--1000-noPad"}`,children:[c&&(0,a.jsx)(r.ax,{balance:c.amount,className:i?"":"media--1000",value:c.who,withBalance:!0}),n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.ax,{balance:n.amount,className:i?"":"media--1000",value:n.who,withBalance:!0}),s&&(0,a.jsx)("div",{className:i?"":"media--1000",children:(0,a.jsx)(X,{id:o,palletReferenda:l})})]}):e&&d&&(0,a.jsx)("div",{className:i?"":"media--1000",children:(0,a.jsx)(K,{id:o,palletReferenda:l,track:d})})]})}));var te=t(37602);function ae(e){return e instanceof te.W?e.unwrapOr(null):e}const ne=n.memo((function({accountId:e,id:s,onChange:t}){const{t:o}=(0,u.$)(),[i,l]=(0,n.useState)(),[c,d]=(0,n.useState)(),[m,h]=(0,n.useState)();return(0,n.useEffect)((()=>{t([s,{SplitAbstain:{abstain:i,aye:c,nay:m}}])}),[i,c,m,s,t]),(0,a.jsxs)(r.u_.Columns,{hint:o("The value of the balance that is to be split to the abstain, aye and nay parts of the vote"),children:[(0,a.jsx)(r.xb,{accountId:e,autoFocus:!0,label:o("abstain vote value"),onChange:l}),(0,a.jsx)(r.xb,{accountId:e,autoFocus:!0,label:o("aye vote value"),noDefault:!0,onChange:d}),(0,a.jsx)(r.xb,{accountId:e,label:o("nay vote value"),noDefault:!0,onChange:h})]})})),oe=n.memo((function({accountId:e,id:s,onChange:t}){const{t:o}=(0,u.$)(),[i,l]=(0,n.useState)(),[c,d]=(0,n.useState)();return(0,n.useEffect)((()=>{t([s,{Split:{aye:i,nay:c}}])}),[i,c,s,t]),(0,a.jsxs)(r.u_.Columns,{hint:o("The value of the balance that is to be split to the aye and nay parts of the vote"),children:[(0,a.jsx)(r.xb,{accountId:e,autoFocus:!0,label:o("aye vote value"),onChange:l}),(0,a.jsx)(r.xb,{accountId:e,label:o("nay vote value"),noDefault:!0,onChange:d})]})})),re=n.memo((function({accountId:e,id:s,isAye:t,onChange:o,voteLockingPeriod:i}){const{t:l}=(0,u.$)(),[c,d]=(0,n.useState)(),[m,h]=(0,n.useState)(1);return(0,n.useEffect)((()=>{o([s,{Standard:{balance:c,vote:{aye:t,conviction:m}}}])}),[c,m,s,t,o]),(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:l("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,a.jsx)("p",{children:l("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]}),children:[(0,a.jsx)(r.xb,{accountId:e,autoFocus:!0,label:l(t?"aye vote value":"nay vote value"),onChange:d}),(0,a.jsx)(r.v,{label:l("conviction"),onChange:h,value:m,voteLockingPeriod:i})]})})),ie=(0,r.zo)(r.u_)`
  .ui--Modal-Columns.centerVoteType > div:first-child {
    text-align: center;
  }
`,le=n.memo((function({className:e,id:s,isConvictionVote:t,isMember:o,members:l,palletVote:d,preimage:m,ranks:h,trackInfo:p}){const{t:g}=(0,u.$)(),{api:b}=(0,i.h)(),{allAccounts:f,hasAccounts:j}=(0,c.x)(),[v,y]=(0,n.useState)(null),[C,w]=(0,x.O)(),[N,k]=(0,n.useState)(0),[S,I]=(0,n.useState)(),A=(0,n.useMemo)((()=>function(e,s){let t=!1;try{t=!!e.createType("PalletConvictionVotingVoteAccountVote",{SplitAbstain:{abstain:1}}).isSplitAbstain}catch{t=!1}return t?[{text:s("Aye"),value:"aye"},{text:s("Nay"),value:"nay"},{text:s("Split"),value:"split"},{text:s("Abstain"),value:"abstain"}]:[{text:s("Aye"),value:"aye"},{text:s("Nay"),value:"nay"},{text:s("Split"),value:"split"}]}(b,g)),[b,g]),E=(0,n.useMemo)((()=>function(e,s,t,a){if(s){const n=s.filter((s=>e.includes(s)));if(t&&a&&a.compare){const e=a.compare;return n.filter(((s,a)=>e(t[a])))}return n}return s}(f,l,h,p)),[f,l,h,p]),M=(0,n.useMemo)((()=>!o||!(!l||!E)&&!E.length),[E,o,l]);return j?(0,a.jsxs)(a.Fragment,{children:[C&&(0,a.jsxs)(ie,{className:e,header:g("Vote on referendum"),onClose:w,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[m&&(0,a.jsx)(r.u_.Columns,{hint:g("If this proposal is passed, the changes will be applied via dispatch and the deposit returned."),children:(0,a.jsx)(r.lV,{idNumber:s,proposal:m.proposal})}),(0,a.jsx)(r.u_.Columns,{hint:g("The vote will be recorded for this account. If another account delegated to this one, the delegated votes will also be counted."),children:(0,a.jsx)(r.UE,{filter:E,onChange:y})}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.u_.Columns,{className:"centerVoteType",hint:g("The type of vote that you wish to cast on the referendum."),children:(0,a.jsx)(r.tX,{onChange:k,options:A,value:N})}),0===N?(0,a.jsx)(re,{accountId:v,id:s,isAye:!0,onChange:I,voteLockingPeriod:b.consts[d].voteLockingPeriod}):1===N?(0,a.jsx)(re,{accountId:v,id:s,onChange:I,voteLockingPeriod:b.consts[d].voteLockingPeriod}):2===N?(0,a.jsx)(oe,{accountId:v,id:s,onChange:I}):(0,a.jsx)(ne,{accountId:v,id:s,onChange:I})]})]}),(0,a.jsx)(r.u_.Actions,{children:t?(0,a.jsx)(r.cA,{accountId:v,icon:"check-to-slot",label:g("Vote"),onStart:w,params:S,tx:b.tx[d].vote}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.cA,{accountId:v,icon:"ban",label:g("Vote Nay"),onStart:w,params:[s,!1],tx:b.tx[d].vote}),(0,a.jsx)(r.cA,{accountId:v,icon:"check",label:g("Vote Aye"),onStart:w,params:[s,!0],tx:b.tx[d].vote})]})})]}),(0,a.jsx)(r.zx,{icon:"check-to-slot",isDisabled:M,label:g("Vote"),onClick:w})]}):null}));var ce=t(58607),de=t(39824);const ue={transform:e=>e.map((({args:[,e]})=>e))},me={transform:([[e],s])=>e.reduce(((e,[,t],a)=>(s[a]&&s[a].isSome&&(e[t.toString()]=s[a].unwrap()),e)),{}),withParamsTransform:!0};function he(e,s,t){const a=[];return e.forEach((({event:{data:[e,s]}})=>{t&&s.eq(t)&&a.push(e)})),{added:a}}const pe=(0,h.e)("useVotes",(function(e,s,t){const{api:a}=(0,i.h)(),o=(0,D.k)(!1===t&&a.query[e].voting,[s],ue),r=(0,de.N)([a.events[e].Voted],he,o,s),c=(0,n.useMemo)((()=>r?.map((e=>[s,e]))),[r,s]);return(0,l.W7)(c&&a.query[e].voting.multi,[c],me)}));function xe(e){return e?.sort((([,e],[,s])=>s.cmp(e))).map((([e])=>(0,a.jsx)(r.ax,{value:e},e)))}const ge=n.memo((function({className:e="",id:s,isConvictionVote:t,palletVote:o,tally:i}){const{t:l}=(0,u.$)(),c=pe(o,s,t),[d,m]=(0,n.useMemo)((()=>function(e={}){const s=[],t=[],a=Object.entries(e);for(let e=0;e<a.length;e++){const[n,o]=a[e];o.isAye?s.push([n,o.asAye]):t.push([n,o.asNay])}return[s.length?s:void 0,t.length?t:void 0]}(c)),[c]),h=(0,n.useCallback)((()=>xe(d)),[d]),p=(0,n.useCallback)((()=>xe(m)),[m]);return(0,a.jsxs)("td",{className:`${e} expand media--1200-noPad`,children:[(0,a.jsx)(r.xH,{className:"media--1200",renderChildren:d&&h,summary:t?(0,a.jsxs)(a.Fragment,{children:[l("Aye"),(0,a.jsx)("div",{children:(0,a.jsx)(ce.Z,{value:i.ayes})})]}):l("Aye {{count}}",{replace:{count:(0,_.u)(i.ayes)}})}),(0,a.jsx)(r.xH,{className:"media--1200",renderChildren:m&&p,summary:t?(0,a.jsxs)(a.Fragment,{children:[l("Nay"),(0,a.jsx)("div",{children:(0,a.jsx)(ce.Z,{value:i.nays})})]}):l("Nay {{count}}",{replace:{count:(0,_.u)(i.nays)}})})]})})),be=n.memo((function({isMember:e,members:s,palletReferenda:t,palletVote:o,ranks:l,trackInfo:c,value:{id:d,info:m,isConvictionVote:h,track:p}}){const{t:x}=(0,u.$)(),{api:g}=(0,i.h)(),{decisionDeposit:b,ongoing:f,periods:{confirmEnd:j,decideEnd:v,periodEnd:y},submissionDeposit:C,tally:w,tallyTotal:N}=(0,n.useMemo)((()=>function(e,s,t){const a=s.asOngoing,n=(0,Q.uD)(e,a.proposal||a.proposalHash).proposalHash;let o=null,r=null,i=null;if(t){const{deciding:e,submitted:s}=a;if(e.isSome){const{confirming:s,since:a}=e.unwrap();s.isSome?i=s.unwrap():r=a.add(t.decisionPeriod)}else o=s.add(t.preparePeriod)}return{decisionDeposit:ae(a.decisionDeposit),ongoing:a,periods:{confirmEnd:i,decideEnd:r,periodEnd:i||r||o,prepareEnd:o},proposalHash:n,submissionDeposit:ae(a.submissionDeposit),tally:a.tally,tallyTotal:a.tally.ayes.add(a.tally.nays)}}(g,m,p)),[g,m,p]),k=(0,Q.CH)(f.proposal||f.proposalHash);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"all",children:k&&k.proposal?(0,a.jsx)(r.Uv,{labelHash:x("preimage"),value:k.proposal,withHash:!0}):(0,a.jsx)("div",{className:"shortHash",children:k?.proposalHash})}),(0,a.jsx)(se,{canDeposit:!0,decision:b,id:d,palletReferenda:t,submit:C,track:p}),(0,a.jsx)(J,{label:x(j?"Confirming":v?"Deciding":"Preparing"),when:y}),(0,a.jsx)(ge,{id:d,isConvictionVote:h,palletVote:o,tally:w}),(0,a.jsx)("td",{className:"middle chart media--1300-noPad",children:(0,a.jsx)(r.Ex,{className:"media--1300",total:N,value:w.ayes})}),(0,a.jsx)("td",{className:"actions button",children:(0,a.jsx)(le,{id:d,isConvictionVote:h,isMember:e,members:s,palletVote:o,preimage:k,ranks:l,trackInfo:c})})]})})),fe=n.memo((function({palletReferenda:e,value:{id:s,info:t,track:o}}){const{decision:r,submit:i,when:l}=(0,n.useMemo)((()=>function(e){const s=e.isApproved?e.asApproved:e.isRejected?e.asRejected:e.isCancelled?e.asCancelled:e.isTimedOut?e.asTimedOut:null;return s?{decision:ae(s[2]),submit:ae(s[1]),when:s[0]}:{decision:null,submit:null,when:null}}(t)),[t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{className:"no-pad",colSpan:4}),(0,a.jsx)(se,{canRefund:!0,className:"all",decision:r,id:s,noMedia:!0,palletReferenda:e,submit:i,track:o}),(0,a.jsx)(J,{label:t.type,when:l})]})})),je={Killed:G,Ongoing:be},ve=["#ff8c00","#9c3333","#339c33"],ye={aspectRatio:2.25,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0}}};const Ce=r.zo.tr`
  .shortHash {
    max-width: var(--width-shorthash);
    min-width: 3em;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: var(--width-shorthash);
  }
`,we=n.memo((function(e){const{t:s}=(0,u.$)(),t=(0,$.C)(),o=(0,L.n)(),{activeIssuance:i,className:l="",palletReferenda:c,value:{id:m,info:h,isConvictionVote:p,track:g,trackGraph:b}}=e,[j,v]=(0,x.O)(!1),y=(0,n.useMemo)((()=>je[h.type]||fe),[h]),C=(0,n.useMemo)((()=>i&&g&&b&&function(e,s,t,a,n){if(e&&s&&t.isOngoing){const o=t.asOngoing;if(o.deciding.isSome){const{approval:t,support:r,x:i}=n,{deciding:l,tally:c}=o,{confirming:u,since:m}=l.unwrap(),h=u.unwrapOr(null),p=s?c.support:c.bareAyes,x=[],g=[[[],[],[]],[[],[],[]]],b=e.isZero()?0:p.mul(d.D_).div(e).toNumber()/10,f=c.ayes.isZero()?0:c.ayes.mul(d.D_).div(c.ayes.add(c.nays)).toNumber()/10;let j=-1,v=-1;const y=[];for(let e=0;e<t.length;e++){x.push((0,_.u)(m.add(i[e]))),y.push(i[e]);const s=t[e].div(d.uy).toNumber()/10,a=f<s;g[0][0][e]=s,g[0][a?1:2][e]=f,j=a||-1!==j?j:e;const n=r[e].div(d.uy).toNumber()/10,o=b<n;g[1][0][e]=n,g[1][o?1:2][e]=b,v=o||-1!==v?v:e}const C=i[1].sub(i[0]),w=i.length-1,N=h?.add(a.minEnactmentPeriod);if(N?.gt(m.add(i[w]))){let e=i[w].add(m).add(C);do{x.push((0,_.u)(e)),y.push(e.sub(m)),g[0][1].push(g[0][1][w]),g[0][2].push(g[0][2][w]),g[1][1].push(g[1][1][w]),g[1][2].push(g[1][2][w]),e=e.add(C)}while(e.lt(N))}return[{changeX:j,currentY:f,endConfirm:h,labels:x,points:y,progress:{percent:f,total:o.tally.ayes.add(o.tally.nays),value:o.tally.ayes},since:m,values:g[0]},{changeX:v,currentY:b,endConfirm:h,labels:x,points:y,progress:{percent:b,total:e,value:p},since:m,values:g[1]}]}}return null}(i,p,h,g,b)),[i,h,p,g,b]),w=(0,n.useMemo)((()=>t&&C&&j&&g&&function(e,s,t,a,n,o){const r=t.reduce(((e,{changeX:s})=>-1===e||-1===s?-1:Math.max(e,s)),0);return t.map((({changeX:t,currentY:i,endConfirm:l,labels:c,points:d,progress:u,since:m,values:h},p)=>{const x=c.length,g=0===p?100:50,b=e=>Math.max(0,Math.min(x,x*(e.sub(m).toNumber()/d[d.length-1].toNumber()))),j=-1===t?-1:x*(t/d.length),v=-1!==r&&(0,Z.x)(e,d[r].add(m)),y=l?[l.sub(n.confirmPeriod),l,l.add(n.minEnactmentPeriod)]:v?[v,v.add(n.confirmPeriod),v.add(n.confirmPeriod).add(n.minEnactmentPeriod)]:null,C=function(e,s,t,a){return([{label:n}])=>{try{const o=(0,f.G)(n.replace(/,/g,"")),r=a(o);if(o.gt(s)){const a=o.sub(s),i=new Date(Date.now()+a.mul(t).toNumber()).toLocaleString(),l=(0,H.A)(t,a,e),c=[`#${n}`,e("{{when}} (est.)",{replace:{when:i}}),l[1]];return r&&c.push(r),c}if(r)return[`#${n}`,r]}catch{}return`#${n}`}}(o,e,s,(e=>y&&e.gte(y[0])?e.lte(y[1])?o("Confirmation period"):e.lte(y[2])?o("Enactment period"):"":""));return{colors:ve,labels:c,options:(0,W.Z)({plugins:{annotation:{annotations:(0,W.Z)({past:{backgroundColor:"rgba(140, 140, 140, 0.2)",borderWidth:0,type:"box",xMax:b(e),xMin:0,yMax:g,yMin:0}},y?{conf:{backgroundColor:"rgba(255, 140, 0, 0.1)",borderWidth:0,type:"box",xMax:b(y[1]),xMin:b(y[0]),yMax:g,yMin:0},enac:{backgroundColor:"rgba(0, 0, 140, 0.1)",borderWidth:0,type:"box",xMax:b(y[2]),xMin:b(y[1]),yMax:g,yMin:0}}:{},{fail:{backgroundColor:"rgba(140, 0, 0, 0.02)",borderWidth:0,type:"box",xMax:-1===j?x:j,xMin:0,yMax:i,yMin:0}},-1!==j?{pass:{backgroundColor:"rgba(0, 140, 0, 0.02)",borderWidth:0,type:"box",xMax:x,xMin:j,yMax:i,yMin:0}}:{})},crosshair:{sync:{group:a.toNumber()}},tooltip:{callbacks:{title:C}}}},ye),progress:u,values:h}}))}(t,o,C,m,g,s)),[t,o,C,m,j,s,g]),{confirmEnd:N,enactAt:k,nextAlarm:S,submittedIn:I}=(0,n.useMemo)((()=>function(e,s){let t=null,a=null,n=null,o=null;if(e.isOngoing){const{alarm:r,deciding:i,enactment:l,submitted:c}=e.asOngoing;if(a={at:l.isAt,blocks:l.isAt?l.asAt:l.asAfter,end:null},n=r.unwrapOr([null])[0],o=c,i.isSome){const{confirming:e}=i.unwrap();if(e.isSome&&(t=e.unwrap(),s)){const e=t.add(s.minEnactmentPeriod);a.end=l.isAt?(0,Z.x)(e,l.asAt):e.add(l.asAfter)}}}return{confirmEnd:t,enactAt:a,nextAlarm:n,submittedIn:o}}(h,g)),[h,g]),A=(0,n.useMemo)((()=>[[s("minimum approval"),s("current approval (failing)"),s("current approval (passing)")],[s("minimum support"),s("current support (failing)"),s("current support (passing)")]]),[s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Ce,{className:`${l} isExpanded isFirst ${j?"":"isLast"}`,children:[(0,a.jsx)(r.iA.Column.Id,{value:m}),(0,a.jsx)(y,{...e}),(0,a.jsx)(r.iA.Column.Expand,{isExpanded:j,toggle:v})]}),(0,a.jsxs)(Ce,{className:`${l} ${j?"isExpanded isLast":"isCollapsed"}`,children:[(0,a.jsx)("td",{}),(0,a.jsxs)("td",{className:"columar",colSpan:6,children:[w&&(0,a.jsxs)(r.P0,{children:[(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.kL.Line,{legends:A[0],title:s("approval / {{percent}}%",{replace:{percent:w[0].progress.percent.toFixed(1)}}),...w[0]})}),(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.kL.Line,{legends:A[1],title:s("support / {{percent}}%",{replace:{percent:w[1].progress.percent.toFixed(1)}}),...w[1]})})]}),(0,a.jsxs)(r.P0,{size:"tiny",children:[(0,a.jsxs)(r.P0.Column,{children:[I&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:s("Submitted at")}),"#",(0,_.u)(I)]}),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:s("Next alarm")}),"#",(0,_.u)(S)]})]}),(0,a.jsxs)(r.P0.Column,{children:[k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:k.at?s("Enact at"):s("Enact after")}),k.at&&"#",s("{{blocks}} blocks",{replace:{blocks:(0,_.u)(k.blocks)}})]}),N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:s("Confirm end")}),"#",(0,_.u)(N)]}),k?.end&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:s("Enact end")}),"#",(0,_.u)(k.end)]})]})]}),(0,a.jsx)(r.P0,{is100:!0,size:"tiny",children:(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.NR,{data:m,type:c,withTitle:!0})})})]}),(0,a.jsx)("td",{})]})]})})),Ne=n.memo((function({activeIssuance:e,className:s,isMember:t,members:o,palletReferenda:l,palletVote:c,ranks:d,referenda:m,trackId:h,trackName:p,tracks:g}){const{t:b}=(0,u.$)(),{api:f,specName:v}=(0,i.h)(),[y,C]=(0,x.O)(),w=(0,n.useMemo)((()=>(0,j.K2)(f,v,l,g,h?.toNumber())),[f,v,l,g,h]),[N,k]=(0,n.useMemo)((()=>[!1,y&&w&&(0,a.jsx)("tr",{children:(0,a.jsx)("th",{colSpan:8})})]),[y,C,w]),[S,I]=(0,n.useMemo)((()=>[[[p?(0,a.jsxs)(a.Fragment,{children:[p,(0,a.jsx)("div",{className:"sub",children:w?.text})]}):b("referenda"),"start",8],null],p?`track:${p}`:"untracked"]),[N,b,w,p]);return(0,a.jsx)(r.iA,{className:s,empty:m&&b("No active referenda"),header:S,headerChildren:k,isSplit:!h,children:m&&m.map((s=>(0,a.jsx)(we,{activeIssuance:e,isMember:t,members:o,palletReferenda:l,palletVote:c,ranks:d,trackInfo:w,value:s},s.key)))},I)}));var ke=t(87418),Se=t(6046),Ie=t(74076);const Ae=(0,r.zo)(r.u_)`
  .originSelect, .timeSelect {
    > .ui--Params-Content {
      padding-left: 0;
    }
  }
`,Ee=n.memo((function({className:e="",isMember:s,members:t,palletReferenda:o,tracks:l}){const{t:c}=(0,u.$)(),{api:m,specName:h}=(0,i.h)(),p=(0,$.C)(),[g,b]=(0,x.O)(),[f,v]=(0,n.useState)(null),[C,w]=(0,n.useState)(void 0),[N,k]=(0,n.useState)(null),[{imageHash:S,isImageHashValid:I},A]=(0,n.useState)({imageHash:null,isImageHashValid:!1}),[{imageLen:E,imageLenDefault:M,isImageLenValid:P},T]=(0,n.useState)({imageLen:d.nw,isImageLenValid:!1}),[D,F]=(0,n.useState)(0),[V,R]=(0,n.useState)(d.S8),[q,O]=(0,n.useState)(d.If),[z,B]=(0,n.useState)(),L=(0,Q.CH)(S);(0,n.useEffect)((()=>{p&&B((e=>e||p.add(d.D_)))}),[p]),(0,n.useEffect)((()=>{L?.proposalLength&&T((e=>({imageLen:e.imageLen,imageLenDefault:L.proposalLength,isImageLenValid:e.isImageLenValid})))}),[L]);const H=(0,n.useMemo)((()=>(0,j.K2)(m,h,o,l,C)),[m,o,h,C,l]),_=(0,n.useMemo)((()=>!p||(0===D?V?.lt(d.If):q?.lt(p))),[V,q,p,D]),Z=(0,n.useMemo)((()=>[{name:"origin",type:(0,Se.s)(m.tx[o].submit.meta.args[0].type.toString())}]),[m,o]),W=(0,n.useMemo)((()=>H&&Array.isArray(H.origin)?H.origin.map(((e,s)=>({text:Object.values(e)[0],value:s+1}))):null),[H]),U=(0,n.useMemo)((()=>!H?.origin||Array.isArray(H?.origin)?N:H.origin),[N,H]),J=(0,n.useMemo)((()=>[{text:c("After delay"),value:"after"},{text:c("At block"),value:"at"}]),[c]),G=(0,n.useCallback)((e=>k(H&&Array.isArray(H.origin)?H.origin[e-1]:null)),[H]),K=(0,n.useCallback)((([{isValid:e,value:s}])=>k(e?s:null)),[]),X=(0,n.useCallback)((e=>A({imageHash:e,isImageHashValid:(0,Ie.vq)(e,256)})),[]),ee=(0,n.useCallback)((e=>{e&&T((s=>({imageLen:e,imageLenDefault:s.imageLenDefault,isImageLenValid:!e.isZero()})))}),[]);return(0,a.jsxs)(a.Fragment,{children:[g&&(0,a.jsxs)(Ae,{className:e,header:c("Submit proposal"),onClose:b,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:c("The proposal will be registered from this account and the balance lock will be applied here."),children:(0,a.jsx)(r.rp,{filter:t,label:c("propose from account"),labelExtra:(0,a.jsx)(Y.Z,{label:(0,a.jsx)("span",{className:"label",children:c("transferrable")}),params:f}),onChange:v,type:"account"})}),(0,a.jsxs)(r.u_.Columns,{hint:c("The origin (and by extension track) that you wish to submit for, each has a different period, different root and acceptance criteria."),children:[(0,a.jsx)(y,{onChange:w,palletReferenda:o,tracks:l}),!H?.origin&&(0,a.jsx)(ke.Z,{className:"originSelect",onChange:K,params:Z}),W&&(0,a.jsx)(r.Lt,{defaultValue:W[0].value,label:c("track origin"),onChange:G,options:W})]}),(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:c("The hash of the preimage for the proposal as previously submitted or intended.")}),(0,a.jsx)("p",{children:c("The length value witll be auto-populated from the on-chain value if is is found.")})]}),children:[(0,a.jsx)(r.II,{autoFocus:!0,isError:!I,label:c("preimage hash"),onChange:X,value:S||""}),(0,a.jsx)(r.Rn,{defaultValue:M,isDisabled:!!L?.proposalLength&&!L?.proposalLength.isZero()&&I&&P,isError:!P,label:c("preimage length"),onChange:ee,value:E},"inputLength")]}),(0,a.jsx)(r.u_.Columns,{align:"center",hint:c("The moment of enactment, either at a specific block, or after a specific number of blocks."),children:(0,a.jsx)(r.tX,{onChange:F,options:J,value:D})}),0===D?(0,a.jsx)(r.u_.Columns,{hint:c("The number of blocks to delay enactment after proposal approval."),children:(0,a.jsx)(r.Rn,{defaultValue:d.S8,isError:_,label:c("after number of blocks"),onChange:R,value:V})}):(0,a.jsx)(r.u_.Columns,{hint:c("A specific block to enact the proposal at."),children:(0,a.jsx)(r.Rn,{defaultValue:z,isError:_,label:c("at specific block"),onChange:O,value:q})}),(0,a.jsx)(r.u_.Columns,{hint:c("The deposit for this proposal will be locked for the referendum duration."),children:(0,a.jsx)(r.H,{defaultValue:m.consts[o].submissionDeposit,isDisabled:!0,label:c("submission deposit")})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:f,icon:"plus",isDisabled:!U||!I||!P||!f||_||!L?.proposalHash,label:c("Submit proposal"),onStart:b,params:[U,{Lookup:L?{hash:L.proposalHash,len:E}:{hash:S,len:E}},0===D?{After:V}:{At:q}],tx:m.tx[o].submit})})]}),(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!s,label:c("Submit proposal"),onClick:b})]})})),Me=n.memo((function({className:e,issuanceActive:s,issuanceInactive:t,issuanceTotal:n,summary:{refActive:o,refCount:l},withIssuance:c}){const{t:d}=(0,u.$)(),{api:m}=(0,i.h)();return(0,a.jsxs)(r.Ty,{className:e,children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:d("active"),children:void 0===o?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,_.u)(o)}),(0,a.jsx)(r.Jy,{label:d("total"),children:void 0===l?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,_.u)(l)})]}),c&&(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:d("total issuance"),children:(0,a.jsx)(ce.Z,{className:n?"":"--tmp",value:n||1,withSi:!0})}),(0,b.m)(m.query.balances.inactiveIssuance)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Jy,{className:"media--1000",label:d("inactive issuance"),children:(0,a.jsx)(ce.Z,{className:t?"":"--tmp",value:t||1,withSi:!0})}),(0,a.jsx)(r.Jy,{className:"media--800",label:d("active issuance"),children:(0,a.jsx)(ce.Z,{className:s?"":"--tmp",value:s||1,withSi:!0})})]})]})]})})),Pe=r.zo.div`
  .ui--Dropdown.topDropdown {
    min-width: 25rem;
    padding-left: 0;

    > label {
      left: 1.55rem !important;
    }
  }
`,Te=n.memo((function({className:e,isConvictionVote:s,members:t,palletReferenda:h,palletVote:x,ranks:g}){const{t:b}=(0,u.$)(),{api:f}=(0,i.h)(),j=(0,l.W7)(f.query.balances.totalIssuance),v=(0,l.W7)(f.query.balances.inactiveIssuance),{allAccounts:y}=(0,c.x)(),[C,w]=(0,m.Z)(h),N=p(h,C),[k,S]=(0,n.useState)(-1),I=(0,n.useMemo)((()=>j&&j.sub(v||d.nw)),[v,j]),A=(0,n.useMemo)((()=>[{text:b("All active/available tracks"),value:-1}].concat(C.map((({trackId:e,trackName:s})=>({text:s,value:e?e.toNumber():-1}))).filter((e=>!!e.text)))),[C,b]),E=(0,n.useMemo)((()=>(-1===k?C:C.filter((({trackId:e})=>!!e&&e.eqn(k))))||[{referenda:[]}]),[C,k]),M=(0,n.useMemo)((()=>!t||y.some((e=>t.includes(e)))),[y,t]);return(0,a.jsxs)(Pe,{className:e,children:[(0,a.jsx)(Me,{issuanceActive:I,issuanceInactive:v,issuanceTotal:j,summary:N,withIssuance:s}),(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(r.Lt,{className:"topDropdown media--800",label:b("selected track"),onChange:S,options:A,value:k}),s&&(0,a.jsx)(B,{palletReferenda:h,palletVote:x,tracks:w}),(0,a.jsx)(o.Z,{}),(0,a.jsx)(Ee,{isMember:M,members:t,palletReferenda:h,tracks:w})]}),E.map((({key:e,referenda:s,trackId:n,trackName:o})=>(0,a.jsx)(Ne,{activeIssuance:I,isMember:M,members:t,palletReferenda:h,palletVote:x,ranks:g,referenda:s,trackId:n,trackName:o,tracks:w},e)))]})}))},89139:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(52322),n=t(2784),o=t(24732),r=t(99501),i=t(54062);const l=n.memo((function({basePath:e,className:s}){const{t}=(0,i.$)(),l=(0,n.useRef)([{isRoot:!0,name:"overview",text:t("Overview")}]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(o.mQ,{basePath:e,items:l.current}),(0,a.jsx)(r.Z,{isConvictionVote:!0,palletReferenda:"referenda",palletVote:"convictionVoting"})]})}))},54062:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-referenda")}},1398:(e,s,t)=>{t.d(s,{E:()=>r,Z:()=>i});var a=t(2784),n=t(11677),o=t(80973);function r(e){const[s]=(0,o.Z)(e);return(0,a.useMemo)((()=>s?s.reduce(((e,{referenda:s})=>e+(s?s.filter((({info:e})=>e.isOngoing)).length:0)),0):0),[s])}const i=(0,n.e)("useCounter",(function(){return r("referenda")}))},80973:(e,s,t)=>{t.d(s,{Z:()=>f});var a=t(2784),n=t(90778),o=t(9118),r=t(11677),i=t(12298),l=t(39824);const c={transform:e=>e.map((({args:[e]})=>e))};function d(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:a}})=>{"Submitted"===a?s.push(e):t.push(e)})),{added:s,removed:t}}const u=(0,r.e)("useReferendaIds",(function(e){const{api:s}=(0,n.h)(),t=(0,i.k)(s.query[e].referendumInfoFor,[],c);return(0,l.N)([s.events[e].Submitted],d,t)}));var m=t(57387);const h=(0,r.e)("useTracks",(function(e){const{api:s}=(0,n.h)();return(0,a.useMemo)((()=>s.consts[e].tracks.map((([e,s])=>({graph:(0,m.nb)(s),id:e,info:s})))),[s,e])}));function p(e,s){return(e.info.isOngoing===s.info.isOngoing?e.info.isOngoing?function(e,s){const t=e.info.asOngoing,a=s.info.asOngoing;return t.track.cmp(a.track)||(t.deciding.isSome===a.deciding.isSome?t.deciding.isSome?e.info.asOngoing.deciding.unwrap().since.cmp(s.info.asOngoing.deciding.unwrap().since):0:t.deciding.isSome?-1:1)}(e,s):0:e.info.isOngoing?-1:1)||s.id.cmp(e.id)}function x(e,s){return e.trackId&&s.trackId?e.trackId.cmp(s.trackId):e.trackId?-1:1}const g={transform:([[e],s])=>s.map(((s,t)=>s.isSome?[e[t],s.unwrap()]:null)).filter((e=>!!e)).map((([e,s])=>({id:e,info:s,isConvictionVote:(0,m.pq)(s),key:e.toString()}))),withParamsTransform:!0};function b(e,s,t){if(!t||!s)return[{key:"empty"}];if(!e)return[{key:"referenda",referenda:t.sort(p)}];const a=[],n={key:"referenda",referenda:[]};for(let o=0;o<t.length;o++){const r=t[o],i=r.info.isOngoing?e.find((({id:e})=>e.eq(r.info.asOngoing.track))):void 0;if(i){if(r.trackGraph=i.graph,r.trackId=i.id,r.track=i.info,r.isConvictionVote&&r.info.isOngoing){const{deciding:e,tally:t}=r.info.asOngoing;if(e.isSome){const{since:a}=e.unwrap();r.decidingEnd=(0,m.z9)(s,t,i.info,a)}}const e=a.find((({track:e})=>r.track===e));e?e.referenda.push(r):a.push({key:`track:${r.trackId.toString()}`,referenda:[r],track:r.track,trackGraph:r.trackGraph,trackId:r.trackId,trackName:(0,m.tp)(r.trackId,r.track)})}else n.referenda.push(r)}(n.referenda&&0!==n.referenda.length||!a.length)&&a.push(n);for(let e=0;e<a.length;e++)a[e].referenda.sort(p);return a.sort(x)}const f=(0,r.e)("useReferenda",(function(e){const{api:s,isApiReady:t}=(0,n.h)(),r=(0,o.W7)(t&&s.query.balances.totalIssuance),i=u(e),l=h(e),c=(0,o.W7)(t&&i&&0!==i.length&&s.query[e].referendumInfoFor.multi,[i],g);return(0,a.useMemo)((()=>[i&&0===i.length?[{key:"referenda",referenda:[]}]:b(l,r,c),l]),[i,c,r,l])}))},57387:(e,s,t)=>{t.d(s,{K2:()=>h,nb:()=>j,pq:()=>x,tp:()=>m,z9:()=>f});var a=t(80041),n=t(14681),o=t(69543),r=t(33403),i=t(95292),l=t(52107),c=t(48801),d=t.n(c);const u=500;function m(e,{name:s}){return`${(0,n.u)(e)} / ${s.replace(/_/g," ").split(" ").map(o.KT).join(" ")}`}function h(e,s,t,n,o){let i;if(n&&void 0!==o&&-1!==o){const l=(0,a.Z)(e,s,t),c=n.find((({id:e})=>e.eqn(o)));if(c&&l){const e=c.info.name.toString(),s=l.find((({id:s,name:t})=>s===o&&t===e));s&&(i=(0,r.Z)({track:c,trackName:m(c.id,c.info)},s))}}return i}function p(e){return!!e.support&&!e.bareAyes}function x(e){return e.isOngoing&&p(e.asOngoing.tally)}function g(e,s,t){if(t.isZero())return i.ed;const a=s.mul(i.ed).div(t);if(e.isLinearDecreasing){const{ceil:s,floor:t,length:n}=e.asLinearDecreasing;return s.sub((0,l.N)(a,n).mul(s.sub(t)).div(n))}if(e.isSteppedDecreasing){const{begin:s,end:t,period:n,step:o}=e.asSteppedDecreasing;return(0,l.x)(t,s.sub((0,l.N)(s,o.mul(a).div(n))))}if(e.asReciprocal){const{factor:s,xOffset:t,yOffset:n}=e.asReciprocal,o=a.add(t);return o.isZero()?i.ed:(0,l.N)(i.ed,s.mul(i.ed).div(o).add(n))}throw new Error(`Unknown curve found ${e.type}`)}function b(e,s,t){try{if(t.isZero())return i.ed;const a=s.mul(i.ed).div(t);if(e.isLinearDecreasing){const{ceil:s,floor:t,length:n}=e.asLinearDecreasing;return a.lt(t)?i.ed:a.gt(s)?i.nw:(0,l.N)(i.ed,(0,l.x)(i.nw,s.sub(a).mul(n).div(s.sub(t))))}if(e.isSteppedDecreasing){const{begin:s,end:t,period:n,step:o}=e.asSteppedDecreasing;return a.lt(t)?i.ed:(0,l.N)(i.ed,(0,l.x)(i.nw,n.mul(s.sub((0,l.N)(a,s)).add(o.isZero()?o:o.sub(i.If))).div(o)))}if(e.asReciprocal){const{factor:s,xOffset:t,yOffset:n}=e.asReciprocal,o=a.sub(n);return o.isZero()?i.ed:(0,l.N)(i.ed,(0,l.x)(i.nw,s.mul(i.ed).div(o).sub(t)))}}catch(s){throw console.error(`Failed on curve ${e.type}:`,e.inner.toHuman()),s}throw new Error(`Unknown curve found ${e.type}`)}function f(e,s,{decisionPeriod:t,minApproval:a,minSupport:n},o){const r=p(s)?s.support:s.bareAyes;return o.add(t.mul((0,l.x)(b(a,s.ayes,s.ayes.add(s.nays)),b(n,r,e))).div(i.ed))}function j({decisionPeriod:e,minApproval:s,minSupport:t}){const a=new Array(u),n=new Array(u),o=new Array(u),r=e.divn(u);let i=new(d())(0);for(let l=0;l<499;l++)a[l]=g(s,i,e),n[l]=g(t,i,e),o[l]=i,i=i.add(r);return a[499]=g(s,e,e),n[499]=g(t,e,e),o[499]=e,{approval:a,support:n,x:o}}},6583:(e,s,t)=>{t.d(s,{Z:()=>y});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(86135),l=t(83488),c=t(1346);const d=r.zo.section`
  .ui--Output > label {
    text-transform: none;
  }
`,u=n.memo((function({queue:e=[]}){const s=e.filter((({error:e,result:s})=>!(0,c.o)(e)||!(0,c.o)(s))).reverse();return s.length?(0,a.jsx)(d,{className:"rpc--Results",children:s.map((({error:e,id:s,result:t,rpc:{method:n,section:o,type:i}})=>(0,a.jsx)(r.r_,{isError:!!e,label:`${s}: ${o}.${n}: ${i}`,value:e?e.message:(0,a.jsx)("pre",{children:(0,l.Z)("",t)})},s)))}):null}));var m=t(87418),h=t(6046),p=t(13529),x=t(17751),g=t(61349);function b(){return(0,g.$G)("app-rpc")}const f=p.Z.author.submitExtrinsic,j=n.memo((function({queueRpc:e}){const{t:s}=b(),[{isValid:t,rpc:o,values:i},l]=(0,n.useState)({isValid:!1,rpc:f,values:[]}),c=(0,n.useMemo)((()=>o.params.map((({isOptional:e,name:s,type:t})=>({name:s,type:(0,h.s)(e?`Option<${t}>`:t)})))),[o]),d=(0,n.useCallback)((e=>l((s=>{const{rpc:t=s.rpc,values:a=s.values}=e,n=t.params.reduce(((e,{isOptional:s})=>e+(s?0:1)),0);return{isValid:a.reduce(((e,s)=>e&&!0===s.isValid),n<=a.length),rpc:t,values:a}}))),[]),u=(0,n.useCallback)((e=>d({rpc:e,values:[]})),[d]),p=(0,n.useCallback)((e=>d({values:e})),[d]),g=(0,n.useCallback)((()=>e({rpc:o,values:i.filter((({value:e})=>!(0,x.F)(e))).map((({value:e})=>e))})),[e,o,i]);return(0,a.jsxs)("section",{className:"rpc--Selection",children:[(0,a.jsx)(r.iQ,{defaultValue:f,label:s("call the selected endpoint"),onChange:u}),(0,a.jsx)(m.Z,{onChange:p,params:c},`${o.section}.${o.method}:params`),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"sign-in-alt",isDisabled:!t,label:s("Submit RPC call"),onClick:g})})]})})),v=n.memo((function(){const{queueRpc:e,txqueue:s}=(0,i.L)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{queueRpc:e}),(0,a.jsx)(u,{queue:s})]})})),y=n.memo((function({basePath:e}){const{t:s}=b(),t=(0,n.useRef)([{isRoot:!0,name:"rpc",text:s("Submission")}]);return(0,a.jsxs)("main",{className:"rpc--App",children:[(0,a.jsx)(r.mQ,{basePath:e,items:t.current}),(0,a.jsx)(o.rs,{children:(0,a.jsx)(o.AW,{children:(0,a.jsx)(v,{})})})]})}))},39117:(e,s,t)=>{t.d(s,{Z:()=>b});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(83488);const c=n.memo((function({results:e}){return e.length?(0,a.jsx)("section",{className:"runtime--Results",children:e.map((({def:{method:e,section:s,type:t},error:n,id:o,result:i})=>(0,a.jsx)(r.r_,{isError:!!n,label:`${o}: ${s}.${e}: ${t}`,value:n?n.message:(0,a.jsx)("pre",{children:(0,l.Z)("",i)})},o)))}):null}));var d=t(87418),u=t(6046),m=t(61349);function h(){return(0,m.$G)("app-runtime")}const p=n.memo((function({onSubmit:e}){const{t:s}=h(),[{isValid:t,method:o,values:i},l]=(0,n.useState)({isValid:!1,method:null,values:[]}),c=(0,n.useMemo)((()=>o?o.params.map((({name:e,type:s})=>({name:e,type:(0,u.s)(s)}))):[]),[o]),m=(0,n.useCallback)((e=>l((s=>{const{method:t=s.method,values:a=s.values}=e;return{isValid:a.reduce(((e,s)=>e&&!0===s.isValid),!!t&&t.params.length<=a.length),method:t,values:a}}))),[]),p=(0,n.useCallback)((e=>m({method:e,values:[]})),[m]),x=(0,n.useCallback)((e=>m({values:e})),[m]),g=(0,n.useCallback)((()=>{o&&e(o,i)}),[e,o,i]);return(0,a.jsxs)("section",{className:"runtime--Selection",children:[(0,a.jsx)(r.$q,{label:s("call the selected endpoint"),onChange:p}),o&&(0,a.jsx)(d.Z,{onChange:x,params:c},`${o.section}.${o.method}:params`),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"sign-in-alt",isDisabled:!t||!o,label:s("Submit Runtime call"),onClick:g})})]})}));let x=0;const g=n.memo((function(){const{api:e}=(0,i.h)(),[s,t]=(0,n.useState)([]),o=(0,n.useCallback)((e=>t((s=>[e].concat(...s)))),[]),r=(0,n.useCallback)(((s,t)=>{e.call[s.section][s.method](...t.map((({value:e})=>e))).then((e=>o({def:s,id:++x,result:e}))).catch((e=>{o({def:s,error:e,id:++x}),console.error(e)}))}),[e,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p,{onSubmit:r}),(0,a.jsx)(c,{results:s})]})})),b=n.memo((function({basePath:e}){const{t:s}=h(),t=(0,n.useRef)([{isRoot:!0,name:"runtime",text:s("Calls")}]);return(0,a.jsxs)("main",{className:"runtime--App",children:[(0,a.jsx)(r.mQ,{basePath:e,items:t.current}),(0,a.jsx)(o.rs,{children:(0,a.jsx)(o.AW,{children:(0,a.jsx)(g,{})})})]})}))},14673:(e,s,t)=>{t.d(s,{Z:()=>C});var a=t(52322),n=t(2784),o=t(24732),r=t(90778),i=t(54383),l=t(9118),c=t(71679),d=t(92914),u=t(65874),m=t(14681);const h=n.memo((function({value:{at:e,image:s,imageHash:t,index:n}}){const r=(0,i.C)();return(0,a.jsxs)("tr",{children:[(0,a.jsx)(o.iA.Column.Id,{value:n}),(0,a.jsx)(d.Z,{imageHash:t,proposal:s?.proposal}),(0,a.jsx)("td",{className:"number together",children:r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{value:e.sub(r)}),"#",(0,m.u)(e)]})}),(0,a.jsx)("td",{className:"button",children:!s?.proposal&&(0,a.jsx)(c.Z,{imageHash:t,isImminent:!0})}),(0,a.jsx)("td",{className:"links media--1000",children:(0,a.jsx)(o.NR,{data:n,type:"democracyReferendum"})})]})}));var p=t(61349);function x(){return(0,p.$G)("app-scheduler")}const g=n.memo((function({className:e}){const{t:s}=x(),{api:t}=(0,r.h)(),c=(0,i.C)(),d=(0,l.W7)(t.derive.democracy.dispatchQueue),u=(0,n.useMemo)((()=>c&&d&&d.filter((({at:e})=>e.gte(c))).sort(((e,s)=>e.at.cmp(s.at)))),[c,d]),m=(0,n.useRef)([[s("dispatch queue"),"start",2],[s("enact")],[],[void 0,"media--1000"]]);return(0,a.jsx)(o.iA,{className:e,empty:u&&s("Nothing queued for execution"),header:m.current,children:u?.map((e=>(0,a.jsx)(h,{value:e},e.index.toString())))})}));var b=t(74525),f=t(31313);const j=n.memo((function({bestNumber:e,className:s="",value:{blockNumber:t,call:n,maybeId:r,maybePeriodic:i,preimageHash:l}}){const c=(0,f.CH)(l),d=i.unwrapOr(null),h=r.unwrapOr(null);return(0,a.jsxs)("tr",{className:s,children:[(0,a.jsx)("td",{className:"all",children:(0,a.jsx)(o.Uv,{value:n||c?.proposal})}),h?h.isAscii?(0,a.jsx)("td",{className:"start",children:h.toUtf8()}):(0,a.jsx)(b.Z,{value:h.toHex()}):(0,a.jsx)("td",{}),(0,a.jsx)("td",{className:"number together",children:e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{value:t.sub(e)}),"#",(0,m.u)(t)]})}),(0,a.jsx)("td",{className:"number together",children:d&&(0,m.u)(d[0])}),(0,a.jsx)("td",{className:"number together",children:d&&(0,m.u)(d[1])})]})})),v={transform:(e,s)=>e.filter((([,e])=>e.some((e=>e.isSome)))).reduce(((e,[t,a])=>{const n=t.args[0];return a.filter((e=>e.isSome)).map((e=>e.unwrap())).reduce(((e,{call:t,maybeId:a,maybePeriodic:o,priority:r},i)=>{let l,c=null;if(t.inner)if(t.isValue)c=t.asValue;else if(t.isInline)try{c=s.registry.createType("Call",t.asInline.toHex())}catch(e){console.error(e)}else t.isLookup&&(l=t);else c=t;return e.push({blockNumber:n,call:c,key:`${n.toString()}-${i}`,maybeId:a,maybePeriodic:o,preimageHash:l,priority:r}),e}),e)}),[])},y=n.memo((function({className:e=""}){const{t:s}=x(),{api:t}=(0,r.h)(),c=(0,i.C)(),d=(0,l.W7)(t.query.scheduler.agenda.entries,void 0,v),u=(0,n.useMemo)((()=>c&&d&&d.filter((({blockNumber:e})=>e.gte(c))).sort(((e,s)=>e.blockNumber.cmp(s.blockNumber)))),[c,d]),m=(0,n.useRef)([[s("scheduled"),"start"],[s("id"),"start"],[s("remaining")],[s("period")],[s("count")]]);return(0,a.jsx)(o.iA,{className:e,empty:u&&s("No active schedules"),header:m.current,children:u?.map((e=>(0,a.jsx)(j,{bestNumber:c,value:e},e.key)))})})),C=n.memo((function({basePath:e,className:s}){const{t}=x(),{api:i}=(0,r.h)(),l=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")}]),[t]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(o.mQ,{basePath:e,items:l}),i.query.democracy&&(0,a.jsx)(g,{}),i.query.scheduler&&(0,a.jsx)(y,{})]})}))},19433:(e,s,t)=>{t.d(s,{Z:()=>de});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(61349),c=t(23729),d=t.n(c),u=t(81369),m=t(56623),h=t(43357),p=t(64021);function x(){return(0,l.$G)("app-settings")}const g="{\n\n}",b={},f=r.zo.div`
  .editor {
    height: 21rem;
    margin-left: 2rem;
    position: relative;
  }

  .help {
    padding: 0.5rem 2rem;
  }
`,j=n.memo((function({className:e="",onStatusChange:s}){const{t}=x(),{api:o}=(0,i.h)(),[c,j]=(0,n.useState)(g),[v,y]=(0,n.useState)(!0),[C,w]=(0,n.useState)(!0),[N,k]=(0,n.useState)(b),[S,I]=(0,n.useState)(null),[A,E]=(0,n.useState)(null);(0,n.useEffect)((()=>{const e=(0,u.decodeUrlTypes)()||d().get("types")||{};Object.keys(e).length&&(j(JSON.stringify(e,null,2)),k({}),I(Object.keys(e).join(", ")),E((0,u.encodeUrlTypes)(e)))}),[]);const M=(0,n.useCallback)((({code:e,isJsonValid:s,isTypesValid:t,types:a,typesPlaceholder:n})=>{j(e),y(s),w(t),k(a),I(n)}),[]),P=(0,n.useCallback)((()=>{d().remove("types"),M({code:g,isJsonValid:!0,isTypesValid:!0,types:b,typesPlaceholder:null})}),[M]),T=(0,n.useCallback)((e=>{const s=(0,m.z)(e);try{const e=JSON.parse(s),t=Object.keys(e).join(", ");console.log("Detected types:",t),M({code:s,isJsonValid:!0,isTypesValid:!0,types:0===Object.keys(e).length?{}:e,typesPlaceholder:t})}catch(e){console.error("Error registering types:",e),M({code:s,isJsonValid:!1,isTypesValid:!1,types:{},typesPlaceholder:e.message})}}),[M]),D=(0,n.useCallback)((e=>{try{if(!(0,h.b)(e))throw Error("This is not a valid JSON object.");T((0,p.d)(e))}catch(s){j(e),y(!1),I(s.message)}}),[T]),F=(0,n.useCallback)((()=>{let e=null;try{o.registerTypes(N),d().set("types",N),w(!0),s({action:t("Your custom types have been added"),status:"success"}),Object.keys(N).length&&(e=(0,u.encodeUrlTypes)(N),console.log(e))}catch(e){console.error(e),w(!1),s({action:t(`Error saving your custom types. ${e.message}`),status:"error"})}E(e)}),[o,s,t,N]),V=0===Object.keys(N).length;return(0,a.jsxs)(f,{className:e,children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)("div",{className:"full",children:(0,a.jsx)(r.ht,{clearContent:V&&C,isError:!C,label:t("Additional types as a JSON file (or edit below)"),onChange:T,placeholder:S})})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)("div",{className:"full",children:(0,a.jsx)(r.ML,{className:"editor",code:c,isValid:v,onEdit:D})})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)("div",{className:"full",children:(0,a.jsx)(l.cC,{i18nKey:"devConfig",children:(0,a.jsxs)("div",{className:"help",children:["If you are a development team with at least a test network available, consider adding the types directly ",(0,a.jsx)("a",{href:"https://github.com/polkadot-js/apps/tree/master/packages/apps-config",rel:"noopener noreferrer",target:"_blank",children:"to the apps-config"}),", allowing out of the box operation for your spec & chains, both for you and anybody trying to connect to it. This is not a replacement for your chain-specific UI, however doing so does help in allowing users to easily discover and use with zero-config."]})})})}),(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(r.qi,{label:t("Share"),type:t("url"),value:A}),(0,a.jsx)(r.zx,{icon:"sync",label:t("Reset"),onClick:P}),(0,a.jsx)(r.zx,{icon:"save",isDisabled:!C||!v,label:t("Save"),onClick:F})]})]})}));var v=t(9242),y=t(37417),C=t(72570),w=t(83337),N=t(45479),k=t(16039),S=t(35189);const I=k.X.availableLedgerConn,A=n.memo((function({className:e=""}){const{t:s}=x(),{chainSS58:t,isApiReady:o,isElectron:l}=(0,i.h)(),{isIpfs:c}=(0,w.g)(),{hasLedgerChain:d,hasWebUsb:u}=(0,N.c)(),[m,h]=(0,n.useState)(null),[p,g]=(0,n.useState)((()=>{const e=k.X.get();return{...e,uiTheme:"dark"===e.uiTheme?"dark":"light"}})),b=(0,n.useMemo)((()=>I.filter((({value:e})=>!l||"webusb"!==e))),[l]),f=(0,n.useMemo)((()=>k.X.availableIcons.map((e=>(0,S.tI)(e,["default"]))).concat((0,S.tI)({info:"robohash",text:"RoboHash",value:"robohash"}))),[]),j=(0,n.useMemo)((()=>{const e=C.FA.find((({prefix:e})=>e===t));return(0,v.M)(s).map((s=>(0,S.SX)(s,["default"],"empty",-1===s.value?o?e?` (${e.displayName}, ${t||0})`:` (${t||0})`:void 0:` (${s.value})`)))}),[t,o,s]),A=(0,n.useMemo)((()=>[{text:s("Allow local in-browser account storage"),value:"on"},{text:s("Do not allow local in-browser account storage"),value:"off"}]),[s]),E=(0,n.useMemo)((()=>[{text:s("Light theme"),value:"light"},{text:s("Dark theme"),value:"dark"}]),[s]),M=(0,n.useMemo)((()=>(0,y.L)(s)),[s]);(0,n.useEffect)((()=>{const e=k.X.get(),s=Object.entries(p).some((([s,t])=>e[s]!==t)),t=e.apiUrl!==p.apiUrl||e.prefix!==p.prefix;h(s?t:null)}),[p]);const P=(0,n.useCallback)((e=>s=>g((t=>({...t,[e]:s})))),[]),T=(0,n.useCallback)((()=>(0,S.wg)(p)),[p]),D=(0,n.useCallback)((()=>{(0,S.a1)(p),h(null)}),[p]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)("h1",{children:s("UI options")}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Lt,{defaultValue:p.icon,label:s("default icon theme"),onChange:P("icon"),options:f})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Lt,{defaultValue:p.uiTheme,label:s("default interface theme"),onChange:P("uiTheme"),options:E})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Lt,{defaultValue:p.i18nLang,label:s("default interface language"),onChange:P("i18nLang"),options:M})}),(0,a.jsx)("h1",{children:s("account options")}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Lt,{defaultValue:p.prefix,label:s("address prefix"),onChange:P("prefix"),options:j})}),!c&&!l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Lt,{defaultValue:p.storage,label:s("in-browser account creation"),onChange:P("storage"),options:A})}),"on"===p.storage&&(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Pd,{content:s("It is recommended that you store all keys externally to the in-page browser local storage, either on browser extensions, signers operating via QR codes or hardware devices. This option is provided for advanced users with strong backup policies.")})})]}),d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Lt,{defaultValue:u?p.ledgerConn:b[0].value,isDisabled:!u,label:s("manage hardware connections"),onChange:P("ledgerConn"),options:b})}),u?"none"!==p.ledgerConn?(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Pd,{content:s("Ledger support is still experimental and some issues may remain. Trust, but verify the addresses on your devices before transferring large amounts. There are some features that will not work, including batch calls (used extensively in staking and democracy) as well as any identity operations.")})}):null:(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Pd,{content:s("Ledger hardware device support is only available on Chromium-based browsers where WebUSB and WebHID support is available in the browser.")})})]}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"save",isDisabled:null===m,label:s(m?"Save & Reload":"Save"),onClick:m?T:D})})]})}));var E=t(46782),M=t.n(E),P=t(94953),T=t(54926),D=t(38894);const F=r.zo.div`
  .label {
    font-style: italic;
    margin-top: 0.5rem;

    +div {
      margin-left: 1rem;
    }
  }
`,V=n.memo((function({className:e="",onChange:s,original:t,tkey:o,tval:i}){const l=(0,n.useCallback)((e=>s(o,e)),[s,o]);return(0,a.jsxs)(F,{className:e,children:[(0,a.jsx)("div",{className:"label",children:t}),(0,a.jsx)(r.II,{onChange:l,value:i,withLabel:!1})]})})),R=new Map;async function q(e){if(R.has(e))return R.get(e);const s=await fetch(`locales/${e}`).then((e=>e.json())).catch((e=>console.error(e)));return R.set(e,s),s||{}}function O(e,s){const t={};let a=0,n=0;return Object.keys(e).forEach((o=>{const r=e[o],i=Object.keys(r).length;let l=0;Object.keys(r).forEach((e=>{s[e]&&l++})),a+=l,n+=i,t[o]=[l,i,0]})),[[a,n,0],t]}function z([e,s,t]=[0,0,0]){return{done:e,progress:(s?100*e/s:100).toFixed(2),total:s}}const B=r.zo.main`
  .ui--Column {
    display: flex;

    > div:first-child {
      flex: 1;
      text-align: right;
    }
  }

  .ui--Progress {
    margin: 0 0 0 0.25rem;
  }

  .toggleWrapper {
    display: flex;
    justify-content: flex-end;
    margin-top: 0.75rem;
  }
`,$=n.memo((function({className:e}){const{t:s}=x(),[t,o]=(0,D.O)(),[{english:i,keys:l,modules:c},d]=(0,n.useState)({english:{},keys:[],modules:[]}),[u,m]=(0,n.useState)("zh"),[[h,p],g]=(0,n.useState)([[0,0,0],{}]),[b,f]=(0,n.useState)("app-accounts.json"),[j,v]=(0,n.useState)(null);(0,n.useEffect)((()=>{(async function(){const e=(await q("index.json")).filter((e=>"en"!==e)),s=e.filter((e=>!T.Z[e])),t=await async function(){const e=await q("en/index.json");return(await Promise.all(e.map((e=>q(`en/${e}`))))).reduce(((s,t,a)=>(s[e[a]]=t,s)),{})}(),a=s.length?await Promise.all(s.map((e=>q(`${e}/translation.json`)))):[];return s.forEach(((e,s)=>{T.Z[e]=a[s]})),e.forEach((e=>{Object.keys(t).forEach((s=>{Object.keys(t[s]).forEach((s=>{T.Z[e][s]||(T.Z[e][s]="")}))}))})),{english:t,keys:e.map((e=>({text:e,value:e}))),modules:Object.keys(t).map((e=>({text:e.replace(".json","").replace("app-","page-"),value:e}))).sort(((e,s)=>e.text.localeCompare(s.text)))}})().then(d).catch(console.error)}),[]),(0,n.useEffect)((()=>{v(T.Z[u]),g(O(i,T.Z[u]))}),[i,u]),(0,n.useEffect)((()=>{m(l.some((({value:e})=>e===k.X.i18nLang))?k.X.i18nLang:"zh")}),[l]);const y=(0,n.useCallback)(((e,s)=>{v((t=>t?{...t,[e]:s}:null));const t=!!T.Z[u][e],a=s.trim();if(T.Z[u][e]=s,t!==!!a){const[e,s]=O(i,T.Z[u]);g((([t])=>(e[2]=Math.max(0,e[0]-t[0]),[e,s])))}}),[i,u]),C=(0,n.useCallback)((()=>{P.Z.reloadResources().catch(console.error)}),[]),w=(0,n.useCallback)((()=>function(e,s){const t=Object.keys(e).sort().reduce(((t,a)=>{const n=e[a].trim();return(n||s)&&(t[a]=n),t}),{});M().saveAs(new Blob([JSON.stringify(t,null,2)],{type:"application/json; charset=utf-8"}),"translation.json")}(j||{},t)),[j,t]);return l.length?(0,a.jsxs)(B,{className:e,children:[(0,a.jsx)("header",{children:(0,a.jsxs)(r.P0,{children:[(0,a.jsxs)(r.P0.Column,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.Lt,{isFull:!0,label:s("the language to display translations for"),onChange:m,options:l,value:u}),s("{{done}}/{{total}}, {{progress}}% done",{replace:z(h)})]}),(0,a.jsx)(r.Ex,{total:h[1],value:h[0]})]}),(0,a.jsxs)(r.P0.Column,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.Lt,{isFull:!0,label:s("the module to display strings for"),onChange:f,options:c,value:b}),s("{{done}}/{{total}}, {{progress}}% done",{replace:z(p[b])})]}),(0,a.jsx)(r.Ex,{total:p[b]?.[1],value:p[b]?.[0]})]})]})}),(0,a.jsx)("div",{className:"toggleWrapper",children:(0,a.jsx)(r.ZD,{label:s(t?"include all empty strings in the generated file":"do not include empty strings in the generated file"),onChange:o,value:t})}),(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(r.zx,{icon:"sync",label:s("Apply to UI"),onClick:C}),(0,a.jsx)(r.zx,{icon:"download",label:s("Generate {{lng}}/translation.json",{replace:{lng:u}}),onClick:w})]}),b&&j&&Object.keys(i[b]).map(((e,s)=>(0,a.jsx)(V,{onChange:y,original:i[b][e],tkey:e,tval:j[e]},s)))]}):(0,a.jsx)(r.$j,{})}));var L=t(9652),H=t(57139),_=t(11677),Z=t(91783),W=t(65968),U=t(92730),J=t(41444);const G=(0,_.e)("useChainInfo",(function(){const{api:e,apiEndpoint:s,isApiReady:t,isEthereum:a,specName:o,systemChain:r,systemName:l}=(0,i.h)();return(0,n.useMemo)((()=>t?{chain:r,chainType:a?"ethereum":"substrate",color:s?.ui.color,genesisHash:e.genesisHash.toHex(),icon:(0,L.t)(l,o),metaCalls:(0,J.h$)(e.runtimeMetadata.asCallsOnly.toU8a()),specVersion:e.runtimeVersion.specVersion.toNumber(),ss58Format:(0,W.h)(e.registry.chainSS58)?e.registry.chainSS58:H.DEFAULT_SS58.toNumber(),tokenDecimals:(e.registry.chainDecimals||[H.DEFAULT_DECIMALS.toNumber()])[0],tokenSymbol:(e.registry.chainTokens||U.a.getDefaults().unit)[0],types:(0,Z.kh)(e.registry,r,e.runtimeVersion.specName,e.runtimeVersion.specVersion)}:null),[e,s,t,o,r,l,a])}));var Q=t(79444),Y=t(84522),K=t(11818);const X=(0,r.zo)(r.iA)`
  table {
    overflow: visible;
  }
`,ee=n.memo((function({chainInfo:e,className:s}){const{t}=x(),{extensions:o}=(0,K.Z)(),[i,l]=(0,n.useState)(0),[c,d]=(0,D.O)(),u=(0,n.useMemo)((()=>(o||[]).map((({extension:{name:e,version:s}},t)=>function(e,s,t){return{text:(0,a.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,a.jsx)("img",{alt:e,className:"ui--Dropdown-icon",src:t}),(0,a.jsx)("div",{className:"ui--Dropdown-name",children:e})]},s),value:s}}(`${e} ${s}`,t,Q.J[e]?.ui.logo||Y.h)))),[o]),m=(0,n.useCallback)((()=>{e&&o?.[i]&&(d(),o[i].update(e).catch((()=>!1)).then((()=>d())).catch(console.error))}),[e,o,i,d]),h=(0,n.useRef)([[t("Extensions"),"start"]]);return(0,a.jsx)(X,{className:s,empty:t("No Upgradable extensions"),header:h.current,children:o?0!==u.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("tr",{className:"isExpanded isFirst",children:(0,a.jsx)("td",{children:(0,a.jsx)(r.Lt,{label:t("upgradable extensions"),onChange:l,options:u,value:i})})}),(0,a.jsx)("tr",{className:"isExpanded isLast",children:(0,a.jsx)("td",{children:(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"upload",isDisabled:c,label:t("Update metadata"),onClick:m})})})})]}):(0,a.jsx)(r.$j,{})})}));var se=t(27421);const te=r.zo.div((({color:e})=>`\n  background-color: ${e} !important;\n  width: 100px;\n  flex: 1;\n  border-radius: 4px;\n`)),ae=n.memo((function({className:e,color:s}){return(0,a.jsx)(te,{className:e,color:s})}));function ne(){let e="#";for(let s=0;s<6;s++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}const oe={chainType:"substrate",color:"#FFFFFF",decimals:0,genesisHash:"",prefix:0,title:"",unit:"UNIT"},re=(0,r.zo)(r.iA)`
  td {
    padding: 0;

    .input.ui--Input input {
      border: none !important;
      background: transparent;
    }
  }

  .settings--networkSpecs-name {
    position: relative;

    .settings--networkSpecs-logo {
      height: 32px;
      left: 12px;
      position: absolute;
      top: 1rem;
      width: 32px;
    }
  }

  .settings--networkSpecs-color {
    position: relative;

    > div:first-child {
      display: flex;

      .settings--networkSpecs-colorInput {
        min-width: 124px;
      }

      .settings--networkSpecs-colorChangeButton {
        user-select: none;
        cursor: pointer;
        background: transparent;
        border: none;
        outline: none;
        align-self: flex-end;
        padding-bottom: 0.9rem;
      }
    }

    .settings--networkSpecs-colorBar {
      border-radius: 50%;
      border: 1px solid grey;
      height: 32px;
      left: 12px;
      position: absolute;
      top: 1rem;
      width: 32px;
    }
  }

  .settings--networkSpecs-qr {
    margin: 0.25rem auto;
    max-width: 15rem;

    img {
      border: 1px solid white;
    }
  }
`,ie=n.memo((function({chainInfo:e,className:s}){const{t}=x(),{isApiReady:o,systemChain:l}=(0,i.h)(),[c,d]=(0,n.useState)(oe),u=(0,se.N)(c,500),[m,h]=(0,n.useReducer)(((e,s)=>{const t={...e,...s};return d(t),t}),oe);(0,n.useEffect)((()=>{e&&h({chainType:e.chainType,color:e.color||ne(),decimals:e.tokenDecimals,genesisHash:e.genesisHash,prefix:e.ss58Format,title:l,unit:e.tokenSymbol})}),[e,l]);const p=(0,n.useCallback)((e=>h({color:e})),[]),g=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),h({color:ne()})}),[]),b=(0,n.useCallback)((()=>/^#[\da-fA-F]{6}|#[\da-fA-F]{3}$/.test(m.color)),[m]),f=(0,n.useRef)([[t("chain specifications"),"start",2]]);return o?(0,a.jsxs)(re,{className:s,empty:t("No open tips"),header:f.current,children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"settings--networkSpecs-name",children:[(0,a.jsx)(r.II,{className:"full",isDisabled:!0,label:t("Network Name"),value:m.title}),(0,a.jsx)(r.Mj,{className:"settings--networkSpecs-logo"})]})}),(0,a.jsx)("td",{rowSpan:7,children:c.genesisHash&&(0,a.jsx)(r.K0,{className:"settings--networkSpecs-qr",networkSpecs:u})})]}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"settings--networkSpecs-color",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.II,{className:"full settings--networkSpecs-colorInput",isError:!b(),label:t("Color"),onChange:p,value:m.color}),(0,a.jsx)("a",{className:"settings--networkSpecs-colorChangeButton",onClick:g,children:t("generate random color")})]}),(0,a.jsx)(ae,{className:"settings--networkSpecs-colorBar",color:m.color})]})})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:(0,a.jsx)(r.II,{className:"full",isDisabled:!0,label:t("Genesis Hash"),value:m.genesisHash})})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:(0,a.jsx)(r.II,{className:"full",isDisabled:!0,label:t("Unit"),value:m.unit})})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:(0,a.jsx)(r.II,{className:"full",isDisabled:!0,label:t("Address Prefix"),value:m.prefix.toString()})})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:(0,a.jsx)(r.II,{className:"full",isDisabled:!0,label:t("Decimals"),value:m.decimals.toString()})})}),(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:(0,a.jsx)(r.II,{className:"full",isDisabled:!0,label:t("Chain Type"),value:m.chainType})})})]}):(0,a.jsx)(r.$j,{})}));function le(){const{isDevelopment:e}=(0,i.h)(),s=G();return(0,a.jsxs)(a.Fragment,{children:[!e&&(0,a.jsx)(ee,{chainInfo:s}),(0,a.jsx)(ie,{chainInfo:s})]})}var ce=t(76075);const de=n.memo((function({basePath:e,onStatusChange:s}){const{t}=x(),{api:l,isApiConnected:c,isApiReady:d,isDevelopment:u}=(0,i.h)(),m=(0,ce.Z)(),h=(0,n.useMemo)((()=>[{isRoot:!0,name:"general",text:t("General")},{count:m,name:"metadata",text:t("Metadata")},{name:"developer",text:t("Developer")},{name:"i18n",text:t("Translate")}]),[m,t]),p=(0,n.useMemo)((()=>c&&d?u||l.runtimeMetadata.version<=13?[]:["developer"]:["metadata","i18n"]),[l,c,d,u]);return(0,a.jsxs)("main",{className:"settings--App",children:[(0,a.jsx)(r.mQ,{basePath:e,hidden:p,items:h}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/developer`,children:(0,a.jsx)(j,{onStatusChange:s})}),(0,a.jsx)(o.AW,{path:`${e}/i18n`,children:(0,a.jsx)($,{})}),(0,a.jsx)(o.AW,{path:`${e}/metadata`,children:(0,a.jsx)(le,{})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(A,{})})]})]})}))},76075:(e,s,t)=>{t.d(s,{Z:()=>o});var a=t(11677),n=t(11818);const o=(0,a.e)("useCounter",(function(){const{count:e}=(0,n.Z)();return e}))},11818:(e,s,t)=>{t.d(s,{Z:()=>m});var a=t(2784),n=t(23729),o=t.n(n),r=t(90778),i=t(11677);let l=0;const c=new Map;function d(e,{name:s,version:t}){const a=`properties:${e.genesisHash.toHex()}`,n=o().get(a,{});n[s]={extensionVersion:t,ss58Format:e.registry.chainSS58,tokenDecimals:e.registry.chainDecimals[0],tokenSymbol:e.registry.chainTokens[0]},o().set(a,n)}const u={count:0,extensions:[]},m=(0,i.e)("useExtensions",(function(){const{api:e,extensions:s,isApiReady:t,isDevelopment:n}=(0,r.h)(),[i,m]=(0,a.useState)(),[h,p]=(0,a.useState)(0);return(0,a.useEffect)((()=>{const e=`${++l}-${Date.now()}`;return c.set(e,p),()=>{c.delete(e)}}),[]),(0,a.useEffect)((()=>{s&&async function(e,s,t){return(await Promise.all(s.map((s=>async function(e,s){if(!s.metadata)return null;try{const t=s.metadata,a=await t.get();return{extension:s,known:a,update:async a=>{let n=!1;try{n=await t.provide(a),n&&(d(e,s),[...c.values()].forEach((e=>e(Date.now()))))}catch(e){}return n}}}catch(e){return null}}(e,s))))).filter((e=>!!e))}(e,s).then(m).catch(console.error)}),[e,s,h]),(0,a.useMemo)((()=>!n&&t&&i?function(e,s){const t=s.map((s=>{const t=s.known.find((({genesisHash:s})=>e.genesisHash.eq(s)))||null;return t&&!e.runtimeVersion.specVersion.gtn(t.specVersion)&&function(e,{extension:s}){const t=o().get(`properties:${e.genesisHash.toHex()}`,{});if(!t[s.name])return d(e,s),!0;const{ss58Format:a,tokenDecimals:n,tokenSymbol:r}=t[s.name];return a===e.registry.chainSS58&&n===e.registry.chainDecimals[0]&&r===e.registry.chainTokens[0]}(e,s)?null:{...s,current:t}})).filter((e=>!!e));return{count:t.length,extensions:t}}(e,i):u),[i,e,t,n])}))},35189:(e,s,t)=>{t.d(s,{SX:()=>r,a1:()=>l,tI:()=>i,wg:()=>c});var a=t(52322),n=(t(2784),t(24732)),o=t(16039);function r({info:e,isHeader:s,text:t,value:o},r=[],i="empty",l){return s?(0,a.jsx)(n.Lt.Header,{content:t},t):{text:(0,a.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,a.jsx)(n.Mj,{className:"ui--Dropdown-icon",logo:e&&r.includes(e)?i:e}),(0,a.jsxs)("div",{className:"ui--Dropdown-name",children:[t,l]})]},o),value:o}}function i({info:e,text:s,value:t},o=[],r="empty"){const i=e&&o.includes(e)?r:e;return{text:(0,a.jsxs)("div",{className:"ui--Dropdown-item",children:["empty"===i?(0,a.jsx)(n.Mj,{className:"ui--Dropdown-icon",logo:"empty"}):(0,a.jsx)(n.k,{className:"ui--Dropdown-icon",size:32,theme:i,value:"5F9999K9UgTUgSsbXZQcEmRMvQqwJoBUHMv9e1k2MdgghuRA"}),(0,a.jsx)("div",{className:"ui--Dropdown-name",children:s})]},t),value:t}}function l(e){o.X.set(e)}function c(e){l(e),window.location.reload()}},24569:(e,s,t)=>{t.d(s,{Z:()=>k});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(345),l=t(38894),c=t(69187),d=t(33661),u=t(74076),m=t(52256),h=t(55858),p=t(61349);function x(){return(0,p.$G)("app-signing")}var g=t(17965);const b=n.memo((function({onClose:e,onUnlock:s,pair:t}){const{t:o}=x(),[i,l]=(0,n.useState)(!1),[c,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(null);(0,n.useEffect)((()=>{d(t?.address||"")}),[t]),(0,n.useEffect)((()=>{p(null)}),[u]);const b=(0,n.useCallback)((()=>{t&&t.isLocked&&(l(!0),(0,g.Y)((()=>{try{t.decodePkcs8(u)}catch(e){return l(!1),p(e.message)}l(!1),s()})))}),[s,t,u]);return t?(0,a.jsxs)(r.u_,{className:"toolbox--Unlock",header:o("Unlock account"),onClose:e,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:o("This account that will perform the message signing."),children:(0,a.jsx)(r.rp,{isDisabled:!0,label:o("account"),value:c})}),(0,a.jsx)(r.u_.Columns,{hint:o("Unlock the account for signing. Once active the signature will be generated based on the content provided."),children:(0,a.jsx)(r.ro,{autoFocus:!0,isError:!!h,label:o("password"),onChange:m,onEnter:b,value:u})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.zx,{icon:"unlock",isBusy:i,label:o("Unlock"),onClick:b})})]}):null})),f=r.zo.div`
  .toolbox--Sign-input {
    position: relative;
    width: 100%;
    height: 100%;

    .unlock-overlay {
      position: absolute;
      width: 100%;
      height: 100%;
      top:0;
      left:0;
      background-color: #0f0e0e7a;
    }

    .unlock-overlay-warning {
      display: flex;
      align-items: center;
      justify-content: center;
      height:100%;
    }

    .unlock-overlay-content {
      color:#fff;
      padding: 0 2.5rem;
      text-align:center;

      .ui--Button-Group {
        text-align: center;
      }
    }
  }
`,j=n.memo((function({className:e=""}){const{t:s}=x(),[t,o]=(0,n.useState)((()=>c.Nn.getPairs()[0]||null)),[{data:p,isHexData:g},j]=(0,n.useState)({data:"",isHexData:!1}),[{isInjected:v},y]=(0,n.useState)({isExternal:!1,isHardware:!1,isInjected:!1}),[C,w]=(0,n.useState)(!1),[{isUsable:N,signer:k},S]=(0,n.useState)({isUsable:!0,signer:null}),[I,A]=(0,n.useState)(""),[E,M]=(0,l.O)();(0,n.useEffect)((()=>{const e=t&&t.meta||{},s=e.isExternal||!1,a=e.isHardware||!1,n=e.isInjected||!1,o=!(s||a||n);y({isExternal:s,isHardware:a,isInjected:n}),w(!n&&(t&&t.isLocked||!1)),A(""),S({isUsable:o,signer:null}),e.source&&n&&(0,i.R0)(e.source).catch((()=>null)).then((e=>S({isUsable:(0,d.m)(e?.signer?.signRaw),signer:e?.signer||null}))).catch(console.error)}),[t]);const P=(0,n.useCallback)((e=>e&&o(c.Nn.getPair(e))),[]),T=(0,n.useCallback)((e=>j({data:e,isHexData:(0,u.vq)(e)})),[]),D=(0,n.useCallback)((()=>{if(C||!N||!t)return;const e=(0,m.Rl)(p);k&&(0,d.m)(k.signRaw)?(A(""),k.signRaw({address:t.address,data:(0,h.c)(e),type:"bytes"}).then((({signature:e})=>A(e))).catch(console.error)):A((0,h.c)(t.sign(e)))}),[t,p,C,N,k]),F=(0,n.useCallback)((()=>{w(!1),M()}),[M]);return(0,a.jsxs)(f,{className:`${e} toolbox--Sign`,children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.rp,{className:"full",isInput:!1,label:s("account"),onChange:P,type:"account"})}),(0,a.jsxs)("div",{className:"toolbox--Sign-input",children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.II,{autoFocus:!0,className:"full",label:s("sign the following data"),onChange:T,value:p})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.qG,{className:"medium",label:s("hex input data"),value:s(g?"Yes":"No")})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.r_,{className:"full",isHidden:0===I.length,isMonospace:!0,label:s("signature of supplied data"),value:I,withCopy:!0})}),(0,a.jsx)("div",{className:"unlock-overlay",hidden:!N||!C||v,children:C&&(0,a.jsx)("div",{className:"unlock-overlay-warning",children:(0,a.jsxs)("div",{className:"unlock-overlay-content",children:[s("You need to unlock this account to be able to sign data."),(0,a.jsx)("br",{}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"unlock",label:s("Unlock account"),onClick:M})})]})})}),(0,a.jsx)("div",{className:"unlock-overlay",hidden:N,children:(0,a.jsx)("div",{className:"unlock-overlay-warning",children:(0,a.jsx)("div",{className:"unlock-overlay-content",children:s(v?"This injected account cannot be used to sign data since the extension does not support raw signing.":"This external account cannot be used to sign data. Only Limited support is currently available for signing from any non-internal accounts.")})})}),E&&(0,a.jsx)(b,{onClose:M,onUnlock:F,pair:t})]}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.zx,{icon:"key",isDisabled:!(N&&!C),label:s("Sign message"),onClick:D})})]})}));var v=t(90778),y=t(16039),C=t(53501);const w=r.zo.div`
  .ui--AlignedIconContainer {
    position: absolute;
    z-index: 1;
  }

  .alignedBadge {
    left: 1.25rem;
    position: relative;
    top: 1.25rem;
  }
`,N=n.memo((function({className:e=""}){const{t:s}=x(),{isEthereum:t}=(0,v.h)(),[{cryptoType:o,isValid:i},l]=(0,n.useState)({cryptoType:"unknown",isValid:!1}),[{data:d,isHexData:m},h]=(0,n.useState)({data:"",isHexData:!1}),[{isValidPk:p,publicKey:g},b]=(0,n.useState)({isValidPk:!1,publicKey:null}),[{isValidSignature:f,signature:j},N]=(0,n.useState)({isValidSignature:!1,signature:""}),[k]=(0,n.useState)([{text:s("Crypto not detected"),value:"unknown"}].concat(y.X.availableCryptos));(0,n.useEffect)((()=>{let e="unknown",s=p&&f;if(s&&g){const t=(0,C.D)(d,j,g);"none"!==t.crypto?(e=t.crypto,s=t.isValid):s=!1}l({cryptoType:e,isValid:s})}),[d,p,f,g,j]);const S=(0,n.useCallback)((e=>{let s=null;try{s=c.Nn.decodeAddress(e||"")}catch(e){console.error(e)}b({isValidPk:!!s&&(32===s.length||t&&20===s.length),publicKey:s})}),[t]),I=(0,n.useCallback)((e=>h({data:e,isHexData:(0,u.vq)(e)})),[]),A=(0,n.useCallback)((e=>N({isValidSignature:(0,u.vq)(e)&&(130===e.length||t&&132===e.length),signature:e})),[t]);return(0,a.jsxs)(w,{className:`${e} toolbox--Verify`,children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.rp,{className:"full",isError:!p,isInput:!0,label:s("verify using address"),onChange:S})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.II,{autoFocus:!0,className:"full",label:s("using the following data"),onChange:I,value:d})}),(0,a.jsxs)("div",{className:"ui--row",children:[(0,a.jsx)("div",{className:"ui--AlignedIconContainer",children:(0,a.jsx)(r.Ct,{className:"alignedBadge",color:i?"green":f?"red":"gray",icon:i?"check":f?"exclamation":"question"})}),(0,a.jsx)(r.II,{className:"full",isError:!f,label:s("the supplied signature"),onChange:A,value:j})]}),(0,a.jsxs)("div",{className:"ui--row",children:[(0,a.jsx)(r.Lt,{defaultValue:o,isDisabled:!0,label:s("signature crypto type"),options:k}),(0,a.jsx)(r.qG,{className:"medium",label:s("hex input data"),value:s(m?"Yes":"No")})]})]})})),k=n.memo((function({basePath:e}){const{t:s}=x(),t=(0,n.useRef)([{isRoot:!0,name:"sign",text:s("Sign message")},{name:"verify",text:s("Verify signature")}]);return(0,a.jsxs)("main",{className:"toolbox--App",children:[(0,a.jsx)(r.mQ,{basePath:e,items:t.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/verify`,children:(0,a.jsx)(N,{})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(j,{})})]})]})}))},96246:(e,s,t)=>{t.d(s,{Z:()=>ie});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(9118),c=t(48801),d=t.n(c),u=t(95292),m=t(38894),h=t(61349);function p(){return(0,h.$G)("app-society")}const x=n.memo((function({onClose:e}){const{t:s}=p(),{api:t}=(0,i.h)(),[o,l]=(0,n.useState)(),[c,d]=(0,n.useState)();return(0,a.jsxs)(r.u_,{header:s("Bid to join"),onClose:e,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:s("Your candidate/bid account. Once accepted this account will become a member."),children:(0,a.jsx)(r.rp,{label:s("bid account"),onChange:d,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:s("The amount to tie to your bid. The lowest bidder moves forward."),children:(0,a.jsx)(r.H,{autoFocus:!0,label:s("bid amount"),onChange:l})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:c,icon:"sign-in-alt",isDisabled:!o,label:s("Bid"),onStart:e,params:[o],tx:t.tx.society.bid})})]})}));var g=t(34814);const b=r.zo.div`
  align-items: center;
  display: flex;
  flex-wrap: no-wrap;

  > div {
    flex: 0;

    &:first-child {
      padding-right: 1.5rem;
    }
  }
`,f=n.memo((function({className:e,value:s}){const t=(0,n.useMemo)((()=>s?.isVouch?s.asVouch[0]:null),[s]);return(0,a.jsxs)(b,{className:e,children:[(0,a.jsx)("div",{children:s&&s.type}),t&&(0,a.jsx)(r.N,{value:t})]})})),j=n.memo((function({index:e,value:{kind:s,value:t,who:o}}){const{t:l}=p(),{api:c}=(0,i.h)(),{allAccounts:d}=(0,g.x)(),[u,m]=(0,n.useMemo)((()=>s.isVouch?s.asVouch:[null,null]),[s]),[h,x]=(0,n.useMemo)((()=>{const e=o.toString(),s=u&&u.toString();return[d.some((s=>s===e)),!!s&&d.some((e=>e===s))]}),[d,u,o]);return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"address all",children:(0,a.jsx)(r.N,{value:o})}),(0,a.jsxs)("td",{className:"start",children:[(0,a.jsx)(f,{value:s}),s.isVouch?x&&(0,a.jsx)(r.cA,{accountId:u,icon:"times",label:l("Unvouch"),params:[e],tx:c.tx.society.unvouch}):h&&(0,a.jsx)(r.cA,{accountId:o,icon:"times",label:l("Unbid"),params:[e],tx:c.tx.society.unbid})]}),(0,a.jsx)(r.iA.Column.Balance,{value:t}),(0,a.jsx)(r.iA.Column.Balance,{value:m})]})})),v=n.memo((function({className:e}){const{t:s}=p(),{api:t}=(0,i.h)(),o=(0,l.W7)(t.query.society.bids),c=(0,n.useRef)([[s("bids"),"start"],[s("bid kind"),"start"],[s("value")],[s("tip")]]);return(0,a.jsx)(r.iA,{className:e,empty:o&&s("No bids"),header:c.current,children:o?.map(((e,s)=>(0,a.jsx)(j,{index:s,value:e},e.who.toString())))})})),y=n.memo((function({label:e,votes:s}){return 0===s.length?null:(0,a.jsx)(r.xH,{summary:`${e} (${s.length})`,children:s.map((([e])=>(0,a.jsx)(r.ax,{value:e},e.toString())))})})),C=n.memo((function({votes:e}){const{t:s}=p(),[{allAye:t,allNay:o,allSkeptic:r},i]=(0,n.useState)({allAye:[],allNay:[],allSkeptic:[]});return(0,n.useEffect)((()=>{e&&i({allAye:e.filter((([,e])=>e.isApprove)),allNay:e.filter((([,e])=>e.isReject)),allSkeptic:e.filter((([,e])=>e.isSkeptic))})}),[e]),(0,a.jsxs)("td",{className:"expand",children:[(0,a.jsx)(y,{label:s("Skeptics"),votes:r}),(0,a.jsx)(y,{label:s("Approvals"),votes:t}),(0,a.jsx)(y,{label:s("Rejections"),votes:o})]})})),w=n.memo((function({candidateId:e,isMember:s,ownMembers:t}){const{t:o}=p(),{api:l}=(0,i.h)(),[c,d]=(0,m.O)(),[u,h]=(0,n.useState)(!0),[x,g]=(0,n.useState)(null),b=(0,n.useRef)([{text:o("Aye, I approve"),value:!0},{text:o("Nay, I do not approve"),value:!1}]);return(0,a.jsxs)(a.Fragment,{children:[c&&(0,a.jsxs)(r.u_,{header:o("Vote for candidate"),onClose:d,children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.rp,{filter:t,label:o("vote from account"),onChange:g}),(0,a.jsx)(r.Lt,{label:o("vote for candidate"),onChange:h,options:b.current,value:u})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:x,icon:"check",label:o("Vote"),onStart:d,params:[e,u],tx:l.tx.society.vote})})]}),(0,a.jsx)(r.zx,{icon:"check",isDisabled:!s,label:o("Vote"),onClick:d})]})})),N=n.memo((function({allMembers:e,isMember:s,ownMembers:t,value:{accountId:o,kind:c,value:d}}){const{api:u}=(0,i.h)(),m=(0,n.useMemo)((()=>[e.map((e=>[o,e]))]),[o,e]),h=(0,l.W7)(u.query.society.votes.multi,m,{transform:s=>s.map(((s,t)=>[e[t],s])).filter((([,e])=>e.isSome)).map((([e,s])=>[e,s.unwrap()]))});return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"address all",children:(0,a.jsx)(r.N,{value:o})}),(0,a.jsx)("td",{className:"start",children:(0,a.jsx)(f,{value:c})}),(0,a.jsx)(r.iA.Column.Balance,{value:d}),(0,a.jsx)(C,{votes:h}),(0,a.jsx)("td",{className:"button",children:(0,a.jsx)(w,{candidateId:o.toString(),isMember:s,ownMembers:t})})]})})),k=n.memo((function({allMembers:e,candidates:s,className:t="",isMember:o,ownMembers:i}){const{t:l}=p(),c=(0,n.useRef)([[l("candidates"),"start"],[l("bid kind"),"start"],[l("value")],[void 0,"expand"],[]]);return(0,a.jsx)(r.iA,{className:t,empty:s&&l("No candidates"),header:c.current,children:s?.map((s=>(0,a.jsx)(N,{allMembers:e,isMember:o,ownMembers:i,value:s},s.accountId.toString())))})})),S=n.memo((function({allMembers:e,onClose:s}){const{t}=p(),{api:o}=(0,i.h)(),[l,c]=(0,n.useState)(),[d,u]=(0,n.useState)(),[m,h]=(0,n.useState)(),[x,g]=(0,n.useState)();return(0,a.jsxs)(r.u_,{header:t("Vouch for a new candidate"),onClose:s,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:t("Your member account that the vouch is made from."),children:(0,a.jsx)(r.rp,{filter:e,label:t("member account"),onChange:h,type:"account"})}),(0,a.jsx)(r.u_.Columns,{hint:t("The candidate/bid account. Once accepted this account will become a member."),children:(0,a.jsx)(r.rp,{label:t("bid account"),onChange:g})}),(0,a.jsx)(r.u_.Columns,{hint:t("The amount to tie to your bid. The lowest bidder moves forward."),children:(0,a.jsx)(r.H,{autoFocus:!0,label:t("bid amount"),onChange:c})}),(0,a.jsx)(r.u_.Columns,{hint:t("The amount you wish to be tipped for your bid."),children:(0,a.jsx)(r.H,{label:t("tip amount"),onChange:u})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:m,icon:"sign-in-alt",isDisabled:!l||!x||!d,label:t("Vouch"),onStart:s,params:[x,l,d],tx:o.tx.society.vouch})})]})})),I=n.memo((function({allMembers:e,candidates:s,className:t,isMember:n,ownMembers:o}){const{t:i}=p(),[l,c]=(0,m.O)(),[d,u]=(0,m.O)();return(0,a.jsxs)("div",{className:t,children:[(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(r.zx,{icon:"plus",label:i("Submit bid"),onClick:c}),(0,a.jsx)(r.zx,{icon:"plus",isDisabled:!n,label:i("Vouch for"),onClick:u}),l&&(0,a.jsx)(x,{onClose:c}),d&&(0,a.jsx)(S,{allMembers:e,onClose:u})]}),(0,a.jsx)(k,{allMembers:e,candidates:s,isMember:n,ownMembers:o}),(0,a.jsx)(v,{})]})})),A=n.memo((function({isMember:e,ownMembers:s}){const{t}=p(),{api:o}=(0,i.h)(),[l,c]=(0,m.O)(),[d,u]=(0,n.useState)(!0),[h,x]=(0,n.useState)(null),g=(0,n.useRef)([{text:t("Aye, I approve"),value:!0},{text:t("Nay, I do not approve"),value:!1}]);return(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsxs)(r.u_,{header:t("Vote for defender"),onClose:c,children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.rp,{filter:s,label:t("vote from account"),onChange:x}),(0,a.jsx)(r.Lt,{label:t("vote for defender"),onChange:u,options:g.current,value:d})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:h,icon:"check",label:t("Vote"),onStart:c,params:[d],tx:o.tx.society.defenderVote})})]}),(0,a.jsx)(r.zx,{icon:"check",isDisabled:!e,label:t("Vote"),onClick:c})]})})),E={transform:e=>e.filter((({vote:e})=>!!e)).map((({accountId:e,vote:s})=>[e.toString(),s]))},M=n.memo((function({className:e="",info:s,isMember:t,ownMembers:o}){const{t:c}=p(),{api:d}=(0,i.h)(),u=(0,l.W7)(d.derive.society.members,void 0,E),m=(0,n.useRef)([[c("defender"),"start"],[void 0,"expand"],[]]);return s&&s.hasDefender&&s.defender?(0,a.jsx)(r.iA,{className:e,header:m.current,children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"address all",children:(0,a.jsx)(r.N,{value:s.defender})}),(0,a.jsx)(C,{votes:u}),(0,a.jsx)("td",{className:"button",children:(0,a.jsx)(A,{isMember:t,ownMembers:o})})]})}):null}));var P=t(54383),T=t(58607),D=t(65874),F=t(14681),V=t(15968);const R=300;function q(e,s,t,a,n){const o=new Path2D("M373.1,126.9c-5.2-4.1-11.4-9.7-22.7-11.1c-10.6-1.4-21.4,5.7-28.7,10.4c-7.3,4.7-21.1,18.5-26.8,22.7 c-5.7,4.2-20.3,8.1-43.8,22.2s-115.7,73.3-115.7,73.3l24,0.3L52.4,299.8h10.7l-15.4,11.7c0,0,13.6,3.6,25-3.6l0,3.3 c0,0,127.4-50.2,152-37.2l-15,4.4c1.3,0,25.5,1.6,25.5,1.6s0.8,15.1,15.4,24.8c14.6,9.6,14.9,14.9,14.9,14.9s-7.6,3.1-7.6,7 c0,0,11.2-3.4,21.6-3.1c10.4,0.3,19.5,3.1,19.5,3.1s-0.8-4.2-10.9-7c-10.2-2.9-20.1-13.8-25-19.8c-4.9-6-8.3-16.7-4.1-27.4 c3.5-9.1,15.7-14.1,40.9-27.1c29.7-15.4,36.5-26.8,40.7-35.7c4.2-8.9,10.4-26.6,13.9-34.9c4.4-10.7,9.8-16.4,14.3-19.8 c4.4-3.4,24.5-10.9,24.5-10.9S378,130.8,373.1,126.9z");e.save(),e.translate(s/2,t/2),e.scale(a/440,a/440),e.translate(-220,-220),n(e,o),e.restore()}function O(e,s,t,a){e.save(),e.translate(.5,.5);for(let n=0;n<t.length;n++)e.save(),e.rotate(2*Math.PI/t.length*n),e.translate(0,-s),a(e,t[n]),e.restore();e.restore()}function z(e,s){let t=0;return s.map((s=>e.slice(t,t+=s)))}const B={display:"block",margin:"0 auto"},$=n.memo((function({accountId:e}){const{t:s}=p(),{api:t}=(0,i.h)(),o=(0,n.useRef)(null),[l]=(0,n.useState)((()=>t.genesisHash.eq(V.Cx))),[c,d]=(0,m.O)();return(0,n.useEffect)((()=>{if(o.current){const s=o.current.getContext("2d");s&&function(e,s){console.log(`Generating ink for ${s.toString()} as ${s.toHex()}`);const t=s.toU8a().reduce(((e,s)=>{for(let t=0;t<8;++t)e.push(0!=(s&1<<7-t));return e}),[]);e.save(),e.translate(0,0),e.scale(R,R),function(e,s){const t=z(s,[71,61,51,41,32]);for(let s=0;s<t.length;++s)O(e,.5-.062*(s+.5),t[s],((e,s)=>{s&&(e.beginPath(),e.arc(0,0,.016,0,2*Math.PI),e.fillStyle="black",e.fill())}));e.lineWidth=10,q(e,1,1,.4,((e,s)=>e.stroke(s)))}(e,t),e.restore(),e.save(),e.translate(325,0),e.scale(R,R),function(e,s){const t=z(s,[71,61,51,41,32]);for(let s=0;s<t.length;++s)O(e,.5-.062*(s+.5),t[s],((e,s)=>{e.beginPath(),e.arc(0,0,(s?8:4)/500,0,2*Math.PI),e.fillStyle=s?"black":"#e6007a",e.fill()}));q(e,1,1,.44,((e,s)=>e.fill(s)))}(e,t),e.restore(),e.save(),e.translate(0,325),e.scale(R,R),function(e,s){const t=z(s,[64,64,64,64]);for(let s=0;s<t.length;++s)O(e,.5-.072*(s+.5),t[s],((e,s)=>{s&&(e.beginPath(),e.moveTo(0,-.036),e.lineTo(0,.036),e.lineWidth=.01,e.stroke())}));q(e,1,1,.44,((e,s)=>e.fill(s)))}(e,t),e.restore(),e.save(),e.translate(325,325),e.scale(R,R),function(e,s){e.lineWidth=.01;for(let t=0;t<8;++t)for(let a=0;a<32;++a)s[32*t+a]&&(e.save(),e.translate((a+.5)/32,t/8),e.beginPath(),e.moveTo(0,0),e.lineTo(0,1/8),e.stroke(),e.restore());e.fillStyle="rgba(255, 255, 255, 0.8)",q(e,1,1,1,((e,s)=>e.fill(s))),e.lineWidth=6,q(e,1,1,1,((e,s)=>e.stroke(s)))}(e,t),e.restore(),e.save(),e.translate(650,0),e.scale(R,R),function(e,s){e.save(),e.translate(.484,.516),e.fillStyle="black";let t=.484;for(let a=0;a<s.length;a++)t-=.5/s.length*.75/(4*t),e.rotate(2*Math.PI/s.length*8/(4*t)),e.save(),e.translate(0,-t),e.beginPath(),e.arc(0,0,s[a]?.016:.008,0,2*Math.PI),e.fillStyle=s[a]?"black":"#e6007a",e.fill(),e.restore();e.restore(),e.lineWidth=10,q(e,.984,1.016,.44,((e,s)=>e.stroke(s)))}(e,t),e.restore(),e.save(),e.translate(650,325),e.scale(R,R),function(e,s){const t=z(s,[128,128]);for(let s=0;s<t.length;++s)O(e,.5-.072*(s+.5),t[s],((e,s)=>{s&&(e.beginPath(),e.moveTo(0,-.036),e.lineTo(0,.036),e.lineWidth=.01,e.stroke())}));e.lineWidth=6,q(e,1,1,.7,((e,s)=>e.stroke(s)))}(e,t),e.restore()}(s,e)}})),l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"pen-nib",onClick:d}),c&&(0,a.jsx)(r.u_,{header:s("design samples"),onClose:d,size:"large",children:(0,a.jsx)(r.u_.Content,{children:(0,a.jsx)("canvas",{height:625,ref:o,style:B,width:950})})})]}):null})),L=r.zo.tr`
  .payoutExpander {
    .payout+.payout {
      margin-top: 0.5rem;
    }

    .ui--Columar {
      flex-wrap: unset;

      .ui--Column {
        min-width: 15ch;

        &:first-child {
          max-width: 100% !important;
        }

        &:last-child {
          min-width: 15ch;
          max-width: 15ch;
          white-space: nowrap;
        }
      }
    }
  }
`,H=n.memo((function({bestNumber:e,className:s="",value:{accountId:t,isCandidateVoter:o,isDefenderVoter:l,isFounder:c,isHead:d,isSkeptic:u,isSuspended:m,isWarned:h,key:x,payouts:b,strikes:f}}){const{t:j}=p(),{api:v}=(0,i.h)(),{allAccounts:y}=(0,g.x)(),C=(0,n.useCallback)((()=>e&&b&&function(e,s){return s.map((([s,t],n)=>(0,a.jsx)("div",{className:"payout",children:(0,a.jsxs)(r.P0,{children:[(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(T.Z,{value:t})}),(0,a.jsxs)(r.P0.Column,{children:[(0,a.jsxs)("div",{children:["#",(0,F.u)(s)]}),s.gt(e)&&(0,a.jsx)(D.Z,{value:s.sub(e)},n)]})]})},n)))}(e,b)),[e,b]),w=(0,n.useMemo)((()=>y.some((e=>e===x))),[y,x]),N=(0,n.useMemo)((()=>e&&b.find((([s])=>e.gt(s)))),[e,b]),k=(0,n.useMemo)((()=>[o&&j("Candidate"),l&&j("Defender")].filter((e=>!!e)).join(", ")),[o,l,j]);return(0,a.jsxs)(L,{className:s,children:[(0,a.jsxs)("td",{className:"address relative all",children:[(0,a.jsx)(r.N,{value:t}),(0,a.jsxs)("div",{className:"absolute",children:[(o||l)&&(0,a.jsx)(r.Vp,{color:"blue",label:j("voted")}),h&&(0,a.jsx)(r.Vp,{color:"orange",label:j("strikes")}),d&&(0,a.jsx)(r.Vp,{color:"green",label:j("society head")}),c&&(0,a.jsx)(r.Vp,{color:"green",label:j("founder")}),u&&(0,a.jsx)(r.Vp,{color:"yellow",label:j("skeptic")}),m&&(0,a.jsx)(r.Vp,{color:"red",label:j("suspended")}),N&&(0,a.jsx)(r.Vp,{color:"grey",label:j("payout")})]})]}),(0,a.jsxs)("td",{className:"number together",children:[!!b?.length&&(0,a.jsx)(r.xH,{className:"payoutExpander",renderChildren:C,summary:j("Payouts ({{count}})",{replace:{count:(0,F.u)(b.length)}})}),w&&N&&(0,a.jsx)(r.cA,{accountId:t,icon:"ellipsis-h",label:"Payout",params:[],tx:v.tx.society.payout})]}),(0,a.jsx)("td",{className:"together",children:k}),(0,a.jsx)("td",{className:"number",children:(0,F.u)(f)}),(0,a.jsx)("td",{className:"button start",children:(0,a.jsx)($,{accountId:t})})]})})),_=n.memo((function({className:e="",mapMembers:s}){const{t}=p(),o=(0,P.C)(),i=(0,n.useRef)([[t("members"),"start",2],[t("voted on"),"start"],[t("strikes")],[]]);return(0,a.jsx)(r.iA,{className:e,empty:s&&t("No active members"),header:i.current,children:s?.map((e=>(0,a.jsx)(H,{bestNumber:o,value:e},e.key)))})})),Z=(0,r.zo)(r.Ty)`
  .society--header--account {
    white-space: nowrap;

    .ui--AccountName {
      display: inline-block;
    }

    .ui--IdentityIcon {
      margin-right: 0.5rem;
    }
  }
`,W=n.memo((function({className:e="",info:s,payoutTotal:t}){const{t:o}=p(),{api:c}=(0,i.h)(),d=(0,l.W7)(c.derive.society.members),u=(0,P.C)(),m=(0,n.useMemo)((()=>s&&s.pot.gtn(0)?s.pot:null),[s]);return(0,a.jsxs)(Z,{className:e,children:[(0,a.jsx)("section",{className:"media--1100",children:s&&d&&(0,a.jsxs)(r.Jy,{label:o("members"),children:[d.length," / ",s.maxMembers.toString()]})}),u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("section",{children:(0,a.jsx)(r.Jy,{label:o("rotation"),progress:{total:c.consts.society.rotationPeriod,value:u.mod(c.consts.society.rotationPeriod),withTime:!0}})}),(0,a.jsx)("section",{className:"media--1200",children:(0,a.jsx)(r.Jy,{label:o("challenge"),progress:{total:c.consts.society.challengePeriod,value:u.mod(c.consts.society.challengePeriod),withTime:!0}})})]}),(0,a.jsxs)("section",{children:[t&&(0,a.jsx)(r.Jy,{label:o("payouts"),children:(0,a.jsx)(T.Z,{value:t,withSi:!0})}),m&&(0,a.jsx)(r.Jy,{label:o("pot"),children:(0,a.jsx)(T.Z,{value:m,withSi:!0})})]})]})})),U=r.zo.div`
  .overviewSection {
    margin-bottom: 1.5rem;
  }
`,J=n.memo((function({className:e,info:s,isMember:t,mapMembers:n,ownMembers:o,payoutTotal:r}){return(0,a.jsxs)(U,{className:e,children:[(0,a.jsx)(W,{info:s,payoutTotal:r}),(0,a.jsx)(M,{info:s,isMember:t,ownMembers:o}),(0,a.jsx)(_,{mapMembers:n})]})})),G=n.memo((function({balance:e,bid:s,value:t}){return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"address all",children:(0,a.jsx)(r.N,{value:t})}),(0,a.jsx)("td",{className:"start",children:(0,a.jsx)(f,{value:s})}),(0,a.jsx)(r.iA.Column.Balance,{value:e})]})})),Q={transform:e=>e.filter((([{args:[e]},s])=>s.isSome&&e)).map((([{args:[e]},s])=>{const[t,a]=s.unwrap();return{accountId:e,balance:t,bid:a}})).sort(((e,s)=>e.balance.cmp(s.balance)))},Y={transform:e=>e.map((({args:[e]})=>e)).filter((e=>!!e))},K=n.memo((function({className:e}){const{t:s}=p(),{api:t}=(0,i.h)(),o=(0,l.W7)(t.query.society.suspendedCandidates.entries,void 0,Q),c=(0,l.W7)(t.query.society.suspendedMembers.keys,void 0,Y),d=(0,n.useRef)({candidates:[[s("candidates"),"start"],[s("bid kind"),"start"],[s("value")]],members:[[s("members"),"start",3]]});return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(r.iA,{className:e,empty:c&&s("No suspended members"),header:d.current.members,children:c?.map((e=>(0,a.jsx)(G,{value:e},e.toString())))}),(0,a.jsx)(r.iA,{className:e,empty:o&&s("No suspended candidates"),header:d.current.candidates,children:o?.map((({accountId:e,balance:s,bid:t})=>(0,a.jsx)(G,{balance:s,bid:t,value:e},e.toString())))})]})}));var X=t(58900),ee=t(11677);const se={allMembers:[],isMember:!1,ownMembers:[]},te=(0,ee.e)("useMembers",(function(){const{api:e}=(0,i.h)(),{allAccounts:s}=(0,g.x)(),[t,a]=(0,n.useState)(se),o=(0,l.W7)(e.derive.society.members);return(0,n.useEffect)((()=>{s&&o&&a(function(e,s){const t=s.filter((({isSuspended:e})=>!e)).map((({accountId:e})=>e.toString())),a=t.filter((s=>e.includes(s)));return{allMembers:t,isMember:0!==a.length,ownMembers:a}}(s,o))}),[s,o]),t}));var ae=t(24305);const ne={},oe=(0,ee.e)("useVoters",(function(){const{api:e}=(0,i.h)(),s=(0,ae.b)([e.events.society.Vote]),t=(0,l.W7)(e.derive.society.candidates),[a,o]=(0,n.useState)(ne);return(0,n.useEffect)((()=>{s&&t&&async function(e,s){const t=[],a=[];return(s.length?await Promise.all(s.map((({accountId:s})=>e.query.society.votes.entries(s)))):[]).forEach((e=>{e.forEach((([{args:[,e]},s])=>{if(s.isSome){const n=e.toString();s.unwrap().isSkeptic?!t.includes(n)&&t.push(n):!a.includes(n)&&a.push(n)}}))})),{candidates:s,skeptics:t,voters:a}}(e,t).then(o).catch(console.error)}),[e,t,s]),a}));function re(e,s){const t=e.isCandidateVoter||e.isDefenderVoter;return e.isHead!==s.isHead?e.isHead?-1:1:e.isFounder!==s.isFounder?e.isFounder?-1:1:e.isSkeptic!==s.isSkeptic?e.isSkeptic?-1:1:t!==(s.isCandidateVoter||s.isDefenderVoter)?t?-1:1:e.isSuspended!==s.isSuspended?e.isSuspended?-1:1:e.isWarned!==s.isWarned?e.isWarned?-1:1:s.strikes.cmp(e.strikes)||s.payouts.length-e.payouts.length}const ie=n.memo((function({basePath:e,className:s}){const{t}=p(),{api:c}=(0,i.h)(),m=(0,X.Z)(),{allMembers:h,isMember:x,ownMembers:g}=te(),b=(0,l.W7)(c.derive.society.info),f=(0,l.W7)(c.derive.society.members),{candidates:j,skeptics:v,voters:y}=oe(),[C,w]=(0,n.useMemo)((()=>f&&b&&v&&y?function(e,s,t,{defender:a,founder:n,hasDefender:o,head:r},i){const l=e.filter((e=>!o||!e.accountId.eq(a))).map((({accountId:e,isDefenderVoter:a,isSuspended:o,payouts:l,strikes:c})=>{const d=e.toString();return{accountId:e,isCandidateVoter:t.includes(d),isDefenderVoter:a,isFounder:!!n?.eq(e),isHead:!!r?.eq(e),isSkeptic:s.includes(d),isSuspended:o,isWarned:!o&&c.gt(i),key:d,payouts:l,strikes:c}})).sort(re);return[l,l.reduce(((e,{payouts:s})=>s.reduce(((e,[,s])=>e.iadd(s)),e)),new(d())(0))]}(f,v,y,b,c.consts.society.maxStrikes.mul(u.um).div(u.Jo)):[void 0,void 0]),[c,b,f,v,y]),N=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")},{count:m,name:"candidates",text:t("Candidates")},{name:"suspended",text:t("Suspended")}]),[m,t]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,items:N}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/candidates`,children:(0,a.jsx)(I,{allMembers:h,candidates:j,isMember:x,ownMembers:g})}),(0,a.jsx)(o.AW,{path:`${e}/suspended`,children:(0,a.jsx)(K,{})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(J,{info:b,isMember:x,mapMembers:C,ownMembers:g,payoutTotal:w})})]})]})}))},58900:(e,s,t)=>{t.d(s,{Z:()=>o});var a=t(90778),n=t(9118);const o=(0,t(11677).e)("useCounter",(function(){const{api:e}=(0,a.h)();return(0,n.W7)(e.query.society?.candidates)?.length||0}))},27960:(e,s,t)=>{t.d(s,{Z:()=>l});var a=t(52322),n=t(2784),o=t(24732),r=t(57272);const i=o.zo.div`
  font-size: var(--font-size-small);
  padding: 1rem 0.5rem;
  text-align: center;

  .ui--Badge, .ui--Tag {
    margin-right: 0.5rem;
  }

  span {
    vertical-align: middle;

    * {
      vertical-align: middle;
    }

    + span {
      margin-left: 1rem;
    }
  }
`,l=n.memo((function({className:e,isRelay:s,minCommission:t}){const{t:n}=(0,r.$)();return(0,a.jsxs)(i,{className:e,children:[(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"blue",icon:"chevron-right"}),(0,a.jsx)("span",{children:n("Next session")})]}),t&&(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"red",icon:"cancel"}),(0,a.jsx)("span",{children:n("Chilled")})]}),s&&(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"purple",icon:"vector-square"}),(0,a.jsx)("span",{children:n("Para validator")})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"green",info:"5"}),(0,a.jsx)("span",{children:n("Produced blocks")})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"green",icon:"envelope"}),(0,a.jsx)("span",{children:n("Online message")})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"green",icon:"hand-paper"}),(0,a.jsx)("span",{children:n("Nominating")})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"red",icon:"balance-scale-right"}),(0,a.jsx)("span",{children:n("Oversubscribed")})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"red",icon:"skull-crossbones"}),(0,a.jsx)("span",{children:n("Slashed")})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Ct,{color:"red",icon:"user-slash"}),(0,a.jsx)("span",{children:n("Blocks nominations")})]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(o.Vp,{color:"lightgrey",label:"1,220"}),(0,a.jsx)("span",{children:n("Era points")})]})]})}))},37457:(e,s,t)=>{t.d(s,{Z:()=>la});var a=t(52322),n=t(2784),o=t(7267),r=t(75030),i=t(65857),l=t(24732),c=t(90778),d=t(34814),u=t(54131),m=t(9118),h=t(54890),p=t(12213),x=t(43223),g=t(33661),b=t(58607),f=t(48801),j=t.n(f),v=t(95292),y=t(57272);const C=n.memo((function({isInElection:e}){const{t:s}=(0,y.$)();return e?(0,a.jsx)(l.Pd,{className:"warning centered",content:s("There is currently an ongoing election for new validator candidates. As such staking operations are not permitted.")}):null}));var w=t(86135),N=t(38894),k=t(14681),S=t(11677);const I={transform:e=>e.isNone?0:e.unwrap().prior.length+1},A=(0,S.e)("useSlashingSpans",(function(e){const{api:s}=(0,c.h)();return(0,m.W7)(s.query.staking.slashingSpans,[e],I)||0}));var E=t(36609),M=t(92730);function P(e){let s=(e.mul(v.D_).div(v.aP.pow(new(j())(M.a.getDefaults().decimals))).toNumber()/1e3).toFixed(3);for(;1!==s.length&&[".","0"].includes(s[s.length-1]);){const e=s.endsWith(".");if(s=s.substring(0,s.length-1),e)break}return s}const T=n.memo((function({currentAmount:e,isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:r,onError:i,stashId:d,value:u}){const{t:h}=(0,y.$)(),{api:p}=(0,c.h)(),x=(0,m.W7)(p.derive.balances?.all,[d]),[{error:g,warning:b},f]=(0,n.useState)({error:null,warning:null});return(0,n.useEffect)((()=>{if(x&&u){const a=u.add(e||v.nw),n=p.consts.balances.existentialDeposit,l=x.freeBalance.sub(n.divn(2));let c=null,d=null;a.gte(l)?d=h("The specified value is large and may not allow enough funds to pay future transaction fees."):a.lt(n)?c=h("The bonded amount is less than the minimum bond amount of {{existentialDeposit}}",{replace:{existentialDeposit:P(n)}}):s?o&&a.lt(o)?c=h("The bonded amount is less than the minimum threshold of {{minBond}} for nominators",{replace:{minBond:(0,M.a)(o)}}):t&&a.lt(t)&&(d=h("The bonded amount is less than the current active minimum nominated amount of {{minNomination}} and depending on the network state, may not be selected to participate",{replace:{minNomination:(0,M.a)(t)}})):r&&a.lt(r)&&(c=h("The bonded amount is less than the minimum threshold of {{minBond}} for validators",{replace:{minBond:(0,M.a)(r)}})),f((e=>{const s=e.error!==c?c:e.error,t=e.warning!==d?d:e.warning;return i(s||t?{error:s,warning:t}:null),{error:s,warning:t}}))}}),[p,e,s,t,o,r,i,x,h,u]),g?(0,a.jsx)(l.oy,{content:g}):b?(0,a.jsx)(l.Pd,{content:b}):null})),D=n.memo((function({controllerId:e,onClose:s,stakingInfo:t,stashId:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),[d,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(),x=(0,m.W7)(i.derive.balances?.all,[o]),g=(0,n.useMemo)((()=>t&&t.stakingLedger?.active?.unwrap()),[t]),b=(0,n.useMemo)((()=>function(e,s,t){if(s&&s.stakingLedger&&t){const a=(s.unlocking||[]).reduce(((e,{value:s})=>e.iadd(s)),new(j())(0)),n=s.redeemable||v.nw,o=t.freeBalance.sub(s.stakingLedger.active?.unwrap()||v.nw).sub(a).sub(n);return o.gt(e.consts.balances.existentialDeposit)?o.sub(e.consts.balances.existentialDeposit):v.nw}return null}(i,t,x)),[i,t,x]);return(0,a.jsxs)(l.u_,{header:r("Bond more funds"),onClose:s,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsx)(l.u_.Columns,{hint:r("Since this transaction deals with funding, the stash account will be used."),children:(0,a.jsx)(l.rp,{defaultValue:o,isDisabled:!0,label:r("stash account")})}),b&&(0,a.jsxs)(l.u_.Columns,{hint:r("The amount placed at-stake should allow some free funds for future transactions."),children:[(0,a.jsx)(l.H,{autoFocus:!0,defaultValue:b,isError:!!d?.error||!h||h.isZero(),label:r("additional funds to bond"),labelExtra:(0,a.jsx)(E.Z,{label:(0,a.jsx)("span",{className:"label",children:r("balance")}),params:o}),onChange:p}),(0,a.jsx)(T,{controllerId:e,currentAmount:g,onError:u,stashId:o,value:h})]})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:o,icon:"sign-in-alt",isDisabled:!h?.gt(v.nw)||!!d?.error,label:r("Bond more"),onStart:s,params:[h],tx:i.tx.staking.bondExtra})})]})}));var F=t(69187),V=t(48731),R=t(55858),q=t(6851),O=t(46186);const z={aura:["ed25519","sr25519"],babe:["sr25519"],gran:["ed25519"],imon:["ed25519","sr25519"],para:["sr25519"]},B=n.memo((function({onClose:e}){const{t:s}=(0,y.$)(),{queueRpc:t}=(0,w.L)(),[o,r]=(0,n.useState)("sr25519"),[i,c]=(0,n.useState)("0x"),[d,u]=(0,n.useState)(""),[m,h]=(0,n.useState)("babe"),p=(0,n.useRef)([{text:s("Aura"),value:"aura"},{text:s("Babe"),value:"babe"},{text:s("Grandpa"),value:"gran"},{text:s("I'm Online"),value:"imon"},{text:s("Parachains"),value:"para"}]);(0,n.useEffect)((()=>{r(z[m][0])}),[m]),(0,n.useEffect)((()=>{try{const{phrase:e}=(0,q.Q)(d);(0,V.hu)((0,O.S)(e),"Invalid mnemonic phrase"),c((0,R.c)(F.Nn.createFromUri(d,{},o).publicKey))}catch(e){c("0x")}}),[o,d]);const x=(0,n.useCallback)((()=>t({rpc:{method:"insertKey",section:"author"},values:[m,d,i]})),[m,i,t,d]),g=(0,n.useMemo)((()=>z[m].map((e=>({text:s("ed25519"===e?"ed25519, Edwards":"sr15519, Schnorrkel"),value:e})))),[m,s]);return(0,a.jsxs)(l.u_,{header:s("Inject Keys"),onClose:e,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsxs)(l.u_.Columns,{hint:s("The seed and derivation path will be submitted to the validator node. this is an advanced operation, only to be performed when you are sure of the security and connection risks."),children:[(0,a.jsx)(l.II,{autoFocus:!0,isError:66!==i.length,label:s("suri (seed & derivation)"),onChange:u,value:d}),(0,a.jsx)(l.Pd,{content:s("This operation will submit the seed via an RPC call. Do not perform this operation on a public RPC node, but ensure that the node is local, connected to your validator and secure.")})]}),(0,a.jsxs)(l.u_.Columns,{hint:s("The key type and crypto type to use for this key. Be aware that different keys have different crypto requirements. You should be familiar with the type requirements for the different keys."),children:[(0,a.jsx)(l.Lt,{label:s("key type to set"),onChange:h,options:p.current,value:m}),(0,a.jsx)(l.Lt,{isDisabled:1===g.length,label:s("crypto type to use"),onChange:r,options:g,value:o})]}),(0,a.jsx)(l.u_.Columns,{hint:s("This pubic key is what will be visible in your queued keys list. It is generated based on the seed and the crypto used."),children:(0,a.jsx)(l.II,{isDisabled:!0,label:s("generated public key"),value:i})})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.zx,{icon:"sign-in-alt",label:s("Submit key"),onClick:x})})]})})),$=n.memo((function({className:e="",controllerId:s,stashId:t}){const{t:n}=(0,y.$)();return t&&s?(0,a.jsxs)(l.u_.Columns,{className:e,hint:n("The stash that is to be affected. The transaction will be sent from the associated controller account."),children:[(0,a.jsx)(l.rp,{defaultValue:t,isDisabled:!0,label:n("stash account")}),(0,a.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:n("controller account")})]}):null})),L={withExposure:!0},H=n.memo((function({className:e="",controllerId:s,nominating:t,onClose:o,stashId:r}){const{t:i}=(0,y.$)(),{api:d}=(0,c.h)(),[u,h]=(0,n.useState)([]),[{kickTx:p},x]=(0,n.useState)({}),g=(0,m.W7)(d.derive.staking.query,[r,L]),b=(0,n.useMemo)((()=>g?.exposure?.others.map((({who:e})=>e.toString()))),[g]);return(0,n.useEffect)((()=>{try{x({kickTx:u.length?d.tx.staking.kick(u):null})}catch{x({kickTx:null})}}),[d,u]),(0,a.jsxs)(l.u_,{className:e,header:i("Remove nominees"),onClose:o,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsx)($,{controllerId:s,stashId:r}),b?(0,a.jsx)(l.m3,{available:b,availableLabel:i("existing/active nominators"),defaultValue:t,maxCount:128,onChange:h,valueLabel:i("nominators to be removed")}):(0,a.jsx)(l.$j,{label:i("Retrieving active nominators")})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:s,extrinsic:p,icon:"user-slash",isDisabled:!p,label:i("Remove"),onStart:o})})]})}));var _=t(3871),Z=t(74065);const W=(0,S.e)("useInactives",(function(e,s){const{api:t}=(0,c.h)(),a=(0,Z.X)(),[o,r]=(0,n.useState)({}),i=(0,m.W7)(t.derive.session.indexes);return(0,n.useEffect)((()=>{let n;return a.current&&s&&s.length&&i&&t.queryMulti([[t.query.staking.nominators,e]].concat(t.query.staking.erasStakers?s.map((e=>[t.query.staking.erasStakers,[i.activeEra,e]])):s.map((e=>[t.query.staking.stakers,e]))).concat(s.map((e=>[t.query.staking.slashingSpans,e]))),(([n,...o])=>{const l=o.slice(0,s.length),c=o.slice(s.length);a.current&&r(function(e,s,t,a,{activeEra:n},o,r){const i=e.consts.staking?.maxNominatorRewardedPerValidator,l=e.events.staking.SlashReported?[]:a.filter(((e,s)=>!t[s].isNone&&t[s].unwrap().lastNonzeroSlash.gt(o))),c=r.map((({others:e})=>e.sort(((e,s)=>(s.value?.unwrap()||v.nw).cmp(e.value?.unwrap()||v.nw))))).map(((e,t)=>!i||i.gtn(e.map((({who:e})=>e.toString())).indexOf(s))?null:a[t])).filter((e=>!!e&&!l.includes(e)));let d=r.map(((e,t)=>e.others.some((({who:e})=>e.eq(s)))?null:a[t])).filter((e=>!!e));const u=r.map(((e,s)=>e.total?.unwrap().isZero()||d.includes(a[s])&&o.gte(n)?a[s]:null)).filter((e=>!!e)).filter((e=>!l.includes(e)&&!c.includes(e))),m=a.filter((e=>!d.includes(e)&&!l.includes(e)&&!c.includes(e)));return d=d.filter((e=>!u.includes(e)&&!l.includes(e)&&!c.includes(e))),{nomsActive:m,nomsChilled:l,nomsInactive:d,nomsOver:c,nomsWaiting:u}}(t,e,c,s,i,n.unwrapOrDefault().submittedIn,l))})).then((e=>{n=e})).catch(console.error),()=>{n&&n()}}),[t,i,a,s,e]),o})),U={};function J(e,s=[],t){return s.length?[s.length,()=>{const n=function(e,s,t){if(!t?.validators)return U;const a={};return s.forEach((s=>{t.validators[s]?.others.some((t=>!(!t.who.eq(e)||!(0,_.S)(t.value)||(a[s]=t.value.toBn(),0))))})),a}(e,s,t);return s.map(((e,s)=>(0,a.jsx)(l.ax,{balance:n[e],value:e,withBalance:!!t&&!!n[e]},s)))}]:null}const G=n.memo((function({nominating:e,stashId:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),{nomsActive:r,nomsChilled:i,nomsInactive:d,nomsOver:u,nomsWaiting:h}=W(s,e),p=(0,m.W7)(o.query.staking&&o.derive.session?.indexes),x=(0,m.W7)((0,g.m)(o.query.staking.erasStakers)&&o.derive.staking.eraExposure,[p?.activeEra]),[b,f,j,v,C]=(0,n.useMemo)((()=>[J(s,r,x),J(s,i),J(s,d),J(s,u),J(s,h)]),[x,r,i,d,u,h,s]);return(0,a.jsxs)(a.Fragment,{children:[v&&(0,a.jsx)(l.n0,{className:"stakeOver",renderChildren:v[1],summary:t("Oversubscribed nominations ({{count}})",{replace:{count:v[0]}})}),b&&(0,a.jsx)(l.n0,{renderChildren:b[1],summary:t("Active nominations ({{count}})",{replace:{count:b[0]}})}),j&&(0,a.jsx)(l.n0,{renderChildren:j[1],summary:t("Inactive nominations ({{count}})",{replace:{count:j[0]}})}),f&&(0,a.jsx)(l.n0,{renderChildren:f[1],summary:t("Renomination required ({{count}})",{replace:{count:f[0]}})}),C&&(0,a.jsx)(l.n0,{renderChildren:C[1],summary:t("Waiting nominations ({{count}})",{replace:{count:C[0]}})}),r&&d&&0===r.length&&0!==d.length&&(0,a.jsx)(l.Pd,{content:t("This could mean your nomination has not been applied to any validator in the active set by the election algorithm or it has been applied against a validator who is either oversubscribed or chilled.")})]})})),Q="staking:favorites",Y=n.memo((function({className:e="",controllerId:s,poolId:t}){const{t:n}=(0,y.$)();return t&&s?(0,a.jsxs)(l.u_.Columns,{className:e,hint:n("The pool and pool member that is to be affected. The transaction will be sent from the associated pool member account."),children:[(0,a.jsx)(l.Rn,{defaultValue:t,isDisabled:!0,label:n("pool id")}),(0,a.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:n("member account")})]}):null})),K=l.zo.div`
  article.warning {
    margin-top: 0;
  }

  .auto--toggle {
    margin: 0.5rem 0 0;
    text-align: right;
    width: 100%;
  }

  .ui--Static .ui--AddressMini.padded.addressStatic {
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }

  .shortlist {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;

    .candidate {
      border: 1px solid #eee;
      border-radius: 0.25rem;
      margin: 0.25rem;
      padding-bottom: 0.25rem;
      padding-right: 0.5rem;
      position: relative;

      &::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        border-color: transparent;
        border-style: solid;
        border-radius: 0.25em;
        border-width: 0.25em;
      }

      &.isAye {
        background: #fff;
        border-color: #ccc;
      }

      &.member::after {
        border-color: green;
      }

      &.runnerup::after {
        border-color: steelblue;
      }

      .ui--AddressMini-icon {
        z-index: 1;
      }

      .candidate-right {
        text-align: right;
      }
    }
  }
`,X=n.memo((function({className:e="",controllerId:s,nominating:t,onChange:o,poolId:r,stashId:i,targets:{nominateIds:d=[]},withSenders:m}){const{t:h}=(0,y.$)(),{api:p}=(0,c.h)(),[x]=(0,u.r)(Q),[g,b]=(0,n.useState)(t||[]),[f]=(0,n.useState)((()=>{const e=[...x.filter((e=>d.includes(e))),...(t||[]).filter((e=>!x.includes(e)))];return e.concat(...d.filter((s=>!e.includes(s))))}));(0,n.useEffect)((()=>{try{o({nominateTx:g&&g.length?r?p.tx.nominationPools.nominate(r,g):p.tx.staking.nominate(g):null})}catch{o({nominateTx:null})}}),[p,o,r,g]);const j=p.consts.staking.maxNominations?p.consts.staking.maxNominations.toNumber():16;return(0,a.jsxs)(K,{className:e,children:[m&&(r?(0,a.jsx)(Y,{controllerId:s,poolId:r}):(0,a.jsx)($,{controllerId:s,stashId:i})),(0,a.jsxs)(l.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:h("Nominators can be selected manually from the list of all currently available validators.")}),(0,a.jsx)("p",{children:h("Once transmitted the new selection will only take effect in 2 eras taking the new validator election cycle into account. Until then, the nominations will show as inactive.")})]}),children:[(0,a.jsx)(l.m3,{available:f,availableLabel:h("candidate accounts"),defaultValue:t,maxCount:j,onChange:b,valueLabel:h("nominated accounts")}),(0,a.jsx)(l.Pd,{content:h("You should trust your nominations to act competently and honest; basing your decision purely on their current profitability could lead to reduced profits or even loss of funds.")})]})]})})),ee=(0,l.zo)(l.u_)`
  .nominatePartial {
    .ui--Static .ui--AddressMini .ui--AddressMini-info {
      max-width: 10rem;
      min-width: 10rem;
    }
  }
`,se=n.memo((function({className:e="",controllerId:s,nominating:t,onClose:o,poolId:r,stashId:i,targets:c}){const{t:d}=(0,y.$)(),[{nominateTx:u},m]=(0,n.useState)({});return(0,a.jsxs)(ee,{className:e,header:d("Nominate Validators"),onClose:o,size:"large",children:[(0,a.jsx)(l.u_.Content,{children:(0,a.jsx)(X,{className:"nominatePartial",controllerId:s,nominating:t,onChange:m,poolId:r,stashId:i,targets:c,withSenders:!0})}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:s,extrinsic:u,icon:"hand-paper",isDisabled:!u,label:d("Nominate"),onStart:o})})]})})),te=n.memo((function({controllerId:e,onClose:s,stakingInfo:t,stashId:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),[d,u]=(0,n.useState)(),m=(0,n.useMemo)((()=>t&&t.unlocking?t.unlocking.reduce(((e,{value:s})=>e.iadd(s)),new(j())(0)):v.nw),[t]);return(0,a.jsxs)(l.u_,{header:r("Bond more funds"),onClose:s,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsx)($,{controllerId:e,stashId:o}),m&&(0,a.jsx)(l.u_.Columns,{hint:r("The amount the is to be rebonded from the value currently unlocking, i.e. previously unbonded"),children:(0,a.jsx)(l.H,{autoFocus:!0,defaultValue:m,isError:!d||d.eqn(0)||d.gt(m),label:r("rebonded amount"),onChange:u})})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!d||d.isZero()||!m||d.gt(m),label:r("Rebond"),onStart:s,params:[d],tx:i.tx.staking.rebond})})]})})),ae={transform:e=>e.isSome?e.unwrap().toString():null},ne={transform:e=>e.isSome?e.unwrap().stash.toString():null},oe=n.memo((function({accountId:e,controllerId:s,defaultController:t,onError:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),d=(0,m.W7)(s?i.query.staking.bonded:null,[s],ae),u=(0,m.W7)(s?i.query.staking.ledger:null,[s],ne),h=(0,m.W7)(s?i.derive.balances?.all:null,[s]),[{error:p,isFatal:x},g]=(0,n.useState)({error:null,isFatal:!1});return(0,n.useEffect)((()=>{if(t!==s){let t=null,a=!1;d&&s!==e?(a=!0,t=r("A controller account should not map to another stash. This selected controller is a stash, controlled by {{bondedId}}",{replace:{bondedId:d}})):u?(a=!0,t=r("A controller account should not be set to manage multiple stashes. The selected controller is already controlling {{stashId}}",{replace:{stashId:u}})):h?.freeBalance.isZero()?(a=!0,t=r("The controller does not have sufficient funds available to cover transaction fees. Ensure that a funded controller is used.")):s===e&&(t=r("Distinct stash and controller accounts are recommended to ensure fund security. You will be allowed to make the transaction, but take care to not tie up all funds, only use a portion of the available funds during this period.")),o(t,a),g((e=>e.error!==t?{error:t,isFatal:a}:e))}}),[e,h,d,s,t,o,u,r]),p&&e?x?(0,a.jsx)(l.oy,{content:p}):(0,a.jsx)(l.Pd,{content:p}):null})),re=n.memo((function({defaultControllerId:e,onClose:s,stashId:t}){const{t:o}=(0,y.$)(),{api:r}=(0,c.h)(),[i,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null),h=(0,n.useCallback)(((e,s)=>d(s)),[]);return(0,a.jsxs)(l.u_,{header:o("Change controller account"),onClose:s,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsx)(l.u_.Columns,{hint:o("The stash account that is used. This will allow the controller to perform all non-funds related operations on behalf of the account."),children:(0,a.jsx)(l.rp,{isDisabled:!0,label:o("stash account"),value:t})}),(0,a.jsxs)(l.u_.Columns,{hint:o("The selected controller tied to this stash. Once set, this account will be able to control the actions performed by the stash account."),children:[(0,a.jsx)(l.rp,{defaultValue:e,label:o("controller account"),onChange:m,type:"account",value:u}),(0,a.jsx)(oe,{accountId:t,controllerId:u,defaultController:e,onError:h})]})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:t,icon:"sign-in-alt",isDisabled:!u||i,label:o("Set controller"),onStart:s,params:[u],tx:r.tx.staking.setController})})]})}));function ie(e){return function(e){return[{text:e("Stash account (increase the amount at stake)"),value:"Staked"},{text:e("Stash account (do not increase the amount at stake)"),value:"Stash"},{text:e("Controller account"),value:"Controller"}]}(e).concat({text:e("Specified payment account"),value:"Account"})}const le=n.memo((function({controllerId:e,defaultDestination:s,onClose:t,stashId:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),[d,u]=(0,n.useState)((()=>(s?.isAccount?"Account":s?.toString())||"Staked")),[h,p]=(0,n.useState)((()=>s?.isAccount?s.asAccount.toString():null)),x=(0,m.W7)(i.derive.balances?.all,[h]),g=(0,n.useMemo)((()=>ie(r)),[r]),b="Account"===d,f=b&&x&&x.accountId.eq(h)&&x.freeBalance.isZero();return(0,a.jsxs)(l.u_,{header:r("Bonding Preferences"),onClose:t,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsxs)(l.u_.Columns,{hint:r("The stash and controller pair as linked. This operation will be performed via the controller."),children:[(0,a.jsx)(l.rp,{defaultValue:o,isDisabled:!0,label:r("stash account")}),(0,a.jsx)(l.rp,{defaultValue:e,isDisabled:!0,label:r("controller account")})]}),(0,a.jsxs)(l.u_.Columns,{hint:r("All rewards will go towards the selected output destination when a payout is made."),children:[(0,a.jsx)(l.Lt,{defaultValue:s?.toString(),label:r("payment destination"),onChange:u,options:g,value:d}),b&&(0,a.jsx)(l.rp,{label:r("the payment account"),onChange:p,type:"account",value:h}),f&&(0,a.jsx)(l.oy,{content:r("The selected destination account does not exist and cannot be used to receive rewards")})]})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!e||b&&(!h||f),label:r("Set reward destination"),onStart:t,params:[b?{Account:h}:d],tx:i.tx.staking.setPayee})})]})}));var ce=t(74076);const de=new Uint8Array,ue=n.memo((function({className:e="",controllerId:s,onChange:t,stashId:o,withFocus:r,withSenders:i}){const{t:d}=(0,y.$)(),{api:u}=(0,c.h)(),[m,h]=(0,n.useState)(null);return(0,n.useEffect)((()=>{try{t({sessionTx:(0,ce.vq)(m)?u.tx.session.setKeys(m,de):null})}catch{t({sessionTx:null})}}),[u,m,t]),(0,a.jsxs)("div",{className:e,children:[i&&(0,a.jsxs)(l.u_.Columns,{hint:d("The stash and controller pair. This transaction, setting the session keys, will be sent from the controller."),children:[(0,a.jsx)(l.rp,{defaultValue:o,isDisabled:!0,label:d("stash account")}),(0,a.jsx)(l.rp,{className:"medium",defaultValue:s,isDisabled:!0,label:d("controller account")})]}),(0,a.jsx)(l.u_.Columns,{hint:d("The hex output from author_rotateKeys, as executed on the validator node. The keys will show as pending until applied at the start of a new session."),children:(0,a.jsx)(l.II,{autoFocus:r,isError:!m,label:d("Keys from rotateKeys"),onChange:h,placeholder:"0x..."})})]})})),me=n.memo((function({controllerId:e,onClose:s,stashId:t}){const{t:o}=(0,y.$)(),[{sessionTx:r},i]=(0,n.useState)({});return(0,a.jsxs)(l.u_,{header:o("Set Session Key"),onClose:s,size:"large",children:[(0,a.jsx)(l.u_.Content,{children:(0,a.jsx)(ue,{controllerId:e,onChange:i,stashId:t,withFocus:!0,withSenders:!0})}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:e,extrinsic:r,icon:"sign-in-alt",isDisabled:!r,label:o("Set Session Key"),onStart:s})})]})}));var he=t(65874);const pe=(0,S.e)("useUnbondDuration",(function(){const{api:e}=(0,c.h)(),s=(0,m.W7)(e.derive.session.info);return(0,n.useMemo)((()=>s&&s.sessionLength.gt(v.If)?s.eraLength.mul(e.consts.staking.bondingDuration):void 0),[e,s])})),xe=(0,l.zo)(l.u_)`
  .staking--Unbond--max > div {
    justify-content: flex-end;

    & .column {
      flex: 0;
    }
  }
`,ge=n.memo((function({controllerId:e,onClose:s,stakingLedger:t,stashId:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),d=pe(),[u]=(0,n.useState)((()=>t?.active?.unwrap()||null)),[m,h]=(0,n.useState)();return(0,a.jsxs)(xe,{header:r("Unbond funds"),onClose:s,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsxs)(l.u_.Columns,{hint:r("The stash and controller pair, here the controller will be used to send the transaction."),children:[(0,a.jsx)(l.rp,{defaultValue:o,isDisabled:!0,label:r("stash account")}),(0,a.jsx)(l.rp,{defaultValue:e,isDisabled:!0,label:r("controller account")})]}),(0,a.jsxs)(l.u_.Columns,{hint:r("The funds will only be available for withdrawal after the unbonding period, however will not be part of the staked amount after the next validator election. You can follow the unlock countdown in the UI."),children:[(0,a.jsx)(l.H,{autoFocus:!0,defaultValue:u,label:r("unbond amount"),labelExtra:(0,a.jsx)(b.Z,{label:(0,a.jsx)("span",{className:"label",children:r("bonded")}),value:u}),maxValue:u,onChange:h,withMax:!0}),d?.gtn(0)&&(0,a.jsx)(l.qG,{label:r("on-chain bonding duration"),children:(0,a.jsx)(he.Z,{value:d})})]})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:e,icon:"unlock",isDisabled:!m?.gt(v.nw),label:r("Unbond"),onStart:s,params:[m],tx:i.tx.staking.unbond})})]})}));var be=t(52107);const fe=new(j())(1e7),je=n.memo((function({className:e="",controllerId:s,minCommission:t,onChange:o,stashId:r,withFocus:i,withSenders:d}){const{t:u}=(0,y.$)(),{api:m}=(0,c.h)(),[h,p]=(0,n.useState)(v.If),[x,b]=(0,n.useState)(!0),f=(0,n.useMemo)((()=>t?(0,be.x)(t.div(fe),v.If):v.If),[t]),j=(0,n.useRef)([{text:u("Yes, allow nominations"),value:!0},{text:u("No, block all nominations"),value:!1}]);(0,n.useEffect)((()=>{try{o({validateTx:m.tx.staking.validate({blocked:!x,commission:h})})}catch{o({validateTx:null})}}),[m,x,h,o]);const C=(0,n.useCallback)((e=>e&&p(e.isZero()?v.If:e.mul(fe))),[]),w=!!t&&h.lt(t);return(0,a.jsxs)("div",{className:e,children:[d&&(0,a.jsxs)(l.u_.Columns,{hint:u("The stash and controller pair. This transaction, managing preferences, will be sent from the controller."),children:[(0,a.jsx)(l.rp,{defaultValue:r,isDisabled:!0,label:u("stash account")}),(0,a.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:u("controller account")})]}),(0,a.jsxs)(l.u_.Columns,{hint:u("The commission is deducted from all rewards before the remainder is split with nominators."),children:[(0,a.jsx)(l.Rn,{autoFocus:i,defaultValue:f,isError:w,isZeroable:!0,label:u("reward commission percentage"),maxValue:v.S8,onChange:C}),w&&(0,a.jsx)(l.oy,{content:u("The commission is below the on-chain minimum of {{p}}%",{replace:{p:(t.mul(v.S8).div(fe).toNumber()/100).toFixed(2)}})})]}),(0,g.m)(m.tx.staking.kick)&&(0,a.jsx)(l.u_.Columns,{hint:u("The validator can block any new nominations. By default it is set to allow all nominations."),children:(0,a.jsx)(l.Lt,{defaultValue:!0,label:u("allows new nominations"),onChange:b,options:j.current})})]})})),ve=n.memo((function({controllerId:e,minCommission:s,onClose:t,stashId:o}){const{t:r}=(0,y.$)(),[{validateTx:i},c]=(0,n.useState)({});return(0,a.jsxs)(l.u_,{header:r("Set validator preferences"),onClose:t,size:"large",children:[(0,a.jsx)(l.u_.Content,{children:(0,a.jsx)(je,{controllerId:e,minCommission:s,onChange:c,stashId:o,withFocus:!0,withSenders:!0})}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:e,extrinsic:i,icon:"certificate",isDisabled:!i,label:r("Validate"),onStart:t})})]})})),ye=n.memo((function({minBond:e,stakingInfo:s}){const{t}=(0,y.$)();return(0,n.useMemo)((()=>e&&s&&s.stakingLedger.active.unwrap().lt(e)),[e,s])?(0,a.jsx)(l.Pd,{content:t("Your bonded amount is below the on-chain minimum threshold of {{minBond}} and may be chilled. Bond extra funds to increase the bonded amount.",{replace:{minBond:(0,M.a)(e)}})}):null})),Ce=l.zo.tr`
  .ui--Button-Group {
    display: inline-block;
    margin-right: 0.25rem;
    vertical-align: inherit;
  }
`,we=n.memo((function({allSlashes:e,className:s="",info:{controllerId:t,destination:o,hexSessionIdNext:r,hexSessionIdQueue:i,isLoading:d,isOwnController:u,isOwnStash:h,isStashNominating:p,isStashValidating:x,nominating:b,sessionIds:f,stakingLedger:j,stashId:v},isDisabled:C,minCommission:S,targets:I}){const{t:E}=(0,y.$)(),{api:M}=(0,c.h)(),{queueExtrinsic:P}=(0,w.L)(),[T,F]=(0,N.O)(),[V,R]=(0,N.O)(),[q,O]=(0,N.O)(),[z,$]=(0,N.O)(),[L,_]=(0,N.O)(),[Z,W]=(0,N.O)(),[U,J]=(0,N.O)(),[Q,Y]=(0,N.O)(),[K,X]=(0,N.O)(),[ee,ae]=(0,N.O)(),{balancesAll:ne,spanCount:oe,stakingAccount:ie}=function(e,s){const t=(0,n.useMemo)((()=>[s]),[s]),a=(0,m.W7)(e.derive.balances?.all,t),o=(0,m.W7)(e.derive.staking.account,t);return{balancesAll:a,spanCount:A(s),stakingAccount:o}}(M,v),ce=(0,n.useMemo)((()=>function(e,s=[]){return s.map((([s,t])=>({era:s,slashes:t.filter((({others:s,validator:t})=>t.eq(e)||s.some((([s])=>s.eq(e)))))}))).filter((({slashes:e})=>e.length))}(v,e)),[e,v]),de=(0,n.useCallback)((()=>P({accountId:t,extrinsic:1===M.tx.staking.withdrawUnbonded.meta.args.length?M.tx.staking.withdrawUnbonded(oe):M.tx.staking.withdrawUnbonded()})),[M,t,P,oe]),ue=!!ie?.stakingLedger&&!ie.stakingLedger.active?.isEmpty;return(0,a.jsxs)(Ce,{className:s,children:[(0,a.jsx)("td",{className:"badge together",children:0!==ce.length&&(0,a.jsx)(l.Ct,{color:"red",hover:E("Slashed in era {{eras}}",{replace:{eras:ce.map((({era:e})=>(0,k.u)(e))).join(", ")}}),icon:"skull-crossbones"})}),(0,a.jsxs)("td",{className:"address",children:[(0,a.jsx)(l.N,{value:v}),T&&(0,a.jsx)(D,{controllerId:t,onClose:F,stakingInfo:ie,stashId:v}),V&&(0,a.jsx)(B,{onClose:R}),q&&t&&(0,a.jsx)(H,{controllerId:t,onClose:O,stashId:v}),z&&t&&(0,a.jsx)(se,{controllerId:t,nominating:b,onClose:$,stashId:v,targets:I}),L&&(0,a.jsx)(te,{controllerId:t,onClose:_,stakingInfo:ie,stashId:v}),U&&t&&(0,a.jsx)(re,{defaultControllerId:t,onClose:J,stashId:v}),Z&&t&&(0,a.jsx)(le,{controllerId:t,defaultDestination:o,onClose:W,stashId:v}),Q&&t&&(0,a.jsx)(me,{controllerId:t,onClose:Y,stashId:v}),K&&(0,a.jsx)(ge,{controllerId:t,onClose:X,stakingLedger:j,stashId:v}),ee&&t&&(0,a.jsx)(ve,{controllerId:t,minCommission:S,onClose:ae,stashId:v})]}),(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(l.ax,{value:t})}),(0,a.jsx)("td",{className:"start media--1200",children:o?.isAccount?(0,a.jsx)(l.ax,{value:o.asAccount}):o?.toString()}),(0,a.jsxs)("td",{className:"number",children:[(0,a.jsx)(l.d4,{stakingInfo:ie}),(0,a.jsx)(l.JM,{stakingInfo:ie}),(0,a.jsx)(l.by,{stakingInfo:ie})]}),x?(0,a.jsxs)("td",{className:"all",children:[(0,a.jsx)(l.hl,{address:v,withBalance:!1,withHexSessionId:"0x"!==r&&[i,r],withValidatorPrefs:!0}),(0,a.jsx)(ye,{minBond:I.minValidatorBond,stakingInfo:ie})]}):(0,a.jsx)("td",{className:"all expand",children:p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(G,{nominating:b,stashId:v}),(0,a.jsx)(ye,{minBond:I.minNominatorBond,stakingInfo:ie})]})}),(0,a.jsx)("td",{className:"button",children:!d&&(0,a.jsxs)(a.Fragment,{children:[p||x?(0,a.jsx)(l.cA,{accountId:t,icon:"stop",isDisabled:!u||C,label:E("Stop"),tx:M.tx.staking.chill},"stop"):(0,a.jsxs)(l.zx.Group,{children:[f.length&&"0x"!==r?(0,a.jsx)(l.zx,{icon:"certificate",isDisabled:!u||C||!ue,label:E("Validate"),onClick:ae},"validate"):(0,a.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:!u||C,label:E("Session Key"),onClick:Y},"set"),(0,a.jsx)(l.zx,{icon:"hand-paper",isDisabled:!u||C||!ue,label:E("Nominate"),onClick:$},"nominate")]}),(0,a.jsx)(l.GI,{isDisabled:C,value:(0,a.jsxs)(l.v2,{children:[(0,a.jsx)(l.v2.Item,{isDisabled:!h||!ne?.freeBalance.gtn(0),label:E("Bond more funds"),onClick:F}),(0,a.jsx)(l.v2.Item,{isDisabled:!u||!ie||!ie.stakingLedger||ie.stakingLedger.active?.isEmpty,label:E("Unbond funds"),onClick:X}),(0,a.jsx)(l.v2.Item,{isDisabled:!(u&&ie&&ie.unlocking&&ie.unlocking.length),label:E("Rebond funds"),onClick:_}),(0,a.jsx)(l.v2.Item,{isDisabled:!(u&&ie&&ie.redeemable&&ie.redeemable.gtn(0)),label:E("Withdraw unbonded funds"),onClick:de}),(0,a.jsx)(l.v2.Divider,{}),(0,a.jsx)(l.v2.Item,{isDisabled:!h,label:E("Change controller account"),onClick:J}),(0,a.jsx)(l.v2.Item,{isDisabled:!u,label:E("Change reward destination"),onClick:W}),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.v2.Item,{isDisabled:!u,label:E("Change validator preferences"),onClick:ae}),(0,g.m)(M.tx.staking.kick)&&(0,a.jsx)(l.v2.Item,{isDisabled:!u,label:E("Remove nominees"),onClick:O})]}),(0,a.jsx)(l.v2.Divider,{}),!p&&(0,a.jsx)(l.v2.Item,{isDisabled:!u,label:E("Change session keys"),onClick:Y}),p&&(0,a.jsx)(l.v2.Item,{isDisabled:!u||!I.validators?.length,label:E("Set nominees"),onClick:$}),!p&&(0,a.jsx)(l.v2.Item,{label:E("Inject session keys (advanced)"),onClick:R})]})},"settings")]})})]})})),Ne=n.memo((function({allSlashes:e,className:s,footer:t,isInElection:o,list:r,minCommission:i,targets:c}){const{t:d}=(0,y.$)(),u=(0,n.useRef)([[d("stashes"),"start",2],[d("controller"),"address"],[d("rewards"),"start media--1200"],[d("bonded"),"number"],[],[]]);return(0,a.jsx)(l.iA,{className:s,empty:r&&d("No funds staked yet. Bond funds to validate or nominate a validator"),footer:t,header:u.current,children:r?.map((s=>(0,a.jsx)(we,{allSlashes:e,info:s,isDisabled:o,minCommission:i,targets:c},s.stashId)))})})),ke={bondOwnTx:null,bondTx:null,controllerId:null,controllerTx:null,stashId:null},Se=n.memo((function({className:e="",isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:r,onChange:i}){const{t:d}=(0,y.$)(),{api:u}=(0,c.h)(),[h,p]=(0,n.useState)(),[x,g]=(0,n.useState)(null),[b,f]=(0,n.useState)(!1),[j,C]=(0,n.useState)(null),[w,N]=(0,n.useState)("Staked"),[k,S]=(0,n.useState)(null),[I,A]=(0,n.useState)(null),[M,P]=(0,n.useState)(null),D=(0,m.W7)(u.derive.balances?.all,[I]),F=(0,m.W7)(u.derive.balances?.all,[k]),V=pe(),R=(0,n.useMemo)((()=>ie(d)),[d]),q=(0,n.useCallback)(((e,s)=>f(s)),[]);(0,n.useEffect)((()=>{D&&P(D.freeBalance.gt(u.consts.balances.existentialDeposit)?D.freeBalance.sub(u.consts.balances.existentialDeposit):v.nw)}),[u,D]),(0,n.useEffect)((()=>{P(null)}),[I]),(0,n.useEffect)((()=>{const e="Account"===w?{Account:k}:w;i(h&&h.gtn(0)&&!x?.error&&!b&&j&&I?{bondOwnTx:u.tx.staking.bond(I,h,e),bondTx:u.tx.staking.bond(j,h,e),controllerId:j,controllerTx:u.tx.staking.setController(j),stashId:I}:ke)}),[u,h,x,b,j,w,k,I,i]);const O=!!h?.gtn(0),z="Account"===w,B=z&&F&&F.accountId.eq(k)&&F.freeBalance.isZero();return(0,a.jsxs)("div",{className:e,children:[(0,a.jsxs)(l.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:d("Think of the stash as your cold wallet and the controller as your hot wallet. Funding operations are controlled by the stash, any other non-funding actions by the controller itself.")}),(0,a.jsx)("p",{children:d("To ensure optimal fund security using the same stash/controller is strongly discouraged, but not forbidden.")})]}),children:[(0,a.jsx)(l.rp,{label:d("stash account"),onChange:A,type:"account",value:I}),(0,a.jsx)(l.rp,{label:d("controller account"),onChange:C,type:"account",value:j}),(0,a.jsx)(oe,{accountId:I,controllerId:j,onError:q})]}),M&&(0,a.jsxs)(l.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:d("The amount placed at-stake should not be your full available amount to allow for transaction fees.")}),(0,a.jsx)("p",{children:d("Once bonded, it will need to be unlocked/withdrawn and will be locked for at least the bonding duration.")})]}),children:[(0,a.jsx)(l.H,{autoFocus:!0,defaultValue:M,isError:!O||!!x?.error,label:d("value bonded"),labelExtra:(0,a.jsx)(E.Z,{label:(0,a.jsx)("span",{className:"label",children:d("balance")}),params:I}),onChange:p}),(0,a.jsx)(T,{controllerId:j,isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:r,onError:g,stashId:I,value:h}),V?.gtn(0)&&(0,a.jsx)(l.qG,{label:d("on-chain bonding duration"),children:(0,a.jsx)(he.Z,{value:V})})]}),(0,a.jsxs)(l.u_.Columns,{hint:d("Rewards (once paid) can be deposited to either the stash or controller, with different effects."),children:[(0,a.jsx)(l.Lt,{defaultValue:0,label:d("payment destination"),onChange:N,options:R,value:w}),z&&(0,a.jsx)(l.rp,{label:d("the payment account"),onChange:S,type:"account",value:k}),B&&(0,a.jsx)(l.oy,{content:d("The selected destination account does not exist and cannot be used to receive rewards")})]})]})})),Ie=[],Ae=n.memo((function({isInElection:e,targets:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),[r,i]=(0,N.O)(),[{bondOwnTx:d,bondTx:u,controllerId:m,controllerTx:h,stashId:p},x]=(0,n.useState)({}),[{nominateTx:b},f]=(0,n.useState)({}),[j,v]=(0,n.useState)(1),C=e||!(0,g.m)(o.tx.utility?.batch),w=(0,n.useCallback)((()=>v((e=>e+1))),[]),k=(0,n.useCallback)((()=>v((e=>e-1))),[]),S=(0,n.useCallback)((()=>{x({}),f({}),v(1),i()}),[i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.zx,{icon:"plus",isDisabled:C||!s.validators?.length,label:t("Nominator"),onClick:S},"new-nominator"),r&&(0,a.jsxs)(l.u_,{header:t("Setup Nominator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:j}}),onClose:S,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[1===j&&(0,a.jsx)(Se,{isNominating:!0,minNominated:s.minNominated,minNominatorBond:s.minNominatorBond,onChange:x}),m&&p&&2===j&&(0,a.jsx)(X,{controllerId:m,nominating:Ie,onChange:f,stashId:p,targets:s}),(0,a.jsx)(l.u_.Columns,{children:(0,a.jsx)(l.RN,{})})]}),(0,a.jsxs)(l.u_.Actions,{children:[(0,a.jsx)(l.zx,{icon:"step-backward",isDisabled:1===j,label:t("prev"),onClick:k}),2===j?(0,a.jsx)(l.cA,{accountId:p,icon:"sign-in-alt",isDisabled:!(u&&b&&p&&m),label:t("Bond & Nominate"),onStart:S,params:[p===m?[u,b]:[d,b,h]],tx:o.tx.utility.batchAll||o.tx.utility.batch}):(0,a.jsx)(l.zx,{icon:"step-forward",isDisabled:!u,label:t("next"),onClick:w})]})]})]})})),Ee=n.memo((function(){const{t:e}=(0,y.$)(),[s,t]=(0,N.O)(),[{bondTx:o,stashId:r},i]=(0,n.useState)({}),c=(0,n.useCallback)((()=>{i({}),t()}),[t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.zx,{icon:"plus",label:e("Stash"),onClick:c},"new-stash"),s&&(0,a.jsxs)(l.u_,{header:e("Bonding Preferences"),onClose:c,size:"large",children:[(0,a.jsx)(l.u_.Content,{children:(0,a.jsx)(Se,{onChange:i})}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:r,extrinsic:o,icon:"sign-in-alt",isDisabled:!o||!r,label:e("Bond"),onStart:c})})]})]})})),Me=n.memo((function({isInElection:e,minCommission:s,targets:t}){const{t:o}=(0,y.$)(),{api:r}=(0,c.h)(),[i,d]=(0,N.O)(),[{bondOwnTx:u,bondTx:m,controllerId:h,controllerTx:p,stashId:x},b]=(0,n.useState)({}),[{sessionTx:f},j]=(0,n.useState)({}),[{validateTx:v},C]=(0,n.useState)({}),[w,k]=(0,n.useState)(1),S=e||!(0,g.m)(r.tx.utility?.batch),I=(0,n.useCallback)((()=>k((e=>e+1))),[]),A=(0,n.useCallback)((()=>k((e=>e-1))),[]),E=(0,n.useCallback)((()=>{b({}),j({}),C({}),k(1),d()}),[d]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.zx,{icon:"plus",isDisabled:S,label:o("Validator"),onClick:E},"new-validator"),i&&(0,a.jsxs)(l.u_,{header:o("Setup Validator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:w}}),onClose:E,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[1===w&&(0,a.jsx)(Se,{minValidatorBond:t.minValidatorBond,onChange:b}),h&&x&&2===w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ue,{controllerId:h,onChange:j,stashId:x,withFocus:!0}),(0,a.jsx)(je,{controllerId:h,minCommission:s,onChange:C,stashId:x})]}),(0,a.jsx)(l.u_.Columns,{children:(0,a.jsx)(l.RN,{})})]}),(0,a.jsxs)(l.u_.Actions,{children:[(0,a.jsx)(l.zx,{icon:"step-backward",isDisabled:1===w,label:o("prev"),onClick:A}),2===w?(0,a.jsx)(l.cA,{accountId:x,icon:"sign-in-alt",isDisabled:!m||!f||!v,label:o("Bond & Validate"),onStart:E,params:[h===x?[m,f,v]:[u,f,v,p]],tx:r.tx.utility.batchAll||r.tx.utility.batch}):(0,a.jsx)(l.zx,{icon:"step-forward",isDisabled:!m,label:o("next"),onClick:I})]})]})]})}));var Pe=t(19042),Te=t(63985);const De="rewards",Fe=n.memo((function({className:e,controllerId:s,onClose:t,poolId:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),[d,u]=(0,n.useState)(De),[m,h]=(0,n.useState)(),p=(0,Te.Z)(s,m,v.nw),x=(0,n.useRef)([{text:r("Free balance"),value:"free"},{text:r("Pool rewards"),value:"rewards"}]);return(0,a.jsxs)(l.u_,{className:e,header:r("Bond extra into pool"),onClose:t,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsx)(Y,{controllerId:s,poolId:o}),(0,a.jsxs)(l.u_.Columns,{hint:r("You can either bond a specific amount from your free balance, or all of the accumulated rewards."),children:[(0,a.jsx)(l.Lt,{defaultValue:De,label:r("type of funds to bond"),onChange:u,options:x.current}),"free"===d&&(0,a.jsx)(l.H,{autoFocus:!0,isError:p,label:r("additional free funds to bond"),labelExtra:(0,a.jsx)(E.Z,{label:(0,a.jsx)("span",{className:"label",children:r("balance")}),params:s}),onChange:h})]})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:s,icon:"sign-in-alt",isDisabled:"free"===d&&p,label:r("Bond Extra"),onStart:t,params:["free"===d?{FreeBalance:m}:"Rewards"],tx:i.tx.nominationPools.bondExtra})})]})})),Ve=n.memo((function({className:e,controllerId:s,maxUnbond:t,onClose:o,poolId:r}){const{t:i}=(0,y.$)(),{api:d}=(0,c.h)(),[u,m]=(0,n.useState)(),h=pe(),p=!u||!t||u.gt(t);return(0,a.jsxs)(l.u_,{className:e,header:i("Unbond funds from pool"),onClose:o,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsx)(Y,{controllerId:s,poolId:r}),(0,a.jsxs)(l.u_.Columns,{hint:i("The amount to unbond. It should be less or equal to the full bonded amount."),children:[(0,a.jsx)(l.H,{autoFocus:!0,defaultValue:t,isError:p,label:i("amount to unbond"),labelExtra:(0,a.jsx)(b.Z,{label:(0,a.jsx)("span",{className:"label",children:i("bonded")}),value:t}),maxValue:t,onChange:m,withMax:!0}),h?.gtn(0)&&(0,a.jsx)(l.qG,{label:i("on-chain bonding duration"),children:(0,a.jsx)(he.Z,{value:h})})]})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:s,icon:"unlock",isDisabled:p,label:i("Unbond"),onStart:o,params:[s,u],tx:d.tx.nominationPools.unbond})})]})})),Re={transform:e=>e.unwrapOr(null)},qe=(0,S.e)("useAccountInfo",(function(e){const{api:s}=(0,c.h)(),t=(0,Z.X)(),[a,o]=(0,n.useState)(null),r=(0,m.W7)(s.query.nominationPools.poolMembers,[e],Re);return(0,n.useEffect)((()=>{r&&s.call.nominationPoolsApi&&s.call.nominationPoolsApi.pendingRewards(e).then((e=>t.current&&o({claimable:e,member:r}))).catch(console.error)}),[e,r,s,t]),a})),Oe=n.memo((function({accountId:e,className:s,info:{bonded:{roles:t},metadata:o,nominating:r,stashId:i},isFirst:d,poolId:u,sessionProgress:m,targets:h}){const{t:p}=(0,y.$)(),{api:x}=(0,c.h)(),g=A(i),{queueExtrinsic:f}=(0,w.L)(),[v,C]=(0,N.O)(),[S,I]=(0,N.O)(),[E,M]=(0,N.O)(),P=qe(e),T=(0,n.useMemo)((()=>m&&P&&P.member.unbondingEras&&!P.member.unbondingEras.isEmpty?function(e,s,{activeEra:t},{unbondingEras:a}){const n=[],o=new(j())(0);for(const[e,s]of a.entries())e.lte(t)?o.iadd(s):n.push({remainingEras:e.sub(t),value:s});return{accountId:e,controllerId:e,redeemable:o,stashId:s,unlocking:n}}(e,i,m,P.member):null),[P,e,i,m]),D=(0,n.useCallback)((()=>f({accountId:e,extrinsic:x.tx.nominationPools.claimPayout()})),[x,e,f]),F=(0,n.useCallback)((()=>f({accountId:e,extrinsic:x.tx.nominationPools.withdrawUnbonded(e,g)})),[x,e,g,f]),{isNominator:V}=(0,n.useMemo)((()=>function(e,{nominator:s,root:t}){return{isNominator:s.eq(e)||t.eq(e)}}(e,t)),[e,t]);return(0,a.jsxs)("tr",{className:s,children:[(0,a.jsx)("td",{className:"number",children:(0,a.jsx)("h1",{children:d&&(0,k.u)(u)})}),(0,a.jsx)("td",{className:"start",children:d&&o}),(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(l.N,{value:e})}),(0,a.jsx)("td",{className:"number",children:P&&(0,a.jsxs)(a.Fragment,{children:[!P.member.points.isZero()&&(0,a.jsx)(b.Z,{value:P.member.points}),T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.JM,{stakingInfo:T}),(0,a.jsx)(l.by,{isPool:!0,stakingInfo:T})]})]})}),(0,a.jsx)("td",{className:"number",children:P&&!P.claimable.isZero()&&(0,a.jsx)(b.Z,{value:P.claimable})}),(0,a.jsx)("td",{className:"number",children:d&&r&&(0,a.jsx)(G,{nominating:r,stashId:i})}),(0,a.jsxs)("td",{className:"button",children:[(0,a.jsx)(l.Ct,{color:V?"green":"transparent",icon:"hand-paper"}),v&&(0,a.jsx)(Fe,{controllerId:e,onClose:C,poolId:u}),S&&(0,a.jsx)(se,{controllerId:e,nominating:r,onClose:I,poolId:u,stashId:e,targets:h}),P&&E&&(0,a.jsx)(Ve,{controllerId:e,maxUnbond:P.member.points,onClose:M,poolId:u}),(0,a.jsx)(l.GI,{value:(0,a.jsxs)(l.v2,{children:[(0,a.jsx)(l.v2.Item,{label:p("Bond more funds"),onClick:C}),(0,a.jsx)(l.v2.Item,{isDisabled:!P||P.member.points.isZero(),label:p("Unbond funds"),onClick:M}),(0,a.jsx)(l.v2.Divider,{}),(0,a.jsx)(l.v2.Item,{isDisabled:!P||P.claimable.isZero(),label:p("Withdraw claimable"),onClick:D}),(0,a.jsx)(l.v2.Item,{isDisabled:!T||T.redeemable.isZero(),label:p("Withdraw unbonded"),onClick:F}),(0,a.jsx)(l.v2.Divider,{}),(0,a.jsx)(l.v2.Item,{isDisabled:!V,label:p("Set nominees"),onClick:I})]})},"settings")]})]})})),ze=n.memo((function({className:e,count:s,members:t,poolId:n,sessionProgress:o,targets:r}){const i=(0,Pe.Z)(n);return i?(0,a.jsx)(a.Fragment,{children:Object.keys(t).map(((t,l)=>(0,a.jsx)(Oe,{accountId:t,className:`${e||""} ${s%2?"isEven":"isOdd"}`,info:i,isFirst:0===l,poolId:n,sessionProgress:o,targets:r},`${n.toString()}:${t}`)))}):null})),Be=n.memo((function({className:e,list:s,targets:t}){const{t:o}=(0,y.$)(),{api:r}=(0,c.h)(),i=(0,m.W7)(r.derive.session.progress),d=(0,n.useRef)([[o("pools"),"start",2],[o("account"),"address"],[o("bonded")],[o("claimable")],[],[]]);return(0,a.jsx)(l.iA,{className:e,empty:s&&o("Not participating in any pools. Join a pool first."),header:d.current,children:s?.map((({members:e,poolId:s},n)=>(0,a.jsx)(ze,{count:n,members:e,poolId:s,sessionProgress:i,targets:t},s.toString())))})}));function $e({isStashNominating:e,isStashValidating:s}){return s?1:e?5:99}function Le(e,s){return $e(e)-$e(s)}function He(e,s){return s.filter((({isStashNominating:s,isStashValidating:t})=>{switch(e){case 1:return s;case 2:return t;case 3:return!s&&!t;default:return!0}}))}function _e(e,s){const t=function(e,{bondedNoms:s,bondedNone:t,bondedTotal:a,bondedVals:n}){switch(e){case 0:default:return a;case 1:return s;case 2:return n;case 3:return t}}(e,s);return t&&(0,a.jsx)(b.Z,{value:t})}const Ze=n.memo((function({className:e="",isInElection:s,minCommission:t,ownPools:o,ownStashes:r,targets:i}){const{t:d}=(0,y.$)(),{api:u}=(0,c.h)(),m=(0,x.g)(),[h,p]=(0,n.useState)(0),[g,b]=(0,n.useState)(0),f=(0,n.useRef)([{text:d("Stashed"),value:"stash"},{text:d("Pooled"),value:"pool"}]),w=(0,n.useRef)([{text:d("All stashes"),value:"all"},{text:d("Nominators"),value:"noms"},{text:d("Validators"),value:"vals"},{text:d("Inactive"),value:"chill"}]),N=(0,n.useMemo)((()=>function(e){if(!e)return{};const s=new(j())(0),t=new(j())(0),a=new(j())(0),n=new(j())(0);return e.forEach((({isStashNominating:e,isStashValidating:o,stakingLedger:r})=>{const i=r&&r.total?r.total.unwrap():v.nw;n.iadd(i),e?s.iadd(i):o?a.iadd(i):t.iadd(i)})),{bondedNoms:s,bondedNone:t,bondedTotal:n,bondedVals:a,foundStashes:e.sort(Le)}}(r)),[r]),[k,S]=(0,n.useMemo)((()=>[N.foundStashes&&He(g,N.foundStashes),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{colSpan:4}),(0,a.jsx)("td",{className:"number",children:_e(g,N)}),(0,a.jsx)("td",{colSpan:2})]},"footer")]),[N,g]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsxs)(l.zx.Group,{children:[u.consts.nominationPools&&(0,a.jsx)(l.tX,{onChange:p,options:f.current,value:h}),0===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.tX,{onChange:b,options:w.current,value:g}),(0,a.jsx)(Ae,{isInElection:s,targets:i}),(0,a.jsx)(Me,{isInElection:s,minCommission:t,targets:i}),(0,a.jsx)(Ee,{})]})]}),(0,a.jsx)(C,{isInElection:s}),0===h?(0,a.jsx)(Ne,{allSlashes:m,footer:S,isInElection:s,list:k,minCommission:t,targets:i}):(0,a.jsx)(Be,{allSlashes:m,list:o,targets:i})]})}));var We=t(79760);const Ue=(0,S.e)("useQueryModule",(function(){const{api:e}=(0,c.h)();return(0,n.useMemo)((()=>e.query.voterList||e.query.voterBagsList||e.query.bagsList),[e])})),Je={transform:e=>e.filter((e=>e.isSome)).map((e=>e.unwrap())).reduce(((e,s)=>{const t=s.bagUpper.toString();return e[t]||(e[t]=[]),e[t].push({node:s,stashId:s.id.toString()}),e}),{})},Ge=(0,S.e)("useBagsNodes",(function(e){const s=Ue(),[t,a]=(0,n.useState)(),o=(0,m.W7)(s.listNodes.multi,[e],Je);return(0,n.useEffect)((()=>{o&&a((e=>function(e,s){return Object.entries(s).reduce(((s,[t,a])=>(s[t]=e&&e[t]&&JSON.stringify(a)===JSON.stringify(e[t])?e[t]:a,s)),{})}(e,o)))}),[o]),t})),Qe=n.memo((function({bagUpper:e,stashIds:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),[r,i]=(0,n.useState)(null),[d,u]=(0,N.O)(),m=Ge(s),h=(0,n.useMemo)((()=>m?function(e,s){return Object.values(e[s.toString()]||{}).map((({stashId:e})=>e))}(m,e):[]),[e,m]),[p,x]=(0,n.useState)([]),g=(0,n.useMemo)((()=>p.map((e=>(o.tx.voterBagsList||o.tx.bagsList||o.tx.voterList).rebag(e)))),[o,p]),b=(0,We.b)(g);return h.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.zx,{icon:"refresh",label:t("Rebag {{count}}",{replace:{count:h.length}}),onClick:u}),d&&(0,a.jsxs)(l.u_,{header:t("Rebag dislocated entries"),onClose:u,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsx)(l.u_.Columns,{hint:t("The account that will submit the rebag transaction."),children:(0,a.jsx)(l.rp,{label:t("rebag from account"),onChange:i,type:"account"})}),(0,a.jsx)(l.u_.Columns,{hint:t("The accounts that will be rebagged as a result of this operation."),children:(0,a.jsx)(l.m3,{available:h,availableLabel:t("unselected"),defaultValue:h,maxCount:Number.MAX_SAFE_INTEGER,onChange:x,valueLabel:t("to rebag")})})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:r,extrinsic:b,icon:"refresh",isDisabled:!b||!p.length,label:t("Rebag"),onStart:u})})]})]}):null})),Ye=l.zo.div`
  .ui--AddressMini {
    vertical-align: middle;
  }
`,Ke=n.memo((function({bagLower:e,bagUpper:s,className:t,isLoading:o,list:r,stashId:i}){const{t:d}=(0,y.$)(),{api:u}=(0,c.h)(),{canJump:m,jumpCount:h,stashInfo:p}=(0,n.useMemo)((()=>function(e,s,t,a=[]){const n=a.find((e=>e.stashId===t))||null,o=n&&n.jump&&a.find((e=>e.stashId===n.jump))||null;return{canJump:!!o,jumpCount:n&&o?n.index-o.index:0,stashInfo:n}}(0,0,i,r)),[e,s,r,i]);return(0,a.jsxs)(Ye,{className:t,children:[(0,a.jsx)(l.ax,{value:i,withBonded:!0}),p&&(m?(0,a.jsx)(l.cA,{accountId:p.stashId,icon:"caret-up",isDisabled:o,label:d("Move up {{jumpCount}}",{replace:{jumpCount:h}}),params:[p.jump],tx:(u.tx.voterBagsList||u.tx.bagsList||u.tx.voterList).putInFrontOf}):null)]})})),Xe=[null,{isCompleted:!1,list:[]}],es=[],ss=(0,S.e)("useBagEntries",(function(e,s){const t=Ue(),[[a,{isCompleted:o,list:r}],i]=(0,n.useState)(Xe),l=(0,m.W7)(!!a&&t.listNodes,[a]);return(0,n.useEffect)((()=>i(e&&s?[e,{isCompleted:!1,list:[e]}]:[null,{isCompleted:!0,list:[]}])),[e,s]),(0,n.useEffect)((()=>{if(l&&l.isSome){const{next:e}=l.unwrap();if(e.isSome){const s=e.unwrap();i((([,{list:e}])=>[s,{isCompleted:!1,list:[...e,s]}]))}else i((([e,{list:s}])=>[e,{isCompleted:!0,list:s}]))}}),[l]),[o,o?r:es]})),ts={transform:e=>{const s=e.map((({stakingLedger:e,stashId:s},t)=>({bonded:e.active.unwrap(),index:t,jump:null,stashId:s.toString()})));return s.map((e=>{const t=s.find((({bonded:s,index:t})=>t<e.index&&s.lt(e.bonded)));return t&&(e.jump=t.stashId),e}))}},as=(0,S.e)("useBonded",(function(e){const{api:s}=(0,c.h)();return(0,m.W7)(e&&0!==e.length&&s.derive.staking.accounts,[e],ts)})),ns=n.memo((function({bagLower:e,bagUpper:s,info:t,nodesOwn:o}){const[[r,i],c]=(0,n.useState)([null,0]),[d,u]=(0,n.useState)([]),[m,h]=(0,n.useState)(!0),[p,x]=ss(r,i),g=as(x);return(0,n.useEffect)((()=>{t&&o&&c((([,e])=>[t.head.unwrapOr(null),++e]))}),[t,o]),(0,n.useEffect)((()=>{h(!(!o||!o.length||p&&g))}),[g,p,o]),(0,n.useEffect)((()=>{!m&&g&&u(function(e,s,t){return e.filter((({bonded:e})=>e.gt(s)||e.lt(t))).map((({stashId:e})=>e))}(g,s,e))}),[e,s,g,m]),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"number"}),(0,a.jsx)(l.iA.Column.Balance,{value:s}),(0,a.jsx)(l.iA.Column.Balance,{value:e}),(0,a.jsx)("td",{className:"address",children:t.head.isSome&&(0,a.jsx)(l.ax,{value:t.head.unwrap()})}),(0,a.jsx)("td",{className:"address",children:t.tail.isSome&&(0,a.jsx)(l.ax,{value:t.tail.unwrap()})}),(0,a.jsx)("td",{className:"address",children:o?.map((({stashId:t})=>(0,a.jsx)(Ke,{bagLower:e,bagUpper:s,isLoading:m,list:g,stashId:t},t)))}),(0,a.jsx)("td",{className:"number",children:m?(0,a.jsx)("span",{className:"--tmp",children:"99"}):x.length?(0,k.u)(x.length):null}),(0,a.jsx)("td",{className:"button",children:!m&&(0,a.jsx)(Qe,{bagLower:e,bagUpper:s,stashIds:d})})]})}));var os=t(65968);const rs=n.memo((function({bags:e,className:s="",mapOwn:t}){const{t:o}=(0,y.$)(),r=Ue(),i=(0,m.W7)(r.counterForListNodes),c=(0,n.useMemo)((()=>t&&Object.values(t).reduce(((e,s)=>e+s.length),0)),[t]);return(0,a.jsxs)(l.Ty,{className:s,children:[(0,a.jsx)(l.Jy,{label:o("total bags"),children:e?(0,k.u)(e.length):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsxs)("section",{children:[(0,a.jsx)(l.Jy,{label:o("total nodes"),children:t?(0,k.u)(i):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(l.Jy,{label:o("my nodes"),children:(0,os.h)(c)?(0,k.u)(c):(0,a.jsx)("span",{className:"--tmp",children:"99"})})]})]})}));var is=t(12298);const ls={transform:e=>e.map((({args:[e]})=>e))},cs={transform:([[e],s])=>{const t=e.map(((e,t)=>[e,s[t]])).filter((([,e])=>e.isSome)).sort((([e],[s])=>s.cmp(e))).map((([e,s],t)=>({bagLower:v.nw,bagUpper:e,index:t,info:s.unwrap(),key:e.toString()})));return t.map(((e,s)=>s===t.length-1?e:{...e,bagLower:t[s+1].bagUpper}))},withParamsTransform:!0},ds=(0,S.e)("useBagsList",(function(){const e=Ue(),[s,t]=(0,n.useState)(),a=(0,is.k)(e.listBags,[],ls),o=(0,m.W7)(a&&0!==a.length&&e.listBags.multi,[a],cs);return(0,n.useEffect)((()=>{o&&t((e=>function(e,s){return e&&s.length===e.length?s.map(((s,t)=>JSON.stringify(s)===JSON.stringify(e[t])?e[t]:s)):s}(e,o)))}),[o]),s})),us=n.memo((function({className:e,ownStashes:s}){const{t}=(0,y.$)(),o=(0,n.useMemo)((()=>s?s.map((({stashId:e})=>e)):[]),[s]),[r,i]=(0,n.useState)((()=>o.length?0:1)),c=ds(),d=Ge(o),u=(0,n.useRef)([[t("bags")],[t("max"),"number"],[t("min"),"number"],[t("first"),"address"],[t("last"),"address"],[t("stashes"),"address"],[t("nodes"),"number"],[void 0,"mini"]]),m=(0,n.useMemo)((()=>[{isDisabled:!o.length,text:t("My bags"),value:"mine"},{text:t("All bags"),value:"all"}]),[o,t]),h=(0,n.useMemo)((()=>{return c&&d&&(e=d,s=!r,c.map((s=>[s,e[s.key]])).filter((([,e])=>!s||!!e)));var e,s}),[c,r,d]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(rs,{bags:c,mapOwn:d}),(0,a.jsx)(l.zx.Group,{children:(0,a.jsx)(l.tX,{onChange:i,options:m,value:r})}),(0,a.jsxs)(l.Pd,{className:"warning centered",withIcon:!1,children:[(0,a.jsx)("p",{children:t("The All bags list is composed of bags that each describe a range of active bonded funds of the nominators. In each bag is a list of nodes that correspond to a nominator and their staked funds.")}),(0,a.jsx)("p",{children:t("Within the context of a single bag, nodes are not sorted by their stake, but instead placed in insertion order. In other words, the most recently inserted node will be the last node in the bag, regardless of stake. Events like staking rewards or slashes do not automatically put you in a different bag. The bags-list pallet comes with an important permissionless extrinsic: rebag. This allows anyone to specify another account that is in the wrong bag, and place it in the correct one.")})]}),(0,a.jsx)(l.iA,{empty:h&&t("No available bags"),emptySpinner:t("Retrieving all available bags, this will take some time"),header:u.current,children:h?.map((([{bagLower:e,bagUpper:s,index:t,info:n,key:o},r])=>(0,a.jsx)(ns,{bagLower:e,bagUpper:s,index:t,info:n,nodesOwn:r},o)))})]})}));var ms=t(56360),hs=t(59118);function ps(e,s){return s.sort(((e,s)=>e.era.cmp(s.era))).map((({era:s,validatorId:t})=>e.tx.staking.payoutStakers(t,s)))}function xs(e,s){if(!Array.isArray(s)){const{eras:t,validatorId:a}=s;return 1===t.length?[e.tx.staking.payoutStakers(a,t[0].era)]:ps(e,t.map((e=>({era:e.era,validatorId:a}))))}return 1===s.length?xs(e,s[0]):ps(e,s.reduce(((e,{eras:s,validatorId:t})=>(s.forEach((({era:s})=>{e.push({era:s,validatorId:t})})),e)),[]))}const gs=(0,l.zo)(l.u_)`
  .ui--AddressMini.padded.addressStatic {
    display: inline-block;
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }
`,bs=n.memo((function({className:e,isAll:s,isDisabled:t,payout:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),[d,u]=(0,N.O)(),[m,h]=(0,n.useState)(null),[p,x]=(0,n.useState)(null),g=(0,n.useMemo)((()=>({max:2304/(i.consts.staking.maxNominatorRewardedPerValidator?.toNumber()||64)})),[i]),b=(0,We.b)(p,g);(0,n.useEffect)((()=>{o&&x((()=>xs(i,o)))}),[i,o]);const f=!o||Array.isArray(o)&&0===o.length;return(0,a.jsxs)(a.Fragment,{children:[o&&d&&(0,a.jsxs)(gs,{className:e,header:r("Payout all stakers"),onClose:u,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsx)(l.u_.Columns,{hint:r("Any account can request payout for stakers, this is not limited to accounts that will be rewarded."),children:(0,a.jsx)(l.rp,{label:r("request payout from"),onChange:h,type:"account",value:m})}),(0,a.jsx)(l.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:r("All the listed validators and all their nominators will receive their rewards.")}),(0,a.jsx)("p",{children:r("The UI puts a limit of 40 payouts at a time, where each payout is a single validator for a single era.")})]}),children:Array.isArray(o)?(0,a.jsx)(l.qG,{label:r("payout stakers for (multiple)"),value:o.map((({validatorId:e})=>(0,a.jsx)(l.ax,{className:"addressStatic",value:e},e)))}):(0,a.jsx)(l.rp,{defaultValue:o.validatorId,isDisabled:!0,label:r("payout stakers for (single)")})})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:m,extrinsic:b,icon:"credit-card",isDisabled:!b||!b.length||!m,label:r("Payout"),onStart:u})})]}),(0,a.jsx)(l.zx,{icon:"credit-card",isDisabled:t||f,label:s||Array.isArray(o)?r("Payout all"):r("Payout"),onClick:u})]})})),fs=(0,S.e)("useEraBlocks",(function(e,s){const{api:t}=(0,c.h)(),a=(0,m.W7)(t.derive.session.progress),o=(0,m.W7)(t.query.staking.forceEra);return(0,n.useMemo)((()=>e&&s&&o&&a&&a.sessionLength.gt(v.If)?(o.isForceAlways?a.sessionLength:a.eraLength).mul(e.sub(a.activeEra).iadd(s).iadd(v.If)).isub(o.isForceAlways?a.sessionProgress:a.eraProgress):void 0),[s,o,e,a])}));function js(e){return!Array.isArray(e)}function vs(e){if(!e.length)return"";const s=e.sort(((e,s)=>e.cmp(s))).reduce(((e,s)=>{if(0===e.length)return[s];{const t=e[e.length-1];js(t)?t.add(v.If).eq(s)?e[e.length-1]=[t,s]:e.push(s):t[1].add(v.If).eq(s)?t[1]=s:e.push(s)}return e}),[]).map((e=>js(e)?(0,k.u)(e):`${(0,k.u)(e[0])}-${(0,k.u)(e[1])}`));return(0,a.jsx)(a.Fragment,{children:s.map(((e,s)=>(0,a.jsxs)(n.Fragment,{children:[0!==s&&", ",(0,a.jsx)("span",{children:e})]},e)))})}const ys=n.memo((function({className:e="",historyDepth:s,payout:{available:t,rewards:o,stashId:r}}){const[{eraStr:i,oldestEra:c},d]=(0,n.useState)({eraStr:""}),u=fs(s,c);return(0,n.useEffect)((()=>{o&&d({eraStr:vs(o.map((({era:e})=>e))),oldestEra:o[0]?.era})}),[o]),(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)("td",{className:"address",colSpan:2,children:(0,a.jsx)(l.N,{value:r})}),(0,a.jsx)("td",{className:"start",children:(0,a.jsx)("span",{className:"payout-eras",children:i})}),(0,a.jsx)(l.iA.Column.Balance,{value:t}),(0,a.jsx)("td",{className:"number",children:(0,a.jsx)(he.Z,{className:u?"":"--tmp",value:u||v.uy})}),(0,a.jsx)("td",{className:"button",colSpan:3})]})})),Cs=n.memo((function({className:e="",historyDepth:s,isDisabled:t,payout:o}){const{t:r}=(0,y.$)(),{eraStr:i,nominators:c,numNominators:d,oldestEra:u}=(0,n.useMemo)((()=>function(e){const s=vs(e.eras.map((({era:e})=>e))),t=e.eras.reduce(((e,{stashes:s})=>(Object.entries(s).forEach((([s,t])=>{e[s]?e[s]=e[s].add(t):e[s]=t})),e)),{});return{eraStr:s,nominators:t,numNominators:Object.keys(t).length,oldestEra:e.eras[0]?.era}}(o)),[o]),m=fs(s,u);return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)("td",{className:"address",colSpan:2,children:(0,a.jsx)(l.N,{value:o.validatorId})}),(0,a.jsx)("td",{className:"start",children:(0,a.jsx)("span",{className:"payout-eras",children:i})}),(0,a.jsx)(l.iA.Column.Balance,{value:o.available}),(0,a.jsx)("td",{className:"number",children:m&&(0,a.jsx)(he.Z,{value:m})}),(0,a.jsx)("td",{className:"expand",colSpan:2,children:(0,a.jsx)(l.xH,{summary:r("{{count}} own stashes",{replace:{count:d}}),children:Object.entries(c).map((([e,s])=>(0,a.jsx)(l.ax,{balance:s,value:e,withBalance:!0},e)))})}),(0,a.jsx)("td",{className:"button",children:(0,a.jsx)(bs,{isDisabled:t,payout:o})})]})})),ws=new(j())(864e5);const Ns=l.zo.div`
  .payout-eras {
    padding-left: 0.25rem;
    vertical-align: middle;

    span {
      white-space: nowrap;
    }
  }
`,ks=n.memo((function({className:e="",historyDepth:s,isInElection:t,ownPools:o,ownValidators:r}){const{t:i}=(0,y.$)(),{api:d}=(0,c.h)(),[u]=(0,n.useState)((()=>0!==r.length)),[h,p]=(0,n.useState)((()=>u?0:1)),[x,g]=(0,n.useState)(0),b=(0,m.W7)(d.derive.session.eraLength),f=(0,ms.n)(),w=(0,n.useMemo)((()=>o&&o.map((({stashId:e})=>e))),[o]),N=(0,n.useMemo)((()=>function(e,s,t,a){if(!s||!t)return[{text:"",value:0}];const n=ws.div(e),o=s.mul(t),r=[],i=new(j())(2);for(;;){const e=n.mul(i);if(e.gte(o))break;r.push({text:a("{{days}} days",{replace:{days:i.toString()}}),value:e.div(s).toNumber()}),i.imul(v.Jo)}return r.push({text:a("Max, {{eras}} eras",{replace:{eras:t.toNumber()}}),value:t.toNumber()}),r}(f,b,s,i)),[f,b,s,i]),{allRewards:k,isLoadingRewards:S}=(0,hs.Q)(N[x].value,h?void 0:r,w),{stashAvail:I,stashes:A,valAvail:E,validators:M}=(0,n.useMemo)((()=>function(e){if(e){const s=function(e){return Object.entries(e).map((([e,s])=>({available:s.reduce(((e,{validators:s})=>Object.values(s).reduce(((e,{value:s})=>e.iadd(s)),e)),new(j())(0)),rewards:s,stashId:e}))).filter((({available:e})=>!e.isZero())).sort(((e,s)=>s.available.cmp(e.available)))}(e),t=function(e){return Object.entries(e).reduce(((e,[s,t])=>(t.forEach((t=>{Object.entries(t.validators).forEach((([a,{total:n,value:o}])=>{const r=e.find((e=>e.validatorId===a));if(r){const e=r.eras.find((e=>e.era.eq(t.era)));e?e.stashes[s]=o:r.eras.push({era:t.era,stashes:{[s]:o}}),r.available=r.available.add(o),r.total=r.total.add(n)}else e.push({available:o,eras:[{era:t.era,stashes:{[s]:o}}],total:n,validatorId:a})}))})),e)),[]).sort(((e,s)=>s.available.cmp(e.available)))}(e),a=s.length?s.reduce(((e,{available:s})=>e.iadd(s)),new(j())(0)):null,[n,o]=t.length?t.reduce((([e,s],{available:t,total:a})=>[e.iadd(t),s.iadd(a)]),[new(j())(0),new(j())(0)]):[null,null];return{stashAvail:a,stashes:s,valAvail:n,valTotal:o,validators:t}}return{}}(k)),[k]),P=(0,n.useMemo)((()=>[[i(h?"payout/stash":"overall/validator"),"start",2],[i("eras"),"start"],[i(h?"own":"total")],["remaining"],[void 0,void 0,3]]),[h,i]),T=(0,n.useRef)([[i("payout/validator"),"start",2],[i("eras"),"start"],[i("own")],["remaining"],[void 0,void 0,3]]),D=(0,n.useMemo)((()=>[{isDisabled:!u,text:i("Own validators"),value:"val"},{text:i("Own stashes"),value:"all"}]),[u,i]),F=(0,n.useMemo)((()=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{colSpan:3}),(0,a.jsx)(l.iA.Column.Balance,{value:I}),(0,a.jsx)("td",{colSpan:4})]})),[I]),V=(0,n.useMemo)((()=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{colSpan:3}),(0,a.jsx)(l.iA.Column.Balance,{value:E}),(0,a.jsx)("td",{colSpan:4})]})),[E]);return(0,a.jsxs)(Ns,{className:e,children:[(0,a.jsxs)(l.zx.Group,{children:[(0,a.jsx)(l.tX,{onChange:p,options:D,value:h}),(0,a.jsx)(l.tX,{onChange:g,options:N,value:x}),(0,a.jsx)(bs,{isAll:!0,isDisabled:t,payout:M})]}),(0,a.jsx)(C,{isInElection:t}),!S&&!A?.length&&(0,a.jsxs)(l.Pd,{className:"warning centered",withIcon:!1,children:[(0,a.jsx)("p",{children:i("Payouts of rewards for a validator can be initiated by any account. This means that as soon as a validator or nominator requests a payout for an era, all the nominators for that validator will be rewarded. Each user does not need to claim individually and the suggestion is that validators should claim rewards for everybody as soon as an era ends.")}),(0,a.jsx)("p",{children:i("If you have not claimed rewards straight after the end of the era, the validator is in the active set and you are seeing no rewards, this would mean that the reward payout transaction was made by another account on your behalf. Always check your favorite explorer to see any historic payouts made to your accounts.")})]}),(0,a.jsx)(l.iA,{empty:!S&&A&&i(h?"No pending payouts for your stashes":"No pending payouts for your validators"),emptySpinner:i("Retrieving info for the selected eras, this will take some time"),footer:F,header:P,isFixed:!0,children:!S&&A?.map((e=>(0,a.jsx)(ys,{historyDepth:s,payout:e},e.stashId)))}),1===h&&!S&&M&&0!==M.length&&(0,a.jsx)(l.iA,{footer:V,header:T.current,isFixed:!0,children:!S&&M.filter((({available:e})=>!e.isZero())).map((e=>(0,a.jsx)(Cs,{historyDepth:s,isDisabled:t,payout:e},e.validatorId)))})]})})),Ss=l.zo.div`
  &.isLoading {
    position: relative;

    canvas, h1 {
      opacity: 0.25;
    }

    .ui--Spinner {
      position: absolute;
      top: 34%;
      left: 0;
      right: 0;
    }
  }
`,Is=n.memo((function({className:e="",colors:s,labels:t,legends:o,title:r,values:i}){const c=(0,n.useMemo)((()=>!(t&&0!==t.length&&i&&0!==i.length&&i[0]&&i[0].length)),[t,i]);return(0,a.jsxs)(Ss,{className:`${e} staking--Chart ${c?"isLoading":""}`,children:[(0,a.jsx)(l.kL.Line,{colors:s,labels:t,legends:o,title:r,values:i}),c&&(0,a.jsx)(l.$j,{})]})})),As=[void 0,"#acacac"],Es=n.memo((function({labels:e,validatorId:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),r=(0,n.useMemo)((()=>[s,!1]),[s]),i=(0,m.W7)(o.derive.staking.stakerPoints,r),[l,d]=(0,n.useState)([]);(0,n.useEffect)((()=>d([])),[s]),(0,n.useEffect)((()=>i&&d(function(e,s){const t=new Array(e.length),a=new Array(e.length),[n,o]=s.reduce((([e,s],{points:t})=>(t.gtn(0)&&(e+=t.toNumber(),s++),[e,s])),[0,0]);return s.forEach((({era:s,points:r})=>{const i=o>0?Math.ceil(100*n/o)/100:0,l=e.indexOf(s.toHuman());-1!==l&&(t[l]=i,a[l]=r.toNumber())})),[a,t]}(e,i))),[e,i]);const u=(0,n.useRef)([t("points"),t("average")]);return(0,a.jsx)(Is,{colors:As,labels:e,legends:u.current,title:t("era points"),values:l})})),Ms=new(j())(1e4),Ps=[void 0,"#acacac"],Ts=n.memo((function({labels:e,validatorId:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),r=(0,n.useMemo)((()=>[s,!1]),[s]),i=(0,m.W7)(o.derive.staking.stakerPrefs,r),[l,d]=(0,n.useState)([]);(0,n.useEffect)((()=>d([])),[s]),(0,n.useEffect)((()=>i&&d(function(e,s){const t=new Array(e.length),a=new Array(e.length),[n,o]=s.reduce((([e,s],{validatorPrefs:t})=>{const a=t.commission.unwrap().mul(Ms).div(v.ed).toNumber()/100;return 0!==a&&(e+=a,s++),[e,s]}),[0,0]);return s.forEach((({era:s,validatorPrefs:r})=>{const i=r.commission.unwrap().mul(Ms).div(v.ed).toNumber()/100,l=o>0?Math.ceil(100*n/o)/100:0,c=e.indexOf(s.toHuman());-1!==c&&(t[c]=l,a[c]=i)})),[a,t]}(e,i))),[e,i]);const u=(0,n.useRef)([t("commission"),t("average")]);return(0,a.jsx)(Is,{colors:Ps,labels:e,legends:u.current,title:t("commission"),values:l})}));var Ds=t(6485);function Fs(e=v.nw,s){return((0,Ds.H)(e)?e:(0,g.m)(e.toBn)?e.toBn():v.nw).mul(v.D_).div(s).toNumber()/1e3}const Vs=["#8c2200","#008c22","#acacac"],Rs=n.memo((function({labels:e,validatorId:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),r=(0,n.useMemo)((()=>[s,!1]),[s]),i=(0,m.W7)(o.derive.staking.ownSlashes,r),l=(0,m.W7)(o.derive.staking.erasRewards),d=(0,m.W7)(o.derive.staking.stakerPoints,r),[u,h]=(0,n.useState)([]),{currency:p,divisor:x}=(0,n.useMemo)((()=>({currency:M.a.getDefaults().unit,divisor:new(j())("1".padEnd(M.a.getDefaults().decimals+1,"0"))})),[]);(0,n.useEffect)((()=>h([])),[s]),(0,n.useEffect)((()=>l&&i&&d&&h(function(e,s,t,a,n){const o=new Array(e.length),r=new Array(e.length),i=new Array(e.length),[l,c]=s.reduce((([e,s],{era:t,eraReward:o})=>{const r=a.find((e=>e.era.eq(t))),i=r?.eraPoints.gtn(0)?Fs(r.points.mul(o).div(r.eraPoints),n):0;return i>0&&(e+=i,s++),[e,s]}),[0,0]);return s.forEach((({era:s,eraReward:d})=>{const u=a.find((e=>e.era.eq(s))),m=t.find((e=>e.era.eq(s))),h=u?.eraPoints.gtn(0)?Fs(u.points.mul(d).div(u.eraPoints),n):0,p=m?Fs(m.total,n):0,x=c>0?Math.ceil(100*l/c)/100:0,g=e.indexOf(s.toHuman());-1!==g&&(r[g]=h,i[g]=x,o[g]=p)})),[o,r,i]}(e,l,i,d,x))),[e,x,l,i,d]);const g=(0,n.useMemo)((()=>[t("{{currency}} slashed",{replace:{currency:p}}),t("{{currency}} rewards",{replace:{currency:p}}),t("{{currency}} average",{replace:{currency:p}})]),[p,t]);return(0,a.jsx)(Is,{colors:Vs,labels:e,legends:g,title:t("rewards & slashes"),values:u})})),qs=[void 0,"#8c2200","#acacac"],Os=n.memo((function({labels:e,validatorId:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),r=(0,n.useMemo)((()=>[s,!1]),[s]),i=(0,m.W7)(o.derive.staking.ownExposures,r),[l,d]=(0,n.useState)([]),{currency:u,divisor:h}=(0,n.useMemo)((()=>({currency:M.a.getDefaults().unit,divisor:new(j())("1".padEnd(M.a.getDefaults().decimals+1,"0"))})),[]);(0,n.useEffect)((()=>d([])),[s]),(0,n.useEffect)((()=>i&&d(function(e,s,t){const a=new Array(e.length),n=new Array(e.length),o=new Array(e.length),[r,i]=s.reduce((([e,s],{clipped:a})=>{const n=Fs(a.total?.unwrap(),t);return n>0&&(e+=n,s++),[e,s]}),[0,0]);return s.forEach((({clipped:s,era:l,exposure:c})=>{const d=Fs(s.total?.unwrap(),t),u=Fs(c.total?.unwrap(),t),m=i>0?Math.ceil(100*r/i)/100:0,h=e.indexOf(l.toHuman());-1!==h&&(o[h]=m,a[h]=d,n[h]=u)})),[a,n,o]}(e,i,h))),[e,h,i]);const p=(0,n.useMemo)((()=>[t("{{currency}} clipped",{replace:{currency:u}}),t("{{currency}} total",{replace:{currency:u}}),t("{{currency}} average",{replace:{currency:u}})]),[u,t]);return(0,a.jsx)(Is,{colors:qs,labels:e,legends:p,title:t("elected stake"),values:l})})),zs=(0,l.zo)(l.P0)`
  .staking--Chart {
    background: var(--bg-table);
    border: 1px solid var(--border-table);
    border-radius: 0.25rem;
    padding: 1rem 1.5rem;
  }
`,Bs=n.memo((function({className:e="",labels:s,validatorId:t}){return(0,a.jsxs)(zs,{className:e,children:[(0,a.jsxs)(l.P0.Column,{children:[(0,a.jsx)(Es,{labels:s,validatorId:t}),(0,a.jsx)(Rs,{labels:s,validatorId:t})]}),(0,a.jsxs)(l.P0.Column,{children:[(0,a.jsx)(Os,{labels:s,validatorId:t}),(0,a.jsx)(Ts,{labels:s,validatorId:t})]})]})})),$s=n.memo((function({className:e}){const{t:s}=(0,y.$)(),{api:t}=(0,c.h)(),{value:r}=(0,o.UO)(),[i,d]=(0,n.useState)(r||null),u=(0,m.W7)(t.derive.staking.erasHistoric),h=(0,n.useMemo)((()=>u&&u.map((e=>e.toHuman()))),[u]),p=(0,n.useCallback)((()=>function(e){e&&(window.location.hash=`/staking/query/${e}`)}(i)),[i]);return h?(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(l.bm,{className:"staking--queryInput",defaultValue:r,label:s("validator to query"),onChange:d,onEnter:p,children:(0,a.jsx)(l.zx,{icon:"play",isDisabled:!i,onClick:p})}),r&&(0,a.jsx)(Bs,{labels:h,validatorId:r})]}):(0,a.jsx)(l.$j,{})}));var Ls=t(30943),Hs=t(70563),_s=t(81190);const Zs=n.memo((function({index:e,isSelected:s,onSelect:t,slash:{era:o,isMine:r,slash:{others:i,own:d,payout:u,reporters:m,validator:h},total:p,totalOther:x}}){const{t:g}=(0,y.$)(),{api:f}=(0,c.h)(),j=(0,n.useCallback)((()=>t&&t(e)),[e,t]),v=(0,n.useCallback)((()=>i.map((([e,s],t)=>(0,a.jsx)(l.ax,{balance:s,value:e,withBalance:!0},t)))),[i]);return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"badge",children:r&&(0,a.jsx)(l.Ct,{color:"red",icon:"skull-crossbones"})}),(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(l.N,{value:h})}),(0,a.jsx)("td",{className:"expand all",children:!!i.length&&(0,a.jsx)(l.n0,{renderChildren:v,summary:g("Nominators ({{count}})",{replace:{count:(0,k.u)(i.length)}})})}),(0,a.jsx)("td",{className:"address",children:m.map(((e,s)=>(0,a.jsx)(l.ax,{value:e},s)))}),(0,a.jsx)("td",{className:"number together",children:(0,a.jsx)(b.Z,{value:d})}),(0,a.jsx)("td",{className:"number together",children:(0,a.jsx)(b.Z,{value:x})}),(0,a.jsx)("td",{className:"number together",children:(0,a.jsx)(b.Z,{value:p})}),(0,a.jsx)("td",{className:"number together",children:(0,a.jsx)(b.Z,{value:u})}),!f.query.staking.earliestUnappliedSlash&&!!f.consts.staking.slashDeferDuration&&(0,a.jsx)("td",{className:"number together",children:(0,k.u)(o)}),(0,a.jsx)("td",{children:(0,a.jsx)(l.XZ,{isDisabled:!t,onChange:j,value:s})})]})})),Ws=n.memo((function({slash:{era:e,nominators:s,reporters:t,total:o,validators:r}}){const{t:i}=(0,y.$)(),{api:d}=(0,c.h)(),u=(0,m.W7)(d.derive.session?.progress),[h,p]=(0,n.useMemo)((()=>u?[u.activeEra.sub(e).isub(v.If).imul(u.eraLength).iadd(u.eraProgress),d.consts.staking.slashDeferDuration.mul(u.eraLength)]:[new(j())(0),new(j())(0)]),[d,e,u]);return(0,a.jsxs)(l.Ty,{children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(l.Jy,{label:i("validators"),children:(0,k.u)(r.length)}),(0,a.jsx)(l.Jy,{label:i("nominators"),children:(0,k.u)(s.length)}),(0,a.jsx)(l.Jy,{label:i("reporters"),children:(0,k.u)(t.length)})]}),h.gtn(0)&&(0,a.jsx)(l.Jy,{label:i("defer"),progress:{total:p,value:h,withTime:!0}}),(0,a.jsx)(l.Jy,{label:i("total"),children:(0,a.jsx)(b.Z,{value:o})})]})})),Us=n.memo((function({buttons:e,councilId:s,councilThreshold:t,slash:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),d=(0,_s.m)("council"),[{selected:u,txAll:m,txSome:h},p]=(0,n.useState)((()=>{const e=i.tx.staking.cancelDeferredSlash(o.era,o.slashes.map(((e,s)=>s)));return{selected:[],txAll:d?{length:e.encodedLength,proposal:e}:null,txSome:null}})),x=(0,n.useRef)([[r("era {{era}}/unapplied",{replace:{era:i.query.staking.earliestUnappliedSlash||!i.consts.staking.slashDeferDuration?o.era.toString():o.era.sub(i.consts.staking.slashDeferDuration).sub(v.If).toString()}}),"start",3],[r("reporters"),"address"],[r("own")],[r("other")],[r("total")],[r("payout")],!i.query.staking.earliestUnappliedSlash&&!!i.consts.staking.slashDeferDuration&&[r("apply")],[]]),b=(0,n.useCallback)((e=>p((s=>{const t=s.selected.includes(e)?s.selected.filter((s=>s!==e)):s.selected.concat(e).sort(((e,s)=>e-s)),a=t.length?i.tx.staking.cancelDeferredSlash(o.era,t):null;return{selected:t,txAll:s.txAll,txSome:a&&d&&(0,g.m)(i.tx[d].propose)?{length:a.encodedLength,proposal:a}:null}}))),[i,d,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ws,{slash:o}),(0,a.jsxs)(l.zx.Group,{children:[e,d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.cA,{accountId:s,isDisabled:!h,isToplevel:!0,label:r("Cancel selected"),params:h&&(3===i.tx[d].propose.meta.args.length?[t,h.proposal,h.length]:[t,h.proposal]),tx:i.tx[d].propose}),(0,a.jsx)(l.cA,{accountId:s,isDisabled:!m,isToplevel:!0,label:r("Cancel all"),params:m&&(3===i.tx[d].propose.meta.args.length?[t,m.proposal,m.length]:[t,m.proposal]),tx:i.tx[d].propose})]})]}),(0,a.jsx)(l.iA,{header:x.current,children:o.slashes.map(((e,t)=>(0,a.jsx)(Zs,{index:t,isSelected:u.includes(t),onSelect:s?b:void 0,slash:e},t)))})]})})),Js=n.memo((function({ownStashes:e=[],slashes:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),{allAccounts:r}=(0,d.x)(),{members:i}=(0,Hs.V)("council"),[u,m]=(0,n.useState)(0),h=(0,n.useMemo)((()=>function(e,s){const t=[];return e.reduce(((e,[t,a])=>a.reduce(((e,a)=>{const n=a.others.reduce(((e,[,s])=>e.add(s)),new(j())(0)),o=s.some((({stashId:e})=>a.validator.eq(e)||a.others.some((([s])=>s.eq(e)))));return e.push({era:t,isMine:o,slash:a,total:a.own.add(n),totalOther:n}),e}),e)),[]).forEach((e=>{let s=t.find((({era:s})=>s.eq(e.era)));s||(s={era:e.era,nominators:[],payout:new(j())(0),reporters:[],slashes:[],total:new(j())(0),validators:[]},t.push(s)),s.payout.iadd(e.slash.payout),s.total.iadd(e.total),s.slashes.push(e);const a=e.slash.validator.toString();s.validators.includes(a)||s.validators.push(a),e.slash.others.forEach((([e])=>{const t=e.toString();s&&!s.nominators.includes(t)&&s.nominators.push(t)})),e.slash.reporters.forEach((e=>{const t=e.toString();s&&!s.reporters.includes(t)&&s.reporters.push(t)}))})),t.sort(((e,s)=>s.era.cmp(e.era)))}(s,e)),[e,s]),p=(0,n.useMemo)((()=>h.map((({era:e})=>o.query.staking.earliestUnappliedSlash||!o.consts.staking.slashDeferDuration?e:e.sub(o.consts.staking.slashDeferDuration).sub(v.If))).map((e=>({text:t("era {{era}}",{replace:{era:(0,k.u)(e)}}),value:e.toString()})))),[o,h,t]),x=(0,n.useMemo)((()=>r.find((e=>i.includes(e)))||null),[r,i]),g=(0,n.useRef)([[t("unapplied"),"start"]]);if(!h.length)return(0,a.jsx)(l.iA,{empty:t("There are no unapplied/pending slashes"),header:g.current});const b=Math.ceil((i.length||0)*(0,Ls.FK)(o));return(0,a.jsx)(Us,{buttons:(0,a.jsx)(l.tX,{onChange:m,options:p,value:u}),councilId:x,councilThreshold:b,slash:h[u]},h[u].era.toString())}));var Gs=t(49255),Qs=t(69250),Ys=t(85168),Ks=t(54371);const Xs=n.memo((function({children:e,className:s,nameFilter:t,setNameFilter:o,setWithIdentity:r,withIdentity:i}){const{t:d}=(0,y.$)(),{api:u}=(0,c.h)();(0,n.useEffect)((()=>{const e=Ys.Z.parse(location.href.split("?")[1]).filter;(0,Ks.H)(e)&&o(e,!0)}),[]);const m=(0,n.useCallback)((e=>o(e,!1)),[o]);return(0,a.jsxs)("div",{className:s,children:[(0,a.jsx)(l.II,{autoFocus:!0,isFull:!0,label:d("filter by name, address or index"),onChange:m,value:t}),(e||r)&&(0,a.jsxs)("div",{className:"staking--optionsBar",children:[e,r&&u.query.identity&&(0,a.jsx)(l.ZD,{className:"staking--buttonToggle",label:d("with an identity"),onChange:r,value:i})]})]})}));var et=t(27960);const st={transform:([[e],s])=>{const t={};for(let a=0;a<e.length;a++)t[e[a]]=s[a];return t},withParamsTransform:!0},tt=(0,S.e)("useIdentities",(function(e=[]){const{api:s}=(0,c.h)();return(0,m.W7)(s.derive.accounts.hasIdentityMulti,[e],st)})),at=(0,l.zo)(l.u_)`
  .ui--AddressMini.padded.addressStatic {
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }
`,nt=n.memo((function({className:e="",isDisabled:s,ownNominators:t,targets:o}){const{t:r}=(0,y.$)(),{api:i}=(0,c.h)(),[d,u]=(0,n.useState)(null),[m,h]=(0,N.O)(),p=(0,n.useMemo)((()=>(t||[]).map((({stashId:e})=>e))),[t]),x=(0,n.useCallback)((e=>{const s=t&&t.find((({stashId:s})=>s===e));u(s?{controllerId:s.controllerId,stashId:s.stashId}:null)}),[t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.zx,{icon:"hand-paper",isDisabled:s||!p.length||!o.length,label:r("Nominate selected"),onClick:h}),m&&(0,a.jsxs)(at,{className:e,header:r("Nominate validators"),onClose:h,size:"large",children:[(0,a.jsxs)(l.u_.Content,{children:[(0,a.jsxs)(l.u_.Columns,{hint:r("One of your available nomination accounts, keyed by the stash. The transaction will be sent from the controller."),children:[(0,a.jsx)(l.rp,{filter:p,label:r("the stash account to nominate with"),onChange:x,value:d?.stashId}),(0,a.jsx)(l.rp,{isDisabled:!0,label:r("the associated controller"),value:d?.controllerId})]}),(0,a.jsx)(l.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:r('The selected validators to nominate, either via the "currently best algorithm" or via a manual selection.')}),(0,a.jsx)("p",{children:r("Once transmitted the new selection will only take effect in 2 eras since the selection criteria for the next era was done at the end of the previous era. Until then, the nominations will show as inactive.")})]}),children:(0,a.jsx)(l.qG,{label:r("selected validators"),value:o.map((e=>(0,a.jsx)(l.ax,{className:"addressStatic",value:e},e)))})})]}),(0,a.jsx)(l.u_.Actions,{children:(0,a.jsx)(l.cA,{accountId:d?.controllerId,label:r("Nominate"),onStart:h,params:[o],tx:i.tx.staking.nominate})})]})]})})),ot={transform:e=>e.unwrapOrDefault()};function rt(e,s){return{hideValue:!0,isBlurred:!(e&&s),total:e&&s?s:v.Jo,value:e&&s?e:v.um}}const it=(0,l.zo)(l.Ty)`
  .percent {
    font-size: var(--font-percent-tiny);
  }
`,lt=n.memo((function({avgStaked:e,className:s,lastEra:t,lowStaked:o,minNominated:r,minNominatorBond:i,stakedReturn:d,totalIssuance:u,totalStaked:h}){const{t:p}=(0,y.$)(),{api:x}=(0,c.h)(),g=(0,m.W7)(t&&x.query.staking.erasValidatorReward,[t],ot),f=(0,n.useMemo)((()=>rt(h,u)),[u,h]),j=(0,n.useMemo)((()=>rt(o,e)),[e,o]),C=(0,a.jsx)("span",{className:"percent",children:"%"});return(0,a.jsxs)(it,{className:s,children:[(0,a.jsx)("section",{className:"media--800",children:(0,a.jsx)(l.Jy,{label:p("total staked"),progress:f,children:(0,a.jsx)(b.Z,{className:f.isBlurred?"--tmp":"",value:f.value,withSi:!0})})}),(0,a.jsx)("section",{className:"media--800",children:(0,a.jsx)(l.Jy,{label:p("returns"),children:u&&d>0?Number.isFinite(d)?(0,a.jsxs)(a.Fragment,{children:[d.toFixed(1),C]}):"-.-%":(0,a.jsxs)("span",{className:"--tmp",children:["0.0",C]})})}),(0,a.jsx)("section",{className:"media--1000",children:(0,a.jsx)(l.Jy,{label:`${p("lowest / avg staked")}`,progress:j,children:(0,a.jsxs)("span",{className:j.isBlurred?"--tmp":"",children:[(0,a.jsx)(b.Z,{value:j.value,withCurrency:!1,withSi:!0})," / ",(0,a.jsx)(b.Z,{className:j.isBlurred?"--tmp":"",value:j.total,withSi:!0})]})})}),(0,a.jsx)("section",{className:"media--1600",children:r?.gt(v.nw)&&(0,a.jsxs)(l.Jy,{className:"media--1600",label:p(i?"min nominated / threshold":"min nominated"),children:[(0,a.jsx)(b.Z,{value:r,withCurrency:!i,withSi:!0}),i&&(0,a.jsxs)(a.Fragment,{children:[" / ",(0,a.jsx)(b.Z,{value:i,withSi:!0})]})]})}),(0,a.jsx)("section",{children:(0,a.jsx)(l.Jy,{label:p("last reward"),children:(0,a.jsx)(b.Z,{className:g?"":"--tmp",value:g||1,withSi:!0})})})]})})),ct=(0,S.e)("useOwnNominators",(function(e){return(0,n.useMemo)((()=>e&&e.filter((({isOwnController:e,isStashValidating:s})=>e&&!s))),[e])}));var dt=t(11798),ut=t(60773),mt=t(97794);const ht=n.memo((function({numNominators:e}){const{api:s}=(0,c.h)(),t=s.consts.staking?.maxNominatorRewardedPerValidator;return e&&t&&!t.gten(e)?(0,a.jsx)(l.Ct,{className:"media--1200",color:"red",icon:"balance-scale-right"}):null})),pt=n.memo((function({allSlashes:e,canSelect:s,filterName:t,info:{accountId:o,bondOther:r,bondOwn:i,bondTotal:d,commissionPer:u,isBlocking:m,isElected:h,isFavorite:p,key:x,lastPayout:g,numNominators:f,rankOverall:j,stakedReturnCmp:v},isNominated:C,isSelected:w,nominatedBy:N=[],toggleFavorite:S,toggleSelected:I}){const{t:A}=(0,y.$)(),{api:E}=(0,c.h)(),M=(0,ut.Y)(o),[,,P]=(0,mt.h)(g),T=(0,n.useMemo)((()=>!M||(0,dt.r7)(E,x,M,t)),[M,E,t,x]),D=(0,n.useMemo)((()=>(e||[]).map((([e,s])=>({era:e,slashes:s.filter((({validator:e})=>e.eq(o)))}))).filter((({slashes:e})=>e.length))),[e,o]),F=(0,n.useCallback)((()=>{return e=x,void(window.location.hash=`/staking/query/${e}`);var e}),[x]),V=(0,n.useCallback)((()=>I(x)),[x,I]);return T?(0,a.jsxs)("tr",{children:[(0,a.jsx)(l.iA.Column.Favorite,{address:x,isFavorite:p,toggle:S}),(0,a.jsxs)("td",{className:"badge together",children:[C?(0,a.jsx)(l.Ct,{color:"green",icon:"hand-paper"}):(0,a.jsx)(l.Ct,{color:"transparent"}),h?(0,a.jsx)(l.Ct,{color:"blue",icon:"chevron-right"}):(0,a.jsx)(l.Ct,{color:"transparent"}),(0,a.jsx)(ht,{numNominators:f||N.length}),m&&(0,a.jsx)(l.Ct,{color:"red",icon:"user-slash"}),0!==D.length&&(0,a.jsx)(l.Ct,{color:"red",hover:A("Slashed in era {{eras}}",{replace:{eras:D.map((({era:e})=>(0,k.u)(e))).join(", ")}}),icon:"skull-crossbones"})]}),(0,a.jsx)("td",{className:"number",children:0!==j&&(0,k.u)(j)}),(0,a.jsx)("td",{className:"address all",children:(0,a.jsx)(l.N,{value:o})}),(0,a.jsx)("td",{className:"number media--1400",children:g&&(E.consts.babe?P.days?1===P.days?A("yesterday"):A("{{days}} days",{replace:{days:P.days}}):A("recently"):(0,k.u)(g))}),(0,a.jsx)("td",{className:"number media--1200 no-pad-right",children:f||""}),(0,a.jsx)("td",{className:"number media--1200 no-pad-left",children:N.length||""}),(0,a.jsxs)("td",{className:"number media--1100",children:[u.toFixed(2),"%"]}),(0,a.jsx)("td",{className:"number together",children:!d.isZero()&&(0,a.jsx)(b.Z,{value:d})}),(0,a.jsx)("td",{className:"number together media--900",children:!i.isZero()&&(0,a.jsx)(b.Z,{value:i})}),(0,a.jsx)("td",{className:"number together media--1600",children:!r.isZero()&&(0,a.jsx)(b.Z,{value:r})}),(0,a.jsx)("td",{className:"number together",children:v>0&&(0,a.jsxs)(a.Fragment,{children:[v.toFixed(2),"%"]})}),(0,a.jsx)("td",{children:!m&&(s||w)&&(0,a.jsx)(l.XZ,{onChange:V,value:w})}),(0,a.jsx)("td",{children:(0,a.jsx)(l.JO,{className:"staking--stats highlight--color",icon:"chart-line",onClick:F})})]}):null})),xt={rankBondOther:"media--1600",rankBondOwn:"media--900"},gt=["rankBondTotal","rankBondOwn","rankBondOther","rankOverall"],bt={withElected:!1,withGroup:!0,withIdentity:!1,withPayout:!1,withoutComm:!0,withoutOver:!0},ft={isQueryFiltered:!1,nameFilter:""},jt={sortBy:"rankOverall",sortFromMax:!0},vt=l.zo.div`
  text-align: center;

  th.isClickable {
    .ui--Icon {
      margin-left: 0.5rem;
    }
  }

  .ui--Table {
    overflow-x: auto;
  }
`,yt=n.memo((function({className:e="",isInElection:s,nominatedBy:t,ownStashes:o,targets:{avgStaked:r,inflation:{stakedReturn:i},lastEra:d,lowStaked:u,medianComm:m,minNominated:h,minNominatorBond:p,nominators:g,totalIssuance:b,totalStaked:f,validatorIds:j,validators:w},toggleFavorite:N,toggleLedger:k,toggleNominatedBy:S}){const{t:I}=(0,y.$)(),{api:A}=(0,c.h)(),E=(0,x.g)(),M=(0,Gs.u)(7),P=ct(o),T=tt(j),[D,F]=(0,n.useState)([]),[{isQueryFiltered:V,nameFilter:R},q]=(0,n.useState)(ft),[O,z]=(0,Qs.o)("staking:targets",bt),[{sortBy:B,sortFromMax:$},L]=(0,n.useState)(jt),[H,_]=(0,n.useState)(),Z=(0,n.useRef)({rankBondOther:I("other stake"),rankBondOwn:I("own stake"),rankBondTotal:I("total stake"),rankOverall:I("return")}),W=(0,n.useMemo)((()=>({...O,daysPayout:M,isBabe:!!A.consts.babe,isQueryFiltered:V,maxPaid:A.consts.staking?.maxNominatorRewardedPerValidator})),[A,M,V,O]),U=(0,n.useMemo)((()=>T&&w&&t&&function(e,s,t,{daysPayout:a,isBabe:n,maxPaid:o,withElected:r,withGroup:i,withIdentity:l,withPayout:c,withoutComm:d,withoutOver:u},m){const h=[],p=[];return e.filter((({accountId:e,commissionPer:s,isElected:x,isFavorite:g,lastPayout:b,numNominators:f})=>{if(g)return!0;const j=e.toString(),y=t[j],C=f||m?.[j]?.length||0;if((!r||x)&&(!l||y?.hasIdentity)&&(!c||!n||b&&a.gte(b))&&(!d||s<=10)&&(!u||!o||o.muln(100).div(v.S8).gten(C))){if(!i)return!0;if(!y||!y.hasIdentity)return p.push(j),!0;if(y.parentId){if(!p.includes(y.parentId))return p.push(y.parentId),!0}else if(!p.includes(j)){if(y.display){const e=y.display.replace(/[^\x20-\x7E]/g,"").replace(/-/g," ").replace(/_/g," ").split(" ").map((e=>e.trim())).filter((e=>!!e));if(function(e,s){return e.some((e=>e.length===s.length&&(1===e.length?e[0]===s[0]:e.reduce(((e,t,a)=>e+(t===s[a]?1:0)),0)>=s.length-1)))}(h,e))return!1;h.push(e)}return p.push(j),!0}}return!1}))}(w,0,T,W,t)),[T,W,m,t,w]);(0,n.useEffect)((()=>{U&&_(function(e,s,t){return t.slice(0).sort(((t,a)=>s?t[e]-a[e]:a[e]-t[e])).sort(((e,s)=>e.isFavorite===s.isFavorite?0:e.isFavorite?-1:1))}(B,$,U))}),[U,B,$]),(0,n.useEffect)((()=>{k(),S()}),[k,S]);const J=(0,n.useMemo)((()=>A.consts.staking.maxNominations?A.consts.staking.maxNominations.toNumber():16),[A]),G=(0,n.useMemo)((()=>function(e=[]){const s=[];return e.forEach((({nominating:e=[]})=>{e.forEach((e=>{!s.includes(e)&&s.push(e)}))})),s}(P)),[P]),Q=(0,n.useCallback)((e=>L((s=>({sortBy:e,sortFromMax:e!==s.sortBy||!s.sortFromMax})))),[]),Y=(0,n.useCallback)((e=>F(D.includes(e)?D.filter((s=>e!==s)):[...D,e])),[D]),K=(0,n.useCallback)((()=>U&&F(function(e,s){const t=[];for(let a=0;a<e.length&&t.length<s;a++){const{isBlocking:s,isFavorite:n,key:o,stakedReturnCmp:r}=e[a];!s&&(n||r>0)&&t.push(o)}return t}(U,J))),[U,J]),X=(0,n.useCallback)(((e,s)=>q({isQueryFiltered:s,nameFilter:e})),[]),ee=(0,n.useMemo)((()=>[[I("validators"),"start",4],[I("payout"),"media--1400"],[I("nominators"),"media--1200",2],[I("comm."),"media--1100"],...gt.map((e=>[(0,a.jsxs)(a.Fragment,{children:[Z.current[e],(0,a.jsx)(l.JO,{icon:B===e?$?"chevron-down":"chevron-up":"minus"})]}),`${H?`isClickable ${B===e?"highlight--border":""} number`:"number"} ${xt[e]||""}`,1,()=>Q(e)])),[],[]]),[Q,Z,B,H,$,I]),se=(0,n.useMemo)((()=>(0,a.jsx)("div",{children:(0,a.jsxs)(Xs,{nameFilter:R,setNameFilter:X,setWithIdentity:z.withIdentity,withIdentity:O.withIdentity,children:[(0,a.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("one validator per operator"),onChange:z.withGroup,value:O.withGroup}),(0,a.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("comm. <= {{maxComm}}%",{replace:{maxComm:10}}),onChange:z.withoutComm,value:O.withoutComm}),(0,a.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("with capacity"),onChange:z.withoutOver,value:O.withoutOver}),A.consts.babe&&(0,a.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("recent payouts"),onChange:z.withPayout,value:O.withPayout}),(0,a.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("currently elected"),onChange:z.withElected,value:O.withElected})]})})),[A,R,X,z,I,O]),te=V?w:H,ae=D.length<J;return(0,a.jsxs)(vt,{className:e,children:[(0,a.jsx)(lt,{avgStaked:r,lastEra:d,lowStaked:u,minNominated:h,minNominatorBond:p,numNominators:g?.length,numValidators:w?.length,stakedReturn:i,totalIssuance:b,totalStaked:f}),(0,a.jsxs)(l.zx.Group,{children:[(0,a.jsx)(l.zx,{icon:"check",isDisabled:!w?.length||!P?.length,label:I("Most profitable"),onClick:K}),(0,a.jsx)(nt,{isDisabled:s||!w?.length,ownNominators:P,targets:D})]}),(0,a.jsx)(C,{isInElection:s}),(0,a.jsx)(l.iA,{empty:H&&I("No active validators to check"),emptySpinner:(0,a.jsxs)(a.Fragment,{children:[!(w&&T)&&(0,a.jsx)("div",{children:I("Retrieving validators")}),!t&&(0,a.jsx)("div",{children:I("Retrieving nominators")}),!te&&(0,a.jsx)("div",{children:I("Preparing target display")})]}),filter:se,header:ee,legend:(0,a.jsx)(et.Z,{}),children:te&&te.map((e=>(0,a.jsx)(pt,{allSlashes:E,canSelect:ae,filterName:R,info:e,isNominated:G.includes(e.key),isSelected:D.includes(e.key),nominatedBy:t?.[e.key],toggleFavorite:N,toggleSelected:Y},e.key)))})]})})),Ct=(0,S.e)("useNominations",(function(e=!0){const{api:s}=(0,c.h)(),t=(0,m.W7)(e&&s.query.staking.nominators.entries);return(0,n.useMemo)((()=>t&&function(e){const s={};for(let t=0;t<e.length;t++){const[a,n]=e[t];if(n.isSome&&a.args.length){const e=a.args[0].toString(),{submittedIn:t,targets:o}=n.unwrap();for(let a=0;a<o.length;a++){const n=o[a].toString();s[n]||(s[n]=[]),s[n].push({index:a+1,nominatorId:e,submittedIn:t})}}}return s}(t)),[t])}));var wt=t(57493),Nt=t(95209);const kt={},St={withController:!0,withExposure:!0,withPrefs:!0},It={withController:!0,withPrefs:!0},At={transform:({activeEra:e,eraLength:s,sessionLength:t})=>({activeEra:e,eraLength:s,lastEra:e.isZero()?v.nw:e.sub(v.If),sessionLength:t})},Et={defaultValue:{},transform:([e,s,t,a,n,o,r,i])=>({counterForNominators:s,counterForValidators:t,historyDepth:e,maxNominatorsCount:a&&a.isSome?a.unwrap():void 0,maxValidatorsCount:n&&n.isSome?n.unwrap():void 0,minNominatorBond:o,minValidatorBond:r,totalIssuance:i})};function Mt(e){return(s,t)=>(s[e]=t+1,s)}function Pt(e){return!e.nextElected}function Tt(e){const s=[];return e.filter((({accountId:e})=>{const t=e.toString();return!s.includes(t)&&(s.push(t),!0)})).sort(((e,s)=>s.bondOther.cmp(e.bondOther))).map(Mt("rankBondOther")).sort(((e,s)=>s.bondOwn.cmp(e.bondOwn))).map(Mt("rankBondOwn")).sort(((e,s)=>s.bondTotal.cmp(e.bondTotal))).map(Mt("rankBondTotal")).sort(((e,s)=>e.stakedReturnCmp-s.stakedReturnCmp)).map(Mt("rankReward")).sort(((e,s)=>s.stakedReturnCmp-e.stakedReturnCmp||e.commissionPer-s.commissionPer||s.rankBondTotal-e.rankBondTotal)).map(Mt("rankOverall")).sort(((e,s)=>e.isFavorite===s.isFavorite?0:e.isFavorite?-1:1))}function Dt(e,s,t,a,{activeEra:n,eraLength:o,lastEra:r,sessionLength:i},l,c){const d={},u=e.createType("Exposure"),m=l&&r.sub(l).iadd(v.If),h=new Array(t.info.length);for(let l=0;l<t.info.length;l++){const{accountId:p,exposure:x=u,stakingLedger:g,validatorPrefs:b}=t.info[l];let[f,j]=x.total?[x.own.unwrap(),x.total.unwrap()]:[v.nw,v.nw];const y=j.isZero();y&&(j=f=g.total?.unwrap()||v.nw);const C=(x.others||[]).reduce(((s,{value:t=e.createType("Compact<Balance>")})=>{const a=t.unwrap();return s.isZero()||a.lt(s)?a:s}),v.nw),w=p.toString(),N=r.isZero()?void 0:g.claimedRewards[g.claimedRewards.length-1];h[l]={accountId:p,bondOther:j.sub(f),bondOwn:f,bondShare:0,bondTotal:j,commissionPer:b.commission.unwrap().toNumber()/1e7,exposure:x,isActive:!y,isBlocking:!(!b.blocked||!b.blocked.isTrue),isElected:!Pt(t)&&t.nextElected.some((e=>e.eq(p))),isFavorite:a.includes(w),isNominating:(x.others||[]).reduce(((e,t)=>{const a=t.who.toString();return d[a]=(d[a]||v.nw).add(t.value?.toBn()||v.nw),e||s.includes(a)}),s.includes(w)),key:w,knownLength:n.sub(g.claimedRewards[0]||n),lastPayout:m&&N&&N.gt(m)&&!i.eq(v.If)?r.sub(N).mul(o):void 0,minNominated:C,numNominators:(x.others||[]).length,numRecentPayouts:m?g.claimedRewards.filter((e=>e.gte(m))).length:0,rankBondOther:0,rankBondOwn:0,rankBondTotal:0,rankNumNominators:0,rankOverall:0,rankReward:0,skipRewards:y,stakedReturn:0,stakedReturnCmp:0,validatorPrefs:b,withReturns:c}}return[h,d]}function Ft(e,s){const t=s.avgStaked,a=s.validators;return a?(t&&!t.isZero()&&a.forEach((s=>{if(!s.skipRewards&&s.withReturns){const a=t.mul(v.S8).imuln(e.stakedReturn).div(s.bondTotal);s.stakedReturn=(a.gt(v.Ew)?v.Ew:a).toNumber()/v.S8.toNumber(),s.stakedReturnCmp=s.stakedReturn*(100-s.commissionPer)/100}})),{...s,validators:Tt(a)}):s}const Vt=(0,S.e)("useSortedTargets",(function(e,s){const{api:t}=(0,c.h)(),{allAccounts:a}=(0,d.x)(),{counterForNominators:o,counterForValidators:r,historyDepth:i,maxNominatorsCount:l,maxValidatorsCount:u,minNominatorBond:p,minValidatorBond:x,totalIssuance:g}=(0,h.L)([t.query.staking.historyDepth,t.query.staking.counterForNominators,t.query.staking.counterForValidators,t.query.staking.maxNominatorsCount,t.query.staking.maxValidatorsCount,t.query.staking.minNominatorBond,t.query.staking.minValidatorBond,t.query.balances?.totalIssuance],Et),b=(0,m.W7)(t.derive.staking.electedInfo,[{...St,withLedger:s}]),f=(0,m.W7)(t.derive.staking.waitingInfo,[{...It,withLedger:s}]),y=(0,m.W7)(t.derive.session.info,void 0,At),C=(0,n.useMemo)((()=>b&&y&&g&&f?function(e,s,t,a,n,o,r,i){const[l,c]=Dt(e,s,t,n,r,i,!0),[d]=Dt(e,s,a,n,r),u=l.filter((({isActive:e})=>e)).map((({bondTotal:e})=>e)).sort(((e,s)=>e.cmp(s))),m=u.reduce(((e,s)=>e.iadd(s)),new(j())(0)),h=m.divn(u.length),p=Object.values(c).reduce(((e,s)=>e.isZero()||s.lt(e)?s:e),v.nw),x=(0,Nt.a)([l,d]),g=x.map((({commissionPer:e})=>e)).sort(((e,s)=>e-s)),b=Math.floor(g.length/2),f=g.length?g.length%2?g[b]:(g[b-1]+g[b])/2:0,y=d.map((({key:e})=>e)),C=(0,Nt.a)([l.map((({key:e})=>e)),y]),w=(0,Nt.a)([l.filter((({isBlocking:e})=>!e)).map((({key:e})=>e)),d.filter((({isBlocking:e})=>!e)).map((({key:e})=>e))]);return{avgStaked:h,lastEra:r.lastEra,lowStaked:u[0]||v.nw,medianComm:f,minNominated:p,nominateIds:w,nominators:Object.keys(c),totalIssuance:o,totalStaked:m,validatorIds:C,validators:x,waitingIds:y}}(t,a,b,f,e,g,y,t.consts.staking.historyDepth||i):kt),[t,a,b,e,i,y,g,f]),w=(0,wt.V)(C?.totalStaked);return(0,n.useMemo)((()=>({counterForNominators:o,counterForValidators:r,historyDepth:t.consts.staking.historyDepth||i,inflation:w,maxNominatorsCount:l,maxValidatorsCount:u,medianComm:0,minNominated:v.nw,minNominatorBond:p,minValidatorBond:x,...w&&w.stakedReturn?Ft(w,C):C})),[t,C,o,r,i,w,l,u,p,x])}));var Rt=t(75387);const qt=n.memo((function(){const{t:e}=(0,y.$)();return(0,a.jsx)(l.Pd,{className:"warning centered",content:e("Use the account actions to create a new validator/nominator stash and bond it to participate in staking. Do not send funds directly via a transfer to a validator.")})}));var Ot=t(47623);function zt(e){return e.length?[e.length,()=>e.map((e=>(0,a.jsx)(l.ax,{value:e},e)))]:null}const Bt=n.memo((function({nominators:e,slashingSpans:s}){const{t}=(0,y.$)(),{api:o}=(0,c.h)(),{active:r,chilled:i}=(0,n.useMemo)((()=>function(e,s=[],t){const a=t&&!e.events.staking.SlashReported?s.filter((({submittedIn:e})=>t.lastNonzeroSlash.gt(e))).map((({nominatorId:e})=>e)):[];return{active:zt(s.filter((({nominatorId:e})=>!a.includes(e))).map((({nominatorId:e})=>e))),chilled:zt(a)}}(o,e,s)),[o,e,s]);return(0,a.jsxs)("td",{className:"expand all",children:[r&&(0,a.jsx)(l.n0,{renderChildren:r[1],summary:t("Nominations ({{count}})",{replace:{count:(0,k.u)(r[0])}})}),i&&(0,a.jsx)(l.n0,{renderChildren:i[1],summary:t("Renomination required ({{count}})",{replace:{count:(0,k.u)(i[0])}})})]})}));function $t(e){return[e.length,()=>e.map((({nominatorId:e,value:s})=>(0,a.jsx)(l.ax,{bonded:s,value:e,withBonded:!0},e)))]}function Lt(e){const s=new(j())(0);for(let t=0;t<e.length;t++)s.iadd(e[t].value);return s}const Ht=n.memo((function({nominators:e,stakeOther:s}){const{api:t}=(0,c.h)(),[o,r,i,d]=(0,n.useMemo)((()=>function(e,s,t){if(!s)return[null,v.nw,null,v.nw];const a=s.sort(((e,s)=>s.value.cmp(e.value)));if(!e||e.gtn(a.length))return[$t(a),t||v.nw,null,v.nw];const n=e.toNumber(),o=a.slice(0,n),r=Lt(o),i=a.slice(n),l=Lt(i);return[$t(o),r,$t(i),l]}(t.consts.staking?.maxNominatorRewardedPerValidator,e,s)),[t,e,s]);return(0,a.jsxs)("td",{className:"expand all",children:[(!o||0!==o[0])&&(0,a.jsx)(l.n0,{className:o?"":"--tmp",renderChildren:o&&o[1],summary:(0,a.jsx)(b.Z,{labelPost:` (${o?o[0]:"0"})`,value:r})}),i&&(0,a.jsx)(l.n0,{className:"stakeOver",renderChildren:i[1],summary:(0,a.jsx)(b.Z,{labelPost:` (${i[0]})`,value:d})})]})})),_t=[],Zt=n.memo((function({isChilled:e,isElected:s,isMain:t,isPara:o,isRelay:r,nominators:i=_t,onlineCount:c,onlineMessage:u}){const{allAccounts:m}=(0,d.x)(),h=c&&c.toNumber(),p=(0,n.useMemo)((()=>i.some((({nominatorId:e})=>m.includes(e)))),[m,i]);return(0,a.jsxs)(a.Fragment,{children:[p?(0,a.jsx)(l.Ct,{className:"media--1100",color:"green",icon:"hand-paper"}):(0,a.jsx)(l.Ct,{className:"media--1100",color:"transparent"}),r&&(o?(0,a.jsx)(l.Ct,{className:"media--1100",color:"purple",icon:"vector-square"}):(0,a.jsx)(l.Ct,{className:"media--1100",color:"transparent"})),e?(0,a.jsx)(l.Ct,{className:"media--1000",color:"red",icon:"cancel"}):s?(0,a.jsx)(l.Ct,{className:"media--1000",color:"blue",icon:"chevron-right"}):(0,a.jsx)(l.Ct,{className:"media--1000",color:"transparent"}),t&&(h?(0,a.jsx)(l.Ct,{className:"media--900",color:"green",info:h}):u?(0,a.jsx)(l.Ct,{className:"media--900",color:"green",icon:"envelope"}):(0,a.jsx)(l.Ct,{className:"media--900",color:"transparent"})),(0,a.jsx)(ht,{numNominators:i.length})]})})),Wt={transform:e=>e.unwrapOr(null)},Ut=n.memo((function({address:e,className:s="",filterName:t,hasQueries:o,isElected:r,isFavorite:i,isMain:d,isPara:u,lastBlock:h,minCommission:p,nominatedBy:x,points:g,recentlyOnline:f,toggleFavorite:j,validatorInfo:C,withIdentity:w}){const{t:k}=(0,y.$)(),{api:S}=(0,c.h)(),[I,A]=(0,N.O)(!1),{accountInfo:E,slashingSpans:M}=function(e,s,t){const a=(0,n.useMemo)((()=>[s]),[s]);return{accountInfo:(0,ut.Y)(s),slashingSpans:(0,m.W7)(!t&&e.query.staking.slashingSpans,a,Wt)}}(S,e,d),{commission:P,isChilled:T,nominators:D,stakeOther:F,stakeOwn:V}=(0,n.useMemo)((()=>C?function({exposure:e,validatorPrefs:s},t){let a,n,o,r;e&&e.total&&(a=e.others.map((({value:e,who:s})=>({nominatorId:s.toString(),value:e.unwrap()}))),n=e.total?.unwrap()||v.nw,r=e.own.unwrap(),o=n.sub(r));const i=s?.commission?.unwrap();return{commission:i?.toHuman(),isChilled:i&&t&&i.isZero()&&i.lt(t),nominators:a,stakeOther:o,stakeOwn:r,stakeTotal:n}}(C,p):{}),[p,C]),R=(0,n.useMemo)((()=>!E||(0,dt.r7)(S,e,E,t,w)),[S,E,e,t,w]),q=(0,n.useMemo)((()=>`#/staking/query/${e}`),[e]),O=(0,n.useMemo)((()=>g&&"greyAnim-"+Date.now()%25),[g]);return R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:`${s} isExpanded isFirst ${I?"packedBottom":"isLast"}`,children:[(0,a.jsx)(l.iA.Column.Favorite,{address:e,isFavorite:i,toggle:j}),(0,a.jsx)("td",{className:"badge together",children:(0,a.jsx)(Zt,{isChilled:T,isElected:r,isMain:d,isPara:u,isRelay:!!(S.query.parasShared||S.query.shared)?.activeValidatorIndices,nominators:d?D:x,onlineCount:f?.blockCount,onlineMessage:f?.hasMessage})}),(0,a.jsxs)("td",{className:"address all relative",children:[(0,a.jsx)(l.N,{value:e}),d&&O&&(0,a.jsx)(l.Vp,{className:`${O} absolute`,color:"lightgrey",label:g})]}),d?(0,a.jsx)(Ht,{nominators:D,stakeOther:F}):(0,a.jsx)(Bt,{nominators:x,slashingSpans:M}),(0,a.jsx)("td",{className:"number",children:P||(0,a.jsx)("span",{className:"--tmp",children:"50.00%"})}),d&&(0,a.jsx)("td",{className:"number",children:h}),(0,a.jsx)(l.iA.Column.Expand,{isExpanded:I,toggle:A})]}),I&&(0,a.jsxs)("tr",{className:`${s} ${I?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,a.jsx)("td",{colSpan:2}),(0,a.jsxs)("td",{className:"columar",colSpan:d?4:3,children:[(0,a.jsxs)(l.P0,{size:"small",children:[(0,a.jsx)(l.P0.Column,{children:d&&V?.gtn(0)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:k("own stake")}),(0,a.jsx)(b.Z,{value:V})]})}),(0,a.jsx)(l.P0.Column,{children:o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h5",{children:k("graphs")}),(0,a.jsxs)("a",{href:q,children:[(0,a.jsx)(l.JO,{className:"highlight--color",icon:"chart-line"})," ",k("historic results")]})]})})]}),(0,a.jsx)(l.P0,{is100:!0,children:(0,a.jsx)(l.P0.Column,{children:(0,a.jsx)(l.NR,{data:e,type:"validator",withTitle:!0})})})]}),(0,a.jsx)("td",{})]})]}):null}));function Jt(e,s=[],t=[],a,n,o){return s.filter((s=>!o.includes(s)&&(!e||t.includes(s)))).map((e=>[e,a.includes(e),n.includes(e)])).sort((([e,,s],[a,,n])=>{const o=t.includes(e),r=t.includes(a);return s===n?o===r?0:o?-1:1:s?-1:1}))}function Gt(e){const s=new Array(e.length);for(let t=0;t<e.length;t++)s[t]=e[t].toString();return s}const Qt={},Yt=n.memo((function({className:e,favorites:s,hasQueries:t,isIntentions:o,isOwn:r,minCommission:i,nominatedBy:d,ownStashIds:u,paraValidators:m=Qt,recentlyOnline:h,stakingOverview:p,targets:x,toggleFavorite:g}){const{t:b}=(0,y.$)(),{api:f}=(0,c.h)(),{byAuthor:j,eraPoints:v}=(0,Rt.E)(),[C,w]=(0,n.useState)(""),N=(0,Ot.q)(),{validators:k,waiting:S}=(0,n.useMemo)((()=>function(e,s,t,a,n){if(!s)return{};const o=Gt(s.nextElected),r=Gt(s.validators);return{validators:Jt(e,r,n,o,t,[]),waiting:Jt(e,o,n,o,t,r).concat(Jt(e,a,n,[],t,o))}}(r,p,s,x.waitingIds,u)),[s,r,u,p,x]),I=(0,n.useMemo)((()=>N?o?d&&S:k:void 0),[o,N,d,k,S]),A=(0,n.useMemo)((()=>x.validators&&function(e){const s={};for(let t=0;t<e.length;t++){const a=e[t];s[a.key]=a}return s}(x.validators)),[x]),E=(0,n.useRef)(o?[[b("intentions"),"start",3],[b("nominators"),"expand"],[b("commission"),"number"],[]]:[[b("validators"),"start",3],[b("other stake"),"expand"],[b("commission")],[b("last #")],[]]);return(0,a.jsx)(l.iA,{className:e,empty:o?I&&b("No waiting validators found"):I&&h&&A&&b("No active validators found"),emptySpinner:(0,a.jsxs)(a.Fragment,{children:[!S&&(0,a.jsx)("div",{children:b("Retrieving validators")}),!A&&(0,a.jsx)("div",{children:b("Retrieving validator info")}),o?!d&&(0,a.jsx)("div",{children:b("Retrieving nominators")}):!h&&(0,a.jsx)("div",{children:b("Retrieving online status")}),!I&&(0,a.jsx)("div",{children:b("Preparing validator list")})]}),filter:(0,a.jsx)(Xs,{nameFilter:C,setNameFilter:w}),header:E.current,legend:(0,a.jsx)(et.Z,{isRelay:!o&&!!(f.query.parasShared||f.query.shared)?.activeValidatorIndices,minCommission:i}),children:I&&I.map((([e,s,n])=>(0,a.jsx)(Ut,{address:e,filterName:C,hasQueries:t,isElected:s,isFavorite:n,isMain:!o,isPara:m[e],lastBlock:j[e],minCommission:i,nominatedBy:d?.[e],points:v[e],recentlyOnline:h?.[e],toggleFavorite:g,validatorInfo:A?.[e]},e)))})}));var Kt=t(54705);const Xt=(0,l.zo)(l.Ty)`
  .validator--Account-block-icon {
    display: inline-block;
    margin-right: 0.75rem;
    margin-top: -0.25rem;
    vertical-align: middle;
  }

  .validator--Summary-authors {
    .validator--Account-block-icon+.validator--Account-block-icon {
      margin-left: -1.5rem;
    }
  }

  .percent {
    font-size: var(--font-percent-tiny);
  }
`,ea=n.memo((function({className:e="",stakingOverview:s,targets:{counterForNominators:t,inflation:{idealStake:n,inflation:o,stakedFraction:r},nominators:i,waitingIds:c}}){const{t:d}=(0,y.$)(),u=(0,a.jsx)("span",{className:"percent",children:"%"});return(0,a.jsxs)(Xt,{className:e,children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(l.Jy,{label:d("validators"),children:s?(0,a.jsxs)(a.Fragment,{children:[(0,k.u)(s.validators.length)," / ",(0,k.u)(s.validatorCount)]}):(0,a.jsx)("span",{className:"--tmp",children:"999 / 999"})}),(0,a.jsx)(l.Jy,{className:"media--900",label:d("waiting"),children:c?(0,k.u)(c.length):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(l.Jy,{className:"media--1000",label:d(t?"active / nominators":"nominators"),children:i?(0,a.jsxs)(a.Fragment,{children:[(0,k.u)(i.length),t&&(0,a.jsxs)(a.Fragment,{children:[" / ",(0,k.u)(t)]})]}):(0,a.jsx)("span",{className:"--tmp",children:"999 / 999"})})]}),(0,a.jsxs)("section",{children:[n>0&&Number.isFinite(n)&&(0,a.jsx)(l.Jy,{className:"media--1400",label:d("ideal staked"),children:(0,a.jsxs)(a.Fragment,{children:[(100*n).toFixed(1),u]})}),r>0&&(0,a.jsx)(l.Jy,{className:"media--1300",label:d("staked"),children:(0,a.jsxs)(a.Fragment,{children:[(100*r).toFixed(1),u]})}),o>0&&Number.isFinite(o)&&(0,a.jsx)(l.Jy,{className:"media--1200",label:d("inflation"),children:(0,a.jsxs)(a.Fragment,{children:[o.toFixed(1),u]})})]}),(0,a.jsx)("section",{children:(0,a.jsx)(Kt.Z,{})})]})})),sa={},ta={},aa={},na=n.memo((function({className:e="",favorites:s,hasAccounts:t,hasQueries:o,minCommission:r,nominatedBy:i,ownStashes:d,paraValidators:u,stakingOverview:h,targets:p,toggleFavorite:x,toggleLedger:g,toggleNominatedBy:b}){const{t:f}=(0,y.$)(),{api:j}=(0,c.h)(),{byAuthor:v,eraPoints:C}=(0,Rt.E)(),[w,N]=(0,n.useState)(0),[k,S]=(0,n.useState)(1),I=(0,m.W7)(j.derive.imOnline?.receivedHeartbeats),A=(0,n.useCallback)((e=>{e&&b(),N(e)}),[b]),E=(0,n.useRef)([{text:f("Own validators"),value:"mine"},{text:f("All validators"),value:"all"}]),M=(0,n.useRef)([{text:f("Active"),value:"active"},{text:f("Waiting"),value:"waiting"}]),P=(0,n.useMemo)((()=>d&&d.map((({stashId:e})=>e))),[d]);(0,n.useEffect)((()=>{g&&g()}),[g]);const T=0===k;return(0,a.jsxs)("div",{className:`${e} staking--Overview`,children:[(0,a.jsx)(ea,{stakingOverview:h,targets:p}),t&&0===d?.length&&(0,a.jsx)(qt,{}),(0,a.jsxs)(l.zx.Group,{children:[(0,a.jsx)(l.tX,{onChange:S,options:E.current,value:k}),(0,a.jsx)(l.tX,{onChange:A,options:M.current,value:w})]}),(0,a.jsx)(Yt,{byAuthor:0===w?v:ta,eraPoints:0===w?C:aa,favorites:s,hasQueries:o,isIntentions:1===w,isOwn:T,minCommission:0===w?r:void 0,nominatedBy:1===w?i:void 0,ownStashIds:P,paraValidators:0===w&&u||sa,recentlyOnline:0===w?I:void 0,stakingOverview:h,targets:p,toggleFavorite:x},w)]})})),oa=["actions","payout"],ra={defaultValue:[!1,void 0,{}],transform:([e,s,t,a])=>[!!e&&e.isOpen,s&&!s.isZero()?s:void 0,t&&a?a.reduce(((e,s)=>({...e,[t[s.toNumber()].toString()]:!0})),{}):{}]},ia=l.zo.main`
  .staking--Chart {
    margin-top: 1.5rem;

    h1 {
      margin-bottom: 0.5rem;
    }

    .ui--Spinner {
      margin: 2.5rem auto;
    }
  }

  .staking--optionsBar {
    margin: 0.5rem 0 1rem;
    text-align: center;
    white-space: normal;

    .staking--buttonToggle {
      display: inline-block;
      margin-right: 1rem;
      margin-top: 0.5rem;
    }
  }

  .ui--Expander.stakeOver {
    .ui--Expander-summary {
      color: var(--color-error);
    }
  }
`,la=n.memo((function({basePath:e,className:s=""}){const{t}=(0,y.$)(),{api:b}=(0,c.h)(),{areAccountsLoaded:f,hasAccounts:j}=(0,d.x)(),{pathname:v}=(0,o.TH)(),[C,w]=(0,n.useState)(!1),[N,k]=(0,u.r)(Q),[S,I]=(0,n.useState)(!1),A=Ct(S),E=(0,m.W7)(b.derive.staking.overview),[M,P,T]=(0,h.L)([b.query.staking.eraElectionStatus,b.query.staking.minCommission,b.query.session.validators,(b.query.parasShared||b.query.shared)?.activeValidatorIndices],ra),D=(0,i.Z)(),F=(0,p.w)(),V=(0,x.g)(),R=Vt(N,C),q=(0,n.useRef)(function(e){return{bags:`${e}/bags`,payout:`${e}/payout`,pools:`${e}/pools`,query:[`${e}/query/:value`,`${e}/query`],slashes:`${e}/slashes`,targets:`${e}/targets`}}(e)),O=(0,n.useMemo)((()=>j&&!!b.query.imOnline?.authoredBlocks&&!!b.query.staking.activeEra),[b,j]),z=(0,n.useMemo)((()=>j&&!!F&&0!==F.length),[j,F]),B=(0,n.useMemo)((()=>(F||[]).filter((({isStashValidating:e})=>e))),[F]),$=(0,n.useCallback)((()=>w(!0)),[]),L=(0,n.useCallback)((()=>I(!0)),[]),H=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")},{name:"actions",text:t("Accounts")},z&&(0,g.m)(b.query.staking.activeEra)&&{name:"payout",text:t("Payouts")},(0,g.m)(b.query.nominationPools?.minCreateBond)&&{name:"pools",text:t("Pools")},{alias:"returns",name:"targets",text:t("Targets")},z&&(0,g.m)((b.query.voterBagsList||b.query.bagsList||b.query.voterList)?.counterForListNodes)&&{name:"bags",text:t("Bags")},{count:V.reduce(((e,[,s])=>e+s.length),0),name:"slashes",text:t("Slashes")},{hasParams:!0,name:"query",text:t("Validator stats")}].filter((e=>!!e))),[b,z,V,t]);return(0,a.jsxs)(ia,{className:`${s} staking--App`,children:[(0,a.jsx)(l.mQ,{basePath:e,hidden:f&&!j?oa:void 0,items:H}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:q.current.bags,children:(0,a.jsx)(us,{ownStashes:F})}),(0,a.jsx)(o.AW,{path:q.current.payout,children:(0,a.jsx)(ks,{historyDepth:R.historyDepth,isInElection:M,ownPools:D,ownValidators:B})}),(0,a.jsx)(o.AW,{path:q.current.pools,children:(0,a.jsx)(r.Z,{ownPools:D})}),(0,a.jsx)(o.AW,{path:q.current.query,children:(0,a.jsx)($s,{})}),(0,a.jsx)(o.AW,{path:q.current.slashes,children:(0,a.jsx)(Js,{ownStashes:F,slashes:V})}),(0,a.jsx)(o.AW,{path:q.current.targets,children:(0,a.jsx)(yt,{isInElection:M,nominatedBy:A,ownStashes:F,stakingOverview:E,targets:R,toggleFavorite:k,toggleLedger:$,toggleNominatedBy:L})})]}),(0,a.jsx)(Ze,{className:v===`${e}/actions`?"":"--hidden",isInElection:M,minCommission:P,ownPools:D,ownStashes:F,targets:R}),(0,a.jsx)(na,{className:e===v?"":"--hidden",favorites:N,hasAccounts:j,hasQueries:O,minCommission:P,nominatedBy:A,ownStashes:F,paraValidators:T,stakingOverview:E,targets:R,toggleFavorite:k,toggleNominatedBy:L})]})}))},57272:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-staking")}},75030:(e,s,t)=>{t.d(s,{Z:()=>B});var a=t(52322),n=t(2784),o=t(24732),r=t(95209),i=t(90760),l=t(90778),c=t(38894),d=t(52107),u=t(63985);const m=n.memo((function({className:e,isDisabled:s,ownAccounts:t,params:{minCreateBond:r,minNominatorBond:m,nextPoolId:h}}){const{t:p}=(0,i.$)(),{api:x}=(0,l.h)(),[g,b]=(0,c.O)(),[f,j]=(0,n.useState)(null),[v,y]=(0,n.useState)(),[C,w]=(0,n.useState)(""),N=(0,n.useMemo)((()=>r&&m&&(0,d.x)(r,m,x.consts.balances.existentialDeposit)),[x,r,m]),k=(0,u.Z)(f,v,N),S=(0,n.useMemo)((()=>!C||C.length<3||C.length>32),[C]),I=(0,n.useMemo)((()=>v&&f&&!k&&h?x.tx.utility.batch([x.tx.nominationPools.create(v,f,f,f),x.tx.nominationPools.setMetadata(h,C)]):null),[x,f,v,k,C,h]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.zx,{icon:"plus",isDisabled:s||!N,label:p("Add pool"),onClick:b}),g&&(0,a.jsxs)(o.u_,{className:e,header:p("Create nomination pool"),onClose:b,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:p("The origin account will also be set as the pool admin, nominator and state toggler."),children:(0,a.jsx)(o.rp,{filter:t,label:p("create pool from"),onChange:j,type:"account",value:f,withExclude:!0})}),(0,a.jsx)(o.u_.Columns,{hint:p("The initial value to assign to the pool. It is set to the maximum of the minimum bond and the minium nomination value."),children:(0,a.jsx)(o.H,{autoFocus:!0,defaultValue:N,isError:k,label:p("initial value"),onChange:y})}),(0,a.jsx)(o.u_.Columns,{hint:p("The metadata description to set for this pool"),children:(0,a.jsx)(o.II,{isError:S,label:p("description"),maxLength:32,onChange:w})}),(0,a.jsx)(o.u_.Columns,{hint:p("The id that will be assigned to this nomination pool."),children:(0,a.jsx)(o.Rn,{defaultValue:h,isDisabled:!0,label:p("pool id")})})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:f,extrinsic:I,icon:"plus",isDisabled:!f||k||S,label:p("Create"),onStart:b})})]})]})}));var h=t(58607);const p=n.memo((function({className:e,isDisabled:s,ownAccounts:t,params:{minMemberBond:r},poolId:d}){const{t:m}=(0,i.$)(),{api:h}=(0,l.h)(),[p,x]=(0,c.O)(),[g,b]=(0,n.useState)(null),[f,j]=(0,n.useState)(),v=(0,u.Z)(g,f,r);return s?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.zx,{icon:"plus",isDisabled:!r,label:m("Join"),onClick:x}),p&&(0,a.jsxs)(o.u_,{className:e,header:m("Join nomination pool"),onClose:x,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:m("The account that will join the pool."),children:(0,a.jsx)(o.rp,{filter:t,label:m("join pool from"),onChange:b,type:"account",value:g,withExclude:!0})}),(0,a.jsx)(o.u_.Columns,{hint:m("The initial value to assign to the pool. It is set to the minimum value required to join a pool."),children:(0,a.jsx)(o.H,{autoFocus:!0,defaultValue:r,isError:v,label:m("initial value"),onChange:j})})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:g,icon:"plus",isDisabled:!g||v,label:m("Join"),onStart:x,params:[f,d],tx:h.tx.nominationPools.join})})]})]})}));var x=t(19042);const g=o.zo.tr`
  .label-column-right,
  .label-column-left{
    display: flex;
    align-items: center;

    .label {
      width: 50%;
    }
  }

  .label {
    text-align: right;
    padding: 0 1.7rem 0 0;
    line-height: normal;
    color: var(--color-label);
    text-transform: lowercase;
  }

  .clamp {
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
    box-orient: vertical;
    display: -webkit-box;
    line-clamp: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,b=n.memo((function({className:e="",members:s,ownAccounts:t,params:r,poolId:l}){const{t:d}=(0,i.$)(),u=(0,x.Z)(l),[m,b]=(0,c.O)(!1),f=(0,n.useCallback)((()=>s.map((({accountId:e,member:s},t)=>(0,a.jsx)(o.ax,{balance:s.points,value:e,withBalance:!0,withShrink:!0},`${t}:${e}`)))),[s]),j=(0,n.useCallback)((()=>u&&u.nominating.map(((e,s)=>(0,a.jsx)(o.ax,{value:e,withShrink:!0},`${s}:${e}`)))),[u]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(g,{className:`${e} isFirst isExpanded ${m?"":"isLast"}`,children:[(0,a.jsx)(o.iA.Column.Id,{value:l}),(0,a.jsx)("td",{className:"start",children:(0,a.jsx)("div",{className:m?"":"clamp",children:u?u.metadata:(0,a.jsx)("span",{className:"--tmp",children:"This is a pool placeholder"})})}),(0,a.jsx)("td",{className:"number media--1100",children:u?u.bonded.state.type:(0,a.jsx)("span",{className:"--tmp",children:"Destroying"})}),(0,a.jsx)(o.iA.Column.Balance,{value:u?.bonded.points,withLoading:!0}),(0,a.jsx)("td",{className:"number media--1400",children:u&&!u.rewardClaimable.isZero()&&(0,a.jsx)(h.Z,{value:u.rewardClaimable})}),(0,a.jsx)("td",{className:"number",children:u&&0!==u.nominating.length&&(0,a.jsx)(o.n0,{className:"media--1300",empty:d("No nominees"),renderChildren:j,summary:d("Nominees ({{count}})",{replace:{count:u.nominating.length}})})}),(0,a.jsx)("td",{className:"number",children:s&&0!==s.length&&(0,a.jsx)(o.n0,{className:"media--1200",empty:d("No members"),renderChildren:f,summary:d("Members ({{count}})",{replace:{count:s.length}})})}),(0,a.jsx)("td",{className:"button",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p,{isDisabled:!u.bonded.state.isOpen||!!r.maxMembersPerPool&&!u.bonded.memberCounter.ltn(r.maxMembersPerPool),ownAccounts:t,params:r,poolId:l}),(0,a.jsx)(o.Vh,{expanded:m,onClick:b})]}):(0,a.jsx)(o.$j,{noLabel:!0})})]}),u&&m&&(0,a.jsxs)(g,{className:`${e} isExpanded isLast`,children:[(0,a.jsxs)("td",{colSpan:4,children:[(0,a.jsxs)("div",{className:"label-column-right",children:[(0,a.jsx)("div",{className:"label",children:d("creator")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(o.ax,{value:u.bonded.roles.depositor})})]}),u.bonded.roles.root.isSome&&(0,a.jsxs)("div",{className:"label-column-right",children:[(0,a.jsx)("div",{className:"label",children:d("root")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(o.ax,{value:u.bonded.roles.root.unwrap()})})]}),u.bonded.roles.nominator.isSome&&(0,a.jsxs)("div",{className:"label-column-right",children:[(0,a.jsx)("div",{className:"label",children:d("nominator")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(o.ax,{value:u.bonded.roles.nominator.unwrap()})})]}),u.bonded.roles.stateToggler?.isSome&&(0,a.jsxs)("div",{className:"label-column-right",children:[(0,a.jsx)("div",{className:"label",children:d("toggler")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(o.ax,{value:u.bonded.roles.stateToggler.unwrap()})})]})]}),(0,a.jsxs)("td",{colSpan:4,children:[(0,a.jsxs)("div",{className:"label-column-right",children:[(0,a.jsx)("div",{className:"label",children:d("stash")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(o.ax,{value:u.stashId})})]}),(0,a.jsxs)("div",{className:"label-column-right",children:[(0,a.jsx)("div",{className:"label",children:d("rewards")}),(0,a.jsx)("div",{className:"inline-balance",children:(0,a.jsx)(o.ax,{value:u.rewardId})})]})]})]})]})}));var f=t(51240),j=t(39824),v=t(9118),y=t(11677);const C=[],w={transform:e=>e.reduce(((e,[{args:[s]},t])=>{if(t.isSome){const a=t.unwrap(),n=a.poolId.toString();e[n]||(e[n]=[]),e[n].push({accountId:s.toString(),member:a})}return e}),{})},N={transform:([[e],s])=>e.filter(((e,t)=>s[t].isSome)).map(((e,t)=>({accountId:e.toString(),member:s[t].unwrap()}))),withParamsTransform:!0};function k(e){const s=[];return e.forEach((({event:{data:e,method:t}})=>{if("Bonded"===t){const[t,,,a]=e;a.isTrue&&s.push(t)}})),{added:s,removed:[]}}const S=(0,y.e)("useMembers",(function(){const{api:e}=(0,l.h)(),[s,t]=(0,n.useState)(),a=(0,f.t)(e.query.nominationPools.poolMembers,[],w),o=(0,j.N)([e.events.nominationPools.Bonded],k,C),r=(0,v.W7)(o&&0!==o.length&&e.query.nominationPools.poolMembers.multi,[o],N);return(0,n.useEffect)((()=>{a&&t(a)}),[a]),(0,n.useEffect)((()=>{r&&t((e=>e&&function(e,s){return s.reduce(((e,s)=>{const t=s.member.poolId.toString(),a=[];return e[t]&&e[t].forEach((e=>{e.accountId!==s.accountId&&a.push(e)})),a.push(s),e[t]=a,e}),{...e})}(e,r)))}),[r]),s})),I=n.memo((function({className:e,ids:s,ownPools:t,params:l}){const{t:c}=(0,i.$)(),d=S(),[u,h]=(0,n.useState)((()=>t&&t.length?0:1)),p=(0,n.useMemo)((()=>t&&(0,r.a)(t.map((({members:e})=>Object.keys(e))))),[t]),x=(0,n.useMemo)((()=>!s||!!l.maxPools&&s.length>l.maxPools),[s,l]),g=(0,n.useMemo)((()=>t&&s?u?s:s.filter((e=>t.some((({poolId:s})=>e.eq(s))))):void 0),[s,t,u]),f=(0,n.useMemo)((()=>[[c("pools"),"start",2],[c("state"),"media--1100"],[c("points")],[c("claimable"),"media--1400"],[void 0,void 0,3]]),[c]),j=(0,n.useRef)([{text:c("Own pools"),value:"mine"},{text:c("All pools"),value:"all"}]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.zx.Group,{children:[(0,a.jsx)(o.tX,{onChange:h,options:j.current,value:u}),(0,a.jsx)(m,{isDisabled:x,ownAccounts:p,params:l})]}),(0,a.jsx)(o.iA,{className:e,empty:d&&g&&c("No available nomination pools"),emptySpinner:c("Retrieving nomination pools"),header:f,children:d&&g&&g.map((e=>(0,a.jsx)(b,{members:d[e.toString()],ownAccounts:p,params:l,poolId:e},e.toString())))})]})}));var A=t(65968),E=t(14681);const M=n.memo((function({className:e,params:{maxMembers:s,maxMembersPerPool:t,maxPools:n},poolCount:r}){const{t:l}=(0,i.$)();return(0,a.jsxs)(o.Ty,{className:e,children:[(0,a.jsx)(o.Jy,{label:l("pools"),children:(0,A.h)(r)&&(0,a.jsxs)(a.Fragment,{children:[(0,E.u)(r),n>0&&(0,a.jsxs)(a.Fragment,{children:[" / ",(0,E.u)(n)]})]})}),(0,a.jsxs)("section",{children:[s>0&&(0,a.jsx)(o.Jy,{label:l("max. members"),children:(0,E.u)(s)}),t>0&&(0,a.jsx)(o.Jy,{label:l("max. members / pool"),children:(0,E.u)(t)})]})]})}));var P=t(65857),T=t(54890),D=t(95292);const F={defaultValue:{lastPoolId:D.nw,maxMembers:0,maxMembersPerPool:0,maxPools:0,nextPoolId:D.If},transform:([e,s,t,a,n,o,r])=>({lastPoolId:e,maxMembers:s.unwrapOr(D.nw).toNumber(),maxMembersPerPool:t.unwrapOr(D.nw).toNumber(),maxPools:a.unwrapOr(D.nw).toNumber(),minCreateBond:n,minJoinBond:o,minMemberBond:o,minNominatorBond:r,nextPoolId:e.add(D.If)})},V=(0,y.e)("useParams",(function(){const{api:e}=(0,l.h)();return(0,T.L)([e.query.nominationPools.lastPoolId,e.query.nominationPools.maxPoolMembers,e.query.nominationPools.maxPoolMembersPerPool,e.query.nominationPools.maxPools,e.query.nominationPools.minCreateBond,e.query.nominationPools.minJoinBond,e.query.staking.minNominatorBond],F)}));var R=t(12298);const q={transform:e=>e.map((({args:[e]})=>e)).sort(((e,s)=>e.cmp(s)))};function O(e){const s=[],t=[];return e.forEach((({event:{data:e,method:a}})=>{"Created"===a?s.push(e[1]):t.push(e[0])})),{added:s,removed:t}}const z=(0,y.e)("usePoolIds",(function(){const{api:e}=(0,l.h)(),s=(0,R.k)(e.query.nominationPools.bondedPools,[],q);return(0,j.N)([e.events.nominationPools.Created,e.events.nominationPools.Destroyed],O,s)})),B=n.memo((function({className:e,ownPools:s}){const t=z(),n=(0,P.Z)(),o=V();return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(M,{params:o,poolCount:t?.length}),(0,a.jsx)(I,{ids:t,ownPools:n||s,params:o})]})}))},63985:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(2784),n=t(90778),o=t(9118);const r=(0,t(11677).e)("useAmountError",(function(e,s,t){const{api:r}=(0,n.h)(),i=(0,o.W7)(!!e&&r.derive.balances.all,[e]);return(0,a.useMemo)((()=>!s||s.isZero()||!t||t.gt(s)||!!i&&s.gt(i.availableBalance.sub(r.consts.balances.existentialDeposit))),[r,s,i,t])}))},65857:(e,s,t)=>{t.d(s,{Z:()=>d});var a=t(2784),n=t(90778),o=t(34814),r=t(9118),i=t(11677),l=t(43002);const c={transform:([[e],s])=>{const t=[];for(let a=0;a<e.length;a++)if(s[a].isSome){const n=s[a].unwrap();let o=t.find((({poolId:e})=>e.eq(n.poolId)));o||(o={members:{},poolId:n.poolId},t.push(o)),o.members[e[a]]=n}return t},withParamsTransform:!0},d=(0,i.e)("useOwnPools",(function(){const{api:e}=(0,n.h)(),{allAccounts:s}=(0,o.x)(),t=(0,r.W7)(e.query.nominationPools?.poolMembers.multi,[s],c);return(0,a.useMemo)((()=>t&&t.map((s=>({...s,...(0,l.i)(e,s.poolId)})))),[e,t])}))},43002:(e,s,t)=>{t.d(s,{Z:()=>p,i:()=>h});var a=t(2784),n=t(90778),o=t(11677),r=t(64021),i=t(51330),l=t(57928);const c=new Uint8Array(32),d=(0,r.d)("modl"),u={bitLength:32,isLe:!0};function m(e,s,t,a){return e.registry.createType("AccountId32",(0,i.e)(d,s,new Uint8Array([a]),(0,l.a)(t,u),c)).toString()}function h(e,s){const t=e.consts.nominationPools.palletId.toU8a();return{rewardId:m(e,t,s,1),stashId:m(e,t,s,0)}}const p=(0,o.e)("usePoolAccounts",(function(e){const{api:s}=(0,n.h)();return(0,a.useMemo)((()=>h(s,e)),[s,e])}))},19042:(e,s,t)=>{t.d(s,{Z:()=>u});var a=t(2784),n=t(90778),o=t(54890),r=t(11677),i=t(52107),l=t(95292),c=t(43002);const d={defaultValue:null,transform:([e,s,t,a,n])=>{return e.isSome&&t.isSome?{bonded:e.unwrap(),metadata:s.length?(o=s.isUtf8?s.toUtf8():s.toString(),o.replace(/[^\x20-\x7E]/g,"")):null,nominating:a.unwrapOr({targets:[]}).targets.map((e=>e.toString())),reward:t.unwrap(),rewardClaimable:n.data.free}:null;var o}},u=(0,r.e)("usePoolInfo",(function(e){const{api:s}=(0,n.h)(),t=(0,c.Z)(e),r=(0,o.L)([[s.query.nominationPools.bondedPools,e],[s.query.nominationPools.metadata,e],[s.query.nominationPools.rewardPools,e],[s.query.staking.nominators,t.stashId],[s.query.system.account,t.rewardId]],d);return(0,a.useMemo)((()=>r&&{...t,...r,rewardClaimable:(0,i.x)(l.nw,r.rewardClaimable.sub(s.consts.balances.existentialDeposit))}),[s,r,t])}))},97473:(e,s,t)=>{t.d(s,{Z:()=>pe});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(54131),c=t(33661),d=t(75030),u=t(90760);const m={useExposure:{},useHeartbeat:{}},h={useElectedValidators:{},usePoints:{},useValidatorsActive:{},useValidatorsAll:{},useValidatorsWaiting:{}};function p(e,s,t){return(0,n.useEffect)((()=>{t&&(m[e][s]={value:t})}),[s,e,t]),t||m[e][s]?.value}function x(e,s){return(0,n.useEffect)((()=>{s&&(h[e]={value:s})}),[e,s]),s||h[e]?.value}var g=t(9118),b=t(11677);const f={transform:e=>e.isSome?e.unwrap().index:null},j={transform:e=>e.unwrapOr(null)},v=(0,b.e)("useSessionInfo",(function(){const{api:e}=(0,i.h)(),s=(0,g.W7)(e.query.staking.activeEra,void 0,f),t=(0,g.W7)(e.query.staking.currentEra,void 0,j),a=(0,g.W7)(e.query.session.currentIndex);return(0,n.useMemo)((()=>({activeEra:s,currentEra:t,currentSession:a})),[s,t,a])}));var y=t(27960),C=t(33403),w=t(34814),N=t(12298);const k={transform:e=>e.map((({args:[,e]})=>e.toString()))},S=(0,b.e)("useElectedValidators",(function({currentEra:e}){const{api:s}=(0,i.h)(),t=(0,n.useMemo)((()=>e&&[e]),[e]);return x("useElectedValidators",(0,N.k)(t&&s.query.staking.erasStakers,t,k))}));function I(e,s){return e.isFavorite===s.isFavorite?e.isOwned===s.isOwned?e.isElected===s.isElected?0:e.isElected?-1:1:e.isOwned?-1:1:e.isFavorite?-1:1}const A=(0,b.e)("useTaggedValidators",(function(e,s,t){const{allAccounts:a}=(0,w.x)(),o=S(s),r=(0,n.useMemo)((()=>o&&t&&function(e,s){return e.map((e=>{const t=s.includes(e.stashId);return e.isElected!==t?(0,C.Z)({},e,{isElected:t}):e}))}(t,o)),[o,t]);return(0,n.useMemo)((()=>r&&function(e,s,t){return t.map((t=>{const a=s.includes(t.stashId),n=e.includes(t.stashId);return t.isFavorite!==a||t.isOwned!==n?(0,C.Z)({},t,{isFavorite:a,isOwned:n}):t})).sort(I)}(a,e,r)),[a,e,r])})),E={transform:e=>e.map(((e,s)=>{const t=e.toString();return{isElected:!1,isFavorite:!1,isOwned:!1,key:`${t}:${s}`,stashId:t,stashIndex:s}}))},M={transform:e=>e.map((e=>e.toNumber()))},P=(0,b.e)("useValidatorsActive",(function(e,s){const{api:t}=(0,i.h)(),a=(0,g.W7)(t.query.session.validators,void 0,E),o=(0,g.W7)((t.query.parasShared||t.query.shared)?.activeValidatorIndices,void 0,M),r=(0,n.useMemo)((()=>o&&a?a.map(((e,s)=>o.includes(s)?(0,C.Z)({isPara:!0},e):e)):a),[o,a]);return x("useValidatorsActive",A(e,s,r))}));var T=t(47623),D=t(38894),F=t(58607),V=t(14681),R=t(48801),q=t.n(R);const O={transform:({others:e,own:s,total:t})=>({others:e.map((({value:e,who:s})=>({value:e.unwrap(),who:s.toString()}))).sort(((e,s)=>s.value.cmp(e.value))),own:s.unwrap(),total:t.unwrap()})},z=(0,b.e)("useExposure",(function({stashId:e},{activeEra:s}){const{api:t}=(0,i.h)(),a=(0,n.useMemo)((()=>s&&[s,e]),[s,e]),o=(0,g.W7)(a&&t.query.staking.erasStakers,a,O),r=(0,g.W7)(a&&t.query.staking.erasStakersClipped,a,O),l=(0,n.useMemo)((()=>o&&r&&function(e,s){let t;const a=e.others.filter((({who:e})=>!s.others.find((s=>e===s.who))));return a.length&&(t={others:a,total:a.reduce(((e,{value:s})=>e.iadd(s)),new(q())(0))}),{clipped:s,exposure:e,waiting:t}}(o,r)),[r,o]);return p("useExposure",e,l)}));var B=t(65968),$=t(47538);const L={},H={transform:e=>e.toNumber()},_={transform:e=>e.isSome},Z=(0,b.e)("useHeartbeat",(function({stashId:e,stashIndex:s},{currentSession:t}){const{api:a}=(0,i.h)(),o=(0,n.useMemo)((()=>-1===s?void 0:t&&{authoredBlocks:[t,e],receivedHeartbeats:[t,s]}),[t,e,s]),r=(0,g.W7)(o&&a.query.imOnline.authoredBlocks,o?.authoredBlocks,H),l=(0,g.W7)(o&&a.query.imOnline.receivedHeartbeats,o?.receivedHeartbeats,_),c=(0,n.useMemo)((()=>(0,B.h)(r)&&(0,$.j)(l)&&{authoredBlocks:r,isOnline:!(!r&&!l)}),[r,l]);return p("useHeartbeat",e,c)||L})),W=n.memo((function({children:e,className:s="",isExpanded:t}){return t?(0,a.jsxs)("tr",{className:`${s} isExpanded isLast`,children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{}),e,(0,a.jsx)("td",{})]}):null})),U=n.memo((function({children:e,className:s="",isExpanded:t}){return(0,a.jsxs)("tr",{className:`${s} isExpanded ${t?"":"isLast"} packedTop`,children:[(0,a.jsx)("td",{}),e,(0,a.jsx)("td",{})]})})),J=r.zo.div`
  .authoredBlocks {
    vertical-align: top;
    font-size: var(--font-percent-tiny);
  }
`,G=n.memo((function({className:e,heartbeat:{authoredBlocks:s,isOnline:t}={},isChilled:o,nominators:i,validator:{isElected:l,isPara:c}}){const{allAccounts:d}=(0,w.x)(),u=(0,n.useMemo)((()=>i&&i.some((e=>d.includes(e)))),[d,i]),m=(0,a.jsx)(r.Ct,{className:"opaque",color:"gray"});return(0,a.jsxs)(J,{className:e,children:[u?(0,a.jsx)(r.Ct,{color:"green",icon:"hand-paper"}):m,c?(0,a.jsx)(r.Ct,{color:"purple",icon:"vector-square"}):m,o?(0,a.jsx)(r.Ct,{color:"red",icon:"cancel"}):l?(0,a.jsx)(r.Ct,{color:"blue",icon:"chevron-right"}):m,t?s?(0,a.jsx)(r.Ct,{color:"green",info:(0,a.jsx)("span",{className:"authoredBlocks",children:s})}):(0,a.jsx)(r.Ct,{color:"green",icon:"envelope"}):m]})})),Q=n.memo((function({children:e,className:s="",heartbeat:t,isExpanded:n,toggleExpanded:o,toggleFavorite:i,validator:l}){return(0,a.jsxs)("tr",{className:`${s} isExpanded isFirst packedBottom`,children:[(0,a.jsx)(r.iA.Column.Favorite,{address:l.stashId,isFavorite:l.isFavorite,toggle:i}),(0,a.jsx)("td",{className:"statusInfo",rowSpan:2,children:(0,a.jsx)(G,{heartbeat:t,validator:l})}),(0,a.jsxs)("td",{className:"address relative all",children:[(0,a.jsx)(r.N,{value:l.stashId}),e]}),(0,a.jsx)(r.iA.Column.Expand,{isExpanded:n,toggle:o})]})}));function Y({className:e=""}){return(0,a.jsx)("td",{className:e})}const K=n.memo((function({className:e="",points:s,sessionInfo:t,toggleFavorite:o,validator:i}){const[l,c]=(0,D.O)(),d=(0,n.useRef)({counter:0,points:0}),u=z(i,t),m=Z(i,t),h=(0,n.useMemo)((()=>s&&d.current.points!==s?(d.current.points=s,d.current.counter=(d.current.counter+1)%25,`greyAnim-${d.current.counter}`):""),[s,d]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{className:e,heartbeat:m,isExpanded:l,toggleExpanded:c,toggleFavorite:o,validator:i,children:s&&(0,a.jsx)(r.Vp,{className:`${h} absolute`,color:"lightgrey",label:(0,V.u)(s)})}),(0,a.jsx)(U,{className:e,isExpanded:l,children:(0,a.jsx)(r.iA.Column.Balance,{className:"relative",label:u?.waiting&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"("}),(0,a.jsx)(F.Z,{value:u.waiting.total}),(0,a.jsxs)("span",{children:[", ",u.waiting.others.length,")"]})]}),value:u?.clipped?.total,withLoading:!0})}),(0,a.jsx)(W,{className:e,isExpanded:l,children:(0,a.jsx)(Y,{validator:i})})]})})),X=n.memo((function({className:e="",legend:s,points:t,sessionInfo:o,toggleFavorite:i,validatorsActive:l}){const{t:c}=(0,u.$)(),d=(0,T.q)(),m=(0,n.useRef)([[c("validators"),"start",4]]);return(0,a.jsx)(r.iA,{className:e,empty:d&&l&&c("No session validators found"),emptySpinner:c("Retrieving session validators"),header:m.current,isSplit:!0,legend:s,children:d&&l?.map((e=>(0,a.jsx)(K,{points:t?.[e.stashId],sessionInfo:o,toggleFavorite:i,validator:e},e.key)))})}));var ee=t(95292);const se={transform:({individual:e})=>[...e.entries()].filter((([,e])=>e.gt(ee.nw))).reduce(((e,[s,t])=>(e[s.toString()]=t.toNumber(),e)),{})},te=(0,b.e)("usePoints",(function({activeEra:e}){const{api:s}=(0,i.h)(),t=(0,n.useMemo)((()=>e&&[e]),[e]);return x("usePoints",(0,g.W7)(t&&s.query.staking.erasRewardPoints,t,se))}));var ae=t(39824);const ne=[],oe={transform:e=>e.map((({args:[e]})=>e))};function re(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:a}})=>{"Bonded"===a?s.push(e):t.push(e)})),{added:s,removed:t}}const ie=(0,b.e)("useValidatorsAll",(function(e,s){const{api:t}=(0,i.h)(),a=(0,N.k)(t.query.staking.validators,ne,oe),o=(0,ae.N)([t.events.staking.Bonded],re,a),r=(0,n.useMemo)((()=>function(e){return e&&e.map((e=>{const s=e.toString();return{isElected:!1,isFavorite:!1,isOwned:!1,key:`${s}::-1`,stashId:s,stashIndex:-1}}))}(o)),[o]);return x("useValidatorsAll",A(e,s,r))})),le=(0,b.e)("useValidatorsWaiting",(function(e,s,t){const a=ie(e,s);return x("useValidatorsWaiting",(0,n.useMemo)((()=>{return a&&t&&(e=t,a.filter((({stashId:s})=>!e.some((e=>e.stashId===s)))));var e}),[t,a]))}));function ce({className:e=""}){return(0,a.jsx)("td",{className:e})}const de=n.memo((function({className:e="",toggleFavorite:s,validator:t}){const[n,o]=(0,D.O)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q,{className:e,isExpanded:n,toggleExpanded:o,toggleFavorite:s,validator:t}),(0,a.jsx)(U,{className:e,isExpanded:n,children:(0,a.jsx)("td",{})}),(0,a.jsx)(W,{className:e,isExpanded:n,children:(0,a.jsx)(ce,{validator:t})})]})})),ue=n.memo((function({className:e="",favorites:s,legend:t,sessionInfo:o,toggleFavorite:i,validatorsActive:l}){const{t:c}=(0,u.$)(),d=(0,T.q)(),m=le(s,o,l),h=(0,n.useRef)([[c("waiting"),"start",4]]);return(0,a.jsx)(r.iA,{className:e,empty:d&&m&&c("No waiting validators found"),emptySpinner:c("Retrieving waiting validators"),header:h.current,isSplit:!0,legend:t,children:d&&m?.map((e=>(0,a.jsx)(de,{toggleFavorite:i,validator:e},e.key)))})})),me=r.zo.div`
  .ui--Table table {
    td.statusInfo {
      padding: 0 0 0 0.5rem;
      vertical-align: middle;

      > div {
        display: inline-block;
        max-width: 3.6rem;
        min-width: 3.6rem;

        .ui--Badge {
          margin: 0.125rem;

          &.opaque {
            opacity: var(--opacity-gray);
          }
        }
      }

      + td.address {
        padding-left: 0.5rem;
      }
    }
  }
`,he=n.memo((function({className:e="",favorites:s,isRelay:t,sessionInfo:o,toggleFavorite:i}){const{t:l}=(0,u.$)(),[c,d]=(0,n.useState)(0),m=P(s,o),h=te(o),p=(0,n.useRef)([{text:l("Active"),value:"active"},{text:l("Waiting"),value:"waiting"}]),x=(0,a.jsx)(y.Z,{isRelay:t});return(0,a.jsxs)(me,{className:e,children:[(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.tX,{onChange:d,options:p.current,value:c})}),0===c?(0,a.jsx)(X,{legend:x,points:h,sessionInfo:o,toggleFavorite:i,validatorsActive:m}):(0,a.jsx)(ue,{favorites:s,legend:x,sessionInfo:o,toggleFavorite:i,validatorsActive:m})]})})),pe=n.memo((function({basePath:e}){const{t:s}=(0,u.$)(),{api:t}=(0,i.h)(),p=(0,n.useRef)(function(e){return{bags:`${e}/bags`,payout:`${e}/payout`,pools:`${e}/pools`,query:[`${e}/query/:value`,`${e}/query`],slashes:`${e}/slashes`,targets:`${e}/targets`}}(e));(0,n.useEffect)((()=>()=>{!function(){for(const e of Object.keys(m))m[e]={};for(const e of Object.keys(h))h[e]={}}()}),[]);const[x,g]=(0,l.r)("staking:favorites"),b=v(),f=(0,n.useMemo)((()=>!!(t.query.parasShared||t.query.shared)?.activeValidatorIndices),[t]),j=(0,n.useRef)([{isRoot:!0,name:"sign",text:s("Validators")},(0,c.m)(t.query.nominationPools?.minCreateBond)&&{name:"pools",text:s("Pools")}]);return(0,a.jsxs)("main",{className:"staking--App",children:[(0,a.jsx)(r.mQ,{basePath:e,items:j.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:p.current.pools,children:(0,a.jsx)(d.Z,{})}),(0,a.jsx)(o.AW,{path:e,children:(0,a.jsx)(he,{favorites:x,isRelay:f,sessionInfo:b,toggleFavorite:g})})]})]})}))},90760:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-staking")}},46717:(e,s,t)=>{t.d(s,{Z:()=>_});var a=t(52322),n=t(2784),o=t(24732),r=t(69356),i=t(90778),l=t(83488),c=t(44055),d=t(12782),u=t(48358),m=t(84789),h=t(56623),p=t(55858);const x=[];function g(e,s){if(e){const e=s;return`const ${e.section}.${e.method}`}const t=s;if((0,u.U)(t)){const[,e]=(0,m.o)(t);return 58===e[0]?(0,h.z)(e):(0,p.c)(e)}return`${t.creator.section}.${t.creator.method}`}function b(e,{meta:s}){return(0,c.I)(e.lookup,s.type)}function f(e,{creator:{meta:{modifier:s,type:t}}}){const a=(0,d.PL)(e,t);return s.isOptional?`Option<${a}>`:a}function j(e,s){const{blockHash:t,id:n,isConst:o,key:i,params:c=[]}=s;if(!x[n]){let n,d;if(o){const{method:s,section:t}=i;n=(0,r.withCallDiv)(`consts.${t}.${s}`,{withIndicator:!0}),d=b(e,i)}else{if((0,u.U)(i))n=(0,r.withCallDiv)("rpc.state.subscribeStorage",{paramName:"params",paramValid:!0,params:[[i]],transform:([e])=>e,withIndicator:!0});else{const e=c.map((({value:e})=>e)),{creator:{meta:{type:s}}}=i,a=s.isPlain?0:s.asMap.hashers.length,o=e.length!==a;n=(0,r.withCallDiv)("subscribe",{paramName:"params",paramValid:!0,params:o?[i.entries,...e]:t?[i.at,t,...e]:[i,...e],withIndicator:!0})}d=i.creator&&i.creator.meta?f(e,i):"Raw"}const m={className:"ui--output"},h=n((e=>(0,a.jsx)("pre",{children:(0,l.Z)(d,e)})),m);x[s.id]=function(e,s,t,n){return{Component:s,refresh:()=>n((s=>(0,a.jsx)("pre",{children:(0,l.Z)(e,s)})),t),render:e=>n(e,t)}}(d,h,m,n)}return x[n]}const v=o.zo.div`
  margin-bottom: 0.25em;

  label {
    text-transform: none !important;
  }

  .ui.disabled.dropdown.selection {
    color: #aaa;
    opacity: 1;
  }

  .ui--IdentityIcon {
    margin: -10px 0;
    vertical-align: middle;
  }

  pre {
    margin: 0;

    .ui--Param-text {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }

  .storage--actionrow-buttons {
    margin-top: -0.25rem; /* offset parent spacing for buttons */
  }
`,y=n.memo((function({className:e="",onRemove:s,value:t}){const{api:r}=(0,i.h)(),[{Component:l},c,d]=(0,n.useMemo)((()=>[j(r.registry,t),g(t.isConst,t.key),t.isConst?b(r.registry,t.key):(0,u.U)(t.key)?"Raw":f(r.registry,t.key)]),[r,t]),m=(0,n.useCallback)((()=>{delete x[t.id],s(t.id)}),[s,t]);return l?(0,a.jsxs)(v,{className:`${e} storage--Query storage--actionrow`,children:[(0,a.jsx)("div",{className:"storage--actionrow-value",children:(0,a.jsx)(o.jN,{label:(0,a.jsxs)("div",{className:"storage--actionrow-label",children:[c,": ",d]}),children:(0,a.jsx)(l,{})})}),(0,a.jsx)("div",{className:"storage--actionrow-buttons",children:(0,a.jsx)(o.zx,{icon:"times",onClick:m},"close")})]}):null})),C=n.memo((function({onRemove:e,value:s}){return s&&s.length?(0,a.jsx)("section",{className:"storage--Queries",children:s.map((s=>(0,a.jsx)(y,{onRemove:e,value:s},s.id)))}):null}));var w=t(7267),N=t(61349);function k(){return(0,N.$G)("app-storage")}const S=n.memo((function({onAdd:e}){const{t:s}=k(),{api:t}=(0,i.h)(),[r]=(0,n.useState)((()=>{const e=Object.keys(t.consts)[0],s=Object.keys(t.consts[e])[0];return{meta:t.consts[e][s].meta,method:s,section:e}})),[l,c]=(0,n.useState)(r),d=(0,n.useCallback)((()=>e({isConst:!0,key:l})),[e,l]);return(0,a.jsxs)("section",{className:"storage--actionrow",children:[(0,a.jsx)("div",{className:"storage--actionrow-value",children:(0,a.jsx)(o.eV,{defaultValue:r,label:s("selected constant query"),onChange:c})}),(0,a.jsx)("div",{className:"storage--actionrow-buttons",children:(0,a.jsx)(o.zx,{icon:"plus",onClick:d})})]})}));var I=t(87418),A=t(6046),E=t(23601),M=t(1346),P=t(17751),T=t(74076);function D({creator:{meta:{type:e}}},s){return s.reduce(((e,s)=>e&&!(0,M.o)(s)&&!(0,M.o)(s.value)&&s.isValid),s.length===(e.isPlain?0:e.asMap.hashers.length))}function F(e,s,t){let a=[];if(s.isMap){const{hashers:t,key:n}=s.asMap;a=1===t.length?[(0,c.I)(e.lookup,n)]:e.lookup.getSiType(n).def.asTuple.map((s=>(0,c.I)(e.lookup,s)))}return a.map(((e,s)=>{let n;return t&&s===a.length-1?(n=(0,A.s)(`Option<${e}>`),n.withOptionActive=!0):n=(0,A.s)(e),{name:void 0,type:n}}))}function V(e,s){const t=s.filter((({value:t},a)=>!e||a!==s.length-1||!(0,P.F)(t)));return[t,t.length===s.length]}const R=o.zo.section`
  .ui--Column:last-child .ui--Labelled {
    padding-left: 0.5rem;

    label {
      left: 2.05rem; /* 3.55 - 1.5 (diff from padding above) */
    }
  }
`,q=n.memo((function({className:e="",onAdd:s}){const{t}=k(),{api:r}=(0,i.h)(),[{defaultValues:l,isIterable:c,key:d,params:u},h]=(0,n.useState)((()=>({defaultValues:void 0,isHeadKey:!0,isIterable:!1,key:r.query.timestamp?.now||r.query.system.events,params:[]}))),[{isValid:x,values:g},b]=(0,n.useState)((()=>({isValid:!0,values:[]}))),[{blockHash:f,textHash:j},v]=(0,n.useState)({blockHash:null,textHash:""}),y=(0,n.useMemo)((()=>r.query.timestamp?.now||r.query.system?.events||r.query.substrate.changesTrieConfig),[r]),[C,w,N]=(0,n.useMemo)((()=>{if(x)try{const[e]=V(c,g),s=e.map((({value:e})=>e)),t=s.length!==(d.creator.meta.type.isPlain?0:d.creator.meta.type.asMap.hashers.length);return[t,t&&d.creator.iterKey?d.creator.iterKey(...s).toHex():(0,p.c)((0,m.o)(d.creator(...s))[1]),t?null:d.creator.inspect(...s)]}catch{}return[!1,"0x",null]}),[c,x,d,g]),S=(0,n.useCallback)((()=>{const[e,t]=V(c,g);x&&s({blockHash:t?f:null,isConst:!1,key:d,params:e})}),[f,c,x,d,s,g]),A=(0,n.useCallback)((e=>v({blockHash:(0,T.vq)(e,256)?e:null,textHash:e})),[]),M=(0,n.useCallback)((e=>b({isValid:D(d,e),values:e})),[d]),P=(0,n.useCallback)((e=>{h(function(e,s){const{creator:{meta:{type:t},section:a}}=s,n=function(e,s){if(s.isPlain)return!0;const{hashers:t,key:a}=s.asMap;if(1===t.length)return e.lookup.getTypeDef(a).info!==E.u.Option;const n=e.lookup.getSiType(a).def.asTuple;return e.lookup.getTypeDef(n[n.length-1]).info!==E.u.Option}(e.registry,t);return{defaultValues:"session"===a&&t.isMap&&e.consts.session&&e.consts.session.dedupKeyPrefix?[{isValid:!0,value:e.consts.session.dedupKeyPrefix.toHex()}]:null,isIterable:n,key:s,params:F(e.registry,t,n)}}(r,e)),M([])}),[M,r]),q=(0,n.useMemo)((()=>!!x&&V(c,g)[1]),[c,x,g]),{creator:{method:O,section:z}}=d;return(0,a.jsxs)(R,{className:`${e} storage--actionrow`,children:[(0,a.jsxs)("div",{className:"storage--actionrow-value",children:[(0,a.jsx)(o.nU,{defaultValue:y,label:t("selected state query"),onChange:P}),(0,a.jsx)(I.Z,{onChange:M,onEnter:S,params:u,values:l},`${z}.${O}:params`),(0,a.jsx)(o.II,{isDisabled:!x||!q,isError:!!j&&!f,label:t("blockhash to query at"),onChange:A,placeholder:t("0x...")}),(0,a.jsxs)(o.P0,{className:"keyColumar",isPadded:!1,children:[(0,a.jsx)(o.P0.Column,{children:(0,a.jsx)(o.r_,{isDisabled:!0,label:t(C?"encoded partial key":"encoded storage key"),value:w,withCopy:!0})}),(0,a.jsx)(o.P0.Column,{children:(0,a.jsx)(o.R2,{inspect:N,label:t("encoded key details")})})]})]}),(0,a.jsx)("div",{className:"storage--actionrow-buttons",children:(0,a.jsx)(o.zx,{icon:"plus",isDisabled:!x,onClick:S})})]})}));var O=t(46610),z=t(88311);const B=n.memo((function({onAdd:e}){const{t:s}=k(),[{isValid:t,key:r},i]=(0,n.useState)((()=>({isValid:!1,key:new Uint8Array([])}))),l=(0,n.useCallback)((()=>{t&&e({isConst:!1,key:r})}),[t,r,e]),c=(0,n.useCallback)((e=>{const s=(0,O.Y)(e);i({isValid:0!==s.length,key:(0,z.N)(s)})}),[]);return(0,a.jsxs)("section",{className:"storage--actionrow",children:[(0,a.jsx)("div",{className:"storage--actionrow-value",children:(0,a.jsx)(o.II,{autoFocus:!0,label:s("hex-encoded storage key"),onChange:c,onEnter:l})}),(0,a.jsx)("div",{className:"storage--actionrow-buttons",children:(0,a.jsx)(o.zx,{icon:"plus",isDisabled:!t,onClick:l})})]})}));let $=-1;const L=n.memo((function({basePath:e,onAdd:s}){const{t}=k(),r=(0,n.useRef)([{isRoot:!0,name:"modules",text:t("Storage")},{name:"constants",text:t("Constants")},{name:"raw",text:t("Raw storage")}]),i=(0,n.useCallback)((e=>s({...e,id:++$})),[s]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.mQ,{basePath:e,items:r.current}),(0,a.jsxs)(w.rs,{children:[(0,a.jsx)(w.AW,{path:`${e}/constants`,children:(0,a.jsx)(S,{onAdd:i})}),(0,a.jsx)(w.AW,{path:`${e}/raw`,children:(0,a.jsx)(B,{onAdd:i})}),(0,a.jsx)(w.AW,{children:(0,a.jsx)(q,{onAdd:i})})]})]})})),H=o.zo.main`
  .storage--actionrow {
    align-items: flex-start;
    display: flex;

    .ui--Button {
      margin: 0.25rem;
    }

    &.head {
      flex: 1 1 100%;
      margin: 0 auto;
      max-width: 620px;
    }
  }

  .storage--actionrow-value {
    flex: 1;
    min-width: 0;

    .ui--output {
      word-break: break-all;
    }
  }

  .storage--actionrow-buttons {
    flex: 0;
    padding: 0.5rem 0.25rem;
  }
`,_=n.memo((function({basePath:e,className:s=""}){const[t,o]=(0,n.useState)([]),r=(0,n.useCallback)((e=>o((s=>[e,...s]))),[]),i=(0,n.useCallback)((e=>o((s=>s.filter((s=>s.id!==e))))),[]);return(0,a.jsxs)(H,{className:`${s} storage--App`,children:[(0,a.jsx)(L,{basePath:e,onAdd:r}),(0,a.jsx)(C,{onRemove:i,value:t})]})}))},54676:(e,s,t)=>{t.d(s,{Z:()=>f});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(74421),l=t(90778),c=t(61349);function d(){return(0,c.$G)("app-sudo")}const u=r.zo.section`
  align-items: flex-end;
  justify-content: center;

  .summary {
    text-align: center;
  }

  .sudoInputAddress {
    margin: -0.25rem 0.5rem -0.25rem 0;
  }

  .sudoLabelled {
    align-items: center;
  }
`,m=n.memo((function({allAccounts:e,className:s="",isMine:t,sudoKey:o}){const{t:i}=d(),{api:c}=(0,l.h)(),[m,h]=(0,n.useState)(null);(0,n.useEffect)((()=>{o&&!m&&h(o)}),[m,o]);const p=t&&!!m&&m!==o&&e.some((e=>e===m));return(0,a.jsxs)("section",{children:[(0,a.jsx)(u,{className:`${s} ui--row`,children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.rp,{className:"sudoInputAddress",isInput:!0,label:i("sudo key"),onChange:h,type:"all",value:m}),(0,a.jsx)(r.cA,{accountId:o,icon:"sign-in-alt",isDisabled:!t||o===m,label:i("Reassign"),params:[m],tx:c.tx.sudo.setKey})]}):(0,a.jsx)(r.jN,{className:"ui--Dropdown sudoLabelled",label:i("sudo key"),withLabel:!0,children:(0,a.jsx)(r.ax,{value:o})})}),p&&(0,a.jsx)("article",{className:"warning padded",children:(0,a.jsx)("div",{children:i("You will no longer have sudo access")})})]})}));var h=t(38894),p=t(95292),x=t(33661);const g=r.zo.section`
  .sudoToggle {
    width: 100%;
    text-align: right;
  }
`,b=n.memo((function({className:e,isMine:s,sudoKey:t}){const{t:o}=d(),{api:i,apiDefaultTxSudo:c}=(0,l.h)(),[u,m]=(0,h.O)(),[b,f]=(0,n.useState)(null),[j,v]=(0,n.useState)(p.nw),y=(0,n.useCallback)(((e=null)=>f((()=>e))),[]),C=(0,n.useCallback)(((e=p.nw)=>v(e)),[]);return s?(0,a.jsxs)(g,{className:e,children:[(0,a.jsx)(r.n6,{defaultValue:c,label:o("submit the following change"),onChange:y}),(0,x.m)(i.tx.sudo.sudoUncheckedWeight)&&(0,a.jsx)(r.Rn,{isDisabled:!u,isError:j.eq(p.nw),isZeroable:!1,label:o("unchecked weight for this call"),labelExtra:(0,a.jsx)(r.ZD,{className:"sudoToggle",label:o("with weight override"),onChange:m,value:u}),onChange:C,value:j}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(r.cA,{accountId:t,icon:"sign-in-alt",isDisabled:!b||!!u&&j.eq(p.nw),label:o(u?"Submit Sudo Unchecked":"Submit Sudo"),params:u?[b,j]:[b],tx:u?i.tx.sudo.sudoUncheckedWeight:i.tx.sudo.sudo})})]}):(0,a.jsx)("article",{className:"error padded",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(r.JO,{icon:"ban"}),o("You do not have access to the current sudo key")]})})})),f=n.memo((function({basePath:e}){const{t:s}=d(),{allAccounts:t,hasSudoKey:l,sudoKey:c}=(0,i.p)(),u=(0,n.useRef)([{isRoot:!0,name:"index",text:s("Sudo access")},{name:"key",text:s("Set sudo key")}]);return(0,a.jsxs)("main",{children:[(0,a.jsx)(r.mQ,{basePath:e,items:u.current}),l?(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/key`,children:(0,a.jsx)(m,{allAccounts:t,isMine:l,sudoKey:c})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(b,{isMine:l,sudoKey:c})})]}):(0,a.jsx)("article",{className:"error padded",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(r.JO,{icon:"ban"}),s("You do not have access to the current sudo key")]})})]})}))},95499:(e,s,t)=>{t.d(s,{Z:()=>f});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(70563),c=t(9118),d=t(51985);const u=n.memo((function({className:e="",members:s,prime:t}){const{t:o}=(0,d.$)(),i=(0,n.useRef)([[o("members"),"start",3]]);return(0,a.jsx)(r.iA,{className:e,empty:s&&o("No members found"),header:i.current,isSplit:!0,children:s?.map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(r.N,{value:e})}),(0,a.jsx)("td",{children:t===e&&(0,a.jsx)(r.Vp,{color:"green",hover:o("Committee prime member, default voting"),label:o("prime member")})}),(0,a.jsx)("td",{className:"all",children:" "})]},e)))})}));var m=t(14681);const h=n.memo((function({className:e="",members:s,proposalHashes:t,type:n}){const{t:o}=(0,d.$)(),{api:l}=(0,i.h)(),u=(0,c.W7)(l.derive[n].proposalCount);return(0,a.jsxs)(r.Ty,{className:e,children:[(0,a.jsx)(r.Jy,{label:o("members"),children:(0,m.u)(s.length)}),(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{label:o("proposals"),children:t?(0,m.u)(t?.length):(0,a.jsx)("span",{className:"--tmp",children:"99"})}),(0,a.jsx)(r.Jy,{label:o("total"),children:u?(0,m.u)(u):(0,a.jsx)("span",{className:"--tmp",children:"99"})})]})]})})),p=n.memo((function({className:e="",isMember:s,members:t,prime:n,proposalHashes:o,type:r}){return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(h,{isMember:s,members:t,proposalHashes:o,type:r}),(0,a.jsx)(u,{members:t,prime:n})]})}));var x=t(92858);const g=[],b=["proposals"],f=n.memo((function({basePath:e,className:s,type:t}){const{t:u}=(0,d.$)(),{api:m}=(0,i.h)(),{isMember:h,members:f,prime:j}=(0,l.V)(t),v=(0,c.W7)(m.derive[t].hasProposals),y=(0,c.W7)(m.derive[t].proposalHashes),C=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:u("Overview")},{name:"proposals",text:u("Proposals ({{count}})",{replace:{count:y&&y.length||0}})}]),[y,u]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,hidden:v?g:b,items:C}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/proposals`,children:(0,a.jsx)(x.Z,{isMember:h,members:f,prime:j,proposalHashes:y,type:t})}),(0,a.jsx)(o.AW,{path:e,children:(0,a.jsx)(p,{isMember:h,members:f,prime:j,proposalHashes:y,type:t})})]})]})}))},92858:(e,s,t)=>{t.d(s,{Z:()=>N});var a=t(52322),n=t(2784),o=t(24732),r=t(51985),i=t(92914),l=t(90778),c=t(9118),d=t(87660),u=t(81190),m=t(65874),h=t(14681),p=t(38894),x=t(56949);const g=n.memo((function({hasFailed:e,hash:s,idNumber:t,proposal:i,type:c}){const{t:d}=(0,r.$)(),{api:m}=(0,l.h)(),[h,g]=(0,p.O)(),[b,f]=(0,n.useState)(null),{encodedCallLength:j,weight:v}=(0,x.h7)(i),y=(0,u.m)(c);return y?(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsxs)(o.u_,{header:d("Close proposal"),onClose:g,size:"large",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.u_.Columns,{hint:d("The proposal that will be affected. Once closed for the current voting round, it would need to be re-submitted for a subsequent voting round."),children:(0,a.jsx)(o.lV,{idNumber:t,proposal:i})}),(0,a.jsx)(o.u_.Columns,{hint:d("The committee account that will apply the close for the current round."),children:(0,a.jsx)(o.rp,{label:d("close from account"),onChange:f,type:"account"})})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:b,isDisabled:!e&&!j,onStart:g,params:4===m.tx[y].close.meta.args.length?e?[s,t,0,0]:[s,t,v,j]:[s,t],tx:m.tx[y].closeOperational||m.tx[y].close})})]}),(0,a.jsx)(o.zx,{icon:"times",label:d("Close"),onClick:g})]}):null}));var b=t(34814);const f=n.memo((function({hash:e,isMember:s,members:t,prime:i,proposalId:c,type:d}){const{t:m}=(0,r.$)(),{api:h}=(0,l.h)(),{hasAccounts:x}=(0,b.x)(),[g,f]=(0,n.useState)(null),[j,v]=(0,p.O)(),y=(0,u.m)(d);return y&&x?(0,a.jsxs)(a.Fragment,{children:[j&&(0,a.jsxs)(o.u_,{header:m("Vote on proposal"),onClose:v,size:"small",children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.UE,{filter:t,onChange:f}),g===i&&(0,a.jsx)(o.Pd,{content:m("You are voting with this collective's prime account. The vote will be the default outcome in case of any abstentions.")})]}),(0,a.jsxs)(o.u_.Actions,{children:[(0,a.jsx)(o.cA,{accountId:g,icon:"ban",label:m("Vote Nay"),onStart:v,params:[e,c,!1],tx:h.tx[y].vote}),(0,a.jsx)(o.cA,{accountId:g,icon:"check",label:m("Vote Aye"),onStart:v,params:[e,c,!0],tx:h.tx[y].vote})]})]}),(0,a.jsx)(o.zx,{icon:"check",isDisabled:!s,label:m("Vote"),onClick:v})]}):null})),j=n.memo((function({className:e="",imageHash:s,isMember:t,members:n,prime:r,type:p}){const{api:x}=(0,l.h)(),b=(0,c.W7)(x.derive[p].proposal,[s]),{hasFailed:j,isCloseable:v,isVoteable:y,remainingBlocks:C}=(0,d.I)(b?.votes,n.length,p);if(!(0,u.m)(p)||!b||!b.votes)return null;const{ayes:w,end:N,index:k,nays:S,threshold:I}=b.votes;return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)(o.iA.Column.Id,{value:k}),(0,a.jsx)(i.Z,{imageHash:s,isCollective:!0,proposal:b.proposal}),(0,a.jsxs)("td",{className:"number",children:[(0,h.u)(w.length),"/",(0,h.u)(I)]}),(0,a.jsx)("td",{className:"number together",children:C&&N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{value:C}),"#",(0,h.u)(N)]})}),(0,a.jsx)("td",{className:"address",children:w.map(((e,s)=>(0,a.jsx)(o.ax,{value:e,withBalance:!1},`${s}:${e.toHex()}`)))}),(0,a.jsx)("td",{className:"address",children:S.map(((e,s)=>(0,a.jsx)(o.ax,{value:e,withBalance:!1},`${s}:${e.toHex()}`)))}),(0,a.jsxs)("td",{className:"button",children:[y&&!v&&(0,a.jsx)(f,{hash:s,isMember:t,members:n,prime:r,proposalId:k,type:p}),v&&(0,a.jsx)(g,{hasFailed:j,hash:s,idNumber:k,proposal:b.proposal,type:p})]})]})}));var v=t(65121),y=t(48801),C=t.n(y);const w=n.memo((function({defaultThreshold:e=.5,defaultValue:s,filter:t,isMember:i,members:c,type:d}){const{t:m}=(0,r.$)(),{api:h,apiDefaultTxSudo:p}=(0,l.h)(),{isOpen:x,onClose:g,onOpen:b}=(0,v.d)(),[f,j]=(0,n.useState)(null),[{proposal:y,proposalLength:w},N]=(0,n.useState)({proposalLength:0}),[[k,S],I]=(0,n.useState)([new(C())(Math.min(c.length,c.length*e+1)),!0]),A=(0,u.m)(d),E=(0,n.useCallback)((e=>!!e&&!e.isZero()&&e.lten(c.length)),[c]),M=(0,n.useCallback)((e=>N({proposal:e,proposalLength:e?.length||0})),[]),P=(0,n.useCallback)((e=>I([e||null,E(e)])),[E]);return A?(0,a.jsxs)(a.Fragment,{children:[x&&(0,a.jsxs)(o.u_,{header:m("Propose a committee motion"),onClose:g,children:[(0,a.jsxs)(o.u_.Content,{children:[(0,a.jsx)(o.rp,{filter:c,label:m("propose from account"),onChange:j,type:"account",withLabel:!0}),(0,a.jsx)(o.Rn,{className:"medium",isError:!S,label:m("threshold"),onChange:P,placeholder:m("Positive number between 1 and {{count}}",{replace:{count:c.length}}),value:k||void 0}),(0,a.jsx)(o.n6,{defaultValue:s||p,filter:t,label:m("proposal"),onChange:M})]}),(0,a.jsx)(o.u_.Actions,{children:(0,a.jsx)(o.cA,{accountId:f,isDisabled:!S||!y,onStart:g,params:3===h.tx[A].propose.meta.args.length?[k,y,w]:[k,y],tx:h.tx[A].propose})})]}),(0,a.jsx)(o.zx,{icon:"plus",isDisabled:!i,label:m("Submit proposal"),onClick:b})]}):null})),N=n.memo((function({className:e="",defaultProposal:s,defaultThreshold:t,filter:i,isMember:l,members:c,prime:d,proposalHashes:u,type:m}){const{t:h}=(0,r.$)(),p=(0,n.useRef)([[h("proposals"),"start",2],[h("threshold")],[h("voting end")],[h("aye"),"address"],[h("nay"),"address"],[]]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(o.zx.Group,{children:(0,a.jsx)(w,{defaultThreshold:t,defaultValue:s,filter:i,isMember:l,members:c,type:m})}),(0,a.jsx)(o.iA,{empty:u&&h("No committee proposals"),header:p.current,children:u?.map((e=>(0,a.jsx)(j,{imageHash:e,isMember:l,members:c,prime:d,type:m},e.toHex())))})]})}))},75509:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(52322),n=t(2784),o=t(95499);const r=n.memo((function({basePath:e,className:s}){return(0,a.jsx)(o.Z,{basePath:e,className:s,type:"technicalCommittee"})}))},51985:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-tech-comm")}},87340:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(90778),n=t(9118),o=t(11677);const r={transform:e=>e.length},i=(0,o.e)("useCounter",(function(){const{api:e,isApiReady:s}=(0,a.h)();return(0,n.W7)(s&&e.derive.technicalCommittee?.proposals,void 0,r)||0}))},27613:(e,s,t)=>{t.d(s,{Z:()=>U});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(90778),l=t(70563),c=t(33661),d=t(9118),u=t(38894),m=t(95292),h=t(43814);const p=n.memo((function({className:e}){const{t:s}=(0,h.$)(),{api:t}=(0,i.h)(),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[p,x]=(0,u.O)(),[g,b]=(0,n.useState)(),f=g?.gtn(0),[j,v,y]=(0,n.useMemo)((()=>[t.consts.treasury.proposalBondMinimum.toString(),t.consts.treasury.proposalBondMaximum?.isSome?t.consts.treasury.proposalBondMaximum.unwrap().toString():null,`${t.consts.treasury.proposalBond.mul(m.S8).div(m.uy).toNumber().toFixed(2)}%`]),[t]);return(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsxs)(r.u_,{className:e,header:s("Submit treasury proposal"),onClose:x,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:s("This account will make the proposal and be responsible for the bond."),children:(0,a.jsx)(r.rp,{label:s("submit with account"),onChange:l,type:"account",withLabel:!0})}),(0,a.jsx)(r.u_.Columns,{hint:s("The beneficiary will receive the full amount if the proposal passes."),children:(0,a.jsx)(r.rp,{label:s("beneficiary"),onChange:d,type:"allPlus"})}),(0,a.jsxs)(r.u_.Columns,{hint:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:s("The value is the amount that is being asked for and that will be allocated to the beneficiary if the proposal is approved.")}),v?(0,a.jsx)("p",{children:s("Of the beneficiary amount, no less than the minimum bond amount and no more than maximum on-chain bond would need to be put up as collateral. This is calculated from {{bondPercentage}} of the requested amount.",{replace:{bondPercentage:y}})}):(0,a.jsx)("p",{children:s("Of the beneficiary amount, no less than the minimum bond amount would need to be put up as collateral. This is calculated from {{bondPercentage}} of the requested amount.",{replace:{bondPercentage:y}})})]}),children:[(0,a.jsx)(r.H,{isError:!f,label:s("value"),onChange:b}),(0,a.jsx)(r.qG,{label:s("proposal bond"),children:y}),(0,a.jsx)(r.H,{defaultValue:j,isDisabled:!0,label:s("minimum bond")}),v&&(0,a.jsx)(r.H,{defaultValue:v,isDisabled:!0,label:s("maximum bond")}),(0,a.jsx)(r.Pd,{content:s("Be aware that once submitted the proposal will be put to a vote. If the proposal is rejected due to a lack of info, invalid requirements or non-benefit to the network as a whole, the full bond posted (as describe above) will be lost.")})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:o,icon:"plus",isDisabled:!o||!f,label:s("Submit proposal"),onStart:x,params:[g,c],tx:t.tx.treasury.proposeSpend})})]}),(0,a.jsx)(r.zx,{icon:"plus",label:s("Submit proposal"),onClick:x})]})}));var x=t(30943),g=t(81190);const b=n.memo((function({id:e,isDisabled:s,members:t}){const{t:o}=(0,h.$)(),{api:l}=(0,i.h)(),[c,d]=(0,u.O)(),[m,p]=(0,n.useState)(null),[b,f]=(0,n.useState)("accept"),[{proposal:j,proposalLength:v},y]=(0,n.useState)((()=>({proposalLength:0}))),C=(0,g.m)("council"),w=Math.ceil((t?.length||0)*(0,x.mo)(l)),N=(0,n.useRef)([{text:o("Acceptance proposal to council"),value:"accept"},{text:o("Rejection proposal to council"),value:"reject"}]);return(0,n.useEffect)((()=>{const s="reject"===b?l.tx.treasury.rejectProposal(e):l.tx.treasury.approveProposal(e);y({proposal:s,proposalLength:s.length})}),[l,e,b]),C?(0,a.jsxs)(a.Fragment,{children:[c&&(0,a.jsxs)(r.u_,{header:o("Send to council"),onClose:d,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:o('The council member that is proposing this, submission equates to an "aye" vote.'),children:(0,a.jsx)(r.rp,{filter:t,label:o("submit with council account"),onChange:p,type:"account",withLabel:!0})}),(0,a.jsx)(r.u_.Columns,{hint:o("Proposal can either be to approve or reject this spend. Once approved, the change is applied by either removing the proposal or scheduling payout."),children:(0,a.jsx)(r.Lt,{label:o("council proposal type"),onChange:f,options:N.current,value:b})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:m,icon:"check",isDisabled:!m||!w,label:o("Send to council"),onStart:d,params:3===l.tx[C].propose.meta.args.length?[w,j,v]:[w,j],tx:l.tx[C].propose})})]}),(0,a.jsx)(r.zx,{icon:"step-forward",isDisabled:s,label:o("To council"),onClick:d})]}):null})),f=n.memo((function({className:e="",isMember:s,members:t,proposal:{council:o,id:l,proposal:d},withSend:m}){const{t:p}=(0,h.$)(),{api:x}=(0,i.h)(),[g,f]=(0,u.O)(!1),j=(0,c.m)(x.tx.council?.propose),v=(0,n.useMemo)((()=>!!o.map((({votes:e})=>e?e.index.toNumber():-1)).filter((e=>-1!==e)).length),[o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{className:`${e} isExpanded isFirst ${g?"":"isLast"}`,children:[(0,a.jsx)(r.iA.Column.Id,{value:l}),(0,a.jsx)("td",{className:"address all",children:(0,a.jsx)(r.N,{value:d.beneficiary})}),(0,a.jsx)(r.iA.Column.Balance,{value:d.value}),(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(r.ax,{balance:d.bond,value:d.proposer,withBalance:!0})}),(0,a.jsx)("td",{className:v?"middle":"button",children:j?v?(0,a.jsx)("a",{href:"#/council/motions",children:p("Voting")}):m&&(0,a.jsx)(b,{id:l,isDisabled:!s,members:t}):null}),(0,a.jsx)(r.iA.Column.Expand,{isExpanded:g,toggle:f})]}),(0,a.jsxs)("tr",{className:`${e} ${g?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,a.jsx)("td",{}),(0,a.jsx)("td",{className:"columar",colSpan:4,children:(0,a.jsx)(r.P0,{is100:!0,children:(0,a.jsx)(r.P0.Column,{children:(0,a.jsx)(r.NR,{data:l,type:"treasury",withTitle:!0})})})}),(0,a.jsx)("td",{})]})]})})),j=n.memo((function({className:e="",isApprovals:s,isMember:t,members:o,proposals:i}){const{t:l}=(0,h.$)(),c=(0,n.useMemo)((()=>[[l(s?"Approved":"Proposals"),"start",2],[],[l("proposer"),"address"],[],[]]),[s,l]);return(0,a.jsx)(r.iA,{className:e,empty:i&&l(s?"No approved proposals":"No pending proposals"),header:c,children:i?.map((e=>(0,a.jsx)(f,{isMember:t,members:o,proposal:e,withSend:!s},e.id.toString())))})}));var v=t(54383),y=t(68920),C=t(58607),w=t(14681);const N=n.memo((function({approvalCount:e,proposalCount:s}){const{t}=(0,h.$)(),{api:o}=(0,i.h)(),l=(0,v.C)(),c=(0,d.W7)(o.query.treasury.proposalCount),{burn:u,pendingBounties:p,pendingProposals:x,spendPeriod:g,value:b}=(0,y._)(),f=(0,n.useMemo)((()=>b&&b.sub(p).sub(x)),[b,p,x]),j=!(!b||!f);return(0,a.jsxs)(r.Ty,{children:[(0,a.jsxs)("section",{children:[(0,a.jsx)(r.Jy,{className:"media--1700",label:t("open"),children:void 0===s?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,w.u)(s)}),(0,a.jsx)(r.Jy,{className:"media--1600",label:t("approved"),children:void 0===e?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,w.u)(e)}),(0,a.jsx)(r.Jy,{className:"media--1400",label:t("total"),children:void 0===c?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,w.u)(c)})]}),(0,a.jsxs)("section",{children:[!x.isZero()&&(0,a.jsx)(r.Jy,{className:"media--1100",label:t("approved"),children:(0,a.jsx)(C.Z,{value:x,withSi:!0})}),!p.isZero()&&(0,a.jsx)(r.Jy,{className:"media--1200",label:t("bounties"),children:(0,a.jsx)(C.Z,{value:p,withSi:!0})}),(0,a.jsx)(r.Jy,{className:"media--1300",label:t("next burn"),children:(0,a.jsx)(C.Z,{className:u?"":"--tmp",value:u||1,withSi:!0})})]}),(0,a.jsx)("section",{children:(0,a.jsx)(r.Jy,{label:t("spendable / available"),progress:{hideValue:!0,isBlurred:!j,total:j?b:m.Jo,value:j?f:m.um},children:(0,a.jsxs)("span",{className:j?"":"--tmp",children:[(0,a.jsx)(C.Z,{value:f||m.um,withSi:!0}),(0,a.jsx)(a.Fragment,{children:" / "}),(0,a.jsx)(C.Z,{value:b||m.Jo,withSi:!0})]})})}),l&&g.gt(m.nw)&&(0,a.jsx)("section",{children:(0,a.jsx)(r.Jy,{label:t("spend period"),progress:{total:g,value:l.mod(g),withTime:!0}})})]})})),k=n.memo((function({className:e,isMember:s,members:t}){const{api:n}=(0,i.h)(),o=(0,d.W7)(n.derive.treasury.proposals);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(N,{approvalCount:o?.approvals.length,proposalCount:o?.proposals.length}),(0,a.jsx)(r.zx.Group,{children:(0,a.jsx)(p,{})}),(0,a.jsx)(j,{isMember:s,members:t,proposals:o?.proposals}),(0,a.jsx)(j,{isApprovals:!0,isMember:s,members:t,proposals:o?.approvals})]})}));var S=t(34814),I=t(79760);const A=n.memo((function({members:e}){const{t:s}=(0,h.$)(),{api:t}=(0,i.h)(),[o,l]=(0,u.O)(),[c,d]=(0,n.useState)(null),[p,x]=(0,n.useState)(null),[g,b]=(0,n.useState)(""),[f,j]=(0,n.useState)(),v=(0,n.useMemo)((()=>Math.min(256,(t.consts.tips||t.consts.treasury)?.maximumReasonLength?.toNumber()||256)),[t]),y=(0,n.useMemo)((()=>!!c&&e.includes(c)),[c,e]),C=!!f&&f.gt(m.nw),w=!!g&&g.length>=5&&g.length<=v;return t.tx.tips.tipNew||t.tx.treasury.tipNew?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"plus",label:s("Propose tip"),onClick:l}),o&&(0,a.jsxs)(r.u_,{header:s("Submit tip request"),onClose:l,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:s("Use this account to request the tip from. This can be a normal or council account."),children:(0,a.jsx)(r.rp,{label:s("submit with account"),onChange:d,type:"account",withLabel:!0})}),(0,a.jsx)(r.u_.Columns,{hint:s("The beneficiary will received the tip as approved by council members."),children:(0,a.jsx)(r.rp,{label:s("beneficiary"),onChange:x,type:"allPlus"})}),(0,a.jsx)(r.u_.Columns,{hint:s("A reason (to be stored-on-chain) as to why the recipient deserves a tip payout."),children:(0,a.jsx)(r.II,{autoFocus:!0,isError:!w,label:s("tip reason"),onChange:b})}),y&&(0,a.jsx)(r.u_.Columns,{hint:s("As a council member, you can suggest an initial value for the tip, each other council member can suggest their own."),children:(0,a.jsx)(r.H,{isError:!C,label:s("tip value"),onChange:j})})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:c,icon:"plus",isDisabled:!c||y&&!C||!w,label:s("Propose tip"),onStart:l,params:y?[g,p,f]:[g,p],tx:y?(t.tx.tips||t.tx.treasury).tipNew:(t.tx.tips||t.tx.treasury).reportAwesome})})]})]}):null}));var E=t(65874);const M={transform:({freeBalance:e,reservedBalance:s})=>e.add(s)},P=n.memo((function({defaultId:e,hash:s,isMember:t,isTipped:o,median:l,members:c,recipient:m}){const{t:p}=(0,h.$)(),{api:x}=(0,i.h)(),[g,b]=(0,u.O)(),[f,j]=(0,n.useState)(e),[v,y]=(0,n.useState)(),C=(0,d.W7)(x.derive.balances?.all,[m],M),w=(x.tx.tips||x.tx.treasury).tip;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.zx,{icon:"check",isDisabled:!t,label:p("Tip"),onClick:b}),(0,a.jsx)(r.cA,{accountId:e,className:"media--1600",icon:"fighter-jet",isDisabled:!t||!o,isIcon:!0,params:[s,l],tx:w,withoutLink:!0}),g&&(0,a.jsxs)(r.u_,{header:p("Submit tip endorsement"),onClose:b,size:"large",children:[(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsx)(r.u_.Columns,{hint:p("Your endorsement will be applied for this account."),children:(0,a.jsx)(r.rp,{filter:c,label:p("submit with account"),onChange:j,type:"account",withLabel:!0})}),(0,a.jsxs)(r.u_.Columns,{hint:p("Allocate a suggested tip amount. With enough endorsements, the suggested values are averaged and sent to the beneficiary."),children:[(0,a.jsx)(r.H,{autoFocus:!0,defaultValue:l,isZeroable:!0,label:p("value"),onChange:y}),C&&C.isZero()&&(0,a.jsx)(r.Pd,{content:p("The recipient account has no balance, ensure the tip is more than the existential deposit to create the account.")})]})]}),(0,a.jsx)(r.u_.Actions,{children:(0,a.jsx)(r.cA,{accountId:f,icon:"plus",isDisabled:!f,label:p("Submit tip"),onStart:b,params:[s,v],tx:w})})]})]})}));var T=t(94158);const D={transform:e=>e.isSome?(0,T.r)(e.unwrap().toHex()):null},F=n.memo((function({hash:e}){const{api:s}=(0,i.h)(),t=(0,d.W7)((s.query.tips||s.query.treasury).reasons,[e],D);return(0,a.jsx)("td",{className:"start all",children:t||e.toHex()})})),V=r.zo.tr`
  .closingTimer {
    display: inline-block;
    padding: 0 0.5rem;
  }
`,R=n.memo((function({bestNumber:e,className:s="",defaultId:t,hash:o,isMember:l,members:c,onSelect:d,onlyUntipped:u,tip:p}){const{api:x}=(0,i.h)(),{t:g}=(0,h.$)(),{allAccounts:b}=(0,S.x)(),{closesAt:f,finder:j,isFinder:v,isTipped:y,isTipper:N,median:k}=(0,n.useMemo)((()=>function(e,s){const t=e.closes.unwrapOr(null);let a=null,n=null;if(function(e){return!!e?.findersFee}(e))a=e.finder,n=e.deposit;else if(e.finder.isSome){const s=e.finder.unwrap();a=s[0],n=s[1]}const o=e.tips.map((([,e])=>e)).sort(((e,s)=>e.cmp(s))),r=Math.floor(o.length/2),i=o.length?o.length%2?o[r]:o[r-1].add(o[r]).divn(2):m.nw;return{closesAt:t,deposit:n,finder:a,isFinder:!!a&&s.includes(a.toString()),isTipped:!!o.length,isTipper:e.tips.some((([e])=>s.includes(e.toString()))),median:i}}(p,b)),[b,p]),I=(0,n.useMemo)((()=>b.find((e=>c.includes(e)))||null),[b,c]),[A,M]=(0,n.useState)(!1),T=(0,n.useCallback)((()=>p.tips.map((([e,s])=>(0,a.jsx)(r.ax,{balance:s,value:e,withBalance:!0},e.toString())))),[p]);if((0,n.useEffect)((()=>{d(o,A,k)}),[o,A,k,d]),(0,n.useEffect)((()=>{M(l&&!N)}),[l,N]),u&&!f&&N)return null;const{reason:D,tips:R,who:q}=p,O=q.toString();return(0,a.jsxs)(V,{className:s,children:[(0,a.jsx)("td",{className:"address",children:(0,a.jsx)(r.N,{value:q})}),(0,a.jsx)("td",{className:"address media--1400",children:j&&(0,a.jsx)(r.ax,{value:j})}),(0,a.jsx)(F,{hash:D}),(0,a.jsx)("td",{className:"expand media--1100",children:0!==R.length&&(0,a.jsx)(r.n0,{renderChildren:T,summary:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:g("Tippers ({{count}})",{replace:{count:R.length}})}),(0,a.jsx)(C.Z,{value:k})]})})}),(0,a.jsxs)("td",{className:"button together",children:[f?e&&f.gt(e)&&(0,a.jsxs)("div",{className:"closingTimer",children:[(0,a.jsx)(E.Z,{value:f.sub(e)}),"#",(0,w.u)(f)]}):j&&v&&(0,a.jsx)(r.cA,{accountId:j,className:"media--1400",icon:"times",label:g("Cancel"),params:[o],tx:(x.tx.tips||x.tx.treasury).retractTip}),f&&e&&!f.gt(e)?(0,a.jsx)(r.cA,{accountId:I,icon:"times",label:g("Close"),params:[o],tx:(x.tx.tips||x.tx.treasury).closeTip}):(0,a.jsx)(P,{defaultId:t,hash:o,isMember:l,isTipped:y,median:k,members:c,recipient:O})]}),(0,a.jsx)("td",{className:"badge media--1700",children:l&&(0,a.jsx)(r.JO,{color:N?"green":"gray",icon:"asterisk"})}),(0,a.jsx)("td",{children:(0,a.jsx)(r.XZ,{isDisabled:!l,onChange:M,value:A})}),(0,a.jsx)("td",{className:"links media--1700",children:(0,a.jsx)(r.NR,{data:o,type:"tip"})})]})})),q={withParams:!0},O=(0,r.zo)(r.iA)`
  .tipsFilter {
    text-align: right;

    .ui--Toggle {
      margin-right: 1rem;
      margin-top: 0.75rem;
    }
  }
`,z=n.memo((function({className:e="",defaultId:s,hashes:t,isMember:o,members:l,onSelectTip:c}){const{t:u}=(0,h.$)(),{api:m}=(0,i.h)(),[p,x]=(0,n.useState)(!1),g=(0,v.C)(),b=(0,d.W7)(t&&(m.query.tips||m.query.treasury).tips.multi,[t],q),f=(0,n.useMemo)((()=>function(e,s){if(!e||!s)return;const[[t],a]=e;return a.map(((e,s)=>[t[s],e.unwrapOr(null)])).filter((e=>s.includes(e[0])&&!!e[1])).sort(((e,s)=>e[1].closes.isNone?s[1].closes.isNone?0:-1:s[1].closes.isSome?s[1].closes.unwrap().cmp(e[1].closes.unwrap()):1))}(b,t)),[t,b]),j=(0,n.useRef)([[u("tips"),"start"],[u("finder"),"address media--1400"],[u("reason"),"start"],[void 0,"media--1100"],[],[void 0,"badge media--1700"],[],[void 0,"media--1700"]]);return(0,a.jsx)(O,{className:e,empty:f&&u("No open tips"),filter:o&&(0,a.jsx)("div",{className:"tipsFilter",children:(0,a.jsx)(r.ZD,{label:u("show only untipped/closing"),onChange:x,value:p})}),header:j.current,children:f&&f.map((([e,t])=>(0,a.jsx)(R,{bestNumber:g,defaultId:s,hash:e,isMember:o,members:l,onSelect:c,onlyUntipped:p,tip:t},e)))})})),B={quickTips:{},quickTxs:[]},$=n.memo((function({className:e,hashes:s,isMember:t,members:o}){const{t:l}=(0,h.$)(),{allAccounts:c}=(0,S.x)(),{api:d}=(0,i.h)(),[{quickTxs:u},m]=(0,n.useState)(B),p=(0,I.b)(u),x=(0,n.useMemo)((()=>o.find((e=>c.includes(e)))||null),[c,o]),g=(0,n.useCallback)(((e,s,t)=>m((({quickTips:a})=>(a[e]=s?t:null,{quickTips:a,quickTxs:Object.entries(a).map((([e,s])=>s&&(d.tx.tips||d.tx.treasury).tip(e,s))).filter((e=>!!e))})))),[d]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsxs)(r.zx.Group,{children:[(0,a.jsx)(A,{members:o}),(0,a.jsx)(r.cA,{accountId:x,extrinsic:p,icon:"fighter-jet",isDisabled:!t||!p,label:l("Median tip selected")})]}),(0,a.jsx)(z,{defaultId:x,hashes:s,isMember:t,members:o,onSelectTip:g})]})}));var L=t(24305),H=t(12298),_=t(11677);const Z={transform:e=>e.map((({args:[e]})=>e.toHex()))},W=(0,_.e)("useTipHashes",(function(){const{api:e}=(0,i.h)(),s=(0,L.b)([e.events.tips?.NewTip,e.events.tips?.TipClosed,e.events.tips?.TipRetracted]);return(0,H.k)((e.query.tips||e.query.treasury)?.tips,[],Z,s.blockHash)})),U=n.memo((function({basePath:e}){const{t:s}=(0,h.$)(),{api:t}=(0,i.h)(),{isMember:d,members:u}=(0,l.V)("council"),m=W(),p=(0,n.useMemo)((()=>[{isRoot:!0,name:"overview",text:s("Overview")},(0,c.m)((t.query.tips||t.query.treasury)?.tips)&&{count:m?.length,name:"tips",text:s("Tips")}].filter((e=>!!e))),[t,s,m]);return(0,a.jsxs)("main",{className:"treasury--App",children:[(0,a.jsx)(r.mQ,{basePath:e,items:p}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/tips`,children:(0,a.jsx)($,{hashes:m,isMember:d,members:u})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(k,{isMember:d,members:u})})]})]})}))},43814:(e,s,t)=>{t.d(s,{$:()=>n});var a=t(61349);function n(){return(0,a.$G)("app-treasury")}},9039:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(2784),n=t(34814),o=t(90778),r=t(9118);const i=(0,t(11677).e)("useCounter",(function(){const{hasAccounts:e}=(0,n.x)(),{api:s,isApiReady:t}=(0,o.h)(),i=(0,r.W7)(t&&e&&s.derive.treasury?.proposals);return(0,a.useMemo)((()=>i?.proposals.length||0),[i])}))},26822:(e,s,t)=>{t.d(s,{Z:()=>N});var a=t(52322),n=t(2784),o=t(7267),r=t(24732),i=t(35189),l=t(9242),c=t(72570),d=t(90778),u=t(14681),m=t(61162),h=t(70416),p=t(66850),x=t(90107),g=t(61349);function b(){return(0,g.$G)("app-utilities")}const f=n.memo((function({className:e}){const{t:s}=b(),{chainSS58:t}=(0,d.h)(),[{address:o,inputSS58:g},f]=(0,n.useState)({address:null,inputSS58:42}),[j,v]=(0,n.useState)(-1),y=(0,n.useCallback)((e=>f(function(e){let s=null,t=42;if(e&&(0,m.U)(e)){const a=(0,h.MW)(e),[,,,n]=(0,p.l)(a);s=e,t=n}return{address:s,inputSS58:t}}(e))),[]),C=(0,n.useMemo)((()=>{const e=c.FA.find((({prefix:e})=>e===t));return(0,l.M)(s).map((s=>(0,i.SX)(s,["default"],"empty",-1===s.value?e?` (${e.displayName}, ${t||0})`:` (${t||0})`:` (${s.value})`)))}),[t,s]),w=(0,n.useMemo)((()=>o&&(0,x.m)(o,-1===j?t:j)),[o,t,j]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.bm,{autoFocus:!0,isError:!o,label:s("address to convert"),noConvert:!0,onChange:y})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.Lt,{defaultValue:j,label:s("address prefix"),onChange:v,options:C})}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.qG,{className:"medium",label:s("input ss58 prefix"),value:(0,u.u)(g)})}),w&&(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.bm,{defaultValue:w,isDisabled:!0,label:s("converted address")},w)})]})]})}));var j=t(64021),v=t(74076),y=t(48533),C=t(34323);const w=n.memo((function({className:e}){const{t:s}=b(),[{data:t,hash:o,isHexData:i},l]=(0,n.useState)({data:"",hash:(0,C.$)((0,j.d)(""),256),isHexData:!1}),c=(0,n.useCallback)((e=>{const s=(0,v.vq)(e);l({data:e,hash:(0,C.$)(s?(0,y.G)(e):(0,j.d)(e),256),isHexData:s})}),[]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.II,{autoFocus:!0,className:"full",label:s("from the following data"),onChange:c,value:t})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.qG,{className:"medium",label:s("hex input data"),value:s(i?"Yes":"No")})}),(0,a.jsx)("div",{className:"ui--row",children:(0,a.jsx)(r.r_,{className:"full",isHidden:0===o.length,isMonospace:!0,label:s("the resulting hash is"),value:o,withCopy:!0})})]})})),N=n.memo((function({basePath:e,className:s}){const{t}=b(),i=(0,n.useRef)([{isRoot:!0,name:"convert",text:t("Convert address")},{name:"hash",text:t("Hash data")}]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(r.mQ,{basePath:e,items:i.current}),(0,a.jsxs)(o.rs,{children:[(0,a.jsx)(o.AW,{path:`${e}/hash`,children:(0,a.jsx)(w,{})}),(0,a.jsx)(o.AW,{children:(0,a.jsx)(f,{})})]})]})}))},7644:(e,s,t)=>{t.d(s,{Z:()=>C});var a=t(52322),n=t(2784),o=t(24732),r=t(61349);function i(){return(0,r.$G)("app-whitelist")}var l=t(90778),c=t(12298),d=t(39824),u=t(11677);const m={transform:e=>e.map((({args:[e]})=>e))};function h(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:a}})=>{"CallWhitelisted"===a?s.push(e):t.push(e)})),{added:s,removed:t}}const p=(0,u.e)("useHashes",(function(){const{api:e}=(0,l.h)(),s=(0,c.k)(e.query.whitelist.whitelistedCall,[],m),t=(0,d.N)([e.events.whitelist.CallWhitelisted,e.events.whitelist.WhitelistedCallRemoved],h,s);return(0,n.useMemo)((()=>t&&t.map((e=>e.toHex()))),[t])}));var x=t(69338),g=t(74525),b=t(31313);const f=n.memo((function({className:e,value:s}){const t=(0,b.CH)(s);return(0,a.jsxs)("tr",{className:e,children:[(0,a.jsx)(g.Z,{value:s}),(0,a.jsx)(x.Z,{value:t})]})}));var j=t(14681);const v=n.memo((function({className:e,hashes:s}){const{t}=i();return(0,a.jsx)(o.Ty,{className:e,children:(0,a.jsx)(o.Jy,{label:t("hashes"),children:void 0===s?(0,a.jsx)("span",{className:"--tmp",children:"99"}):(0,j.u)(s.length)})})})),y=n.memo((function({className:e}){const{t:s}=i(),t=p(),r=(0,n.useRef)([[s("calls"),"start"],[void 0,"all"],[void 0,"media--1300"]]);return(0,a.jsxs)("div",{className:e,children:[(0,a.jsx)(v,{hashes:t}),(0,a.jsx)(o.iA,{className:e,empty:t&&s("No call hashes found"),header:r.current,children:t&&t.map((e=>(0,a.jsx)(f,{value:e},e)))})]})})),C=n.memo((function({basePath:e,className:s}){const{t}=i(),r=(0,n.useRef)([{isRoot:!0,name:"overview",text:t("Overview")}]);return(0,a.jsxs)("main",{className:s,children:[(0,a.jsx)(o.mQ,{basePath:e,items:r.current}),(0,a.jsx)(y,{})]})}))}}]);