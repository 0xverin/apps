"use strict";(("undefined"!=typeof self?self:this).webpackChunk_polkadot_apps=("undefined"!=typeof self?self:this).webpackChunk_polkadot_apps||[]).push([[893],{30420:(e,s,n)=>{n.d(s,{Z:()=>r});var t=n(2784),a=n(29909),o=n(52322);function i({basePath:e,className:s}){return(0,o.jsx)(a.Z,{basePath:e,className:s,type:"membership"})}const r=t.memo(i)},39221:(e,s,n)=>{n.d(s,{Z:()=>r});var t=n(92529),a=n(36856),o=n(89448);const i={transform:e=>e.length},r=(0,o.e)("useCounter",(function(){var e;const{api:s,isApiReady:n}=(0,t.h)();return(0,a.W7)(n&&(null==(e=s.query.membership)?void 0:e.proposals),void 0,i)||0}))},52345:(e,s,n)=>{n.d(s,{Z:()=>W});var t=n(2784),a=n(7267),o=n(61397),i=n(13328),r=n(82740),l=n(14681),c=n(61349);function d(){return(0,c.$G)("app-nfts")}var u=n(52322);function m({className:e,collectionName:s,value:{account:n,id:t,ipfsData:a}}){const i=(null==a?void 0:a.name)||s,r=null!=a&&a.image?`https://ipfs.io/ipfs/${a.image}`:"";return(0,u.jsxs)("tr",{className:e,children:[(0,u.jsx)(o.iA.Column.Id,{value:t}),(0,u.jsx)("td",{className:"together all",children:i&&r?(0,u.jsx)(o.JH,{href:r,icon:"braille",label:i,rel:"noopener",target:"_blank"}):i}),(0,u.jsx)("td",{className:"address media--1000",children:(0,u.jsx)(o.N,{value:n})})]})}const h=t.memo(m);var p=n(96464),x=n(92529),g=n(89448);const f=(0,g.e)("useAccountItems",(function(){const e=(0,p.X)(),{api:s}=(0,x.h)(),{allAccounts:n}=(0,i.x)(),[a,o]=(0,t.useState)();return(0,t.useEffect)((()=>{if(!n.length)return;const t=n.map((e=>s.query.uniques.account.keys(e)));Promise.all(t).then((s=>e.current&&o(function(e){return e.filter((e=>!!e.length)).map((e=>e.map((e=>{const[s,n,t]=e.args;return{accountId:s,collectionId:n,itemId:t}})))).flat()}(s)))).catch(console.error)}),[n,s.query.uniques.account,e]),a}));var v=n(36856),b=n(17909);const j={withParams:!0},y={transform:e=>{if(!e)return null;try{const s=JSON.parse(e);if(s&&"object"==typeof s)return{image:"string"==typeof s.image?s.image.replace(/ipfs:\/\/|ipfs\//gi,""):null,name:"string"==typeof s.name?s.name:null}}catch{}return null}},w=(0,g.e)("useItemsInfos",(function(e){const{api:s}=(0,x.h)(),[n,a]=(0,t.useState)(),o=(0,t.useMemo)((()=>e.map((({collectionId:e,itemId:s})=>[e,s]))),[e]),i=(0,v.W7)(s.query.uniques.instanceMetadataOf.multi,[o],j),r=(0,t.useMemo)((()=>{if(i&&i[1].length)return i[1].map((e=>e.isSome?e.unwrap().data.toString():""))}),[i]),l=(0,b.g)(r,y);return(0,t.useEffect)((()=>{if(l&&e.length&&i&&i[0][0].length){const[s]=i[0][0][0];if(!s.eq(o[0][0]))return;const n=i[0][0].map(((s,n)=>function([,e],s,n){const{accountId:t}=n.find((({itemId:s})=>s.eq(e)));return{account:t,id:e,ipfsData:null,key:e.toString(),metadata:s.unwrapOr(null)}}(s,i[1][n],e)));a(n.map((e=>s=>{const n=s.metadata&&s.metadata.data.toString();return{...s,ipfsData:n&&e.has(n)&&e.get(n)||null}})(l)))}}),[e,o,l,i]),n}));function N({className:e,infos:s=[]}){var n;const{t:a}=d(),i=` - ${a("no name")} -`,[r,c]=(0,t.useState)(0),[m,p]=(0,t.useState)(null),x=f(),g=(0,t.useMemo)((()=>m&&x?x.filter((({collectionId:e})=>e.eq(m.id))):[]),[m,x]),v=w(g),b=(null==m||null==(n=m.ipfsData)?void 0:n.name)||i,j=(0,t.useMemo)((()=>x?s.filter((e=>!(!e.details||!e.metadata)&&x.some((({collectionId:s})=>e.id.eq(s))))).sort(((e,s)=>e.id.cmp(s.id))):[]),[s,x]),y=(0,t.useMemo)((()=>j.map((({id:e,ipfsData:s},n)=>({text:`${(null==s?void 0:s.name)||i} (ID: ${(0,l.u)(e)})`,value:n})))),[j,i]),N=(0,t.useRef)([[a("items"),"start",2],[a("owner"),"address media--1000"]]);return(0,t.useEffect)((()=>{p((()=>r>=0&&r<j.length?j[r]:null))}),[j,r]),(0,u.jsx)(C,{className:e,children:(0,u.jsx)(o.iA,{empty:!m&&x&&a("No accounts with items found for the collection"),filter:y.length?(0,u.jsx)(o.Lt,{isFull:!0,label:a("the collection to query for items"),onChange:c,options:y,value:r}):void 0,header:N.current,children:v&&v.map((e=>(0,u.jsx)(h,{collectionName:b,value:e},e.key)))})})}const C=r.ZP.div.withConfig({displayName:"AccountItems__StyledDiv",componentId:"sc-1ncddhf-0"})(["table{overflow:auto;}"]),k=t.memo(N);function S({className:e,value:{details:s,id:n,ipfsData:t}}){const{t:a}=d(),i=(null==t?void 0:t.name)||"",r=null!=t&&t.image?`https://ipfs.io/ipfs/${t.image}`:"";return(0,u.jsxs)("tr",{className:e,children:[(0,u.jsx)(o.iA.Column.Id,{value:n}),(0,u.jsx)("td",{className:"together all",children:i&&r?(0,u.jsx)(o.JH,{href:r,icon:"braille",label:i,rel:"noopener",target:"_blank"}):i}),(0,u.jsx)("td",{className:"address media--1000",children:s&&(0,u.jsx)(o.N,{value:s.owner})}),(0,u.jsx)("td",{className:"string",children:s&&s.isFrozen.isTrue&&a("Frozen")}),(0,u.jsx)("td",{className:"number",children:s&&(0,l.u)(s.items||s.instances)})]})}const I=t.memo(S);function A({className:e,infos:s}){const{t:n}=d(),a=(0,t.useRef)([[n("collections"),"start",2],[n("owner"),"address media--1000"],[n("status")],[n("items")]]);return(0,u.jsx)(o.iA,{className:e,empty:s&&n("No collections found"),header:a.current,children:null==s?void 0:s.map((e=>(0,u.jsx)(I,{value:e},e.key)))})}const P=t.memo(A);function M({className:e,numCollections:s}){const{t:n}=d();return(0,u.jsx)(o.Ty,{className:e,children:(0,u.jsx)(o.Jy,{label:n("collections"),children:(0,l.u)(s)})})}const D=t.memo(M);function T({className:e,ids:s,infos:n}){return(0,u.jsxs)("div",{className:e,children:[(0,u.jsx)(D,{numCollections:null==s?void 0:s.length}),(0,u.jsx)(P,{infos:n})]})}const E=t.memo(T);var q=n(57513),_=n(26238);const $={transform:e=>e.map((({args:[e]})=>e)).sort(((e,s)=>e.cmp(s)))};function F(e){const s=[],n=[];return e.forEach((({event:{data:[e],method:t}})=>{"Created"===t||"ForceCreated"===t?s.push(e):n.push(e)})),{added:s,removed:n}}const O=(0,g.e)("useCollectionIds",(function(){const{api:e}=(0,x.h)(),s=(0,q.k)(e.query.uniques.class,[],$);return(0,_.N)([e.events.uniques.Created,e.events.uniques.Destroyed,e.events.uniques.ForceCreated],F,s)})),V={isAdminMe:!1,isFreezerMe:!1,isIssuerMe:!1,isOwnerMe:!1},R={withParams:!0},Z={transform:e=>{if(!e)return null;try{const s=JSON.parse(e);if(s&&"object"==typeof s)return{image:"string"==typeof s.image?s.image.replace(/ipfs:\/\/|ipfs\//gi,""):null,name:"string"==typeof s.name?s.name:null}}catch{}return null}};function B(e,s){const n=s.toString();return e.some((e=>e===n))}const L=(0,g.e)("useCollectionInfos",(function(e){const{api:s}=(0,x.h)(),{allAccounts:n}=(0,i.x)(),a=(0,v.W7)(s.query.uniques.classMetadataOf.multi,[e],R),o=(0,v.W7)(s.query.uniques.class.multi,[e],R),[r,l]=(0,t.useState)(),c=(0,t.useMemo)((()=>a&&a[1].length?a[1].map((e=>e.isSome?e.unwrap().data.toString():"")):[]),[a]),d=(0,b.g)(c,Z);return(0,t.useEffect)((()=>{if(d&&o&&a&&o[0][0].length===a[0][0].length){const e=o[0][0].map(((e,s)=>function(e,s,n,t){const a=n.unwrapOr(null);return{...a?{isAdminMe:B(e,a.admin),isFreezerMe:B(e,a.freezer),isIssuerMe:B(e,a.issuer),isOwnerMe:B(e,a.owner)}:V,details:a,id:s,ipfsData:null,key:s.toString(),metadata:t.unwrapOr(null)}}(n,e,o[1][s],a[1][s])));l(e.map((e=>s=>{var n;const t=s.metadata&&(null==(n=s.metadata.data)?void 0:n.toString());return{...s,ipfsData:t&&e.has(t)&&e.get(t)||null}})(d)))}}),[n,o,e,d,a]),r}));function H({basePath:e,className:s}){const{t:n}=d(),{hasAccounts:r}=(0,i.x)(),l=O(),c=L(l),m=(0,t.useRef)([{isRoot:!0,name:"overview",text:n("Overview")},{name:"my-nfts",text:n("My NFTs")}]),h=(0,t.useMemo)((()=>r&&c&&c.some((({details:e,metadata:s})=>!(!e||!s)))?[]:["my-nfts"]),[r,c]);return(0,u.jsxs)("main",{className:s,children:[(0,u.jsx)(o.mQ,{basePath:e,hidden:h,items:m.current}),(0,u.jsxs)(a.rs,{children:[(0,u.jsx)(a.AW,{path:`${e}/my-nfts`,children:(0,u.jsx)(k,{infos:c})}),(0,u.jsx)(a.AW,{children:(0,u.jsx)(E,{ids:l,infos:c})})]})]})}const W=t.memo(H)},21077:(e,s,n)=>{n.d(s,{Z:()=>f});var t=n(2784),a=n(61397),o=n(92529),i=n(36546),r=n(69877),l=n(49753),c=n(95292),d=n(33661),u=n(66922),m=n(52322);const h=Number.MAX_SAFE_INTEGER,p=["xcm","xcmPallet","polkadotXcm"];function x({paraId:e,text:s,ui:n}){return{text:(0,m.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,m.jsx)(a.Mj,{className:"ui--Dropdown-icon",logo:n.logo}),(0,m.jsx)("div",{className:"ui--Dropdown-name",children:s})]},e),value:e||-1}}function g({onClose:e}){var s;const{t:n}=(0,u.$)(),{api:g}=(0,o.h)(),[f,v]=(0,t.useState)(c.nw),[b,j]=(0,t.useState)(null),[y,w]=(0,t.useState)(null),[N,C]=(0,t.useState)(h),{allowTeleport:k,destinations:S,isParaTeleport:I,oneWay:A}=(0,i.M)(),P=(0,t.useMemo)((()=>{const e=p.filter((e=>g.tx[e]&&(0,d.m)(g.tx[e].limitedTeleportAssets)))[0];return g.tx[e].limitedTeleportAssets}),[g]),M=(0,t.useMemo)((()=>S.map(x)),[S]),D=(0,t.useMemo)((()=>{var e;return null==(e=S.find((({paraId:e},s)=>-1===N?0===s:N===e)))?void 0:e.value}),[S,N]),T=(0,r.J)(D),E=(0,t.useMemo)((()=>[{V1:I?{interior:"Here",parents:1}:{interior:{X1:{ParaChain:N}},parents:0}},{V1:{interior:{X1:{AccountId32:{id:g.createType("AccountId32",b).toHex(),network:"Any"}}},parents:0}},{V1:[{fun:{Fungible:f},id:{Concrete:{interior:"Here",parents:I?1:0}}}]},0,{Unlimited:null}]),[g,f,I,b,N]),q=!!f;return(0,m.jsxs)(a.u_,{header:n("Teleport assets"),onClose:e,size:"large",children:[(0,m.jsxs)(a.u_.Content,{children:[(0,m.jsx)(a.u_.Columns,{hint:n("The transferred balance will be subtracted (along with fees) from the sender account."),children:(0,m.jsx)(a.rp,{label:n("send from account"),labelExtra:(0,m.jsx)(l.Z,{label:n("transferrable"),params:y}),onChange:w,type:"account"})}),0!==M.length&&(0,m.jsxs)(a.u_.Columns,{hint:n("The destination chain for this asset teleport. The transferred value will appear on this chain."),children:[(0,m.jsx)(a.Lt,{defaultValue:M[0].value,label:n("destination chain"),onChange:C,options:M}),!I&&A.includes(N)&&(0,m.jsx)(a.Pd,{content:n("Currently this is a one-way transfer since the on-chain runtime functionality to send the funds from the destination chain back to this account not yet available.")})]}),(0,m.jsx)(a.u_.Columns,{hint:n("The beneficiary will have access to the transferred amount when the transaction is included in a block."),children:(0,m.jsx)(a.rp,{label:n("send to address"),onChange:j,type:"allPlus"})}),(0,m.jsxs)(a.u_.Columns,{hint:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:n("This is the amount to be teleported to the destination chain and does not account for the source or the destination transfer fee")}),(0,m.jsx)("p",{children:n("The amount deposited to the recipient will be net the calculated cross-chain fee. If the recipient address is new, the amount deposited should be greater than the Existential Deposit")})]}),children:[(0,m.jsx)(a.H,{autoFocus:!0,isError:!q,isZeroable:!0,label:n("amount"),onChange:v}),(0,m.jsx)(a.H,{defaultValue:null==T||null==(s=T.consts.balances)?void 0:s.existentialDeposit,isDisabled:!0,isLoading:!T,label:n("destination existential deposit")})]})]}),(0,m.jsx)(a.u_.Actions,{children:(0,m.jsx)(a.cA,{accountId:y,icon:"share-square",isDisabled:!(k&&q&&b&&f&&T&&(I||N!==h)),label:n("Teleport"),onStart:e,params:E,tx:P})})]})}const f=t.memo(g)},12387:(e,s,n)=>{n.d(s,{Z:()=>Ks});var t=n(2784),a=n(7267),o=n(61397),i=n(92529),r=n(36856),l=n(66922),c=n(83),d=n(14681),u=n(52322);function m({auctionInfo:e,blockNumber:s,className:n="",isFirst:t,isLatest:a,value:{accountId:i,firstSlot:r,isCrowdloan:c,lastSlot:m,paraId:h,value:p}}){const{t:x}=(0,l.$)();return(0,u.jsxs)("tr",{className:n,children:[(0,u.jsx)("td",{children:t&&(0,u.jsx)("h1",{children:a?x("latest"):(0,u.jsxs)(u.Fragment,{children:["#",(0,d.u)(!s||s.isZero()?e.endBlock:s)]})})}),(0,u.jsx)(o.iA.Column.Id,{value:h}),(0,u.jsx)("td",{className:"badge",children:(0,u.jsx)(o.f,{id:h})}),(0,u.jsx)("td",{className:"address",children:(0,u.jsx)(o.ax,{value:i})}),(0,u.jsx)("td",{className:"all number",children:x(c?"Yes":"No")}),(0,u.jsx)("td",{className:"all number together",children:r.eq(m)?(0,d.u)(r):`${(0,d.u)(r)} - ${(0,d.u)(m)}`}),(0,u.jsx)(o.iA.Column.Balance,{value:p})]})}const h=t.memo(m);function p({auctionInfo:e,campaigns:s,className:n,winningData:a}){const{t:d}=(0,l.$)(),{api:m}=(0,i.h)(),p=(0,c.f)(),x=(0,r.W7)(m.query.crowdloan.newRaise),g=(0,t.useRef)([[d("bids"),"start",3],[d("bidder"),"address"],[d("crowdloan")],[d("leases")],[d("value")]]),f=(0,t.useMemo)((()=>{if(x&&e&&e.leasePeriod&&s.funds){const n=e.leasePeriod,t=n.add(p);return s.funds.filter((({firstSlot:e,isWinner:s,lastSlot:a,paraId:o})=>!s&&x.some((e=>e.eq(o)))&&e.gte(n)&&a.lte(t))).sort(((e,s)=>s.value.cmp(e.value)))}}),[e,s,x,p]),v=(0,t.useCallback)(((s,n)=>!n&&x&&null!=e&&e.leasePeriod&&f?s.concat(...f.filter((({firstSlot:e,lastSlot:n,paraId:t,value:a})=>!s.some((s=>s.firstSlot.eq(e)&&s.lastSlot.eq(n)))&&!f.some((s=>!t.eq(s.paraId)&&e.eq(s.firstSlot)&&n.eq(s.lastSlot)&&a.lt(s.value)))))).map((e=>f.find((({firstSlot:s,lastSlot:n,value:t})=>e.firstSlot.eq(s)&&e.lastSlot.eq(n)&&e.value.lt(t)))||e)).sort(((e,s)=>e.firstSlot.eq(s.firstSlot)?e.lastSlot.cmp(s.lastSlot):e.firstSlot.cmp(s.firstSlot))):s),[e,f,x]);return(0,u.jsx)(o.iA,{className:n,empty:x&&e&&e.numAuctions&&a&&(e.endBlock&&!a.length?d("No winners in this auction"):d("No ongoing auction")),header:g.current,noBodyTag:!0,children:e&&e.leasePeriod&&a&&f&&(a.length?a.map((({blockNumber:s,winners:n},t)=>(0,u.jsx)("tbody",{children:v(n,0!==t||1!==a.length).map(((n,a)=>(0,u.jsx)(h,{auctionInfo:e,blockNumber:s,isFirst:0===a,isLatest:0===t,value:n},`${s.toString()}:${n.key}`)))},t))):0!==f.length&&(0,u.jsx)("tbody",{children:v([],!1).map(((s,n)=>(0,u.jsx)(h,{auctionInfo:e,isFirst:0===n,isLatest:!0,value:s},`latest-crowd:${s.key}`)))},"latest-crowd"))})}const x=t.memo(p);var g=n(13328),f=n(65182),v=n(7840),b=n(95292);function j({noCodeCheck:e,onChange:s,ownedIds:n}){const{t:a}=(0,l.$)(),[i,r]=(0,t.useState)(null),[c,d]=(0,t.useState)(0);(0,t.useEffect)((()=>{s(i&&c?{accountId:i,paraId:c}:{accountId:null,paraId:0})}),[i,s,n,c]);const m=(0,t.useMemo)((()=>n.map((({manager:e})=>e))),[n]),h=(0,t.useMemo)((()=>n.filter((({manager:e})=>e===i)).map((({paraId:e})=>({text:e.toString(),value:e.toNumber()})))),[i,n]),p=(0,t.useCallback)((s=>d(e||n.some((({hasCode:e,paraId:n})=>n.eq(s)&&e))?s:0)),[e,n]);return(0,u.jsxs)(o.u_.Columns,{hint:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:a("This account that has been used to register the parachain. This will pay all associated fees.")}),(0,u.jsx)("p",{children:a("The parachain id is associated with the selected account via parathread registration.")})]}),children:[(0,u.jsx)(o.rp,{filter:m,label:a("parachain owner"),onChange:r,type:"account",value:i}),i&&(0,u.jsx)(o.Lt,{defaultValue:h[0].value,label:a("parachain id"),onChange:p,options:h},i),!e&&!c&&(0,u.jsx)(o.oy,{content:a("Before using this registered paraId, you need to have a WASM validation function registered on-chain")})]})}const y=t.memo(j),w={accountId:null,paraId:0};function N({auctionInfo:e,className:s,lastWinners:n,ownedIds:a}){var r,m;const{t:h}=(0,l.$)(),{api:p}=(0,i.h)(),{hasAccounts:x}=(0,g.x)(),j=(0,f.C)(),N=(0,c.E)(),[{accountId:C,paraId:k},S]=(0,t.useState)(w),[I,A]=(0,t.useState)(b.nw),[P,M]=(0,t.useState)(0),[D,T]=(0,v.O)(),E=(0,t.useMemo)((()=>{if(null==e||!e.leasePeriod)return[];const s=e.leasePeriod.toNumber();return N.map((([e,n],t)=>({firstSlot:s+e,lastSlot:s+n,text:`${(0,d.u)(s+e)} - ${(0,d.u)(s+n)}`,value:t})))}),[e,N]),q=(0,t.useMemo)((()=>n&&n.winners.find((({firstSlot:e,lastSlot:s})=>e.eqn(E[P].firstSlot)&&s.eqn(E[P].lastSlot)))),[n,P,E]),_=!(!I||!q)&&I.lte(q.value),$=!I||I.isZero()||_;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.zx,{icon:"plus",isDisabled:!a.length||!x||!(null!=e&&e.numAuctions)||!e.leasePeriod||!e.endBlock||!p.consts.auctions||(null==j?void 0:j.gte(e.endBlock.add(p.consts.auctions.endingPeriod))),label:h("Bid"),onClick:T}),D&&(0,u.jsxs)(o.u_,{className:s,header:h("Place bid"),onClose:T,size:"large",children:[(0,u.jsxs)(o.u_.Content,{children:[(0,u.jsx)(y,{onChange:S,ownedIds:a}),(0,u.jsx)(o.u_.Columns,{hint:h("The first and last lease period for this bid. The last lease period should be after the first with the maximum determined by the auction config."),children:(0,u.jsx)(o.Lt,{label:h("bid period range (first lease - last lease)"),onChange:M,options:E,value:P})}),(0,u.jsxs)(o.u_.Columns,{hint:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:h("The amount to to bid for this parachain lease period range.")}),(0,u.jsx)("p",{children:h("The bid should be more than the current range winner to be accepted and influence the auction outcome.")})]}),children:[(0,u.jsx)(o.H,{autoFocus:!0,isError:$,isZeroable:!1,label:h("bid amount"),onChange:A}),(0,u.jsx)(o.H,{defaultValue:null==q?void 0:q.value,isDisabled:!0,label:h("current range winning bid")},P)]})]}),(0,u.jsx)(o.u_.Actions,{children:(0,u.jsx)(o.cA,{accountId:C,icon:"plus",isDisabled:!k||$||!(null!=e&&e.leasePeriod),label:h("Bid"),onStart:T,params:[k,null==e?void 0:e.numAuctions,null==e||null==(r=e.leasePeriod)?void 0:r.addn(N[P][0]),null==e||null==(m=e.leasePeriod)?void 0:m.addn(N[P][1]),I],tx:p.tx.auctions.bid})})]})]})}const C=t.memo(N);var k=n(76277);function S({auctionInfo:e,className:s,lastWinners:n}){var t,a;const{t:c}=(0,l.$)(),{api:m}=(0,i.h)(),h=(0,f.C)(),p=(0,r.W7)(null==(t=m.query.balances)?void 0:t.totalIssuance);return(0,u.jsxs)(o.Ty,{className:s,children:[(0,u.jsxs)("section",{children:[(0,u.jsx)(o.Jy,{label:c("auctions"),children:e?(0,d.u)(e.numAuctions):(0,u.jsx)("span",{className:"--tmp",children:"99"})}),(0,u.jsx)(o.Jy,{label:c("active"),children:e?e.leasePeriod?c("yes"):c("no"):(0,u.jsx)("span",{className:"--tmp",children:c("no")})})]}),e&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("section",{children:[e.leasePeriod&&(0,u.jsxs)(o.Jy,{label:c("first - last"),children:[(0,d.u)(e.leasePeriod)," - ",(0,d.u)(e.leasePeriod.add(m.consts.auctions.leasePeriodsPerSlot).isub(b.If))]}),p&&n&&(0,u.jsx)(o.Jy,{label:c("total"),progress:{hideValue:!0,total:p,value:n.total,withTime:!0},children:(0,u.jsx)(k.Z,{value:n.total,withSi:!0})})]}),(0,u.jsx)("section",{children:(null==e?void 0:e.endBlock)&&h&&(h.lt(e.endBlock)?(0,u.jsxs)(o.Jy,{label:c("end period at"),progress:{hideGraph:!0,total:e.endBlock,value:h,withTime:!0},children:["#",(0,d.u)(e.endBlock)]}):(0,u.jsx)(o.Jy,{label:c("ending period"),progress:{total:null==(a=m.consts.auctions)?void 0:a.endingPeriod,value:h.sub(e.endBlock),withTime:!0}}))})]})]})}const I=t.memo(S);function A({auctionInfo:e,campaigns:s,className:n,ownedIds:t,winningData:a}){const i=a&&a[0];return(0,u.jsxs)("div",{className:n,children:[(0,u.jsx)(I,{auctionInfo:e,lastWinners:i}),(0,u.jsx)(o.zx.Group,{children:(0,u.jsx)(C,{auctionInfo:e,lastWinners:i,ownedIds:t})}),(0,u.jsx)(x,{auctionInfo:e,campaigns:s,winningData:a})]})}const P=t.memo(A),M={accountId:null,paraId:0};function D({auctionInfo:e,bestNumber:s,className:n,leasePeriod:a,ownedIds:r}){const{t:d}=(0,l.$)(),{api:m}=(0,i.h)(),h=(0,c.E)(),[{accountId:p,paraId:x},g]=(0,t.useState)(M),[f,j]=(0,t.useState)(),[w,N]=(0,t.useState)(),[C,k]=(0,t.useState)(),[S,I]=(0,t.useState)(),[A,P]=(0,v.O)(),D=h[h.length-1][1]-h[0][0],T=!s||!w||w.lt(s),E=!C||!!a&&C.lt(a.currentPeriod),q=!S||!C||S.lt(C)||S.gt(C.addn(D)),_=((null==e?void 0:e.leasePeriod)||(null==a?void 0:a.currentPeriod.add(b.If))||1).toString();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.zx,{icon:"plus",isDisabled:!r.length,label:d("Add fund"),onClick:P}),A&&(0,u.jsxs)(o.u_,{className:n,header:d("Add campaign"),onClose:P,size:"large",children:[(0,u.jsxs)(o.u_.Content,{children:[(0,u.jsx)(y,{onChange:g,ownedIds:r}),(0,u.jsx)(o.u_.Columns,{hint:d("The amount to be raised in this funding campaign."),children:(0,u.jsx)(o.H,{isZeroable:!1,label:d("crowdfund cap"),onChange:j})}),(0,u.jsx)(o.u_.Columns,{hint:d("The end block for contributions to this fund."),children:(0,u.jsx)(o.Rn,{isError:T,label:d("ending block"),onChange:N})}),(0,u.jsxs)(o.u_.Columns,{hint:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:d("The first and last lease periods for this funding campaign.")}),(0,u.jsx)("p",{children:d("The ending lease period should be after the first and a maximum of {{maxPeriods}} periods more than the first",{replace:{maxPeriods:D}})})]}),children:[(0,u.jsx)(o.Rn,{defaultValue:_,isError:E,label:d("first period"),onChange:k}),(0,u.jsx)(o.Rn,{defaultValue:_,isError:q,label:d("last period"),onChange:I})]})]}),(0,u.jsx)(o.u_.Actions,{children:(0,u.jsx)(o.cA,{accountId:p,icon:"plus",isDisabled:!x||!(null!=f&&f.gt(b.nw))||T||E||q,label:d("Add"),onStart:P,params:[x,f,C,S,w,null],tx:m.tx.crowdloan.create})})]})]})}const T=t.memo(D);var E=n(96124),q=n(76015),_=n(67738),$=n(74076),F=n(92730);const O=[132,134];function V({cap:e,className:s,needsSignature:n,paraId:a,raised:r}){const{t:c}=(0,l.$)(),{api:d}=(0,i.h)(),{hasAccounts:m}=(0,g.x)(),[h,p]=(0,v.O)(),[x,f]=(0,t.useState)(null),[b,j]=(0,t.useState)(),[y,w]=(0,t.useState)(null),N=(0,t.useMemo)((()=>n&&!function(e,s){if((0,$.vq)(s)&&O.includes(s.length))try{return e.createType("MultiSignature",s),!0}catch(e){console.error(e)}return!1}(d,y)),[d,n,y]),C=e.sub(r),k=!b||b.lt(d.consts.crowdloan.minContribution),S=!(!b||!b.gt(C)),I=k||S;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.zx,{icon:"plus",isDisabled:!m,label:c("Contribute"),onClick:p}),h&&(0,u.jsxs)(o.u_,{className:s,header:c("Contribute to fund"),onClose:p,size:"large",children:[(0,u.jsxs)(o.u_.Content,{children:[(0,u.jsx)(o.u_.Columns,{hint:c("This account will contribute to the crowdloan."),children:(0,u.jsx)(o.rp,{label:c("contribute from"),onChange:f,type:"account",value:x})}),(0,u.jsxs)(o.u_.Columns,{hint:c("The amount to contribute from this account."),children:[(0,u.jsx)(o.H,{autoFocus:!0,defaultValue:d.consts.crowdloan.minContribution,isError:I,isZeroable:!1,label:c("contribution"),onChange:j}),k&&(0,u.jsx)(o.Pd,{content:c("The amount is less than the minimum allowed contribution of {{value}}",{replace:{value:(0,F.a)(d.consts.crowdloan.minContribution)}})}),S&&(0,u.jsx)(o.Pd,{content:c("The amount is more than the remaining contribution needed {{value}}",{replace:{value:(0,F.a)(C)}})})]}),n&&(0,u.jsxs)(o.u_.Columns,{hint:c("The verifier signature that is to be associated with this contribution."),children:[(0,u.jsx)(o.II,{isError:N,label:c("verifier signature"),onChange:w,placeholder:c("0x...")}),N&&(0,u.jsx)(o.Pd,{content:c("The hex-encoded verifier signature should be provided to you by the team running the crowdloan (based on the information you provide).")})]}),(0,u.jsxs)(o.u_.Columns,{hint:c("The above contribution should more than minimum contribution amount and less than the remaining value."),children:[(0,u.jsx)(o.H,{defaultValue:d.consts.crowdloan.minContribution,isDisabled:!0,label:c("minimum allowed")}),(0,u.jsx)(o.H,{defaultValue:C,isDisabled:!0,label:c("remaining till cap")})]})]}),(0,u.jsx)(o.u_.Actions,{children:(0,u.jsx)(o.cA,{accountId:x,icon:"plus",isDisabled:I||N,label:c("Contribute"),onStart:p,params:[a,b,y],tx:d.tx.crowdloan.contribute})})]})]})}const R=t.memo(V);function Z({className:e,paraId:s}){const{t:n}=(0,l.$)(),{api:a}=(0,i.h)(),{hasAccounts:r}=(0,g.x)(),[c,d]=(0,v.O)(),[m,h]=(0,t.useState)(null);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.zx,{icon:"minus",isDisabled:!r,label:n("Refund"),onClick:d}),c&&(0,u.jsxs)(o.u_,{className:e,header:n("Withdraw from fund"),onClose:d,size:"large",children:[(0,u.jsx)(o.u_.Content,{children:(0,u.jsx)(o.u_.Columns,{hint:n("This account will be used to send the transaction."),children:(0,u.jsx)(o.rp,{label:n("requesting from"),onChange:h,type:"account",value:m})})}),(0,u.jsx)(o.u_.Actions,{children:(0,u.jsx)(o.cA,{accountId:m,icon:"credit-card",label:n("Refund"),onStart:d,params:[s],tx:a.tx.crowdloan.refund})})]})]})}const B=t.memo(Z);var L=n(89448),H=n(90107);const W={blockHash:"-",contributorsHex:[],hasLoaded:!1,myAccounts:[],myAccountsHex:[],myContributions:{}},z=(0,L.e)("useContributions",(function(e){const{api:s}=(0,i.h)(),{allAccountsHex:n}=(0,g.x)(),[a,o]=(0,t.useState)((()=>W)),l=(0,r.W7)(s.derive.crowdloan.contributions,[e]),c=(0,r.W7)(s.derive.crowdloan.ownContributions,[e,a.myAccountsHex]);return(0,t.useEffect)((()=>{l&&o((e=>{let t,a=l.contributorsHex.filter((e=>n.includes(e)));return a.length===e.myAccountsHex.length?(a=e.myAccountsHex,t=e.myAccounts):t=a.map((e=>(0,H.m)(e,s.registry.chainSS58))),{...e,...l,hasLoaded:!0,myAccounts:t,myAccountsHex:a}}))}),[s,n,l]),(0,t.useEffect)((()=>{c&&o((e=>({...e,myContributions:c})))}),[c]),a}));function U({bestHash:e,bestNumber:s,className:n="",isOngoing:a,leasePeriod:r,value:{info:{cap:c,depositor:m,end:h,firstPeriod:p,lastPeriod:x,raised:f,verifier:v},isCapped:b,isEnded:j,isWinner:y,paraId:w}}){const{t:N}=(0,l.$)(),{api:C}=(0,i.h)(),{isAccount:S}=(0,g.x)(),I=(0,q.jC)(w),{blockHash:A,contributorsHex:P,hasLoaded:M,myAccounts:D,myAccountsHex:T,myContributions:E}=z(w),[$,F]=(0,t.useState)((()=>({prevHash:"",prevLength:0}))),O=(0,t.useMemo)((()=>S(m.toString())),[m,S]),V=(0,t.useMemo)((()=>s&&h.gt(s)?h.sub(s):null),[s,h]),Z=(0,t.useMemo)((()=>c.isZero()?"100.00%":`${(f.muln(1e4).div(c).toNumber()/100).toFixed(2)}%`),[c,f]),L=!V&&!!r&&(y?r.currentPeriod.gt(x):r.currentPeriod.gt(p)),H=a&&!b&&!y&&!!V,W=f.isZero(),U=!f.isZero()&&L,J=0!==I.length&&I[0].homepage;return(0,t.useEffect)((()=>{F((e=>{const s=P.length;return e.prevLength!==s?{prevHash:A,prevLength:s}:e}))}),[P,A]),(0,u.jsxs)("tr",{className:n,children:[(0,u.jsx)(o.iA.Column.Id,{value:w}),(0,u.jsx)("td",{className:"badge",children:(0,u.jsx)(o.f,{id:w})}),(0,u.jsx)("td",{className:"media--800",children:N(y?"Winner":V?b?"Capped":a?"Active":"Past":"Ended")}),(0,u.jsx)("td",{className:"address media--2000",children:(0,u.jsx)(o.ax,{value:m})}),(0,u.jsxs)("td",{className:"all number together media--1200",children:[V&&(0,u.jsx)(_.Z,{value:V}),"#",(0,d.u)(h)]}),(0,u.jsx)("td",{className:"number all together",children:p.eq(x)?(0,d.u)(p):`${(0,d.u)(p)} - ${(0,d.u)(x)}`}),(0,u.jsxs)("td",{className:"number together",children:[(0,u.jsx)(k.Z,{value:f,withCurrency:!1})," / ",(0,u.jsx)(k.Z,{value:c}),(0,u.jsx)("div",{children:Z}),0!==D.length&&(0,u.jsx)(o.xH,{summary:N("My contributions ({{count}})",{replace:{count:D.length}}),withBreaks:!0,children:D.map(((e,s)=>(0,u.jsx)(o.ax,{balance:E[T[s]],value:e,withBalance:!0},e)))})]}),(0,u.jsx)("td",{className:"number together media--1100",children:M?(0,u.jsxs)(u.Fragment,{children:[e&&(0,u.jsx)(o.JO,{color:$.prevHash===e?"green":"transparent",icon:"chevron-up",isPadded:!0}),0!==P.length&&(0,d.u)(P.length)]}):(0,u.jsx)("span",{className:"--tmp",children:"999"})}),(0,u.jsxs)("td",{className:"button media--1000",children:[U&&0!==P.length&&(0,u.jsx)(B,{paraId:w}),W&&(0,u.jsx)(o.cA,{accountId:m,className:"media--1400",icon:"times",isDisabled:!(O||L),label:N(j?"Close":"Cancel"),params:[w],tx:C.tx.crowdloan.dissolve}),a&&H&&(0,u.jsx)(R,{cap:c,needsSignature:v.isSome,paraId:w,raised:f}),a&&J&&(0,u.jsxs)("div",{children:[(0,u.jsx)("a",{href:J,rel:"noopener noreferrer",target:"_blank",children:N("Homepage")}),"   "]})]})]})}const J=t.memo(U);function G(e,s){return null==s?void 0:s.sort((({key:s},{key:n})=>{const t=e[s]||!1;return t===(e[n]||!1)?0:t?-1:1}))}function Q({bestNumber:e,className:s,leasePeriod:n,value:a}){const{t:i}=(0,l.$)(),r=(0,E.P)(),[c,d,m]=(0,t.useMemo)((()=>function(e,s){const n=null==s?void 0:s.currentPeriod;let t=null,a=null,o=null;return e&&n&&(t=e.filter((({firstSlot:e,isCapped:s,isEnded:t,isWinner:a})=>!(s||t||a)&&n.lte(e))),a=e.filter((({firstSlot:e,isCapped:s,isEnded:t,isWinner:a})=>s||t||a||n.gt(e))),o=e.map((({paraId:e})=>e))),[t,a,o]}(a,n)),[n,a]),h=(0,q.gW)(m),[p,x]=(0,t.useMemo)((()=>[G(h,c),G(h,d)]),[c,d,h]),g=(0,t.useRef)([[i("ongoing"),"start",2],[void 0,"media--800"],[void 0,"media--2000"],[i("ending"),"media--1200"],[i("leases")],[i("raised")],[i("count"),"media--1100"],[void 0,"media--1000"]]),f=(0,t.useRef)([[i("completed"),"start",2],[void 0,"media--800"],[void 0,"media--2000"],[i("ending"),"media--1200"],[i("leases")],[i("raised")],[i("count"),"media--1100"],[void 0,"media--1000"]]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Pd,{className:"warning centered",content:i('Do not transfer any funds directly to a specific account that is associated with a loan or a team. Use the "Contribute" action to record the contribution on-chain using the crowdloan runtime module. When the fund is dissolved, after either the parachain lease expires or the loan ending without winning, the full value will be returned to your account by the runtime. Funds sent directly to an account, without using the crowdloan functionality, may not be returned by the receiving account.')}),(0,u.jsx)(o.iA,{className:s,empty:a&&p&&i("No active campaigns found"),header:g.current,children:null==p?void 0:p.map((s=>(0,u.jsx)(J,{bestHash:r,bestNumber:e,isOngoing:!0,value:s},s.accountId)))}),(0,u.jsx)(o.iA,{className:s,empty:a&&x&&i("No completed campaigns found"),header:f.current,children:null==x?void 0:x.map((s=>(0,u.jsx)(J,{bestNumber:e,leasePeriod:n,value:s},s.accountId)))})]})}const X=t.memo(Q);function K({activeCap:e,activeRaised:s,className:n,fundCount:t,isLoading:a,totalCap:i,totalRaised:r}){const{t:c}=(0,l.$)();return(0,u.jsxs)(o.Ty,{className:n,children:[(0,u.jsx)(o.Jy,{label:c("funds"),children:void 0===t?(0,u.jsx)("span",{className:"--tmp",children:"99"}):(0,d.u)(t)}),(0,u.jsx)(o.Jy,{label:`${c("active raised / cap")}`,progress:{hideValue:!0,isBlurred:a,total:a?b.Jo:e,value:a?b.um:s},children:(0,u.jsxs)("span",{className:a?"--tmp":"",children:[(0,u.jsx)(k.Z,{value:s,withCurrency:!1,withSi:!0})," / ",(0,u.jsx)(k.Z,{value:e,withSi:!0})]})}),(0,u.jsx)(o.Jy,{label:`${c("total raised / cap")}`,progress:{hideValue:!0,isBlurred:a,total:a?b.Jo:i,value:a?b.um:r},children:(0,u.jsxs)("span",{className:a?"--tmp":"",children:[(0,u.jsx)(k.Z,{value:r,withCurrency:!1,withSi:!0})," / ",(0,u.jsx)(k.Z,{value:i,withSi:!0})]})})]})}const Y=t.memo(K);function ee({auctionInfo:e,campaigns:{activeCap:s,activeRaised:n,funds:t,isLoading:a,totalCap:i,totalRaised:r},className:l,leasePeriod:c,ownedIds:d}){const m=(0,f.C)();return(0,u.jsxs)("div",{className:l,children:[(0,u.jsx)(Y,{activeCap:s,activeRaised:n,fundCount:null==t?void 0:t.length,isLoading:a,totalCap:i,totalRaised:r}),(0,u.jsx)(o.zx.Group,{children:(0,u.jsx)(T,{auctionInfo:e,bestNumber:m,leasePeriod:c,ownedIds:d})}),(0,u.jsx)(X,{bestNumber:m,leasePeriod:c,value:t})]})}const se=t.memo(ee);var ne=n(82740),te=n(6152);function ae({lifecycle:e,nextAction:s}){return e&&(0,u.jsxs)(u.Fragment,{children:[e.toString(),s&&(0,u.jsx)(te.Z,{value:s.sessionIndex})]})}const oe=t.memo(ae);var ie=n(91572);const re={transform:e=>e.number.unwrap()},le=(0,L.e)("useChainDetails",(function(e){const{api:s}=(0,ie.x)(e);return{bestNumber:(0,r.W7)(null==s?void 0:s.rpc.chain.subscribeNewHeads,void 0,re),runtimeVersion:(0,r.W7)(null==s?void 0:s.rpc.state.subscribeRuntimeVersion)}}));function ce({className:e,id:s}){const{bestNumber:n,runtimeVersion:t}=le(s);return(0,u.jsxs)(de,{className:e,children:[n&&(0,u.jsx)("div",{children:(0,d.u)(n)}),t&&(0,u.jsxs)("div",{className:"version",children:[(0,u.jsx)("div",{className:"media--1100",children:t.specName.toString()}),(0,u.jsx)("div",{className:"media--1100",children:"/"}),(0,u.jsx)("div",{children:t.specVersion.toString()})]})]})}const de=ne.ZP.div.withConfig({displayName:"ParachainInfo__StyledDiv",componentId:"sc-g1knh8-0"})([".version{font-size:var(--font-size-small);white-space:nowrap;> div{display:inline-block;overflow:hidden;max-width:10em;text-overflow:ellipsis;}}"]),ue=t.memo(ce);var me=n(12372);function he({children:e,className:s,leasePeriod:n,value:a}){const o=(0,t.useMemo)((()=>function(e,s){return e&&s&&(0,me.G)(s).sub(b.If).imul(e.length).iadd(e.remainder)}(n,a)),[n,a]);return o?(0,u.jsx)(_.Z,{className:s,value:o,children:e}):null}const pe=t.memo(he);function xe({className:e,fromFirst:s,leasePeriod:n,periods:a}){const o=(0,t.useMemo)((()=>function(e,s){return s&&e&&e.reduce(((e,n)=>{const t=s.addn(n);return!e.length||e[e.length-1][1].add(b.If).lt(t)?e.push([t,t]):e[e.length-1][1]=t,e}),[]).map((([e,s])=>e.eq(s)?(0,d.u)(e):`${(0,d.u)(e)} - ${(0,d.u)(s)}`)).join(", ")}(a,null==n?void 0:n.currentPeriod)),[null==n?void 0:n.currentPeriod,a]);return(0,u.jsxs)("div",{className:e,children:[(0,u.jsx)("div",{children:o}),a&&(0,u.jsx)(pe,{leasePeriod:n,value:s?a[0]:a[a.length-1]+1})]})}const ge=t.memo(xe);var fe=n(54984);const ve={defaultValue:{headHex:null,leases:[],lifecycle:null,paraInfo:null,pendingAvail:null,qDmp:0,qHrmpE:0,qHrmpI:0,qUmp:0,updateAt:null,watermark:null},transform:([e,s,n,t,a,o,i,r,l,c,d])=>({headHex:e.isSome?e.unwrap().toHex():null,leases:d.map(((e,s)=>e.isSome?s:-1)).filter((e=>-1!==e)),lifecycle:n.unwrapOr(null),paraInfo:c.unwrapOr(null),pendingAvail:l.unwrapOr(null),qDmp:t.length,qHrmpE:o.length,qHrmpI:i.length,qUmp:a.length,updateAt:s.unwrapOr(null),watermark:r.unwrapOr(null)})},be=(0,L.e)("useParaInfo",(function(e){var s,n,t,a,o,r;const{api:l}=(0,i.h)();return(0,fe.L)([[l.query.paras.heads,e],[l.query.paras.futureCodeUpgrades,e],[l.query.paras.paraLifecycles,e],[null==(s=l.query.parasDmp||l.query.paraDmp||l.query.dmp)?void 0:s.downwardMessageQueues,e],[null==(n=l.query.parasUmp||l.query.ump)?void 0:n.relayDispatchQueues,e],[null==(t=l.query.parasHrmp||l.query.paraHrmp||l.query.hrmp)?void 0:t.hrmpEgressChannelsIndex,e],[null==(a=l.query.parasHrmp||l.query.paraHrmp||l.query.hrmp)?void 0:a.hrmpIngressChannelsIndex,e],[null==(o=l.query.parasHrmp||l.query.paraHrmp||l.query.hrmp)?void 0:o.hrmpWatermarks,e],[null==(r=l.query.parasInclusion||l.query.paraInclusion||l.query.inclusion)?void 0:r.pendingAvailability,e],[l.query.registrar.paras,e],[l.query.slots.leases,e]],ve)}));function je(e,s){return null==e?void 0:e.map(((e,n)=>(0,u.jsx)(o.ax,{nameExtra:s&&(0,u.jsxs)(u.Fragment,{children:[" ",`(${(0,d.u)(s[n])})`]}),value:e},e.toString())))}function ye({bestNumber:e,className:s="",id:n,lastBacked:a,lastInclusion:i,lastTimeout:r,leasePeriod:c,nextAction:m,sessionValidators:h,validators:p}){var x,g,f,v;const{t:b}=(0,l.$)(),j=be(n),[y,w]=(0,t.useState)([]),N=(0,t.useMemo)((()=>e&&(i?e.sub(i.blockNumber):j.watermark?e.sub(j.watermark):void 0)),[e,i,j]),C=(0,t.useCallback)((()=>je(p&&p[1].map((({validatorId:e})=>e)),p&&p[1].map((({indexValidator:e})=>e)))),[p]),k=(0,t.useCallback)((()=>je(y)),[y]);return(0,t.useEffect)((()=>{if(h)if(j.pendingAvail){const e=j.pendingAvail.availabilityVotes.toHuman().slice(2).replace(/_/g,"").split("").map(((e,s)=>"0"===e?h[s]:null)).filter(((e,s)=>!!e&&s<h.length));e.length!==h.length&&w(e)}else w([])}),[j,h]),(0,u.jsxs)(we,{className:`${s} ${a||i||j.watermark?"":"isDisabled"}`,children:[(0,u.jsx)(o.iA.Column.Id,{value:n}),(0,u.jsxs)("td",{className:"badge together",children:[null!=(x=j.paraInfo)&&null!=(g=x.locked)&&g.isFalse?(0,u.jsx)(o.Ct,{color:"orange",icon:"unlock"}):(0,u.jsx)(o.Ct,{color:"transparent"}),(0,u.jsx)(o.f,{id:n})]}),(0,u.jsxs)("td",{className:"number media--1400",children:[(0,u.jsx)(o.xH,{className:p?"":"--tmp",renderChildren:C,summary:b("Val. Group {{group}} ({{count}})",{replace:{count:(0,d.u)((null==p||null==(f=p[1])?void 0:f.length)||0),group:p?p[0]:0}})}),(0,u.jsx)(o.xH,{renderChildren:k,summary:b("Non-voters ({{count}})",{replace:{count:(0,d.u)(y.length)}})})]}),(0,u.jsx)("td",{className:"start together hash media--1500",children:(0,u.jsx)("div",{className:"shortHash",children:j.headHex})}),(0,u.jsx)("td",{className:"start",children:j.updateAt&&e&&null!=(v=j.lifecycle)&&v.isParachain?(0,u.jsxs)(u.Fragment,{children:[b("Upgrading"),(0,u.jsx)(_.Z,{value:j.updateAt.sub(e)}),"#",(0,d.u)(j.updateAt)]}):(0,u.jsx)(oe,{lifecycle:j.lifecycle,nextAction:m})}),(0,u.jsx)("td",{className:"all"}),(0,u.jsx)("td",{className:"number",children:N&&(0,u.jsx)(_.Z,{value:N})}),(0,u.jsx)("td",{className:"number no-pad-left",children:i?(0,u.jsx)("a",{href:`#/explorer/query/${i.blockHash}`,children:(0,d.u)(i.blockNumber)}):j.watermark&&(0,d.u)(j.watermark)}),(0,u.jsx)("td",{className:"number no-pad-left media--900",children:a&&(0,u.jsx)("a",{href:`#/explorer/query/${a.blockHash}`,children:(0,d.u)(a.blockNumber)})}),(0,u.jsx)("td",{className:"number no-pad-left media--1600",children:r&&(0,u.jsx)("a",{href:`#/explorer/query/${r.blockHash}`,children:(0,d.u)(r.blockNumber)})}),(0,u.jsx)("td",{className:"number no-pad-left",children:(0,u.jsx)(ue,{id:n})}),(0,u.jsx)("td",{className:"number media--1700",children:(0,d.u)(j.qHrmpI)}),(0,u.jsx)("td",{className:"number no-pad-left media--1700",children:(0,d.u)(j.qHrmpE)}),(0,u.jsx)("td",{className:"number together media--1100",children:(0,u.jsx)(ge,{leasePeriod:c,periods:j.leases})})]})}const we=ne.ZP.tr.withConfig({displayName:"Parachain__StyledTr",componentId:"sc-1x879fg-0"})(["&.isDisabled{td{opacity:0.5}}td.badge.together > div{display:inline-block;margin:0 0.25rem 0 0;vertical-align:middle;}"]),Ne=t.memo(ye);var Ce=n(11147);const ke={lastBacked:{},lastIncluded:{},lastTimeout:{}};function Se(e,s,n,t){try{const{descriptor:a}=s.data[0];a&&a.paraId&&(e[a.paraId.toString()]={blockHash:n,blockNumber:t,relayParent:a.relayParent.toHex()})}catch(e){throw new Error(`${s.section}.${s.method}(${(0,Ce.P)(s.data)}):: ${e.message}`)}}const Ie=(0,L.e)("useEvents",(function(){const{api:e}=(0,i.h)(),s=(0,r.W7)(e.derive.chain.subscribeNewBlocks),[n,a]=(0,t.useState)(ke);return(0,t.useEffect)((()=>{s&&a((n=>function(e,s,n){const t={},a={},o={},i=s.block.header.number.unwrap(),r=s.block.header.hash.toHex(),l=e.events.paraInclusion||e.events.parasInclusion||e.events.inclusion;let c=!1,d=!1,u=!1;return l&&s.events.forEach((({event:e,phase:s})=>{s.isApplyExtrinsic&&(l.CandidateBacked.is(e)?(Se(t,e,r,i),c=!0):l.CandidateIncluded.is(e)?(Se(a,e,r,i),d=!0):l.CandidateTimedOut.is(e)&&(Se(o,e,r,i),u=!0))})),c||d||u?{lastBacked:c?{...n.lastBacked,...t}:n.lastBacked,lastIncluded:d?{...n.lastIncluded,...a}:n.lastIncluded,lastTimeout:u?{...n.lastTimeout,...o}:n.lastTimeout}:n}(e,s,n)))}),[e,s]),n})),Ae={defaultValue:[null,null,null,null]},Pe=(0,L.e)("useValidators",(function(e){var s,n,a;const{api:o}=(0,i.h)(),[r,l,c,d]=(0,fe.L)([o.query.session.validators,null==(s=o.query.parasScheduler||o.query.paraScheduler||o.query.scheduler)?void 0:s.scheduled,null==(n=o.query.parasScheduler||o.query.paraScheduler||o.query.scheduler)?void 0:n.validatorGroups,null==(a=o.query.parasShared||o.query.paraShared||o.query.shared)?void 0:a.activeValidatorIndices],Ae),[u,m]=(0,t.useState)({});return(0,t.useEffect)((()=>{c&&e&&d&&l&&r&&m((s=>function(e,s,n,t,a,o){return s.reduce(((e,s)=>{const i=o.find((({paraId:e})=>e&&e.eq(s)));return i?{...e,[s.toString()]:[i.groupIdx,(t[i.groupIdx.toNumber()]||[]).map((e=>[e,a[e.toNumber()]])).filter((([,e])=>e)).map((([e,s])=>({indexActive:e,indexValidator:s,validatorId:n[s.toNumber()]})))]}:e}),{...e})}(s,e,r,c,d,l)))}),[c,e,d,l,r]),(0,t.useMemo)((()=>[r,u]),[u,r])}));function Me({actionsQueue:e,ids:s,leasePeriod:n,scheduled:a}){const{t:i}=(0,l.$)(),r=(0,f.C)(),{lastBacked:c,lastIncluded:d,lastTimeout:m}=Ie(),h=(0,q.gW)(s),[p,x]=Pe(s),g=(0,t.useRef)([[i("parachains"),"start",2],["","media--1400"],[i("head"),"start media--1500"],[i("lifecycle"),"start"],[],[i("included"),void 0,2],[i("backed"),"no-pad-left media--900"],[i("timeout"),"no-pad-left media--1600"],[i("chain"),"no-pad-left"],[i("in/out"),"media--1700",2],[i("leases"),"media--1100"]]),v=(0,t.useMemo)((()=>function(e=[]){return e.reduce(((e,{scheduledIds:s})=>s.reduce(((e,s)=>({...e,[s.toString()]:!0})),e)),{})}(a)),[a]),b=(0,t.useMemo)((()=>s&&function(e,s){return s.map((e=>[e,e.toString()])).sort((([s,n],[t,a])=>{const o=e[n]||!1;return o===(e[a]||!1)?s.cmp(t):o?-1:1}))}(h,s)),[s,h]),j=(0,t.useMemo)((()=>function(e,s=[]){return s.reduce(((s,[n,t])=>({...s,[t]:e.find((({paraIds:e})=>e.some((e=>e.eq(n)))))})),{})}(e,b)),[e,b]);return(0,u.jsx)(o.iA,{empty:b&&i("There are no registered parachains"),header:g.current,children:null==b?void 0:b.map((([e,s])=>(0,u.jsx)(Ne,{bestNumber:r,id:e,isScheduled:v[s],lastBacked:c[s],lastInclusion:d[s],lastTimeout:m[s],leasePeriod:n,nextAction:j[s],sessionValidators:p,validators:x[s]},s)))})}const De=t.memo(Me);var Te=n(78473),Ee=n(75034),qe=n(65968);const _e=function({leasePeriod:e,parachainCount:s,proposalCount:n,upcomingCount:t}){const{t:a}=(0,l.$)();return(0,u.jsxs)(o.Ty,{children:[(0,u.jsxs)("section",{children:[(0,u.jsx)(o.Jy,{label:a("parachains"),children:(0,qe.h)(s)?(0,d.u)(s):(0,u.jsx)("span",{className:"--tmp",children:"99"})}),(0,u.jsx)(o.Jy,{className:"media--1000",label:a("parathreads"),children:(0,qe.h)(t)?(0,d.u)(t):(0,u.jsx)("span",{className:"--tmp",children:"99"})}),(0,qe.h)(n)&&(0,u.jsx)(o.Jy,{className:"media--1000",label:a("proposals"),children:(0,d.u)(n)})]}),(0,u.jsxs)("section",{children:[(0,u.jsx)(o.Jy,{label:a("current lease"),children:e?(0,d.u)(e.currentPeriod):(0,u.jsx)("span",{className:"--tmp",children:"99"})}),(0,u.jsx)(o.Jy,{className:"media--1200",label:a("lease period"),progress:{isBlurred:!e,total:e?e.length:b.Jo,value:e?e.progress:b.um,withTime:!0}})]}),(0,u.jsxs)("section",{children:[(0,u.jsx)(o.Jy,{label:a("finalized"),children:(0,u.jsx)(Ee.Z,{})}),(0,u.jsx)(Te.Z,{className:"media--1200",withEra:!1})]})]})};function $e({actionsQueue:e,className:s,leasePeriod:n,paraIds:t,proposals:a,threadIds:o}){return(0,u.jsxs)("div",{className:s,children:[(0,u.jsx)(_e,{leasePeriod:n,parachainCount:null==t?void 0:t.length,proposalCount:null==a?void 0:a.proposalIds.length,upcomingCount:null==o?void 0:o.length}),(0,u.jsx)(De,{actionsQueue:e,ids:t,leasePeriod:n,scheduled:null==a?void 0:a.scheduled})]})}const Fe=t.memo($e);var Oe=n(48801),Ve=n.n(Oe);const Re=new(Ve())(2e3),Ze=Re.sub(b.If);function Be({className:e,nextParaId:s,onClose:n}){const{t:a}=(0,l.$)(),{api:r}=(0,i.h)(),[c,d]=(0,t.useState)(null);return(0,u.jsxs)(o.u_,{className:e,header:a("Reserve ParaId"),onClose:n,size:"large",children:[(0,u.jsxs)(o.u_.Content,{children:[(0,u.jsx)(o.u_.Columns,{hint:a("This account will be used to the Id reservation and for the future parathread."),children:(0,u.jsx)(o.rp,{label:a("reserve from"),onChange:d,type:"account",value:c})}),(0,u.jsx)(o.u_.Columns,{hint:a("The Id of this parachain as known on the network (selected from nextFreeId)"),children:(0,u.jsx)(o.Rn,{defaultValue:s,isDisabled:!0,label:a("parachain id")})}),(0,u.jsx)(o.u_.Columns,{hint:a("The reservation fee for this Id"),children:(0,u.jsx)(o.H,{defaultValue:r.consts.registrar.paraDeposit,isDisabled:!0,label:a("reserved deposit")})})]}),(0,u.jsx)(o.u_.Actions,{children:(0,u.jsx)(o.cA,{accountId:c,icon:"plus",isDisabled:!s,onStart:n,params:[],tx:r.tx.registrar.reserve})})]})}const Le=t.memo(Be);var He=n(88311);function We({className:e,nextParaId:s,onClose:n,ownedIds:a}){const{t:r}=(0,l.$)(),{api:c}=(0,i.h)(),[d,m]=(0,t.useState)(null),[h,p]=(0,t.useState)(),[x,g]=(0,t.useState)(null),[f,v]=(0,t.useState)(null),b=(0,t.useCallback)((e=>v((0,He.N)(e))),[]),j=(0,t.useCallback)((e=>g((0,He.N)(e))),[]),w=(0,t.useCallback)((({accountId:e,paraId:s})=>{m(e),p(new(Ve())(s))}),[]),N=(0,t.useMemo)((()=>c.consts.registrar.paraDeposit.add(c.consts.registrar.dataDepositPerByte.muln(x?x.length:0)).iadd(c.consts.registrar.dataDepositPerByte.muln(f?f.length:0))),[c,x,f]),C=!h||!h.gt(Ze);return(0,u.jsxs)(o.u_,{className:e,header:r("Register parathread"),onClose:n,size:"large",children:[(0,u.jsxs)(o.u_.Content,{children:[c.tx.registrar.reserve?(0,u.jsx)(y,{noCodeCheck:!0,onChange:w,ownedIds:a}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.u_.Columns,{hint:r("This account will be associated with the parachain and pay the deposit."),children:(0,u.jsx)(o.rp,{label:r("register from"),onChange:m,type:"account",value:d})}),(0,u.jsx)(o.u_.Columns,{hint:r("The id of this parachain as known on the network"),children:(0,u.jsx)(o.Rn,{autoFocus:!0,defaultValue:s,isError:C,isZeroable:!1,label:r("parachain id"),onChange:p})})]}),(0,u.jsx)(o.u_.Columns,{hint:r("The WASM validation function for this parachain."),children:(0,u.jsx)(o.ht,{isError:!x,label:r("code"),onChange:j})}),(0,u.jsx)(o.u_.Columns,{hint:r("The genesis state for this parachain."),children:(0,u.jsx)(o.ht,{isError:!f,label:r("initial state"),onChange:b})}),(0,u.jsx)(o.u_.Columns,{hint:r("The reservation fee for this parachain, including base fee and per-byte fees"),children:(0,u.jsx)(o.H,{defaultValue:N,isDisabled:!0,label:r("reserved deposit")})})]}),(0,u.jsx)(o.u_.Actions,{children:(0,u.jsx)(o.cA,{accountId:d,icon:"plus",isDisabled:!x||!f||C,onStart:n,params:[h,f,x],tx:c.tx.registrar.register})})]})}const ze=t.memo(We),Ue={transform:e=>e.isZero()?Re:e};function Je({className:e,ownedIds:s}){const{t:n}=(0,l.$)(),{api:t}=(0,i.h)(),[a,c]=(0,v.O)(),[d,m]=(0,v.O)(),h=(0,r.W7)(t.query.registrar.nextFreeParaId,[],Ue);return(0,u.jsxs)(o.zx.Group,{className:e,children:[(0,u.jsx)(o.zx,{icon:"plus",isDisabled:!t.tx.registrar.reserve,label:n("ParaId"),onClick:m}),d&&(0,u.jsx)(Le,{nextParaId:h,onClose:m}),(0,u.jsx)(o.zx,{icon:"plus",isDisabled:!!t.tx.registrar.reserve&&!s.length,label:n("ParaThread"),onClick:c}),a&&(0,u.jsx)(ze,{nextParaId:h,onClose:c,ownedIds:s})]})}const Ge=t.memo(Je),Qe={defaultValue:{headHex:null,lifecycle:null,manager:null},transform:([e,s,n,t])=>({headHex:e.isSome?e.unwrap().toHex():s.isSome?s.unwrap().genesisHead.toHex():null,lifecycle:n.unwrapOr(null),manager:t.isSome?t.unwrap().manager:null})},Xe=(0,L.e)("useThreadInfo",(function(e){const{api:s}=(0,i.h)();return(0,fe.L)([[s.query.paras.heads,e],[s.query.paras.upcomingParasGenesis,e],[s.query.paras.paraLifecycles,e],[s.query.registrar.paras,e]],Qe)}));function Ke({id:e,leasePeriod:s,leases:n,nextAction:a}){const{t:r}=(0,l.$)(),{api:c}=(0,i.h)(),{isAccount:d}=(0,g.x)(),{headHex:m,lifecycle:h,manager:p}=Xe(e),x=(0,t.useMemo)((()=>(null==s?void 0:s.currentPeriod)&&n&&n.map((({period:e})=>e))),[null==s?void 0:s.currentPeriod,n]),f=d(null==p?void 0:p.toString());return(0,u.jsxs)("tr",{children:[(0,u.jsx)(o.iA.Column.Id,{value:e}),(0,u.jsx)("td",{className:"badge",children:(0,u.jsx)(o.f,{id:e})}),(0,u.jsx)("td",{className:"address media--2000",children:p&&(0,u.jsx)(o.N,{value:p})}),(0,u.jsx)("td",{className:"start together hash media--1500",children:(0,u.jsx)("div",{className:"shortHash",children:m})}),(0,u.jsx)("td",{className:"start",children:(0,u.jsx)(oe,{lifecycle:h,nextAction:a})}),(0,u.jsx)("td",{className:"all"}),(0,u.jsx)("td",{className:"number no-pad-left"}),(0,u.jsx)("td",{className:"number together",children:s&&n&&x&&(n.length?(0,u.jsx)(ge,{fromFirst:!0,leasePeriod:s,periods:x}):r("None"))}),(0,u.jsx)("td",{className:"button media--900",children:(0,u.jsx)(o.cA,{accountId:p,icon:"times",isDisabled:!f,label:r("Deregister"),params:[e],tx:c.tx.registrar.deregister})})]})}const Ye=t.memo(Ke),es=(0,L.e)("useParaMap",(function(e){const{api:s}=(0,i.h)(),n=(0,q.gW)(e),a=(0,t.useCallback)((([[e],s])=>function(e,s,n){return s.reduce(((e,s,t)=>(e.push([s,n[t].map(((e,s)=>{if(e.isNone)return null;const[n,t]=e.unwrap();return{accountId:n,balance:t,period:s}})).filter((e=>!!e))]),e)),[]).sort((([s,n],[t,a])=>{const o=e[s.toString()]||!1,i=e[t.toString()]||!1;return n.length&&a.length?n[0].period-a[0].period||s.cmp(t):n.length?-1:a.length?1:o===i?s.cmp(t):o?-1:1}))}(n,e,s)),[n]);return(0,r.W7)(e&&s.query.slots.leases.multi,[e],{transform:a,withParamsTransform:!0})}));function ss({actionsQueue:e,className:s,ids:n,leasePeriod:a,ownedIds:i}){const{t:r}=(0,l.$)(),c=es(n),d=(0,t.useRef)([[r("parathreads"),"start",2],["","media--2000"],[r("head"),"start media--1500"],[r("lifecycle"),"start"],[],[],[r("leases")],["","media--900"]]);return(0,u.jsxs)("div",{className:s,children:[(0,u.jsx)(Ge,{ownedIds:i}),(0,u.jsx)(o.iA,{empty:a&&n&&(0===n.length||c)&&r("There are no available parathreads"),header:d.current,children:a&&(null==c?void 0:c.map((([s,n])=>(0,u.jsx)(Ye,{id:s,leasePeriod:a,leases:n,nextAction:e.find((({paraIds:e})=>e.some((e=>e.eq(s)))))},s.toString()))))})]})}const ns=t.memo(ss);function ts({address:e,index:s,setAddress:n,t:a}){const i=(0,t.useCallback)((e=>e&&n(s,e)),[s,n]);return(0,u.jsx)(o.rp,{defaultValue:e,label:a("validator {{index}}",{replace:{index:s+1}}),onChange:i})}function as({className:e,onClose:s}){var n;const{t:a}=(0,l.$)(),{api:r}=(0,i.h)(),[c,d]=(0,t.useState)(null),[m,h]=(0,t.useState)(""),[p,x]=(0,t.useState)(),[g,f]=(0,t.useState)((()=>b.D_.mul(b.aP.pow(new(Ve())(r.registry.chainDecimals[0]))))),[v,j]=(0,t.useState)([""]),[{isWasmValid:y,wasm:w},N]=(0,t.useState)({isWasmValid:!1,wasm:null}),[C,k]=(0,t.useState)(null),S=(0,t.useCallback)((e=>k((0,He.N)(e))),[]),I=(0,t.useCallback)(((e,s)=>N({isWasmValid:s,wasm:e})),[]),A=(0,t.useCallback)(((e,s)=>j((n=>n.map(((n,t)=>t===e?s:n))))),[]),P=(0,t.useCallback)((()=>j((e=>[...e,""]))),[]),M=(0,t.useCallback)((()=>j((e=>[...e.slice(0,e.length-1)]))),[]),D=m.length>=3,T=v.some(((e,s)=>v.some(((n,t)=>s!==t&&e===n))));return(0,u.jsxs)(o.u_,{className:e,header:a("Propose parachain"),onClose:s,size:"large",children:[(0,u.jsxs)(o.u_.Content,{children:[(0,u.jsx)(o.u_.Columns,{hint:a("This account will be associated with the parachain and pay the deposit."),children:(0,u.jsx)(o.rp,{label:a("propose from"),onChange:d,type:"account",value:c})}),(0,u.jsxs)(o.u_.Columns,{hint:a("The name for this parachain, the id and the allocated/requested balance."),children:[(0,u.jsx)(o.II,{autoFocus:!0,isError:!D,label:a("parachain name"),onChange:h}),(0,u.jsx)(o.Rn,{isZeroable:!1,label:a("requested id"),onChange:x}),(0,u.jsx)(o.H,{defaultValue:g,label:a("initial balance"),onChange:f})]}),(0,u.jsxs)(o.u_.Columns,{hint:a("The WASM validation function as well as the genesis state for this parachain."),children:[(0,u.jsx)(o.RF,{isError:!y,label:a("validation code"),onChange:I,placeholder:w&&!y&&a("The code is not recognized as being in valid WASM format")}),(0,u.jsx)(o.ht,{isError:!C,label:a("genesis state"),onChange:S})]}),(0,u.jsxs)(o.u_.Columns,{hint:a("The validators for this parachain. At least one is required and where multiple is supplied, they need to be unique."),children:[v.map(((e,s)=>(0,u.jsx)(ts,{address:e,index:s,setAddress:A,t:a},s))),!v.length&&(0,u.jsx)(o.Pd,{content:a("You need to supply at last one running validator for your parachain alongside this request.")}),T&&(0,u.jsx)(o.Pd,{content:a("You have duplicated validator entries, ensure each is unique.")}),(0,u.jsxs)(o.zx.Group,{children:[(0,u.jsx)(o.zx,{icon:"plus",label:a("Add validator"),onClick:P}),(0,u.jsx)(o.zx,{icon:"minus",isDisabled:0===v.length,label:a("Remove validator"),onClick:M})]})]})]}),(0,u.jsx)(o.u_.Actions,{children:(0,u.jsx)(o.cA,{accountId:c,icon:"plus",isDisabled:!(y&&C&&D&&v.length&&null!=p&&p.gt(b.nw)),onStart:s,params:[p,m,w,C,v,g],tx:null==(n=r.tx.proposeParachain)?void 0:n.proposeParachain})})]})}const os=t.memo(as);function is(){const{t:e}=(0,l.$)(),{hasAccounts:s}=(0,g.x)(),[n,t]=(0,v.O)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.zx.Group,{children:(0,u.jsx)(o.zx,{icon:"plus",isDisabled:!s,label:e("Propose"),onClick:t})}),n&&(0,u.jsx)(os,{onClose:t})]})}const rs=t.memo(is);var ls=n(67993);const cs=(0,L.e)("useProposal",(function(e,s,n){const{api:a}=(0,i.h)(),o=(0,r.W7)(a.query.proposeParachain.proposals,[e]);return(0,t.useMemo)((()=>({id:e,isApproved:s.some((s=>s.eq(e))),isScheduled:n.some((({scheduledIds:s})=>s.some((s=>s.eq(e))))),proposal:o&&o.isSome?o.unwrap():void 0})),[s,e,o,n])}));function ds({approvedIds:e,id:s,scheduled:n}){var a,r,c,m;const{t:h}=(0,l.$)(),{api:p}=(0,i.h)(),{allAccounts:x}=(0,g.x)(),{hasSudoKey:f,sudoKey:v}=(0,ls.p)(),b=cs(s,e,n),j=(0,t.useMemo)((()=>p.tx.sudo&&f?p.tx.sudo.sudo(p.tx.proposeParachain.cancelProposal(s)):x.some((e=>{var s;return null==(s=b.proposal)?void 0:s.proposer.eq(e)}))?p.tx.proposeParachain.cancelProposal(s):null),[p,x,f,s,b]),y=(0,t.useMemo)((()=>p.tx.sudo&&p.tx.sudo.sudo(p.tx.proposeParachain.approveProposal(s))),[p,s]),w=(0,t.useMemo)((()=>(null==b?void 0:b.proposal)&&function(e,s=6){const n=e.toHex();return n.length>2*s+2?`${n.slice(0,s+2)}…${n.slice(-s)}`:"0x"===n?"":n}(b.proposal.genesisHead)),[b]),N=(0,t.useCallback)((()=>{var e;return null==(e=b.proposal)?void 0:e.validators.map((e=>(0,u.jsx)(o.ax,{value:e},e.toString())))}),[b.proposal]);return(0,u.jsxs)("tr",{children:[(0,u.jsx)(o.iA.Column.Id,{value:s}),(0,u.jsx)("td",{className:"badge together",children:(b.isApproved||b.isScheduled)&&(0,u.jsx)(o.Ct,{color:"green",icon:b.isScheduled?"clock":"check"})}),(0,u.jsx)("td",{className:"badge",children:(0,u.jsx)(o.f,{id:s})}),(0,u.jsx)("td",{className:"start together",children:null==(a=b.proposal)?void 0:a.name.toUtf8()}),(0,u.jsx)("td",{className:"address",children:(null==(r=b.proposal)?void 0:r.validators)&&(0,u.jsx)(o.xH,{renderChildren:N,summary:h("Validators ({{count}})",{replace:{count:(0,d.u)(null==(c=b.proposal)?void 0:c.validators.length)}})})}),(0,u.jsx)("td",{className:"address",children:b.proposal&&(0,u.jsx)(o.N,{value:b.proposal.proposer})}),(0,u.jsx)("td",{className:"number media--1100",children:b.proposal&&(0,u.jsx)(k.Z,{value:b.proposal.balance})}),(0,u.jsx)("td",{className:"start hash together all",children:w}),(0,u.jsx)("td",{className:"button",children:!(b.isApproved||b.isScheduled)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.cA,{accountId:v,className:"media--800",extrinsic:y,icon:"check",isDisabled:!f,label:h("Approve")}),(0,u.jsx)(o.cA,{accountId:f?v:null==(m=b.proposal)?void 0:m.proposer,className:"media--1100",extrinsic:j,icon:"ban",isDisabled:!f||!b.proposal,label:h("Cancel")})]})})]})}const us=t.memo(ds);function ms({proposals:e}){const{t:s}=(0,l.$)(),n=(0,t.useMemo)((()=>e&&e.proposalIds.sort(((e,s)=>e.cmp(s)))),[e]),a=(0,t.useRef)([[s("proposals"),"start",3],[],[],[s("proposer"),"address"],[s("balance"),"media--1100"],[s("initial state"),"start media--1400"],[]]);return(0,u.jsx)(o.iA,{empty:e&&n&&s("There are no pending proposals"),header:a.current,children:e&&(null==n?void 0:n.map((s=>(0,u.jsx)(us,{approvedIds:e.approvedIds,id:s,scheduled:e.scheduled},s.toString()))))})}const hs=t.memo(ms);function ps({className:e,proposals:s}){return(0,u.jsxs)("div",{className:e,children:[(0,u.jsx)(rs,{}),(0,u.jsx)(hs,{proposals:s})]})}const xs=t.memo(ps),gs=[b.If,b.um,b.Jo,b.bX,b.nr,b.Ln,b.wJ,b.ru,b.xZ,b.aP],fs={withParams:!0},vs=(0,L.e)("useActionsQueue",(function(){const{api:e}=(0,i.h)(),s=(0,r.W7)(e.query.session.currentIndex),n=(0,t.useMemo)((()=>s&&gs.map((e=>s.add(e)))),[s]),a=(0,r.W7)(n&&e.query.paras.actionsQueue.multi,[n],fs);return(0,t.useMemo)((()=>a?a[0][0].map(((e,s)=>({paraIds:a[1][s],sessionIndex:e}))).filter((({paraIds:e})=>e.length)):[]),[a])})),bs={transform:([e,s])=>{const[n,t]=s.unwrapOr([null,null]);return{endBlock:t,leasePeriod:n,numAuctions:e}}},js=(0,L.e)("useAuctionInfo",(function(){var e,s;const{api:n}=(0,i.h)();return(0,fe.L)([null==(e=n.query.auctions)?void 0:e.auctionCounter,null==(s=n.query.auctions)?void 0:s.auctionInfo],bs)}));var ys=n(96464),ws=n(67847),Ns=n(57513),Cs=n(51330),ks=n(65417);const Ss=(0,n(64021).d)("modlpy/cfund"),Is={activeCap:b.nw,activeRaised:b.nw,funds:null,isLoading:!0,totalCap:b.nw,totalRaised:b.nw},As=new Uint8Array(32);function Ps(e,s){return s.some((s=>s.eq(e)))}function Ms(e,s){return e.isWinner!==s.isWinner?e.isWinner?-1:1:e.isCapped!==s.isCapped?e.isCapped?-1:1:e.isEnded!==s.isEnded?e.isEnded?1:-1:0}const Ds={transform:([[e],s])=>e.map(((e,n)=>[e,s[n].unwrapOr(null)])).filter((e=>!!e[1])).map((([e,s])=>{return{accountId:(0,H.m)((n=e,(0,Cs.e)(Ss,n.toU8a(),As).subarray(0,32))),firstSlot:s.firstPeriod,info:s,isCrowdloan:!0,key:e.toString(),lastSlot:s.lastPeriod,paraId:e,value:s.raised};var n})).sort(((e,s)=>e.info.end.cmp(s.info.end)||e.info.firstPeriod.cmp(s.info.firstPeriod)||e.info.lastPeriod.cmp(s.info.lastPeriod)||e.paraId.cmp(s.paraId))),withParamsTransform:!0},Ts={transform:([[e],s])=>e.filter(((e,n)=>0!==s[n].map((e=>e.unwrapOr(null))).filter((e=>!!e)).filter((([e])=>function(e){return(0,ks.S)(e.slice(0,Ss.length),Ss)}(e))).length)),withParamsTransform:!0},Es={transform:e=>e.map((({args:[e]})=>e))},qs=(0,L.e)("useFunds",(function(){var e,s,n;const{api:a}=(0,i.h)(),o=(0,f.C)(),l=(0,ys.X)(),c=(0,ws.b)([null==(e=a.events.crowdloan)?void 0:e.Created]),d=(0,Ns.k)(null==(s=a.query.crowdloan)?void 0:s.funds,[],Es,c.blockHash),u=(0,r.W7)(null==(n=a.query.crowdloan)?void 0:n.funds.multi,[d],Ds),m=(0,r.W7)(a.query.slots.leases.multi,[d],Ts),[h,p]=(0,t.useState)(Is);return(0,t.useEffect)((()=>{l.current&&o&&u&&m&&p((e=>function(e,s,n,t,a){const[o,i,r,l]=n.reduce((([s,n,t,a],{info:{cap:o,end:i,raised:r},isWinner:l})=>[e.gt(i)||l?s:s.iadd(r),e.gt(i)||l?n:n.iadd(o),t.iadd(r),a.iadd(o)]),[new(Ve())(0),new(Ve())(0),new(Ve())(0),new(Ve())(0)]),c=!a.activeCap.eq(i),d=!a.activeRaised.eq(o),u=!a.totalCap.eq(l),m=!a.totalRaised.eq(r),h=!a.funds||a.funds.length!==n.length||c||d||u||m||n.some((n=>function(e,s,{info:{cap:n,end:t,raised:a},paraId:o},i,r){var l;const c=null==(l=r.funds)?void 0:l.find((e=>e.paraId.eq(o)));return!c||!c.isEnded&&e.gt(t)||!c.isCapped&&n.sub(a).lt(s)||!c.isWinner&&Ps(o,i)}(e,s,n,t,a)));return h?{activeCap:c?i:a.activeCap,activeRaised:d?o:a.activeRaised,funds:n.map((n=>function(e,s,n,t){return n.isCapped=n.info.cap.sub(n.info.raised).lt(s),n.isEnded=e.gt(n.info.end),n.isWinner=Ps(n.paraId,t),n}(e,s,n,t))).sort(Ms),totalCap:u?l:a.totalCap,totalRaised:m?r:a.totalRaised}:a}(o,a.consts.crowdloan.minContribution,u,m,e)))}),[a,o,u,m,l]),h})),_s=(0,L.e)("useLeasePeriod",(function(){const{api:e}=(0,i.h)(),s=(0,f.C)();return(0,t.useMemo)((()=>{if(!e.consts.slots.leasePeriod||!s)return;const n=e.consts.slots.leasePeriod,t=s.sub(e.consts.slots.leaseOffset||b.nw),a=t.mod(n);return{currentPeriod:t.div(n),length:n,progress:a,remainder:n.sub(a)}}),[e,s])}));var $s=n(30581);const Fs={transform:e=>{const s=e.map((([{args:[e]},s])=>{if(s.isNone)return null;const n=s.unwrap();return{manager:n.manager.toString(),paraId:e,paraInfo:n}})).filter((e=>!!e));return{ids:s.map((({paraId:e})=>e)),owned:s}}},Os={transform:([[e],s])=>e.map(((e,n)=>({hash:s[n].unwrapOr(null),paraId:e}))),withParamsTransform:!0},Vs=(0,L.e)("useOwnedIds",(function(){const{api:e}=(0,i.h)(),{allAccounts:s}=(0,g.x)(),n=(0,ws.b)([e.events.registrar.Registered,e.events.registrar.Reserved]),a=(0,$s.t)(e.query.registrar.paras,[],Fs,n.blockHash),o=(0,r.W7)(e.query.paras.currentCodeHash.multi,[a?a.ids:[]],Os);return(0,t.useMemo)((()=>a&&o?a.owned.filter((e=>s.some((s=>s===e.manager)))).map((e=>({...e,hasCode:o.some((s=>!!s.hash&&s.paraId.eq(e.paraId)))}))):[]),[s,o,a])})),Rs={defaultValue:[void 0,void 0]},Zs={transform:e=>e.map((({args:[e]})=>e))},Bs={transform:e=>e.map((([{args:[e]},s])=>({scheduledIds:s,sessionIndex:e})))},Ls=(0,L.e)("useProposals",(function(){var e,s,n,a;const{api:o}=(0,i.h)(),r=(0,ys.X)(),l=(0,ws.b)([null==(e=o.events.proposeParachain)?void 0:e.ProposeParachain]),c=(0,Ns.k)(null==(s=o.query.proposeParachain)?void 0:s.proposals,[],Zs,l.blockHash),d=(0,$s.t)(null==(n=o.query.proposeParachain)?void 0:n.scheduledProposals,[],Bs,l.blockHash),[u,m]=(0,fe.L)([o.query.session.currentIndex,null==(a=o.query.proposeParachain)?void 0:a.approvedProposals],Rs);return(0,t.useMemo)((()=>m&&u&&c&&d&&r.current?{approvedIds:m,proposalIds:c,scheduled:d.filter((e=>e.sessionIndex.gt(u)))}:void 0),[m,r,c,u,d])})),Hs={transform:e=>e.map((([{args:[e]},s])=>{const n=s.unwrapOr(null);return n&&(n.isParathread||n.isUpgradingParathread||n.isOffboardingParathread||n.isOnboarding)?e:null})).filter((e=>!!e)).sort(((e,s)=>e.cmp(s)))},Ws=(0,L.e)("useUpomingIds",(function(){const{api:e}=(0,i.h)(),s=(0,ws.b)([e.events.session.NewSession,e.events.registrar.Registered]);return(0,$s.t)(e.query.paras.paraLifecycles,[],Hs,s.blockHash)})),zs=[0];function Us(e,s){return JSON.stringify({w:e})!==JSON.stringify({w:s})}function Js(e,s,n){return n.isNone?[]:n.unwrap().reduce(((n,t,a)=>{if(t.isSome){const[o,i,r]=t.unwrap(),l=s.leasePeriod||b.nw,[c,d]=e[a];n.push({accountId:o.toString(),firstSlot:l.addn(c),isCrowdloan:(0,ks.S)(Ss,o.subarray(0,Ss.length)),key:i.toString(),lastSlot:l.addn(d),paraId:i,value:r})}return n}),[])}function Gs({endBlock:e},s,n){return{blockNumber:e&&s?s.add(e):s||b.nw,blockOffset:s||b.nw,total:n.reduce(((e,{value:s})=>e.iadd(s)),new(Ve())(0)),winners:n}}const Qs=(0,L.e)("useWinningData",(function(e){var s,n,a;const{api:o}=(0,i.h)(),l=(0,ys.X)(),d=(0,c.E)(),[u,m]=(0,t.useState)(),h=(0,f.C)(),p=(0,ws.b)([null==(s=o.events.auctions)?void 0:s.BidAccepted]),x=(0,t.useRef)(p),g=(0,r.W7)(null==(n=o.query.auctions)?void 0:n.winning.entries),v=(0,r.W7)(null==(a=o.query.auctions)?void 0:a.winning,zs);return(0,t.useEffect)((()=>{l.current&&e&&g&&m(function(e,s,n){return n.sort((([{args:[e]}],[{args:[s]}])=>e.cmp(s))).reduce(((n,[{args:[t]},a])=>{const o=Js(e,s,a);return o.length&&(0===n.length||Us(o,n[n.length-1].winners))&&n.push(Gs(s,t,o)),n}),[]).reverse()}(d,e,g))}),[e,g,l,d]),(0,t.useEffect)((()=>{l.current&&e&&v&&m((s=>function(e,s,n,t){if(n&&n.length<=1){const a=n||[],o=Gs(s,null,Js(e,s,t));return o.winners.length?a.length?(a[a.length-1]=o,a.slice()):[o]:a}return n}(d,e,s,v)))}),[e,v,l,d]),(0,t.useEffect)((()=>{if(null!=e&&e.endBlock&&h&&h.gt(e.endBlock)&&x.current!==p){var s;const n=h.sub(e.endBlock).iadd(b.If);x.current=p,null==(s=o.query.auctions)||s.winning(n).then((s=>l.current&&m((t=>function(e,s,n,t,a){const o=Gs(s,a,Js(e,s,t));if(o.winners.length){if(!n||!n.length)return[o];if(Us(o.winners,n[0].winners))return i=o.winners,r=n[0].winners,i.length!==r.length||i.some((({firstSlot:e,lastSlot:s,paraId:n},t)=>!n.eq(r[t].paraId)||!e.eq(r[t].firstSlot)||!s.eq(r[t].lastSlot)))?[o,...n]:(n[0]=o,[...n])}var i,r;return n}(d,e,t,s,n))))).catch(console.error)}}),[o,h,e,l,d,p,x]),u}));function Xs({basePath:e,className:s}){const{t:n}=(0,l.$)(),{api:c}=(0,i.h)(),{pathname:d}=(0,a.TH)(),m=js(),h=qs(),p=_s(),x=Vs(),g=Qs(m),f=Ls(),v=vs(),b=Ws(),j=(0,r.W7)(c.query.paras.parachains),y=(0,t.useRef)([{isRoot:!0,name:"overview",text:n("Overview")},{name:"parathreads",text:n("Parathreads")},c.query.proposeParachain&&{name:"proposals",text:n("Proposals")},c.query.auctions&&{name:"auctions",text:n("Auctions")},c.query.crowdloan&&{name:"crowdloan",text:n("Crowdloan")}].filter((e=>!!e)));return(0,u.jsxs)("main",{className:s,children:[(0,u.jsx)(o.mQ,{basePath:e,items:y.current}),(0,u.jsxs)(a.rs,{children:[(0,u.jsx)(a.AW,{path:`${e}/auctions`,children:(0,u.jsx)(P,{auctionInfo:m,campaigns:h,ownedIds:x,winningData:g})}),(0,u.jsx)(a.AW,{path:`${e}/crowdloan`,children:(0,u.jsx)(se,{auctionInfo:m,campaigns:h,leasePeriod:p,ownedIds:x})}),(0,u.jsx)(a.AW,{path:`${e}/proposals`,children:(0,u.jsx)(xs,{proposals:f})})]}),(0,u.jsx)(Fe,{actionsQueue:v,className:d===e?"":"--hidden",leasePeriod:p,paraIds:j,proposals:f,threadIds:b}),(0,u.jsx)(ns,{actionsQueue:v,className:d===`${e}/parathreads`?"":"--hidden",ids:b,leasePeriod:p,ownedIds:x})]})}const Ks=t.memo(Xs)},66922:(e,s,n)=>{n.d(s,{$:()=>a});var t=n(61349);function a(){return(0,t.$G)("app-parachains")}},83:(e,s,n)=>{n.d(s,{E:()=>c,f:()=>d});var t=n(2784),a=n(92529),o=n(89448),i=n(48801),r=n.n(i);const l=[[0,0],[0,1],[0,2],[0,3],[1,1],[1,2],[1,3],[2,2],[2,3],[3,3]],c=(0,o.e)("useLeaseRanges",(function(){const{api:e}=(0,a.h)();return(0,t.useMemo)((()=>{var s;if(null==(s=e.consts.auctions)?void 0:s.leasePeriodsPerSlot){const s=[];for(let n=0;e.consts.auctions.leasePeriodsPerSlot.gtn(n);n++)for(let t=n;e.consts.auctions.leasePeriodsPerSlot.gtn(t);t++)s.push([n,t]);return s}return l}),[e])})),d=(0,o.e)("useLeaseRangeMax",(function(){const e=c();return(0,t.useMemo)((()=>new(r())(e[e.length-1][1])),[e])}))},57957:(e,s,n)=>{n.d(s,{Z:()=>w});var t=n(2784),a=n(61349),o=n(82740),i=n(61397),r=n(92529),l=n(65182),c=n(54984),d=n(67738),u=n(76277),m=n(52107),h=n(95292),p=n(48801),x=n.n(p),g=n(92730),f=n(14681),v=n(52322);const b={defaultValue:[void 0,void 0]};function j({basePath:e,className:s}){var n;const{t:o}=(0,a.$G)("app-poll"),{api:p}=(0,r.h)(),j=(0,l.C)(),[w,N]=(0,c.L)([null==(n=p.query.balances)?void 0:n.totalIssuance,p.query.poll.totals],b),[C,k]=(0,t.useState)(null),[S,I]=(0,t.useState)(null),[A,P]=(0,t.useState)(!1),[M,D]=(0,t.useState)(!1),[T,E]=(0,t.useState)(!1),[q,_]=(0,t.useState)(!1),[$,F]=(0,t.useState)(),O=(0,t.useRef)([{isRoot:!0,name:"poll",text:o("Denomination poll")}]);if((0,t.useEffect)((()=>{if(w&&N){const e=(0,m.x)(h.If,...N);F(N.map((s=>s.mul(h.uy).div(e)))),p.query.poll.voteOf.entries().then((e=>{const s=e.reduce(((e,[,[,s]])=>e.iadd(s)),new(x())(0)),n=s.muln(1e4).div(w).toNumber()/100;I({percentage:n,voted:s})})).catch(console.log)}}),[p,w,N]),!N||!$||!j)return(0,v.jsx)("main",{className:s,children:(0,v.jsx)("div",{className:"pollContainer",children:(0,v.jsx)(i.$j,{label:o("Retrieving totals...")})})});const V=p.consts.poll.end.sub(j),R=V.gt(h.nw),Z=[[o("No change"),o("No change from the original 2017 sale definitions; will mean a total of 10 million DOT from genesis."),A,P],[o("Split of 10x"),o("Split of 10x from the original sale; will mean a total of 100 million DOT from genesis. Apparent DOT price would be 10x lower and apparent account balances 10x higher."),M,D],[o("Split of 100x"),o("Split of 100x from the original sale; will mean a total of 1 billion DOT from genesis. Apparent DOT price would be 100x lower and apparent account balances 100x higher."),T,E],[o("Split of 1000x"),o("Split of 1000x from the original sale; will mean a total of 10 billion DOT from genesis. Apparent DOT price would be 1000x lower and apparent account balances 1000x higher."),q,_]],B=A||M||T||q;return(0,v.jsxs)(y,{className:s,children:[(0,v.jsx)(i.mQ,{basePath:e,items:O.current}),(0,v.jsxs)("div",{className:"pollContainer",children:[(0,v.jsxs)("div",{className:"pollHeader",children:[(0,v.jsx)("h1",{children:o("denomination vote")}),(0,v.jsxs)("div",{className:"pollBlocksRight",children:[S&&(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:o("{{balance}} voted",{replace:{balance:(0,g.a)(S.voted)}})}),(0,v.jsx)("div",{children:o("{{percentage}}% turnout",{replace:{percentage:S.percentage.toFixed(2)}})})]}),(0,v.jsxs)("div",{children:[R?(0,v.jsx)(d.Z,{value:V}):o("Completed"),(0,v.jsxs)("div",{children:["#",(0,f.u)(p.consts.poll.end)]})]})]})]}),(0,v.jsxs)("article",{className:"keepAlive",children:[(0,v.jsx)("p",{children:(0,v.jsx)(a.cC,{children:"The Polkadot DOT denomination vote: Seventy-two hours after the DOT token becomes transferable, the most popular option from this poll will decide the denomination used for the DOT token."},"poll1")}),(0,v.jsx)("p",{children:(0,v.jsxs)(a.cC,{children:["This is an ",(0,v.jsx)("a",{href:"https://en.wikipedia.org/wiki/Approval_voting",rel:"noreferrer",target:"_blank",children:"approval vote"}),". There are four options and you may select any combination of them. The most popular of the four will be selected as the final DOT denomination three days after DOT token transfers are enabled."]},"poll2")}),(0,v.jsx)("p",{children:(0,v.jsxs)(a.cC,{children:["Please see the ",(0,v.jsx)("a",{href:"https://medium.com/polkadot-network/the-first-polkadot-vote-1fc1b8bd357b",rel:"noreferrer",target:"_blank",children:"Medium article "})," for more information"]},"poll3")}),R&&(0,v.jsx)("p",{className:"pollAll",children:(0,v.jsx)(a.cC,{children:(0,v.jsx)("b",{children:"Please vote for any combination of options"})},"poll4")}),(0,v.jsx)("div",{className:"options "+(R?"canVote":""),children:Z.map((([e,s,n,t],a)=>(0,v.jsxs)(i.P0,{is60:!0,children:[(0,v.jsxs)(i.P0.Column,{className:"option",children:[(0,v.jsx)("div",{className:"optionName",children:e}),(0,v.jsx)("div",{className:"optionDesc",children:s}),R&&(0,v.jsx)(i.ZD,{className:"pollToggle",isDisabled:!R,label:o(R?n?"Aye, I support this":"Nay, I do not support this":"Voting closed"),onChange:t,value:R&&n})]}),(0,v.jsx)(i.P0.Column,{children:N[a].isZero()?(0,v.jsx)("div",{className:"result"}):(0,v.jsxs)("div",{className:"result",children:[(0,v.jsx)(u.Z,{value:N[a]}),(0,v.jsx)(i.Ex,{isDisabled:!S,total:null==S?void 0:S.voted,value:N[a]})]})})]},a)))}),R&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(i.rp,{label:o("vote using my account"),onChange:k,type:"account"}),(0,v.jsx)(i.zx.Group,{children:(0,v.jsx)(i.cA,{accountId:C,icon:"paper-plane",isDisabled:!B,label:o("Vote"),params:[[A,M,T,q]],tx:p.tx.poll.vote})})]})]}),(0,v.jsx)("div",{className:"pollActions",children:(0,v.jsxs)("ul",{children:[(0,v.jsx)("li",{children:o("Any combination of the four options may be approved of by the voter. There is no need to select only one option!")}),(0,v.jsx)("li",{children:o("Approving of all or none of the options is equivalent and will not affect the outcome of the poll.")}),(0,v.jsx)("li",{children:o("All voters may alter their votes any number of times prior to the close of the poll.")}),(0,v.jsx)("li",{children:o("Voting costs nothing other than the transaction fee and can be done from all accounts with a non-zero spendable balance.")}),(0,v.jsx)("li",{children:o("Locked funds (e.g. for staking) are counted.")}),(0,v.jsx)("li",{children:o("No discretionary lock-voting is in place; all DOT used to vote counts the same.")}),(0,v.jsx)("li",{children:o("Voting is made on a per-account basis; a single account must all vote the same way and cannot split its vote.")}),(0,v.jsx)("li",{children:o('This vote does not affect any economics of the Polkadot platform. Staking rewards, inflation, effective market capitalisation and the underlying balances of every account remain completely unchanged. It is "merely" about what units we use to denominate the balances into "DOT" for the purpose of display.')})]})})]})]})}const y=o.ZP.main.withConfig({displayName:"src__StyledMain",componentId:"sc-3hhsvz-0"})([".pollActions{opacity:0.75;}.pollAll{margin-bottom:0;padding:0.75rem 1rem;text-align:center;}.pollBlocksRight{position:absolute;right:0;text-align:right;opacity:0.75;bottom:0;> div{display:inline-block;padding:0 0.75rem;&+div{border-left:1px solid #bbb;}}}.pollContainer{margin:2rem auto;max-width:60rem;}.pollHeader{position:relative;}.options{margin:1rem 0;.ui--Columar{margin:0 -1.25rem;padding:0 1.25rem;&:nth-child(odd){background:#f9f8f7;}.ui--Column{padding:1rem 1.5rem;}}.optionName{font-size:1.2rem;font-weight:var(--font-weight-normal);line-height:1;margin-bottom:0.75rem;}.pollToggle{margin-top:0.5rem;text-align:right;}&:not(.canVote){.ui--Toggle{opacity:0;.toggle{display:none;}}}}.result{align-items:center;display:flex;justify-content:flex-end;margin:0;text-align:right;.ui--FormatBalance{font-size:1.2rem;font-weight:var(--font-weight-normal);line-height:1;}.ui--Progress{margin:0.75rem;}}"]),w=t.memo(j)},59621:(e,s,n)=>{n.d(s,{Z:()=>f});var t=n(2784),a=n(61397),o=n(7840),i=n(49753),r=n(10912),l=n(92529),c=n(95292),d=n(34323),u=n(52322);const m=(0,d.$)(""),h={encodedHash:m,encodedLength:0,encodedProposal:null,notePreimageTx:null,storageFee:c.nw};function p({className:e,onChange:s}){const{t:n}=(0,r.$)(),{api:o,apiDefaultTxSudo:i}=(0,l.h)(),[{encodedHash:p,encodedLength:x,storageFee:g},f]=(0,t.useState)(h),v=(0,t.useCallback)((e=>{f(e),s(e)}),[s]),b=(0,t.useCallback)((e=>v(function(e,s){let n=m,t=null,a=0,o=null,i=c.nw;var r,l;return s&&(t=s.method.toHex(),a=Math.ceil((t.length-2)/2),n=(0,d.$)(t),o=e.tx.preimage.notePreimage(t),i=((null==(r=e.consts.preimage)?void 0:r.baseDeposit)||c.nw).add(((null==(l=e.consts.preimage)?void 0:l.byteDeposit)||c.nw).muln(a))),{encodedHash:n,encodedLength:a,encodedProposal:t,notePreimageTx:o,storageFee:i}}(o,e))),[o,v]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.u_.Columns,{className:e,hint:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:n("The image (proposal) will be stored on-chain against the hash of the contents.")}),(0,u.jsx)("p",{children:n("When submitting a proposal the hash needs to be known. Proposals can be submitted with hash-only, but upon dispatch the preimage needs to be available.")})]}),children:[(0,u.jsx)(a.n6,{defaultValue:i,label:n("propose"),onChange:b}),(0,u.jsx)(a.qG,{label:n("preimage hash"),value:p,withCopy:!0}),(0,u.jsx)(a.qG,{label:n("preimage length"),value:x||"0",withCopy:!0})]}),!g.isZero()&&(0,u.jsx)(a.u_.Columns,{className:e,hint:n("The calculated storage costs based on the base and the per-bytes fee."),children:(0,u.jsx)(a.H,{defaultValue:g,isDisabled:!0,label:n("calculated storage fee")})})]})}const x=t.memo(p);function g({className:e,imageHash:s}){const{t:n}=(0,r.$)(),[l,c]=(0,o.O)(),[d,m]=(0,t.useState)(null),[{encodedHash:p,notePreimageTx:g},f]=(0,t.useState)(h),v=!s||s===p;return(0,u.jsxs)(u.Fragment,{children:[l&&(0,u.jsxs)(a.u_,{className:e,header:n("Submit preimage"),onClose:c,size:"large",children:[(0,u.jsxs)(a.u_.Content,{children:[(0,u.jsx)(a.u_.Columns,{hint:n("This account will pay the fees for the preimage, based on the size thereof."),children:(0,u.jsx)(a.rp,{label:n("send from account"),labelExtra:(0,u.jsx)(i.Z,{label:(0,u.jsx)("span",{className:"label",children:n("transferrable")}),params:d}),onChange:m,type:"account"})}),(0,u.jsx)(x,{onChange:f})]}),(0,u.jsx)(a.u_.Actions,{children:(0,u.jsx)(a.cA,{accountId:d,extrinsic:g,icon:"plus",isDisabled:!d||!v||!g,label:n("Submit preimage"),onStart:c})})]}),(0,u.jsx)(a.zx,{icon:"plus",label:n("Add preimage"),onClick:c})]})}const f=t.memo(g)},84881:(e,s,n)=>{n.d(s,{Z:()=>c});var t=n(2784),a=n(61397),o=n(25943),i=n(10912),r=n(52322);function l({className:e="",value:s}){const{t:n}=(0,i.$)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{className:`${e} all`,children:s&&s.isCompleted?(0,r.jsxs)(r.Fragment,{children:[s.proposal&&(0,r.jsx)(a.Uv,{labelHash:n("call"),value:s.proposal}),s.proposalError?(0,r.jsx)(a.oy,{content:s.proposalError}):s.proposalWarning?(0,r.jsx)(a.Pd,{content:s.proposalWarning}):null]}):(0,r.jsx)("div",{className:"--tmp",children:"balances.transfer"})}),(0,r.jsx)("td",{className:"address media--1300",children:s&&s.isCompleted?s.deposit?(0,r.jsx)(a.ax,{balance:s.deposit.amount,value:s.deposit.who,withBalance:!0}):null:(0,r.jsx)(a.ax,{className:"--tmp",value:o.TS})})]})}const c=t.memo(l)},21240:(e,s,n)=>{n.d(s,{Z:()=>c});var t=n(2784),a=n(82740),o=n(61397),i=n(52322);function r({className:e="",value:s}){return(0,i.jsxs)(l,{className:`${e} hash`,children:[(0,i.jsx)("div",{className:"shortHash",children:s}),(0,i.jsx)(o.qi,{value:s})]})}const l=a.ZP.td.withConfig({displayName:"Hash__StyledTd",componentId:"sc-14clb7f-0"})(["white-space:nowrap;> div{display:inline-block;vertical-align:middle;}.shortHash{+ div{margin-left:0.5rem;}}"]),c=t.memo(r)},66179:(e,s,n)=>{n.d(s,{Z:()=>T});var t=n(2784),a=n(61397),o=n(82740),i=n(10912),r=n(92529),l=n(57513),c=n(26238),d=n(89448);const u=[],m={transform:e=>e.map((({args:[e]})=>e))};function h(e){const s=[],n=[];return e.forEach((({event:{data:[e],method:t}})=>{"Noted"===t?s.push(e):n.push(e)})),{added:s,removed:n}}const p=(0,d.e)("usePreimages",(function(){const{api:e}=(0,r.h)(),s=(0,l.k)(e.query.preimage.statusFor,u,m),n=(0,c.N)([e.events.preimage.Cleared,e.events.preimage.Noted],h,s);return(0,t.useMemo)((()=>n&&n.map((e=>e.toHex()))),[n])}));var x=n(59621),g=n(96288),f=n(14681),v=n(84881),b=n(13328),j=n(52322);function y({className:e,value:{count:s,deposit:n,proposalHash:o,status:l}}){const{t:c}=(0,i.$)(),{api:d}=(0,r.h)(),{allAccounts:u}=(0,b.x)();return(0,t.useMemo)((()=>0===s&&l&&l.isUnrequested&&n&&u.includes(n.who)),[u,s,n,l])&&n?(0,j.jsx)(a.cA,{accountId:n.who,className:e,icon:"minus",label:c("Unnote"),params:[o],tx:d.tx.preimage.unnotePreimage}):null}const w=t.memo(y);var N=n(21240);function C({className:e,value:s}){var n;const t=(0,g.CH)(s);return(0,j.jsxs)("tr",{className:e,children:[(0,j.jsx)(N.Z,{value:s}),(0,j.jsx)(v.Z,{value:t}),(0,j.jsx)("td",{className:"number media--1000",children:t&&t.proposalLength?(0,f.u)(t.proposalLength):(0,j.jsx)("span",{className:"--tmp",children:"999,999"})}),(0,j.jsx)("td",{className:"preimageStatus together media--1200",children:t?(0,j.jsxs)(j.Fragment,{children:[t.status&&(0,j.jsxs)("div",{children:[null==(n=t.status)?void 0:n.type,0!==t.count&&(0,j.jsxs)(j.Fragment,{children:[" / ",(0,f.u)(t.count)]})]}),(0,j.jsx)(w,{value:t})]}):(0,j.jsx)("span",{className:"--tmp",children:"Unrequested"})})]})}const k=t.memo(C);function S({className:e,hashes:s}){const{t:n}=(0,i.$)();return(0,j.jsx)(a.Ty,{className:e,children:(0,j.jsx)(a.Jy,{label:n("images"),children:void 0===s?(0,j.jsx)("span",{className:"--tmp",children:"99"}):(0,f.u)(s.length)})})}const I=t.memo(S);function A({className:e}){const{t:s}=(0,i.$)(),n=p(),o=(0,t.useRef)([[s("preimages"),"start",2],[void 0,"media--1300"],[s("length"),"media--1000"],[s("status"),"start media--1200"]]);return(0,j.jsxs)(P,{className:e,children:[(0,j.jsx)(I,{hashes:n}),(0,j.jsx)(a.zx.Group,{children:(0,j.jsx)(x.Z,{})}),(0,j.jsx)(a.iA,{className:e,empty:n&&s("No hashes found"),header:o.current,children:n&&n.map((e=>(0,j.jsx)(k,{value:e},e)))})]})}const P=o.ZP.div.withConfig({displayName:"Preimages__StyledDiv",componentId:"sc-14t9icl-0"})(["td.preimageStatus{div+.ui--Button{margin-top:0.25rem;}}"]),M=t.memo(A);function D({basePath:e,className:s}){const{t:n}=(0,i.$)(),o=(0,t.useRef)([{isRoot:!0,name:"overview",text:n("Overview")}]);return(0,j.jsxs)("main",{className:s,children:[(0,j.jsx)(a.mQ,{basePath:e,items:o.current}),(0,j.jsx)(M,{})]})}const T=t.memo(D)},10912:(e,s,n)=>{n.d(s,{$:()=>a});var t=n(61349);function a(){return(0,t.$G)("app-preimages")}},42552:(e,s,n)=>{n.d(s,{Z:()=>D});var t=n(2784),a=n(7267),o=n(7720),i=n(54674),r=n(61397),l=n(61349);function c(){return(0,l.$G)("app-ranked")}var d=n(52322);const u=["grey","grey","yellow","orange","purple","blue","green","black"],m=u[u.length-1];function h({className:e,value:{accountId:s,info:{rank:n}}}){const{t}=c();return(0,d.jsx)("tr",{className:e,children:(0,d.jsxs)("td",{className:"address all relative",children:[(0,d.jsx)(r.N,{value:s}),(0,d.jsx)(r.Vp,{className:"absolute",color:u[n.toNumber()]||m,hover:t("Membership rank"),label:n.toString()})]})})}const p=t.memo(h);var x=n(14681);function g({className:e,members:s}){const{t:n}=c();return(0,d.jsx)(r.Ty,{className:e,children:(0,d.jsx)(r.Jy,{label:n("members"),children:void 0===s?(0,d.jsx)("span",{className:"--tmp",children:"99"}):(0,x.u)(s.length)})})}const f=t.memo(g);function v({className:e,members:s}){const{t:n}=c(),a=(0,t.useRef)([[n("members"),"start"]]);return(0,d.jsxs)("div",{className:e,children:[(0,d.jsx)(f,{members:s}),(0,d.jsx)(r.iA,{className:e,empty:s&&n("No members found"),header:a.current,isSplit:!0,children:s&&s.map((e=>(0,d.jsx)(p,{value:e},e.accountId)))})]})}const b=t.memo(v);var j=n(92529),y=n(36856),w=n(89448),N=n(57513),C=n(26238);const k={transform:e=>e.map((({args:[e]})=>e))};function S(e){const s=[],n=[];return e.forEach((({event:{data:[e],method:t}})=>{"MemberAdded"===t?s.push(e):n.push(e)})),{added:s,removed:n}}const I=(0,w.e)("useMemberIds",(function(e){const{api:s}=(0,j.h)(),n=(0,N.k)(s.query[e].members,[],k);return(0,C.N)([s.events[e].MemberAdded,s.events[e].MemberRemoved],S,n)})),A={transform:([[e],s])=>{const n=s.map(((s,n)=>[s.unwrapOr(null),e[n]])).filter((e=>!!e[0])).sort((([e],[s])=>s.rank.cmp(e.rank))).map((([e,s])=>({accountId:s.toString(),info:e})));return{memberIds:n.map((({accountId:e})=>e)),memberRanks:n.map((({info:e})=>e.rank)),members:n}},withParamsTransform:!0},P=(0,w.e)("useMembers",(function(e){const{api:s}=(0,j.h)(),n=I(e),a=(0,y.W7)(n&&0!==n.length&&s.query[e].members.multi,[n],A);return(0,t.useMemo)((()=>n&&0===n.length?{memberIds:[],memberRanks:[],members:[]}:a),[n,a])}));function M({basePath:e,className:s,palletColl:n,palletPoll:l}){const{t:u}=c(),m=P(n),h=(0,o.E)(l),p=(0,t.useMemo)((()=>[{isRoot:!0,name:"overview",text:u("Overview")},{name:"referenda",text:u("Referenda ({{count}})",{replace:{count:h||0}})}]),[h,u]);return(0,d.jsxs)("main",{className:s,children:[(0,d.jsx)(r.mQ,{basePath:e,items:p}),(0,d.jsxs)(a.rs,{children:[(0,d.jsx)(a.AW,{path:`${e}/referenda`,children:(0,d.jsx)(i.Z,{members:m&&m.memberIds,palletReferenda:l,palletVote:n,ranks:m&&m.memberRanks})}),(0,d.jsx)(a.AW,{children:(0,d.jsx)(b,{members:m&&m.members})})]})]})}const D=t.memo(M)},49043:(e,s,n)=>{n.d(s,{Z:()=>r});var t=n(2784),a=n(42552),o=n(52322);function i({basePath:e,className:s}){return(0,o.jsx)(a.Z,{basePath:e,className:s,palletColl:"rankedCollective",palletPoll:"rankedPolls"})}const r=t.memo(i)},94908:(e,s,n)=>{n.d(s,{Z:()=>a});var t=n(7720);const a=(0,n(89448).e)("useCounter",(function(){return(0,t.E)("rankedPolls")}))},54674:(e,s,n)=>{n.d(s,{Z:()=>Ke});var t=n(2784),a=n(82740),o=n(59621),i=n(61397),r=n(92529),l=n(36856),c=n(13328),d=n(95292),u=n(64167),m=n(79386),h=n(89448);const p=(0,h.e)("useSummary",(function(e,s){const{api:n}=(0,r.h)(),a=(0,l.W7)(n.query[e].referendumCount),o=(0,t.useMemo)((()=>function(e=[]){return e.reduce(((e,{referenda:s=[]})=>e+s.filter((e=>e.info.isOngoing)).length),0)}(s)),[s]);return(0,t.useMemo)((()=>({refActive:o,refCount:a})),[o,a])}));var x=n(7840),g=n(63315),f=n(33661),v=n(12372),b=n(94087),j=n(52322);const y=(0,h.e)("useTrackOptions",(function(e,s,n,a){const{api:o,specName:i}=(0,r.h)();return(0,t.useMemo)((()=>function(e,s,n,t,a,o){const i=a&&a.map((e=>(0,v.G)(e))),r=o&&o.map((e=>(0,v.G)(e)));return t.filter((({id:e})=>(!i||i.some((s=>s.eq(e))))&&(!r||!r.some((s=>s.eq(e)))))).map((({id:a,info:o})=>{const i=(0,b.K2)(e,s,n,t,a.toNumber()),r=(0,b.tp)(a,o);return{text:null!=i&&i.text?(0,j.jsxs)("div",{className:"trackOption",children:[(0,j.jsx)("div",{className:"normal",children:r}),(0,j.jsx)("div",{className:"faded",children:i.text})]}):r,value:a.toNumber()}}))}(o,i,e,s,n,a)),[o,a,n,e,i,s])})),w=t.memo((0,a.ZP)((function({className:e,exclude:s,include:n,onChange:t,palletReferenda:a,tracks:o}){const{t:r}=(0,u.$)(),l=y(a,o,n,s);return(0,j.jsx)(i.Lt,{className:e,defaultValue:l[0].value,label:r("submission track"),onChange:t,options:l})})).withConfig({displayName:"TrackDropdown",componentId:"sc-1i846mm-0"})([".trackOption{.faded{font-size:var(--font-size-small);font-weight:var(--font-weight-normal);margin-top:0.125rem;opacity:0.6;}}"]));function N({allowEmpty:e,className:s,palletReferenda:n,tracks:a,value:o}){const{t:l}=(0,u.$)(),{api:c,specName:d}=(0,r.h)(),m=(0,t.useMemo)((()=>o&&o.map((e=>[e,(0,b.K2)(c,d,n,a,e.classId.toNumber())]))),[c,n,d,a,o]);return m?(0,j.jsxs)(C,{className:s,children:[m.length?(0,j.jsx)(i.iA,{isInline:!0,children:m.map((([{casting:e,classId:s,delegating:n},t],a)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:"all",children:t&&t.trackName||s.toString()}),(0,j.jsx)("td",{className:"together",children:n&&l("delegating")||e&&`${e.length} ${1===e.length?l("vote"):l("votes")}`})]},a)))}):(0,j.jsx)(i.Pd,{content:l("This account has no voting/delating activity in the chain state")}),!e&&m.some((([{delegating:e}])=>e))&&(0,j.jsx)(i.Pd,{content:l("This account has some delegations in itself")})]}):null}const C=a.ZP.div.withConfig({displayName:"Activity__StyledDiv",componentId:"sc-16nr2ee-0"})([".ui--Table{font-size:var(--font-percent-small);opacity:var(--opacity-light);padding-left:2rem;}"]),k=t.memo(N),S={transform:([[e],s])=>e.reduce(((e,n,t)=>({...e,[n]:s[t].map((([e,s])=>({balance:s.toBn(),classId:e.toBn()})))})),{}),withParamsTransform:!0},I=(0,h.e)("useVotingLocks",(function(e,s){var n,a;const{api:o}=(0,r.h)(),i=(0,t.useMemo)((()=>s?s.length?[s]:[]:void 0),[s]),c=(0,l.W7)(i&&i[0]&&(null==(n=o.query[e])||null==(a=n.classLocksFor)?void 0:a.multi),i,S);return(0,t.useMemo)((()=>{var s;return i?i[0]?(0,f.m)(null==(s=o.query[e])?void 0:s.classLocksFor)?c:i[0].reduce(((e,s)=>({...e,[s]:[]})),{}):{}:null}),[o,c,i,e])})),A={transform:([[e],s])=>e.sort(((e,s)=>e[1].cmp(s[1]))).reduce(((e,[n,t],a)=>{let o,i;if(e[n]||(e[n]=[]),s[a].isCasting)o=s[a].asCasting.votes.map((([e])=>({refId:e})));else if(s[a].isDelegating){const{conviction:e,target:n}=s[a].asDelegating;i={conviction:e.type,targetId:n.toString()}}else console.error(`Unable to handle PalletConvictionVotingVoteVoting type ${s[a].type}`);return e[n].push({casting:o,classId:t,delegating:i}),e}),{}),withParamsTransform:!0};function P(e){return e&&Object.entries(e).reduce(((e,[s,n])=>n.reduce(((e,{classId:n})=>(e.push([s,n]),e)),e)),[])}const M=(0,h.e)("useVotingFor",(function(e,s){var n,a;const{api:o}=(0,r.h)(),i=I(e,s),c=(0,t.useMemo)((()=>[P(i)]),[i]),d=(0,l.W7)(c&&c[0]&&(null==(n=o.query[e])||null==(a=n.votingFor)?void 0:a.multi),c,A);return(0,t.useMemo)((()=>{var s;return i&&c?c[0]?(0,f.m)(null==(s=o.query[e])?void 0:s.votingFor)?d&&function(e,s){return Object.keys(e).reduce(((e,s)=>(e[s]||(e[s]=[]),e)),s)}(i,d):i:{}:null}),[o,i,c,e,d])})),D=(0,h.e)("useActivityAccount",(function(e,s){const n=(0,t.useMemo)((()=>s&&[s]||null),[s]),a=M(e,n);return a&&s?a[s]||[]:null})),T={transform:([[e],s])=>s.map(((s,n)=>s.isSome?s.unwrap()[0].toString():e[n])).reduce(((e,s)=>(e.includes(s)||e.push(s),e)),[]),withParamsTransform:!0},E=(0,h.e)("useSuperIds",(function(e){var s,n;const{api:a}=(0,r.h)(),o=(0,t.useMemo)((()=>e&&[e]),[e]),i=(0,l.W7)(o&&!!o[0].length&&(null==(s=a.query.identity)||null==(n=s.superOf)?void 0:n.multi),o,T);return(0,t.useMemo)((()=>{var s;return o?o[0].length?(0,f.m)(null==(s=a.query.identity)?void 0:s.superOf)?i:e:[]:null}),[a,e,i,o])})),q=(0,h.e)("useActivity",(function(e,s){const n=E(s);return M(e,n)}));var _=n(57513);const $={transform:e=>e.map((({args:[e]})=>e.toString()))},F=(0,h.e)("useFellows",(function(){var e;const{api:s}=(0,r.h)(),n=(0,_.k)(null==(e=s.query.fellowshipCollective)?void 0:e.members,[],$);return(0,t.useMemo)((()=>{var e;return(0,f.m)(null==(e=s.query.fellowshipCollective)?void 0:e.members)?n:[]}),[s,n])})),O=(0,h.e)("useActivityFellows",(function(e){const s=F();return q(e,s)})),V={transform:e=>e.reduce(((e,s)=>s.isSome?e.concat(s.unwrap().targets.map((e=>e.toString())).filter((s=>!e.includes(s)))):e),[])},R=(0,h.e)("useNominators",(function(){var e,s;const{api:n}=(0,r.h)(),{allAccounts:a}=(0,c.x)(),o=(0,t.useMemo)((()=>[a]),[a]),i=(0,l.W7)(!!a.length&&o&&(null==(e=n.query.staking)||null==(s=e.nominators)?void 0:s.multi),o,V);return(0,t.useMemo)((()=>{var e;return(0,f.m)(null==(e=n.query.staking)?void 0:e.nominators)&&a.length?i:[]}),[a,n,i])})),Z=(0,h.e)("useActivityNominators",(function(e){const s=R();return q(e,s)}));function B({className:e,palletReferenda:s,palletVote:n,tracks:a}){const{t:o}=(0,u.$)(),{api:l}=(0,r.h)(),{hasAccounts:d}=(0,c.x)(),[m,h]=(0,x.O)(),[p,v]=(0,x.O)(),[b,y,N]=(0,g.t)(),[C,S]=(0,t.useState)(null),[I,A]=(0,t.useState)(null),[P,M]=(0,t.useState)(0),[T,E]=(0,t.useState)(),[q,_]=(0,t.useState)(1),$=O(n),F=Z(n),V=D(n,C),R=D(n,I),[B,L]=(0,t.useState)({index:0,type:"address"}),H=(0,t.useMemo)((()=>V&&a.filter((e=>!V.some((s=>e.id.eq(s.classId))))).map((({id:e})=>e))),[V,a]),W=(0,t.useMemo)((()=>$&&Object.entries($).map((([e,s])=>s.length>0&&{key:e,name:e,value:e})).filter((e=>!!e))),[$]),z=(0,t.useMemo)((()=>F&&Object.entries(F).map((([e])=>({key:e,name:e,value:e}))).filter((e=>!!e))),[F]),U=(0,t.useMemo)((()=>{var e,s;return[{text:o("Addresses"),value:"address"},(0,f.m)(null==(e=l.query.staking)?void 0:e.nominators)&&{isDisabled:!z||!z.length,text:o("Validators"),value:"validators"},(0,f.m)(null==(s=l.query.fellowshipCollective)?void 0:s.members)&&{isDisabled:!W||!W.length,text:o("Fellows"),value:"fellows"}]}),[W,z,l,o]),J=(0,t.useCallback)(((e,s)=>L({index:e,type:s.toString()})),[]),G=(0,t.useMemo)((()=>T&&q&&I&&H?p?l.tx.utility.forceBatch(H.map((e=>l.tx[n].delegate(e,I,q,T)))):l.tx[n].delegate(P,I,q,T):null),[l,T,q,H,p,n,I,P]),Q=!!(C&&V&&H&&H.length>0),X=!(!I||!R);return(0,j.jsxs)(j.Fragment,{children:[m&&(0,j.jsxs)(i.u_,{className:e,header:o("Delegate votes {{step}}/{{numSteps}}",{replace:{numSteps:2,step:b}}),onClose:h,size:"large",children:[1===b&&(0,j.jsxs)(i.u_.Content,{children:[(0,j.jsxs)(i.u_.Columns,{hint:o("Delegate from this account to another. All votes made on the target would count as a delegated vote for this account."),children:[(0,j.jsx)(i.rp,{label:o("delegate from account"),onChange:S,type:"account",withLabel:!0}),(0,j.jsx)(k,{allowEmpty:!0,palletReferenda:s,trackId:-1,tracks:a,value:V})]}),(0,j.jsxs)(i.u_.Columns,{align:"right",hint:o("Either delegate your votes for a single track as selected or delegate for all available tracks."),children:[(0,j.jsx)(i.ZD,{label:o("apply delegation to all tracks"),onChange:v,value:p}),!p&&H&&H.length>0&&(0,j.jsx)(w,{include:H,onChange:M,palletReferenda:s,tracks:a})]}),(0,j.jsxs)(i.u_.Columns,{hint:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{children:o("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,j.jsx)("p",{children:o("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]}),children:[(0,j.jsx)(i.xb,{accountId:C,autoFocus:!0,label:o("delegated vote value"),onChange:E}),(0,j.jsx)(i.v,{label:o("conviction"),onChange:_,value:q,voteLockingPeriod:l.consts[n].voteLockingPeriod})]})]}),2===b&&(0,j.jsxs)(i.u_.Content,{children:[U.length>1&&(0,j.jsx)(i.u_.Columns,{align:"center",hint:o("Select from a list of pre-propulated accounts (based on your account activity) or supply your own"),children:(0,j.jsx)(i.tX,{onChange:J,options:U,value:B.index})}),(0,j.jsxs)(i.u_.Columns,{hint:o("The account that you wish to delegate to"),children:["address"===B.type?(0,j.jsx)(i.rp,{label:o("delegate to address"),onChange:A,type:"allPlus"},"address"):"validators"===B.type?(0,j.jsx)(i.rp,{defaultValue:null==z?void 0:z[0].value,label:o("delegate to validator"),onChange:A,options:z,type:"allPlus"},"validators"):"fellows"===B.type?(0,j.jsx)(i.rp,{defaultValue:null==W?void 0:W[0].value,label:o("delegate to fellow"),onChange:A,options:W,type:"allPlus"},"fellows"):null,(0,j.jsx)(k,{palletReferenda:s,trackId:p?-1:P,tracks:a,value:"fellows"===B.type?$&&!!I&&$[I]:"validators"===B.type?F&&!!I&&F[I]:R})]})]}),(0,j.jsxs)(i.u_.Actions,{children:[1!==b&&(0,j.jsx)(i.zx,{icon:"step-backward",label:o("Prev"),onClick:N}),2!==b&&(0,j.jsx)(i.zx,{activeOnEnter:!0,icon:"step-forward",isDisabled:1===b?!Q:!X,label:o("Next"),onClick:y}),(0,j.jsx)(i.cA,{accountId:C,extrinsic:G,icon:"code-merge",isDisabled:!Q||!X||2!==b,label:o("Delegate"),onStart:h})]})]}),(0,j.jsx)(i.zx,{icon:"code-merge",isDisabled:!d,label:o("Delegate"),onClick:h})]})}const L=t.memo(B);var H=n(65182),W=n(27229),z=n(65308),U=n(14681),J=n(52107),G=n(33403),Q=n(67738);function X({className:e="",label:s,when:n}){const t=(0,H.C)();return(0,j.jsx)("td",{className:`${e} number`,children:t&&n&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{children:s}),n.gt(t)&&(0,j.jsx)(Q.Z,{value:n.sub(t)}),(0,j.jsxs)("div",{children:["#",(0,U.u)(n)]})]})})}const K=t.memo(X);function Y({value:{info:e}}){const s=(0,t.useMemo)((()=>e.isKilled?e.asKilled:null),[e]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{className:"all no-pad",colSpan:5}),(0,j.jsx)(K,{label:e.type,when:s})]})}const ee=t.memo(Y);var se=n(96288),ne=n(49753);function te({className:e="",id:s,palletReferenda:n,track:a}){const{t:o}=(0,u.$)(),{api:l}=(0,r.h)(),[c,d]=(0,x.O)(),[m,h]=(0,t.useState)(null);return(0,j.jsxs)(j.Fragment,{children:[c&&(0,j.jsxs)(i.u_,{className:e,header:o("Place decision deposit"),onClose:d,size:"large",children:[(0,j.jsxs)(i.u_.Content,{children:[(0,j.jsx)(i.u_.Columns,{hint:o("The deposit will be registered from this account and the balance lock will be applied here."),children:(0,j.jsx)(i.rp,{label:o("deposit from account"),labelExtra:(0,j.jsx)(ne.Z,{label:(0,j.jsx)("span",{className:"label",children:o("transferrable")}),params:m}),onChange:h,type:"account"})}),(0,j.jsx)(i.u_.Columns,{hint:o("The referendum this deposit would apply to."),children:(0,j.jsx)(i.Rn,{defaultValue:s,isDisabled:!0,label:o("referendum id")})}),(0,j.jsx)(i.u_.Columns,{hint:o("The deposit for this proposal will be locked for the referendum duration."),children:(0,j.jsx)(i.H,{defaultValue:a.decisionDeposit,isDisabled:!0,label:o("decision deposit")})})]}),(0,j.jsx)(i.u_.Actions,{children:(0,j.jsx)(i.cA,{accountId:m,icon:"plus",label:o("Place deposit"),onStart:d,params:[s],tx:l.tx[n].placeDecisionDeposit})})]}),(0,j.jsx)(i.zx,{icon:"plus",label:o("Decision deposit"),onClick:d})]})}const ae=t.memo(te);function oe({className:e="",id:s,palletReferenda:n}){const{t:a}=(0,u.$)(),{api:o}=(0,r.h)(),[l,c]=(0,x.O)(),[d,m]=(0,t.useState)(null);return(0,j.jsxs)(j.Fragment,{children:[l&&(0,j.jsxs)(i.u_,{className:e,header:a("Refund decision deposit"),onClose:c,size:"large",children:[(0,j.jsxs)(i.u_.Content,{children:[(0,j.jsx)(i.u_.Columns,{hint:a("The transaction will be submitted from this account."),children:(0,j.jsx)(i.rp,{label:a("refund from account"),onChange:m,type:"account"})}),(0,j.jsx)(i.u_.Columns,{hint:a("The referendum this deposit would apply to."),children:(0,j.jsx)(i.Rn,{defaultValue:s,isDisabled:!0,label:a("referendum id")})})]}),(0,j.jsx)(i.u_.Actions,{children:(0,j.jsx)(i.cA,{accountId:d,icon:"minus",label:a("Refund deposit"),onStart:c,params:[s],tx:o.tx[n].refundDecisionDeposit})})]}),(0,j.jsx)(i.zx,{icon:"minus",label:a("Refund deposit"),onClick:c})]})}const ie=t.memo(oe);function re({canDeposit:e,canRefund:s,className:n="",decision:t,id:a,noMedia:o,palletReferenda:r,submit:l,track:c}){return(0,j.jsxs)(le,{className:`${n} address ${o?"":"media--1000-noPad"}`,children:[l&&(0,j.jsx)(i.ax,{balance:l.amount,className:o?"":"media--1000",value:l.who,withBalance:!0}),t?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.ax,{balance:t.amount,className:o?"":"media--1000",value:t.who,withBalance:!0}),s&&(0,j.jsx)("div",{className:o?"":"media--1000",children:(0,j.jsx)(ie,{id:a,palletReferenda:r})})]}):e&&c&&(0,j.jsx)("div",{className:o?"":"media--1000",children:(0,j.jsx)(ae,{id:a,palletReferenda:r,track:c})})]})}const le=a.ZP.td.withConfig({displayName:"Deposits__StyledTd",componentId:"sc-1mwkg49-0"})([".ui--AddressMini+.ui--Button{margin-top:0.25rem;}"]),ce=t.memo(re);var de=n(37602);function ue(e){return e instanceof de.W?e.unwrapOr(null):e}function me({accountId:e,id:s,onChange:n}){const{t:a}=(0,u.$)(),[o,r]=(0,t.useState)(),[l,c]=(0,t.useState)(),[d,m]=(0,t.useState)();return(0,t.useEffect)((()=>{n([s,{SplitAbstain:{abstain:o,aye:l,nay:d}}])}),[o,l,d,s,n]),(0,j.jsxs)(i.u_.Columns,{hint:a("The value of the balance that is to be split to the abstain, aye and nay parts of the vote"),children:[(0,j.jsx)(i.xb,{accountId:e,autoFocus:!0,label:a("abstain vote value"),onChange:r}),(0,j.jsx)(i.xb,{accountId:e,autoFocus:!0,label:a("aye vote value"),noDefault:!0,onChange:c}),(0,j.jsx)(i.xb,{accountId:e,label:a("nay vote value"),noDefault:!0,onChange:m})]})}const he=t.memo(me);function pe({accountId:e,id:s,onChange:n}){const{t:a}=(0,u.$)(),[o,r]=(0,t.useState)(),[l,c]=(0,t.useState)();return(0,t.useEffect)((()=>{n([s,{Split:{aye:o,nay:l}}])}),[o,l,s,n]),(0,j.jsxs)(i.u_.Columns,{hint:a("The value of the balance that is to be split to the aye and nay parts of the vote"),children:[(0,j.jsx)(i.xb,{accountId:e,autoFocus:!0,label:a("aye vote value"),onChange:r}),(0,j.jsx)(i.xb,{accountId:e,label:a("nay vote value"),noDefault:!0,onChange:c})]})}const xe=t.memo(pe);function ge({accountId:e,id:s,isAye:n,onChange:a,voteLockingPeriod:o}){const{t:r}=(0,u.$)(),[l,c]=(0,t.useState)(),[d,m]=(0,t.useState)(1);return(0,t.useEffect)((()=>{a([s,{Standard:{balance:l,vote:{aye:n,conviction:d}}}])}),[l,d,s,n,a]),(0,j.jsxs)(i.u_.Columns,{hint:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{children:r("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,j.jsx)("p",{children:r("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]}),children:[(0,j.jsx)(i.xb,{accountId:e,autoFocus:!0,label:r(n?"aye vote value":"nay vote value"),onChange:c}),(0,j.jsx)(i.v,{label:r("conviction"),onChange:m,value:d,voteLockingPeriod:o})]})}const fe=t.memo(ge);function ve({className:e,id:s,isConvictionVote:n,isMember:a,members:o,palletVote:l,preimage:d,ranks:m,trackInfo:h}){const{t:p}=(0,u.$)(),{api:g}=(0,r.h)(),{allAccounts:f,hasAccounts:v}=(0,c.x)(),[b,y]=(0,t.useState)(null),[w,N]=(0,x.O)(),[C,k]=(0,t.useState)(0),[S,I]=(0,t.useState)(),A=(0,t.useMemo)((()=>function(e,s){let n=!1;try{n=!!e.createType("PalletConvictionVotingVoteAccountVote",{SplitAbstain:{abstain:1}}).isSplitAbstain}catch{n=!1}return n?[{text:s("Aye"),value:"aye"},{text:s("Nay"),value:"nay"},{text:s("Split"),value:"split"},{text:s("Abstain"),value:"abstain"}]:[{text:s("Aye"),value:"aye"},{text:s("Nay"),value:"nay"},{text:s("Split"),value:"split"}]}(g,p)),[g,p]),P=(0,t.useMemo)((()=>function(e,s,n,t){if(s){const a=s.filter((s=>e.includes(s)));if(n&&t&&t.compare){const e=t.compare;return a.filter(((s,t)=>e(n[t])))}return a}return s}(f,o,m,h)),[f,o,m,h]),M=(0,t.useMemo)((()=>!a||!(!o||!P)&&!P.length),[P,a,o]);return v?(0,j.jsxs)(j.Fragment,{children:[w&&(0,j.jsxs)(be,{className:e,header:p("Vote on referendum"),onClose:N,size:"large",children:[(0,j.jsxs)(i.u_.Content,{children:[d&&(0,j.jsx)(i.u_.Columns,{hint:p("If this proposal is passed, the changes will be applied via dispatch and the deposit returned."),children:(0,j.jsx)(i.lV,{idNumber:s,proposal:d.proposal})}),(0,j.jsx)(i.u_.Columns,{hint:p("The vote will be recorded for this account. If another account delegated to this one, the delegated votes will also be counted."),children:(0,j.jsx)(i.UE,{filter:P,onChange:y})}),n&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.u_.Columns,{className:"centerVoteType",hint:p("The type of vote that you wish to cast on the referendum."),children:(0,j.jsx)(i.tX,{onChange:k,options:A,value:C})}),0===C?(0,j.jsx)(fe,{accountId:b,id:s,isAye:!0,onChange:I,voteLockingPeriod:g.consts[l].voteLockingPeriod}):1===C?(0,j.jsx)(fe,{accountId:b,id:s,onChange:I,voteLockingPeriod:g.consts[l].voteLockingPeriod}):2===C?(0,j.jsx)(xe,{accountId:b,id:s,onChange:I}):(0,j.jsx)(he,{accountId:b,id:s,onChange:I})]})]}),(0,j.jsx)(i.u_.Actions,{children:n?(0,j.jsx)(i.cA,{accountId:b,icon:"check-to-slot",label:p("Vote"),onStart:N,params:S,tx:g.tx[l].vote}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.cA,{accountId:b,icon:"ban",label:p("Vote Nay"),onStart:N,params:[s,!1],tx:g.tx[l].vote}),(0,j.jsx)(i.cA,{accountId:b,icon:"check",label:p("Vote Aye"),onStart:N,params:[s,!0],tx:g.tx[l].vote})]})})]}),(0,j.jsx)(i.zx,{icon:"check-to-slot",isDisabled:M,label:p("Vote"),onClick:N})]}):null}const be=(0,a.ZP)(i.u_).withConfig({displayName:"Vote__StyledModal",componentId:"sc-1sfy06l-0"})([".ui--Modal-Columns.centerVoteType > div:first-child{text-align:center;}"]),je=t.memo(ve);var ye=n(76277),we=n(26238);const Ne={transform:e=>e.map((({args:[,e]})=>e))},Ce={transform:([[e],s])=>e.reduce(((e,[,n],t)=>(s[t]&&s[t].isSome&&(e[n.toString()]=s[t].unwrap()),e)),{}),withParamsTransform:!0};function ke(e,s,n){const t=[];return e.forEach((({event:{data:[e,s]}})=>{n&&s.eq(n)&&t.push(e)})),{added:t}}const Se=(0,h.e)("useVotes",(function(e,s,n){const{api:a}=(0,r.h)(),o=(0,_.k)(!1===n&&a.query[e].voting,[s],Ne),i=(0,we.N)([a.events[e].Voted],ke,o,s),c=(0,t.useMemo)((()=>null==i?void 0:i.map((e=>[s,e]))),[i,s]);return(0,l.W7)(c&&a.query[e].voting.multi,[c],Ce)}));function Ie(e){return null==e?void 0:e.sort((([,e],[,s])=>s.cmp(e))).map((([e])=>(0,j.jsx)(i.ax,{value:e},e)))}function Ae({className:e="",id:s,isConvictionVote:n,palletVote:a,tally:o}){const{t:r}=(0,u.$)(),l=Se(a,s,n),[c,d]=(0,t.useMemo)((()=>function(e={}){const s=[],n=[],t=Object.entries(e);for(let e=0;e<t.length;e++){const[a,o]=t[e];o.isAye?s.push([a,o.asAye]):n.push([a,o.asNay])}return[s.length?s:void 0,n.length?n:void 0]}(l)),[l]),m=(0,t.useCallback)((()=>Ie(c)),[c]),h=(0,t.useCallback)((()=>Ie(d)),[d]);return(0,j.jsxs)("td",{className:`${e} expand media--1200-noPad`,children:[(0,j.jsx)(i.xH,{className:"media--1200",renderChildren:c&&m,summary:n?(0,j.jsxs)(j.Fragment,{children:[r("Aye"),(0,j.jsx)("div",{children:(0,j.jsx)(ye.Z,{value:o.ayes})})]}):r("Aye {{count}}",{replace:{count:(0,U.u)(o.ayes)}})}),(0,j.jsx)(i.xH,{className:"media--1200",renderChildren:d&&h,summary:n?(0,j.jsxs)(j.Fragment,{children:[r("Nay"),(0,j.jsx)("div",{children:(0,j.jsx)(ye.Z,{value:o.nays})})]}):r("Nay {{count}}",{replace:{count:(0,U.u)(o.nays)}})})]})}const Pe=t.memo(Ae);function Me({isMember:e,members:s,palletReferenda:n,palletVote:a,ranks:o,trackInfo:l,value:{id:c,info:d,isConvictionVote:m,track:h}}){const{t:p}=(0,u.$)(),{api:x}=(0,r.h)(),{decisionDeposit:g,ongoing:f,periods:{confirmEnd:v,decideEnd:b,periodEnd:y},submissionDeposit:w,tally:N,tallyTotal:C}=(0,t.useMemo)((()=>function(e,s,n){const t=s.asOngoing,a=(0,se.uD)(e,t.proposal||t.proposalHash).proposalHash;let o=null,i=null,r=null;if(n){const{deciding:e,submitted:s}=t;if(e.isSome){const{confirming:s,since:t}=e.unwrap();s.isSome?r=s.unwrap():i=t.add(n.decisionPeriod)}else o=s.add(n.preparePeriod)}return{decisionDeposit:ue(t.decisionDeposit),ongoing:t,periods:{confirmEnd:r,decideEnd:i,periodEnd:r||i||o,prepareEnd:o},proposalHash:a,submissionDeposit:ue(t.submissionDeposit),tally:t.tally,tallyTotal:t.tally.ayes.add(t.tally.nays)}}(x,d,h)),[x,d,h]),k=(0,se.CH)(f.proposal||f.proposalHash);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{className:"all",children:k&&k.proposal?(0,j.jsx)(i.Uv,{labelHash:p("preimage"),value:k.proposal,withHash:!0}):(0,j.jsx)("div",{className:"shortHash",children:null==k?void 0:k.proposalHash})}),(0,j.jsx)(ce,{canDeposit:!0,decision:g,id:c,palletReferenda:n,submit:w,track:h}),(0,j.jsx)(K,{label:p(v?"Confirming":b?"Deciding":"Preparing"),when:y}),(0,j.jsx)(Pe,{id:c,isConvictionVote:m,palletVote:a,tally:N}),(0,j.jsx)("td",{className:"middle chart media--1300-noPad",children:(0,j.jsx)(i.Ex,{className:"media--1300",total:C,value:N.ayes})}),(0,j.jsx)("td",{className:"actions button",children:(0,j.jsx)(je,{id:c,isConvictionVote:m,isMember:e,members:s,palletVote:a,preimage:k,ranks:o,trackInfo:l})})]})}const De=t.memo(Me);function Te({palletReferenda:e,value:{id:s,info:n,track:a}}){const{decision:o,submit:i,when:r}=(0,t.useMemo)((()=>function(e){const s=e.isApproved?e.asApproved:e.isRejected?e.asRejected:e.isCancelled?e.asCancelled:e.isTimedOut?e.asTimedOut:null;return s?{decision:ue(s[2]),submit:ue(s[1]),when:s[0]}:{decision:null,submit:null,when:null}}(n)),[n]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{className:"no-pad",colSpan:4}),(0,j.jsx)(ce,{canRefund:!0,className:"all",decision:o,id:s,noMedia:!0,palletReferenda:e,submit:i,track:a}),(0,j.jsx)(K,{label:n.type,when:r})]})}const Ee=t.memo(Te),qe={Killed:ee,Ongoing:De},_e=["#ff8c00","#9c3333","#339c33"],$e={aspectRatio:2.25,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0}}};function Fe(e){const{t:s}=(0,u.$)(),n=(0,H.C)(),a=(0,W.n)(),{activeIssuance:o,className:r="",palletReferenda:l,value:{id:c,info:m,isConvictionVote:h,track:p,trackGraph:g}}=e,[f,b]=(0,x.O)(!1),y=(0,t.useMemo)((()=>qe[m.type]||Ee),[m]),w=(0,t.useMemo)((()=>o&&p&&g&&function(e,s,n,t,a){if(e&&s&&n.isOngoing){const o=n.asOngoing;if(o.deciding.isSome){const{approval:n,support:i,x:r}=a,{deciding:l,tally:c}=o,{confirming:u,since:m}=l.unwrap(),h=u.unwrapOr(null),p=s?c.support:c.bareAyes,x=[],g=[[[],[],[]],[[],[],[]]],f=e.isZero()?0:p.mul(d.D_).div(e).toNumber()/10,v=c.ayes.isZero()?0:c.ayes.mul(d.D_).div(c.ayes.add(c.nays)).toNumber()/10;let b=-1,j=-1;const y=[];for(let e=0;e<n.length;e++){x.push((0,U.u)(m.add(r[e]))),y.push(r[e]);const s=n[e].div(d.uy).toNumber()/10,t=v<s;g[0][0][e]=s,g[0][t?1:2][e]=v,b=t||-1!==b?b:e;const a=i[e].div(d.uy).toNumber()/10,o=f<a;g[1][0][e]=a,g[1][o?1:2][e]=f,j=o||-1!==j?j:e}const w=r[1].sub(r[0]),N=r.length-1,C=null==h?void 0:h.add(t.minEnactmentPeriod);if(null!=C&&C.gt(m.add(r[N]))){let e=r[N].add(m).add(w);do{x.push((0,U.u)(e)),y.push(e.sub(m)),g[0][1].push(g[0][1][N]),g[0][2].push(g[0][2][N]),g[1][1].push(g[1][1][N]),g[1][2].push(g[1][2][N]),e=e.add(w)}while(e.lt(C))}return[{changeX:b,currentY:v,endConfirm:h,labels:x,points:y,progress:{percent:v,total:o.tally.ayes.add(o.tally.nays),value:o.tally.ayes},since:m,values:g[0]},{changeX:j,currentY:f,endConfirm:h,labels:x,points:y,progress:{percent:f,total:e,value:p},since:m,values:g[1]}]}}return null}(o,h,m,p,g)),[o,m,h,p,g]),N=(0,t.useMemo)((()=>n&&w&&f&&p&&function(e,s,n,t,a,o){const i=n.reduce(((e,{changeX:s})=>-1===e||-1===s?-1:Math.max(e,s)),0);return n.map((({changeX:n,currentY:r,endConfirm:l,labels:c,points:d,progress:u,since:m,values:h},p)=>{const x=c.length,g=0===p?100:50,f=e=>Math.max(0,Math.min(x,x*(e.sub(m).toNumber()/d[d.length-1].toNumber()))),b=-1===n?-1:x*(n/d.length),j=-1!==i&&(0,J.x)(e,d[i].add(m)),y=l?[l.sub(a.confirmPeriod),l,l.add(a.minEnactmentPeriod)]:j?[j,j.add(a.confirmPeriod),j.add(a.confirmPeriod).add(a.minEnactmentPeriod)]:null,w=function(e,s,n,t){return([{label:a}])=>{try{const o=(0,v.G)(a.replace(/,/g,"")),i=t(o);if(o.gt(s)){const t=o.sub(s),r=new Date(Date.now()+t.mul(n).toNumber()).toLocaleString(),l=(0,z.A)(n,t,e),c=[`#${a}`,e("{{when}} (est.)",{replace:{when:r}}),l[1]];return i&&c.push(i),c}if(i)return[`#${a}`,i]}catch{}return`#${a}`}}(o,e,s,(e=>y&&e.gte(y[0])?e.lte(y[1])?o("Confirmation period"):e.lte(y[2])?o("Enactment period"):"":""));return{colors:_e,labels:c,options:(0,G.Z)({plugins:{annotation:{annotations:(0,G.Z)({past:{backgroundColor:"rgba(140, 140, 140, 0.2)",borderWidth:0,type:"box",xMax:f(e),xMin:0,yMax:g,yMin:0}},y?{conf:{backgroundColor:"rgba(255, 140, 0, 0.1)",borderWidth:0,type:"box",xMax:f(y[1]),xMin:f(y[0]),yMax:g,yMin:0},enac:{backgroundColor:"rgba(0, 0, 140, 0.1)",borderWidth:0,type:"box",xMax:f(y[2]),xMin:f(y[1]),yMax:g,yMin:0}}:{},{fail:{backgroundColor:"rgba(140, 0, 0, 0.02)",borderWidth:0,type:"box",xMax:-1===b?x:b,xMin:0,yMax:r,yMin:0}},-1!==b?{pass:{backgroundColor:"rgba(0, 140, 0, 0.02)",borderWidth:0,type:"box",xMax:x,xMin:b,yMax:r,yMin:0}}:{})},crosshair:{sync:{group:t.toNumber()}},tooltip:{callbacks:{title:w}}}},$e),progress:u,values:h}}))}(n,a,w,c,p,s)),[n,a,w,c,f,s,p]),{confirmEnd:C,enactAt:k,nextAlarm:S,submittedIn:I}=(0,t.useMemo)((()=>function(e,s){let n=null,t=null,a=null,o=null;if(e.isOngoing){const{alarm:i,deciding:r,enactment:l,submitted:c}=e.asOngoing;if(t={at:l.isAt,blocks:l.isAt?l.asAt:l.asAfter,end:null},a=i.unwrapOr([null])[0],o=c,r.isSome){const{confirming:e}=r.unwrap();if(e.isSome&&(n=e.unwrap(),s)){const e=n.add(s.minEnactmentPeriod);t.end=l.isAt?(0,J.x)(e,l.asAt):e.add(l.asAfter)}}}return{confirmEnd:n,enactAt:t,nextAlarm:a,submittedIn:o}}(m,p)),[m,p]),A=(0,t.useMemo)((()=>[[s("minimum approval"),s("current approval (failing)"),s("current approval (passing)")],[s("minimum support"),s("current support (failing)"),s("current support (passing)")]]),[s]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(Oe,{className:`${r} isExpanded isFirst ${f?"":"isLast"}`,children:[(0,j.jsx)(i.iA.Column.Id,{value:c}),(0,j.jsx)(y,{...e}),(0,j.jsx)(i.iA.Column.Expand,{isExpanded:f,toggle:b})]}),(0,j.jsxs)(Oe,{className:`${r} ${f?"isExpanded isLast":"isCollapsed"}`,children:[(0,j.jsx)("td",{}),(0,j.jsxs)("td",{className:"columar",colSpan:6,children:[N&&(0,j.jsxs)(i.P0,{children:[(0,j.jsx)(i.P0.Column,{children:(0,j.jsx)(i.kL.Line,{legends:A[0],title:s("approval / {{percent}}%",{replace:{percent:N[0].progress.percent.toFixed(1)}}),...N[0]})}),(0,j.jsx)(i.P0.Column,{children:(0,j.jsx)(i.kL.Line,{legends:A[1],title:s("support / {{percent}}%",{replace:{percent:N[1].progress.percent.toFixed(1)}}),...N[1]})})]}),(0,j.jsxs)(i.P0,{size:"tiny",children:[(0,j.jsxs)(i.P0.Column,{children:[I&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{children:s("Submitted at")}),"#",(0,U.u)(I)]}),S&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{children:s("Next alarm")}),"#",(0,U.u)(S)]})]}),(0,j.jsxs)(i.P0.Column,{children:[k&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{children:k.at?s("Enact at"):s("Enact after")}),k.at&&"#",s("{{blocks}} blocks",{replace:{blocks:(0,U.u)(k.blocks)}})]}),C&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{children:s("Confirm end")}),"#",(0,U.u)(C)]}),(null==k?void 0:k.end)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h5",{children:s("Enact end")}),"#",(0,U.u)(k.end)]})]})]}),(0,j.jsx)(i.P0,{is100:!0,size:"tiny",children:(0,j.jsx)(i.P0.Column,{children:(0,j.jsx)(i.NR,{data:c,type:l,withTitle:!0})})})]}),(0,j.jsx)("td",{})]})]})}const Oe=a.ZP.tr.withConfig({displayName:"Referendum__StyledTr",componentId:"sc-e636z3-0"})([".shortHash{max-width:var(--width-shorthash);min-width:3em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:var(--width-shorthash);}"]),Ve=t.memo(Fe);function Re({activeIssuance:e,className:s,isMember:n,members:a,palletReferenda:o,palletVote:l,ranks:c,referenda:d,trackId:m,trackName:h,tracks:p}){const{t:g}=(0,u.$)(),{api:f,specName:v}=(0,r.h)(),[y,w]=(0,x.O)(),N=(0,t.useMemo)((()=>(0,b.K2)(f,v,o,p,null==m?void 0:m.toNumber())),[f,v,o,p,m]),[C,k]=(0,t.useMemo)((()=>[!1,y&&N&&(0,j.jsx)("tr",{children:(0,j.jsx)("th",{colSpan:8})})]),[y,w,N]),[S,I]=(0,t.useMemo)((()=>[[[h?(0,j.jsxs)(j.Fragment,{children:[h,(0,j.jsx)("div",{className:"sub",children:null==N?void 0:N.text})]}):g("referenda"),"start",8],null],h?`track:${h}`:"untracked"]),[C,g,N,h]);return(0,j.jsx)(i.iA,{className:s,empty:d&&g("No active referenda"),header:S,headerChildren:k,isSplit:!m,children:d&&d.map((s=>(0,j.jsx)(Ve,{activeIssuance:e,isMember:n,members:a,palletReferenda:o,palletVote:l,ranks:c,trackInfo:N,value:s},s.key)))},I)}const Ze=t.memo(Re);var Be=n(13739),Le=n(6046),He=n(74076);function We({className:e="",isMember:s,members:n,palletReferenda:a,tracks:o}){const{t:l}=(0,u.$)(),{api:c,specName:m}=(0,r.h)(),h=(0,H.C)(),[p,g]=(0,x.O)(),[f,v]=(0,t.useState)(null),[y,N]=(0,t.useState)(void 0),[C,k]=(0,t.useState)(null),[{imageHash:S,isImageHashValid:I},A]=(0,t.useState)({imageHash:null,isImageHashValid:!1}),[{imageLen:P,imageLenDefault:M,isImageLenValid:D},T]=(0,t.useState)({imageLen:d.nw,isImageLenValid:!1}),[E,q]=(0,t.useState)(0),[_,$]=(0,t.useState)(d.S8),[F,O]=(0,t.useState)(d.If),[V,R]=(0,t.useState)(),Z=(0,se.CH)(S);(0,t.useEffect)((()=>{h&&R((e=>e||h.add(d.D_)))}),[h]),(0,t.useEffect)((()=>{(null==Z?void 0:Z.proposalLength)&&T((e=>({imageLen:e.imageLen,imageLenDefault:Z.proposalLength,isImageLenValid:e.isImageLenValid})))}),[Z]);const B=(0,t.useMemo)((()=>(0,b.K2)(c,m,a,o,y)),[c,a,m,y,o]),L=(0,t.useMemo)((()=>!h||(0===E?null==_?void 0:_.lt(d.If):null==F?void 0:F.lt(h))),[_,F,h,E]),W=(0,t.useMemo)((()=>[{name:"origin",type:(0,Le.s)(c.tx[a].submit.meta.args[0].type.toString())}]),[c,a]),z=(0,t.useMemo)((()=>B&&Array.isArray(B.origin)?B.origin.map(((e,s)=>({text:Object.values(e)[0],value:s+1}))):null),[B]),U=(0,t.useMemo)((()=>null==B||!B.origin||Array.isArray(null==B?void 0:B.origin)?C:B.origin),[C,B]),J=(0,t.useMemo)((()=>[{text:l("After delay"),value:"after"},{text:l("At block"),value:"at"}]),[l]),G=(0,t.useCallback)((e=>k(B&&Array.isArray(B.origin)?B.origin[e-1]:null)),[B]),Q=(0,t.useCallback)((([{isValid:e,value:s}])=>k(e?s:null)),[]),X=(0,t.useCallback)((e=>A({imageHash:e,isImageHashValid:(0,He.vq)(e,256)})),[]),K=(0,t.useCallback)((e=>{e&&T((s=>({imageLen:e,imageLenDefault:s.imageLenDefault,isImageLenValid:!e.isZero()})))}),[]);return(0,j.jsxs)(j.Fragment,{children:[p&&(0,j.jsxs)(ze,{className:e,header:l("Submit proposal"),onClose:g,size:"large",children:[(0,j.jsxs)(i.u_.Content,{children:[(0,j.jsx)(i.u_.Columns,{hint:l("The proposal will be registered from this account and the balance lock will be applied here."),children:(0,j.jsx)(i.rp,{filter:n,label:l("propose from account"),labelExtra:(0,j.jsx)(ne.Z,{label:(0,j.jsx)("span",{className:"label",children:l("transferrable")}),params:f}),onChange:v,type:"account"})}),(0,j.jsxs)(i.u_.Columns,{hint:l("The origin (and by extension track) that you wish to submit for, each has a different period, different root and acceptance criteria."),children:[(0,j.jsx)(w,{onChange:N,palletReferenda:a,tracks:o}),!(null!=B&&B.origin)&&(0,j.jsx)(Be.Z,{className:"originSelect",onChange:Q,params:W}),z&&(0,j.jsx)(i.Lt,{defaultValue:z[0].value,label:l("track origin"),onChange:G,options:z})]}),(0,j.jsxs)(i.u_.Columns,{hint:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{children:l("The hash of the preimage for the proposal as previously submitted or intended.")}),(0,j.jsx)("p",{children:l("The length value witll be auto-populated from the on-chain value if is is found.")})]}),children:[(0,j.jsx)(i.II,{autoFocus:!0,isError:!I,label:l("preimage hash"),onChange:X,value:S||""}),(0,j.jsx)(i.Rn,{defaultValue:M,isDisabled:!(null==Z||!Z.proposalLength)&&!(null!=Z&&Z.proposalLength.isZero())&&I&&D,isError:!D,label:l("preimage length"),onChange:K,value:P},"inputLength")]}),(0,j.jsx)(i.u_.Columns,{align:"center",hint:l("The moment of enactment, either at a specific block, or after a specific number of blocks."),children:(0,j.jsx)(i.tX,{onChange:q,options:J,value:E})}),0===E?(0,j.jsx)(i.u_.Columns,{hint:l("The number of blocks to delay enactment after proposal approval."),children:(0,j.jsx)(i.Rn,{defaultValue:d.S8,isError:L,label:l("after number of blocks"),onChange:$,value:_})}):(0,j.jsx)(i.u_.Columns,{hint:l("A specific block to enact the proposal at."),children:(0,j.jsx)(i.Rn,{defaultValue:V,isError:L,label:l("at specific block"),onChange:O,value:F})}),(0,j.jsx)(i.u_.Columns,{hint:l("The deposit for this proposal will be locked for the referendum duration."),children:(0,j.jsx)(i.H,{defaultValue:c.consts[a].submissionDeposit,isDisabled:!0,label:l("submission deposit")})})]}),(0,j.jsx)(i.u_.Actions,{children:(0,j.jsx)(i.cA,{accountId:f,icon:"plus",isDisabled:!U||!I||!D||!f||L||!(null!=Z&&Z.proposalHash),label:l("Submit proposal"),onStart:g,params:[U,{Lookup:Z?{hash:Z.proposalHash,len:P}:{hash:S,len:P}},0===E?{After:_}:{At:F}],tx:c.tx[a].submit})})]}),(0,j.jsx)(i.zx,{icon:"plus",isDisabled:!s,label:l("Submit proposal"),onClick:g})]})}const ze=(0,a.ZP)(i.u_).withConfig({displayName:"Submit__StyledModal",componentId:"sc-344oa2-0"})([".originSelect,.timeSelect{> .ui--Params-Content{padding-left:0;}}"]),Ue=t.memo(We);function Je({className:e,issuanceActive:s,issuanceInactive:n,issuanceTotal:t,summary:{refActive:a,refCount:o},withIssuance:l}){const{t:c}=(0,u.$)(),{api:d}=(0,r.h)();return(0,j.jsxs)(i.Ty,{className:e,children:[(0,j.jsxs)("section",{children:[(0,j.jsx)(i.Jy,{label:c("active"),children:void 0===a?(0,j.jsx)("span",{className:"--tmp",children:"99"}):(0,U.u)(a)}),(0,j.jsx)(i.Jy,{label:c("total"),children:void 0===o?(0,j.jsx)("span",{className:"--tmp",children:"99"}):(0,U.u)(o)})]}),l&&(0,j.jsxs)("section",{children:[(0,j.jsx)(i.Jy,{label:c("total issuance"),children:(0,j.jsx)(ye.Z,{className:t?"":"--tmp",value:t||1,withSi:!0})}),(0,f.m)(d.query.balances.inactiveIssuance)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(i.Jy,{className:"media--1000",label:c("inactive issuance"),children:(0,j.jsx)(ye.Z,{className:n?"":"--tmp",value:n||1,withSi:!0})}),(0,j.jsx)(i.Jy,{className:"media--800",label:c("active issuance"),children:(0,j.jsx)(ye.Z,{className:s?"":"--tmp",value:s||1,withSi:!0})})]})]})]})}const Ge=t.memo(Je);function Qe({className:e,isConvictionVote:s,members:n,palletReferenda:a,palletVote:h,ranks:x}){const{t:g}=(0,u.$)(),{api:f}=(0,r.h)(),v=(0,l.W7)(f.query.balances.totalIssuance),b=(0,l.W7)(f.query.balances.inactiveIssuance),{allAccounts:y}=(0,c.x)(),[w,N]=(0,m.Z)(a),C=p(a,w),[k,S]=(0,t.useState)(-1),I=(0,t.useMemo)((()=>v&&v.sub(b||d.nw)),[b,v]),A=(0,t.useMemo)((()=>[{text:g("All active/available tracks"),value:-1}].concat(w.map((({trackId:e,trackName:s})=>({text:s,value:e?e.toNumber():-1}))).filter((e=>!!e.text)))),[w,g]),P=(0,t.useMemo)((()=>(-1===k?w:w.filter((({trackId:e})=>!!e&&e.eqn(k))))||[{referenda:[]}]),[w,k]),M=(0,t.useMemo)((()=>!n||y.some((e=>n.includes(e)))),[y,n]);return(0,j.jsxs)(Xe,{className:e,children:[(0,j.jsx)(Ge,{issuanceActive:I,issuanceInactive:b,issuanceTotal:v,summary:C,withIssuance:s}),(0,j.jsxs)(i.zx.Group,{children:[(0,j.jsx)(i.Lt,{className:"topDropdown media--800",label:g("selected track"),onChange:S,options:A,value:k}),s&&(0,j.jsx)(L,{palletReferenda:a,palletVote:h,tracks:N}),(0,j.jsx)(o.Z,{}),(0,j.jsx)(Ue,{isMember:M,members:n,palletReferenda:a,tracks:N})]}),P.map((({key:e,referenda:s,trackId:t,trackName:o})=>(0,j.jsx)(Ze,{activeIssuance:I,isMember:M,members:n,palletReferenda:a,palletVote:h,ranks:x,referenda:s,trackId:t,trackName:o,tracks:N},e)))]})}const Xe=a.ZP.div.withConfig({displayName:"Referenda__StyledDiv",componentId:"sc-1670gbh-0"})([".ui--Dropdown.topDropdown{min-width:25rem;padding-left:0;> label{left:1.55rem !important;}}"]),Ke=t.memo(Qe)},16934:(e,s,n)=>{n.d(s,{Z:()=>c});var t=n(2784),a=n(61397),o=n(54674),i=n(64167),r=n(52322);function l({basePath:e,className:s}){const{t:n}=(0,i.$)(),l=(0,t.useRef)([{isRoot:!0,name:"overview",text:n("Overview")}]);return(0,r.jsxs)("main",{className:s,children:[(0,r.jsx)(a.mQ,{basePath:e,items:l.current}),(0,r.jsx)(o.Z,{isConvictionVote:!0,palletReferenda:"referenda",palletVote:"convictionVoting"})]})}const c=t.memo(l)},64167:(e,s,n)=>{n.d(s,{$:()=>a});var t=n(61349);function a(){return(0,t.$G)("app-referenda")}},98393:(e,s,n)=>{n.d(s,{Z:()=>u});var t=n(2784),a=n(92529),o=n(36856),i=n(89448),r=n(95292);const l={transform:e=>e.map((([e])=>e))},c={transform:([[e],s])=>s.map(((s,n)=>{if(!s.isCasting)return null;const t=s.asCasting;return[e[n][1],t.votes.map((([e])=>e)),t]})).filter((e=>!!e)),withParamsTransform:!0},d={transform:([[e],s])=>s.map(((s,n)=>s.isSome?[e[n],s.unwrap()]:null)).filter((e=>!!e)),withParamsTransform:!0},u=(0,i.e)("useAccountLocks",(function(e,s,n){var i,u,m;const{api:h}=(0,a.h)(),p=(0,t.useMemo)((()=>[n]),[n]),x=(0,o.W7)(p&&(null==(i=h.query[s])?void 0:i.classLocksFor),p,l),g=(0,t.useMemo)((()=>function(e,s){if(s)return[s.map((s=>[e,s]))]}(n,x)),[n,x]),f=(0,o.W7)(g&&(null==(u=h.query[s])?void 0:u.votingFor.multi),g,c),v=(0,t.useMemo)((()=>function(e){if(e&&e.length){const s=e.reduce(((e,[,s])=>e.concat(s)),[]);if(s.length)return[s]}}(f)),[f]),b=(0,o.W7)(v&&(null==(m=h.query[e])?void 0:m.referendumInfoFor.multi),v,d);return(0,t.useMemo)((()=>f&&b&&function(e,s,n,t){const a=e.consts[s].voteLockingPeriod,o=[];for(let e=0;e<n.length;e++){const[s,,i]=n[e];for(let e=0;e<i.votes.length;e++){const[n,l]=i.votes[e],c=t.find((([e])=>e.eq(n)));if(c){const[,e]=c;let t,i,d=0,u="None";if(l.isStandard){const{balance:s,vote:n}=l.asStandard;t=s,(e.isApproved&&n.isAye||e.isRejected&&n.isNay)&&(d=n.conviction.index,u=n.conviction.type)}else if(l.isSplit){const{aye:e,nay:s}=l.asSplit;t=e.add(s)}else if(l.isSplitAbstain){const{abstain:e,aye:s,nay:n}=l.asSplitAbstain;t=s.add(n).add(e)}else console.error(`Unable to handle ${l.type}`);e.isOngoing?i=r.Ew:e.isKilled?i=e.asKilled:e.isCancelled||e.isTimedOut?i=e.isCancelled?e.asCancelled[0]:e.asTimedOut[0]:e.isApproved||e.isRejected?i=a.muln(d).add(e.isApproved?e.asApproved[0]:e.asRejected[0]):console.error(`Unable to handle ${e.type}`),t&&i&&o.push({classId:s,endBlock:i,locked:u,refId:n,total:t})}}}return o}(h,s,f,b)),[h,s,b,f])}))},7720:(e,s,n)=>{n.d(s,{E:()=>i,Z:()=>r});var t=n(2784),a=n(89448),o=n(79386);function i(e){const[s]=(0,o.Z)(e);return(0,t.useMemo)((()=>s?s.reduce(((e,{referenda:s})=>e+(s?s.filter((({info:e})=>e.isOngoing)).length:0)),0):0),[s])}const r=(0,a.e)("useCounter",(function(){return i("referenda")}))},79386:(e,s,n)=>{n.d(s,{Z:()=>v});var t=n(2784),a=n(92529),o=n(36856),i=n(89448),r=n(57513),l=n(26238);const c={transform:e=>e.map((({args:[e]})=>e))};function d(e){const s=[],n=[];return e.forEach((({event:{data:[e],method:t}})=>{"Submitted"===t?s.push(e):n.push(e)})),{added:s,removed:n}}const u=(0,i.e)("useReferendaIds",(function(e){const{api:s}=(0,a.h)(),n=(0,r.k)(s.query[e].referendumInfoFor,[],c);return(0,l.N)([s.events[e].Submitted],d,n)}));var m=n(94087);const h=(0,i.e)("useTracks",(function(e){const{api:s}=(0,a.h)();return(0,t.useMemo)((()=>s.consts[e].tracks.map((([e,s])=>({graph:(0,m.nb)(s),id:e,info:s})))),[s,e])}));function p(e,s){return(e.info.isOngoing===s.info.isOngoing?e.info.isOngoing?function(e,s){const n=e.info.asOngoing,t=s.info.asOngoing;return n.track.cmp(t.track)||(n.deciding.isSome===t.deciding.isSome?n.deciding.isSome?e.info.asOngoing.deciding.unwrap().since.cmp(s.info.asOngoing.deciding.unwrap().since):0:n.deciding.isSome?-1:1)}(e,s):0:e.info.isOngoing?-1:1)||s.id.cmp(e.id)}function x(e,s){return e.trackId&&s.trackId?e.trackId.cmp(s.trackId):e.trackId?-1:1}const g={transform:([[e],s])=>s.map(((s,n)=>s.isSome?[e[n],s.unwrap()]:null)).filter((e=>!!e)).map((([e,s])=>({id:e,info:s,isConvictionVote:(0,m.pq)(s),key:e.toString()}))),withParamsTransform:!0};function f(e,s,n){if(!n||!s)return[{key:"empty"}];if(!e)return[{key:"referenda",referenda:n.sort(p)}];const t=[],a={key:"referenda",referenda:[]};for(let o=0;o<n.length;o++){const i=n[o],r=i.info.isOngoing?e.find((({id:e})=>e.eq(i.info.asOngoing.track))):void 0;if(r){if(i.trackGraph=r.graph,i.trackId=r.id,i.track=r.info,i.isConvictionVote&&i.info.isOngoing){const{deciding:e,tally:n}=i.info.asOngoing;if(e.isSome){const{since:t}=e.unwrap();i.decidingEnd=(0,m.z9)(s,n,r.info,t)}}const e=t.find((({track:e})=>i.track===e));e?e.referenda.push(i):t.push({key:`track:${i.trackId.toString()}`,referenda:[i],track:i.track,trackGraph:i.trackGraph,trackId:i.trackId,trackName:(0,m.tp)(i.trackId,i.track)})}else a.referenda.push(i)}(a.referenda&&0!==a.referenda.length||!t.length)&&t.push(a);for(let e=0;e<t.length;e++)t[e].referenda.sort(p);return t.sort(x)}const v=(0,i.e)("useReferenda",(function(e){const{api:s,isApiReady:n}=(0,a.h)(),i=(0,o.W7)(n&&s.query.balances.totalIssuance),r=u(e),l=h(e),c=(0,o.W7)(n&&r&&0!==r.length&&s.query[e].referendumInfoFor.multi,[r],g);return(0,t.useMemo)((()=>[r&&0===r.length?[{key:"referenda",referenda:[]}]:f(l,i,c),l]),[r,c,i,l])}))},94087:(e,s,n)=>{n.d(s,{K2:()=>h,nb:()=>b,pq:()=>x,tp:()=>m,z9:()=>v});var t=n(27264),a=n(14681),o=n(69543),i=n(33403),r=n(95292),l=n(52107),c=n(48801),d=n.n(c);const u=500;function m(e,{name:s}){return`${(0,a.u)(e)} / ${s.replace(/_/g," ").split(" ").map(o.KT).join(" ")}`}function h(e,s,n,a,o){let r;if(a&&void 0!==o&&-1!==o){const l=(0,t.Z)(e,s,n),c=a.find((({id:e})=>e.eqn(o)));if(c&&l){const e=c.info.name.toString(),s=l.find((({id:s,name:n})=>s===o&&n===e));s&&(r=(0,i.Z)({track:c,trackName:m(c.id,c.info)},s))}}return r}function p(e){return!!e.support&&!e.bareAyes}function x(e){return e.isOngoing&&p(e.asOngoing.tally)}function g(e,s,n){if(n.isZero())return r.ed;const t=s.mul(r.ed).div(n);if(e.isLinearDecreasing){const{ceil:s,floor:n,length:a}=e.asLinearDecreasing;return s.sub((0,l.N)(t,a).mul(s.sub(n)).div(a))}if(e.isSteppedDecreasing){const{begin:s,end:n,period:a,step:o}=e.asSteppedDecreasing;return(0,l.x)(n,s.sub((0,l.N)(s,o.mul(t).div(a))))}if(e.asReciprocal){const{factor:s,xOffset:n,yOffset:a}=e.asReciprocal,o=t.add(n);return o.isZero()?r.ed:(0,l.N)(r.ed,s.mul(r.ed).div(o).add(a))}throw new Error(`Unknown curve found ${e.type}`)}function f(e,s,n){try{if(n.isZero())return r.ed;const t=s.mul(r.ed).div(n);if(e.isLinearDecreasing){const{ceil:s,floor:n,length:a}=e.asLinearDecreasing;return t.lt(n)?r.ed:t.gt(s)?r.nw:(0,l.N)(r.ed,(0,l.x)(r.nw,s.sub(t).mul(a).div(s.sub(n))))}if(e.isSteppedDecreasing){const{begin:s,end:n,period:a,step:o}=e.asSteppedDecreasing;return t.lt(n)?r.ed:(0,l.N)(r.ed,(0,l.x)(r.nw,a.mul(s.sub((0,l.N)(t,s)).add(o.isZero()?o:o.sub(r.If))).div(o)))}if(e.asReciprocal){const{factor:s,xOffset:n,yOffset:a}=e.asReciprocal,o=t.sub(a);return o.isZero()?r.ed:(0,l.N)(r.ed,(0,l.x)(r.nw,s.mul(r.ed).div(o).sub(n)))}}catch(s){throw console.error(`Failed on curve ${e.type}:`,e.inner.toHuman()),s}throw new Error(`Unknown curve found ${e.type}`)}function v(e,s,{decisionPeriod:n,minApproval:t,minSupport:a},o){const i=p(s)?s.support:s.bareAyes;return o.add(n.mul((0,l.x)(f(t,s.ayes,s.ayes.add(s.nays)),f(a,i,e))).div(r.ed))}function b({decisionPeriod:e,minApproval:s,minSupport:n}){const t=new Array(u),a=new Array(u),o=new Array(u),i=e.divn(u);let r=new(d())(0);for(let l=0;l<499;l++)t[l]=g(s,r,e),a[l]=g(n,r,e),o[l]=r,r=r.add(i);return t[499]=g(s,e,e),a[499]=g(n,e,e),o[499]=e,{approval:t,support:a,x:o}}},70249:(e,s,n)=>{n.d(s,{Z:()=>S});var t=n(2784),a=n(7267),o=n(61397),i=n(54782),r=n(82740),l=n(6847),c=n(1346),d=n(52322);function u({queue:e=[]}){const s=e.filter((({error:e,result:s})=>!(0,c.o)(e)||!(0,c.o)(s))).reverse();return s.length?(0,d.jsx)(m,{className:"rpc--Results",children:s.map((({error:e,id:s,result:n,rpc:{method:t,section:a,type:i}})=>(0,d.jsx)(o.r_,{isError:!!e,label:`${s}: ${a}.${t}: ${i}`,value:e?e.message:(0,d.jsx)("pre",{children:(0,l.Z)("",n)})},s)))}):null}const m=r.ZP.section.withConfig({displayName:"Results__StyledSection",componentId:"sc-linlgm-0"})([".ui--Output > label{text-transform:none;}"]),h=t.memo(u);var p=n(13739),x=n(6046),g=n(13529),f=n(17751),v=n(61349);function b(){return(0,v.$G)("app-rpc")}const j=g.Z.author.submitExtrinsic;function y({queueRpc:e}){const{t:s}=b(),[{isValid:n,rpc:a,values:i},r]=(0,t.useState)({isValid:!1,rpc:j,values:[]}),l=(0,t.useMemo)((()=>a.params.map((({isOptional:e,name:s,type:n})=>({name:s,type:(0,x.s)(e?`Option<${n}>`:n)})))),[a]),c=(0,t.useCallback)((e=>r((s=>{const{rpc:n=s.rpc,values:t=s.values}=e,a=n.params.reduce(((e,{isOptional:s})=>e+(s?0:1)),0);return{isValid:t.reduce(((e,s)=>e&&!0===s.isValid),a<=t.length),rpc:n,values:t}}))),[]),u=(0,t.useCallback)((e=>c({rpc:e,values:[]})),[c]),m=(0,t.useCallback)((e=>c({values:e})),[c]),h=(0,t.useCallback)((()=>e({rpc:a,values:i.filter((({value:e})=>!(0,f.F)(e))).map((({value:e})=>e))})),[e,a,i]);return(0,d.jsxs)("section",{className:"rpc--Selection",children:[(0,d.jsx)(o.iQ,{defaultValue:j,label:s("call the selected endpoint"),onChange:u}),(0,d.jsx)(p.Z,{onChange:m,params:l},`${a.section}.${a.method}:params`),(0,d.jsx)(o.zx.Group,{children:(0,d.jsx)(o.zx,{icon:"sign-in-alt",isDisabled:!n,label:s("Submit RPC call"),onClick:h})})]})}const w=t.memo(y);function N(){const{queueRpc:e,txqueue:s}=(0,i.L)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(w,{queueRpc:e}),(0,d.jsx)(h,{queue:s})]})}const C=t.memo(N);function k({basePath:e}){const{t:s}=b(),n=(0,t.useRef)([{isRoot:!0,name:"rpc",text:s("Submission")}]);return(0,d.jsxs)("main",{className:"rpc--App",children:[(0,d.jsx)(o.mQ,{basePath:e,items:n.current}),(0,d.jsx)(a.rs,{children:(0,d.jsx)(a.AW,{children:(0,d.jsx)(C,{})})})]})}const S=t.memo(k)},13104:(e,s,n)=>{n.d(s,{Z:()=>y});var t=n(2784),a=n(7267),o=n(61397),i=n(92529),r=n(6847),l=n(52322);function c({results:e}){return e.length?(0,l.jsx)("section",{className:"runtime--Results",children:e.map((({def:{method:e,section:s,type:n},error:t,id:a,result:i})=>(0,l.jsx)(o.r_,{isError:!!t,label:`${a}: ${s}.${e}: ${n}`,value:t?t.message:(0,l.jsx)("pre",{children:(0,r.Z)("",i)})},a)))}):null}const d=t.memo(c);var u=n(13739),m=n(6046),h=n(61349);function p(){return(0,h.$G)("app-runtime")}function x({onSubmit:e}){const{t:s}=p(),[{isValid:n,method:a,values:i},r]=(0,t.useState)({isValid:!1,method:null,values:[]}),c=(0,t.useMemo)((()=>a?a.params.map((({name:e,type:s})=>({name:e,type:(0,m.s)(s)}))):[]),[a]),d=(0,t.useCallback)((e=>r((s=>{const{method:n=s.method,values:t=s.values}=e;return{isValid:t.reduce(((e,s)=>e&&!0===s.isValid),!!n&&n.params.length<=t.length),method:n,values:t}}))),[]),h=(0,t.useCallback)((e=>d({method:e,values:[]})),[d]),x=(0,t.useCallback)((e=>d({values:e})),[d]),g=(0,t.useCallback)((()=>{a&&e(a,i)}),[e,a,i]);return(0,l.jsxs)("section",{className:"runtime--Selection",children:[(0,l.jsx)(o.$q,{label:s("call the selected endpoint"),onChange:h}),a&&(0,l.jsx)(u.Z,{onChange:x,params:c},`${a.section}.${a.method}:params`),(0,l.jsx)(o.zx.Group,{children:(0,l.jsx)(o.zx,{icon:"sign-in-alt",isDisabled:!n||!a,label:s("Submit Runtime call"),onClick:g})})]})}const g=t.memo(x);let f=0;function v(){const{api:e}=(0,i.h)(),[s,n]=(0,t.useState)([]),a=(0,t.useCallback)((e=>n((s=>[e].concat(...s)))),[]),o=(0,t.useCallback)(((s,n)=>{e.call[s.section][s.method](...n.map((({value:e})=>e))).then((e=>a({def:s,id:++f,result:e}))).catch((e=>{a({def:s,error:e,id:++f}),console.error(e)}))}),[e,a]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g,{onSubmit:o}),(0,l.jsx)(d,{results:s})]})}const b=t.memo(v);function j({basePath:e}){const{t:s}=p(),n=(0,t.useRef)([{isRoot:!0,name:"runtime",text:s("Calls")}]);return(0,l.jsxs)("main",{className:"runtime--App",children:[(0,l.jsx)(o.mQ,{basePath:e,items:n.current}),(0,l.jsx)(a.rs,{children:(0,l.jsx)(a.AW,{children:(0,l.jsx)(b,{})})})]})}const y=t.memo(j)},59191:(e,s,n)=>{n.d(s,{Z:()=>I});var t=n(2784),a=n(61397),o=n(92529),i=n(65182),r=n(36856),l=n(94946),c=n(31992),d=n(67738),u=n(14681),m=n(52322);function h({value:{at:e,image:s,imageHash:n,index:t}}){const o=(0,i.C)();return(0,m.jsxs)("tr",{children:[(0,m.jsx)(a.iA.Column.Id,{value:t}),(0,m.jsx)(c.Z,{imageHash:n,proposal:null==s?void 0:s.proposal}),(0,m.jsx)("td",{className:"number together",children:o&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Z,{value:e.sub(o)}),"#",(0,u.u)(e)]})}),(0,m.jsx)("td",{className:"button",children:!(null!=s&&s.proposal)&&(0,m.jsx)(l.Z,{imageHash:n,isImminent:!0})}),(0,m.jsx)("td",{className:"links media--1000",children:(0,m.jsx)(a.NR,{data:t,type:"democracyReferendum"})})]})}const p=t.memo(h);var x=n(61349);function g(){return(0,x.$G)("app-scheduler")}function f({className:e}){const{t:s}=g(),{api:n}=(0,o.h)(),l=(0,i.C)(),c=(0,r.W7)(n.derive.democracy.dispatchQueue),d=(0,t.useMemo)((()=>l&&c&&c.filter((({at:e})=>e.gte(l))).sort(((e,s)=>e.at.cmp(s.at)))),[l,c]),u=(0,t.useRef)([[s("dispatch queue"),"start",2],[s("enact")],[],[void 0,"media--1000"]]);return(0,m.jsx)(a.iA,{className:e,empty:d&&s("Nothing queued for execution"),header:u.current,children:null==d?void 0:d.map((e=>(0,m.jsx)(p,{value:e},e.index.toString())))})}const v=t.memo(f);var b=n(21240),j=n(96288);function y({bestNumber:e,className:s="",value:{blockNumber:n,call:t,maybeId:o,maybePeriodic:i,preimageHash:r}}){const l=(0,j.CH)(r),c=i.unwrapOr(null),h=o.unwrapOr(null);return(0,m.jsxs)("tr",{className:s,children:[(0,m.jsx)("td",{className:"all",children:(0,m.jsx)(a.Uv,{value:t||(null==l?void 0:l.proposal)})}),h?h.isAscii?(0,m.jsx)("td",{className:"start",children:h.toUtf8()}):(0,m.jsx)(b.Z,{value:h.toHex()}):(0,m.jsx)("td",{}),(0,m.jsx)("td",{className:"number together",children:e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.Z,{value:n.sub(e)}),"#",(0,u.u)(n)]})}),(0,m.jsx)("td",{className:"number together",children:c&&(0,u.u)(c[0])}),(0,m.jsx)("td",{className:"number together",children:c&&(0,u.u)(c[1])})]})}const w=t.memo(y),N={transform:(e,s)=>e.filter((([,e])=>e.some((e=>e.isSome)))).reduce(((e,[n,t])=>{const a=n.args[0];return t.filter((e=>e.isSome)).map((e=>e.unwrap())).reduce(((e,{call:n,maybeId:t,maybePeriodic:o,priority:i},r)=>{let l,c=null;if(n.inner)if(n.isValue)c=n.asValue;else if(n.isInline)try{c=s.registry.createType("Call",n.asInline.toHex())}catch(e){console.error(e)}else n.isLookup&&(l=n);else c=n;return e.push({blockNumber:a,call:c,key:`${a.toString()}-${r}`,maybeId:t,maybePeriodic:o,preimageHash:l,priority:i}),e}),e)}),[])};function C({className:e=""}){const{t:s}=g(),{api:n}=(0,o.h)(),l=(0,i.C)(),c=(0,r.W7)(n.query.scheduler.agenda.entries,void 0,N),d=(0,t.useMemo)((()=>l&&c&&c.filter((({blockNumber:e})=>e.gte(l))).sort(((e,s)=>e.blockNumber.cmp(s.blockNumber)))),[l,c]),u=(0,t.useRef)([[s("scheduled"),"start"],[s("id"),"start"],[s("remaining")],[s("period")],[s("count")]]);return(0,m.jsx)(a.iA,{className:e,empty:d&&s("No active schedules"),header:u.current,children:null==d?void 0:d.map((e=>(0,m.jsx)(w,{bestNumber:l,value:e},e.key)))})}const k=t.memo(C);function S({basePath:e,className:s}){const{t:n}=g(),{api:i}=(0,o.h)(),r=(0,t.useMemo)((()=>[{isRoot:!0,name:"overview",text:n("Overview")}]),[n]);return(0,m.jsxs)("main",{className:s,children:[(0,m.jsx)(a.mQ,{basePath:e,items:r}),i.query.democracy&&(0,m.jsx)(v,{}),i.query.scheduler&&(0,m.jsx)(k,{})]})}const I=t.memo(S)},50264:(e,s,n)=>{n.d(s,{Z:()=>be});var t=n(2784),a=n(7267),o=n(61397),i=n(92529),r=n(61349),l=n(23729),c=n.n(l),d=n(82740),u=n(58321),m=n(56623),h=n(43357),p=n(64021);function x(){return(0,r.$G)("app-settings")}var g=n(52322);const f="{\n\n}",v={};function b({className:e="",onStatusChange:s}){const{t:n}=x(),{api:a}=(0,i.h)(),[l,d]=(0,t.useState)(f),[b,y]=(0,t.useState)(!0),[w,N]=(0,t.useState)(!0),[C,k]=(0,t.useState)(v),[S,I]=(0,t.useState)(null),[A,P]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=(0,u.decodeUrlTypes)()||c().get("types")||{};Object.keys(e).length&&(d(JSON.stringify(e,null,2)),k({}),I(Object.keys(e).join(", ")),P((0,u.encodeUrlTypes)(e)))}),[]);const M=(0,t.useCallback)((({code:e,isJsonValid:s,isTypesValid:n,types:t,typesPlaceholder:a})=>{d(e),y(s),N(n),k(t),I(a)}),[]),D=(0,t.useCallback)((()=>{c().remove("types"),M({code:f,isJsonValid:!0,isTypesValid:!0,types:v,typesPlaceholder:null})}),[M]),T=(0,t.useCallback)((e=>{const s=(0,m.z)(e);try{const e=JSON.parse(s),n=Object.keys(e).join(", ");console.log("Detected types:",n),M({code:s,isJsonValid:!0,isTypesValid:!0,types:0===Object.keys(e).length?{}:e,typesPlaceholder:n})}catch(e){console.error("Error registering types:",e),M({code:s,isJsonValid:!1,isTypesValid:!1,types:{},typesPlaceholder:e.message})}}),[M]),E=(0,t.useCallback)((e=>{try{if(!(0,h.b)(e))throw Error("This is not a valid JSON object.");T((0,p.d)(e))}catch(s){d(e),y(!1),I(s.message)}}),[T]),q=(0,t.useCallback)((()=>{let e=null;try{a.registerTypes(C),c().set("types",C),N(!0),s({action:n("Your custom types have been added"),status:"success"}),Object.keys(C).length&&(e=(0,u.encodeUrlTypes)(C),console.log(e))}catch(e){console.error(e),N(!1),s({action:n(`Error saving your custom types. ${e.message}`),status:"error"})}P(e)}),[a,s,n,C]),_=0===Object.keys(C).length;return(0,g.jsxs)(j,{className:e,children:[(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)("div",{className:"full",children:(0,g.jsx)(o.ht,{clearContent:_&&w,isError:!w,label:n("Additional types as a JSON file (or edit below)"),onChange:T,placeholder:S})})}),(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)("div",{className:"full",children:(0,g.jsx)(o.ML,{className:"editor",code:l,isValid:b,onEdit:E})})}),(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)("div",{className:"full",children:(0,g.jsx)(r.cC,{i18nKey:"devConfig",children:(0,g.jsxs)("div",{className:"help",children:["If you are a development team with at least a test network available, consider adding the types directly ",(0,g.jsx)("a",{href:"https://github.com/polkadot-js/apps/tree/master/packages/apps-config",rel:"noopener noreferrer",target:"_blank",children:"to the apps-config"}),", allowing out of the box operation for your spec & chains, both for you and anybody trying to connect to it. This is not a replacement for your chain-specific UI, however doing so does help in allowing users to easily discover and use with zero-config."]})})})}),(0,g.jsxs)(o.zx.Group,{children:[(0,g.jsx)(o.qi,{label:n("Share"),type:n("url"),value:A}),(0,g.jsx)(o.zx,{icon:"sync",label:n("Reset"),onClick:D}),(0,g.jsx)(o.zx,{icon:"save",isDisabled:!w||!b,label:n("Save"),onClick:q})]})]})}const j=d.ZP.div.withConfig({displayName:"Developer__StyledDiv",componentId:"sc-1t8dyqp-0"})([".editor{height:21rem;margin-left:2rem;position:relative;}.help{padding:0.5rem 2rem;}"]),y=t.memo(b);var w=n(60438),N=n(29686),C=n(72570),k=n(3679),S=n(37095),I=n(16039),A=n(30377);const P=I.X.availableLedgerConn;function M({className:e=""}){const{t:s}=x(),{chainSS58:n,isApiReady:a,isElectron:r}=(0,i.h)(),{isIpfs:l}=(0,k.g)(),{hasLedgerChain:c,hasWebUsb:d}=(0,S.c)(),[u,m]=(0,t.useState)(null),[h,p]=(0,t.useState)((()=>{const e=I.X.get();return{...e,uiTheme:"dark"===e.uiTheme?"dark":"light"}})),f=(0,t.useMemo)((()=>P.filter((({value:e})=>!r||"webusb"!==e))),[r]),v=(0,t.useMemo)((()=>I.X.availableIcons.map((e=>(0,A.tI)(e,["default"]))).concat((0,A.tI)({info:"robohash",text:"RoboHash",value:"robohash"}))),[]),b=(0,t.useMemo)((()=>{const e=C.FA.find((({prefix:e})=>e===n));return(0,w.M)(s).map((s=>(0,A.SX)(s,["default"],"empty",-1===s.value?a?e?` (${e.displayName}, ${n||0})`:` (${n||0})`:void 0:` (${s.value})`)))}),[n,a,s]),j=(0,t.useMemo)((()=>[{text:s("Allow local in-browser account storage"),value:"on"},{text:s("Do not allow local in-browser account storage"),value:"off"}]),[s]),y=(0,t.useMemo)((()=>[{text:s("Light theme"),value:"light"},{text:s("Dark theme"),value:"dark"}]),[s]),M=(0,t.useMemo)((()=>(0,N.L)(s)),[s]);(0,t.useEffect)((()=>{const e=I.X.get(),s=Object.entries(h).some((([s,n])=>e[s]!==n)),n=e.apiUrl!==h.apiUrl||e.prefix!==h.prefix;m(s?n:null)}),[h]);const D=(0,t.useCallback)((e=>s=>p((n=>({...n,[e]:s})))),[]),T=(0,t.useCallback)((()=>(0,A.wg)(h)),[h]),E=(0,t.useCallback)((()=>{(0,A.a1)(h),m(null)}),[h]);return(0,g.jsxs)("div",{className:e,children:[(0,g.jsx)("h1",{children:s("UI options")}),(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Lt,{defaultValue:h.icon,label:s("default icon theme"),onChange:D("icon"),options:v})}),(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Lt,{defaultValue:h.uiTheme,label:s("default interface theme"),onChange:D("uiTheme"),options:y})}),(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Lt,{defaultValue:h.i18nLang,label:s("default interface language"),onChange:D("i18nLang"),options:M})}),(0,g.jsx)("h1",{children:s("account options")}),(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Lt,{defaultValue:h.prefix,label:s("address prefix"),onChange:D("prefix"),options:b})}),!l&&!r&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Lt,{defaultValue:h.storage,label:s("in-browser account creation"),onChange:D("storage"),options:j})}),"on"===h.storage&&(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Pd,{content:s("It is recommended that you store all keys externally to the in-page browser local storage, either on browser extensions, signers operating via QR codes or hardware devices. This option is provided for advanced users with strong backup policies.")})})]}),c&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Lt,{defaultValue:d?h.ledgerConn:f[0].value,isDisabled:!d,label:s("manage hardware connections"),onChange:D("ledgerConn"),options:f})}),d?"none"!==h.ledgerConn?(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Pd,{content:s("Ledger support is still experimental and some issues may remain. Trust, but verify the addresses on your devices before transferring large amounts. There are some features that will not work, including batch calls (used extensively in staking and democracy) as well as any identity operations.")})}):null:(0,g.jsx)("div",{className:"ui--row",children:(0,g.jsx)(o.Pd,{content:s("Ledger hardware device support is only available on Chromium-based browsers where WebUSB and WebHID support is available in the browser.")})})]}),(0,g.jsx)(o.zx.Group,{children:(0,g.jsx)(o.zx,{icon:"save",isDisabled:null===u,label:s(u?"Save & Reload":"Save"),onClick:u?T:E})})]})}const D=t.memo(M);var T=n(46782),E=n.n(T),q=n(49668),_=n(81204),$=n(7840);function F({className:e="",onChange:s,original:n,tkey:a,tval:i}){const r=(0,t.useCallback)((e=>s(a,e)),[s,a]);return(0,g.jsxs)(O,{className:e,children:[(0,g.jsx)("div",{className:"label",children:n}),(0,g.jsx)(o.II,{onChange:r,value:i,withLabel:!1})]})}const O=d.ZP.div.withConfig({displayName:"StringInput__StyledDiv",componentId:"sc-3uuolk-0"})([".label{font-style:italic;margin-top:0.5rem;+div{margin-left:1rem;}}"]),V=t.memo(F),R=new Map;async function Z(e){if(R.has(e))return R.get(e);const s=await fetch(`locales/${e}`).then((e=>e.json())).catch((e=>console.error(e)));return R.set(e,s),s||{}}function B(e,s){const n={};let t=0,a=0;return Object.keys(e).forEach((o=>{const i=e[o],r=Object.keys(i).length;let l=0;Object.keys(i).forEach((e=>{s[e]&&l++})),t+=l,a+=r,n[o]=[l,r,0]})),[[t,a,0],n]}function L([e,s,n]=[0,0,0]){return{done:e,progress:(s?100*e/s:100).toFixed(2),total:s}}function H({className:e}){var s,n;const{t:a}=x(),[i,r]=(0,$.O)(),[{english:l,keys:c,modules:d},u]=(0,t.useState)({english:{},keys:[],modules:[]}),[m,h]=(0,t.useState)("zh"),[[p,f],v]=(0,t.useState)([[0,0,0],{}]),[b,j]=(0,t.useState)("app-accounts.json"),[y,w]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async function(){const e=(await Z("index.json")).filter((e=>"en"!==e)),s=e.filter((e=>!_.Z[e])),n=await async function(){const e=await Z("en/index.json");return(await Promise.all(e.map((e=>Z(`en/${e}`))))).reduce(((s,n,t)=>(s[e[t]]=n,s)),{})}(),t=s.length?await Promise.all(s.map((e=>Z(`${e}/translation.json`)))):[];return s.forEach(((e,s)=>{_.Z[e]=t[s]})),e.forEach((e=>{Object.keys(n).forEach((s=>{Object.keys(n[s]).forEach((s=>{_.Z[e][s]||(_.Z[e][s]="")}))}))})),{english:n,keys:e.map((e=>({text:e,value:e}))),modules:Object.keys(n).map((e=>({text:e.replace(".json","").replace("app-","page-"),value:e}))).sort(((e,s)=>e.text.localeCompare(s.text)))}})().then(u).catch(console.error)}),[]),(0,t.useEffect)((()=>{w(_.Z[m]),v(B(l,_.Z[m]))}),[l,m]),(0,t.useEffect)((()=>{h(c.some((({value:e})=>e===I.X.i18nLang))?I.X.i18nLang:"zh")}),[c]);const N=(0,t.useCallback)(((e,s)=>{w((n=>n?{...n,[e]:s}:null));const n=!!_.Z[m][e],t=s.trim();if(_.Z[m][e]=s,n!==!!t){const[e,s]=B(l,_.Z[m]);v((([n])=>(e[2]=Math.max(0,e[0]-n[0]),[e,s])))}}),[l,m]),C=(0,t.useCallback)((()=>{q.Z.reloadResources().catch(console.error)}),[]),k=(0,t.useCallback)((()=>function(e,s){const n=Object.keys(e).sort().reduce(((n,t)=>{const a=e[t].trim();return(a||s)&&(n[t]=a),n}),{});E().saveAs(new Blob([JSON.stringify(n,null,2)],{type:"application/json; charset=utf-8"}),"translation.json")}(y||{},i)),[y,i]);return c.length?(0,g.jsxs)(W,{className:e,children:[(0,g.jsx)("header",{children:(0,g.jsxs)(o.P0,{children:[(0,g.jsxs)(o.P0.Column,{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(o.Lt,{isFull:!0,label:a("the language to display translations for"),onChange:h,options:c,value:m}),a("{{done}}/{{total}}, {{progress}}% done",{replace:L(p)})]}),(0,g.jsx)(o.Ex,{total:p[1],value:p[0]})]}),(0,g.jsxs)(o.P0.Column,{children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(o.Lt,{isFull:!0,label:a("the module to display strings for"),onChange:j,options:d,value:b}),a("{{done}}/{{total}}, {{progress}}% done",{replace:L(f[b])})]}),(0,g.jsx)(o.Ex,{total:null==(s=f[b])?void 0:s[1],value:null==(n=f[b])?void 0:n[0]})]})]})}),(0,g.jsx)("div",{className:"toggleWrapper",children:(0,g.jsx)(o.ZD,{label:a(i?"include all empty strings in the generated file":"do not include empty strings in the generated file"),onChange:r,value:i})}),(0,g.jsxs)(o.zx.Group,{children:[(0,g.jsx)(o.zx,{icon:"sync",label:a("Apply to UI"),onClick:C}),(0,g.jsx)(o.zx,{icon:"download",label:a("Generate {{lng}}/translation.json",{replace:{lng:m}}),onClick:k})]}),b&&y&&Object.keys(l[b]).map(((e,s)=>(0,g.jsx)(V,{onChange:N,original:l[b][e],tkey:e,tval:y[e]},s)))]}):(0,g.jsx)(o.$j,{})}const W=d.ZP.main.withConfig({displayName:"I18n__StyledMain",componentId:"sc-12pk29q-0"})([".ui--Column{display:flex;> div:first-child{flex:1;text-align:right;}}.ui--Progress{margin:0 0 0 0.25rem;}.toggleWrapper{display:flex;justify-content:flex-end;margin-top:0.75rem;}"]),z=t.memo(H);var U=n(10371),J=n(9921),G=n(89448),Q=n(91783),X=n(65968),K=n(92730),Y=n(41444);const ee=(0,G.e)("useChainInfo",(function(){const{api:e,apiEndpoint:s,isApiReady:n,isEthereum:a,specName:o,systemChain:r,systemName:l}=(0,i.h)();return(0,t.useMemo)((()=>n?{chain:r,chainType:a?"ethereum":"substrate",color:null==s?void 0:s.ui.color,genesisHash:e.genesisHash.toHex(),icon:(0,U.t)(l,o),metaCalls:(0,Y.h$)(e.runtimeMetadata.asCallsOnly.toU8a()),specVersion:e.runtimeVersion.specVersion.toNumber(),ss58Format:(0,X.h)(e.registry.chainSS58)?e.registry.chainSS58:J.DEFAULT_SS58.toNumber(),tokenDecimals:(e.registry.chainDecimals||[J.DEFAULT_DECIMALS.toNumber()])[0],tokenSymbol:(e.registry.chainTokens||K.a.getDefaults().unit)[0],types:(0,Q.kh)(e.registry,r,e.runtimeVersion.specName,e.runtimeVersion.specVersion)}:null),[e,s,n,o,r,l,a])}));var se=n(54525),ne=n(32136),te=n(77194);function ae({chainInfo:e,className:s}){const{t:n}=x(),{extensions:a}=(0,te.Z)(),[i,r]=(0,t.useState)(0),[l,c]=(0,$.O)(),d=(0,t.useMemo)((()=>(a||[]).map((({extension:{name:e,version:s}},n)=>{var t;return function(e,s,n){return{text:(0,g.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,g.jsx)("img",{alt:e,className:"ui--Dropdown-icon",src:n}),(0,g.jsx)("div",{className:"ui--Dropdown-name",children:e})]},s),value:s}}(`${e} ${s}`,n,(null==(t=se.J[e])?void 0:t.ui.logo)||ne.h)}))),[a]),u=(0,t.useCallback)((()=>{e&&null!=a&&a[i]&&(c(),a[i].update(e).catch((()=>!1)).then((()=>c())).catch(console.error))}),[e,a,i,c]),m=(0,t.useRef)([[n("Extensions"),"start"]]);return(0,g.jsx)(oe,{className:s,empty:n("No Upgradable extensions"),header:m.current,children:a?0!==d.length&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("tr",{className:"isExpanded isFirst",children:(0,g.jsx)("td",{children:(0,g.jsx)(o.Lt,{label:n("upgradable extensions"),onChange:r,options:d,value:i})})}),(0,g.jsx)("tr",{className:"isExpanded isLast",children:(0,g.jsx)("td",{children:(0,g.jsx)(o.zx.Group,{children:(0,g.jsx)(o.zx,{icon:"upload",isDisabled:l,label:n("Update metadata"),onClick:u})})})})]}):(0,g.jsx)(o.$j,{})})}const oe=(0,d.ZP)(o.iA).withConfig({displayName:"Extensions__StyledTable",componentId:"sc-1qpf4f5-0"})(["table{overflow:visible;}"]),ie=t.memo(ae);var re=n(53964);function le({className:e,color:s}){return(0,g.jsx)(ce,{className:e,color:s})}const ce=d.ZP.div.withConfig({displayName:"ChainColorIndicator__StyledDiv",componentId:"sc-10nxxpm-0"})((({color:e})=>`\n  background-color: ${e} !important;\n  width: 100px;\n  flex: 1;\n  border-radius: 4px;\n`)),de=t.memo(le);function ue(){let e="#";for(let s=0;s<6;s++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}const me={chainType:"substrate",color:"#FFFFFF",decimals:0,genesisHash:"",prefix:0,title:"",unit:"UNIT"};function he({chainInfo:e,className:s}){const{t:n}=x(),{isApiReady:a,systemChain:r}=(0,i.h)(),[l,c]=(0,t.useState)(me),d=(0,re.N)(l,500),[u,m]=(0,t.useReducer)(((e,s)=>{const n={...e,...s};return c(n),n}),me);(0,t.useEffect)((()=>{e&&m({chainType:e.chainType,color:e.color||ue(),decimals:e.tokenDecimals,genesisHash:e.genesisHash,prefix:e.ss58Format,title:r,unit:e.tokenSymbol})}),[e,r]);const h=(0,t.useCallback)((e=>m({color:e})),[]),p=(0,t.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),m({color:ue()})}),[]),f=(0,t.useCallback)((()=>/^#[\da-fA-F]{6}|#[\da-fA-F]{3}$/.test(u.color)),[u]),v=(0,t.useRef)([[n("chain specifications"),"start",2]]);return a?(0,g.jsxs)(pe,{className:s,empty:n("No open tips"),header:v.current,children:[(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:(0,g.jsxs)("div",{className:"settings--networkSpecs-name",children:[(0,g.jsx)(o.II,{className:"full",isDisabled:!0,label:n("Network Name"),value:u.title}),(0,g.jsx)(o.Mj,{className:"settings--networkSpecs-logo"})]})}),(0,g.jsx)("td",{rowSpan:7,children:l.genesisHash&&(0,g.jsx)(o.K0,{className:"settings--networkSpecs-qr",networkSpecs:d})})]}),(0,g.jsx)("tr",{children:(0,g.jsx)("td",{children:(0,g.jsxs)("div",{className:"settings--networkSpecs-color",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)(o.II,{className:"full settings--networkSpecs-colorInput",isError:!f(),label:n("Color"),onChange:h,value:u.color}),(0,g.jsx)("a",{className:"settings--networkSpecs-colorChangeButton",onClick:p,children:n("generate random color")})]}),(0,g.jsx)(de,{className:"settings--networkSpecs-colorBar",color:u.color})]})})}),(0,g.jsx)("tr",{children:(0,g.jsx)("td",{children:(0,g.jsx)(o.II,{className:"full",isDisabled:!0,label:n("Genesis Hash"),value:u.genesisHash})})}),(0,g.jsx)("tr",{children:(0,g.jsx)("td",{children:(0,g.jsx)(o.II,{className:"full",isDisabled:!0,label:n("Unit"),value:u.unit})})}),(0,g.jsx)("tr",{children:(0,g.jsx)("td",{children:(0,g.jsx)(o.II,{className:"full",isDisabled:!0,label:n("Address Prefix"),value:u.prefix.toString()})})}),(0,g.jsx)("tr",{children:(0,g.jsx)("td",{children:(0,g.jsx)(o.II,{className:"full",isDisabled:!0,label:n("Decimals"),value:u.decimals.toString()})})}),(0,g.jsx)("tr",{children:(0,g.jsx)("td",{children:(0,g.jsx)(o.II,{className:"full",isDisabled:!0,label:n("Chain Type"),value:u.chainType})})})]}):(0,g.jsx)(o.$j,{})}const pe=(0,d.ZP)(o.iA).withConfig({displayName:"NetworkSpecs__StyledTable",componentId:"sc-15d71sp-0"})(["td{padding:0;.input.ui--Input input{border:none !important;background:transparent;}}.settings--networkSpecs-name{position:relative;.settings--networkSpecs-logo{height:32px;left:12px;position:absolute;top:1rem;width:32px;}}.settings--networkSpecs-color{position:relative;> div:first-child{display:flex;.settings--networkSpecs-colorInput{min-width:124px;}.settings--networkSpecs-colorChangeButton{user-select:none;cursor:pointer;background:transparent;border:none;outline:none;align-self:flex-end;padding-bottom:0.9rem;}}.settings--networkSpecs-colorBar{border-radius:50%;border:1px solid grey;height:32px;left:12px;position:absolute;top:1rem;width:32px;}}.settings--networkSpecs-qr{margin:0.25rem auto;max-width:15rem;img{border:1px solid white;}}"]),xe=t.memo(he);function ge(){const{isDevelopment:e}=(0,i.h)(),s=ee();return(0,g.jsxs)(g.Fragment,{children:[!e&&(0,g.jsx)(ie,{chainInfo:s}),(0,g.jsx)(xe,{chainInfo:s})]})}var fe=n(35365);function ve({basePath:e,onStatusChange:s}){const{t:n}=x(),{api:r,isApiConnected:l,isApiReady:c,isDevelopment:d}=(0,i.h)(),u=(0,fe.Z)(),m=(0,t.useMemo)((()=>[{isRoot:!0,name:"general",text:n("General")},{count:u,name:"metadata",text:n("Metadata")},{name:"developer",text:n("Developer")},{name:"i18n",text:n("Translate")}]),[u,n]),h=(0,t.useMemo)((()=>l&&c?d||r.runtimeMetadata.version<=13?[]:["developer"]:["metadata","i18n"]),[r,l,c,d]);return(0,g.jsxs)("main",{className:"settings--App",children:[(0,g.jsx)(o.mQ,{basePath:e,hidden:h,items:m}),(0,g.jsxs)(a.rs,{children:[(0,g.jsx)(a.AW,{path:`${e}/developer`,children:(0,g.jsx)(y,{onStatusChange:s})}),(0,g.jsx)(a.AW,{path:`${e}/i18n`,children:(0,g.jsx)(z,{})}),(0,g.jsx)(a.AW,{path:`${e}/metadata`,children:(0,g.jsx)(ge,{})}),(0,g.jsx)(a.AW,{children:(0,g.jsx)(D,{})})]})]})}const be=t.memo(ve)},35365:(e,s,n)=>{n.d(s,{Z:()=>o});var t=n(89448),a=n(77194);const o=(0,t.e)("useCounter",(function(){const{count:e}=(0,a.Z)();return e}))},77194:(e,s,n)=>{n.d(s,{Z:()=>m});var t=n(2784),a=n(23729),o=n.n(a),i=n(92529),r=n(89448);let l=0;const c=new Map;function d(e,{name:s,version:n}){const t=`properties:${e.genesisHash.toHex()}`,a=o().get(t,{});a[s]={extensionVersion:n,ss58Format:e.registry.chainSS58,tokenDecimals:e.registry.chainDecimals[0],tokenSymbol:e.registry.chainTokens[0]},o().set(t,a)}const u={count:0,extensions:[]},m=(0,r.e)("useExtensions",(function(){const{api:e,extensions:s,isApiReady:n,isDevelopment:a}=(0,i.h)(),[r,m]=(0,t.useState)(),[h,p]=(0,t.useState)(0);return(0,t.useEffect)((()=>{const e=`${++l}-${Date.now()}`;return c.set(e,p),()=>{c.delete(e)}}),[]),(0,t.useEffect)((()=>{s&&async function(e,s,n){return(await Promise.all(s.map((s=>async function(e,s){if(!s.metadata)return null;try{const n=s.metadata,t=await n.get();return{extension:s,known:t,update:async t=>{let a=!1;try{a=await n.provide(t),a&&(d(e,s),[...c.values()].forEach((e=>e(Date.now()))))}catch(e){}return a}}}catch(e){return null}}(e,s))))).filter((e=>!!e))}(e,s).then(m).catch(console.error)}),[e,s,h]),(0,t.useMemo)((()=>!a&&n&&r?function(e,s){const n=s.map((s=>{const n=s.known.find((({genesisHash:s})=>e.genesisHash.eq(s)))||null;return n&&!e.runtimeVersion.specVersion.gtn(n.specVersion)&&function(e,{extension:s}){const n=o().get(`properties:${e.genesisHash.toHex()}`,{});if(!n[s.name])return d(e,s),!0;const{ss58Format:t,tokenDecimals:a,tokenSymbol:i}=n[s.name];return t===e.registry.chainSS58&&a===e.registry.chainDecimals[0]&&i===e.registry.chainTokens[0]}(e,s)?null:{...s,current:n}})).filter((e=>!!e));return{count:n.length,extensions:n}}(e,r):u),[r,e,n,a])}))},30377:(e,s,n)=>{n.d(s,{SX:()=>i,a1:()=>l,tI:()=>r,wg:()=>c}),n(2784);var t=n(61397),a=n(16039),o=n(52322);function i({info:e,isHeader:s,text:n,value:a},i=[],r="empty",l){return s?(0,o.jsx)(t.Lt.Header,{content:n},n):{text:(0,o.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,o.jsx)(t.Mj,{className:"ui--Dropdown-icon",logo:e&&i.includes(e)?r:e}),(0,o.jsxs)("div",{className:"ui--Dropdown-name",children:[n,l]})]},a),value:a}}function r({info:e,text:s,value:n},a=[],i="empty"){const r=e&&a.includes(e)?i:e;return{text:(0,o.jsxs)("div",{className:"ui--Dropdown-item",children:["empty"===r?(0,o.jsx)(t.Mj,{className:"ui--Dropdown-icon",logo:"empty"}):(0,o.jsx)(t.k,{className:"ui--Dropdown-icon",size:32,theme:r,value:"5F9999K9UgTUgSsbXZQcEmRMvQqwJoBUHMv9e1k2MdgghuRA"}),(0,o.jsx)("div",{className:"ui--Dropdown-name",children:s})]},n),value:n}}function l(e){a.X.set(e)}function c(e){l(e),window.location.reload()}},87143:(e,s,n)=>{n.d(s,{Z:()=>M});var t=n(2784),a=n(7267),o=n(61397),i=n(82740),r=n(345),l=n(7840),c=n(69187),d=n(33661),u=n(74076),m=n(52256),h=n(55858),p=n(61349);function x(){return(0,p.$G)("app-signing")}var g=n(17965),f=n(52322);function v({onClose:e,onUnlock:s,pair:n}){const{t:a}=x(),[i,r]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(null);(0,t.useEffect)((()=>{c((null==n?void 0:n.address)||"")}),[n]),(0,t.useEffect)((()=>{h(null)}),[d]);const p=(0,t.useCallback)((()=>{n&&n.isLocked&&(r(!0),(0,g.Y)((()=>{try{n.decodePkcs8(d)}catch(e){return r(!1),h(e.message)}r(!1),s()})))}),[s,n,d]);return n?(0,f.jsxs)(o.u_,{className:"toolbox--Unlock",header:a("Unlock account"),onClose:e,size:"large",children:[(0,f.jsxs)(o.u_.Content,{children:[(0,f.jsx)(o.u_.Columns,{hint:a("This account that will perform the message signing."),children:(0,f.jsx)(o.rp,{isDisabled:!0,label:a("account"),value:l})}),(0,f.jsx)(o.u_.Columns,{hint:a("Unlock the account for signing. Once active the signature will be generated based on the content provided."),children:(0,f.jsx)(o.ro,{autoFocus:!0,isError:!!m,label:a("password"),onChange:u,onEnter:p,value:d})})]}),(0,f.jsx)(o.u_.Actions,{children:(0,f.jsx)(o.zx,{icon:"unlock",isBusy:i,label:a("Unlock"),onClick:p})})]}):null}const b=t.memo(v);function j({className:e=""}){const{t:s}=x(),[n,a]=(0,t.useState)((()=>c.Nn.getPairs()[0]||null)),[{data:i,isHexData:p},g]=(0,t.useState)({data:"",isHexData:!1}),[{isInjected:v},j]=(0,t.useState)({isExternal:!1,isHardware:!1,isInjected:!1}),[w,N]=(0,t.useState)(!1),[{isUsable:C,signer:k},S]=(0,t.useState)({isUsable:!0,signer:null}),[I,A]=(0,t.useState)(""),[P,M]=(0,l.O)();(0,t.useEffect)((()=>{const e=n&&n.meta||{},s=e.isExternal||!1,t=e.isHardware||!1,a=e.isInjected||!1,o=!(s||t||a);j({isExternal:s,isHardware:t,isInjected:a}),N(!a&&(n&&n.isLocked||!1)),A(""),S({isUsable:o,signer:null}),e.source&&a&&(0,r.R0)(e.source).catch((()=>null)).then((e=>{var s;return S({isUsable:(0,d.m)(null==e||null==(s=e.signer)?void 0:s.signRaw),signer:(null==e?void 0:e.signer)||null})})).catch(console.error)}),[n]);const D=(0,t.useCallback)((e=>e&&a(c.Nn.getPair(e))),[]),T=(0,t.useCallback)((e=>g({data:e,isHexData:(0,u.vq)(e)})),[]),E=(0,t.useCallback)((()=>{if(w||!C||!n)return;const e=(0,m.Rl)(i);k&&(0,d.m)(k.signRaw)?(A(""),k.signRaw({address:n.address,data:(0,h.c)(e),type:"bytes"}).then((({signature:e})=>A(e))).catch(console.error)):A((0,h.c)(n.sign(e)))}),[n,i,w,C,k]),q=(0,t.useCallback)((()=>{N(!1),M()}),[M]);return(0,f.jsxs)(y,{className:`${e} toolbox--Sign`,children:[(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.rp,{className:"full",isInput:!1,label:s("account"),onChange:D,type:"account"})}),(0,f.jsxs)("div",{className:"toolbox--Sign-input",children:[(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.II,{autoFocus:!0,className:"full",label:s("sign the following data"),onChange:T,value:i})}),(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.qG,{className:"medium",label:s("hex input data"),value:s(p?"Yes":"No")})}),(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.r_,{className:"full",isHidden:0===I.length,isMonospace:!0,label:s("signature of supplied data"),value:I,withCopy:!0})}),(0,f.jsx)("div",{className:"unlock-overlay",hidden:!C||!w||v,children:w&&(0,f.jsx)("div",{className:"unlock-overlay-warning",children:(0,f.jsxs)("div",{className:"unlock-overlay-content",children:[s("You need to unlock this account to be able to sign data."),(0,f.jsx)("br",{}),(0,f.jsx)(o.zx.Group,{children:(0,f.jsx)(o.zx,{icon:"unlock",label:s("Unlock account"),onClick:M})})]})})}),(0,f.jsx)("div",{className:"unlock-overlay",hidden:C,children:(0,f.jsx)("div",{className:"unlock-overlay-warning",children:(0,f.jsx)("div",{className:"unlock-overlay-content",children:s(v?"This injected account cannot be used to sign data since the extension does not support raw signing.":"This external account cannot be used to sign data. Only Limited support is currently available for signing from any non-internal accounts.")})})}),P&&(0,f.jsx)(b,{onClose:M,onUnlock:q,pair:n})]}),(0,f.jsx)(o.zx.Group,{children:(0,f.jsx)(o.zx,{icon:"key",isDisabled:!(C&&!w),label:s("Sign message"),onClick:E})})]})}const y=i.ZP.div.withConfig({displayName:"Sign__StyledDiv",componentId:"sc-fzot15-0"})([".toolbox--Sign-input{position:relative;width:100%;height:100%;.unlock-overlay{position:absolute;width:100%;height:100%;top:0;left:0;background-color:#0f0e0e7a;}.unlock-overlay-warning{display:flex;align-items:center;justify-content:center;height:100%;}.unlock-overlay-content{color:#fff;padding:0 2.5rem;text-align:center;.ui--Button-Group{text-align:center;}}}"]),w=t.memo(j);var N=n(92529),C=n(16039),k=n(53501);function S({className:e=""}){const{t:s}=x(),{isEthereum:n}=(0,N.h)(),[{cryptoType:a,isValid:i},r]=(0,t.useState)({cryptoType:"unknown",isValid:!1}),[{data:l,isHexData:d},m]=(0,t.useState)({data:"",isHexData:!1}),[{isValidPk:h,publicKey:p},g]=(0,t.useState)({isValidPk:!1,publicKey:null}),[{isValidSignature:v,signature:b},j]=(0,t.useState)({isValidSignature:!1,signature:""}),[y]=(0,t.useState)([{text:s("Crypto not detected"),value:"unknown"}].concat(C.X.availableCryptos));(0,t.useEffect)((()=>{let e="unknown",s=h&&v;if(s&&p){const n=(0,k.D)(l,b,p);"none"!==n.crypto?(e=n.crypto,s=n.isValid):s=!1}r({cryptoType:e,isValid:s})}),[l,h,v,p,b]);const w=(0,t.useCallback)((e=>{let s=null;try{s=c.Nn.decodeAddress(e||"")}catch(e){console.error(e)}g({isValidPk:!!s&&(32===s.length||n&&20===s.length),publicKey:s})}),[n]),S=(0,t.useCallback)((e=>m({data:e,isHexData:(0,u.vq)(e)})),[]),A=(0,t.useCallback)((e=>j({isValidSignature:(0,u.vq)(e)&&(130===e.length||n&&132===e.length),signature:e})),[n]);return(0,f.jsxs)(I,{className:`${e} toolbox--Verify`,children:[(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.rp,{className:"full",isError:!h,isInput:!0,label:s("verify using address"),onChange:w})}),(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.II,{autoFocus:!0,className:"full",label:s("using the following data"),onChange:S,value:l})}),(0,f.jsxs)("div",{className:"ui--row",children:[(0,f.jsx)("div",{className:"ui--AlignedIconContainer",children:(0,f.jsx)(o.Ct,{className:"alignedBadge",color:i?"green":v?"red":"gray",icon:i?"check":v?"exclamation":"question"})}),(0,f.jsx)(o.II,{className:"full",isError:!v,label:s("the supplied signature"),onChange:A,value:b})]}),(0,f.jsxs)("div",{className:"ui--row",children:[(0,f.jsx)(o.Lt,{defaultValue:a,isDisabled:!0,label:s("signature crypto type"),options:y}),(0,f.jsx)(o.qG,{className:"medium",label:s("hex input data"),value:s(d?"Yes":"No")})]})]})}const I=i.ZP.div.withConfig({displayName:"Verify__StyledDiv",componentId:"sc-1cxq4qz-0"})([".ui--AlignedIconContainer{position:absolute;z-index:1;}.alignedBadge{left:1.25rem;position:relative;top:1.25rem;}"]),A=t.memo(S);function P({basePath:e}){const{t:s}=x(),n=(0,t.useRef)([{isRoot:!0,name:"sign",text:s("Sign message")},{name:"verify",text:s("Verify signature")}]);return(0,f.jsxs)("main",{className:"toolbox--App",children:[(0,f.jsx)(o.mQ,{basePath:e,items:n.current}),(0,f.jsxs)(a.rs,{children:[(0,f.jsx)(a.AW,{path:`${e}/verify`,children:(0,f.jsx)(A,{})}),(0,f.jsx)(a.AW,{children:(0,f.jsx)(w,{})})]})]})}const M=t.memo(P)},64624:(e,s,n)=>{n.d(s,{Z:()=>Pe});var t=n(2784),a=n(7267),o=n(61397),i=n(92529),r=n(36856),l=n(48801),c=n.n(l),d=n(95292),u=n(7840),m=n(61349);function h(){return(0,m.$G)("app-society")}var p=n(52322);function x({onClose:e}){const{t:s}=h(),{api:n}=(0,i.h)(),[a,r]=(0,t.useState)(),[l,c]=(0,t.useState)();return(0,p.jsxs)(o.u_,{header:s("Bid to join"),onClose:e,size:"large",children:[(0,p.jsxs)(o.u_.Content,{children:[(0,p.jsx)(o.u_.Columns,{hint:s("Your candidate/bid account. Once accepted this account will become a member."),children:(0,p.jsx)(o.rp,{label:s("bid account"),onChange:c,type:"account"})}),(0,p.jsx)(o.u_.Columns,{hint:s("The amount to tie to your bid. The lowest bidder moves forward."),children:(0,p.jsx)(o.H,{autoFocus:!0,label:s("bid amount"),onChange:r})})]}),(0,p.jsx)(o.u_.Actions,{children:(0,p.jsx)(o.cA,{accountId:l,icon:"sign-in-alt",isDisabled:!a,label:s("Bid"),onStart:e,params:[a],tx:n.tx.society.bid})})]})}const g=t.memo(x);var f=n(13328),v=n(82740);function b({className:e,value:s}){const n=(0,t.useMemo)((()=>null!=s&&s.isVouch?s.asVouch[0]:null),[s]);return(0,p.jsxs)(j,{className:e,children:[(0,p.jsx)("div",{children:s&&s.type}),n&&(0,p.jsx)(o.N,{value:n})]})}const j=v.ZP.div.withConfig({displayName:"BidType__StyledDiv",componentId:"sc-1glg6kz-0"})(["align-items:center;display:flex;flex-wrap:no-wrap;> div{flex:0;&:first-child{padding-right:1.5rem;}}"]),y=t.memo(b);function w({index:e,value:{kind:s,value:n,who:a}}){const{t:r}=h(),{api:l}=(0,i.h)(),{allAccounts:c}=(0,f.x)(),[d,u]=(0,t.useMemo)((()=>s.isVouch?s.asVouch:[null,null]),[s]),[m,x]=(0,t.useMemo)((()=>{const e=a.toString(),s=d&&d.toString();return[c.some((s=>s===e)),!!s&&c.some((e=>e===s))]}),[c,d,a]);return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"address all",children:(0,p.jsx)(o.N,{value:a})}),(0,p.jsxs)("td",{className:"start",children:[(0,p.jsx)(y,{value:s}),s.isVouch?x&&(0,p.jsx)(o.cA,{accountId:d,icon:"times",label:r("Unvouch"),params:[e],tx:l.tx.society.unvouch}):m&&(0,p.jsx)(o.cA,{accountId:a,icon:"times",label:r("Unbid"),params:[e],tx:l.tx.society.unbid})]}),(0,p.jsx)(o.iA.Column.Balance,{value:n}),(0,p.jsx)(o.iA.Column.Balance,{value:u})]})}const N=t.memo(w);function C({className:e}){const{t:s}=h(),{api:n}=(0,i.h)(),a=(0,r.W7)(n.query.society.bids),l=(0,t.useRef)([[s("bids"),"start"],[s("bid kind"),"start"],[s("value")],[s("tip")]]);return(0,p.jsx)(o.iA,{className:e,empty:a&&s("No bids"),header:l.current,children:null==a?void 0:a.map(((e,s)=>(0,p.jsx)(N,{index:s,value:e},e.who.toString())))})}const k=t.memo(C);function S({label:e,votes:s}){return 0===s.length?null:(0,p.jsx)(o.xH,{summary:`${e} (${s.length})`,children:s.map((([e])=>(0,p.jsx)(o.ax,{value:e},e.toString())))})}const I=t.memo(S);function A({votes:e}){const{t:s}=h(),[{allAye:n,allNay:a,allSkeptic:o},i]=(0,t.useState)({allAye:[],allNay:[],allSkeptic:[]});return(0,t.useEffect)((()=>{e&&i({allAye:e.filter((([,e])=>e.isApprove)),allNay:e.filter((([,e])=>e.isReject)),allSkeptic:e.filter((([,e])=>e.isSkeptic))})}),[e]),(0,p.jsxs)("td",{className:"expand",children:[(0,p.jsx)(I,{label:s("Skeptics"),votes:o}),(0,p.jsx)(I,{label:s("Approvals"),votes:n}),(0,p.jsx)(I,{label:s("Rejections"),votes:a})]})}const P=t.memo(A);function M({candidateId:e,isMember:s,ownMembers:n}){const{t:a}=h(),{api:r}=(0,i.h)(),[l,c]=(0,u.O)(),[d,m]=(0,t.useState)(!0),[x,g]=(0,t.useState)(null),f=(0,t.useRef)([{text:a("Aye, I approve"),value:!0},{text:a("Nay, I do not approve"),value:!1}]);return(0,p.jsxs)(p.Fragment,{children:[l&&(0,p.jsxs)(o.u_,{header:a("Vote for candidate"),onClose:c,children:[(0,p.jsxs)(o.u_.Content,{children:[(0,p.jsx)(o.rp,{filter:n,label:a("vote from account"),onChange:g}),(0,p.jsx)(o.Lt,{label:a("vote for candidate"),onChange:m,options:f.current,value:d})]}),(0,p.jsx)(o.u_.Actions,{children:(0,p.jsx)(o.cA,{accountId:x,icon:"check",label:a("Vote"),onStart:c,params:[e,d],tx:r.tx.society.vote})})]}),(0,p.jsx)(o.zx,{icon:"check",isDisabled:!s,label:a("Vote"),onClick:c})]})}const D=t.memo(M);function T({allMembers:e,isMember:s,ownMembers:n,value:{accountId:a,kind:l,value:c}}){const{api:d}=(0,i.h)(),u=(0,t.useMemo)((()=>[e.map((e=>[a,e]))]),[a,e]),m=(0,r.W7)(d.query.society.votes.multi,u,{transform:s=>s.map(((s,n)=>[e[n],s])).filter((([,e])=>e.isSome)).map((([e,s])=>[e,s.unwrap()]))});return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"address all",children:(0,p.jsx)(o.N,{value:a})}),(0,p.jsx)("td",{className:"start",children:(0,p.jsx)(y,{value:l})}),(0,p.jsx)(o.iA.Column.Balance,{value:c}),(0,p.jsx)(P,{votes:m}),(0,p.jsx)("td",{className:"button",children:(0,p.jsx)(D,{candidateId:a.toString(),isMember:s,ownMembers:n})})]})}const E=t.memo(T);function q({allMembers:e,candidates:s,className:n="",isMember:a,ownMembers:i}){const{t:r}=h(),l=(0,t.useRef)([[r("candidates"),"start"],[r("bid kind"),"start"],[r("value")],[void 0,"expand"],[]]);return(0,p.jsx)(o.iA,{className:n,empty:s&&r("No candidates"),header:l.current,children:null==s?void 0:s.map((s=>(0,p.jsx)(E,{allMembers:e,isMember:a,ownMembers:i,value:s},s.accountId.toString())))})}const _=t.memo(q);function $({allMembers:e,onClose:s}){const{t:n}=h(),{api:a}=(0,i.h)(),[r,l]=(0,t.useState)(),[c,d]=(0,t.useState)(),[u,m]=(0,t.useState)(),[x,g]=(0,t.useState)();return(0,p.jsxs)(o.u_,{header:n("Vouch for a new candidate"),onClose:s,size:"large",children:[(0,p.jsxs)(o.u_.Content,{children:[(0,p.jsx)(o.u_.Columns,{hint:n("Your member account that the vouch is made from."),children:(0,p.jsx)(o.rp,{filter:e,label:n("member account"),onChange:m,type:"account"})}),(0,p.jsx)(o.u_.Columns,{hint:n("The candidate/bid account. Once accepted this account will become a member."),children:(0,p.jsx)(o.rp,{label:n("bid account"),onChange:g})}),(0,p.jsx)(o.u_.Columns,{hint:n("The amount to tie to your bid. The lowest bidder moves forward."),children:(0,p.jsx)(o.H,{autoFocus:!0,label:n("bid amount"),onChange:l})}),(0,p.jsx)(o.u_.Columns,{hint:n("The amount you wish to be tipped for your bid."),children:(0,p.jsx)(o.H,{label:n("tip amount"),onChange:d})})]}),(0,p.jsx)(o.u_.Actions,{children:(0,p.jsx)(o.cA,{accountId:u,icon:"sign-in-alt",isDisabled:!r||!x||!c,label:n("Vouch"),onStart:s,params:[x,r,c],tx:a.tx.society.vouch})})]})}const F=t.memo($);function O({allMembers:e,candidates:s,className:n,isMember:t,ownMembers:a}){const{t:i}=h(),[r,l]=(0,u.O)(),[c,d]=(0,u.O)();return(0,p.jsxs)("div",{className:n,children:[(0,p.jsxs)(o.zx.Group,{children:[(0,p.jsx)(o.zx,{icon:"plus",label:i("Submit bid"),onClick:l}),(0,p.jsx)(o.zx,{icon:"plus",isDisabled:!t,label:i("Vouch for"),onClick:d}),r&&(0,p.jsx)(g,{onClose:l}),c&&(0,p.jsx)(F,{allMembers:e,onClose:d})]}),(0,p.jsx)(_,{allMembers:e,candidates:s,isMember:t,ownMembers:a}),(0,p.jsx)(k,{})]})}const V=t.memo(O);function R({isMember:e,ownMembers:s}){const{t:n}=h(),{api:a}=(0,i.h)(),[r,l]=(0,u.O)(),[c,d]=(0,t.useState)(!0),[m,x]=(0,t.useState)(null),g=(0,t.useRef)([{text:n("Aye, I approve"),value:!0},{text:n("Nay, I do not approve"),value:!1}]);return(0,p.jsxs)(p.Fragment,{children:[r&&(0,p.jsxs)(o.u_,{header:n("Vote for defender"),onClose:l,children:[(0,p.jsxs)(o.u_.Content,{children:[(0,p.jsx)(o.rp,{filter:s,label:n("vote from account"),onChange:x}),(0,p.jsx)(o.Lt,{label:n("vote for defender"),onChange:d,options:g.current,value:c})]}),(0,p.jsx)(o.u_.Actions,{children:(0,p.jsx)(o.cA,{accountId:m,icon:"check",label:n("Vote"),onStart:l,params:[c],tx:a.tx.society.defenderVote})})]}),(0,p.jsx)(o.zx,{icon:"check",isDisabled:!e,label:n("Vote"),onClick:l})]})}const Z=t.memo(R),B={transform:e=>e.filter((({vote:e})=>!!e)).map((({accountId:e,vote:s})=>[e.toString(),s]))};function L({className:e="",info:s,isMember:n,ownMembers:a}){const{t:l}=h(),{api:c}=(0,i.h)(),d=(0,r.W7)(c.derive.society.members,void 0,B),u=(0,t.useRef)([[l("defender"),"start"],[void 0,"expand"],[]]);return s&&s.hasDefender&&s.defender?(0,p.jsx)(o.iA,{className:e,header:u.current,children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"address all",children:(0,p.jsx)(o.N,{value:s.defender})}),(0,p.jsx)(P,{votes:d}),(0,p.jsx)("td",{className:"button",children:(0,p.jsx)(Z,{isMember:n,ownMembers:a})})]})}):null}const H=t.memo(L);var W=n(65182),z=n(76277),U=n(67738),J=n(14681),G=n(26007);const Q=300;function X(e,s,n,t,a){const o=new Path2D("M373.1,126.9c-5.2-4.1-11.4-9.7-22.7-11.1c-10.6-1.4-21.4,5.7-28.7,10.4c-7.3,4.7-21.1,18.5-26.8,22.7 c-5.7,4.2-20.3,8.1-43.8,22.2s-115.7,73.3-115.7,73.3l24,0.3L52.4,299.8h10.7l-15.4,11.7c0,0,13.6,3.6,25-3.6l0,3.3 c0,0,127.4-50.2,152-37.2l-15,4.4c1.3,0,25.5,1.6,25.5,1.6s0.8,15.1,15.4,24.8c14.6,9.6,14.9,14.9,14.9,14.9s-7.6,3.1-7.6,7 c0,0,11.2-3.4,21.6-3.1c10.4,0.3,19.5,3.1,19.5,3.1s-0.8-4.2-10.9-7c-10.2-2.9-20.1-13.8-25-19.8c-4.9-6-8.3-16.7-4.1-27.4 c3.5-9.1,15.7-14.1,40.9-27.1c29.7-15.4,36.5-26.8,40.7-35.7c4.2-8.9,10.4-26.6,13.9-34.9c4.4-10.7,9.8-16.4,14.3-19.8 c4.4-3.4,24.5-10.9,24.5-10.9S378,130.8,373.1,126.9z");e.save(),e.translate(s/2,n/2),e.scale(t/440,t/440),e.translate(-220,-220),a(e,o),e.restore()}function K(e,s,n,t){e.save(),e.translate(.5,.5);for(let a=0;a<n.length;a++)e.save(),e.rotate(2*Math.PI/n.length*a),e.translate(0,-s),t(e,n[a]),e.restore();e.restore()}function Y(e,s){let n=0;return s.map((s=>e.slice(n,n+=s)))}const ee={display:"block",margin:"0 auto"};function se({accountId:e}){const{t:s}=h(),{api:n}=(0,i.h)(),a=(0,t.useRef)(null),[r]=(0,t.useState)((()=>n.genesisHash.eq(G.Cx))),[l,c]=(0,u.O)();return(0,t.useEffect)((()=>{if(a.current){const s=a.current.getContext("2d");s&&function(e,s){console.log(`Generating ink for ${s.toString()} as ${s.toHex()}`);const n=s.toU8a().reduce(((e,s)=>{for(let n=0;n<8;++n)e.push(0!=(s&1<<7-n));return e}),[]);e.save(),e.translate(0,0),e.scale(Q,Q),function(e,s){const n=Y(s,[71,61,51,41,32]);for(let s=0;s<n.length;++s)K(e,.5-.062*(s+.5),n[s],((e,s)=>{s&&(e.beginPath(),e.arc(0,0,.016,0,2*Math.PI),e.fillStyle="black",e.fill())}));e.lineWidth=10,X(e,1,1,.4,((e,s)=>e.stroke(s)))}(e,n),e.restore(),e.save(),e.translate(325,0),e.scale(Q,Q),function(e,s){const n=Y(s,[71,61,51,41,32]);for(let s=0;s<n.length;++s)K(e,.5-.062*(s+.5),n[s],((e,s)=>{e.beginPath(),e.arc(0,0,(s?8:4)/500,0,2*Math.PI),e.fillStyle=s?"black":"#e6007a",e.fill()}));X(e,1,1,.44,((e,s)=>e.fill(s)))}(e,n),e.restore(),e.save(),e.translate(0,325),e.scale(Q,Q),function(e,s){const n=Y(s,[64,64,64,64]);for(let s=0;s<n.length;++s)K(e,.5-.072*(s+.5),n[s],((e,s)=>{s&&(e.beginPath(),e.moveTo(0,-.036),e.lineTo(0,.036),e.lineWidth=.01,e.stroke())}));X(e,1,1,.44,((e,s)=>e.fill(s)))}(e,n),e.restore(),e.save(),e.translate(325,325),e.scale(Q,Q),function(e,s){e.lineWidth=.01;for(let n=0;n<8;++n)for(let t=0;t<32;++t)s[32*n+t]&&(e.save(),e.translate((t+.5)/32,n/8),e.beginPath(),e.moveTo(0,0),e.lineTo(0,1/8),e.stroke(),e.restore());e.fillStyle="rgba(255, 255, 255, 0.8)",X(e,1,1,1,((e,s)=>e.fill(s))),e.lineWidth=6,X(e,1,1,1,((e,s)=>e.stroke(s)))}(e,n),e.restore(),e.save(),e.translate(650,0),e.scale(Q,Q),function(e,s){e.save(),e.translate(.484,.516),e.fillStyle="black";let n=.484;for(let t=0;t<s.length;t++)n-=.5/s.length*.75/(4*n),e.rotate(2*Math.PI/s.length*8/(4*n)),e.save(),e.translate(0,-n),e.beginPath(),e.arc(0,0,s[t]?.016:.008,0,2*Math.PI),e.fillStyle=s[t]?"black":"#e6007a",e.fill(),e.restore();e.restore(),e.lineWidth=10,X(e,.984,1.016,.44,((e,s)=>e.stroke(s)))}(e,n),e.restore(),e.save(),e.translate(650,325),e.scale(Q,Q),function(e,s){const n=Y(s,[128,128]);for(let s=0;s<n.length;++s)K(e,.5-.072*(s+.5),n[s],((e,s)=>{s&&(e.beginPath(),e.moveTo(0,-.036),e.lineTo(0,.036),e.lineWidth=.01,e.stroke())}));e.lineWidth=6,X(e,1,1,.7,((e,s)=>e.stroke(s)))}(e,n),e.restore()}(s,e)}})),r?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.zx,{icon:"pen-nib",onClick:c}),l&&(0,p.jsx)(o.u_,{header:s("design samples"),onClose:c,size:"large",children:(0,p.jsx)(o.u_.Content,{children:(0,p.jsx)("canvas",{height:625,ref:a,style:ee,width:950})})})]}):null}const ne=t.memo(se);function te({bestNumber:e,className:s="",value:{accountId:n,isCandidateVoter:a,isDefenderVoter:r,isFounder:l,isHead:c,isSkeptic:d,isSuspended:u,isWarned:m,key:x,payouts:g,strikes:v}}){const{t:b}=h(),{api:j}=(0,i.h)(),{allAccounts:y}=(0,f.x)(),w=(0,t.useCallback)((()=>e&&g&&function(e,s){return s.map((([s,n],t)=>(0,p.jsx)("div",{className:"payout",children:(0,p.jsxs)(o.P0,{children:[(0,p.jsx)(o.P0.Column,{children:(0,p.jsx)(z.Z,{value:n})}),(0,p.jsxs)(o.P0.Column,{children:[(0,p.jsxs)("div",{children:["#",(0,J.u)(s)]}),s.gt(e)&&(0,p.jsx)(U.Z,{value:s.sub(e)},t)]})]})},t)))}(e,g)),[e,g]),N=(0,t.useMemo)((()=>y.some((e=>e===x))),[y,x]),C=(0,t.useMemo)((()=>e&&g.find((([s])=>e.gt(s)))),[e,g]),k=(0,t.useMemo)((()=>[a&&b("Candidate"),r&&b("Defender")].filter((e=>!!e)).join(", ")),[a,r,b]);return(0,p.jsxs)(ae,{className:s,children:[(0,p.jsxs)("td",{className:"address relative all",children:[(0,p.jsx)(o.N,{value:n}),(0,p.jsxs)("div",{className:"absolute",children:[(a||r)&&(0,p.jsx)(o.Vp,{color:"blue",label:b("voted")}),m&&(0,p.jsx)(o.Vp,{color:"orange",label:b("strikes")}),c&&(0,p.jsx)(o.Vp,{color:"green",label:b("society head")}),l&&(0,p.jsx)(o.Vp,{color:"green",label:b("founder")}),d&&(0,p.jsx)(o.Vp,{color:"yellow",label:b("skeptic")}),u&&(0,p.jsx)(o.Vp,{color:"red",label:b("suspended")}),C&&(0,p.jsx)(o.Vp,{color:"grey",label:b("payout")})]})]}),(0,p.jsxs)("td",{className:"number together",children:[!(null==g||!g.length)&&(0,p.jsx)(o.xH,{className:"payoutExpander",renderChildren:w,summary:b("Payouts ({{count}})",{replace:{count:(0,J.u)(g.length)}})}),N&&C&&(0,p.jsx)(o.cA,{accountId:n,icon:"ellipsis-h",label:"Payout",params:[],tx:j.tx.society.payout})]}),(0,p.jsx)("td",{className:"together",children:k}),(0,p.jsx)("td",{className:"number",children:(0,J.u)(v)}),(0,p.jsx)("td",{className:"button start",children:(0,p.jsx)(ne,{accountId:n})})]})}const ae=v.ZP.tr.withConfig({displayName:"Member__StyledTr",componentId:"sc-ts6f9r-0"})([".payoutExpander{.payout+.payout{margin-top:0.5rem;}.ui--Columar{flex-wrap:unset;.ui--Column{min-width:15ch;&:first-child{max-width:100% !important;}&:last-child{min-width:15ch;max-width:15ch;white-space:nowrap;}}}}"]),oe=t.memo(te);function ie({className:e="",mapMembers:s}){const{t:n}=h(),a=(0,W.C)(),i=(0,t.useRef)([[n("members"),"start",2],[n("voted on"),"start"],[n("strikes")],[]]);return(0,p.jsx)(o.iA,{className:e,empty:s&&n("No active members"),header:i.current,children:null==s?void 0:s.map((e=>(0,p.jsx)(oe,{bestNumber:a,value:e},e.key)))})}const re=t.memo(ie);function le({className:e="",info:s,payoutTotal:n}){const{t:a}=h(),{api:l}=(0,i.h)(),c=(0,r.W7)(l.derive.society.members),d=(0,W.C)(),u=(0,t.useMemo)((()=>s&&s.pot.gtn(0)?s.pot:null),[s]);return(0,p.jsxs)(ce,{className:e,children:[(0,p.jsx)("section",{className:"media--1100",children:s&&c&&(0,p.jsxs)(o.Jy,{label:a("members"),children:[c.length," / ",s.maxMembers.toString()]})}),d&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("section",{children:(0,p.jsx)(o.Jy,{label:a("rotation"),progress:{total:l.consts.society.rotationPeriod,value:d.mod(l.consts.society.rotationPeriod),withTime:!0}})}),(0,p.jsx)("section",{className:"media--1200",children:(0,p.jsx)(o.Jy,{label:a("challenge"),progress:{total:l.consts.society.challengePeriod,value:d.mod(l.consts.society.challengePeriod),withTime:!0}})})]}),(0,p.jsxs)("section",{children:[n&&(0,p.jsx)(o.Jy,{label:a("payouts"),children:(0,p.jsx)(z.Z,{value:n,withSi:!0})}),u&&(0,p.jsx)(o.Jy,{label:a("pot"),children:(0,p.jsx)(z.Z,{value:u,withSi:!0})})]})]})}const ce=(0,v.ZP)(o.Ty).withConfig({displayName:"Summary__StyledSummaryBox",componentId:"sc-akupoe-0"})([".society--header--account{white-space:nowrap;.ui--AccountName{display:inline-block;}.ui--IdentityIcon{margin-right:0.5rem;}}"]),de=t.memo(le);function ue({className:e,info:s,isMember:n,mapMembers:t,ownMembers:a,payoutTotal:o}){return(0,p.jsxs)(me,{className:e,children:[(0,p.jsx)(de,{info:s,payoutTotal:o}),(0,p.jsx)(H,{info:s,isMember:n,ownMembers:a}),(0,p.jsx)(re,{mapMembers:t})]})}const me=v.ZP.div.withConfig({displayName:"Overview__StyledDiv",componentId:"sc-1gkbwhc-0"})([".overviewSection{margin-bottom:1.5rem;}"]),he=t.memo(ue);function pe({balance:e,bid:s,value:n}){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"address all",children:(0,p.jsx)(o.N,{value:n})}),(0,p.jsx)("td",{className:"start",children:(0,p.jsx)(y,{value:s})}),(0,p.jsx)(o.iA.Column.Balance,{value:e})]})}const xe=t.memo(pe),ge={transform:e=>e.filter((([{args:[e]},s])=>s.isSome&&e)).map((([{args:[e]},s])=>{const[n,t]=s.unwrap();return{accountId:e,balance:n,bid:t}})).sort(((e,s)=>e.balance.cmp(s.balance)))},fe={transform:e=>e.map((({args:[e]})=>e)).filter((e=>!!e))};function ve({className:e}){const{t:s}=h(),{api:n}=(0,i.h)(),a=(0,r.W7)(n.query.society.suspendedCandidates.entries,void 0,ge),l=(0,r.W7)(n.query.society.suspendedMembers.keys,void 0,fe),c=(0,t.useRef)({candidates:[[s("candidates"),"start"],[s("bid kind"),"start"],[s("value")]],members:[[s("members"),"start",3]]});return(0,p.jsxs)("div",{className:e,children:[(0,p.jsx)(o.iA,{className:e,empty:l&&s("No suspended members"),header:c.current.members,children:null==l?void 0:l.map((e=>(0,p.jsx)(xe,{value:e},e.toString())))}),(0,p.jsx)(o.iA,{className:e,empty:a&&s("No suspended candidates"),header:c.current.candidates,children:null==a?void 0:a.map((({accountId:e,balance:s,bid:n})=>(0,p.jsx)(xe,{balance:s,bid:n,value:e},e.toString())))})]})}const be=t.memo(ve);var je=n(90036),ye=n(89448);const we={allMembers:[],isMember:!1,ownMembers:[]},Ne=(0,ye.e)("useMembers",(function(){const{api:e}=(0,i.h)(),{allAccounts:s}=(0,f.x)(),[n,a]=(0,t.useState)(we),o=(0,r.W7)(e.derive.society.members);return(0,t.useEffect)((()=>{s&&o&&a(function(e,s){const n=s.filter((({isSuspended:e})=>!e)).map((({accountId:e})=>e.toString())),t=n.filter((s=>e.includes(s)));return{allMembers:n,isMember:0!==t.length,ownMembers:t}}(s,o))}),[s,o]),n}));var Ce=n(67847);const ke={},Se=(0,ye.e)("useVoters",(function(){const{api:e}=(0,i.h)(),s=(0,Ce.b)([e.events.society.Vote]),n=(0,r.W7)(e.derive.society.candidates),[a,o]=(0,t.useState)(ke);return(0,t.useEffect)((()=>{s&&n&&async function(e,s){const n=[],t=[];return(s.length?await Promise.all(s.map((({accountId:s})=>e.query.society.votes.entries(s)))):[]).forEach((e=>{e.forEach((([{args:[,e]},s])=>{if(s.isSome){const a=e.toString();s.unwrap().isSkeptic?!n.includes(a)&&n.push(a):!t.includes(a)&&t.push(a)}}))})),{candidates:s,skeptics:n,voters:t}}(e,n).then(o).catch(console.error)}),[e,n,s]),a}));function Ie(e,s){const n=e.isCandidateVoter||e.isDefenderVoter;return e.isHead!==s.isHead?e.isHead?-1:1:e.isFounder!==s.isFounder?e.isFounder?-1:1:e.isSkeptic!==s.isSkeptic?e.isSkeptic?-1:1:n!==(s.isCandidateVoter||s.isDefenderVoter)?n?-1:1:e.isSuspended!==s.isSuspended?e.isSuspended?-1:1:e.isWarned!==s.isWarned?e.isWarned?-1:1:s.strikes.cmp(e.strikes)||s.payouts.length-e.payouts.length}function Ae({basePath:e,className:s}){const{t:n}=h(),{api:l}=(0,i.h)(),u=(0,je.Z)(),{allMembers:m,isMember:x,ownMembers:g}=Ne(),f=(0,r.W7)(l.derive.society.info),v=(0,r.W7)(l.derive.society.members),{candidates:b,skeptics:j,voters:y}=Se(),[w,N]=(0,t.useMemo)((()=>v&&f&&j&&y?function(e,s,n,{defender:t,founder:a,hasDefender:o,head:i},r){const l=e.filter((e=>!o||!e.accountId.eq(t))).map((({accountId:e,isDefenderVoter:t,isSuspended:o,payouts:l,strikes:c})=>{const d=e.toString();return{accountId:e,isCandidateVoter:n.includes(d),isDefenderVoter:t,isFounder:!(null==a||!a.eq(e)),isHead:!(null==i||!i.eq(e)),isSkeptic:s.includes(d),isSuspended:o,isWarned:!o&&c.gt(r),key:d,payouts:l,strikes:c}})).sort(Ie);return[l,l.reduce(((e,{payouts:s})=>s.reduce(((e,[,s])=>e.iadd(s)),e)),new(c())(0))]}(v,j,y,f,l.consts.society.maxStrikes.mul(d.um).div(d.Jo)):[void 0,void 0]),[l,f,v,j,y]),C=(0,t.useMemo)((()=>[{isRoot:!0,name:"overview",text:n("Overview")},{count:u,name:"candidates",text:n("Candidates")},{name:"suspended",text:n("Suspended")}]),[u,n]);return(0,p.jsxs)("main",{className:s,children:[(0,p.jsx)(o.mQ,{basePath:e,items:C}),(0,p.jsxs)(a.rs,{children:[(0,p.jsx)(a.AW,{path:`${e}/candidates`,children:(0,p.jsx)(V,{allMembers:m,candidates:b,isMember:x,ownMembers:g})}),(0,p.jsx)(a.AW,{path:`${e}/suspended`,children:(0,p.jsx)(be,{})}),(0,p.jsx)(a.AW,{children:(0,p.jsx)(he,{info:f,isMember:x,mapMembers:w,ownMembers:g,payoutTotal:N})})]})]})}const Pe=t.memo(Ae)},90036:(e,s,n)=>{n.d(s,{Z:()=>o});var t=n(92529),a=n(36856);const o=(0,n(89448).e)("useCounter",(function(){var e;const{api:s}=(0,t.h)(),n=(0,a.W7)(null==(e=s.query.society)?void 0:e.candidates);return(null==n?void 0:n.length)||0}))},76948:(e,s,n)=>{n.d(s,{Z:()=>d});var t=n(2784),a=n(82740),o=n(61397),i=n(40489),r=n(52322);function l({className:e,isRelay:s,minCommission:n}){const{t}=(0,i.$)();return(0,r.jsxs)(c,{className:e,children:[(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"blue",icon:"chevron-right"}),(0,r.jsx)("span",{children:t("Next session")})]}),n&&(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"red",icon:"cancel"}),(0,r.jsx)("span",{children:t("Chilled")})]}),s&&(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"purple",icon:"vector-square"}),(0,r.jsx)("span",{children:t("Para validator")})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"green",info:"5"}),(0,r.jsx)("span",{children:t("Produced blocks")})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"green",icon:"envelope"}),(0,r.jsx)("span",{children:t("Online message")})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"green",icon:"hand-paper"}),(0,r.jsx)("span",{children:t("Nominating")})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"red",icon:"balance-scale-right"}),(0,r.jsx)("span",{children:t("Oversubscribed")})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"red",icon:"skull-crossbones"}),(0,r.jsx)("span",{children:t("Slashed")})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Ct,{color:"red",icon:"user-slash"}),(0,r.jsx)("span",{children:t("Blocks nominations")})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)(o.Vp,{color:"lightgrey",label:"1,220"}),(0,r.jsx)("span",{children:t("Era points")})]})]})}const c=a.ZP.div.withConfig({displayName:"Legend__StyledDiv",componentId:"sc-1mecf94-0"})(["font-size:var(--font-size-small);padding:1rem 0.5rem;text-align:center;.ui--Badge,.ui--Tag{margin-right:0.5rem;}span{vertical-align:middle;*{vertical-align:middle;}+ span{margin-left:1rem;}}"]),d=t.memo(l)},41570:(e,s,n)=>{n.d(s,{Z:()=>Na});var t=n(2784),a=n(7267),o=n(82740),i=n(77142),r=n(28008),l=n(61397),c=n(92529),d=n(13328),u=n(25314),m=n(36856),h=n(54984),p=n(74944),x=n(65342),g=n(33661),f=n(76277),v=n(48801),b=n.n(v),j=n(95292),y=n(40489),w=n(52322);function N({isInElection:e}){const{t:s}=(0,y.$)();return e?(0,w.jsx)(l.Pd,{className:"warning centered",content:s("There is currently an ongoing election for new validator candidates. As such staking operations are not permitted.")}):null}const C=t.memo(N);var k=n(54782),S=n(7840),I=n(14681),A=n(89448);const P={transform:e=>e.isNone?0:e.unwrap().prior.length+1},M=(0,A.e)("useSlashingSpans",(function(e){const{api:s}=(0,c.h)();return(0,m.W7)(s.query.staking.slashingSpans,[e],P)||0}));var D=n(31832),T=n(92730);function E(e){let s=(e.mul(j.D_).div(j.aP.pow(new(b())(T.a.getDefaults().decimals))).toNumber()/1e3).toFixed(3);for(;1!==s.length&&[".","0"].includes(s[s.length-1]);){const e=s.endsWith(".");if(s=s.substring(0,s.length-1),e)break}return s}function q({currentAmount:e,isNominating:s,minNominated:n,minNominatorBond:a,minValidatorBond:o,onError:i,stashId:r,value:d}){var u;const{t:h}=(0,y.$)(),{api:p}=(0,c.h)(),x=(0,m.W7)(null==(u=p.derive.balances)?void 0:u.all,[r]),[{error:g,warning:f},v]=(0,t.useState)({error:null,warning:null});return(0,t.useEffect)((()=>{if(x&&d){const t=d.add(e||j.nw),r=p.consts.balances.existentialDeposit,l=x.freeBalance.sub(r.divn(2));let c=null,u=null;t.gte(l)?u=h("The specified value is large and may not allow enough funds to pay future transaction fees."):t.lt(r)?c=h("The bonded amount is less than the minimum bond amount of {{existentialDeposit}}",{replace:{existentialDeposit:E(r)}}):s?a&&t.lt(a)?c=h("The bonded amount is less than the minimum threshold of {{minBond}} for nominators",{replace:{minBond:(0,T.a)(a)}}):n&&t.lt(n)&&(u=h("The bonded amount is less than the current active minimum nominated amount of {{minNomination}} and depending on the network state, may not be selected to participate",{replace:{minNomination:(0,T.a)(n)}})):o&&t.lt(o)&&(c=h("The bonded amount is less than the minimum threshold of {{minBond}} for validators",{replace:{minBond:(0,T.a)(o)}})),v((e=>{const s=e.error!==c?c:e.error,n=e.warning!==u?u:e.warning;return i(s||n?{error:s,warning:n}:null),{error:s,warning:n}}))}}),[p,e,s,n,a,o,i,x,h,d]),g?(0,w.jsx)(l.oy,{content:g}):f?(0,w.jsx)(l.Pd,{content:f}):null}const _=t.memo(q);function $({controllerId:e,onClose:s,stakingInfo:n,stashId:a}){var o;const{t:i}=(0,y.$)(),{api:r}=(0,c.h)(),[d,u]=(0,t.useState)(null),[h,p]=(0,t.useState)(),x=(0,m.W7)(null==(o=r.derive.balances)?void 0:o.all,[a]),g=(0,t.useMemo)((()=>{var e,s;return n&&(null==(e=n.stakingLedger)||null==(s=e.active)?void 0:s.unwrap())}),[n]),f=(0,t.useMemo)((()=>function(e,s,n){if(s&&s.stakingLedger&&n){var t;const a=(s.unlocking||[]).reduce(((e,{value:s})=>e.iadd(s)),new(b())(0)),o=s.redeemable||j.nw,i=n.freeBalance.sub((null==(t=s.stakingLedger.active)?void 0:t.unwrap())||j.nw).sub(a).sub(o);return i.gt(e.consts.balances.existentialDeposit)?i.sub(e.consts.balances.existentialDeposit):j.nw}return null}(r,n,x)),[r,n,x]);return(0,w.jsxs)(l.u_,{header:i("Bond more funds"),onClose:s,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsx)(l.u_.Columns,{hint:i("Since this transaction deals with funding, the stash account will be used."),children:(0,w.jsx)(l.rp,{defaultValue:a,isDisabled:!0,label:i("stash account")})}),f&&(0,w.jsxs)(l.u_.Columns,{hint:i("The amount placed at-stake should allow some free funds for future transactions."),children:[(0,w.jsx)(l.H,{autoFocus:!0,defaultValue:f,isError:!(null==d||!d.error)||!h||h.isZero(),label:i("additional funds to bond"),labelExtra:(0,w.jsx)(D.Z,{label:(0,w.jsx)("span",{className:"label",children:i("balance")}),params:a}),onChange:p}),(0,w.jsx)(_,{controllerId:e,currentAmount:g,onError:u,stashId:a,value:h})]})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:a,icon:"sign-in-alt",isDisabled:!(null!=h&&h.gt(j.nw)&&(null==d||!d.error)),label:i("Bond more"),onStart:s,params:[h],tx:r.tx.staking.bondExtra})})]})}const F=t.memo($);var O=n(69187),V=n(48731),R=n(55858),Z=n(6851),B=n(46186);const L={aura:["ed25519","sr25519"],babe:["sr25519"],gran:["ed25519"],imon:["ed25519","sr25519"],para:["sr25519"]};function H({onClose:e}){const{t:s}=(0,y.$)(),{queueRpc:n}=(0,k.L)(),[a,o]=(0,t.useState)("sr25519"),[i,r]=(0,t.useState)("0x"),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)("babe"),h=(0,t.useRef)([{text:s("Aura"),value:"aura"},{text:s("Babe"),value:"babe"},{text:s("Grandpa"),value:"gran"},{text:s("I'm Online"),value:"imon"},{text:s("Parachains"),value:"para"}]);(0,t.useEffect)((()=>{o(L[u][0])}),[u]),(0,t.useEffect)((()=>{try{const{phrase:e}=(0,Z.Q)(c);(0,V.hu)((0,B.S)(e),"Invalid mnemonic phrase"),r((0,R.c)(O.Nn.createFromUri(c,{},a).publicKey))}catch(e){r("0x")}}),[a,c]);const p=(0,t.useCallback)((()=>n({rpc:{method:"insertKey",section:"author"},values:[u,c,i]})),[u,i,n,c]),x=(0,t.useMemo)((()=>L[u].map((e=>({text:s("ed25519"===e?"ed25519, Edwards":"sr15519, Schnorrkel"),value:e})))),[u,s]);return(0,w.jsxs)(l.u_,{header:s("Inject Keys"),onClose:e,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsxs)(l.u_.Columns,{hint:s("The seed and derivation path will be submitted to the validator node. this is an advanced operation, only to be performed when you are sure of the security and connection risks."),children:[(0,w.jsx)(l.II,{autoFocus:!0,isError:66!==i.length,label:s("suri (seed & derivation)"),onChange:d,value:c}),(0,w.jsx)(l.Pd,{content:s("This operation will submit the seed via an RPC call. Do not perform this operation on a public RPC node, but ensure that the node is local, connected to your validator and secure.")})]}),(0,w.jsxs)(l.u_.Columns,{hint:s("The key type and crypto type to use for this key. Be aware that different keys have different crypto requirements. You should be familiar with the type requirements for the different keys."),children:[(0,w.jsx)(l.Lt,{label:s("key type to set"),onChange:m,options:h.current,value:u}),(0,w.jsx)(l.Lt,{isDisabled:1===x.length,label:s("crypto type to use"),onChange:o,options:x,value:a})]}),(0,w.jsx)(l.u_.Columns,{hint:s("This pubic key is what will be visible in your queued keys list. It is generated based on the seed and the crypto used."),children:(0,w.jsx)(l.II,{isDisabled:!0,label:s("generated public key"),value:i})})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.zx,{icon:"sign-in-alt",label:s("Submit key"),onClick:p})})]})}const W=t.memo(H);function z({className:e="",controllerId:s,stashId:n}){const{t}=(0,y.$)();return n&&s?(0,w.jsxs)(l.u_.Columns,{className:e,hint:t("The stash that is to be affected. The transaction will be sent from the associated controller account."),children:[(0,w.jsx)(l.rp,{defaultValue:n,isDisabled:!0,label:t("stash account")}),(0,w.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:t("controller account")})]}):null}const U=t.memo(z),J={withExposure:!0};function G({className:e="",controllerId:s,nominating:n,onClose:a,stashId:o}){const{t:i}=(0,y.$)(),{api:r}=(0,c.h)(),[d,u]=(0,t.useState)([]),[{kickTx:h},p]=(0,t.useState)({}),x=(0,m.W7)(r.derive.staking.query,[o,J]),g=(0,t.useMemo)((()=>{var e;return null==x||null==(e=x.exposure)?void 0:e.others.map((({who:e})=>e.toString()))}),[x]);return(0,t.useEffect)((()=>{try{p({kickTx:d.length?r.tx.staking.kick(d):null})}catch{p({kickTx:null})}}),[r,d]),(0,w.jsxs)(l.u_,{className:e,header:i("Remove nominees"),onClose:a,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsx)(U,{controllerId:s,stashId:o}),g?(0,w.jsx)(l.m3,{available:g,availableLabel:i("existing/active nominators"),defaultValue:n,maxCount:128,onChange:u,valueLabel:i("nominators to be removed")}):(0,w.jsx)(l.$j,{label:i("Retrieving active nominators")})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:s,extrinsic:h,icon:"user-slash",isDisabled:!h,label:i("Remove"),onStart:a})})]})}const Q=t.memo(G);var X=n(3871),K=n(96464);const Y=(0,A.e)("useInactives",(function(e,s){const{api:n}=(0,c.h)(),a=(0,K.X)(),[o,i]=(0,t.useState)({}),r=(0,m.W7)(n.derive.session.indexes);return(0,t.useEffect)((()=>{let t;return a.current&&s&&s.length&&r&&n.queryMulti([[n.query.staking.nominators,e]].concat(n.query.staking.erasStakers?s.map((e=>[n.query.staking.erasStakers,[r.activeEra,e]])):s.map((e=>[n.query.staking.stakers,e]))).concat(s.map((e=>[n.query.staking.slashingSpans,e]))),(([t,...o])=>{const l=o.slice(0,s.length),c=o.slice(s.length);a.current&&i(function(e,s,n,t,{activeEra:a},o,i){var r;const l=null==(r=e.consts.staking)?void 0:r.maxNominatorRewardedPerValidator,c=e.events.staking.SlashReported?[]:t.filter(((e,s)=>!n[s].isNone&&n[s].unwrap().lastNonzeroSlash.gt(o))),d=i.map((({others:e})=>e.sort(((e,s)=>{var n,t;return((null==(n=s.value)?void 0:n.unwrap())||j.nw).cmp((null==(t=e.value)?void 0:t.unwrap())||j.nw)})))).map(((e,n)=>!l||l.gtn(e.map((({who:e})=>e.toString())).indexOf(s))?null:t[n])).filter((e=>!!e&&!c.includes(e)));let u=i.map(((e,n)=>e.others.some((({who:e})=>e.eq(s)))?null:t[n])).filter((e=>!!e));const m=i.map(((e,s)=>{var n;return null!=(n=e.total)&&n.unwrap().isZero()||u.includes(t[s])&&o.gte(a)?t[s]:null})).filter((e=>!!e)).filter((e=>!c.includes(e)&&!d.includes(e))),h=t.filter((e=>!u.includes(e)&&!c.includes(e)&&!d.includes(e)));return u=u.filter((e=>!m.includes(e)&&!c.includes(e)&&!d.includes(e))),{nomsActive:h,nomsChilled:c,nomsInactive:u,nomsOver:d,nomsWaiting:m}}(n,e,c,s,r,t.unwrapOrDefault().submittedIn,l))})).then((e=>{t=e})).catch(console.error),()=>{t&&t()}}),[n,r,a,s,e]),o})),ee={};function se(e,s=[],n){return s.length?[s.length,()=>{const t=function(e,s,n){if(null==n||!n.validators)return ee;const t={};return s.forEach((s=>{var a;null==(a=n.validators[s])||a.others.some((n=>!(!n.who.eq(e)||!(0,X.S)(n.value)||(t[s]=n.value.toBn(),0))))})),t}(e,s,n);return s.map(((e,s)=>(0,w.jsx)(l.ax,{balance:t[e],value:e,withBalance:!!n&&!!t[e]},s)))}]:null}function ne({nominating:e,stashId:s}){var n;const{t:a}=(0,y.$)(),{api:o}=(0,c.h)(),{nomsActive:i,nomsChilled:r,nomsInactive:d,nomsOver:u,nomsWaiting:h}=Y(s,e),p=(0,m.W7)(o.query.staking&&(null==(n=o.derive.session)?void 0:n.indexes)),x=(0,m.W7)((0,g.m)(o.query.staking.erasStakers)&&o.derive.staking.eraExposure,[null==p?void 0:p.activeEra]),[f,v,b,j,N]=(0,t.useMemo)((()=>[se(s,i,x),se(s,r),se(s,d),se(s,u),se(s,h)]),[x,i,r,d,u,h,s]);return(0,w.jsxs)(w.Fragment,{children:[j&&(0,w.jsx)(l.n0,{className:"stakeOver",renderChildren:j[1],summary:a("Oversubscribed nominations ({{count}})",{replace:{count:j[0]}})}),f&&(0,w.jsx)(l.n0,{renderChildren:f[1],summary:a("Active nominations ({{count}})",{replace:{count:f[0]}})}),b&&(0,w.jsx)(l.n0,{renderChildren:b[1],summary:a("Inactive nominations ({{count}})",{replace:{count:b[0]}})}),v&&(0,w.jsx)(l.n0,{renderChildren:v[1],summary:a("Renomination required ({{count}})",{replace:{count:v[0]}})}),N&&(0,w.jsx)(l.n0,{renderChildren:N[1],summary:a("Waiting nominations ({{count}})",{replace:{count:N[0]}})}),i&&d&&0===i.length&&0!==d.length&&(0,w.jsx)(l.Pd,{content:a("This could mean your nomination has not been applied to any validator in the active set by the election algorithm or it has been applied against a validator who is either oversubscribed or chilled.")})]})}const te=t.memo(ne),ae="staking:favorites";function oe({className:e="",controllerId:s,poolId:n}){const{t}=(0,y.$)();return n&&s?(0,w.jsxs)(l.u_.Columns,{className:e,hint:t("The pool and pool member that is to be affected. The transaction will be sent from the associated pool member account."),children:[(0,w.jsx)(l.Rn,{defaultValue:n,isDisabled:!0,label:t("pool id")}),(0,w.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:t("member account")})]}):null}const ie=t.memo(oe);function re({className:e="",controllerId:s,nominating:n,onChange:a,poolId:o,stashId:i,targets:{nominateIds:r=[]},withSenders:d}){const{t:m}=(0,y.$)(),{api:h}=(0,c.h)(),[p]=(0,u.r)(ae),[x,g]=(0,t.useState)(n||[]),[f]=(0,t.useState)((()=>{const e=[...p.filter((e=>r.includes(e))),...(n||[]).filter((e=>!p.includes(e)))];return e.concat(...r.filter((s=>!e.includes(s))))}));(0,t.useEffect)((()=>{try{a({nominateTx:x&&x.length?o?h.tx.nominationPools.nominate(o,x):h.tx.staking.nominate(x):null})}catch{a({nominateTx:null})}}),[h,a,o,x]);const v=h.consts.staking.maxNominations?h.consts.staking.maxNominations.toNumber():16;return(0,w.jsxs)(le,{className:e,children:[d&&(o?(0,w.jsx)(ie,{controllerId:s,poolId:o}):(0,w.jsx)(U,{controllerId:s,stashId:i})),(0,w.jsxs)(l.u_.Columns,{hint:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{children:m("Nominators can be selected manually from the list of all currently available validators.")}),(0,w.jsx)("p",{children:m("Once transmitted the new selection will only take effect in 2 eras taking the new validator election cycle into account. Until then, the nominations will show as inactive.")})]}),children:[(0,w.jsx)(l.m3,{available:f,availableLabel:m("candidate accounts"),defaultValue:n,maxCount:v,onChange:g,valueLabel:m("nominated accounts")}),(0,w.jsx)(l.Pd,{content:m("You should trust your nominations to act competently and honest; basing your decision purely on their current profitability could lead to reduced profits or even loss of funds.")})]})]})}const le=o.ZP.div.withConfig({displayName:"Nominate__StyledDiv",componentId:"sc-9iuamf-0"})(["article.warning{margin-top:0;}.auto--toggle{margin:0.5rem 0 0;text-align:right;width:100%;}.ui--Static .ui--AddressMini.padded.addressStatic{padding-top:0.5rem;.ui--AddressMini-info{min-width:10rem;max-width:10rem;}}.shortlist{display:flex;flex-wrap:wrap;justify-content:center;.candidate{border:1px solid #eee;border-radius:0.25rem;margin:0.25rem;padding-bottom:0.25rem;padding-right:0.5rem;position:relative;&::after{content:'';position:absolute;top:0;right:0;border-color:transparent;border-style:solid;border-radius:0.25em;border-width:0.25em;}&.isAye{background:#fff;border-color:#ccc;}&.member::after{border-color:green;}&.runnerup::after{border-color:steelblue;}.ui--AddressMini-icon{z-index:1;}.candidate-right{text-align:right;}}}"]),ce=t.memo(re);function de({className:e="",controllerId:s,nominating:n,onClose:a,poolId:o,stashId:i,targets:r}){const{t:c}=(0,y.$)(),[{nominateTx:d},u]=(0,t.useState)({});return(0,w.jsxs)(ue,{className:e,header:c("Nominate Validators"),onClose:a,size:"large",children:[(0,w.jsx)(l.u_.Content,{children:(0,w.jsx)(ce,{className:"nominatePartial",controllerId:s,nominating:n,onChange:u,poolId:o,stashId:i,targets:r,withSenders:!0})}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:s,extrinsic:d,icon:"hand-paper",isDisabled:!d,label:c("Nominate"),onStart:a})})]})}const ue=(0,o.ZP)(l.u_).withConfig({displayName:"Nominate__StyledModal",componentId:"sc-j62d3f-0"})([".nominatePartial{.ui--Static .ui--AddressMini .ui--AddressMini-info{max-width:10rem;min-width:10rem;}}"]),me=t.memo(de);function he({controllerId:e,onClose:s,stakingInfo:n,stashId:a}){const{t:o}=(0,y.$)(),{api:i}=(0,c.h)(),[r,d]=(0,t.useState)(),u=(0,t.useMemo)((()=>n&&n.unlocking?n.unlocking.reduce(((e,{value:s})=>e.iadd(s)),new(b())(0)):j.nw),[n]);return(0,w.jsxs)(l.u_,{header:o("Bond more funds"),onClose:s,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsx)(U,{controllerId:e,stashId:a}),u&&(0,w.jsx)(l.u_.Columns,{hint:o("The amount the is to be rebonded from the value currently unlocking, i.e. previously unbonded"),children:(0,w.jsx)(l.H,{autoFocus:!0,defaultValue:u,isError:!r||r.eqn(0)||r.gt(u),label:o("rebonded amount"),onChange:d})})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!r||r.isZero()||!u||r.gt(u),label:o("Rebond"),onStart:s,params:[r],tx:i.tx.staking.rebond})})]})}const pe=t.memo(he),xe={transform:e=>e.isSome?e.unwrap().toString():null},ge={transform:e=>e.isSome?e.unwrap().stash.toString():null};function fe({accountId:e,controllerId:s,defaultController:n,onError:a}){var o;const{t:i}=(0,y.$)(),{api:r}=(0,c.h)(),d=(0,m.W7)(s?r.query.staking.bonded:null,[s],xe),u=(0,m.W7)(s?r.query.staking.ledger:null,[s],ge),h=(0,m.W7)(s?null==(o=r.derive.balances)?void 0:o.all:null,[s]),[{error:p,isFatal:x},g]=(0,t.useState)({error:null,isFatal:!1});return(0,t.useEffect)((()=>{if(n!==s){let n=null,t=!1;d&&s!==e?(t=!0,n=i("A controller account should not map to another stash. This selected controller is a stash, controlled by {{bondedId}}",{replace:{bondedId:d}})):u?(t=!0,n=i("A controller account should not be set to manage multiple stashes. The selected controller is already controlling {{stashId}}",{replace:{stashId:u}})):null!=h&&h.freeBalance.isZero()?(t=!0,n=i("The controller does not have sufficient funds available to cover transaction fees. Ensure that a funded controller is used.")):s===e&&(n=i("Distinct stash and controller accounts are recommended to ensure fund security. You will be allowed to make the transaction, but take care to not tie up all funds, only use a portion of the available funds during this period.")),a(n,t),g((e=>e.error!==n?{error:n,isFatal:t}:e))}}),[e,h,d,s,n,a,u,i]),p&&e?x?(0,w.jsx)(l.oy,{content:p}):(0,w.jsx)(l.Pd,{content:p}):null}const ve=t.memo(fe);function be({defaultControllerId:e,onClose:s,stashId:n}){const{t:a}=(0,y.$)(),{api:o}=(0,c.h)(),[i,r]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),m=(0,t.useCallback)(((e,s)=>r(s)),[]);return(0,w.jsxs)(l.u_,{header:a("Change controller account"),onClose:s,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsx)(l.u_.Columns,{hint:a("The stash account that is used. This will allow the controller to perform all non-funds related operations on behalf of the account."),children:(0,w.jsx)(l.rp,{isDisabled:!0,label:a("stash account"),value:n})}),(0,w.jsxs)(l.u_.Columns,{hint:a("The selected controller tied to this stash. Once set, this account will be able to control the actions performed by the stash account."),children:[(0,w.jsx)(l.rp,{defaultValue:e,label:a("controller account"),onChange:u,type:"account",value:d}),(0,w.jsx)(ve,{accountId:n,controllerId:d,defaultController:e,onError:m})]})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:n,icon:"sign-in-alt",isDisabled:!d||i,label:a("Set controller"),onStart:s,params:[d],tx:o.tx.staking.setController})})]})}const je=t.memo(be);function ye(e){return function(e){return[{text:e("Stash account (increase the amount at stake)"),value:"Staked"},{text:e("Stash account (do not increase the amount at stake)"),value:"Stash"},{text:e("Controller account"),value:"Controller"}]}(e).concat({text:e("Specified payment account"),value:"Account"})}function we({controllerId:e,defaultDestination:s,onClose:n,stashId:a}){var o;const{t:i}=(0,y.$)(),{api:r}=(0,c.h)(),[d,u]=(0,t.useState)((()=>(null!=s&&s.isAccount?"Account":null==s?void 0:s.toString())||"Staked")),[h,p]=(0,t.useState)((()=>null!=s&&s.isAccount?s.asAccount.toString():null)),x=(0,m.W7)(null==(o=r.derive.balances)?void 0:o.all,[h]),g=(0,t.useMemo)((()=>ye(i)),[i]),f="Account"===d,v=f&&x&&x.accountId.eq(h)&&x.freeBalance.isZero();return(0,w.jsxs)(l.u_,{header:i("Bonding Preferences"),onClose:n,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsxs)(l.u_.Columns,{hint:i("The stash and controller pair as linked. This operation will be performed via the controller."),children:[(0,w.jsx)(l.rp,{defaultValue:a,isDisabled:!0,label:i("stash account")}),(0,w.jsx)(l.rp,{defaultValue:e,isDisabled:!0,label:i("controller account")})]}),(0,w.jsxs)(l.u_.Columns,{hint:i("All rewards will go towards the selected output destination when a payout is made."),children:[(0,w.jsx)(l.Lt,{defaultValue:null==s?void 0:s.toString(),label:i("payment destination"),onChange:u,options:g,value:d}),f&&(0,w.jsx)(l.rp,{label:i("the payment account"),onChange:p,type:"account",value:h}),v&&(0,w.jsx)(l.oy,{content:i("The selected destination account does not exist and cannot be used to receive rewards")})]})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!e||f&&(!h||v),label:i("Set reward destination"),onStart:n,params:[f?{Account:h}:d],tx:r.tx.staking.setPayee})})]})}const Ne=t.memo(we);var Ce=n(74076);const ke=new Uint8Array;function Se({className:e="",controllerId:s,onChange:n,stashId:a,withFocus:o,withSenders:i}){const{t:r}=(0,y.$)(),{api:d}=(0,c.h)(),[u,m]=(0,t.useState)(null);return(0,t.useEffect)((()=>{try{n({sessionTx:(0,Ce.vq)(u)?d.tx.session.setKeys(u,ke):null})}catch{n({sessionTx:null})}}),[d,u,n]),(0,w.jsxs)("div",{className:e,children:[i&&(0,w.jsxs)(l.u_.Columns,{hint:r("The stash and controller pair. This transaction, setting the session keys, will be sent from the controller."),children:[(0,w.jsx)(l.rp,{defaultValue:a,isDisabled:!0,label:r("stash account")}),(0,w.jsx)(l.rp,{className:"medium",defaultValue:s,isDisabled:!0,label:r("controller account")})]}),(0,w.jsx)(l.u_.Columns,{hint:r("The hex output from author_rotateKeys, as executed on the validator node. The keys will show as pending until applied at the start of a new session."),children:(0,w.jsx)(l.II,{autoFocus:o,isError:!u,label:r("Keys from rotateKeys"),onChange:m,placeholder:"0x..."})})]})}const Ie=t.memo(Se);function Ae({controllerId:e,onClose:s,stashId:n}){const{t:a}=(0,y.$)(),[{sessionTx:o},i]=(0,t.useState)({});return(0,w.jsxs)(l.u_,{header:a("Set Session Key"),onClose:s,size:"large",children:[(0,w.jsx)(l.u_.Content,{children:(0,w.jsx)(Ie,{controllerId:e,onChange:i,stashId:n,withFocus:!0,withSenders:!0})}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:e,extrinsic:o,icon:"sign-in-alt",isDisabled:!o,label:a("Set Session Key"),onStart:s})})]})}const Pe=t.memo(Ae);var Me=n(67738);const De=(0,A.e)("useUnbondDuration",(function(){const{api:e}=(0,c.h)(),s=(0,m.W7)(e.derive.session.info);return(0,t.useMemo)((()=>s&&s.sessionLength.gt(j.If)?s.eraLength.mul(e.consts.staking.bondingDuration):void 0),[e,s])}));function Te({controllerId:e,onClose:s,stakingLedger:n,stashId:a}){const{t:o}=(0,y.$)(),{api:i}=(0,c.h)(),r=De(),[d]=(0,t.useState)((()=>{var e;return(null==n||null==(e=n.active)?void 0:e.unwrap())||null})),[u,m]=(0,t.useState)();return(0,w.jsxs)(Ee,{header:o("Unbond funds"),onClose:s,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsxs)(l.u_.Columns,{hint:o("The stash and controller pair, here the controller will be used to send the transaction."),children:[(0,w.jsx)(l.rp,{defaultValue:a,isDisabled:!0,label:o("stash account")}),(0,w.jsx)(l.rp,{defaultValue:e,isDisabled:!0,label:o("controller account")})]}),(0,w.jsxs)(l.u_.Columns,{hint:o("The funds will only be available for withdrawal after the unbonding period, however will not be part of the staked amount after the next validator election. You can follow the unlock countdown in the UI."),children:[(0,w.jsx)(l.H,{autoFocus:!0,defaultValue:d,label:o("unbond amount"),labelExtra:(0,w.jsx)(f.Z,{label:(0,w.jsx)("span",{className:"label",children:o("bonded")}),value:d}),maxValue:d,onChange:m,withMax:!0}),(null==r?void 0:r.gtn(0))&&(0,w.jsx)(l.qG,{label:o("on-chain bonding duration"),children:(0,w.jsx)(Me.Z,{value:r})})]})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:e,icon:"unlock",isDisabled:!(null!=u&&u.gt(j.nw)),label:o("Unbond"),onStart:s,params:[u],tx:i.tx.staking.unbond})})]})}const Ee=(0,o.ZP)(l.u_).withConfig({displayName:"Unbond__StyledModal",componentId:"sc-1imm1qm-0"})([".staking--Unbond--max > div{justify-content:flex-end;& .column{flex:0;}}"]),qe=t.memo(Te);var _e=n(52107);const $e=new(b())(1e7);function Fe({className:e="",controllerId:s,minCommission:n,onChange:a,stashId:o,withFocus:i,withSenders:r}){const{t:d}=(0,y.$)(),{api:u}=(0,c.h)(),[m,h]=(0,t.useState)(j.If),[p,x]=(0,t.useState)(!0),f=(0,t.useMemo)((()=>n?(0,_e.x)(n.div($e),j.If):j.If),[n]),v=(0,t.useRef)([{text:d("Yes, allow nominations"),value:!0},{text:d("No, block all nominations"),value:!1}]);(0,t.useEffect)((()=>{try{a({validateTx:u.tx.staking.validate({blocked:!p,commission:m})})}catch{a({validateTx:null})}}),[u,p,m,a]);const b=(0,t.useCallback)((e=>e&&h(e.isZero()?j.If:e.mul($e))),[]),N=!!n&&m.lt(n);return(0,w.jsxs)("div",{className:e,children:[r&&(0,w.jsxs)(l.u_.Columns,{hint:d("The stash and controller pair. This transaction, managing preferences, will be sent from the controller."),children:[(0,w.jsx)(l.rp,{defaultValue:o,isDisabled:!0,label:d("stash account")}),(0,w.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:d("controller account")})]}),(0,w.jsxs)(l.u_.Columns,{hint:d("The commission is deducted from all rewards before the remainder is split with nominators."),children:[(0,w.jsx)(l.Rn,{autoFocus:i,defaultValue:f,isError:N,isZeroable:!0,label:d("reward commission percentage"),maxValue:j.S8,onChange:b}),N&&(0,w.jsx)(l.oy,{content:d("The commission is below the on-chain minimum of {{p}}%",{replace:{p:(n.mul(j.S8).div($e).toNumber()/100).toFixed(2)}})})]}),(0,g.m)(u.tx.staking.kick)&&(0,w.jsx)(l.u_.Columns,{hint:d("The validator can block any new nominations. By default it is set to allow all nominations."),children:(0,w.jsx)(l.Lt,{defaultValue:!0,label:d("allows new nominations"),onChange:x,options:v.current})})]})}const Oe=t.memo(Fe);function Ve({controllerId:e,minCommission:s,onClose:n,stashId:a}){const{t:o}=(0,y.$)(),[{validateTx:i},r]=(0,t.useState)({});return(0,w.jsxs)(l.u_,{header:o("Set validator preferences"),onClose:n,size:"large",children:[(0,w.jsx)(l.u_.Content,{children:(0,w.jsx)(Oe,{controllerId:e,minCommission:s,onChange:r,stashId:a,withFocus:!0,withSenders:!0})}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:e,extrinsic:i,icon:"certificate",isDisabled:!i,label:o("Validate"),onStart:n})})]})}const Re=t.memo(Ve);function Ze({minBond:e,stakingInfo:s}){const{t:n}=(0,y.$)();return(0,t.useMemo)((()=>e&&s&&s.stakingLedger.active.unwrap().lt(e)),[e,s])?(0,w.jsx)(l.Pd,{content:n("Your bonded amount is below the on-chain minimum threshold of {{minBond}} and may be chilled. Bond extra funds to increase the bonded amount.",{replace:{minBond:(0,T.a)(e)}})}):null}const Be=t.memo(Ze);function Le({allSlashes:e,className:s="",info:{controllerId:n,destination:a,hexSessionIdNext:o,hexSessionIdQueue:i,isLoading:r,isOwnController:d,isOwnStash:u,isStashNominating:h,isStashValidating:p,nominating:x,sessionIds:f,stakingLedger:v,stashId:b},isDisabled:j,minCommission:N,targets:C}){var A,P,D;const{t:T}=(0,y.$)(),{api:E}=(0,c.h)(),{queueExtrinsic:q}=(0,k.L)(),[_,$]=(0,S.O)(),[O,V]=(0,S.O)(),[R,Z]=(0,S.O)(),[B,L]=(0,S.O)(),[H,z]=(0,S.O)(),[U,J]=(0,S.O)(),[G,X]=(0,S.O)(),[K,Y]=(0,S.O)(),[ee,se]=(0,S.O)(),[ne,ae]=(0,S.O)(),{balancesAll:oe,spanCount:ie,stakingAccount:re}=function(e,s){var n;const a=(0,t.useMemo)((()=>[s]),[s]),o=(0,m.W7)(null==(n=e.derive.balances)?void 0:n.all,a),i=(0,m.W7)(e.derive.staking.account,a);return{balancesAll:o,spanCount:M(s),stakingAccount:i}}(E,b),le=(0,t.useMemo)((()=>function(e,s=[]){return s.map((([s,n])=>({era:s,slashes:n.filter((({others:s,validator:n})=>n.eq(e)||s.some((([s])=>s.eq(e)))))}))).filter((({slashes:e})=>e.length))}(b,e)),[e,b]),ce=(0,t.useCallback)((()=>q({accountId:n,extrinsic:1===E.tx.staking.withdrawUnbonded.meta.args.length?E.tx.staking.withdrawUnbonded(ie):E.tx.staking.withdrawUnbonded()})),[E,n,q,ie]),de=!(null==re||!re.stakingLedger||null!=(A=re.stakingLedger.active)&&A.isEmpty);return(0,w.jsxs)(He,{className:s,children:[(0,w.jsx)("td",{className:"badge together",children:0!==le.length&&(0,w.jsx)(l.Ct,{color:"red",hover:T("Slashed in era {{eras}}",{replace:{eras:le.map((({era:e})=>(0,I.u)(e))).join(", ")}}),icon:"skull-crossbones"})}),(0,w.jsxs)("td",{className:"address",children:[(0,w.jsx)(l.N,{value:b}),_&&(0,w.jsx)(F,{controllerId:n,onClose:$,stakingInfo:re,stashId:b}),O&&(0,w.jsx)(W,{onClose:V}),R&&n&&(0,w.jsx)(Q,{controllerId:n,onClose:Z,stashId:b}),B&&n&&(0,w.jsx)(me,{controllerId:n,nominating:x,onClose:L,stashId:b,targets:C}),H&&(0,w.jsx)(pe,{controllerId:n,onClose:z,stakingInfo:re,stashId:b}),G&&n&&(0,w.jsx)(je,{defaultControllerId:n,onClose:X,stashId:b}),U&&n&&(0,w.jsx)(Ne,{controllerId:n,defaultDestination:a,onClose:J,stashId:b}),K&&n&&(0,w.jsx)(Pe,{controllerId:n,onClose:Y,stashId:b}),ee&&(0,w.jsx)(qe,{controllerId:n,onClose:se,stakingLedger:v,stashId:b}),ne&&n&&(0,w.jsx)(Re,{controllerId:n,minCommission:N,onClose:ae,stashId:b})]}),(0,w.jsx)("td",{className:"address",children:(0,w.jsx)(l.ax,{value:n})}),(0,w.jsx)("td",{className:"start media--1200",children:null!=a&&a.isAccount?(0,w.jsx)(l.ax,{value:a.asAccount}):null==a?void 0:a.toString()}),(0,w.jsxs)("td",{className:"number",children:[(0,w.jsx)(l.d4,{stakingInfo:re}),(0,w.jsx)(l.JM,{stakingInfo:re}),(0,w.jsx)(l.by,{stakingInfo:re})]}),p?(0,w.jsxs)("td",{className:"all",children:[(0,w.jsx)(l.hl,{address:b,withBalance:!1,withHexSessionId:"0x"!==o&&[i,o],withValidatorPrefs:!0}),(0,w.jsx)(Be,{minBond:C.minValidatorBond,stakingInfo:re})]}):(0,w.jsx)("td",{className:"all expand",children:h&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(te,{nominating:x,stashId:b}),(0,w.jsx)(Be,{minBond:C.minNominatorBond,stakingInfo:re})]})}),(0,w.jsx)("td",{className:"button",children:!r&&(0,w.jsxs)(w.Fragment,{children:[h||p?(0,w.jsx)(l.cA,{accountId:n,icon:"stop",isDisabled:!d||j,label:T("Stop"),tx:E.tx.staking.chill},"stop"):(0,w.jsxs)(l.zx.Group,{children:[f.length&&"0x"!==o?(0,w.jsx)(l.zx,{icon:"certificate",isDisabled:!d||j||!de,label:T("Validate"),onClick:ae},"validate"):(0,w.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:!d||j,label:T("Session Key"),onClick:Y},"set"),(0,w.jsx)(l.zx,{icon:"hand-paper",isDisabled:!d||j||!de,label:T("Nominate"),onClick:L},"nominate")]}),(0,w.jsx)(l.GI,{isDisabled:j,value:(0,w.jsxs)(l.v2,{children:[(0,w.jsx)(l.v2.Item,{isDisabled:!u||!(null!=oe&&oe.freeBalance.gtn(0)),label:T("Bond more funds"),onClick:$}),(0,w.jsx)(l.v2.Item,{isDisabled:!d||!re||!re.stakingLedger||(null==(P=re.stakingLedger.active)?void 0:P.isEmpty),label:T("Unbond funds"),onClick:se}),(0,w.jsx)(l.v2.Item,{isDisabled:!(d&&re&&re.unlocking&&re.unlocking.length),label:T("Rebond funds"),onClick:z}),(0,w.jsx)(l.v2.Item,{isDisabled:!(d&&re&&re.redeemable&&re.redeemable.gtn(0)),label:T("Withdraw unbonded funds"),onClick:ce}),(0,w.jsx)(l.v2.Divider,{}),(0,w.jsx)(l.v2.Item,{isDisabled:!u,label:T("Change controller account"),onClick:X}),(0,w.jsx)(l.v2.Item,{isDisabled:!d,label:T("Change reward destination"),onClick:J}),p&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.v2.Item,{isDisabled:!d,label:T("Change validator preferences"),onClick:ae}),(0,g.m)(E.tx.staking.kick)&&(0,w.jsx)(l.v2.Item,{isDisabled:!d,label:T("Remove nominees"),onClick:Z})]}),(0,w.jsx)(l.v2.Divider,{}),!h&&(0,w.jsx)(l.v2.Item,{isDisabled:!d,label:T("Change session keys"),onClick:Y}),h&&(0,w.jsx)(l.v2.Item,{isDisabled:!d||!(null!=(D=C.validators)&&D.length),label:T("Set nominees"),onClick:L}),!h&&(0,w.jsx)(l.v2.Item,{label:T("Inject session keys (advanced)"),onClick:V})]})},"settings")]})})]})}const He=o.ZP.tr.withConfig({displayName:"Account__StyledTr",componentId:"sc-7gd0gd-0"})([".ui--Button-Group{display:inline-block;margin-right:0.25rem;vertical-align:inherit;}"]),We=t.memo(Le);function ze({allSlashes:e,className:s,footer:n,isInElection:a,list:o,minCommission:i,targets:r}){const{t:c}=(0,y.$)(),d=(0,t.useRef)([[c("stashes"),"start",2],[c("controller"),"address"],[c("rewards"),"start media--1200"],[c("bonded"),"number"],[],[]]);return(0,w.jsx)(l.iA,{className:s,empty:o&&c("No funds staked yet. Bond funds to validate or nominate a validator"),footer:n,header:d.current,children:null==o?void 0:o.map((s=>(0,w.jsx)(We,{allSlashes:e,info:s,isDisabled:a,minCommission:i,targets:r},s.stashId)))})}const Ue=t.memo(ze),Je={bondOwnTx:null,bondTx:null,controllerId:null,controllerTx:null,stashId:null};function Ge({className:e="",isNominating:s,minNominated:n,minNominatorBond:a,minValidatorBond:o,onChange:i}){var r,d;const{t:u}=(0,y.$)(),{api:h}=(0,c.h)(),[p,x]=(0,t.useState)(),[g,f]=(0,t.useState)(null),[v,b]=(0,t.useState)(!1),[N,C]=(0,t.useState)(null),[k,S]=(0,t.useState)("Staked"),[I,A]=(0,t.useState)(null),[P,M]=(0,t.useState)(null),[T,E]=(0,t.useState)(null),q=(0,m.W7)(null==(r=h.derive.balances)?void 0:r.all,[P]),$=(0,m.W7)(null==(d=h.derive.balances)?void 0:d.all,[I]),F=De(),O=(0,t.useMemo)((()=>ye(u)),[u]),V=(0,t.useCallback)(((e,s)=>b(s)),[]);(0,t.useEffect)((()=>{q&&E(q.freeBalance.gt(h.consts.balances.existentialDeposit)?q.freeBalance.sub(h.consts.balances.existentialDeposit):j.nw)}),[h,q]),(0,t.useEffect)((()=>{E(null)}),[P]),(0,t.useEffect)((()=>{const e="Account"===k?{Account:I}:k;i(p&&p.gtn(0)&&(null==g||!g.error)&&!v&&N&&P?{bondOwnTx:h.tx.staking.bond(P,p,e),bondTx:h.tx.staking.bond(N,p,e),controllerId:N,controllerTx:h.tx.staking.setController(N),stashId:P}:Je)}),[h,p,g,v,N,k,I,P,i]);const R=!(null==p||!p.gtn(0)),Z="Account"===k,B=Z&&$&&$.accountId.eq(I)&&$.freeBalance.isZero();return(0,w.jsxs)("div",{className:e,children:[(0,w.jsxs)(l.u_.Columns,{hint:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{children:u("Think of the stash as your cold wallet and the controller as your hot wallet. Funding operations are controlled by the stash, any other non-funding actions by the controller itself.")}),(0,w.jsx)("p",{children:u("To ensure optimal fund security using the same stash/controller is strongly discouraged, but not forbidden.")})]}),children:[(0,w.jsx)(l.rp,{label:u("stash account"),onChange:M,type:"account",value:P}),(0,w.jsx)(l.rp,{label:u("controller account"),onChange:C,type:"account",value:N}),(0,w.jsx)(ve,{accountId:P,controllerId:N,onError:V})]}),T&&(0,w.jsxs)(l.u_.Columns,{hint:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{children:u("The amount placed at-stake should not be your full available amount to allow for transaction fees.")}),(0,w.jsx)("p",{children:u("Once bonded, it will need to be unlocked/withdrawn and will be locked for at least the bonding duration.")})]}),children:[(0,w.jsx)(l.H,{autoFocus:!0,defaultValue:T,isError:!R||!(null==g||!g.error),label:u("value bonded"),labelExtra:(0,w.jsx)(D.Z,{label:(0,w.jsx)("span",{className:"label",children:u("balance")}),params:P}),onChange:x}),(0,w.jsx)(_,{controllerId:N,isNominating:s,minNominated:n,minNominatorBond:a,minValidatorBond:o,onError:f,stashId:P,value:p}),(null==F?void 0:F.gtn(0))&&(0,w.jsx)(l.qG,{label:u("on-chain bonding duration"),children:(0,w.jsx)(Me.Z,{value:F})})]}),(0,w.jsxs)(l.u_.Columns,{hint:u("Rewards (once paid) can be deposited to either the stash or controller, with different effects."),children:[(0,w.jsx)(l.Lt,{defaultValue:0,label:u("payment destination"),onChange:S,options:O,value:k}),Z&&(0,w.jsx)(l.rp,{label:u("the payment account"),onChange:A,type:"account",value:I}),B&&(0,w.jsx)(l.oy,{content:u("The selected destination account does not exist and cannot be used to receive rewards")})]})]})}const Qe=t.memo(Ge),Xe=[];function Ke({isInElection:e,targets:s}){var n,a;const{t:o}=(0,y.$)(),{api:i}=(0,c.h)(),[r,d]=(0,S.O)(),[{bondOwnTx:u,bondTx:m,controllerId:h,controllerTx:p,stashId:x},f]=(0,t.useState)({}),[{nominateTx:v},b]=(0,t.useState)({}),[j,N]=(0,t.useState)(1),C=e||!(0,g.m)(null==(n=i.tx.utility)?void 0:n.batch),k=(0,t.useCallback)((()=>N((e=>e+1))),[]),I=(0,t.useCallback)((()=>N((e=>e-1))),[]),A=(0,t.useCallback)((()=>{f({}),b({}),N(1),d()}),[d]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.zx,{icon:"plus",isDisabled:C||!(null!=(a=s.validators)&&a.length),label:o("Nominator"),onClick:A},"new-nominator"),r&&(0,w.jsxs)(l.u_,{header:o("Setup Nominator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:j}}),onClose:A,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[1===j&&(0,w.jsx)(Qe,{isNominating:!0,minNominated:s.minNominated,minNominatorBond:s.minNominatorBond,onChange:f}),h&&x&&2===j&&(0,w.jsx)(ce,{controllerId:h,nominating:Xe,onChange:b,stashId:x,targets:s}),(0,w.jsx)(l.u_.Columns,{children:(0,w.jsx)(l.RN,{})})]}),(0,w.jsxs)(l.u_.Actions,{children:[(0,w.jsx)(l.zx,{icon:"step-backward",isDisabled:1===j,label:o("prev"),onClick:I}),2===j?(0,w.jsx)(l.cA,{accountId:x,icon:"sign-in-alt",isDisabled:!(m&&v&&x&&h),label:o("Bond & Nominate"),onStart:A,params:[x===h?[m,v]:[u,v,p]],tx:i.tx.utility.batchAll||i.tx.utility.batch}):(0,w.jsx)(l.zx,{icon:"step-forward",isDisabled:!m,label:o("next"),onClick:k})]})]})]})}const Ye=t.memo(Ke);function es(){const{t:e}=(0,y.$)(),[s,n]=(0,S.O)(),[{bondTx:a,stashId:o},i]=(0,t.useState)({}),r=(0,t.useCallback)((()=>{i({}),n()}),[n]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.zx,{icon:"plus",label:e("Stash"),onClick:r},"new-stash"),s&&(0,w.jsxs)(l.u_,{header:e("Bonding Preferences"),onClose:r,size:"large",children:[(0,w.jsx)(l.u_.Content,{children:(0,w.jsx)(Qe,{onChange:i})}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:o,extrinsic:a,icon:"sign-in-alt",isDisabled:!a||!o,label:e("Bond"),onStart:r})})]})]})}const ss=t.memo(es);function ns({isInElection:e,minCommission:s,targets:n}){var a;const{t:o}=(0,y.$)(),{api:i}=(0,c.h)(),[r,d]=(0,S.O)(),[{bondOwnTx:u,bondTx:m,controllerId:h,controllerTx:p,stashId:x},f]=(0,t.useState)({}),[{sessionTx:v},b]=(0,t.useState)({}),[{validateTx:j},N]=(0,t.useState)({}),[C,k]=(0,t.useState)(1),I=e||!(0,g.m)(null==(a=i.tx.utility)?void 0:a.batch),A=(0,t.useCallback)((()=>k((e=>e+1))),[]),P=(0,t.useCallback)((()=>k((e=>e-1))),[]),M=(0,t.useCallback)((()=>{f({}),b({}),N({}),k(1),d()}),[d]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.zx,{icon:"plus",isDisabled:I,label:o("Validator"),onClick:M},"new-validator"),r&&(0,w.jsxs)(l.u_,{header:o("Setup Validator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:C}}),onClose:M,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[1===C&&(0,w.jsx)(Qe,{minValidatorBond:n.minValidatorBond,onChange:f}),h&&x&&2===C&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Ie,{controllerId:h,onChange:b,stashId:x,withFocus:!0}),(0,w.jsx)(Oe,{controllerId:h,minCommission:s,onChange:N,stashId:x})]}),(0,w.jsx)(l.u_.Columns,{children:(0,w.jsx)(l.RN,{})})]}),(0,w.jsxs)(l.u_.Actions,{children:[(0,w.jsx)(l.zx,{icon:"step-backward",isDisabled:1===C,label:o("prev"),onClick:P}),2===C?(0,w.jsx)(l.cA,{accountId:x,icon:"sign-in-alt",isDisabled:!m||!v||!j,label:o("Bond & Validate"),onStart:M,params:[h===x?[m,v,j]:[u,v,j,p]],tx:i.tx.utility.batchAll||i.tx.utility.batch}):(0,w.jsx)(l.zx,{icon:"step-forward",isDisabled:!m,label:o("next"),onClick:A})]})]})]})}const ts=t.memo(ns);var as=n(53469),os=n(69811);const is="rewards";function rs({className:e,controllerId:s,onClose:n,poolId:a}){const{t:o}=(0,y.$)(),{api:i}=(0,c.h)(),[r,d]=(0,t.useState)(is),[u,m]=(0,t.useState)(),h=(0,os.Z)(s,u,j.nw),p=(0,t.useRef)([{text:o("Free balance"),value:"free"},{text:o("Pool rewards"),value:"rewards"}]);return(0,w.jsxs)(l.u_,{className:e,header:o("Bond extra into pool"),onClose:n,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsx)(ie,{controllerId:s,poolId:a}),(0,w.jsxs)(l.u_.Columns,{hint:o("You can either bond a specific amount from your free balance, or all of the accumulated rewards."),children:[(0,w.jsx)(l.Lt,{defaultValue:is,label:o("type of funds to bond"),onChange:d,options:p.current}),"free"===r&&(0,w.jsx)(l.H,{autoFocus:!0,isError:h,label:o("additional free funds to bond"),labelExtra:(0,w.jsx)(D.Z,{label:(0,w.jsx)("span",{className:"label",children:o("balance")}),params:s}),onChange:m})]})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:s,icon:"sign-in-alt",isDisabled:"free"===r&&h,label:o("Bond Extra"),onStart:n,params:["free"===r?{FreeBalance:u}:"Rewards"],tx:i.tx.nominationPools.bondExtra})})]})}const ls=t.memo(rs);function cs({className:e,controllerId:s,maxUnbond:n,onClose:a,poolId:o}){const{t:i}=(0,y.$)(),{api:r}=(0,c.h)(),[d,u]=(0,t.useState)(),m=De(),h=!d||!n||d.gt(n);return(0,w.jsxs)(l.u_,{className:e,header:i("Unbond funds from pool"),onClose:a,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsx)(ie,{controllerId:s,poolId:o}),(0,w.jsxs)(l.u_.Columns,{hint:i("The amount to unbond. It should be less or equal to the full bonded amount."),children:[(0,w.jsx)(l.H,{autoFocus:!0,defaultValue:n,isError:h,label:i("amount to unbond"),labelExtra:(0,w.jsx)(f.Z,{label:(0,w.jsx)("span",{className:"label",children:i("bonded")}),value:n}),maxValue:n,onChange:u,withMax:!0}),(null==m?void 0:m.gtn(0))&&(0,w.jsx)(l.qG,{label:i("on-chain bonding duration"),children:(0,w.jsx)(Me.Z,{value:m})})]})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:s,icon:"unlock",isDisabled:h,label:i("Unbond"),onStart:a,params:[s,d],tx:r.tx.nominationPools.unbond})})]})}const ds=t.memo(cs),us={transform:e=>e.unwrapOr(null)},ms=(0,A.e)("useAccountInfo",(function(e){const{api:s}=(0,c.h)(),n=(0,K.X)(),[a,o]=(0,t.useState)(null),i=(0,m.W7)(s.query.nominationPools.poolMembers,[e],us);return(0,t.useEffect)((()=>{i&&s.call.nominationPoolsApi&&s.call.nominationPoolsApi.pendingRewards(e).then((e=>n.current&&o({claimable:e,member:i}))).catch(console.error)}),[e,i,s,n]),a}));function hs({accountId:e,className:s,info:{bonded:{roles:n},metadata:a,nominating:o,stashId:i},isFirst:r,poolId:d,sessionProgress:u,targets:m}){const{t:h}=(0,y.$)(),{api:p}=(0,c.h)(),x=M(i),{queueExtrinsic:g}=(0,k.L)(),[v,j]=(0,S.O)(),[N,C]=(0,S.O)(),[A,P]=(0,S.O)(),D=ms(e),T=(0,t.useMemo)((()=>u&&D&&D.member.unbondingEras&&!D.member.unbondingEras.isEmpty?function(e,s,{activeEra:n},{unbondingEras:t}){const a=[],o=new(b())(0);for(const[e,s]of t.entries())e.lte(n)?o.iadd(s):a.push({remainingEras:e.sub(n),value:s});return{accountId:e,controllerId:e,redeemable:o,stashId:s,unlocking:a}}(e,i,u,D.member):null),[D,e,i,u]),E=(0,t.useCallback)((()=>g({accountId:e,extrinsic:p.tx.nominationPools.claimPayout()})),[p,e,g]),q=(0,t.useCallback)((()=>g({accountId:e,extrinsic:p.tx.nominationPools.withdrawUnbonded(e,x)})),[p,e,x,g]),{isNominator:_}=(0,t.useMemo)((()=>function(e,{nominator:s,root:n}){return{isNominator:s.eq(e)||n.eq(e)}}(e,n)),[e,n]);return(0,w.jsxs)("tr",{className:s,children:[(0,w.jsx)("td",{className:"number",children:(0,w.jsx)("h1",{children:r&&(0,I.u)(d)})}),(0,w.jsx)("td",{className:"start",children:r&&a}),(0,w.jsx)("td",{className:"address",children:(0,w.jsx)(l.N,{value:e})}),(0,w.jsx)("td",{className:"number",children:D&&(0,w.jsxs)(w.Fragment,{children:[!D.member.points.isZero()&&(0,w.jsx)(f.Z,{value:D.member.points}),T&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.JM,{stakingInfo:T}),(0,w.jsx)(l.by,{isPool:!0,stakingInfo:T})]})]})}),(0,w.jsx)("td",{className:"number",children:D&&!D.claimable.isZero()&&(0,w.jsx)(f.Z,{value:D.claimable})}),(0,w.jsx)("td",{className:"number",children:r&&o&&(0,w.jsx)(te,{nominating:o,stashId:i})}),(0,w.jsxs)("td",{className:"button",children:[(0,w.jsx)(l.Ct,{color:_?"green":"transparent",icon:"hand-paper"}),v&&(0,w.jsx)(ls,{controllerId:e,onClose:j,poolId:d}),N&&(0,w.jsx)(me,{controllerId:e,nominating:o,onClose:C,poolId:d,stashId:e,targets:m}),D&&A&&(0,w.jsx)(ds,{controllerId:e,maxUnbond:D.member.points,onClose:P,poolId:d}),(0,w.jsx)(l.GI,{value:(0,w.jsxs)(l.v2,{children:[(0,w.jsx)(l.v2.Item,{label:h("Bond more funds"),onClick:j}),(0,w.jsx)(l.v2.Item,{isDisabled:!D||D.member.points.isZero(),label:h("Unbond funds"),onClick:P}),(0,w.jsx)(l.v2.Divider,{}),(0,w.jsx)(l.v2.Item,{isDisabled:!D||D.claimable.isZero(),label:h("Withdraw claimable"),onClick:E}),(0,w.jsx)(l.v2.Item,{isDisabled:!T||T.redeemable.isZero(),label:h("Withdraw unbonded"),onClick:q}),(0,w.jsx)(l.v2.Divider,{}),(0,w.jsx)(l.v2.Item,{isDisabled:!_,label:h("Set nominees"),onClick:C})]})},"settings")]})]})}const ps=t.memo(hs);function xs({className:e,count:s,members:n,poolId:t,sessionProgress:a,targets:o}){const i=(0,as.Z)(t);return i?(0,w.jsx)(w.Fragment,{children:Object.keys(n).map(((n,r)=>(0,w.jsx)(ps,{accountId:n,className:`${e||""} ${s%2?"isEven":"isOdd"}`,info:i,isFirst:0===r,poolId:t,sessionProgress:a,targets:o},`${t.toString()}:${n}`)))}):null}const gs=t.memo(xs);function fs({className:e,list:s,targets:n}){const{t:a}=(0,y.$)(),{api:o}=(0,c.h)(),i=(0,m.W7)(o.derive.session.progress),r=(0,t.useRef)([[a("pools"),"start",2],[a("account"),"address"],[a("bonded")],[a("claimable")],[],[]]);return(0,w.jsx)(l.iA,{className:e,empty:s&&a("Not participating in any pools. Join a pool first."),header:r.current,children:null==s?void 0:s.map((({members:e,poolId:s},t)=>(0,w.jsx)(gs,{count:t,members:e,poolId:s,sessionProgress:i,targets:n},s.toString())))})}const vs=t.memo(fs);function bs({isStashNominating:e,isStashValidating:s}){return s?1:e?5:99}function js(e,s){return bs(e)-bs(s)}function ys(e,s){return s.filter((({isStashNominating:s,isStashValidating:n})=>{switch(e){case 1:return s;case 2:return n;case 3:return!s&&!n;default:return!0}}))}function ws(e,s){const n=function(e,{bondedNoms:s,bondedNone:n,bondedTotal:t,bondedVals:a}){switch(e){case 0:default:return t;case 1:return s;case 2:return a;case 3:return n}}(e,s);return n&&(0,w.jsx)(f.Z,{value:n})}function Ns({className:e="",isInElection:s,minCommission:n,ownPools:a,ownStashes:o,targets:i}){const{t:r}=(0,y.$)(),{api:d}=(0,c.h)(),u=(0,x.g)(),[m,h]=(0,t.useState)(0),[p,g]=(0,t.useState)(0),f=(0,t.useRef)([{text:r("Stashed"),value:"stash"},{text:r("Pooled"),value:"pool"}]),v=(0,t.useRef)([{text:r("All stashes"),value:"all"},{text:r("Nominators"),value:"noms"},{text:r("Validators"),value:"vals"},{text:r("Inactive"),value:"chill"}]),N=(0,t.useMemo)((()=>function(e){if(!e)return{};const s=new(b())(0),n=new(b())(0),t=new(b())(0),a=new(b())(0);return e.forEach((({isStashNominating:e,isStashValidating:o,stakingLedger:i})=>{const r=i&&i.total?i.total.unwrap():j.nw;a.iadd(r),e?s.iadd(r):o?t.iadd(r):n.iadd(r)})),{bondedNoms:s,bondedNone:n,bondedTotal:a,bondedVals:t,foundStashes:e.sort(js)}}(o)),[o]),[k,S]=(0,t.useMemo)((()=>[N.foundStashes&&ys(p,N.foundStashes),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{colSpan:4}),(0,w.jsx)("td",{className:"number",children:ws(p,N)}),(0,w.jsx)("td",{colSpan:2})]},"footer")]),[N,p]);return(0,w.jsxs)("div",{className:e,children:[(0,w.jsxs)(l.zx.Group,{children:[d.consts.nominationPools&&(0,w.jsx)(l.tX,{onChange:h,options:f.current,value:m}),0===m&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.tX,{onChange:g,options:v.current,value:p}),(0,w.jsx)(Ye,{isInElection:s,targets:i}),(0,w.jsx)(ts,{isInElection:s,minCommission:n,targets:i}),(0,w.jsx)(ss,{})]})]}),(0,w.jsx)(C,{isInElection:s}),0===m?(0,w.jsx)(Ue,{allSlashes:u,footer:S,isInElection:s,list:k,minCommission:n,targets:i}):(0,w.jsx)(vs,{allSlashes:u,list:a,targets:i})]})}const Cs=t.memo(Ns);var ks=n(95155);const Ss=(0,A.e)("useQueryModule",(function(){const{api:e}=(0,c.h)();return(0,t.useMemo)((()=>e.query.voterList||e.query.voterBagsList||e.query.bagsList),[e])})),Is={transform:e=>e.filter((e=>e.isSome)).map((e=>e.unwrap())).reduce(((e,s)=>{const n=s.bagUpper.toString();return e[n]||(e[n]=[]),e[n].push({node:s,stashId:s.id.toString()}),e}),{})},As=(0,A.e)("useBagsNodes",(function(e){const s=Ss(),[n,a]=(0,t.useState)(),o=(0,m.W7)(s.listNodes.multi,[e],Is);return(0,t.useEffect)((()=>{o&&a((e=>function(e,s){return Object.entries(s).reduce(((s,[n,t])=>(s[n]=e&&e[n]&&JSON.stringify(t)===JSON.stringify(e[n])?e[n]:t,s)),{})}(e,o)))}),[o]),n}));function Ps({bagUpper:e,stashIds:s}){const{t:n}=(0,y.$)(),{api:a}=(0,c.h)(),[o,i]=(0,t.useState)(null),[r,d]=(0,S.O)(),u=As(s),m=(0,t.useMemo)((()=>u?function(e,s){return Object.values(e[s.toString()]||{}).map((({stashId:e})=>e))}(u,e):[]),[e,u]),[h,p]=(0,t.useState)([]),x=(0,t.useMemo)((()=>h.map((e=>(a.tx.voterBagsList||a.tx.bagsList||a.tx.voterList).rebag(e)))),[a,h]),g=(0,ks.b)(x);return m.length?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.zx,{icon:"refresh",label:n("Rebag {{count}}",{replace:{count:m.length}}),onClick:d}),r&&(0,w.jsxs)(l.u_,{header:n("Rebag dislocated entries"),onClose:d,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsx)(l.u_.Columns,{hint:n("The account that will submit the rebag transaction."),children:(0,w.jsx)(l.rp,{label:n("rebag from account"),onChange:i,type:"account"})}),(0,w.jsx)(l.u_.Columns,{hint:n("The accounts that will be rebagged as a result of this operation."),children:(0,w.jsx)(l.m3,{available:m,availableLabel:n("unselected"),defaultValue:m,maxCount:Number.MAX_SAFE_INTEGER,onChange:p,valueLabel:n("to rebag")})})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:o,extrinsic:g,icon:"refresh",isDisabled:!g||!h.length,label:n("Rebag"),onStart:d})})]})]}):null}const Ms=t.memo(Ps);function Ds({bagLower:e,bagUpper:s,className:n,isLoading:a,list:o,stashId:i}){const{t:r}=(0,y.$)(),{api:d}=(0,c.h)(),{canJump:u,jumpCount:m,stashInfo:h}=(0,t.useMemo)((()=>function(e,s,n,t=[]){const a=t.find((e=>e.stashId===n))||null,o=a&&a.jump&&t.find((e=>e.stashId===a.jump))||null;return{canJump:!!o,jumpCount:a&&o?a.index-o.index:0,stashInfo:a}}(0,0,i,o)),[e,s,o,i]);return(0,w.jsxs)(Ts,{className:n,children:[(0,w.jsx)(l.ax,{value:i,withBonded:!0}),h&&(u?(0,w.jsx)(l.cA,{accountId:h.stashId,icon:"caret-up",isDisabled:a,label:r("Move up {{jumpCount}}",{replace:{jumpCount:m}}),params:[h.jump],tx:(d.tx.voterBagsList||d.tx.bagsList||d.tx.voterList).putInFrontOf}):null)]})}const Ts=o.ZP.div.withConfig({displayName:"Stash__StyledDiv",componentId:"sc-pbzzk3-0"})([".ui--AddressMini{vertical-align:middle;}"]),Es=t.memo(Ds),qs=[null,{isCompleted:!1,list:[]}],_s=[],$s=(0,A.e)("useBagEntries",(function(e,s){const n=Ss(),[[a,{isCompleted:o,list:i}],r]=(0,t.useState)(qs),l=(0,m.W7)(!!a&&n.listNodes,[a]);return(0,t.useEffect)((()=>r(e&&s?[e,{isCompleted:!1,list:[e]}]:[null,{isCompleted:!0,list:[]}])),[e,s]),(0,t.useEffect)((()=>{if(l&&l.isSome){const{next:e}=l.unwrap();if(e.isSome){const s=e.unwrap();r((([,{list:e}])=>[s,{isCompleted:!1,list:[...e,s]}]))}else r((([e,{list:s}])=>[e,{isCompleted:!0,list:s}]))}}),[l]),[o,o?i:_s]})),Fs={transform:e=>{const s=e.map((({stakingLedger:e,stashId:s},n)=>({bonded:e.active.unwrap(),index:n,jump:null,stashId:s.toString()})));return s.map((e=>{const n=s.find((({bonded:s,index:n})=>n<e.index&&s.lt(e.bonded)));return n&&(e.jump=n.stashId),e}))}},Os=(0,A.e)("useBonded",(function(e){const{api:s}=(0,c.h)();return(0,m.W7)(e&&0!==e.length&&s.derive.staking.accounts,[e],Fs)}));function Vs({bagLower:e,bagUpper:s,info:n,nodesOwn:a}){const[[o,i],r]=(0,t.useState)([null,0]),[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)(!0),[h,p]=$s(o,i),x=Os(p);return(0,t.useEffect)((()=>{n&&a&&r((([,e])=>[n.head.unwrapOr(null),++e]))}),[n,a]),(0,t.useEffect)((()=>{m(!(!a||!a.length||h&&x))}),[x,h,a]),(0,t.useEffect)((()=>{!u&&x&&d(function(e,s,n){return e.filter((({bonded:e})=>e.gt(s)||e.lt(n))).map((({stashId:e})=>e))}(x,s,e))}),[e,s,x,u]),(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"number"}),(0,w.jsx)(l.iA.Column.Balance,{value:s}),(0,w.jsx)(l.iA.Column.Balance,{value:e}),(0,w.jsx)("td",{className:"address",children:n.head.isSome&&(0,w.jsx)(l.ax,{value:n.head.unwrap()})}),(0,w.jsx)("td",{className:"address",children:n.tail.isSome&&(0,w.jsx)(l.ax,{value:n.tail.unwrap()})}),(0,w.jsx)("td",{className:"address",children:null==a?void 0:a.map((({stashId:n})=>(0,w.jsx)(Es,{bagLower:e,bagUpper:s,isLoading:u,list:x,stashId:n},n)))}),(0,w.jsx)("td",{className:"number",children:u?(0,w.jsx)("span",{className:"--tmp",children:"99"}):p.length?(0,I.u)(p.length):null}),(0,w.jsx)("td",{className:"button",children:!u&&(0,w.jsx)(Ms,{bagLower:e,bagUpper:s,stashIds:c})})]})}const Rs=t.memo(Vs);var Zs=n(65968);function Bs({bags:e,className:s="",mapOwn:n}){const{t:a}=(0,y.$)(),o=Ss(),i=(0,m.W7)(o.counterForListNodes),r=(0,t.useMemo)((()=>n&&Object.values(n).reduce(((e,s)=>e+s.length),0)),[n]);return(0,w.jsxs)(l.Ty,{className:s,children:[(0,w.jsx)(l.Jy,{label:a("total bags"),children:e?(0,I.u)(e.length):(0,w.jsx)("span",{className:"--tmp",children:"99"})}),(0,w.jsxs)("section",{children:[(0,w.jsx)(l.Jy,{label:a("total nodes"),children:n?(0,I.u)(i):(0,w.jsx)("span",{className:"--tmp",children:"99"})}),(0,w.jsx)(l.Jy,{label:a("my nodes"),children:(0,Zs.h)(r)?(0,I.u)(r):(0,w.jsx)("span",{className:"--tmp",children:"99"})})]})]})}const Ls=t.memo(Bs);var Hs=n(57513);const Ws={transform:e=>e.map((({args:[e]})=>e))},zs={transform:([[e],s])=>{const n=e.map(((e,n)=>[e,s[n]])).filter((([,e])=>e.isSome)).sort((([e],[s])=>s.cmp(e))).map((([e,s],n)=>({bagLower:j.nw,bagUpper:e,index:n,info:s.unwrap(),key:e.toString()})));return n.map(((e,s)=>s===n.length-1?e:{...e,bagLower:n[s+1].bagUpper}))},withParamsTransform:!0},Us=(0,A.e)("useBagsList",(function(){const e=Ss(),[s,n]=(0,t.useState)(),a=(0,Hs.k)(e.listBags,[],Ws),o=(0,m.W7)(a&&0!==a.length&&e.listBags.multi,[a],zs);return(0,t.useEffect)((()=>{o&&n((e=>function(e,s){return e&&s.length===e.length?s.map(((s,n)=>JSON.stringify(s)===JSON.stringify(e[n])?e[n]:s)):s}(e,o)))}),[o]),s}));function Js({className:e,ownStashes:s}){const{t:n}=(0,y.$)(),a=(0,t.useMemo)((()=>s?s.map((({stashId:e})=>e)):[]),[s]),[o,i]=(0,t.useState)((()=>a.length?0:1)),r=Us(),c=As(a),d=(0,t.useRef)([[n("bags")],[n("max"),"number"],[n("min"),"number"],[n("first"),"address"],[n("last"),"address"],[n("stashes"),"address"],[n("nodes"),"number"],[void 0,"mini"]]),u=(0,t.useMemo)((()=>[{isDisabled:!a.length,text:n("My bags"),value:"mine"},{text:n("All bags"),value:"all"}]),[a,n]),m=(0,t.useMemo)((()=>{return r&&c&&(e=c,s=!o,r.map((s=>[s,e[s.key]])).filter((([,e])=>!s||!!e)));var e,s}),[r,o,c]);return(0,w.jsxs)("div",{className:e,children:[(0,w.jsx)(Ls,{bags:r,mapOwn:c}),(0,w.jsx)(l.zx.Group,{children:(0,w.jsx)(l.tX,{onChange:i,options:u,value:o})}),(0,w.jsxs)(l.Pd,{className:"warning centered",withIcon:!1,children:[(0,w.jsx)("p",{children:n("The All bags list is composed of bags that each describe a range of active bonded funds of the nominators. In each bag is a list of nodes that correspond to a nominator and their staked funds.")}),(0,w.jsx)("p",{children:n("Within the context of a single bag, nodes are not sorted by their stake, but instead placed in insertion order. In other words, the most recently inserted node will be the last node in the bag, regardless of stake. Events like staking rewards or slashes do not automatically put you in a different bag. The bags-list pallet comes with an important permissionless extrinsic: rebag. This allows anyone to specify another account that is in the wrong bag, and place it in the correct one.")})]}),(0,w.jsx)(l.iA,{empty:m&&n("No available bags"),emptySpinner:n("Retrieving all available bags, this will take some time"),header:d.current,children:null==m?void 0:m.map((([{bagLower:e,bagUpper:s,index:n,info:t,key:a},o])=>(0,w.jsx)(Rs,{bagLower:e,bagUpper:s,index:n,info:t,nodesOwn:o},a)))})]})}const Gs=t.memo(Js);var Qs=n(27229),Xs=n(19363);function Ks(e,s){return s.sort(((e,s)=>e.era.cmp(s.era))).map((({era:s,validatorId:n})=>e.tx.staking.payoutStakers(n,s)))}function Ys(e,s){if(!Array.isArray(s)){const{eras:n,validatorId:t}=s;return 1===n.length?[e.tx.staking.payoutStakers(t,n[0].era)]:Ks(e,n.map((e=>({era:e.era,validatorId:t}))))}return 1===s.length?Ys(e,s[0]):Ks(e,s.reduce(((e,{eras:s,validatorId:n})=>(s.forEach((({era:s})=>{e.push({era:s,validatorId:n})})),e)),[]))}function en({className:e,isAll:s,isDisabled:n,payout:a}){const{t:o}=(0,y.$)(),{api:i}=(0,c.h)(),[r,d]=(0,S.O)(),[u,m]=(0,t.useState)(null),[h,p]=(0,t.useState)(null),x=(0,t.useMemo)((()=>{var e;return{max:2304/((null==(e=i.consts.staking.maxNominatorRewardedPerValidator)?void 0:e.toNumber())||64)}}),[i]),g=(0,ks.b)(h,x);(0,t.useEffect)((()=>{a&&p((()=>Ys(i,a)))}),[i,a]);const f=!a||Array.isArray(a)&&0===a.length;return(0,w.jsxs)(w.Fragment,{children:[a&&r&&(0,w.jsxs)(sn,{className:e,header:o("Payout all stakers"),onClose:d,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsx)(l.u_.Columns,{hint:o("Any account can request payout for stakers, this is not limited to accounts that will be rewarded."),children:(0,w.jsx)(l.rp,{label:o("request payout from"),onChange:m,type:"account",value:u})}),(0,w.jsx)(l.u_.Columns,{hint:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{children:o("All the listed validators and all their nominators will receive their rewards.")}),(0,w.jsx)("p",{children:o("The UI puts a limit of 40 payouts at a time, where each payout is a single validator for a single era.")})]}),children:Array.isArray(a)?(0,w.jsx)(l.qG,{label:o("payout stakers for (multiple)"),value:a.map((({validatorId:e})=>(0,w.jsx)(l.ax,{className:"addressStatic",value:e},e)))}):(0,w.jsx)(l.rp,{defaultValue:a.validatorId,isDisabled:!0,label:o("payout stakers for (single)")})})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:u,extrinsic:g,icon:"credit-card",isDisabled:!g||!g.length||!u,label:o("Payout"),onStart:d})})]}),(0,w.jsx)(l.zx,{icon:"credit-card",isDisabled:n||f,label:s||Array.isArray(a)?o("Payout all"):o("Payout"),onClick:d})]})}const sn=(0,o.ZP)(l.u_).withConfig({displayName:"PayButton__StyledModal",componentId:"sc-1q1qq72-0"})([".ui--AddressMini.padded.addressStatic{display:inline-block;padding-top:0.5rem;.ui--AddressMini-info{min-width:10rem;max-width:10rem;}}"]),nn=t.memo(en),tn=(0,A.e)("useEraBlocks",(function(e,s){const{api:n}=(0,c.h)(),a=(0,m.W7)(n.derive.session.progress),o=(0,m.W7)(n.query.staking.forceEra);return(0,t.useMemo)((()=>e&&s&&o&&a&&a.sessionLength.gt(j.If)?(o.isForceAlways?a.sessionLength:a.eraLength).mul(e.sub(a.activeEra).iadd(s).iadd(j.If)).isub(o.isForceAlways?a.sessionProgress:a.eraProgress):void 0),[s,o,e,a])}));function an(e){return!Array.isArray(e)}function on(e){if(!e.length)return"";const s=e.sort(((e,s)=>e.cmp(s))).reduce(((e,s)=>{if(0===e.length)return[s];{const n=e[e.length-1];an(n)?n.add(j.If).eq(s)?e[e.length-1]=[n,s]:e.push(s):n[1].add(j.If).eq(s)?n[1]=s:e.push(s)}return e}),[]).map((e=>an(e)?(0,I.u)(e):`${(0,I.u)(e[0])}-${(0,I.u)(e[1])}`));return(0,w.jsx)(w.Fragment,{children:s.map(((e,s)=>(0,w.jsxs)(t.Fragment,{children:[0!==s&&", ",(0,w.jsx)("span",{children:e})]},e)))})}function rn({className:e="",historyDepth:s,payout:{available:n,rewards:a,stashId:o}}){const[{eraStr:i,oldestEra:r},c]=(0,t.useState)({eraStr:""}),d=tn(s,r);return(0,t.useEffect)((()=>{var e;a&&c({eraStr:on(a.map((({era:e})=>e))),oldestEra:null==(e=a[0])?void 0:e.era})}),[a]),(0,w.jsxs)("tr",{className:e,children:[(0,w.jsx)("td",{className:"address",colSpan:2,children:(0,w.jsx)(l.N,{value:o})}),(0,w.jsx)("td",{className:"start",children:(0,w.jsx)("span",{className:"payout-eras",children:i})}),(0,w.jsx)(l.iA.Column.Balance,{value:n}),(0,w.jsx)("td",{className:"number",children:(0,w.jsx)(Me.Z,{className:d?"":"--tmp",value:d||j.uy})}),(0,w.jsx)("td",{className:"button",colSpan:3})]})}const ln=t.memo(rn);function cn({className:e="",historyDepth:s,isDisabled:n,payout:a}){const{t:o}=(0,y.$)(),{eraStr:i,nominators:r,numNominators:c,oldestEra:d}=(0,t.useMemo)((()=>function(e){var s;const n=on(e.eras.map((({era:e})=>e))),t=e.eras.reduce(((e,{stashes:s})=>(Object.entries(s).forEach((([s,n])=>{e[s]?e[s]=e[s].add(n):e[s]=n})),e)),{});return{eraStr:n,nominators:t,numNominators:Object.keys(t).length,oldestEra:null==(s=e.eras[0])?void 0:s.era}}(a)),[a]),u=tn(s,d);return(0,w.jsxs)("tr",{className:e,children:[(0,w.jsx)("td",{className:"address",colSpan:2,children:(0,w.jsx)(l.N,{value:a.validatorId})}),(0,w.jsx)("td",{className:"start",children:(0,w.jsx)("span",{className:"payout-eras",children:i})}),(0,w.jsx)(l.iA.Column.Balance,{value:a.available}),(0,w.jsx)("td",{className:"number",children:u&&(0,w.jsx)(Me.Z,{value:u})}),(0,w.jsx)("td",{className:"expand",colSpan:2,children:(0,w.jsx)(l.xH,{summary:o("{{count}} own stashes",{replace:{count:c}}),children:Object.entries(r).map((([e,s])=>(0,w.jsx)(l.ax,{balance:s,value:e,withBalance:!0},e)))})}),(0,w.jsx)("td",{className:"button",children:(0,w.jsx)(nn,{isDisabled:n,payout:a})})]})}const dn=t.memo(cn),un=new(b())(864e5);function mn({className:e="",historyDepth:s,isInElection:n,ownPools:a,ownValidators:o}){const{t:i}=(0,y.$)(),{api:r}=(0,c.h)(),[d]=(0,t.useState)((()=>0!==o.length)),[u,h]=(0,t.useState)((()=>d?0:1)),[p,x]=(0,t.useState)(0),g=(0,m.W7)(r.derive.session.eraLength),f=(0,Qs.n)(),v=(0,t.useMemo)((()=>a&&a.map((({stashId:e})=>e))),[a]),N=(0,t.useMemo)((()=>function(e,s,n,t){if(!s||!n)return[{text:"",value:0}];const a=un.div(e),o=s.mul(n),i=[],r=new(b())(2);for(;;){const e=a.mul(r);if(e.gte(o))break;i.push({text:t("{{days}} days",{replace:{days:r.toString()}}),value:e.div(s).toNumber()}),r.imul(j.Jo)}return i.push({text:t("Max, {{eras}} eras",{replace:{eras:n.toNumber()}}),value:n.toNumber()}),i}(f,g,s,i)),[f,g,s,i]),{allRewards:k,isLoadingRewards:S}=(0,Xs.Q)(N[p].value,u?void 0:o,v),{stashAvail:I,stashes:A,valAvail:P,validators:M}=(0,t.useMemo)((()=>function(e){if(e){const s=function(e){return Object.entries(e).map((([e,s])=>({available:s.reduce(((e,{validators:s})=>Object.values(s).reduce(((e,{value:s})=>e.iadd(s)),e)),new(b())(0)),rewards:s,stashId:e}))).filter((({available:e})=>!e.isZero())).sort(((e,s)=>s.available.cmp(e.available)))}(e),n=function(e){return Object.entries(e).reduce(((e,[s,n])=>(n.forEach((n=>{Object.entries(n.validators).forEach((([t,{total:a,value:o}])=>{const i=e.find((e=>e.validatorId===t));if(i){const e=i.eras.find((e=>e.era.eq(n.era)));e?e.stashes[s]=o:i.eras.push({era:n.era,stashes:{[s]:o}}),i.available=i.available.add(o),i.total=i.total.add(a)}else e.push({available:o,eras:[{era:n.era,stashes:{[s]:o}}],total:a,validatorId:t})}))})),e)),[]).sort(((e,s)=>s.available.cmp(e.available)))}(e),t=s.length?s.reduce(((e,{available:s})=>e.iadd(s)),new(b())(0)):null,[a,o]=n.length?n.reduce((([e,s],{available:n,total:t})=>[e.iadd(n),s.iadd(t)]),[new(b())(0),new(b())(0)]):[null,null];return{stashAvail:t,stashes:s,valAvail:a,valTotal:o,validators:n}}return{}}(k)),[k]),D=(0,t.useMemo)((()=>[[i(u?"payout/stash":"overall/validator"),"start",2],[i("eras"),"start"],[i(u?"own":"total")],["remaining"],[void 0,void 0,3]]),[u,i]),T=(0,t.useRef)([[i("payout/validator"),"start",2],[i("eras"),"start"],[i("own")],["remaining"],[void 0,void 0,3]]),E=(0,t.useMemo)((()=>[{isDisabled:!d,text:i("Own validators"),value:"val"},{text:i("Own stashes"),value:"all"}]),[d,i]),q=(0,t.useMemo)((()=>(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{colSpan:3}),(0,w.jsx)(l.iA.Column.Balance,{value:I}),(0,w.jsx)("td",{colSpan:4})]})),[I]),_=(0,t.useMemo)((()=>(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{colSpan:3}),(0,w.jsx)(l.iA.Column.Balance,{value:P}),(0,w.jsx)("td",{colSpan:4})]})),[P]);return(0,w.jsxs)(hn,{className:e,children:[(0,w.jsxs)(l.zx.Group,{children:[(0,w.jsx)(l.tX,{onChange:h,options:E,value:u}),(0,w.jsx)(l.tX,{onChange:x,options:N,value:p}),(0,w.jsx)(nn,{isAll:!0,isDisabled:n,payout:M})]}),(0,w.jsx)(C,{isInElection:n}),!S&&!(null!=A&&A.length)&&(0,w.jsxs)(l.Pd,{className:"warning centered",withIcon:!1,children:[(0,w.jsx)("p",{children:i("Payouts of rewards for a validator can be initiated by any account. This means that as soon as a validator or nominator requests a payout for an era, all the nominators for that validator will be rewarded. Each user does not need to claim individually and the suggestion is that validators should claim rewards for everybody as soon as an era ends.")}),(0,w.jsx)("p",{children:i("If you have not claimed rewards straight after the end of the era, the validator is in the active set and you are seeing no rewards, this would mean that the reward payout transaction was made by another account on your behalf. Always check your favorite explorer to see any historic payouts made to your accounts.")})]}),(0,w.jsx)(l.iA,{empty:!S&&A&&i(u?"No pending payouts for your stashes":"No pending payouts for your validators"),emptySpinner:i("Retrieving info for the selected eras, this will take some time"),footer:q,header:D,isFixed:!0,children:!S&&(null==A?void 0:A.map((e=>(0,w.jsx)(ln,{historyDepth:s,payout:e},e.stashId))))}),1===u&&!S&&M&&0!==M.length&&(0,w.jsx)(l.iA,{footer:_,header:T.current,isFixed:!0,children:!S&&M.filter((({available:e})=>!e.isZero())).map((e=>(0,w.jsx)(dn,{historyDepth:s,isDisabled:n,payout:e},e.validatorId)))})]})}const hn=o.ZP.div.withConfig({displayName:"Payouts__StyledDiv",componentId:"sc-ozh2i3-0"})([".payout-eras{padding-left:0.25rem;vertical-align:middle;span{white-space:nowrap;}}"]),pn=t.memo(mn);function xn({className:e="",colors:s,labels:n,legends:a,title:o,values:i}){const r=(0,t.useMemo)((()=>!(n&&0!==n.length&&i&&0!==i.length&&i[0]&&i[0].length)),[n,i]);return(0,w.jsxs)(gn,{className:`${e} staking--Chart ${r?"isLoading":""}`,children:[(0,w.jsx)(l.kL.Line,{colors:s,labels:n,legends:a,title:o,values:i}),r&&(0,w.jsx)(l.$j,{})]})}const gn=o.ZP.div.withConfig({displayName:"Chart__StyledDiv",componentId:"sc-1chnzwm-0"})(["&.isLoading{position:relative;canvas,h1{opacity:0.25;}.ui--Spinner{position:absolute;top:34%;left:0;right:0;}}"]),fn=t.memo(xn),vn=[void 0,"#acacac"];function bn({labels:e,validatorId:s}){const{t:n}=(0,y.$)(),{api:a}=(0,c.h)(),o=(0,t.useMemo)((()=>[s,!1]),[s]),i=(0,m.W7)(a.derive.staking.stakerPoints,o),[r,l]=(0,t.useState)([]);(0,t.useEffect)((()=>l([])),[s]),(0,t.useEffect)((()=>i&&l(function(e,s){const n=new Array(e.length),t=new Array(e.length),[a,o]=s.reduce((([e,s],{points:n})=>(n.gtn(0)&&(e+=n.toNumber(),s++),[e,s])),[0,0]);return s.forEach((({era:s,points:i})=>{const r=o>0?Math.ceil(100*a/o)/100:0,l=e.indexOf(s.toHuman());-1!==l&&(n[l]=r,t[l]=i.toNumber())})),[t,n]}(e,i))),[e,i]);const d=(0,t.useRef)([n("points"),n("average")]);return(0,w.jsx)(fn,{colors:vn,labels:e,legends:d.current,title:n("era points"),values:r})}const jn=t.memo(bn),yn=new(b())(1e4),wn=[void 0,"#acacac"];function Nn({labels:e,validatorId:s}){const{t:n}=(0,y.$)(),{api:a}=(0,c.h)(),o=(0,t.useMemo)((()=>[s,!1]),[s]),i=(0,m.W7)(a.derive.staking.stakerPrefs,o),[r,l]=(0,t.useState)([]);(0,t.useEffect)((()=>l([])),[s]),(0,t.useEffect)((()=>i&&l(function(e,s){const n=new Array(e.length),t=new Array(e.length),[a,o]=s.reduce((([e,s],{validatorPrefs:n})=>{const t=n.commission.unwrap().mul(yn).div(j.ed).toNumber()/100;return 0!==t&&(e+=t,s++),[e,s]}),[0,0]);return s.forEach((({era:s,validatorPrefs:i})=>{const r=i.commission.unwrap().mul(yn).div(j.ed).toNumber()/100,l=o>0?Math.ceil(100*a/o)/100:0,c=e.indexOf(s.toHuman());-1!==c&&(n[c]=l,t[c]=r)})),[t,n]}(e,i))),[e,i]);const d=(0,t.useRef)([n("commission"),n("average")]);return(0,w.jsx)(fn,{colors:wn,labels:e,legends:d.current,title:n("commission"),values:r})}const Cn=t.memo(Nn);var kn=n(6485);function Sn(e=j.nw,s){return((0,kn.H)(e)?e:(0,g.m)(e.toBn)?e.toBn():j.nw).mul(j.D_).div(s).toNumber()/1e3}const In=["#8c2200","#008c22","#acacac"];function An({labels:e,validatorId:s}){const{t:n}=(0,y.$)(),{api:a}=(0,c.h)(),o=(0,t.useMemo)((()=>[s,!1]),[s]),i=(0,m.W7)(a.derive.staking.ownSlashes,o),r=(0,m.W7)(a.derive.staking.erasRewards),l=(0,m.W7)(a.derive.staking.stakerPoints,o),[d,u]=(0,t.useState)([]),{currency:h,divisor:p}=(0,t.useMemo)((()=>({currency:T.a.getDefaults().unit,divisor:new(b())("1".padEnd(T.a.getDefaults().decimals+1,"0"))})),[]);(0,t.useEffect)((()=>u([])),[s]),(0,t.useEffect)((()=>r&&i&&l&&u(function(e,s,n,t,a){const o=new Array(e.length),i=new Array(e.length),r=new Array(e.length),[l,c]=s.reduce((([e,s],{era:n,eraReward:o})=>{const i=t.find((e=>e.era.eq(n))),r=null!=i&&i.eraPoints.gtn(0)?Sn(i.points.mul(o).div(i.eraPoints),a):0;return r>0&&(e+=r,s++),[e,s]}),[0,0]);return s.forEach((({era:s,eraReward:d})=>{const u=t.find((e=>e.era.eq(s))),m=n.find((e=>e.era.eq(s))),h=null!=u&&u.eraPoints.gtn(0)?Sn(u.points.mul(d).div(u.eraPoints),a):0,p=m?Sn(m.total,a):0,x=c>0?Math.ceil(100*l/c)/100:0,g=e.indexOf(s.toHuman());-1!==g&&(i[g]=h,r[g]=x,o[g]=p)})),[o,i,r]}(e,r,i,l,p))),[e,p,r,i,l]);const x=(0,t.useMemo)((()=>[n("{{currency}} slashed",{replace:{currency:h}}),n("{{currency}} rewards",{replace:{currency:h}}),n("{{currency}} average",{replace:{currency:h}})]),[h,n]);return(0,w.jsx)(fn,{colors:In,labels:e,legends:x,title:n("rewards & slashes"),values:d})}const Pn=t.memo(An),Mn=[void 0,"#8c2200","#acacac"];function Dn({labels:e,validatorId:s}){const{t:n}=(0,y.$)(),{api:a}=(0,c.h)(),o=(0,t.useMemo)((()=>[s,!1]),[s]),i=(0,m.W7)(a.derive.staking.ownExposures,o),[r,l]=(0,t.useState)([]),{currency:d,divisor:u}=(0,t.useMemo)((()=>({currency:T.a.getDefaults().unit,divisor:new(b())("1".padEnd(T.a.getDefaults().decimals+1,"0"))})),[]);(0,t.useEffect)((()=>l([])),[s]),(0,t.useEffect)((()=>i&&l(function(e,s,n){const t=new Array(e.length),a=new Array(e.length),o=new Array(e.length),[i,r]=s.reduce((([e,s],{clipped:t})=>{var a;const o=Sn(null==(a=t.total)?void 0:a.unwrap(),n);return o>0&&(e+=o,s++),[e,s]}),[0,0]);return s.forEach((({clipped:s,era:l,exposure:c})=>{var d,u;const m=Sn(null==(d=s.total)?void 0:d.unwrap(),n),h=Sn(null==(u=c.total)?void 0:u.unwrap(),n),p=r>0?Math.ceil(100*i/r)/100:0,x=e.indexOf(l.toHuman());-1!==x&&(o[x]=p,t[x]=m,a[x]=h)})),[t,a,o]}(e,i,u))),[e,u,i]);const h=(0,t.useMemo)((()=>[n("{{currency}} clipped",{replace:{currency:d}}),n("{{currency}} total",{replace:{currency:d}}),n("{{currency}} average",{replace:{currency:d}})]),[d,n]);return(0,w.jsx)(fn,{colors:Mn,labels:e,legends:h,title:n("elected stake"),values:r})}const Tn=t.memo(Dn);function En({className:e="",labels:s,validatorId:n}){return(0,w.jsxs)(qn,{className:e,children:[(0,w.jsxs)(l.P0.Column,{children:[(0,w.jsx)(jn,{labels:s,validatorId:n}),(0,w.jsx)(Pn,{labels:s,validatorId:n})]}),(0,w.jsxs)(l.P0.Column,{children:[(0,w.jsx)(Tn,{labels:s,validatorId:n}),(0,w.jsx)(Cn,{labels:s,validatorId:n})]})]})}const qn=(0,o.ZP)(l.P0).withConfig({displayName:"Validator__StyledColumar",componentId:"sc-1my01mr-0"})([".staking--Chart{background:var(--bg-table);border:1px solid var(--border-table);border-radius:0.25rem;padding:1rem 1.5rem;}"]),_n=t.memo(En);function $n({className:e}){const{t:s}=(0,y.$)(),{api:n}=(0,c.h)(),{value:o}=(0,a.UO)(),[i,r]=(0,t.useState)(o||null),d=(0,m.W7)(n.derive.staking.erasHistoric),u=(0,t.useMemo)((()=>d&&d.map((e=>e.toHuman()))),[d]),h=(0,t.useCallback)((()=>function(e){e&&(window.location.hash=`/staking/query/${e}`)}(i)),[i]);return u?(0,w.jsxs)("div",{className:e,children:[(0,w.jsx)(l.bm,{className:"staking--queryInput",defaultValue:o,label:s("validator to query"),onChange:r,onEnter:h,children:(0,w.jsx)(l.zx,{icon:"play",isDisabled:!i,onClick:h})}),o&&(0,w.jsx)(_n,{labels:u,validatorId:o})]}):(0,w.jsx)(l.$j,{})}const Fn=t.memo($n);var On=n(80274),Vn=n(92067),Rn=n(78896);function Zn({index:e,isSelected:s,onSelect:n,slash:{era:a,isMine:o,slash:{others:i,own:r,payout:d,reporters:u,validator:m},total:h,totalOther:p}}){const{t:x}=(0,y.$)(),{api:g}=(0,c.h)(),v=(0,t.useCallback)((()=>n&&n(e)),[e,n]),b=(0,t.useCallback)((()=>i.map((([e,s],n)=>(0,w.jsx)(l.ax,{balance:s,value:e,withBalance:!0},n)))),[i]);return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"badge",children:o&&(0,w.jsx)(l.Ct,{color:"red",icon:"skull-crossbones"})}),(0,w.jsx)("td",{className:"address",children:(0,w.jsx)(l.N,{value:m})}),(0,w.jsx)("td",{className:"expand all",children:!!i.length&&(0,w.jsx)(l.n0,{renderChildren:b,summary:x("Nominators ({{count}})",{replace:{count:(0,I.u)(i.length)}})})}),(0,w.jsx)("td",{className:"address",children:u.map(((e,s)=>(0,w.jsx)(l.ax,{value:e},s)))}),(0,w.jsx)("td",{className:"number together",children:(0,w.jsx)(f.Z,{value:r})}),(0,w.jsx)("td",{className:"number together",children:(0,w.jsx)(f.Z,{value:p})}),(0,w.jsx)("td",{className:"number together",children:(0,w.jsx)(f.Z,{value:h})}),(0,w.jsx)("td",{className:"number together",children:(0,w.jsx)(f.Z,{value:d})}),!g.query.staking.earliestUnappliedSlash&&!!g.consts.staking.slashDeferDuration&&(0,w.jsx)("td",{className:"number together",children:(0,I.u)(a)}),(0,w.jsx)("td",{children:(0,w.jsx)(l.XZ,{isDisabled:!n,onChange:v,value:s})})]})}const Bn=t.memo(Zn);function Ln({slash:{era:e,nominators:s,reporters:n,total:a,validators:o}}){var i;const{t:r}=(0,y.$)(),{api:d}=(0,c.h)(),u=(0,m.W7)(null==(i=d.derive.session)?void 0:i.progress),[h,p]=(0,t.useMemo)((()=>u?[u.activeEra.sub(e).isub(j.If).imul(u.eraLength).iadd(u.eraProgress),d.consts.staking.slashDeferDuration.mul(u.eraLength)]:[new(b())(0),new(b())(0)]),[d,e,u]);return(0,w.jsxs)(l.Ty,{children:[(0,w.jsxs)("section",{children:[(0,w.jsx)(l.Jy,{label:r("validators"),children:(0,I.u)(o.length)}),(0,w.jsx)(l.Jy,{label:r("nominators"),children:(0,I.u)(s.length)}),(0,w.jsx)(l.Jy,{label:r("reporters"),children:(0,I.u)(n.length)})]}),h.gtn(0)&&(0,w.jsx)(l.Jy,{label:r("defer"),progress:{total:p,value:h,withTime:!0}}),(0,w.jsx)(l.Jy,{label:r("total"),children:(0,w.jsx)(f.Z,{value:a})})]})}const Hn=t.memo(Ln);function Wn({buttons:e,councilId:s,councilThreshold:n,slash:a}){const{t:o}=(0,y.$)(),{api:i}=(0,c.h)(),r=(0,Rn.m)("council"),[{selected:d,txAll:u,txSome:m},h]=(0,t.useState)((()=>{const e=i.tx.staking.cancelDeferredSlash(a.era,a.slashes.map(((e,s)=>s)));return{selected:[],txAll:r?{length:e.encodedLength,proposal:e}:null,txSome:null}})),p=(0,t.useRef)([[o("era {{era}}/unapplied",{replace:{era:i.query.staking.earliestUnappliedSlash||!i.consts.staking.slashDeferDuration?a.era.toString():a.era.sub(i.consts.staking.slashDeferDuration).sub(j.If).toString()}}),"start",3],[o("reporters"),"address"],[o("own")],[o("other")],[o("total")],[o("payout")],!i.query.staking.earliestUnappliedSlash&&!!i.consts.staking.slashDeferDuration&&[o("apply")],[]]),x=(0,t.useCallback)((e=>h((s=>{const n=s.selected.includes(e)?s.selected.filter((s=>s!==e)):s.selected.concat(e).sort(((e,s)=>e-s)),t=n.length?i.tx.staking.cancelDeferredSlash(a.era,n):null;return{selected:n,txAll:s.txAll,txSome:t&&r&&(0,g.m)(i.tx[r].propose)?{length:t.encodedLength,proposal:t}:null}}))),[i,r,a]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Hn,{slash:a}),(0,w.jsxs)(l.zx.Group,{children:[e,r&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.cA,{accountId:s,isDisabled:!m,isToplevel:!0,label:o("Cancel selected"),params:m&&(3===i.tx[r].propose.meta.args.length?[n,m.proposal,m.length]:[n,m.proposal]),tx:i.tx[r].propose}),(0,w.jsx)(l.cA,{accountId:s,isDisabled:!u,isToplevel:!0,label:o("Cancel all"),params:u&&(3===i.tx[r].propose.meta.args.length?[n,u.proposal,u.length]:[n,u.proposal]),tx:i.tx[r].propose})]})]}),(0,w.jsx)(l.iA,{header:p.current,children:a.slashes.map(((e,n)=>(0,w.jsx)(Bn,{index:n,isSelected:d.includes(n),onSelect:s?x:void 0,slash:e},n)))})]})}const zn=t.memo(Wn);function Un({ownStashes:e=[],slashes:s}){const{t:n}=(0,y.$)(),{api:a}=(0,c.h)(),{allAccounts:o}=(0,d.x)(),{members:i}=(0,Vn.V)("council"),[r,u]=(0,t.useState)(0),m=(0,t.useMemo)((()=>function(e,s){const n=[];return e.reduce(((e,[n,t])=>t.reduce(((e,t)=>{const a=t.others.reduce(((e,[,s])=>e.add(s)),new(b())(0)),o=s.some((({stashId:e})=>t.validator.eq(e)||t.others.some((([s])=>s.eq(e)))));return e.push({era:n,isMine:o,slash:t,total:t.own.add(a),totalOther:a}),e}),e)),[]).forEach((e=>{let s=n.find((({era:s})=>s.eq(e.era)));s||(s={era:e.era,nominators:[],payout:new(b())(0),reporters:[],slashes:[],total:new(b())(0),validators:[]},n.push(s)),s.payout.iadd(e.slash.payout),s.total.iadd(e.total),s.slashes.push(e);const t=e.slash.validator.toString();s.validators.includes(t)||s.validators.push(t),e.slash.others.forEach((([e])=>{const n=e.toString();s&&!s.nominators.includes(n)&&s.nominators.push(n)})),e.slash.reporters.forEach((e=>{const n=e.toString();s&&!s.reporters.includes(n)&&s.reporters.push(n)}))})),n.sort(((e,s)=>s.era.cmp(e.era)))}(s,e)),[e,s]),h=(0,t.useMemo)((()=>m.map((({era:e})=>a.query.staking.earliestUnappliedSlash||!a.consts.staking.slashDeferDuration?e:e.sub(a.consts.staking.slashDeferDuration).sub(j.If))).map((e=>({text:n("era {{era}}",{replace:{era:(0,I.u)(e)}}),value:e.toString()})))),[a,m,n]),p=(0,t.useMemo)((()=>o.find((e=>i.includes(e)))||null),[o,i]),x=(0,t.useRef)([[n("unapplied"),"start"]]);if(!m.length)return(0,w.jsx)(l.iA,{empty:n("There are no unapplied/pending slashes"),header:x.current});const g=Math.ceil((i.length||0)*(0,On.FK)(a));return(0,w.jsx)(zn,{buttons:(0,w.jsx)(l.tX,{onChange:u,options:h,value:r}),councilId:p,councilThreshold:g,slash:m[r]},m[r].era.toString())}const Jn=t.memo(Un);var Gn=n(2898),Qn=n(27662),Xn=n(85168),Kn=n(54371);function Yn({children:e,className:s,nameFilter:n,setNameFilter:a,setWithIdentity:o,withIdentity:i}){const{t:r}=(0,y.$)(),{api:d}=(0,c.h)();(0,t.useEffect)((()=>{const e=Xn.Z.parse(location.href.split("?")[1]).filter;(0,Kn.H)(e)&&a(e,!0)}),[]);const u=(0,t.useCallback)((e=>a(e,!1)),[a]);return(0,w.jsxs)("div",{className:s,children:[(0,w.jsx)(l.II,{autoFocus:!0,isFull:!0,label:r("filter by name, address or index"),onChange:u,value:n}),(e||o)&&(0,w.jsxs)("div",{className:"staking--optionsBar",children:[e,o&&d.query.identity&&(0,w.jsx)(l.ZD,{className:"staking--buttonToggle",label:r("with an identity"),onChange:o,value:i})]})]})}const et=t.memo(Yn);var st=n(76948);const nt={transform:([[e],s])=>{const n={};for(let t=0;t<e.length;t++)n[e[t]]=s[t];return n},withParamsTransform:!0},tt=(0,A.e)("useIdentities",(function(e=[]){const{api:s}=(0,c.h)();return(0,m.W7)(s.derive.accounts.hasIdentityMulti,[e],nt)}));function at({className:e="",isDisabled:s,ownNominators:n,targets:a}){const{t:o}=(0,y.$)(),{api:i}=(0,c.h)(),[r,d]=(0,t.useState)(null),[u,m]=(0,S.O)(),h=(0,t.useMemo)((()=>(n||[]).map((({stashId:e})=>e))),[n]),p=(0,t.useCallback)((e=>{const s=n&&n.find((({stashId:s})=>s===e));d(s?{controllerId:s.controllerId,stashId:s.stashId}:null)}),[n]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(l.zx,{icon:"hand-paper",isDisabled:s||!h.length||!a.length,label:o("Nominate selected"),onClick:m}),u&&(0,w.jsxs)(ot,{className:e,header:o("Nominate validators"),onClose:m,size:"large",children:[(0,w.jsxs)(l.u_.Content,{children:[(0,w.jsxs)(l.u_.Columns,{hint:o("One of your available nomination accounts, keyed by the stash. The transaction will be sent from the controller."),children:[(0,w.jsx)(l.rp,{filter:h,label:o("the stash account to nominate with"),onChange:p,value:null==r?void 0:r.stashId}),(0,w.jsx)(l.rp,{isDisabled:!0,label:o("the associated controller"),value:null==r?void 0:r.controllerId})]}),(0,w.jsx)(l.u_.Columns,{hint:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{children:o('The selected validators to nominate, either via the "currently best algorithm" or via a manual selection.')}),(0,w.jsx)("p",{children:o("Once transmitted the new selection will only take effect in 2 eras since the selection criteria for the next era was done at the end of the previous era. Until then, the nominations will show as inactive.")})]}),children:(0,w.jsx)(l.qG,{label:o("selected validators"),value:a.map((e=>(0,w.jsx)(l.ax,{className:"addressStatic",value:e},e)))})})]}),(0,w.jsx)(l.u_.Actions,{children:(0,w.jsx)(l.cA,{accountId:null==r?void 0:r.controllerId,label:o("Nominate"),onStart:m,params:[a],tx:i.tx.staking.nominate})})]})]})}const ot=(0,o.ZP)(l.u_).withConfig({displayName:"Nominate__StyledModal",componentId:"sc-1k5qvjm-0"})([".ui--AddressMini.padded.addressStatic{padding-top:0.5rem;.ui--AddressMini-info{min-width:10rem;max-width:10rem;}}"]),it=t.memo(at),rt={transform:e=>e.unwrapOrDefault()};function lt(e,s){return{hideValue:!0,isBlurred:!(e&&s),total:e&&s?s:j.Jo,value:e&&s?e:j.um}}function ct({avgStaked:e,className:s,lastEra:n,lowStaked:a,minNominated:o,minNominatorBond:i,stakedReturn:r,totalIssuance:d,totalStaked:u}){const{t:h}=(0,y.$)(),{api:p}=(0,c.h)(),x=(0,m.W7)(n&&p.query.staking.erasValidatorReward,[n],rt),g=(0,t.useMemo)((()=>lt(u,d)),[d,u]),v=(0,t.useMemo)((()=>lt(a,e)),[e,a]),b=(0,w.jsx)("span",{className:"percent",children:"%"});return(0,w.jsxs)(dt,{className:s,children:[(0,w.jsx)("section",{className:"media--800",children:(0,w.jsx)(l.Jy,{label:h("total staked"),progress:g,children:(0,w.jsx)(f.Z,{className:g.isBlurred?"--tmp":"",value:g.value,withSi:!0})})}),(0,w.jsx)("section",{className:"media--800",children:(0,w.jsx)(l.Jy,{label:h("returns"),children:d&&r>0?Number.isFinite(r)?(0,w.jsxs)(w.Fragment,{children:[r.toFixed(1),b]}):"-.-%":(0,w.jsxs)("span",{className:"--tmp",children:["0.0",b]})})}),(0,w.jsx)("section",{className:"media--1000",children:(0,w.jsx)(l.Jy,{label:`${h("lowest / avg staked")}`,progress:v,children:(0,w.jsxs)("span",{className:v.isBlurred?"--tmp":"",children:[(0,w.jsx)(f.Z,{value:v.value,withCurrency:!1,withSi:!0})," / ",(0,w.jsx)(f.Z,{className:v.isBlurred?"--tmp":"",value:v.total,withSi:!0})]})})}),(0,w.jsx)("section",{className:"media--1600",children:(null==o?void 0:o.gt(j.nw))&&(0,w.jsxs)(l.Jy,{className:"media--1600",label:h(i?"min nominated / threshold":"min nominated"),children:[(0,w.jsx)(f.Z,{value:o,withCurrency:!i,withSi:!0}),i&&(0,w.jsxs)(w.Fragment,{children:[" / ",(0,w.jsx)(f.Z,{value:i,withSi:!0})]})]})}),(0,w.jsx)("section",{children:(0,w.jsx)(l.Jy,{label:h("last reward"),children:(0,w.jsx)(f.Z,{className:x?"":"--tmp",value:x||1,withSi:!0})})})]})}const dt=(0,o.ZP)(l.Ty).withConfig({displayName:"Summary__StyledSummaryBox",componentId:"sc-aex1zy-0"})([".percent{font-size:var(--font-percent-tiny);}"]),ut=t.memo(ct),mt=(0,A.e)("useOwnNominators",(function(e){return(0,t.useMemo)((()=>e&&e.filter((({isOwnController:e,isStashValidating:s})=>e&&!s))),[e])}));var ht=n(21009),pt=n(1957),xt=n(65308);function gt({numNominators:e}){var s;const{api:n}=(0,c.h)(),t=null==(s=n.consts.staking)?void 0:s.maxNominatorRewardedPerValidator;return e&&t&&!t.gten(e)?(0,w.jsx)(l.Ct,{className:"media--1200",color:"red",icon:"balance-scale-right"}):null}const ft=t.memo(gt);function vt({allSlashes:e,canSelect:s,filterName:n,info:{accountId:a,bondOther:o,bondOwn:i,bondTotal:r,commissionPer:d,isBlocking:u,isElected:m,isFavorite:h,key:p,lastPayout:x,numNominators:g,rankOverall:v,stakedReturnCmp:b},isNominated:j,isSelected:N,nominatedBy:C=[],toggleFavorite:k,toggleSelected:S}){const{t:A}=(0,y.$)(),{api:P}=(0,c.h)(),M=(0,pt.Y)(a),[,,D]=(0,xt.h)(x),T=(0,t.useMemo)((()=>!M||(0,ht.r7)(P,p,M,n)),[M,P,n,p]),E=(0,t.useMemo)((()=>(e||[]).map((([e,s])=>({era:e,slashes:s.filter((({validator:e})=>e.eq(a)))}))).filter((({slashes:e})=>e.length))),[e,a]),q=(0,t.useCallback)((()=>{return e=p,void(window.location.hash=`/staking/query/${e}`);var e}),[p]),_=(0,t.useCallback)((()=>S(p)),[p,S]);return T?(0,w.jsxs)("tr",{children:[(0,w.jsx)(l.iA.Column.Favorite,{address:p,isFavorite:h,toggle:k}),(0,w.jsxs)("td",{className:"badge together",children:[j?(0,w.jsx)(l.Ct,{color:"green",icon:"hand-paper"}):(0,w.jsx)(l.Ct,{color:"transparent"}),m?(0,w.jsx)(l.Ct,{color:"blue",icon:"chevron-right"}):(0,w.jsx)(l.Ct,{color:"transparent"}),(0,w.jsx)(ft,{numNominators:g||C.length}),u&&(0,w.jsx)(l.Ct,{color:"red",icon:"user-slash"}),0!==E.length&&(0,w.jsx)(l.Ct,{color:"red",hover:A("Slashed in era {{eras}}",{replace:{eras:E.map((({era:e})=>(0,I.u)(e))).join(", ")}}),icon:"skull-crossbones"})]}),(0,w.jsx)("td",{className:"number",children:0!==v&&(0,I.u)(v)}),(0,w.jsx)("td",{className:"address all",children:(0,w.jsx)(l.N,{value:a})}),(0,w.jsx)("td",{className:"number media--1400",children:x&&(P.consts.babe?D.days?1===D.days?A("yesterday"):A("{{days}} days",{replace:{days:D.days}}):A("recently"):(0,I.u)(x))}),(0,w.jsx)("td",{className:"number media--1200 no-pad-right",children:g||""}),(0,w.jsx)("td",{className:"number media--1200 no-pad-left",children:C.length||""}),(0,w.jsxs)("td",{className:"number media--1100",children:[d.toFixed(2),"%"]}),(0,w.jsx)("td",{className:"number together",children:!r.isZero()&&(0,w.jsx)(f.Z,{value:r})}),(0,w.jsx)("td",{className:"number together media--900",children:!i.isZero()&&(0,w.jsx)(f.Z,{value:i})}),(0,w.jsx)("td",{className:"number together media--1600",children:!o.isZero()&&(0,w.jsx)(f.Z,{value:o})}),(0,w.jsx)("td",{className:"number together",children:b>0&&(0,w.jsxs)(w.Fragment,{children:[b.toFixed(2),"%"]})}),(0,w.jsx)("td",{children:!u&&(s||N)&&(0,w.jsx)(l.XZ,{onChange:_,value:N})}),(0,w.jsx)("td",{children:(0,w.jsx)(l.JO,{className:"staking--stats highlight--color",icon:"chart-line",onClick:q})})]}):null}const bt=t.memo(vt),jt={rankBondOther:"media--1600",rankBondOwn:"media--900"},yt=["rankBondTotal","rankBondOwn","rankBondOther","rankOverall"],wt={withElected:!1,withGroup:!0,withIdentity:!1,withPayout:!1,withoutComm:!0,withoutOver:!0},Nt={isQueryFiltered:!1,nameFilter:""},Ct={sortBy:"rankOverall",sortFromMax:!0};function kt({className:e="",isInElection:s,nominatedBy:n,ownStashes:a,targets:{avgStaked:o,inflation:{stakedReturn:i},lastEra:r,lowStaked:d,medianComm:u,minNominated:m,minNominatorBond:h,nominators:p,totalIssuance:g,totalStaked:f,validatorIds:v,validators:b},toggleFavorite:N,toggleLedger:k,toggleNominatedBy:S}){const{t:I}=(0,y.$)(),{api:A}=(0,c.h)(),P=(0,x.g)(),M=(0,Gn.u)(7),D=mt(a),T=tt(v),[E,q]=(0,t.useState)([]),[{isQueryFiltered:_,nameFilter:$},F]=(0,t.useState)(Nt),[O,V]=(0,Qn.o)("staking:targets",wt),[{sortBy:R,sortFromMax:Z},B]=(0,t.useState)(Ct),[L,H]=(0,t.useState)(),W=(0,t.useRef)({rankBondOther:I("other stake"),rankBondOwn:I("own stake"),rankBondTotal:I("total stake"),rankOverall:I("return")}),z=(0,t.useMemo)((()=>{var e;return{...O,daysPayout:M,isBabe:!!A.consts.babe,isQueryFiltered:_,maxPaid:null==(e=A.consts.staking)?void 0:e.maxNominatorRewardedPerValidator}}),[A,M,_,O]),U=(0,t.useMemo)((()=>T&&b&&n&&function(e,s,n,{daysPayout:t,isBabe:a,maxPaid:o,withElected:i,withGroup:r,withIdentity:l,withPayout:c,withoutComm:d,withoutOver:u},m){const h=[],p=[];return e.filter((({accountId:e,commissionPer:s,isElected:x,isFavorite:g,lastPayout:f,numNominators:v})=>{var b;if(g)return!0;const y=e.toString(),w=n[y],N=v||(null==m||null==(b=m[y])?void 0:b.length)||0;if((!i||x)&&(!l||null!=w&&w.hasIdentity)&&(!c||!a||f&&t.gte(f))&&(!d||s<=10)&&(!u||!o||o.muln(100).div(j.S8).gten(N))){if(!r)return!0;if(!w||!w.hasIdentity)return p.push(y),!0;if(w.parentId){if(!p.includes(w.parentId))return p.push(w.parentId),!0}else if(!p.includes(y)){if(w.display){const e=w.display.replace(/[^\x20-\x7E]/g,"").replace(/-/g," ").replace(/_/g," ").split(" ").map((e=>e.trim())).filter((e=>!!e));if(function(e,s){return e.some((e=>e.length===s.length&&(1===e.length?e[0]===s[0]:e.reduce(((e,n,t)=>e+(n===s[t]?1:0)),0)>=s.length-1)))}(h,e))return!1;h.push(e)}return p.push(y),!0}}return!1}))}(b,0,T,z,n)),[T,z,u,n,b]);(0,t.useEffect)((()=>{U&&H(function(e,s,n){return n.slice(0).sort(((n,t)=>s?n[e]-t[e]:t[e]-n[e])).sort(((e,s)=>e.isFavorite===s.isFavorite?0:e.isFavorite?-1:1))}(R,Z,U))}),[U,R,Z]),(0,t.useEffect)((()=>{k(),S()}),[k,S]);const J=(0,t.useMemo)((()=>A.consts.staking.maxNominations?A.consts.staking.maxNominations.toNumber():16),[A]),G=(0,t.useMemo)((()=>function(e=[]){const s=[];return e.forEach((({nominating:e=[]})=>{e.forEach((e=>{!s.includes(e)&&s.push(e)}))})),s}(D)),[D]),Q=(0,t.useCallback)((e=>B((s=>({sortBy:e,sortFromMax:e!==s.sortBy||!s.sortFromMax})))),[]),X=(0,t.useCallback)((e=>q(E.includes(e)?E.filter((s=>e!==s)):[...E,e])),[E]),K=(0,t.useCallback)((()=>U&&q(function(e,s){const n=[];for(let t=0;t<e.length&&n.length<s;t++){const{isBlocking:s,isFavorite:a,key:o,stakedReturnCmp:i}=e[t];!s&&(a||i>0)&&n.push(o)}return n}(U,J))),[U,J]),Y=(0,t.useCallback)(((e,s)=>F({isQueryFiltered:s,nameFilter:e})),[]),ee=(0,t.useMemo)((()=>[[I("validators"),"start",4],[I("payout"),"media--1400"],[I("nominators"),"media--1200",2],[I("comm."),"media--1100"],...yt.map((e=>[(0,w.jsxs)(w.Fragment,{children:[W.current[e],(0,w.jsx)(l.JO,{icon:R===e?Z?"chevron-down":"chevron-up":"minus"})]}),`${L?`isClickable ${R===e?"highlight--border":""} number`:"number"} ${jt[e]||""}`,1,()=>Q(e)])),[],[]]),[Q,W,R,L,Z,I]),se=(0,t.useMemo)((()=>(0,w.jsx)("div",{children:(0,w.jsxs)(et,{nameFilter:$,setNameFilter:Y,setWithIdentity:V.withIdentity,withIdentity:O.withIdentity,children:[(0,w.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("one validator per operator"),onChange:V.withGroup,value:O.withGroup}),(0,w.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("comm. <= {{maxComm}}%",{replace:{maxComm:10}}),onChange:V.withoutComm,value:O.withoutComm}),(0,w.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("with capacity"),onChange:V.withoutOver,value:O.withoutOver}),A.consts.babe&&(0,w.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("recent payouts"),onChange:V.withPayout,value:O.withPayout}),(0,w.jsx)(l.ZD,{className:"staking--buttonToggle",label:I("currently elected"),onChange:V.withElected,value:O.withElected})]})})),[A,$,Y,V,I,O]),ne=_?b:L,te=E.length<J;return(0,w.jsxs)(St,{className:e,children:[(0,w.jsx)(ut,{avgStaked:o,lastEra:r,lowStaked:d,minNominated:m,minNominatorBond:h,numNominators:null==p?void 0:p.length,numValidators:null==b?void 0:b.length,stakedReturn:i,totalIssuance:g,totalStaked:f}),(0,w.jsxs)(l.zx.Group,{children:[(0,w.jsx)(l.zx,{icon:"check",isDisabled:!(null!=b&&b.length&&null!=D&&D.length),label:I("Most profitable"),onClick:K}),(0,w.jsx)(it,{isDisabled:s||!(null!=b&&b.length),ownNominators:D,targets:E})]}),(0,w.jsx)(C,{isInElection:s}),(0,w.jsx)(l.iA,{empty:L&&I("No active validators to check"),emptySpinner:(0,w.jsxs)(w.Fragment,{children:[!(b&&T)&&(0,w.jsx)("div",{children:I("Retrieving validators")}),!n&&(0,w.jsx)("div",{children:I("Retrieving nominators")}),!ne&&(0,w.jsx)("div",{children:I("Preparing target display")})]}),filter:se,header:ee,legend:(0,w.jsx)(st.Z,{}),children:ne&&ne.map((e=>(0,w.jsx)(bt,{allSlashes:P,canSelect:te,filterName:$,info:e,isNominated:G.includes(e.key),isSelected:E.includes(e.key),nominatedBy:null==n?void 0:n[e.key],toggleFavorite:N,toggleSelected:X},e.key)))})]})}const St=o.ZP.div.withConfig({displayName:"Targets__StyledDiv",componentId:"sc-12vmt0-0"})(["text-align:center;th.isClickable{.ui--Icon{margin-left:0.5rem;}}.ui--Table{overflow-x:auto;}"]),It=t.memo(kt),At=(0,A.e)("useNominations",(function(e=!0){const{api:s}=(0,c.h)(),n=(0,m.W7)(e&&s.query.staking.nominators.entries);return(0,t.useMemo)((()=>n&&function(e){const s={};for(let n=0;n<e.length;n++){const[t,a]=e[n];if(a.isSome&&t.args.length){const e=t.args[0].toString(),{submittedIn:n,targets:o}=a.unwrap();for(let t=0;t<o.length;t++){const a=o[t].toString();s[a]||(s[a]=[]),s[a].push({index:t+1,nominatorId:e,submittedIn:n})}}}return s}(n)),[n])}));var Pt=n(66571),Mt=n(95209);const Dt={},Tt={withController:!0,withExposure:!0,withPrefs:!0},Et={withController:!0,withPrefs:!0},qt={transform:({activeEra:e,eraLength:s,sessionLength:n})=>({activeEra:e,eraLength:s,lastEra:e.isZero()?j.nw:e.sub(j.If),sessionLength:n})},_t={defaultValue:{},transform:([e,s,n,t,a,o,i,r])=>({counterForNominators:s,counterForValidators:n,historyDepth:e,maxNominatorsCount:t&&t.isSome?t.unwrap():void 0,maxValidatorsCount:a&&a.isSome?a.unwrap():void 0,minNominatorBond:o,minValidatorBond:i,totalIssuance:r})};function $t(e){return(s,n)=>(s[e]=n+1,s)}function Ft(e){return!e.nextElected}function Ot(e){const s=[];return e.filter((({accountId:e})=>{const n=e.toString();return!s.includes(n)&&(s.push(n),!0)})).sort(((e,s)=>s.bondOther.cmp(e.bondOther))).map($t("rankBondOther")).sort(((e,s)=>s.bondOwn.cmp(e.bondOwn))).map($t("rankBondOwn")).sort(((e,s)=>s.bondTotal.cmp(e.bondTotal))).map($t("rankBondTotal")).sort(((e,s)=>e.stakedReturnCmp-s.stakedReturnCmp)).map($t("rankReward")).sort(((e,s)=>s.stakedReturnCmp-e.stakedReturnCmp||e.commissionPer-s.commissionPer||s.rankBondTotal-e.rankBondTotal)).map($t("rankOverall")).sort(((e,s)=>e.isFavorite===s.isFavorite?0:e.isFavorite?-1:1))}function Vt(e,s,n,t,{activeEra:a,eraLength:o,lastEra:i,sessionLength:r},l,c){const d={},u=e.createType("Exposure"),m=l&&i.sub(l).iadd(j.If),h=new Array(n.info.length);for(let l=0;l<n.info.length;l++){const{accountId:x,exposure:g=u,stakingLedger:f,validatorPrefs:v}=n.info[l];let[b,y]=g.total?[g.own.unwrap(),g.total.unwrap()]:[j.nw,j.nw];const w=y.isZero();var p;w&&(y=b=(null==(p=f.total)?void 0:p.unwrap())||j.nw);const N=(g.others||[]).reduce(((s,{value:n=e.createType("Compact<Balance>")})=>{const t=n.unwrap();return s.isZero()||t.lt(s)?t:s}),j.nw),C=x.toString(),k=i.isZero()?void 0:f.claimedRewards[f.claimedRewards.length-1];h[l]={accountId:x,bondOther:y.sub(b),bondOwn:b,bondShare:0,bondTotal:y,commissionPer:v.commission.unwrap().toNumber()/1e7,exposure:g,isActive:!w,isBlocking:!(!v.blocked||!v.blocked.isTrue),isElected:!Ft(n)&&n.nextElected.some((e=>e.eq(x))),isFavorite:t.includes(C),isNominating:(g.others||[]).reduce(((e,n)=>{var t;const a=n.who.toString();return d[a]=(d[a]||j.nw).add((null==(t=n.value)?void 0:t.toBn())||j.nw),e||s.includes(a)}),s.includes(C)),key:C,knownLength:a.sub(f.claimedRewards[0]||a),lastPayout:m&&k&&k.gt(m)&&!r.eq(j.If)?i.sub(k).mul(o):void 0,minNominated:N,numNominators:(g.others||[]).length,numRecentPayouts:m?f.claimedRewards.filter((e=>e.gte(m))).length:0,rankBondOther:0,rankBondOwn:0,rankBondTotal:0,rankNumNominators:0,rankOverall:0,rankReward:0,skipRewards:w,stakedReturn:0,stakedReturnCmp:0,validatorPrefs:v,withReturns:c}}return[h,d]}function Rt(e,s){const n=s.avgStaked,t=s.validators;return t?(n&&!n.isZero()&&t.forEach((s=>{if(!s.skipRewards&&s.withReturns){const t=n.mul(j.S8).imuln(e.stakedReturn).div(s.bondTotal);s.stakedReturn=(t.gt(j.Ew)?j.Ew:t).toNumber()/j.S8.toNumber(),s.stakedReturnCmp=s.stakedReturn*(100-s.commissionPer)/100}})),{...s,validators:Ot(t)}):s}const Zt=(0,A.e)("useSortedTargets",(function(e,s){var n;const{api:a}=(0,c.h)(),{allAccounts:o}=(0,d.x)(),{counterForNominators:i,counterForValidators:r,historyDepth:l,maxNominatorsCount:u,maxValidatorsCount:p,minNominatorBond:x,minValidatorBond:g,totalIssuance:f}=(0,h.L)([a.query.staking.historyDepth,a.query.staking.counterForNominators,a.query.staking.counterForValidators,a.query.staking.maxNominatorsCount,a.query.staking.maxValidatorsCount,a.query.staking.minNominatorBond,a.query.staking.minValidatorBond,null==(n=a.query.balances)?void 0:n.totalIssuance],_t),v=(0,m.W7)(a.derive.staking.electedInfo,[{...Tt,withLedger:s}]),y=(0,m.W7)(a.derive.staking.waitingInfo,[{...Et,withLedger:s}]),w=(0,m.W7)(a.derive.session.info,void 0,qt),N=(0,t.useMemo)((()=>v&&w&&f&&y?function(e,s,n,t,a,o,i,r){const[l,c]=Vt(e,s,n,a,i,r,!0),[d]=Vt(e,s,t,a,i),u=l.filter((({isActive:e})=>e)).map((({bondTotal:e})=>e)).sort(((e,s)=>e.cmp(s))),m=u.reduce(((e,s)=>e.iadd(s)),new(b())(0)),h=m.divn(u.length),p=Object.values(c).reduce(((e,s)=>e.isZero()||s.lt(e)?s:e),j.nw),x=(0,Mt.a)([l,d]),g=x.map((({commissionPer:e})=>e)).sort(((e,s)=>e-s)),f=Math.floor(g.length/2),v=g.length?g.length%2?g[f]:(g[f-1]+g[f])/2:0,y=d.map((({key:e})=>e)),w=(0,Mt.a)([l.map((({key:e})=>e)),y]),N=(0,Mt.a)([l.filter((({isBlocking:e})=>!e)).map((({key:e})=>e)),d.filter((({isBlocking:e})=>!e)).map((({key:e})=>e))]);return{avgStaked:h,lastEra:i.lastEra,lowStaked:u[0]||j.nw,medianComm:v,minNominated:p,nominateIds:N,nominators:Object.keys(c),totalIssuance:o,totalStaked:m,validatorIds:w,validators:x,waitingIds:y}}(a,o,v,y,e,f,w,a.consts.staking.historyDepth||l):Dt),[a,o,v,e,l,w,f,y]),C=(0,Pt.V)(null==N?void 0:N.totalStaked);return(0,t.useMemo)((()=>({counterForNominators:i,counterForValidators:r,historyDepth:a.consts.staking.historyDepth||l,inflation:C,maxNominatorsCount:u,maxValidatorsCount:p,medianComm:0,minNominated:j.nw,minNominatorBond:x,minValidatorBond:g,...C&&C.stakedReturn?Rt(C,N):N})),[a,N,i,r,l,C,u,p,x,g])}));var Bt=n(56732);function Lt(){const{t:e}=(0,y.$)();return(0,w.jsx)(l.Pd,{className:"warning centered",content:e("Use the account actions to create a new validator/nominator stash and bond it to participate in staking. Do not send funds directly via a transfer to a validator.")})}const Ht=t.memo(Lt);var Wt=n(61842);function zt(e){return e.length?[e.length,()=>e.map((e=>(0,w.jsx)(l.ax,{value:e},e)))]:null}function Ut({nominators:e,slashingSpans:s}){const{t:n}=(0,y.$)(),{api:a}=(0,c.h)(),{active:o,chilled:i}=(0,t.useMemo)((()=>function(e,s=[],n){const t=n&&!e.events.staking.SlashReported?s.filter((({submittedIn:e})=>n.lastNonzeroSlash.gt(e))).map((({nominatorId:e})=>e)):[];return{active:zt(s.filter((({nominatorId:e})=>!t.includes(e))).map((({nominatorId:e})=>e))),chilled:zt(t)}}(a,e,s)),[a,e,s]);return(0,w.jsxs)("td",{className:"expand all",children:[o&&(0,w.jsx)(l.n0,{renderChildren:o[1],summary:n("Nominations ({{count}})",{replace:{count:(0,I.u)(o[0])}})}),i&&(0,w.jsx)(l.n0,{renderChildren:i[1],summary:n("Renomination required ({{count}})",{replace:{count:(0,I.u)(i[0])}})})]})}const Jt=t.memo(Ut);function Gt(e){return[e.length,()=>e.map((({nominatorId:e,value:s})=>(0,w.jsx)(l.ax,{bonded:s,value:e,withBonded:!0},e)))]}function Qt(e){const s=new(b())(0);for(let n=0;n<e.length;n++)s.iadd(e[n].value);return s}function Xt({nominators:e,stakeOther:s}){const{api:n}=(0,c.h)(),[a,o,i,r]=(0,t.useMemo)((()=>{var t;return function(e,s,n){if(!s)return[null,j.nw,null,j.nw];const t=s.sort(((e,s)=>s.value.cmp(e.value)));if(!e||e.gtn(t.length))return[Gt(t),n||j.nw,null,j.nw];const a=e.toNumber(),o=t.slice(0,a),i=Qt(o),r=t.slice(a),l=Qt(r);return[Gt(o),i,Gt(r),l]}(null==(t=n.consts.staking)?void 0:t.maxNominatorRewardedPerValidator,e,s)}),[n,e,s]);return(0,w.jsxs)("td",{className:"expand all",children:[(!a||0!==a[0])&&(0,w.jsx)(l.n0,{className:a?"":"--tmp",renderChildren:a&&a[1],summary:(0,w.jsx)(f.Z,{labelPost:` (${a?a[0]:"0"})`,value:o})}),i&&(0,w.jsx)(l.n0,{className:"stakeOver",renderChildren:i[1],summary:(0,w.jsx)(f.Z,{labelPost:` (${i[0]})`,value:r})})]})}const Kt=t.memo(Xt),Yt=[];function ea({isChilled:e,isElected:s,isMain:n,isPara:a,isRelay:o,nominators:i=Yt,onlineCount:r,onlineMessage:c}){const{allAccounts:u}=(0,d.x)(),m=r&&r.toNumber(),h=(0,t.useMemo)((()=>i.some((({nominatorId:e})=>u.includes(e)))),[u,i]);return(0,w.jsxs)(w.Fragment,{children:[h?(0,w.jsx)(l.Ct,{className:"media--1100",color:"green",icon:"hand-paper"}):(0,w.jsx)(l.Ct,{className:"media--1100",color:"transparent"}),o&&(a?(0,w.jsx)(l.Ct,{className:"media--1100",color:"purple",icon:"vector-square"}):(0,w.jsx)(l.Ct,{className:"media--1100",color:"transparent"})),e?(0,w.jsx)(l.Ct,{className:"media--1000",color:"red",icon:"cancel"}):s?(0,w.jsx)(l.Ct,{className:"media--1000",color:"blue",icon:"chevron-right"}):(0,w.jsx)(l.Ct,{className:"media--1000",color:"transparent"}),n&&(m?(0,w.jsx)(l.Ct,{className:"media--900",color:"green",info:m}):c?(0,w.jsx)(l.Ct,{className:"media--900",color:"green",icon:"envelope"}):(0,w.jsx)(l.Ct,{className:"media--900",color:"transparent"})),(0,w.jsx)(ft,{numNominators:i.length})]})}const sa=t.memo(ea),na={transform:e=>e.unwrapOr(null)};function ta({address:e,className:s="",filterName:n,hasQueries:a,isElected:o,isFavorite:i,isMain:r,isPara:d,lastBlock:u,minCommission:h,nominatedBy:p,points:x,recentlyOnline:g,toggleFavorite:v,validatorInfo:b,withIdentity:N}){var C;const{t:k}=(0,y.$)(),{api:I}=(0,c.h)(),[A,P]=(0,S.O)(!1),{accountInfo:M,slashingSpans:D}=function(e,s,n){const a=(0,t.useMemo)((()=>[s]),[s]);return{accountInfo:(0,pt.Y)(s),slashingSpans:(0,m.W7)(!n&&e.query.staking.slashingSpans,a,na)}}(I,e,r),{commission:T,isChilled:E,nominators:q,stakeOther:_,stakeOwn:$}=(0,t.useMemo)((()=>b?function({exposure:e,validatorPrefs:s},n){var t;let a,o,i,r;var l;e&&e.total&&(a=e.others.map((({value:e,who:s})=>({nominatorId:s.toString(),value:e.unwrap()}))),o=(null==(l=e.total)?void 0:l.unwrap())||j.nw,r=e.own.unwrap(),i=o.sub(r));const c=null==s||null==(t=s.commission)?void 0:t.unwrap();return{commission:null==c?void 0:c.toHuman(),isChilled:c&&n&&c.isZero()&&c.lt(n),nominators:a,stakeOther:i,stakeOwn:r,stakeTotal:o}}(b,h):{}),[h,b]),F=(0,t.useMemo)((()=>!M||(0,ht.r7)(I,e,M,n,N)),[I,M,e,n,N]),O=(0,t.useMemo)((()=>`#/staking/query/${e}`),[e]),V=(0,t.useMemo)((()=>x&&"greyAnim-"+Date.now()%25),[x]);return F?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("tr",{className:`${s} isExpanded isFirst ${A?"packedBottom":"isLast"}`,children:[(0,w.jsx)(l.iA.Column.Favorite,{address:e,isFavorite:i,toggle:v}),(0,w.jsx)("td",{className:"badge together",children:(0,w.jsx)(sa,{isChilled:E,isElected:o,isMain:r,isPara:d,isRelay:!(null==(C=I.query.parasShared||I.query.shared)||!C.activeValidatorIndices),nominators:r?q:p,onlineCount:null==g?void 0:g.blockCount,onlineMessage:null==g?void 0:g.hasMessage})}),(0,w.jsxs)("td",{className:"address all relative",children:[(0,w.jsx)(l.N,{value:e}),r&&V&&(0,w.jsx)(l.Vp,{className:`${V} absolute`,color:"lightgrey",label:x})]}),r?(0,w.jsx)(Kt,{nominators:q,stakeOther:_}):(0,w.jsx)(Jt,{nominators:p,slashingSpans:D}),(0,w.jsx)("td",{className:"number",children:T||(0,w.jsx)("span",{className:"--tmp",children:"50.00%"})}),r&&(0,w.jsx)("td",{className:"number",children:u}),(0,w.jsx)(l.iA.Column.Expand,{isExpanded:A,toggle:P})]}),A&&(0,w.jsxs)("tr",{className:`${s} ${A?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,w.jsx)("td",{colSpan:2}),(0,w.jsxs)("td",{className:"columar",colSpan:r?4:3,children:[(0,w.jsxs)(l.P0,{size:"small",children:[(0,w.jsx)(l.P0.Column,{children:r&&(null==$?void 0:$.gtn(0))&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h5",{children:k("own stake")}),(0,w.jsx)(f.Z,{value:$})]})}),(0,w.jsx)(l.P0.Column,{children:a&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h5",{children:k("graphs")}),(0,w.jsxs)("a",{href:O,children:[(0,w.jsx)(l.JO,{className:"highlight--color",icon:"chart-line"})," ",k("historic results")]})]})})]}),(0,w.jsx)(l.P0,{is100:!0,children:(0,w.jsx)(l.P0.Column,{children:(0,w.jsx)(l.NR,{data:e,type:"validator",withTitle:!0})})})]}),(0,w.jsx)("td",{})]})]}):null}const aa=t.memo(ta);function oa(e,s=[],n=[],t,a,o){return s.filter((s=>!o.includes(s)&&(!e||n.includes(s)))).map((e=>[e,t.includes(e),a.includes(e)])).sort((([e,,s],[t,,a])=>{const o=n.includes(e),i=n.includes(t);return s===a?o===i?0:o?-1:1:s?-1:1}))}function ia(e){const s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=e[n].toString();return s}const ra={};function la({className:e,favorites:s,hasQueries:n,isIntentions:a,isOwn:o,minCommission:i,nominatedBy:r,ownStashIds:d,paraValidators:u=ra,recentlyOnline:m,stakingOverview:h,targets:p,toggleFavorite:x}){var g;const{t:f}=(0,y.$)(),{api:v}=(0,c.h)(),{byAuthor:b,eraPoints:j}=(0,Bt.E)(),[N,C]=(0,t.useState)(""),k=(0,Wt.q)(),{validators:S,waiting:I}=(0,t.useMemo)((()=>function(e,s,n,t,a){if(!s)return{};const o=ia(s.nextElected),i=ia(s.validators);return{validators:oa(e,i,a,o,n,[]),waiting:oa(e,o,a,o,n,i).concat(oa(e,t,a,[],n,o))}}(o,h,s,p.waitingIds,d)),[s,o,d,h,p]),A=(0,t.useMemo)((()=>k?a?r&&I:S:void 0),[a,k,r,S,I]),P=(0,t.useMemo)((()=>p.validators&&function(e){const s={};for(let n=0;n<e.length;n++){const t=e[n];s[t.key]=t}return s}(p.validators)),[p]),M=(0,t.useRef)(a?[[f("intentions"),"start",3],[f("nominators"),"expand"],[f("commission"),"number"],[]]:[[f("validators"),"start",3],[f("other stake"),"expand"],[f("commission")],[f("last #")],[]]);return(0,w.jsx)(l.iA,{className:e,empty:a?A&&f("No waiting validators found"):A&&m&&P&&f("No active validators found"),emptySpinner:(0,w.jsxs)(w.Fragment,{children:[!I&&(0,w.jsx)("div",{children:f("Retrieving validators")}),!P&&(0,w.jsx)("div",{children:f("Retrieving validator info")}),a?!r&&(0,w.jsx)("div",{children:f("Retrieving nominators")}):!m&&(0,w.jsx)("div",{children:f("Retrieving online status")}),!A&&(0,w.jsx)("div",{children:f("Preparing validator list")})]}),filter:(0,w.jsx)(et,{nameFilter:N,setNameFilter:C}),header:M.current,legend:(0,w.jsx)(st.Z,{isRelay:!a&&!(null==(g=v.query.parasShared||v.query.shared)||!g.activeValidatorIndices),minCommission:i}),children:A&&A.map((([e,s,t])=>(0,w.jsx)(aa,{address:e,filterName:N,hasQueries:n,isElected:s,isFavorite:t,isMain:!a,isPara:u[e],lastBlock:b[e],minCommission:i,nominatedBy:null==r?void 0:r[e],points:j[e],recentlyOnline:null==m?void 0:m[e],toggleFavorite:x,validatorInfo:null==P?void 0:P[e]},e)))})}const ca=t.memo(la);var da=n(78473);function ua({className:e="",stakingOverview:s,targets:{counterForNominators:n,inflation:{idealStake:t,inflation:a,stakedFraction:o},nominators:i,waitingIds:r}}){const{t:c}=(0,y.$)(),d=(0,w.jsx)("span",{className:"percent",children:"%"});return(0,w.jsxs)(ma,{className:e,children:[(0,w.jsxs)("section",{children:[(0,w.jsx)(l.Jy,{label:c("validators"),children:s?(0,w.jsxs)(w.Fragment,{children:[(0,I.u)(s.validators.length)," / ",(0,I.u)(s.validatorCount)]}):(0,w.jsx)("span",{className:"--tmp",children:"999 / 999"})}),(0,w.jsx)(l.Jy,{className:"media--900",label:c("waiting"),children:r?(0,I.u)(r.length):(0,w.jsx)("span",{className:"--tmp",children:"99"})}),(0,w.jsx)(l.Jy,{className:"media--1000",label:c(n?"active / nominators":"nominators"),children:i?(0,w.jsxs)(w.Fragment,{children:[(0,I.u)(i.length),n&&(0,w.jsxs)(w.Fragment,{children:[" / ",(0,I.u)(n)]})]}):(0,w.jsx)("span",{className:"--tmp",children:"999 / 999"})})]}),(0,w.jsxs)("section",{children:[t>0&&Number.isFinite(t)&&(0,w.jsx)(l.Jy,{className:"media--1400",label:c("ideal staked"),children:(0,w.jsxs)(w.Fragment,{children:[(100*t).toFixed(1),d]})}),o>0&&(0,w.jsx)(l.Jy,{className:"media--1300",label:c("staked"),children:(0,w.jsxs)(w.Fragment,{children:[(100*o).toFixed(1),d]})}),a>0&&Number.isFinite(a)&&(0,w.jsx)(l.Jy,{className:"media--1200",label:c("inflation"),children:(0,w.jsxs)(w.Fragment,{children:[a.toFixed(1),d]})})]}),(0,w.jsx)("section",{children:(0,w.jsx)(da.Z,{})})]})}const ma=(0,o.ZP)(l.Ty).withConfig({displayName:"Summary__StyledSummaryBox",componentId:"sc-e935xe-0"})([".validator--Account-block-icon{display:inline-block;margin-right:0.75rem;margin-top:-0.25rem;vertical-align:middle;}.validator--Summary-authors{.validator--Account-block-icon+.validator--Account-block-icon{margin-left:-1.5rem;}}.percent{font-size:var(--font-percent-tiny);}"]),ha=t.memo(ua),pa={},xa={},ga={};function fa({className:e="",favorites:s,hasAccounts:n,hasQueries:a,minCommission:o,nominatedBy:i,ownStashes:r,paraValidators:d,stakingOverview:u,targets:h,toggleFavorite:p,toggleLedger:x,toggleNominatedBy:g}){var f;const{t:v}=(0,y.$)(),{api:b}=(0,c.h)(),{byAuthor:j,eraPoints:N}=(0,Bt.E)(),[C,k]=(0,t.useState)(0),[S,I]=(0,t.useState)(1),A=(0,m.W7)(null==(f=b.derive.imOnline)?void 0:f.receivedHeartbeats),P=(0,t.useCallback)((e=>{e&&g(),k(e)}),[g]),M=(0,t.useRef)([{text:v("Own validators"),value:"mine"},{text:v("All validators"),value:"all"}]),D=(0,t.useRef)([{text:v("Active"),value:"active"},{text:v("Waiting"),value:"waiting"}]),T=(0,t.useMemo)((()=>r&&r.map((({stashId:e})=>e))),[r]);(0,t.useEffect)((()=>{x&&x()}),[x]);const E=0===S;return(0,w.jsxs)("div",{className:`${e} staking--Overview`,children:[(0,w.jsx)(ha,{stakingOverview:u,targets:h}),n&&0===(null==r?void 0:r.length)&&(0,w.jsx)(Ht,{}),(0,w.jsxs)(l.zx.Group,{children:[(0,w.jsx)(l.tX,{onChange:I,options:M.current,value:S}),(0,w.jsx)(l.tX,{onChange:P,options:D.current,value:C})]}),(0,w.jsx)(ca,{byAuthor:0===C?j:xa,eraPoints:0===C?N:ga,favorites:s,hasQueries:a,isIntentions:1===C,isOwn:E,minCommission:0===C?o:void 0,nominatedBy:1===C?i:void 0,ownStashIds:T,paraValidators:0===C&&d||pa,recentlyOnline:0===C?A:void 0,stakingOverview:u,targets:h,toggleFavorite:p},C)]})}const va=t.memo(fa),ba=["actions","payout"],ja={defaultValue:[!1,void 0,{}],transform:([e,s,n,t])=>[!!e&&e.isOpen,s&&!s.isZero()?s:void 0,n&&t?t.reduce(((e,s)=>({...e,[n[s.toNumber()].toString()]:!0})),{}):{}]};function ya({basePath:e,className:s=""}){var n;const{t:o}=(0,y.$)(),{api:f}=(0,c.h)(),{areAccountsLoaded:v,hasAccounts:b}=(0,d.x)(),{pathname:j}=(0,a.TH)(),[N,C]=(0,t.useState)(!1),[k,S]=(0,u.r)(ae),[I,A]=(0,t.useState)(!1),P=At(I),M=(0,m.W7)(f.derive.staking.overview),[D,T,E]=(0,h.L)([f.query.staking.eraElectionStatus,f.query.staking.minCommission,f.query.session.validators,null==(n=f.query.parasShared||f.query.shared)?void 0:n.activeValidatorIndices],ja),q=(0,r.Z)(),_=(0,p.w)(),$=(0,x.g)(),F=Zt(k,N),O=(0,t.useRef)(function(e){return{bags:`${e}/bags`,payout:`${e}/payout`,pools:`${e}/pools`,query:[`${e}/query/:value`,`${e}/query`],slashes:`${e}/slashes`,targets:`${e}/targets`}}(e)),V=(0,t.useMemo)((()=>{var e;return b&&!(null==(e=f.query.imOnline)||!e.authoredBlocks)&&!!f.query.staking.activeEra}),[f,b]),R=(0,t.useMemo)((()=>b&&!!_&&0!==_.length),[b,_]),Z=(0,t.useMemo)((()=>(_||[]).filter((({isStashValidating:e})=>e))),[_]),B=(0,t.useCallback)((()=>C(!0)),[]),L=(0,t.useCallback)((()=>A(!0)),[]),H=(0,t.useMemo)((()=>{var e,s;return[{isRoot:!0,name:"overview",text:o("Overview")},{name:"actions",text:o("Accounts")},R&&(0,g.m)(f.query.staking.activeEra)&&{name:"payout",text:o("Payouts")},(0,g.m)(null==(e=f.query.nominationPools)?void 0:e.minCreateBond)&&{name:"pools",text:o("Pools")},{alias:"returns",name:"targets",text:o("Targets")},R&&(0,g.m)(null==(s=f.query.voterBagsList||f.query.bagsList||f.query.voterList)?void 0:s.counterForListNodes)&&{name:"bags",text:o("Bags")},{count:$.reduce(((e,[,s])=>e+s.length),0),name:"slashes",text:o("Slashes")},{hasParams:!0,name:"query",text:o("Validator stats")}].filter((e=>!!e))}),[f,R,$,o]);return(0,w.jsxs)(wa,{className:`${s} staking--App`,children:[(0,w.jsx)(l.mQ,{basePath:e,hidden:v&&!b?ba:void 0,items:H}),(0,w.jsxs)(a.rs,{children:[(0,w.jsx)(a.AW,{path:O.current.bags,children:(0,w.jsx)(Gs,{ownStashes:_})}),(0,w.jsx)(a.AW,{path:O.current.payout,children:(0,w.jsx)(pn,{historyDepth:F.historyDepth,isInElection:D,ownPools:q,ownValidators:Z})}),(0,w.jsx)(a.AW,{path:O.current.pools,children:(0,w.jsx)(i.Z,{ownPools:q})}),(0,w.jsx)(a.AW,{path:O.current.query,children:(0,w.jsx)(Fn,{})}),(0,w.jsx)(a.AW,{path:O.current.slashes,children:(0,w.jsx)(Jn,{ownStashes:_,slashes:$})}),(0,w.jsx)(a.AW,{path:O.current.targets,children:(0,w.jsx)(It,{isInElection:D,nominatedBy:P,ownStashes:_,stakingOverview:M,targets:F,toggleFavorite:S,toggleLedger:B,toggleNominatedBy:L})})]}),(0,w.jsx)(Cs,{className:j===`${e}/actions`?"":"--hidden",isInElection:D,minCommission:T,ownPools:q,ownStashes:_,targets:F}),(0,w.jsx)(va,{className:e===j?"":"--hidden",favorites:k,hasAccounts:b,hasQueries:V,minCommission:T,nominatedBy:P,ownStashes:_,paraValidators:E,stakingOverview:M,targets:F,toggleFavorite:S,toggleNominatedBy:L})]})}const wa=o.ZP.main.withConfig({displayName:"src__StyledMain",componentId:"sc-1y3s002-0"})([".staking--Chart{margin-top:1.5rem;h1{margin-bottom:0.5rem;}.ui--Spinner{margin:2.5rem auto;}}.staking--optionsBar{margin:0.5rem 0 1rem;text-align:center;white-space:normal;.staking--buttonToggle{display:inline-block;margin-right:1rem;margin-top:0.5rem;}}.ui--Expander.stakeOver{.ui--Expander-summary{color:var(--color-error);}}"]),Na=t.memo(ya)},40489:(e,s,n)=>{n.d(s,{$:()=>a});var t=n(61349);function a(){return(0,t.$G)("app-staking")}},77142:(e,s,n)=>{n.d(s,{Z:()=>U});var t=n(2784),a=n(61397),o=n(95209),i=n(19680),r=n(92529),l=n(7840),c=n(52107),d=n(69811),u=n(52322);function m({className:e,isDisabled:s,ownAccounts:n,params:{minCreateBond:o,minNominatorBond:m,nextPoolId:h}}){const{t:p}=(0,i.$)(),{api:x}=(0,r.h)(),[g,f]=(0,l.O)(),[v,b]=(0,t.useState)(null),[j,y]=(0,t.useState)(),[w,N]=(0,t.useState)(""),C=(0,t.useMemo)((()=>o&&m&&(0,c.x)(o,m,x.consts.balances.existentialDeposit)),[x,o,m]),k=(0,d.Z)(v,j,C),S=(0,t.useMemo)((()=>!w||w.length<3||w.length>32),[w]),I=(0,t.useMemo)((()=>j&&v&&!k&&h?x.tx.utility.batch([x.tx.nominationPools.create(j,v,v,v),x.tx.nominationPools.setMetadata(h,w)]):null),[x,v,j,k,w,h]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.zx,{icon:"plus",isDisabled:s||!C,label:p("Add pool"),onClick:f}),g&&(0,u.jsxs)(a.u_,{className:e,header:p("Create nomination pool"),onClose:f,size:"large",children:[(0,u.jsxs)(a.u_.Content,{children:[(0,u.jsx)(a.u_.Columns,{hint:p("The origin account will also be set as the pool admin, nominator and state toggler."),children:(0,u.jsx)(a.rp,{filter:n,label:p("create pool from"),onChange:b,type:"account",value:v,withExclude:!0})}),(0,u.jsx)(a.u_.Columns,{hint:p("The initial value to assign to the pool. It is set to the maximum of the minimum bond and the minium nomination value."),children:(0,u.jsx)(a.H,{autoFocus:!0,defaultValue:C,isError:k,label:p("initial value"),onChange:y})}),(0,u.jsx)(a.u_.Columns,{hint:p("The metadata description to set for this pool"),children:(0,u.jsx)(a.II,{isError:S,label:p("description"),maxLength:32,onChange:N})}),(0,u.jsx)(a.u_.Columns,{hint:p("The id that will be assigned to this nomination pool."),children:(0,u.jsx)(a.Rn,{defaultValue:h,isDisabled:!0,label:p("pool id")})})]}),(0,u.jsx)(a.u_.Actions,{children:(0,u.jsx)(a.cA,{accountId:v,extrinsic:I,icon:"plus",isDisabled:!v||k||S,label:p("Create"),onStart:f})})]})]})}const h=t.memo(m);var p=n(82740),x=n(76277);function g({className:e,isDisabled:s,ownAccounts:n,params:{minMemberBond:o},poolId:c}){const{t:m}=(0,i.$)(),{api:h}=(0,r.h)(),[p,x]=(0,l.O)(),[g,f]=(0,t.useState)(null),[v,b]=(0,t.useState)(),j=(0,d.Z)(g,v,o);return s?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.zx,{icon:"plus",isDisabled:!o,label:m("Join"),onClick:x}),p&&(0,u.jsxs)(a.u_,{className:e,header:m("Join nomination pool"),onClose:x,size:"large",children:[(0,u.jsxs)(a.u_.Content,{children:[(0,u.jsx)(a.u_.Columns,{hint:m("The account that will join the pool."),children:(0,u.jsx)(a.rp,{filter:n,label:m("join pool from"),onChange:f,type:"account",value:g,withExclude:!0})}),(0,u.jsx)(a.u_.Columns,{hint:m("The initial value to assign to the pool. It is set to the minimum value required to join a pool."),children:(0,u.jsx)(a.H,{autoFocus:!0,defaultValue:o,isError:j,label:m("initial value"),onChange:b})})]}),(0,u.jsx)(a.u_.Actions,{children:(0,u.jsx)(a.cA,{accountId:g,icon:"plus",isDisabled:!g||j,label:m("Join"),onStart:x,params:[v,c],tx:h.tx.nominationPools.join})})]})]})}const f=t.memo(g);var v=n(53469);function b({className:e="",members:s,ownAccounts:n,params:o,poolId:r}){const{t:c}=(0,i.$)(),d=(0,v.Z)(r),[m,h]=(0,l.O)(!1),p=(0,t.useCallback)((()=>s.map((({accountId:e,member:s},n)=>(0,u.jsx)(a.ax,{balance:s.points,value:e,withBalance:!0,withShrink:!0},`${n}:${e}`)))),[s]),g=(0,t.useCallback)((()=>d&&d.nominating.map(((e,s)=>(0,u.jsx)(a.ax,{value:e,withShrink:!0},`${s}:${e}`)))),[d]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(j,{className:`${e} isFirst isExpanded ${m?"":"isLast"}`,children:[(0,u.jsx)(a.iA.Column.Id,{value:r}),(0,u.jsx)("td",{className:"start",children:(0,u.jsx)("div",{className:m?"":"clamp",children:d?d.metadata:(0,u.jsx)("span",{className:"--tmp",children:"This is a pool placeholder"})})}),(0,u.jsx)("td",{className:"number media--1100",children:d?d.bonded.state.type:(0,u.jsx)("span",{className:"--tmp",children:"Destroying"})}),(0,u.jsx)(a.iA.Column.Balance,{value:null==d?void 0:d.bonded.points,withLoading:!0}),(0,u.jsx)("td",{className:"number media--1400",children:d&&!d.rewardClaimable.isZero()&&(0,u.jsx)(x.Z,{value:d.rewardClaimable})}),(0,u.jsx)("td",{className:"number",children:d&&0!==d.nominating.length&&(0,u.jsx)(a.n0,{className:"media--1300",empty:c("No nominees"),renderChildren:g,summary:c("Nominees ({{count}})",{replace:{count:d.nominating.length}})})}),(0,u.jsx)("td",{className:"number",children:s&&0!==s.length&&(0,u.jsx)(a.n0,{className:"media--1200",empty:c("No members"),renderChildren:p,summary:c("Members ({{count}})",{replace:{count:s.length}})})}),(0,u.jsx)("td",{className:"button",children:d?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(f,{isDisabled:!d.bonded.state.isOpen||!!o.maxMembersPerPool&&!d.bonded.memberCounter.ltn(o.maxMembersPerPool),ownAccounts:n,params:o,poolId:r}),(0,u.jsx)(a.Vh,{expanded:m,onClick:h})]}):(0,u.jsx)(a.$j,{noLabel:!0})})]}),d&&m&&(0,u.jsxs)(j,{className:`${e} isExpanded isLast`,children:[(0,u.jsxs)("td",{colSpan:4,children:[(0,u.jsxs)("div",{className:"label-column-right",children:[(0,u.jsx)("div",{className:"label",children:c("creator")}),(0,u.jsx)("div",{className:"inline-balance",children:(0,u.jsx)(a.ax,{value:d.bonded.roles.depositor})})]}),d.bonded.roles.root.isSome&&(0,u.jsxs)("div",{className:"label-column-right",children:[(0,u.jsx)("div",{className:"label",children:c("root")}),(0,u.jsx)("div",{className:"inline-balance",children:(0,u.jsx)(a.ax,{value:d.bonded.roles.root.unwrap()})})]}),d.bonded.roles.nominator.isSome&&(0,u.jsxs)("div",{className:"label-column-right",children:[(0,u.jsx)("div",{className:"label",children:c("nominator")}),(0,u.jsx)("div",{className:"inline-balance",children:(0,u.jsx)(a.ax,{value:d.bonded.roles.nominator.unwrap()})})]}),d.bonded.roles.stateToggler.isSome&&(0,u.jsxs)("div",{className:"label-column-right",children:[(0,u.jsx)("div",{className:"label",children:c("toggler")}),(0,u.jsx)("div",{className:"inline-balance",children:(0,u.jsx)(a.ax,{value:d.bonded.roles.stateToggler.unwrap()})})]})]}),(0,u.jsxs)("td",{colSpan:4,children:[(0,u.jsxs)("div",{className:"label-column-right",children:[(0,u.jsx)("div",{className:"label",children:c("stash")}),(0,u.jsx)("div",{className:"inline-balance",children:(0,u.jsx)(a.ax,{value:d.stashId})})]}),(0,u.jsxs)("div",{className:"label-column-right",children:[(0,u.jsx)("div",{className:"label",children:c("rewards")}),(0,u.jsx)("div",{className:"inline-balance",children:(0,u.jsx)(a.ax,{value:d.rewardId})})]})]})]})]})}const j=p.ZP.tr.withConfig({displayName:"Pool__StyledTr",componentId:"sc-14p6jtu-0"})([".label-column-right,.label-column-left{display:flex;align-items:center;.label{width:50%;}}.label{text-align:right;padding:0 1.7rem 0 0;line-height:normal;color:var(--color-label);text-transform:lowercase;}.clamp{-webkit-box-orient:vertical;-webkit-line-clamp:1;box-orient:vertical;display:-webkit-box;line-clamp:1;overflow:hidden;text-overflow:ellipsis;}"]),y=t.memo(b);var w=n(30581),N=n(26238),C=n(36856),k=n(89448);const S=[],I={transform:e=>e.reduce(((e,[{args:[s]},n])=>{if(n.isSome){const t=n.unwrap(),a=t.poolId.toString();e[a]||(e[a]=[]),e[a].push({accountId:s.toString(),member:t})}return e}),{})},A={transform:([[e],s])=>e.filter(((e,n)=>s[n].isSome)).map(((e,n)=>({accountId:e.toString(),member:s[n].unwrap()}))),withParamsTransform:!0};function P(e){const s=[];return e.forEach((({event:{data:e,method:n}})=>{if("Bonded"===n){const[n,,,t]=e;t.isTrue&&s.push(n)}})),{added:s,removed:[]}}const M=(0,k.e)("useMembers",(function(){const{api:e}=(0,r.h)(),[s,n]=(0,t.useState)(),a=(0,w.t)(e.query.nominationPools.poolMembers,[],I),o=(0,N.N)([e.events.nominationPools.Bonded],P,S),i=(0,C.W7)(o&&0!==o.length&&e.query.nominationPools.poolMembers.multi,[o],A);return(0,t.useEffect)((()=>{a&&n(a)}),[a]),(0,t.useEffect)((()=>{i&&n((e=>e&&function(e,s){return s.reduce(((e,s)=>{const n=s.member.poolId.toString(),t=[];return e[n]&&e[n].forEach((e=>{e.accountId!==s.accountId&&t.push(e)})),t.push(s),e[n]=t,e}),{...e})}(e,i)))}),[i]),s}));function D({className:e,ids:s,ownPools:n,params:r}){const{t:l}=(0,i.$)(),c=M(),[d,m]=(0,t.useState)((()=>n&&n.length?0:1)),p=(0,t.useMemo)((()=>n&&(0,o.a)(n.map((({members:e})=>Object.keys(e))))),[n]),x=(0,t.useMemo)((()=>!s||!!r.maxPools&&s.length>r.maxPools),[s,r]),g=(0,t.useMemo)((()=>n&&s?d?s:s.filter((e=>n.some((({poolId:s})=>e.eq(s))))):void 0),[s,n,d]),f=(0,t.useMemo)((()=>[[l("pools"),"start",2],[l("state"),"media--1100"],[l("points")],[l("claimable"),"media--1400"],[void 0,void 0,3]]),[l]),v=(0,t.useRef)([{text:l("Own pools"),value:"mine"},{text:l("All pools"),value:"all"}]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(a.zx.Group,{children:[(0,u.jsx)(a.tX,{onChange:m,options:v.current,value:d}),(0,u.jsx)(h,{isDisabled:x,ownAccounts:p,params:r})]}),(0,u.jsx)(a.iA,{className:e,empty:c&&g&&l("No available nomination pools"),emptySpinner:l("Retrieving nomination pools"),header:f,children:c&&g&&g.map((e=>(0,u.jsx)(y,{members:c[e.toString()],ownAccounts:p,params:r,poolId:e},e.toString())))})]})}const T=t.memo(D);var E=n(65968),q=n(14681);function _({className:e,params:{maxMembers:s,maxMembersPerPool:n,maxPools:t},poolCount:o}){const{t:r}=(0,i.$)();return(0,u.jsxs)(a.Ty,{className:e,children:[(0,u.jsx)(a.Jy,{label:r("pools"),children:(0,E.h)(o)&&(0,u.jsxs)(u.Fragment,{children:[(0,q.u)(o),t>0&&(0,u.jsxs)(u.Fragment,{children:[" / ",(0,q.u)(t)]})]})}),(0,u.jsxs)("section",{children:[s>0&&(0,u.jsx)(a.Jy,{label:r("max. members"),children:(0,q.u)(s)}),n>0&&(0,u.jsx)(a.Jy,{label:r("max. members / pool"),children:(0,q.u)(n)})]})]})}const $=t.memo(_);var F=n(28008),O=n(54984),V=n(95292);const R={defaultValue:{lastPoolId:V.nw,maxMembers:0,maxMembersPerPool:0,maxPools:0,nextPoolId:V.If},transform:([e,s,n,t,a,o,i])=>({lastPoolId:e,maxMembers:s.unwrapOr(V.nw).toNumber(),maxMembersPerPool:n.unwrapOr(V.nw).toNumber(),maxPools:t.unwrapOr(V.nw).toNumber(),minCreateBond:a,minJoinBond:o,minMemberBond:o,minNominatorBond:i,nextPoolId:e.add(V.If)})},Z=(0,k.e)("useParams",(function(){const{api:e}=(0,r.h)();return(0,O.L)([e.query.nominationPools.lastPoolId,e.query.nominationPools.maxPoolMembers,e.query.nominationPools.maxPoolMembersPerPool,e.query.nominationPools.maxPools,e.query.nominationPools.minCreateBond,e.query.nominationPools.minJoinBond,e.query.staking.minNominatorBond],R)}));var B=n(57513);const L={transform:e=>e.map((({args:[e]})=>e)).sort(((e,s)=>e.cmp(s)))};function H(e){const s=[],n=[];return e.forEach((({event:{data:e,method:t}})=>{"Created"===t?s.push(e[1]):n.push(e[0])})),{added:s,removed:n}}const W=(0,k.e)("usePoolIds",(function(){const{api:e}=(0,r.h)(),s=(0,B.k)(e.query.nominationPools.bondedPools,[],L);return(0,N.N)([e.events.nominationPools.Created,e.events.nominationPools.Destroyed],H,s)}));function z({className:e,ownPools:s}){const n=W(),t=(0,F.Z)(),a=Z();return(0,u.jsxs)("div",{className:e,children:[(0,u.jsx)($,{params:a,poolCount:null==n?void 0:n.length}),(0,u.jsx)(T,{ids:n,ownPools:t||s,params:a})]})}const U=t.memo(z)},69811:(e,s,n)=>{n.d(s,{Z:()=>i});var t=n(2784),a=n(92529),o=n(36856);const i=(0,n(89448).e)("useAmountError",(function(e,s,n){const{api:i}=(0,a.h)(),r=(0,o.W7)(!!e&&i.derive.balances.all,[e]);return(0,t.useMemo)((()=>!s||s.isZero()||!n||n.gt(s)||!!r&&s.gt(r.availableBalance.sub(i.consts.balances.existentialDeposit))),[i,s,r,n])}))},28008:(e,s,n)=>{n.d(s,{Z:()=>d});var t=n(2784),a=n(92529),o=n(13328),i=n(36856),r=n(89448),l=n(42493);const c={transform:([[e],s])=>{const n=[];for(let t=0;t<e.length;t++)if(s[t].isSome){const a=s[t].unwrap();let o=n.find((({poolId:e})=>e.eq(a.poolId)));o||(o={members:{},poolId:a.poolId},n.push(o)),o.members[e[t]]=a}return n},withParamsTransform:!0},d=(0,r.e)("useOwnPools",(function(){var e;const{api:s}=(0,a.h)(),{allAccounts:n}=(0,o.x)(),r=(0,i.W7)(null==(e=s.query.nominationPools)?void 0:e.poolMembers.multi,[n],c);return(0,t.useMemo)((()=>r&&r.map((e=>({...e,...(0,l.i)(s,e.poolId)})))),[s,r])}))},42493:(e,s,n)=>{n.d(s,{Z:()=>p,i:()=>h});var t=n(2784),a=n(92529),o=n(89448),i=n(64021),r=n(51330),l=n(57928);const c=new Uint8Array(32),d=(0,i.d)("modl"),u={bitLength:32,isLe:!0};function m(e,s,n,t){return e.registry.createType("AccountId32",(0,r.e)(d,s,new Uint8Array([t]),(0,l.a)(n,u),c)).toString()}function h(e,s){const n=e.consts.nominationPools.palletId.toU8a();return{rewardId:m(e,n,s,1),stashId:m(e,n,s,0)}}const p=(0,o.e)("usePoolAccounts",(function(e){const{api:s}=(0,a.h)();return(0,t.useMemo)((()=>h(s,e)),[s,e])}))},53469:(e,s,n)=>{n.d(s,{Z:()=>u});var t=n(2784),a=n(92529),o=n(54984),i=n(89448),r=n(52107),l=n(95292),c=n(42493);const d={defaultValue:null,transform:([e,s,n,t,a])=>{return e.isSome&&n.isSome?{bonded:e.unwrap(),metadata:s.length?(o=s.isUtf8?s.toUtf8():s.toString(),o.replace(/[^\x20-\x7E]/g,"")):null,nominating:t.unwrapOr({targets:[]}).targets.map((e=>e.toString())),reward:n.unwrap(),rewardClaimable:a.data.free}:null;var o}},u=(0,i.e)("usePoolInfo",(function(e){const{api:s}=(0,a.h)(),n=(0,c.Z)(e),i=(0,o.L)([[s.query.nominationPools.bondedPools,e],[s.query.nominationPools.metadata,e],[s.query.nominationPools.rewardPools,e],[s.query.staking.nominators,n.stashId],[s.query.system.account,n.rewardId]],d);return(0,t.useMemo)((()=>i&&{...n,...i,rewardClaimable:(0,r.x)(l.nw,i.rewardClaimable.sub(s.consts.balances.existentialDeposit))}),[s,i,n])}))},40030:(e,s,n)=>{n.d(s,{Z:()=>ke});var t=n(2784),a=n(7267),o=n(61397),i=n(92529),r=n(25314),l=n(33661),c=n(77142),d=n(19680);const u={useExposure:{},useHeartbeat:{}},m={useElectedValidators:{},usePoints:{},useValidatorsActive:{},useValidatorsAll:{},useValidatorsWaiting:{}};function h(e,s,n){var a;return(0,t.useEffect)((()=>{n&&(u[e][s]={value:n})}),[s,e,n]),n||(null==(a=u[e][s])?void 0:a.value)}function p(e,s){var n;return(0,t.useEffect)((()=>{s&&(m[e]={value:s})}),[e,s]),s||(null==(n=m[e])?void 0:n.value)}var x=n(36856),g=n(89448);const f={transform:e=>e.isSome?e.unwrap().index:null},v={transform:e=>e.unwrapOr(null)},b=(0,g.e)("useSessionInfo",(function(){const{api:e}=(0,i.h)(),s=(0,x.W7)(e.query.staking.activeEra,void 0,f),n=(0,x.W7)(e.query.staking.currentEra,void 0,v),a=(0,x.W7)(e.query.session.currentIndex);return(0,t.useMemo)((()=>({activeEra:s,currentEra:n,currentSession:a})),[s,n,a])}));var j=n(82740),y=n(76948),w=n(33403),N=n(13328),C=n(57513);const k={transform:e=>e.map((({args:[,e]})=>e.toString()))},S=(0,g.e)("useElectedValidators",(function({currentEra:e}){const{api:s}=(0,i.h)(),n=(0,t.useMemo)((()=>e&&[e]),[e]);return p("useElectedValidators",(0,C.k)(n&&s.query.staking.erasStakers,n,k))}));function I(e,s){return e.isFavorite===s.isFavorite?e.isOwned===s.isOwned?e.isElected===s.isElected?0:e.isElected?-1:1:e.isOwned?-1:1:e.isFavorite?-1:1}const A=(0,g.e)("useTaggedValidators",(function(e,s,n){const{allAccounts:a}=(0,N.x)(),o=S(s),i=(0,t.useMemo)((()=>o&&n&&function(e,s){return e.map((e=>{const n=s.includes(e.stashId);return e.isElected!==n?(0,w.Z)({},e,{isElected:n}):e}))}(n,o)),[o,n]);return(0,t.useMemo)((()=>i&&function(e,s,n){return n.map((n=>{const t=s.includes(n.stashId),a=e.includes(n.stashId);return n.isFavorite!==t||n.isOwned!==a?(0,w.Z)({},n,{isFavorite:t,isOwned:a}):n})).sort(I)}(a,e,i)),[a,e,i])})),P={transform:e=>e.map(((e,s)=>{const n=e.toString();return{isElected:!1,isFavorite:!1,isOwned:!1,key:`${n}:${s}`,stashId:n,stashIndex:s}}))},M={transform:e=>e.map((e=>e.toNumber()))},D=(0,g.e)("useValidatorsActive",(function(e,s){var n;const{api:a}=(0,i.h)(),o=(0,x.W7)(a.query.session.validators,void 0,P),r=(0,x.W7)(null==(n=a.query.parasShared||a.query.shared)?void 0:n.activeValidatorIndices,void 0,M),l=(0,t.useMemo)((()=>r&&o?o.map(((e,s)=>r.includes(s)?(0,w.Z)({isPara:!0},e):e)):o),[r,o]);return p("useValidatorsActive",A(e,s,l))}));var T=n(61842),E=n(7840),q=n(76277),_=n(14681),$=n(48801),F=n.n($);const O={transform:({others:e,own:s,total:n})=>({others:e.map((({value:e,who:s})=>({value:e.unwrap(),who:s.toString()}))).sort(((e,s)=>s.value.cmp(e.value))),own:s.unwrap(),total:n.unwrap()})},V=(0,g.e)("useExposure",(function({stashId:e},{activeEra:s}){const{api:n}=(0,i.h)(),a=(0,t.useMemo)((()=>s&&[s,e]),[s,e]),o=(0,x.W7)(a&&n.query.staking.erasStakers,a,O),r=(0,x.W7)(a&&n.query.staking.erasStakersClipped,a,O),l=(0,t.useMemo)((()=>o&&r&&function(e,s){let n;const t=e.others.filter((({who:e})=>!s.others.find((s=>e===s.who))));return t.length&&(n={others:t,total:t.reduce(((e,{value:s})=>e.iadd(s)),new(F())(0))}),{clipped:s,exposure:e,waiting:n}}(o,r)),[r,o]);return h("useExposure",e,l)}));var R=n(65968),Z=n(47538);const B={},L={transform:e=>e.toNumber()},H={transform:e=>e.isSome},W=(0,g.e)("useHeartbeat",(function({stashId:e,stashIndex:s},{currentSession:n}){const{api:a}=(0,i.h)(),o=(0,t.useMemo)((()=>-1===s?void 0:n&&{authoredBlocks:[n,e],receivedHeartbeats:[n,s]}),[n,e,s]),r=(0,x.W7)(o&&a.query.imOnline.authoredBlocks,null==o?void 0:o.authoredBlocks,L),l=(0,x.W7)(o&&a.query.imOnline.receivedHeartbeats,null==o?void 0:o.receivedHeartbeats,H),c=(0,t.useMemo)((()=>(0,R.h)(r)&&(0,Z.j)(l)&&{authoredBlocks:r,isOnline:!(!r&&!l)}),[r,l]);return h("useHeartbeat",e,c)||B}));var z=n(52322);function U({children:e,className:s="",isExpanded:n}){return n?(0,z.jsxs)("tr",{className:`${s} isExpanded isLast`,children:[(0,z.jsx)("td",{}),(0,z.jsx)("td",{}),e,(0,z.jsx)("td",{})]}):null}const J=t.memo(U);function G({children:e,className:s="",isExpanded:n}){return(0,z.jsxs)("tr",{className:`${s} isExpanded ${n?"":"isLast"} packedTop`,children:[(0,z.jsx)("td",{}),e,(0,z.jsx)("td",{})]})}const Q=t.memo(G);function X({className:e,heartbeat:{authoredBlocks:s,isOnline:n}={},isChilled:a,nominators:i,validator:{isElected:r,isPara:l}}){const{allAccounts:c}=(0,N.x)(),d=(0,t.useMemo)((()=>i&&i.some((e=>c.includes(e)))),[c,i]),u=(0,z.jsx)(o.Ct,{className:"opaque",color:"gray"});return(0,z.jsxs)(K,{className:e,children:[d?(0,z.jsx)(o.Ct,{color:"green",icon:"hand-paper"}):u,l?(0,z.jsx)(o.Ct,{color:"purple",icon:"vector-square"}):u,a?(0,z.jsx)(o.Ct,{color:"red",icon:"cancel"}):r?(0,z.jsx)(o.Ct,{color:"blue",icon:"chevron-right"}):u,n?s?(0,z.jsx)(o.Ct,{color:"green",info:(0,z.jsx)("span",{className:"authoredBlocks",children:s})}):(0,z.jsx)(o.Ct,{color:"green",icon:"envelope"}):u]})}const K=j.ZP.div.withConfig({displayName:"Status__StyledDiv",componentId:"sc-1rps7z4-0"})([".authoredBlocks{vertical-align:top;font-size:var(--font-percent-tiny);}"]),Y=t.memo(X);function ee({children:e,className:s="",heartbeat:n,isExpanded:t,toggleExpanded:a,toggleFavorite:i,validator:r}){return(0,z.jsxs)("tr",{className:`${s} isExpanded isFirst packedBottom`,children:[(0,z.jsx)(o.iA.Column.Favorite,{address:r.stashId,isFavorite:r.isFavorite,toggle:i}),(0,z.jsx)("td",{className:"statusInfo",rowSpan:2,children:(0,z.jsx)(Y,{heartbeat:n,validator:r})}),(0,z.jsxs)("td",{className:"address relative all",children:[(0,z.jsx)(o.N,{value:r.stashId}),e]}),(0,z.jsx)(o.iA.Column.Expand,{isExpanded:t,toggle:a})]})}const se=t.memo(ee);function ne({className:e=""}){return(0,z.jsx)("td",{className:e})}function te({className:e="",points:s,sessionInfo:n,toggleFavorite:a,validator:i}){var r;const[l,c]=(0,E.O)(),d=(0,t.useRef)({counter:0,points:0}),u=V(i,n),m=W(i,n),h=(0,t.useMemo)((()=>s&&d.current.points!==s?(d.current.points=s,d.current.counter=(d.current.counter+1)%25,`greyAnim-${d.current.counter}`):""),[s,d]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(se,{className:e,heartbeat:m,isExpanded:l,toggleExpanded:c,toggleFavorite:a,validator:i,children:s&&(0,z.jsx)(o.Vp,{className:`${h} absolute`,color:"lightgrey",label:(0,_.u)(s)})}),(0,z.jsx)(Q,{className:e,isExpanded:l,children:(0,z.jsx)(o.iA.Column.Balance,{className:"relative",label:(null==u?void 0:u.waiting)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{children:"("}),(0,z.jsx)(q.Z,{value:u.waiting.total}),(0,z.jsxs)("span",{children:[", ",u.waiting.others.length,")"]})]}),value:null==u||null==(r=u.clipped)?void 0:r.total,withLoading:!0})}),(0,z.jsx)(J,{className:e,isExpanded:l,children:(0,z.jsx)(ne,{validator:i})})]})}const ae=t.memo(te);function oe({className:e="",legend:s,points:n,sessionInfo:a,toggleFavorite:i,validatorsActive:r}){const{t:l}=(0,d.$)(),c=(0,T.q)(),u=(0,t.useRef)([[l("validators"),"start",4]]);return(0,z.jsx)(o.iA,{className:e,empty:c&&r&&l("No session validators found"),emptySpinner:l("Retrieving session validators"),header:u.current,isSplit:!0,legend:s,children:c&&(null==r?void 0:r.map((e=>(0,z.jsx)(ae,{points:null==n?void 0:n[e.stashId],sessionInfo:a,toggleFavorite:i,validator:e},e.key))))})}const ie=t.memo(oe);var re=n(95292);const le={transform:({individual:e})=>[...e.entries()].filter((([,e])=>e.gt(re.nw))).reduce(((e,[s,n])=>(e[s.toString()]=n.toNumber(),e)),{})},ce=(0,g.e)("usePoints",(function({activeEra:e}){const{api:s}=(0,i.h)(),n=(0,t.useMemo)((()=>e&&[e]),[e]);return p("usePoints",(0,x.W7)(n&&s.query.staking.erasRewardPoints,n,le))}));var de=n(26238);const ue=[],me={transform:e=>e.map((({args:[e]})=>e))};function he(e){const s=[],n=[];return e.forEach((({event:{data:[e],method:t}})=>{"Bonded"===t?s.push(e):n.push(e)})),{added:s,removed:n}}const pe=(0,g.e)("useValidatorsAll",(function(e,s){const{api:n}=(0,i.h)(),a=(0,C.k)(n.query.staking.validators,ue,me),o=(0,de.N)([n.events.staking.Bonded],he,a),r=(0,t.useMemo)((()=>function(e){return e&&e.map((e=>{const s=e.toString();return{isElected:!1,isFavorite:!1,isOwned:!1,key:`${s}::-1`,stashId:s,stashIndex:-1}}))}(o)),[o]);return p("useValidatorsAll",A(e,s,r))})),xe=(0,g.e)("useValidatorsWaiting",(function(e,s,n){const a=pe(e,s);return p("useValidatorsWaiting",(0,t.useMemo)((()=>{return a&&n&&(e=n,a.filter((({stashId:s})=>!e.some((e=>e.stashId===s)))));var e}),[n,a]))}));function ge({className:e=""}){return(0,z.jsx)("td",{className:e})}function fe({className:e="",toggleFavorite:s,validator:n}){const[t,a]=(0,E.O)();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(se,{className:e,isExpanded:t,toggleExpanded:a,toggleFavorite:s,validator:n}),(0,z.jsx)(Q,{className:e,isExpanded:t,children:(0,z.jsx)("td",{})}),(0,z.jsx)(J,{className:e,isExpanded:t,children:(0,z.jsx)(ge,{validator:n})})]})}const ve=t.memo(fe);function be({className:e="",favorites:s,legend:n,sessionInfo:a,toggleFavorite:i,validatorsActive:r}){const{t:l}=(0,d.$)(),c=(0,T.q)(),u=xe(s,a,r),m=(0,t.useRef)([[l("waiting"),"start",4]]);return(0,z.jsx)(o.iA,{className:e,empty:c&&u&&l("No waiting validators found"),emptySpinner:l("Retrieving waiting validators"),header:m.current,isSplit:!0,legend:n,children:c&&(null==u?void 0:u.map((e=>(0,z.jsx)(ve,{toggleFavorite:i,validator:e},e.key))))})}const je=t.memo(be);function ye({className:e="",favorites:s,isRelay:n,sessionInfo:a,toggleFavorite:i}){const{t:r}=(0,d.$)(),[l,c]=(0,t.useState)(0),u=D(s,a),m=ce(a),h=(0,t.useRef)([{text:r("Active"),value:"active"},{text:r("Waiting"),value:"waiting"}]),p=(0,z.jsx)(y.Z,{isRelay:n});return(0,z.jsxs)(we,{className:e,children:[(0,z.jsx)(o.zx.Group,{children:(0,z.jsx)(o.tX,{onChange:c,options:h.current,value:l})}),0===l?(0,z.jsx)(ie,{legend:p,points:m,sessionInfo:a,toggleFavorite:i,validatorsActive:u}):(0,z.jsx)(je,{favorites:s,legend:p,sessionInfo:a,toggleFavorite:i,validatorsActive:u})]})}const we=j.ZP.div.withConfig({displayName:"Validators__StyledDiv",componentId:"sc-1juowjp-0"})([".ui--Table table{td.statusInfo{padding:0 0 0 0.5rem;vertical-align:middle;> div{display:inline-block;max-width:3.6rem;min-width:3.6rem;.ui--Badge{margin:0.125rem;&.opaque{opacity:var(--opacity-gray);}}}+ td.address{padding-left:0.5rem;}}}"]),Ne=t.memo(ye);function Ce({basePath:e}){var s;const{t:n}=(0,d.$)(),{api:h}=(0,i.h)(),p=(0,t.useRef)(function(e){return{bags:`${e}/bags`,payout:`${e}/payout`,pools:`${e}/pools`,query:[`${e}/query/:value`,`${e}/query`],slashes:`${e}/slashes`,targets:`${e}/targets`}}(e));(0,t.useEffect)((()=>()=>{!function(){for(const e of Object.keys(u))u[e]={};for(const e of Object.keys(m))m[e]={}}()}),[]);const[x,g]=(0,r.r)("staking:favorites"),f=b(),v=(0,t.useMemo)((()=>{var e;return!(null==(e=h.query.parasShared||h.query.shared)||!e.activeValidatorIndices)}),[h]),j=(0,t.useRef)([{isRoot:!0,name:"sign",text:n("Validators")},(0,l.m)(null==(s=h.query.nominationPools)?void 0:s.minCreateBond)&&{name:"pools",text:n("Pools")}]);return(0,z.jsxs)("main",{className:"staking--App",children:[(0,z.jsx)(o.mQ,{basePath:e,items:j.current}),(0,z.jsxs)(a.rs,{children:[(0,z.jsx)(a.AW,{path:p.current.pools,children:(0,z.jsx)(c.Z,{})}),(0,z.jsx)(a.AW,{path:e,children:(0,z.jsx)(Ne,{favorites:x,isRelay:v,sessionInfo:f,toggleFavorite:g})})]})]})}const ke=t.memo(Ce)},19680:(e,s,n)=>{n.d(s,{$:()=>a});var t=n(61349);function a(){return(0,t.$G)("app-staking")}},10063:(e,s,n)=>{n.d(s,{Z:()=>K});var t=n(2784),a=n(82740),o=n(79136),i=n(61397),r=n(92529),l=n(6847),c=n(44055),d=n(12782),u=n(48358),m=n(84789),h=n(56623),p=n(55858),x=n(52322);const g=[];function f(e,s){if(e){const e=s;return`const ${e.section}.${e.method}`}const n=s;if((0,u.U)(n)){const[,e]=(0,m.o)(n);return 58===e[0]?(0,h.z)(e):(0,p.c)(e)}return`${n.creator.section}.${n.creator.method}`}function v(e,{meta:s}){return(0,c.I)(e.lookup,s.type)}function b(e,{creator:{meta:{modifier:s,type:n}}}){const t=(0,d.PL)(e,n);return s.isOptional?`Option<${t}>`:t}function j(e,s){const{blockHash:n,id:t,isConst:a,key:i,params:r=[]}=s;if(!g[t]){let t,c;if(a){const{method:s,section:n}=i;t=(0,o.withCallDiv)(`consts.${n}.${s}`,{withIndicator:!0}),c=v(e,i)}else{if((0,u.U)(i))t=(0,o.withCallDiv)("rpc.state.subscribeStorage",{paramName:"params",paramValid:!0,params:[[i]],transform:([e])=>e,withIndicator:!0});else{const e=r.map((({value:e})=>e)),{creator:{meta:{type:s}}}=i,a=s.isPlain?0:s.asMap.hashers.length,l=e.length!==a;t=(0,o.withCallDiv)("subscribe",{paramName:"params",paramValid:!0,params:l?[i.entries,...e]:n?[i.at,n,...e]:[i,...e],withIndicator:!0})}c=i.creator&&i.creator.meta?b(e,i):"Raw"}const d={className:"ui--output"},m=t((e=>(0,x.jsx)("pre",{children:(0,l.Z)(c,e)})),d);g[s.id]=function(e,s,n,t){return{Component:s,refresh:()=>t((s=>(0,x.jsx)("pre",{children:(0,l.Z)(e,s)})),n),render:e=>t(e,n)}}(c,m,d,t)}return g[t]}function y({className:e="",onRemove:s,value:n}){const{api:a}=(0,r.h)(),[{Component:o},l,c]=(0,t.useMemo)((()=>[j(a.registry,n),f(n.isConst,n.key),n.isConst?v(a.registry,n.key):(0,u.U)(n.key)?"Raw":b(a.registry,n.key)]),[a,n]),d=(0,t.useCallback)((()=>{delete g[n.id],s(n.id)}),[s,n]);return o?(0,x.jsxs)(w,{className:`${e} storage--Query storage--actionrow`,children:[(0,x.jsx)("div",{className:"storage--actionrow-value",children:(0,x.jsx)(i.jN,{label:(0,x.jsxs)("div",{className:"storage--actionrow-label",children:[l,": ",c]}),children:(0,x.jsx)(o,{})})}),(0,x.jsx)("div",{className:"storage--actionrow-buttons",children:(0,x.jsx)(i.zx,{icon:"times",onClick:d},"close")})]}):null}const w=a.ZP.div.withConfig({displayName:"Query__StyledDiv",componentId:"sc-2xb8i3-0"})(["margin-bottom:0.25em;label{text-transform:none !important;}.ui.disabled.dropdown.selection{color:#aaa;opacity:1;}.ui--IdentityIcon{margin:-10px 0;vertical-align:middle;}pre{margin:0;.ui--Param-text{overflow:hidden;text-overflow:ellipsis;}}.storage--actionrow-buttons{margin-top:-0.25rem;}"]),N=t.memo(y);function C({onRemove:e,value:s}){return s&&s.length?(0,x.jsx)("section",{className:"storage--Queries",children:s.map((s=>(0,x.jsx)(N,{onRemove:e,value:s},s.id)))}):null}const k=t.memo(C);var S=n(7267),I=n(61349);function A(){return(0,I.$G)("app-storage")}function P({onAdd:e}){const{t:s}=A(),{api:n}=(0,r.h)(),[a]=(0,t.useState)((()=>{const e=Object.keys(n.consts)[0],s=Object.keys(n.consts[e])[0];return{meta:n.consts[e][s].meta,method:s,section:e}})),[o,l]=(0,t.useState)(a),c=(0,t.useCallback)((()=>e({isConst:!0,key:o})),[e,o]);return(0,x.jsxs)("section",{className:"storage--actionrow",children:[(0,x.jsx)("div",{className:"storage--actionrow-value",children:(0,x.jsx)(i.eV,{defaultValue:a,label:s("selected constant query"),onChange:l})}),(0,x.jsx)("div",{className:"storage--actionrow-buttons",children:(0,x.jsx)(i.zx,{icon:"plus",onClick:c})})]})}const M=t.memo(P);var D=n(13739),T=n(6046),E=n(23601),q=n(1346),_=n(17751),$=n(74076);function F({creator:{meta:{type:e}}},s){return s.reduce(((e,s)=>e&&!(0,q.o)(s)&&!(0,q.o)(s.value)&&s.isValid),s.length===(e.isPlain?0:e.asMap.hashers.length))}function O(e,s,n){let t=[];if(s.isMap){const{hashers:n,key:a}=s.asMap;t=1===n.length?[(0,c.I)(e.lookup,a)]:e.lookup.getSiType(a).def.asTuple.map((s=>(0,c.I)(e.lookup,s)))}return t.map(((e,s)=>{let a;return n&&s===t.length-1?(a=(0,T.s)(`Option<${e}>`),a.withOptionActive=!0):a=(0,T.s)(e),{name:void 0,type:a}}))}function V(e,s){const n=s.filter((({value:n},t)=>!e||t!==s.length-1||!(0,_.F)(n)));return[n,n.length===s.length]}function R({className:e="",onAdd:s}){const{t:n}=A(),{api:a}=(0,r.h)(),[{defaultValues:o,isIterable:l,key:c,params:d},u]=(0,t.useState)((()=>{var e;return{defaultValues:void 0,isHeadKey:!0,isIterable:!1,key:(null==(e=a.query.timestamp)?void 0:e.now)||a.query.system.events,params:[]}})),[{isValid:h,values:g},f]=(0,t.useState)((()=>({isValid:!0,values:[]}))),[{blockHash:v,textHash:b},j]=(0,t.useState)({blockHash:null,textHash:""}),y=(0,t.useMemo)((()=>{var e,s;return(null==(e=a.query.timestamp)?void 0:e.now)||(null==(s=a.query.system)?void 0:s.events)||a.query.substrate.changesTrieConfig}),[a]),[w,N,C]=(0,t.useMemo)((()=>{if(h)try{const[e]=V(l,g),s=e.map((({value:e})=>e)),n=s.length!==(c.creator.meta.type.isPlain?0:c.creator.meta.type.asMap.hashers.length);return[n,n&&c.creator.iterKey?c.creator.iterKey(...s).toHex():(0,p.c)((0,m.o)(c.creator(...s))[1]),n?null:c.creator.inspect(...s)]}catch{}return[!1,"0x",null]}),[l,h,c,g]),k=(0,t.useCallback)((()=>{const[e,n]=V(l,g);h&&s({blockHash:n?v:null,isConst:!1,key:c,params:e})}),[v,l,h,c,s,g]),S=(0,t.useCallback)((e=>j({blockHash:(0,$.vq)(e,256)?e:null,textHash:e})),[]),I=(0,t.useCallback)((e=>f({isValid:F(c,e),values:e})),[c]),P=(0,t.useCallback)((e=>{u(function(e,s){const{creator:{meta:{type:n},section:t}}=s,a=function(e,s){if(s.isPlain)return!0;const{hashers:n,key:t}=s.asMap;if(1===n.length)return e.lookup.getTypeDef(t).info!==E.u.Option;const a=e.lookup.getSiType(t).def.asTuple;return e.lookup.getTypeDef(a[a.length-1]).info!==E.u.Option}(e.registry,n);return{defaultValues:"session"===t&&n.isMap&&e.consts.session&&e.consts.session.dedupKeyPrefix?[{isValid:!0,value:e.consts.session.dedupKeyPrefix.toHex()}]:null,isIterable:a,key:s,params:O(e.registry,n,a)}}(a,e)),I([])}),[I,a]),M=(0,t.useMemo)((()=>!!h&&V(l,g)[1]),[l,h,g]),{creator:{method:T,section:q}}=c;return(0,x.jsxs)(Z,{className:`${e} storage--actionrow`,children:[(0,x.jsxs)("div",{className:"storage--actionrow-value",children:[(0,x.jsx)(i.nU,{defaultValue:y,label:n("selected state query"),onChange:P}),(0,x.jsx)(D.Z,{onChange:I,onEnter:k,params:d,values:o},`${q}.${T}:params`),(0,x.jsx)(i.II,{isDisabled:!h||!M,isError:!!b&&!v,label:n("blockhash to query at"),onChange:S,placeholder:n("0x...")}),(0,x.jsxs)(i.P0,{className:"keyColumar",isPadded:!1,children:[(0,x.jsx)(i.P0.Column,{children:(0,x.jsx)(i.r_,{isDisabled:!0,label:n(w?"encoded partial key":"encoded storage key"),value:N,withCopy:!0})}),(0,x.jsx)(i.P0.Column,{children:(0,x.jsx)(i.R2,{inspect:C,label:n("encoded key details")})})]})]}),(0,x.jsx)("div",{className:"storage--actionrow-buttons",children:(0,x.jsx)(i.zx,{icon:"plus",isDisabled:!h,onClick:k})})]})}const Z=a.ZP.section.withConfig({displayName:"Modules__StyledSection",componentId:"sc-16duw9x-0"})([".ui--Column:last-child .ui--Labelled{padding-left:0.5rem;label{left:2.05rem;}}"]),B=t.memo(R);var L=n(46610),H=n(88311);function W({onAdd:e}){const{t:s}=A(),[{isValid:n,key:a},o]=(0,t.useState)((()=>({isValid:!1,key:new Uint8Array([])}))),r=(0,t.useCallback)((()=>{n&&e({isConst:!1,key:a})}),[n,a,e]),l=(0,t.useCallback)((e=>{const s=(0,L.Y)(e);o({isValid:0!==s.length,key:(0,H.N)(s)})}),[]);return(0,x.jsxs)("section",{className:"storage--actionrow",children:[(0,x.jsx)("div",{className:"storage--actionrow-value",children:(0,x.jsx)(i.II,{autoFocus:!0,label:s("hex-encoded storage key"),onChange:l,onEnter:r})}),(0,x.jsx)("div",{className:"storage--actionrow-buttons",children:(0,x.jsx)(i.zx,{icon:"plus",isDisabled:!n,onClick:r})})]})}const z=t.memo(W);let U=-1;function J({basePath:e,onAdd:s}){const{t:n}=A(),a=(0,t.useRef)([{isRoot:!0,name:"modules",text:n("Storage")},{name:"constants",text:n("Constants")},{name:"raw",text:n("Raw storage")}]),o=(0,t.useCallback)((e=>s({...e,id:++U})),[s]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(i.mQ,{basePath:e,items:a.current}),(0,x.jsxs)(S.rs,{children:[(0,x.jsx)(S.AW,{path:`${e}/constants`,children:(0,x.jsx)(M,{onAdd:o})}),(0,x.jsx)(S.AW,{path:`${e}/raw`,children:(0,x.jsx)(z,{onAdd:o})}),(0,x.jsx)(S.AW,{children:(0,x.jsx)(B,{onAdd:o})})]})]})}const G=t.memo(J);function Q({basePath:e,className:s=""}){const[n,a]=(0,t.useState)([]),o=(0,t.useCallback)((e=>a((s=>[e,...s]))),[]),i=(0,t.useCallback)((e=>a((s=>s.filter((s=>s.id!==e))))),[]);return(0,x.jsxs)(X,{className:`${s} storage--App`,children:[(0,x.jsx)(G,{basePath:e,onAdd:o}),(0,x.jsx)(k,{onRemove:i,value:n})]})}const X=a.ZP.main.withConfig({displayName:"src__StyledMain",componentId:"sc-193l1ax-0"})([".storage--actionrow{align-items:flex-start;display:flex;.ui--Button{margin:0.25rem;}&.head{flex:1 1 100%;margin:0 auto;max-width:620px;}}.storage--actionrow-value{flex:1;min-width:0;.ui--output{word-break:break-all;}}.storage--actionrow-buttons{flex:0;padding:0.5rem 0.25rem;}"]),K=t.memo(Q)},96067:(e,s,n)=>{n.d(s,{Z:()=>w});var t=n(2784),a=n(7267),o=n(61397),i=n(67993),r=n(82740),l=n(92529),c=n(61349);function d(){return(0,c.$G)("app-sudo")}var u=n(52322);function m({allAccounts:e,className:s="",isMine:n,sudoKey:a}){const{t:i}=d(),{api:r}=(0,l.h)(),[c,m]=(0,t.useState)(null);(0,t.useEffect)((()=>{a&&!c&&m(a)}),[c,a]);const p=n&&!!c&&c!==a&&e.some((e=>e===c));return(0,u.jsxs)("section",{children:[(0,u.jsx)(h,{className:`${s} ui--row`,children:n?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.rp,{className:"sudoInputAddress",isInput:!0,label:i("sudo key"),onChange:m,type:"all",value:c}),(0,u.jsx)(o.cA,{accountId:a,icon:"sign-in-alt",isDisabled:!n||a===c,label:i("Reassign"),params:[c],tx:r.tx.sudo.setKey})]}):(0,u.jsx)(o.jN,{className:"ui--Dropdown sudoLabelled",label:i("sudo key"),withLabel:!0,children:(0,u.jsx)(o.ax,{value:a})})}),p&&(0,u.jsx)("article",{className:"warning padded",children:(0,u.jsx)("div",{children:i("You will no longer have sudo access")})})]})}const h=r.ZP.section.withConfig({displayName:"SetKey__StyledSection",componentId:"sc-1bfrtlo-0"})(["align-items:flex-end;justify-content:center;.summary{text-align:center;}.sudoInputAddress{margin:-0.25rem 0.5rem -0.25rem 0;}.sudoLabelled{align-items:center;}"]),p=t.memo(m);var x=n(7840),g=n(95292),f=n(33661);function v({className:e,isMine:s,sudoKey:n}){const{t:a}=d(),{api:i,apiDefaultTxSudo:r}=(0,l.h)(),[c,m]=(0,x.O)(),[h,p]=(0,t.useState)(null),[v,j]=(0,t.useState)(g.nw),y=(0,t.useCallback)(((e=null)=>p((()=>e))),[]),w=(0,t.useCallback)(((e=g.nw)=>j(e)),[]);return s?(0,u.jsxs)(b,{className:e,children:[(0,u.jsx)(o.n6,{defaultValue:r,label:a("submit the following change"),onChange:y}),(0,f.m)(i.tx.sudo.sudoUncheckedWeight)&&(0,u.jsx)(o.Rn,{isDisabled:!c,isError:v.eq(g.nw),isZeroable:!1,label:a("unchecked weight for this call"),labelExtra:(0,u.jsx)(o.ZD,{className:"sudoToggle",label:a("with weight override"),onChange:m,value:c}),onChange:w,value:v}),(0,u.jsx)(o.zx.Group,{children:(0,u.jsx)(o.cA,{accountId:n,icon:"sign-in-alt",isDisabled:!h||!!c&&v.eq(g.nw),label:a(c?"Submit Sudo Unchecked":"Submit Sudo"),params:c?[h,v]:[h],tx:c?i.tx.sudo.sudoUncheckedWeight:i.tx.sudo.sudo})})]}):(0,u.jsx)("article",{className:"error padded",children:(0,u.jsxs)("div",{children:[(0,u.jsx)(o.JO,{icon:"ban"}),a("You do not have access to the current sudo key")]})})}const b=r.ZP.section.withConfig({displayName:"Sudo__StyledSection",componentId:"sc-25gudi-0"})([".sudoToggle{width:100%;text-align:right;}"]),j=t.memo(v);function y({basePath:e}){const{t:s}=d(),{allAccounts:n,hasSudoKey:r,sudoKey:l}=(0,i.p)(),c=(0,t.useRef)([{isRoot:!0,name:"index",text:s("Sudo access")},{name:"key",text:s("Set sudo key")}]);return(0,u.jsxs)("main",{children:[(0,u.jsx)(o.mQ,{basePath:e,items:c.current}),r?(0,u.jsxs)(a.rs,{children:[(0,u.jsx)(a.AW,{path:`${e}/key`,children:(0,u.jsx)(p,{allAccounts:n,isMine:r,sudoKey:l})}),(0,u.jsx)(a.AW,{children:(0,u.jsx)(j,{isMine:r,sudoKey:l})})]}):(0,u.jsx)("article",{className:"error padded",children:(0,u.jsxs)("div",{children:[(0,u.jsx)(o.JO,{icon:"ban"}),s("You do not have access to the current sudo key")]})})]})}const w=t.memo(y)},29909:(e,s,n)=>{n.d(s,{Z:()=>w});var t=n(2784),a=n(7267),o=n(61397),i=n(92529),r=n(92067),l=n(36856),c=n(44079),d=n(52322);function u({className:e="",members:s,prime:n}){const{t:a}=(0,c.$)(),i=(0,t.useRef)([[a("members"),"start",3]]);return(0,d.jsx)(o.iA,{className:e,empty:s&&a("No members found"),header:i.current,isSplit:!0,children:null==s?void 0:s.map((e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"address",children:(0,d.jsx)(o.N,{value:e})}),(0,d.jsx)("td",{children:n===e&&(0,d.jsx)(o.Vp,{color:"green",hover:a("Committee prime member, default voting"),label:a("prime member")})}),(0,d.jsx)("td",{className:"all",children:" "})]},e)))})}const m=t.memo(u);var h=n(14681);function p({className:e="",members:s,proposalHashes:n,type:t}){const{t:a}=(0,c.$)(),{api:r}=(0,i.h)(),u=(0,l.W7)(r.derive[t].proposalCount);return(0,d.jsxs)(o.Ty,{className:e,children:[(0,d.jsx)(o.Jy,{label:a("members"),children:(0,h.u)(s.length)}),(0,d.jsxs)("section",{children:[(0,d.jsx)(o.Jy,{label:a("proposals"),children:n?(0,h.u)(null==n?void 0:n.length):(0,d.jsx)("span",{className:"--tmp",children:"99"})}),(0,d.jsx)(o.Jy,{label:a("total"),children:u?(0,h.u)(u):(0,d.jsx)("span",{className:"--tmp",children:"99"})})]})]})}const x=t.memo(p);function g({className:e="",isMember:s,members:n,prime:t,proposalHashes:a,type:o}){return(0,d.jsxs)("div",{className:e,children:[(0,d.jsx)(x,{isMember:s,members:n,proposalHashes:a,type:o}),(0,d.jsx)(m,{members:n,prime:t})]})}const f=t.memo(g);var v=n(38296);const b=[],j=["proposals"];function y({basePath:e,className:s,type:n}){const{t:u}=(0,c.$)(),{api:m}=(0,i.h)(),{isMember:h,members:p,prime:x}=(0,r.V)(n),g=(0,l.W7)(m.derive[n].hasProposals),y=(0,l.W7)(m.derive[n].proposalHashes),w=(0,t.useMemo)((()=>[{isRoot:!0,name:"overview",text:u("Overview")},{name:"proposals",text:u("Proposals ({{count}})",{replace:{count:y&&y.length||0}})}]),[y,u]);return(0,d.jsxs)("main",{className:s,children:[(0,d.jsx)(o.mQ,{basePath:e,hidden:g?b:j,items:w}),(0,d.jsxs)(a.rs,{children:[(0,d.jsx)(a.AW,{path:`${e}/proposals`,children:(0,d.jsx)(v.Z,{isMember:h,members:p,prime:x,proposalHashes:y,type:n})}),(0,d.jsx)(a.AW,{path:e,children:(0,d.jsx)(f,{isMember:h,members:p,prime:x,proposalHashes:y,type:n})})]})]})}const w=t.memo(y)},38296:(e,s,n)=>{n.d(s,{Z:()=>P});var t=n(2784),a=n(61397),o=n(44079),i=n(31992),r=n(92529),l=n(36856),c=n(94042),d=n(78896),u=n(67738),m=n(14681),h=n(7840),p=n(25943),x=n(52322);function g({hasFailed:e,hash:s,idNumber:n,proposal:i,type:l}){const{t:c}=(0,o.$)(),{api:u}=(0,r.h)(),[m,g]=(0,h.O)(),[f,v]=(0,t.useState)(null),{encodedCallLength:b,weight:j}=(0,p.h7)(i),y=(0,d.m)(l);return y?(0,x.jsxs)(x.Fragment,{children:[m&&(0,x.jsxs)(a.u_,{header:c("Close proposal"),onClose:g,size:"large",children:[(0,x.jsxs)(a.u_.Content,{children:[(0,x.jsx)(a.u_.Columns,{hint:c("The proposal that will be affected. Once closed for the current voting round, it would need to be re-submitted for a subsequent voting round."),children:(0,x.jsx)(a.lV,{idNumber:n,proposal:i})}),(0,x.jsx)(a.u_.Columns,{hint:c("The committee account that will apply the close for the current round."),children:(0,x.jsx)(a.rp,{label:c("close from account"),onChange:v,type:"account"})})]}),(0,x.jsx)(a.u_.Actions,{children:(0,x.jsx)(a.cA,{accountId:f,isDisabled:!e&&!b,onStart:g,params:4===u.tx[y].close.meta.args.length?e?[s,n,0,0]:[s,n,j,b]:[s,n],tx:u.tx[y].closeOperational||u.tx[y].close})})]}),(0,x.jsx)(a.zx,{icon:"times",label:c("Close"),onClick:g})]}):null}const f=t.memo(g);var v=n(13328);function b({hash:e,isMember:s,members:n,prime:i,proposalId:l,type:c}){const{t:u}=(0,o.$)(),{api:m}=(0,r.h)(),{hasAccounts:p}=(0,v.x)(),[g,f]=(0,t.useState)(null),[b,j]=(0,h.O)(),y=(0,d.m)(c);return y&&p?(0,x.jsxs)(x.Fragment,{children:[b&&(0,x.jsxs)(a.u_,{header:u("Vote on proposal"),onClose:j,size:"small",children:[(0,x.jsxs)(a.u_.Content,{children:[(0,x.jsx)(a.UE,{filter:n,onChange:f}),g===i&&(0,x.jsx)(a.Pd,{content:u("You are voting with this collective's prime account. The vote will be the default outcome in case of any abstentions.")})]}),(0,x.jsxs)(a.u_.Actions,{children:[(0,x.jsx)(a.cA,{accountId:g,icon:"ban",label:u("Vote Nay"),onStart:j,params:[e,l,!1],tx:m.tx[y].vote}),(0,x.jsx)(a.cA,{accountId:g,icon:"check",label:u("Vote Aye"),onStart:j,params:[e,l,!0],tx:m.tx[y].vote})]})]}),(0,x.jsx)(a.zx,{icon:"check",isDisabled:!s,label:u("Vote"),onClick:j})]}):null}const j=t.memo(b);function y({className:e="",imageHash:s,isMember:n,members:t,prime:o,type:h}){const{api:p}=(0,r.h)(),g=(0,l.W7)(p.derive[h].proposal,[s]),{hasFailed:v,isCloseable:b,isVoteable:y,remainingBlocks:w}=(0,c.I)(null==g?void 0:g.votes,t.length,h);if(!(0,d.m)(h)||!g||!g.votes)return null;const{ayes:N,end:C,index:k,nays:S,threshold:I}=g.votes;return(0,x.jsxs)("tr",{className:e,children:[(0,x.jsx)(a.iA.Column.Id,{value:k}),(0,x.jsx)(i.Z,{imageHash:s,isCollective:!0,proposal:g.proposal}),(0,x.jsxs)("td",{className:"number",children:[(0,m.u)(N.length),"/",(0,m.u)(I)]}),(0,x.jsx)("td",{className:"number together",children:w&&C&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(u.Z,{value:w}),"#",(0,m.u)(C)]})}),(0,x.jsx)("td",{className:"address",children:N.map(((e,s)=>(0,x.jsx)(a.ax,{value:e,withBalance:!1},`${s}:${e.toHex()}`)))}),(0,x.jsx)("td",{className:"address",children:S.map(((e,s)=>(0,x.jsx)(a.ax,{value:e,withBalance:!1},`${s}:${e.toHex()}`)))}),(0,x.jsxs)("td",{className:"button",children:[y&&!b&&(0,x.jsx)(j,{hash:s,isMember:n,members:t,prime:o,proposalId:k,type:h}),b&&(0,x.jsx)(f,{hasFailed:v,hash:s,idNumber:k,proposal:g.proposal,type:h})]})]})}const w=t.memo(y);var N=n(33024),C=n(48801),k=n.n(C);function S({defaultThreshold:e=.5,defaultValue:s,filter:n,isMember:i,members:l,type:c}){const{t:u}=(0,o.$)(),{api:m,apiDefaultTxSudo:h}=(0,r.h)(),{isOpen:p,onClose:g,onOpen:f}=(0,N.d)(),[v,b]=(0,t.useState)(null),[{proposal:j,proposalLength:y},w]=(0,t.useState)({proposalLength:0}),[[C,S],I]=(0,t.useState)([new(k())(Math.min(l.length,l.length*e+1)),!0]),A=(0,d.m)(c),P=(0,t.useCallback)((e=>!!e&&!e.isZero()&&e.lten(l.length)),[l]),M=(0,t.useCallback)((e=>w({proposal:e,proposalLength:(null==e?void 0:e.length)||0})),[]),D=(0,t.useCallback)((e=>I([e||null,P(e)])),[P]);return A?(0,x.jsxs)(x.Fragment,{children:[p&&(0,x.jsxs)(a.u_,{header:u("Propose a committee motion"),onClose:g,children:[(0,x.jsxs)(a.u_.Content,{children:[(0,x.jsx)(a.rp,{filter:l,label:u("propose from account"),onChange:b,type:"account",withLabel:!0}),(0,x.jsx)(a.Rn,{className:"medium",isError:!S,label:u("threshold"),onChange:D,placeholder:u("Positive number between 1 and {{count}}",{replace:{count:l.length}}),value:C||void 0}),(0,x.jsx)(a.n6,{defaultValue:s||h,filter:n,label:u("proposal"),onChange:M})]}),(0,x.jsx)(a.u_.Actions,{children:(0,x.jsx)(a.cA,{accountId:v,isDisabled:!S||!j,onStart:g,params:3===m.tx[A].propose.meta.args.length?[C,j,y]:[C,j],tx:m.tx[A].propose})})]}),(0,x.jsx)(a.zx,{icon:"plus",isDisabled:!i,label:u("Submit proposal"),onClick:f})]}):null}const I=t.memo(S);function A({className:e="",defaultProposal:s,defaultThreshold:n,filter:i,isMember:r,members:l,prime:c,proposalHashes:d,type:u}){const{t:m}=(0,o.$)(),h=(0,t.useRef)([[m("proposals"),"start",2],[m("threshold")],[m("voting end")],[m("aye"),"address"],[m("nay"),"address"],[]]);return(0,x.jsxs)("div",{className:e,children:[(0,x.jsx)(a.zx.Group,{children:(0,x.jsx)(I,{defaultThreshold:n,defaultValue:s,filter:i,isMember:r,members:l,type:u})}),(0,x.jsx)(a.iA,{empty:d&&m("No committee proposals"),header:h.current,children:null==d?void 0:d.map((e=>(0,x.jsx)(w,{imageHash:e,isMember:r,members:l,prime:c,type:u},e.toHex())))})]})}const P=t.memo(A)},1052:(e,s,n)=>{n.d(s,{Z:()=>r});var t=n(2784),a=n(29909),o=n(52322);function i({basePath:e,className:s}){return(0,o.jsx)(a.Z,{basePath:e,className:s,type:"technicalCommittee"})}const r=t.memo(i)},44079:(e,s,n)=>{n.d(s,{$:()=>a});var t=n(61349);function a(){return(0,t.$G)("app-tech-comm")}},79006:(e,s,n)=>{n.d(s,{Z:()=>r});var t=n(92529),a=n(36856),o=n(89448);const i={transform:e=>e.length},r=(0,o.e)("useCounter",(function(){var e;const{api:s,isApiReady:n}=(0,t.h)();return(0,a.W7)(n&&(null==(e=s.derive.technicalCommittee)?void 0:e.proposals),void 0,i)||0}))},15814:(e,s,n)=>{n.d(s,{Z:()=>re});var t=n(2784),a=n(7267),o=n(61397),i=n(92529),r=n(92067),l=n(33661),c=n(36856),d=n(7840),u=n(95292),m=n(57994),h=n(52322);function p({className:e}){const{t:s}=(0,m.$)(),{api:n}=(0,i.h)(),[a,r]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),[p,x]=(0,d.O)(),[g,f]=(0,t.useState)(),v=null==g?void 0:g.gtn(0),[b,j,y]=(0,t.useMemo)((()=>{var e;return[n.consts.treasury.proposalBondMinimum.toString(),null!=(e=n.consts.treasury.proposalBondMaximum)&&e.isSome?n.consts.treasury.proposalBondMaximum.unwrap().toString():null,`${n.consts.treasury.proposalBond.mul(u.S8).div(u.uy).toNumber().toFixed(2)}%`]}),[n]);return(0,h.jsxs)(h.Fragment,{children:[p&&(0,h.jsxs)(o.u_,{className:e,header:s("Submit treasury proposal"),onClose:x,size:"large",children:[(0,h.jsxs)(o.u_.Content,{children:[(0,h.jsx)(o.u_.Columns,{hint:s("This account will make the proposal and be responsible for the bond."),children:(0,h.jsx)(o.rp,{label:s("submit with account"),onChange:r,type:"account",withLabel:!0})}),(0,h.jsx)(o.u_.Columns,{hint:s("The beneficiary will receive the full amount if the proposal passes."),children:(0,h.jsx)(o.rp,{label:s("beneficiary"),onChange:c,type:"allPlus"})}),(0,h.jsxs)(o.u_.Columns,{hint:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{children:s("The value is the amount that is being asked for and that will be allocated to the beneficiary if the proposal is approved.")}),j?(0,h.jsx)("p",{children:s("Of the beneficiary amount, no less than the minimum bond amount and no more than maximum on-chain bond would need to be put up as collateral. This is calculated from {{bondPercentage}} of the requested amount.",{replace:{bondPercentage:y}})}):(0,h.jsx)("p",{children:s("Of the beneficiary amount, no less than the minimum bond amount would need to be put up as collateral. This is calculated from {{bondPercentage}} of the requested amount.",{replace:{bondPercentage:y}})})]}),children:[(0,h.jsx)(o.H,{isError:!v,label:s("value"),onChange:f}),(0,h.jsx)(o.qG,{label:s("proposal bond"),children:y}),(0,h.jsx)(o.H,{defaultValue:b,isDisabled:!0,label:s("minimum bond")}),j&&(0,h.jsx)(o.H,{defaultValue:j,isDisabled:!0,label:s("maximum bond")}),(0,h.jsx)(o.Pd,{content:s("Be aware that once submitted the proposal will be put to a vote. If the proposal is rejected due to a lack of info, invalid requirements or non-benefit to the network as a whole, the full bond posted (as describe above) will be lost.")})]})]}),(0,h.jsx)(o.u_.Actions,{children:(0,h.jsx)(o.cA,{accountId:a,icon:"plus",isDisabled:!a||!v,label:s("Submit proposal"),onStart:x,params:[g,l],tx:n.tx.treasury.proposeSpend})})]}),(0,h.jsx)(o.zx,{icon:"plus",label:s("Submit proposal"),onClick:x})]})}const x=t.memo(p);var g=n(80274),f=n(78896);function v({id:e,isDisabled:s,members:n}){const{t:a}=(0,m.$)(),{api:r}=(0,i.h)(),[l,c]=(0,d.O)(),[u,p]=(0,t.useState)(null),[x,v]=(0,t.useState)("accept"),[{proposal:b,proposalLength:j},y]=(0,t.useState)((()=>({proposalLength:0}))),w=(0,f.m)("council"),N=Math.ceil(((null==n?void 0:n.length)||0)*(0,g.mo)(r)),C=(0,t.useRef)([{text:a("Acceptance proposal to council"),value:"accept"},{text:a("Rejection proposal to council"),value:"reject"}]);return(0,t.useEffect)((()=>{const s="reject"===x?r.tx.treasury.rejectProposal(e):r.tx.treasury.approveProposal(e);y({proposal:s,proposalLength:s.length})}),[r,e,x]),w?(0,h.jsxs)(h.Fragment,{children:[l&&(0,h.jsxs)(o.u_,{header:a("Send to council"),onClose:c,size:"large",children:[(0,h.jsxs)(o.u_.Content,{children:[(0,h.jsx)(o.u_.Columns,{hint:a('The council member that is proposing this, submission equates to an "aye" vote.'),children:(0,h.jsx)(o.rp,{filter:n,label:a("submit with council account"),onChange:p,type:"account",withLabel:!0})}),(0,h.jsx)(o.u_.Columns,{hint:a("Proposal can either be to approve or reject this spend. Once approved, the change is applied by either removing the proposal or scheduling payout."),children:(0,h.jsx)(o.Lt,{label:a("council proposal type"),onChange:v,options:C.current,value:x})})]}),(0,h.jsx)(o.u_.Actions,{children:(0,h.jsx)(o.cA,{accountId:u,icon:"check",isDisabled:!u||!N,label:a("Send to council"),onStart:c,params:3===r.tx[w].propose.meta.args.length?[N,b,j]:[N,b],tx:r.tx[w].propose})})]}),(0,h.jsx)(o.zx,{icon:"step-forward",isDisabled:s,label:a("To council"),onClick:c})]}):null}const b=t.memo(v);function j({className:e="",isMember:s,members:n,proposal:{council:a,id:r,proposal:c},withSend:u}){var p;const{t:x}=(0,m.$)(),{api:g}=(0,i.h)(),[f,v]=(0,d.O)(!1),j=(0,l.m)(null==(p=g.tx.council)?void 0:p.propose),y=(0,t.useMemo)((()=>!!a.map((({votes:e})=>e?e.index.toNumber():-1)).filter((e=>-1!==e)).length),[a]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("tr",{className:`${e} isExpanded isFirst ${f?"":"isLast"}`,children:[(0,h.jsx)(o.iA.Column.Id,{value:r}),(0,h.jsx)("td",{className:"address all",children:(0,h.jsx)(o.N,{value:c.beneficiary})}),(0,h.jsx)(o.iA.Column.Balance,{value:c.value}),(0,h.jsx)("td",{className:"address",children:(0,h.jsx)(o.ax,{balance:c.bond,value:c.proposer,withBalance:!0})}),(0,h.jsx)("td",{className:y?"middle":"button",children:j?y?(0,h.jsx)("a",{href:"#/council/motions",children:x("Voting")}):u&&(0,h.jsx)(b,{id:r,isDisabled:!s,members:n}):null}),(0,h.jsx)(o.iA.Column.Expand,{isExpanded:f,toggle:v})]}),(0,h.jsxs)("tr",{className:`${e} ${f?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,h.jsx)("td",{}),(0,h.jsx)("td",{className:"columar",colSpan:4,children:(0,h.jsx)(o.P0,{is100:!0,children:(0,h.jsx)(o.P0.Column,{children:(0,h.jsx)(o.NR,{data:r,type:"treasury",withTitle:!0})})})}),(0,h.jsx)("td",{})]})]})}const y=t.memo(j);function w({className:e="",isApprovals:s,isMember:n,members:a,proposals:i}){const{t:r}=(0,m.$)(),l=(0,t.useMemo)((()=>[[r(s?"Approved":"Proposals"),"start",2],[],[r("proposer"),"address"],[],[]]),[s,r]);return(0,h.jsx)(o.iA,{className:e,empty:i&&r(s?"No approved proposals":"No pending proposals"),header:l,children:null==i?void 0:i.map((e=>(0,h.jsx)(y,{isMember:n,members:a,proposal:e,withSend:!s},e.id.toString())))})}const N=t.memo(w);var C=n(65182),k=n(5500),S=n(76277),I=n(14681);function A({approvalCount:e,proposalCount:s}){const{t:n}=(0,m.$)(),{api:a}=(0,i.h)(),r=(0,C.C)(),l=(0,c.W7)(a.query.treasury.proposalCount),{burn:d,pendingBounties:p,pendingProposals:x,spendPeriod:g,value:f}=(0,k._)(),v=(0,t.useMemo)((()=>f&&f.sub(p).sub(x)),[f,p,x]),b=!(!f||!v);return(0,h.jsxs)(o.Ty,{children:[(0,h.jsxs)("section",{children:[(0,h.jsx)(o.Jy,{className:"media--1700",label:n("open"),children:void 0===s?(0,h.jsx)("span",{className:"--tmp",children:"99"}):(0,I.u)(s)}),(0,h.jsx)(o.Jy,{className:"media--1600",label:n("approved"),children:void 0===e?(0,h.jsx)("span",{className:"--tmp",children:"99"}):(0,I.u)(e)}),(0,h.jsx)(o.Jy,{className:"media--1400",label:n("total"),children:void 0===l?(0,h.jsx)("span",{className:"--tmp",children:"99"}):(0,I.u)(l)})]}),(0,h.jsxs)("section",{children:[!x.isZero()&&(0,h.jsx)(o.Jy,{className:"media--1100",label:n("approved"),children:(0,h.jsx)(S.Z,{value:x,withSi:!0})}),!p.isZero()&&(0,h.jsx)(o.Jy,{className:"media--1200",label:n("bounties"),children:(0,h.jsx)(S.Z,{value:p,withSi:!0})}),(0,h.jsx)(o.Jy,{className:"media--1300",label:n("next burn"),children:(0,h.jsx)(S.Z,{className:d?"":"--tmp",value:d||1,withSi:!0})})]}),(0,h.jsx)("section",{children:(0,h.jsx)(o.Jy,{label:n("spendable / available"),progress:{hideValue:!0,isBlurred:!b,total:b?f:u.Jo,value:b?v:u.um},children:(0,h.jsxs)("span",{className:b?"":"--tmp",children:[(0,h.jsx)(S.Z,{value:v||u.um,withSi:!0}),(0,h.jsx)(h.Fragment,{children:" / "}),(0,h.jsx)(S.Z,{value:f||u.Jo,withSi:!0})]})})}),r&&g.gt(u.nw)&&(0,h.jsx)("section",{children:(0,h.jsx)(o.Jy,{label:n("spend period"),progress:{total:g,value:r.mod(g),withTime:!0}})})]})}const P=t.memo(A);function M({className:e,isMember:s,members:n}){const{api:t}=(0,i.h)(),a=(0,c.W7)(t.derive.treasury.proposals);return(0,h.jsxs)("div",{className:e,children:[(0,h.jsx)(P,{approvalCount:null==a?void 0:a.approvals.length,proposalCount:null==a?void 0:a.proposals.length}),(0,h.jsx)(o.zx.Group,{children:(0,h.jsx)(x,{})}),(0,h.jsx)(N,{isMember:s,members:n,proposals:null==a?void 0:a.proposals}),(0,h.jsx)(N,{isApprovals:!0,isMember:s,members:n,proposals:null==a?void 0:a.approvals})]})}const D=t.memo(M);var T=n(13328),E=n(95155);function q({members:e}){const{t:s}=(0,m.$)(),{api:n}=(0,i.h)(),[a,r]=(0,d.O)(),[l,c]=(0,t.useState)(null),[p,x]=(0,t.useState)(null),[g,f]=(0,t.useState)(""),[v,b]=(0,t.useState)(),j=(0,t.useMemo)((()=>{var e,s;return Math.min(256,(null==(e=n.consts.tips||n.consts.treasury)||null==(s=e.maximumReasonLength)?void 0:s.toNumber())||256)}),[n]),y=(0,t.useMemo)((()=>!!l&&e.includes(l)),[l,e]),w=!!v&&v.gt(u.nw),N=!!g&&g.length>=5&&g.length<=j;return n.tx.tips.tipNew||n.tx.treasury.tipNew?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.zx,{icon:"plus",label:s("Propose tip"),onClick:r}),a&&(0,h.jsxs)(o.u_,{header:s("Submit tip request"),onClose:r,size:"large",children:[(0,h.jsxs)(o.u_.Content,{children:[(0,h.jsx)(o.u_.Columns,{hint:s("Use this account to request the tip from. This can be a normal or council account."),children:(0,h.jsx)(o.rp,{label:s("submit with account"),onChange:c,type:"account",withLabel:!0})}),(0,h.jsx)(o.u_.Columns,{hint:s("The beneficiary will received the tip as approved by council members."),children:(0,h.jsx)(o.rp,{label:s("beneficiary"),onChange:x,type:"allPlus"})}),(0,h.jsx)(o.u_.Columns,{hint:s("A reason (to be stored-on-chain) as to why the recipient deserves a tip payout."),children:(0,h.jsx)(o.II,{autoFocus:!0,isError:!N,label:s("tip reason"),onChange:f})}),y&&(0,h.jsx)(o.u_.Columns,{hint:s("As a council member, you can suggest an initial value for the tip, each other council member can suggest their own."),children:(0,h.jsx)(o.H,{isError:!w,label:s("tip value"),onChange:b})})]}),(0,h.jsx)(o.u_.Actions,{children:(0,h.jsx)(o.cA,{accountId:l,icon:"plus",isDisabled:!l||y&&!w||!N,label:s("Propose tip"),onStart:r,params:y?[g,p,v]:[g,p],tx:y?(n.tx.tips||n.tx.treasury).tipNew:(n.tx.tips||n.tx.treasury).reportAwesome})})]})]}):null}const _=t.memo(q);var $=n(82740),F=n(67738);const O={transform:({freeBalance:e,reservedBalance:s})=>e.add(s)};function V({defaultId:e,hash:s,isMember:n,isTipped:a,median:r,members:l,recipient:u}){var p;const{t:x}=(0,m.$)(),{api:g}=(0,i.h)(),[f,v]=(0,d.O)(),[b,j]=(0,t.useState)(e),[y,w]=(0,t.useState)(),N=(0,c.W7)(null==(p=g.derive.balances)?void 0:p.all,[u],O),C=(g.tx.tips||g.tx.treasury).tip;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.zx,{icon:"check",isDisabled:!n,label:x("Tip"),onClick:v}),(0,h.jsx)(o.cA,{accountId:e,className:"media--1600",icon:"fighter-jet",isDisabled:!n||!a,isIcon:!0,params:[s,r],tx:C,withoutLink:!0}),f&&(0,h.jsxs)(o.u_,{header:x("Submit tip endorsement"),onClose:v,size:"large",children:[(0,h.jsxs)(o.u_.Content,{children:[(0,h.jsx)(o.u_.Columns,{hint:x("Your endorsement will be applied for this account."),children:(0,h.jsx)(o.rp,{filter:l,label:x("submit with account"),onChange:j,type:"account",withLabel:!0})}),(0,h.jsxs)(o.u_.Columns,{hint:x("Allocate a suggested tip amount. With enough endorsements, the suggested values are averaged and sent to the beneficiary."),children:[(0,h.jsx)(o.H,{autoFocus:!0,defaultValue:r,isZeroable:!0,label:x("value"),onChange:w}),N&&N.isZero()&&(0,h.jsx)(o.Pd,{content:x("The recipient account has no balance, ensure the tip is more than the existential deposit to create the account.")})]})]}),(0,h.jsx)(o.u_.Actions,{children:(0,h.jsx)(o.cA,{accountId:b,icon:"plus",isDisabled:!b,label:x("Submit tip"),onStart:v,params:[s,y],tx:C})})]})]})}const R=t.memo(V);var Z=n(94158);const B={transform:e=>e.isSome?(0,Z.r)(e.unwrap().toHex()):null};function L({hash:e}){const{api:s}=(0,i.h)(),n=(0,c.W7)((s.query.tips||s.query.treasury).reasons,[e],B);return(0,h.jsx)("td",{className:"start all",children:n||e.toHex()})}const H=t.memo(L);function W({bestNumber:e,className:s="",defaultId:n,hash:a,isMember:r,members:l,onSelect:c,onlyUntipped:d,tip:p}){const{api:x}=(0,i.h)(),{t:g}=(0,m.$)(),{allAccounts:f}=(0,T.x)(),{closesAt:v,finder:b,isFinder:j,isTipped:y,isTipper:w,median:N}=(0,t.useMemo)((()=>function(e,s){const n=e.closes.unwrapOr(null);let t=null,a=null;if(function(e){return!(null==e||!e.findersFee)}(e))t=e.finder,a=e.deposit;else if(e.finder.isSome){const s=e.finder.unwrap();t=s[0],a=s[1]}const o=e.tips.map((([,e])=>e)).sort(((e,s)=>e.cmp(s))),i=Math.floor(o.length/2),r=o.length?o.length%2?o[i]:o[i-1].add(o[i]).divn(2):u.nw;return{closesAt:n,deposit:a,finder:t,isFinder:!!t&&s.includes(t.toString()),isTipped:!!o.length,isTipper:e.tips.some((([e])=>s.includes(e.toString()))),median:r}}(p,f)),[f,p]),C=(0,t.useMemo)((()=>f.find((e=>l.includes(e)))||null),[f,l]),[k,A]=(0,t.useState)(!1),P=(0,t.useCallback)((()=>p.tips.map((([e,s])=>(0,h.jsx)(o.ax,{balance:s,value:e,withBalance:!0},e.toString())))),[p]);if((0,t.useEffect)((()=>{c(a,k,N)}),[a,k,N,c]),(0,t.useEffect)((()=>{A(r&&!w)}),[r,w]),d&&!v&&w)return null;const{reason:M,tips:D,who:E}=p,q=E.toString();return(0,h.jsxs)(z,{className:s,children:[(0,h.jsx)("td",{className:"address",children:(0,h.jsx)(o.N,{value:E})}),(0,h.jsx)("td",{className:"address media--1400",children:b&&(0,h.jsx)(o.ax,{value:b})}),(0,h.jsx)(H,{hash:M}),(0,h.jsx)("td",{className:"expand media--1100",children:0!==D.length&&(0,h.jsx)(o.n0,{renderChildren:P,summary:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{children:g("Tippers ({{count}})",{replace:{count:D.length}})}),(0,h.jsx)(S.Z,{value:N})]})})}),(0,h.jsxs)("td",{className:"button together",children:[v?e&&v.gt(e)&&(0,h.jsxs)("div",{className:"closingTimer",children:[(0,h.jsx)(F.Z,{value:v.sub(e)}),"#",(0,I.u)(v)]}):b&&j&&(0,h.jsx)(o.cA,{accountId:b,className:"media--1400",icon:"times",label:g("Cancel"),params:[a],tx:(x.tx.tips||x.tx.treasury).retractTip}),v&&e&&!v.gt(e)?(0,h.jsx)(o.cA,{accountId:C,icon:"times",label:g("Close"),params:[a],tx:(x.tx.tips||x.tx.treasury).closeTip}):(0,h.jsx)(R,{defaultId:n,hash:a,isMember:r,isTipped:y,median:N,members:l,recipient:q})]}),(0,h.jsx)("td",{className:"badge media--1700",children:r&&(0,h.jsx)(o.JO,{color:w?"green":"gray",icon:"asterisk"})}),(0,h.jsx)("td",{children:(0,h.jsx)(o.XZ,{isDisabled:!r,onChange:A,value:k})}),(0,h.jsx)("td",{className:"links media--1700",children:(0,h.jsx)(o.NR,{data:a,type:"tip"})})]})}const z=$.ZP.tr.withConfig({displayName:"Tip__StyledTr",componentId:"sc-1b39ycp-0"})([".closingTimer{display:inline-block;padding:0 0.5rem;}"]),U=t.memo(W),J={withParams:!0};function G({className:e="",defaultId:s,hashes:n,isMember:a,members:r,onSelectTip:l}){const{t:d}=(0,m.$)(),{api:u}=(0,i.h)(),[p,x]=(0,t.useState)(!1),g=(0,C.C)(),f=(0,c.W7)(n&&(u.query.tips||u.query.treasury).tips.multi,[n],J),v=(0,t.useMemo)((()=>function(e,s){if(!e||!s)return;const[[n],t]=e;return t.map(((e,s)=>[n[s],e.unwrapOr(null)])).filter((e=>s.includes(e[0])&&!!e[1])).sort(((e,s)=>e[1].closes.isNone?s[1].closes.isNone?0:-1:s[1].closes.isSome?s[1].closes.unwrap().cmp(e[1].closes.unwrap()):1))}(f,n)),[n,f]),b=(0,t.useRef)([[d("tips"),"start"],[d("finder"),"address media--1400"],[d("reason"),"start"],[void 0,"media--1100"],[],[void 0,"badge media--1700"],[],[void 0,"media--1700"]]);return(0,h.jsx)(Q,{className:e,empty:v&&d("No open tips"),filter:a&&(0,h.jsx)("div",{className:"tipsFilter",children:(0,h.jsx)(o.ZD,{label:d("show only untipped/closing"),onChange:x,value:p})}),header:b.current,children:v&&v.map((([e,n])=>(0,h.jsx)(U,{bestNumber:g,defaultId:s,hash:e,isMember:a,members:r,onSelect:l,onlyUntipped:p,tip:n},e)))})}const Q=(0,$.ZP)(o.iA).withConfig({displayName:"Tips__StyledTable",componentId:"sc-3530pp-0"})([".tipsFilter{text-align:right;.ui--Toggle{margin-right:1rem;margin-top:0.75rem;}}"]),X=t.memo(G),K={quickTips:{},quickTxs:[]};function Y({className:e,hashes:s,isMember:n,members:a}){const{t:r}=(0,m.$)(),{allAccounts:l}=(0,T.x)(),{api:c}=(0,i.h)(),[{quickTxs:d},u]=(0,t.useState)(K),p=(0,E.b)(d),x=(0,t.useMemo)((()=>a.find((e=>l.includes(e)))||null),[l,a]),g=(0,t.useCallback)(((e,s,n)=>u((({quickTips:t})=>(t[e]=s?n:null,{quickTips:t,quickTxs:Object.entries(t).map((([e,s])=>s&&(c.tx.tips||c.tx.treasury).tip(e,s))).filter((e=>!!e))})))),[c]);return(0,h.jsxs)("div",{className:e,children:[(0,h.jsxs)(o.zx.Group,{children:[(0,h.jsx)(_,{members:a}),(0,h.jsx)(o.cA,{accountId:x,extrinsic:p,icon:"fighter-jet",isDisabled:!n||!p,label:r("Median tip selected")})]}),(0,h.jsx)(X,{defaultId:x,hashes:s,isMember:n,members:a,onSelectTip:g})]})}const ee=t.memo(Y);var se=n(67847),ne=n(57513),te=n(89448);const ae={transform:e=>e.map((({args:[e]})=>e.toHex()))},oe=(0,te.e)("useTipHashes",(function(){var e,s,n,t;const{api:a}=(0,i.h)(),o=(0,se.b)([null==(e=a.events.tips)?void 0:e.NewTip,null==(s=a.events.tips)?void 0:s.TipClosed,null==(n=a.events.tips)?void 0:n.TipRetracted]);return(0,ne.k)(null==(t=a.query.tips||a.query.treasury)?void 0:t.tips,[],ae,o.blockHash)}));function ie({basePath:e}){const{t:s}=(0,m.$)(),{api:n}=(0,i.h)(),{isMember:c,members:d}=(0,r.V)("council"),u=oe(),p=(0,t.useMemo)((()=>{var e;return[{isRoot:!0,name:"overview",text:s("Overview")},(0,l.m)(null==(e=n.query.tips||n.query.treasury)?void 0:e.tips)&&{count:null==u?void 0:u.length,name:"tips",text:s("Tips")}].filter((e=>!!e))}),[n,s,u]);return(0,h.jsxs)("main",{className:"treasury--App",children:[(0,h.jsx)(o.mQ,{basePath:e,items:p}),(0,h.jsxs)(a.rs,{children:[(0,h.jsx)(a.AW,{path:`${e}/tips`,children:(0,h.jsx)(ee,{hashes:u,isMember:c,members:d})}),(0,h.jsx)(a.AW,{children:(0,h.jsx)(D,{isMember:c,members:d})})]})]})}const re=t.memo(ie)},57994:(e,s,n)=>{n.d(s,{$:()=>a});var t=n(61349);function a(){return(0,t.$G)("app-treasury")}},53009:(e,s,n)=>{n.d(s,{Z:()=>r});var t=n(2784),a=n(13328),o=n(92529),i=n(36856);const r=(0,n(89448).e)("useCounter",(function(){var e;const{hasAccounts:s}=(0,a.x)(),{api:n,isApiReady:r}=(0,o.h)(),l=(0,i.W7)(r&&s&&(null==(e=n.derive.treasury)?void 0:e.proposals));return(0,t.useMemo)((()=>(null==l?void 0:l.proposals.length)||0),[l])}))},39177:(e,s,n)=>{n.d(s,{Z:()=>I});var t=n(2784),a=n(7267),o=n(61397),i=n(30377),r=n(60438),l=n(72570),c=n(92529),d=n(14681),u=n(61162),m=n(70416),h=n(66850),p=n(90107),x=n(61349);function g(){return(0,x.$G)("app-utilities")}var f=n(52322);function v({className:e}){const{t:s}=g(),{chainSS58:n}=(0,c.h)(),[{address:a,inputSS58:x},v]=(0,t.useState)({address:null,inputSS58:42}),[b,j]=(0,t.useState)(-1),y=(0,t.useCallback)((e=>v(function(e){let s=null,n=42;if(e&&(0,u.U)(e)){const t=(0,m.MW)(e),[,,,a]=(0,h.l)(t);s=e,n=a}return{address:s,inputSS58:n}}(e))),[]),w=(0,t.useMemo)((()=>{const e=l.FA.find((({prefix:e})=>e===n));return(0,r.M)(s).map((s=>(0,i.SX)(s,["default"],"empty",-1===s.value?e?` (${e.displayName}, ${n||0})`:` (${n||0})`:` (${s.value})`)))}),[n,s]),N=(0,t.useMemo)((()=>a&&(0,p.m)(a,-1===b?n:b)),[a,n,b]);return(0,f.jsxs)("div",{className:e,children:[(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.bm,{autoFocus:!0,isError:!a,label:s("address to convert"),noConvert:!0,onChange:y})}),(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.Lt,{defaultValue:b,label:s("address prefix"),onChange:j,options:w})}),a&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.qG,{className:"medium",label:s("input ss58 prefix"),value:(0,d.u)(x)})}),N&&(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.bm,{defaultValue:N,isDisabled:!0,label:s("converted address")},N)})]})]})}const b=t.memo(v);var j=n(64021),y=n(74076),w=n(48533),N=n(34323);function C({className:e}){const{t:s}=g(),[{data:n,hash:a,isHexData:i},r]=(0,t.useState)({data:"",hash:(0,N.$)((0,j.d)(""),256),isHexData:!1}),l=(0,t.useCallback)((e=>{const s=(0,y.vq)(e);r({data:e,hash:(0,N.$)(s?(0,w.G)(e):(0,j.d)(e),256),isHexData:s})}),[]);return(0,f.jsxs)("div",{className:e,children:[(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.II,{autoFocus:!0,className:"full",label:s("from the following data"),onChange:l,value:n})}),(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.qG,{className:"medium",label:s("hex input data"),value:s(i?"Yes":"No")})}),(0,f.jsx)("div",{className:"ui--row",children:(0,f.jsx)(o.r_,{className:"full",isHidden:0===a.length,isMonospace:!0,label:s("the resulting hash is"),value:a,withCopy:!0})})]})}const k=t.memo(C);function S({basePath:e,className:s}){const{t:n}=g(),i=(0,t.useRef)([{isRoot:!0,name:"convert",text:n("Convert address")},{name:"hash",text:n("Hash data")}]);return(0,f.jsxs)("main",{className:s,children:[(0,f.jsx)(o.mQ,{basePath:e,items:i.current}),(0,f.jsxs)(a.rs,{children:[(0,f.jsx)(a.AW,{path:`${e}/hash`,children:(0,f.jsx)(k,{})}),(0,f.jsx)(a.AW,{children:(0,f.jsx)(b,{})})]})]})}const I=t.memo(S)},85435:(e,s,n)=>{n.d(s,{Z:()=>S});var t=n(2784),a=n(61397),o=n(61349);function i(){return(0,o.$G)("app-whitelist")}var r=n(92529),l=n(57513),c=n(26238),d=n(89448);const u={transform:e=>e.map((({args:[e]})=>e))};function m(e){const s=[],n=[];return e.forEach((({event:{data:[e],method:t}})=>{"CallWhitelisted"===t?s.push(e):n.push(e)})),{added:s,removed:n}}const h=(0,d.e)("useHashes",(function(){const{api:e}=(0,r.h)(),s=(0,l.k)(e.query.whitelist.whitelistedCall,[],u),n=(0,c.N)([e.events.whitelist.CallWhitelisted,e.events.whitelist.WhitelistedCallRemoved],m,s);return(0,t.useMemo)((()=>n&&n.map((e=>e.toHex()))),[n])}));var p=n(84881),x=n(21240),g=n(96288),f=n(52322);function v({className:e,value:s}){const n=(0,g.CH)(s);return(0,f.jsxs)("tr",{className:e,children:[(0,f.jsx)(x.Z,{value:s}),(0,f.jsx)(p.Z,{value:n})]})}const b=t.memo(v);var j=n(14681);function y({className:e,hashes:s}){const{t:n}=i();return(0,f.jsx)(a.Ty,{className:e,children:(0,f.jsx)(a.Jy,{label:n("hashes"),children:void 0===s?(0,f.jsx)("span",{className:"--tmp",children:"99"}):(0,j.u)(s.length)})})}const w=t.memo(y);function N({className:e}){const{t:s}=i(),n=h(),o=(0,t.useRef)([[s("calls"),"start"],[void 0,"all"],[void 0,"media--1300"]]);return(0,f.jsxs)("div",{className:e,children:[(0,f.jsx)(w,{hashes:n}),(0,f.jsx)(a.iA,{className:e,empty:n&&s("No call hashes found"),header:o.current,children:n&&n.map((e=>(0,f.jsx)(b,{value:e},e)))})]})}const C=t.memo(N);function k({basePath:e,className:s}){const{t:n}=i(),o=(0,t.useRef)([{isRoot:!0,name:"overview",text:n("Overview")}]);return(0,f.jsxs)("main",{className:s,children:[(0,f.jsx)(a.mQ,{basePath:e,items:o.current}),(0,f.jsx)(C,{})]})}const S=t.memo(k)}}]);