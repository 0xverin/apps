"use strict";(("undefined"!=typeof self?self:this).webpackChunk_polkadot_apps=("undefined"!=typeof self?self:this).webpackChunk_polkadot_apps||[]).push([[893],{51213:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(52322),a=t(2784),s=t(95499);const o=a.memo((function(e){var n=e.basePath,t=e.className;return(0,r.jsx)(s.Z,{basePath:n,className:t,type:"membership"})}))},16743:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(90778),a=t(9118),s=t(11677),o={transform:function(e){return e.length}};const i=(0,s.e)("useCounter",(function(){var e,n=(0,r.h)(),t=n.api,s=n.isApiReady;return(0,a.W7)(s&&(null===(e=t.query.membership)||void 0===e?void 0:e.proposals),void 0,o)||0}))},50313:(e,n,t)=>{t.d(n,{Z:()=>G});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(34814),l=t(14681),c=t(61349);function u(){return(0,c.$G)("app-nfts")}var d=function(){return d=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},d.apply(this,arguments)};const m=a.memo((function(e){var n=e.className,t=e.collectionName,a=e.value,s=a.account,i=a.id,l=a.ipfsData,c=(null==l?void 0:l.name)||t,u=(null==l?void 0:l.image)?"https://ipfs.io/ipfs/".concat(l.image):"";return(0,r.jsxs)("tr",d({className:n},{children:[(0,r.jsx)(o.iA.Column.Id,{value:i}),(0,r.jsx)("td",d({className:"together all"},{children:c&&u?(0,r.jsx)(o.JH,{href:u,icon:"braille",label:c,rel:"noopener",target:"_blank"}):c})),(0,r.jsx)("td",d({className:"address media--1000"},{children:(0,r.jsx)(o.N,{value:s})}))]}))}));var h=t(74065),p=t(90778),f=t(11677);const v=(0,f.e)("useAccountItems",(function(){var e=(0,h.X)(),n=(0,p.h)().api,t=(0,i.x)().allAccounts,r=(0,a.useState)(),s=r[0],o=r[1];return(0,a.useEffect)((function(){if(t.length){var r=t.map((function(e){return n.query.uniques.account.keys(e)}));Promise.all(r).then((function(n){return e.current&&o(function(e){return e.filter((function(e){return!!e.length})).map((function(e){return e.map((function(e){var n=e.args;return{accountId:n[0],collectionId:n[1],itemId:n[2]}}))})).flat()}(n))})).catch(console.error)}}),[t,n.query.uniques.account,e]),s}));var x=t(9118),g=t(67239),b=function(){return b=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},b.apply(this,arguments)},j={withParams:!0},y={transform:function(e){if(!e)return null;try{var n=JSON.parse(e);if(n&&"object"==typeof n)return{image:"string"==typeof n.image?n.image.replace(/ipfs:\/\/|ipfs\//gi,""):null,name:"string"==typeof n.name?n.name:null}}catch(e){}return null}};const w=(0,f.e)("useItemsInfos",(function(e){var n=(0,p.h)().api,t=(0,a.useState)(),r=t[0],s=t[1],o=(0,a.useMemo)((function(){return e.map((function(e){return[e.collectionId,e.itemId]}))}),[e]),i=(0,x.W7)(n.query.uniques.instanceMetadataOf.multi,[o],j),l=(0,a.useMemo)((function(){if(i&&i[1].length)return i[1].map((function(e){return e.isSome?e.unwrap().data.toString():""}))}),[i]),c=(0,g.g)(l,y);return(0,a.useEffect)((function(){if(c&&e.length&&i&&i[0][0].length){if(!i[0][0][0][0].eq(o[0][0]))return;var n=i[0][0].map((function(n,t){return function(e,n,t){var r=e[1],a=t.find((function(e){return e.itemId.eq(r)})).accountId;return{account:a,id:r,ipfsData:null,key:r.toString(),metadata:n.unwrapOr(null)}}(n,i[1][t],e)}));s(n.map(function(e){return function(n){var t=n.metadata&&n.metadata.data.toString();return b(b({},n),{ipfsData:t&&e.has(t)&&e.get(t)||null})}}(c)))}}),[e,o,c,i]),r}));var N,k,O=function(){return O=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},O.apply(this,arguments)},C=o.zo.div(I||(N=["\n  table {\n    overflow: auto;\n  }\n"],k=["\n  table {\n    overflow: auto;\n  }\n"],Object.defineProperty?Object.defineProperty(N,"raw",{value:k}):N.raw=k,I=N));const S=a.memo((function(e){var n,t=e.className,s=e.infos,i=void 0===s?[]:s,c=u().t,d=" - ".concat(c("no name")," -"),h=(0,a.useState)(0),p=h[0],f=h[1],x=(0,a.useState)(null),g=x[0],b=x[1],j=v(),y=(0,a.useMemo)((function(){return g&&j?j.filter((function(e){return e.collectionId.eq(g.id)})):[]}),[g,j]),N=w(y),k=(null===(n=null==g?void 0:g.ipfsData)||void 0===n?void 0:n.name)||d,S=(0,a.useMemo)((function(){return j?i.filter((function(e){return!(!e.details||!e.metadata)&&j.some((function(n){var t=n.collectionId;return e.id.eq(t)}))})).sort((function(e,n){return e.id.cmp(n.id)})):[]}),[i,j]),I=(0,a.useMemo)((function(){return S.map((function(e,n){var t=e.id,r=e.ipfsData;return{text:"".concat((null==r?void 0:r.name)||d," (ID: ").concat((0,l.u)(t),")"),value:n}}))}),[S,d]),P=(0,a.useRef)([[c("items"),"start",2],[c("owner"),"address media--1000"]]);return(0,a.useEffect)((function(){b((function(){return p>=0&&p<S.length?S[p]:null}))}),[S,p]),(0,r.jsx)(C,O({className:t},{children:(0,r.jsx)(o.iA,O({empty:!g&&j&&c("No accounts with items found for the collection"),filter:I.length?(0,r.jsx)(o.Lt,{isFull:!0,label:c("the collection to query for items"),onChange:f,options:I,value:p}):void 0,header:P.current},{children:N&&N.map((function(e){return(0,r.jsx)(m,{collectionName:k,value:e},e.key)}))}))}))}));var I,P=function(){return P=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},P.apply(this,arguments)};const A=a.memo((function(e){var n=e.className,t=e.value,a=t.details,s=t.id,i=t.ipfsData,c=u().t,d=(null==i?void 0:i.name)||"",m=(null==i?void 0:i.image)?"https://ipfs.io/ipfs/".concat(i.image):"";return(0,r.jsxs)("tr",P({className:n},{children:[(0,r.jsx)(o.iA.Column.Id,{value:s}),(0,r.jsx)("td",P({className:"together all"},{children:d&&m?(0,r.jsx)(o.JH,{href:m,icon:"braille",label:d,rel:"noopener",target:"_blank"}):d})),(0,r.jsx)("td",P({className:"address media--1000"},{children:a&&(0,r.jsx)(o.N,{value:a.owner})})),(0,r.jsx)("td",P({className:"string"},{children:a&&a.isFrozen.isTrue&&c("Frozen")})),(0,r.jsx)("td",P({className:"number"},{children:a&&(0,l.u)(a.items||a.instances)}))]}))}));var M=function(){return M=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},M.apply(this,arguments)};const T=a.memo((function(e){var n=e.className,t=e.infos,s=u().t,i=(0,a.useRef)([[s("collections"),"start",2],[s("owner"),"address media--1000"],[s("status")],[s("items")]]);return(0,r.jsx)(o.iA,M({className:n,empty:t&&s("No collections found"),header:i.current},{children:null==t?void 0:t.map((function(e){return(0,r.jsx)(A,{value:e},e.key)}))}))}));var E=function(){return E=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},E.apply(this,arguments)};const D=a.memo((function(e){var n=e.className,t=e.numCollections,a=u().t;return(0,r.jsx)(o.Ty,E({className:n},{children:(0,r.jsx)(o.Jy,E({label:a("collections")},{children:(0,l.u)(t)}))}))}));var q=function(){return q=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},q.apply(this,arguments)};const F=a.memo((function(e){var n=e.className,t=e.ids,a=e.infos;return(0,r.jsxs)("div",q({className:n},{children:[(0,r.jsx)(D,{numCollections:null==t?void 0:t.length}),(0,r.jsx)(T,{infos:a})]}))}));var V=t(12298),R=t(39824),_={transform:function(e){return e.map((function(e){return e.args[0]})).sort((function(e,n){return e.cmp(n)}))}};function B(e){var n=[],t=[];return e.forEach((function(e){var r=e.event,a=r.data[0],s=r.method;"Created"===s||"ForceCreated"===s?n.push(a):t.push(a)})),{added:n,removed:t}}const Z=(0,f.e)("useCollectionIds",(function(){var e=(0,p.h)().api,n=(0,V.k)(e.query.uniques.class,[],_);return(0,R.N)([e.events.uniques.Created,e.events.uniques.Destroyed,e.events.uniques.ForceCreated],B,n)}));var L=function(){return L=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},L.apply(this,arguments)},H={isAdminMe:!1,isFreezerMe:!1,isIssuerMe:!1,isOwnerMe:!1},z={withParams:!0},W={transform:function(e){if(!e)return null;try{var n=JSON.parse(e);if(n&&"object"==typeof n)return{image:"string"==typeof n.image?n.image.replace(/ipfs:\/\/|ipfs\//gi,""):null,name:"string"==typeof n.name?n.name:null}}catch(e){}return null}};function $(e,n){var t=n.toString();return e.some((function(e){return e===t}))}const U=(0,f.e)("useCollectionInfos",(function(e){var n=(0,p.h)().api,t=(0,i.x)().allAccounts,r=(0,x.W7)(n.query.uniques.classMetadataOf.multi,[e],z),s=(0,x.W7)(n.query.uniques.class.multi,[e],z),o=(0,a.useState)(),l=o[0],c=o[1],u=(0,a.useMemo)((function(){return r&&r[1].length?r[1].map((function(e){return e.isSome?e.unwrap().data.toString():""})):[]}),[r]),d=(0,g.g)(u,W);return(0,a.useEffect)((function(){if(d&&s&&r&&s[0][0].length===r[0][0].length){var e=s[0][0].map((function(e,n){return function(e,n,t,r){var a=t.unwrapOr(null);return L(L({},a?{isAdminMe:$(e,a.admin),isFreezerMe:$(e,a.freezer),isIssuerMe:$(e,a.issuer),isOwnerMe:$(e,a.owner)}:H),{details:a,id:n,ipfsData:null,key:n.toString(),metadata:r.unwrapOr(null)})}(t,e,s[1][n],r[1][n])}));c(e.map(function(e){return function(n){var t,r=n.metadata&&(null===(t=n.metadata.data)||void 0===t?void 0:t.toString());return L(L({},n),{ipfsData:r&&e.has(r)&&e.get(r)||null})}}(d)))}}),[t,s,e,d,r]),l}));var J=function(){return J=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},J.apply(this,arguments)};const G=a.memo((function(e){var n=e.basePath,t=e.className,l=u().t,c=(0,i.x)().hasAccounts,d=Z(),m=U(d),h=(0,a.useRef)([{isRoot:!0,name:"overview",text:l("Overview")},{name:"my-nfts",text:l("My NFTs")}]),p=(0,a.useMemo)((function(){return c&&m&&m.some((function(e){var n=e.details,t=e.metadata;return!(!n||!t)}))?[]:["my-nfts"]}),[c,m]);return(0,r.jsxs)("main",J({className:t},{children:[(0,r.jsx)(o.mQ,{basePath:n,hidden:p,items:h.current}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,J({path:"".concat(n,"/my-nfts")},{children:(0,r.jsx)(S,{infos:m})})),(0,r.jsx)(s.AW,{children:(0,r.jsx)(F,{ids:d,infos:m})})]})]}))}))},9847:(e,n,t)=>{t.d(n,{Z:()=>x});var r=t(52322),a=t(2784),s=t(24732),o=t(90778),i=t(41411),l=t(18837),c=t(13940),u=t(95292),d=t(33661),m=t(58464),h=function(){return h=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},h.apply(this,arguments)},p=Number.MAX_SAFE_INTEGER,f=["xcm","xcmPallet","polkadotXcm"];function v(e){var n=e.paraId,t=e.text,a=e.ui;return{text:(0,r.jsxs)("div",h({className:"ui--Dropdown-item"},{children:[(0,r.jsx)(s.Mj,{className:"ui--Dropdown-icon",logo:a.logo}),(0,r.jsx)("div",h({className:"ui--Dropdown-name"},{children:t}))]}),n),value:n||-1}}const x=a.memo((function(e){var n,t=e.onClose,x=(0,m.$)().t,g=(0,o.h)().api,b=(0,a.useState)(u.nw),j=b[0],y=b[1],w=(0,a.useState)(null),N=w[0],k=w[1],O=(0,a.useState)(null),C=O[0],S=O[1],I=(0,a.useState)(p),P=I[0],A=I[1],M=(0,i.M)(),T=M.allowTeleport,E=M.destinations,D=M.isParaTeleport,q=M.oneWay,F=(0,a.useMemo)((function(){var e=f.filter((function(e){return g.tx[e]&&(0,d.m)(g.tx[e].limitedTeleportAssets)}))[0];return g.tx[e].limitedTeleportAssets}),[g]),V=(0,a.useMemo)((function(){return E.map(v)}),[E]),R=(0,a.useMemo)((function(){var e;return null===(e=E.find((function(e,n){var t=e.paraId;return-1===P?0===n:P===t})))||void 0===e?void 0:e.value}),[E,P]),_=(0,l.J)(R),B=(0,a.useMemo)((function(){return[{V1:D?{interior:"Here",parents:1}:{interior:{X1:{ParaChain:P}},parents:0}},{V1:{interior:{X1:{AccountId32:{id:g.createType("AccountId32",N).toHex(),network:"Any"}}},parents:0}},{V1:[{fun:{Fungible:j},id:{Concrete:{interior:"Here",parents:D?1:0}}}]},0,{Unlimited:null}]}),[g,j,D,N,P]),Z=!!j;return(0,r.jsxs)(s.u_,h({header:x("Teleport assets"),onClose:t,size:"large"},{children:[(0,r.jsxs)(s.u_.Content,{children:[(0,r.jsx)(s.u_.Columns,h({hint:x("The transferred balance will be subtracted (along with fees) from the sender account.")},{children:(0,r.jsx)(s.rp,{label:x("send from account"),labelExtra:(0,r.jsx)(c.Z,{label:x("transferrable"),params:C}),onChange:S,type:"account"})})),0!==V.length&&(0,r.jsxs)(s.u_.Columns,h({hint:x("The destination chain for this asset teleport. The transferred value will appear on this chain.")},{children:[(0,r.jsx)(s.Lt,{defaultValue:V[0].value,label:x("destination chain"),onChange:A,options:V}),!D&&q.includes(P)&&(0,r.jsx)(s.Pd,{content:x("Currently this is a one-way transfer since the on-chain runtime functionality to send the funds from the destination chain back to this account not yet available.")})]})),(0,r.jsx)(s.u_.Columns,h({hint:x("The beneficiary will have access to the transferred amount when the transaction is included in a block.")},{children:(0,r.jsx)(s.rp,{label:x("send to address"),onChange:k,type:"allPlus"})})),(0,r.jsxs)(s.u_.Columns,h({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:x("This is the amount to be teleported to the destination chain and does not account for the source or the destination transfer fee")}),(0,r.jsx)("p",{children:x("The amount deposited to the recipient will be net the calculated cross-chain fee. If the recipient address is new, the amount deposited should be greater than the Existential Deposit")})]})},{children:[(0,r.jsx)(s.H,{autoFocus:!0,isError:!Z,isZeroable:!0,label:x("amount"),onChange:y}),(0,r.jsx)(s.H,{defaultValue:null===(n=null==_?void 0:_.consts.balances)||void 0===n?void 0:n.existentialDeposit,isDisabled:!0,isLoading:!_,label:x("destination existential deposit")})]}))]}),(0,r.jsx)(s.u_.Actions,{children:(0,r.jsx)(s.cA,{accountId:C,icon:"share-square",isDisabled:!(T&&Z&&N&&j&&_&&(D||P!==p)),label:x("Teleport"),onStart:t,params:B,tx:F})})]}))}))},93242:(e,n,t)=>{t.d(n,{Z:()=>it});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(90778),l=t(9118),c=t(58464),u=t(31132),d=t(14681),m=function(){return m=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},m.apply(this,arguments)};const h=a.memo((function(e){var n=e.auctionInfo,t=e.blockNumber,a=e.className,s=void 0===a?"":a,i=e.isFirst,l=e.isLatest,u=e.value,h=u.accountId,p=u.firstSlot,f=u.isCrowdloan,v=u.lastSlot,x=u.paraId,g=u.value,b=(0,c.$)().t;return(0,r.jsxs)("tr",m({className:s},{children:[(0,r.jsx)("td",{children:i&&(0,r.jsx)("h1",{children:l?b("latest"):(0,r.jsxs)(r.Fragment,{children:["#",(0,d.u)(!t||t.isZero()?n.endBlock:t)]})})}),(0,r.jsx)(o.iA.Column.Id,{value:x}),(0,r.jsx)("td",m({className:"badge"},{children:(0,r.jsx)(o.f,{id:x})})),(0,r.jsx)("td",m({className:"address"},{children:(0,r.jsx)(o.ax,{value:h})})),(0,r.jsx)("td",m({className:"all number"},{children:b(f?"Yes":"No")})),(0,r.jsx)("td",m({className:"all number together"},{children:p.eq(v)?(0,d.u)(p):"".concat((0,d.u)(p)," - ").concat((0,d.u)(v))})),(0,r.jsx)(o.iA.Column.Balance,{value:g})]}))}));var p=function(){return p=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},p.apply(this,arguments)};const f=a.memo((function(e){var n=e.auctionInfo,t=e.campaigns,s=e.className,d=e.winningData,m=(0,c.$)().t,f=(0,i.h)().api,v=(0,u.f)(),x=(0,l.W7)(f.query.crowdloan.newRaise),g=(0,a.useRef)([[m("bids"),"start",3],[m("bidder"),"address"],[m("crowdloan")],[m("leases")],[m("value")]]),b=(0,a.useMemo)((function(){if(x&&n&&n.leasePeriod&&t.funds){var e=n.leasePeriod,r=e.add(v);return t.funds.filter((function(n){var t=n.firstSlot,a=n.isWinner,s=n.lastSlot,o=n.paraId;return!a&&x.some((function(e){return e.eq(o)}))&&t.gte(e)&&s.lte(r)})).sort((function(e,n){return n.value.cmp(e.value)}))}}),[n,t,x,v]),j=(0,a.useCallback)((function(e,t){return!t&&x&&(null==n?void 0:n.leasePeriod)&&b?e.concat.apply(e,b.filter((function(n){var t=n.firstSlot,r=n.lastSlot,a=n.paraId,s=n.value;return!e.some((function(e){return e.firstSlot.eq(t)&&e.lastSlot.eq(r)}))&&!b.some((function(e){return!a.eq(e.paraId)&&t.eq(e.firstSlot)&&r.eq(e.lastSlot)&&s.lt(e.value)}))}))).map((function(e){return b.find((function(n){var t=n.firstSlot,r=n.lastSlot,a=n.value;return e.firstSlot.eq(t)&&e.lastSlot.eq(r)&&e.value.lt(a)}))||e})).sort((function(e,n){return e.firstSlot.eq(n.firstSlot)?e.lastSlot.cmp(n.lastSlot):e.firstSlot.cmp(n.firstSlot)})):e}),[n,b,x]);return(0,r.jsx)(o.iA,p({className:s,empty:x&&n&&n.numAuctions&&d&&(n.endBlock&&!d.length?m("No winners in this auction"):m("No ongoing auction")),header:g.current,noBodyTag:!0},{children:n&&n.leasePeriod&&d&&b&&(d.length?d.map((function(e,t){var a=e.blockNumber,s=e.winners;return(0,r.jsx)("tbody",{children:j(s,0!==t||1!==d.length).map((function(e,s){return(0,r.jsx)(h,{auctionInfo:n,blockNumber:a,isFirst:0===s,isLatest:0===t,value:e},"".concat(a.toString(),":").concat(e.key))}))},t)})):0!==b.length&&(0,r.jsx)("tbody",{children:j([],!1).map((function(e,t){return(0,r.jsx)(h,{auctionInfo:n,isFirst:0===t,isLatest:!0,value:e},"latest-crowd:".concat(e.key))}))},"latest-crowd"))}))}));var v=t(34814),x=t(54383),g=t(38894),b=t(95292),j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},j.apply(this,arguments)};const y=a.memo((function(e){var n=e.noCodeCheck,t=e.onChange,s=e.ownedIds,i=(0,c.$)().t,l=(0,a.useState)(null),u=l[0],d=l[1],m=(0,a.useState)(0),h=m[0],p=m[1];(0,a.useEffect)((function(){t(u&&h?{accountId:u,paraId:h}:{accountId:null,paraId:0})}),[u,t,s,h]);var f=(0,a.useMemo)((function(){return s.map((function(e){return e.manager}))}),[s]),v=(0,a.useMemo)((function(){return s.filter((function(e){return e.manager===u})).map((function(e){var n=e.paraId;return{text:n.toString(),value:n.toNumber()}}))}),[u,s]),x=(0,a.useCallback)((function(e){return p(n||s.some((function(n){var t=n.hasCode;return n.paraId.eq(e)&&t}))?e:0)}),[n,s]);return(0,r.jsxs)(o.u_.Columns,j({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:i("This account that has been used to register the parachain. This will pay all associated fees.")}),(0,r.jsx)("p",{children:i("The parachain id is associated with the selected account via parathread registration.")})]})},{children:[(0,r.jsx)(o.rp,{filter:f,label:i("parachain owner"),onChange:d,type:"account",value:u}),u&&(0,r.jsx)(o.Lt,{defaultValue:v[0].value,label:i("parachain id"),onChange:x,options:v},u),!n&&!h&&(0,r.jsx)(o.oy,{content:i("Before using this registered paraId, you need to have a WASM validation function registered on-chain")})]}))}));var w=function(){return w=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},w.apply(this,arguments)},N={accountId:null,paraId:0};const k=a.memo((function(e){var n,t,s=e.auctionInfo,l=e.className,m=e.lastWinners,h=e.ownedIds,p=(0,c.$)().t,f=(0,i.h)().api,j=(0,v.x)().hasAccounts,k=(0,x.C)(),O=(0,u.E)(),C=(0,a.useState)(N),S=C[0],I=S.accountId,P=S.paraId,A=C[1],M=(0,a.useState)(b.nw),T=M[0],E=M[1],D=(0,a.useState)(0),q=D[0],F=D[1],V=(0,g.O)(),R=V[0],_=V[1],B=(0,a.useMemo)((function(){if(!(null==s?void 0:s.leasePeriod))return[];var e=s.leasePeriod.toNumber();return O.map((function(n,t){var r=n[0],a=n[1];return{firstSlot:e+r,lastSlot:e+a,text:"".concat((0,d.u)(e+r)," - ").concat((0,d.u)(e+a)),value:t}}))}),[s,O]),Z=(0,a.useMemo)((function(){return m&&m.winners.find((function(e){var n=e.firstSlot,t=e.lastSlot;return n.eqn(B[q].firstSlot)&&t.eqn(B[q].lastSlot)}))}),[m,q,B]),L=!(!T||!Z)&&T.lte(Z.value),H=!T||T.isZero()||L;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{icon:"plus",isDisabled:!h.length||!j||!(null==s?void 0:s.numAuctions)||!s.leasePeriod||!s.endBlock||!f.consts.auctions||(null==k?void 0:k.gte(s.endBlock.add(f.consts.auctions.endingPeriod))),label:p("Bid"),onClick:_}),R&&(0,r.jsxs)(o.u_,w({className:l,header:p("Place bid"),onClose:_,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(y,{onChange:A,ownedIds:h}),(0,r.jsx)(o.u_.Columns,w({hint:p("The first and last lease period for this bid. The last lease period should be after the first with the maximum determined by the auction config.")},{children:(0,r.jsx)(o.Lt,{label:p("bid period range (first lease - last lease)"),onChange:F,options:B,value:q})})),(0,r.jsxs)(o.u_.Columns,w({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:p("The amount to to bid for this parachain lease period range.")}),(0,r.jsx)("p",{children:p("The bid should be more than the current range winner to be accepted and influence the auction outcome.")})]})},{children:[(0,r.jsx)(o.H,{autoFocus:!0,isError:H,isZeroable:!1,label:p("bid amount"),onChange:E}),(0,r.jsx)(o.H,{defaultValue:null==Z?void 0:Z.value,isDisabled:!0,label:p("current range winning bid")},q)]}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:I,icon:"plus",isDisabled:!P||H||!(null==s?void 0:s.leasePeriod),label:p("Bid"),onStart:_,params:[P,null==s?void 0:s.numAuctions,null===(n=null==s?void 0:s.leasePeriod)||void 0===n?void 0:n.addn(O[q][0]),null===(t=null==s?void 0:s.leasePeriod)||void 0===t?void 0:t.addn(O[q][1]),T],tx:f.tx.auctions.bid})})]}))]})}));var O=t(58607),C=function(){return C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)};const S=a.memo((function(e){var n,t,a=e.auctionInfo,s=e.className,u=e.lastWinners,m=(0,c.$)().t,h=(0,i.h)().api,p=(0,x.C)(),f=(0,l.W7)(null===(n=h.query.balances)||void 0===n?void 0:n.totalIssuance);return(0,r.jsxs)(o.Ty,C({className:s},{children:[(0,r.jsxs)("section",{children:[(0,r.jsx)(o.Jy,C({label:m("auctions")},{children:a?(0,d.u)(a.numAuctions):(0,r.jsx)("span",C({className:"--tmp"},{children:"99"}))})),(0,r.jsx)(o.Jy,C({label:m("active")},{children:a?a.leasePeriod?m("yes"):m("no"):(0,r.jsx)("span",C({className:"--tmp"},{children:m("no")}))}))]}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{children:[a.leasePeriod&&(0,r.jsxs)(o.Jy,C({label:m("first - last")},{children:[(0,d.u)(a.leasePeriod)," - ",(0,d.u)(a.leasePeriod.add(h.consts.auctions.leasePeriodsPerSlot).isub(b.If))]})),f&&u&&(0,r.jsx)(o.Jy,C({label:m("total"),progress:{hideValue:!0,total:f,value:u.total,withTime:!0}},{children:(0,r.jsx)(O.Z,{value:u.total,withSi:!0})}))]}),(0,r.jsx)("section",{children:(null==a?void 0:a.endBlock)&&p&&(p.lt(a.endBlock)?(0,r.jsxs)(o.Jy,C({label:m("end period at"),progress:{hideGraph:!0,total:a.endBlock,value:p,withTime:!0}},{children:["#",(0,d.u)(a.endBlock)]})):(0,r.jsx)(o.Jy,{label:m("ending period"),progress:{total:null===(t=h.consts.auctions)||void 0===t?void 0:t.endingPeriod,value:p.sub(a.endBlock),withTime:!0}}))})]})]}))}));var I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)};const P=a.memo((function(e){var n=e.auctionInfo,t=e.campaigns,a=e.className,s=e.ownedIds,i=e.winningData,l=i&&i[0];return(0,r.jsxs)("div",I({className:a},{children:[(0,r.jsx)(S,{auctionInfo:n,lastWinners:l}),(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(k,{auctionInfo:n,lastWinners:l,ownedIds:s})}),(0,r.jsx)(f,{auctionInfo:n,campaigns:t,winningData:i})]}))}));var A=function(){return A=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},A.apply(this,arguments)},M={accountId:null,paraId:0};const T=a.memo((function(e){var n=e.auctionInfo,t=e.bestNumber,s=e.className,l=e.leasePeriod,d=e.ownedIds,m=(0,c.$)().t,h=(0,i.h)().api,p=(0,u.E)(),f=(0,a.useState)(M),v=f[0],x=v.accountId,j=v.paraId,w=f[1],N=(0,a.useState)(),k=N[0],O=N[1],C=(0,a.useState)(),S=C[0],I=C[1],P=(0,a.useState)(),T=P[0],E=P[1],D=(0,a.useState)(),q=D[0],F=D[1],V=(0,g.O)(),R=V[0],_=V[1],B=p[p.length-1][1]-p[0][0],Z=!t||!S||S.lt(t),L=!T||!!l&&T.lt(l.currentPeriod),H=!q||!T||q.lt(T)||q.gt(T.addn(B)),z=((null==n?void 0:n.leasePeriod)||(null==l?void 0:l.currentPeriod.add(b.If))||1).toString();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{icon:"plus",isDisabled:!d.length,label:m("Add fund"),onClick:_}),R&&(0,r.jsxs)(o.u_,A({className:s,header:m("Add campaign"),onClose:_,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(y,{onChange:w,ownedIds:d}),(0,r.jsx)(o.u_.Columns,A({hint:m("The amount to be raised in this funding campaign.")},{children:(0,r.jsx)(o.H,{isZeroable:!1,label:m("crowdfund cap"),onChange:O})})),(0,r.jsx)(o.u_.Columns,A({hint:m("The end block for contributions to this fund.")},{children:(0,r.jsx)(o.Rn,{isError:Z,label:m("ending block"),onChange:I})})),(0,r.jsxs)(o.u_.Columns,A({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:m("The first and last lease periods for this funding campaign.")}),(0,r.jsx)("p",{children:m("The ending lease period should be after the first and a maximum of {{maxPeriods}} periods more than the first",{replace:{maxPeriods:B}})})]})},{children:[(0,r.jsx)(o.Rn,{defaultValue:z,isError:L,label:m("first period"),onChange:E}),(0,r.jsx)(o.Rn,{defaultValue:z,isError:H,label:m("last period"),onChange:F})]}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:x,icon:"plus",isDisabled:!j||!(null==k?void 0:k.gt(b.nw))||Z||L||H,label:m("Add"),onStart:_,params:[j,k,T,q,S,null],tx:h.tx.crowdloan.create})})]}))]})}));var E=t(62395),D=t(84450),q=t(65874),F=t(74076),V=t(92730),R=function(){return R=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},R.apply(this,arguments)},_=[132,134];const B=a.memo((function(e){var n=e.cap,t=e.className,s=e.needsSignature,l=e.paraId,u=e.raised,d=(0,c.$)().t,m=(0,i.h)().api,h=(0,v.x)().hasAccounts,p=(0,g.O)(),f=p[0],x=p[1],b=(0,a.useState)(null),j=b[0],y=b[1],w=(0,a.useState)(),N=w[0],k=w[1],O=(0,a.useState)(null),C=O[0],S=O[1],I=(0,a.useMemo)((function(){return s&&!function(e,n){if((0,F.vq)(n)&&_.includes(n.length))try{return e.createType("MultiSignature",n),!0}catch(e){console.error(e)}return!1}(m,C)}),[m,s,C]),P=n.sub(u),A=!N||N.lt(m.consts.crowdloan.minContribution),M=!(!N||!N.gt(P)),T=A||M;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{icon:"plus",isDisabled:!h,label:d("Contribute"),onClick:x}),f&&(0,r.jsxs)(o.u_,R({className:t,header:d("Contribute to fund"),onClose:x,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,R({hint:d("This account will contribute to the crowdloan.")},{children:(0,r.jsx)(o.rp,{label:d("contribute from"),onChange:y,type:"account",value:j})})),(0,r.jsxs)(o.u_.Columns,R({hint:d("The amount to contribute from this account.")},{children:[(0,r.jsx)(o.H,{autoFocus:!0,defaultValue:m.consts.crowdloan.minContribution,isError:T,isZeroable:!1,label:d("contribution"),onChange:k}),A&&(0,r.jsx)(o.Pd,{content:d("The amount is less than the minimum allowed contribution of {{value}}",{replace:{value:(0,V.a)(m.consts.crowdloan.minContribution)}})}),M&&(0,r.jsx)(o.Pd,{content:d("The amount is more than the remaining contribution needed {{value}}",{replace:{value:(0,V.a)(P)}})})]})),s&&(0,r.jsxs)(o.u_.Columns,R({hint:d("The verifier signature that is to be associated with this contribution.")},{children:[(0,r.jsx)(o.II,{isError:I,label:d("verifier signature"),onChange:S,placeholder:d("0x...")}),I&&(0,r.jsx)(o.Pd,{content:d("The hex-encoded verifier signature should be provided to you by the team running the crowdloan (based on the information you provide).")})]})),(0,r.jsxs)(o.u_.Columns,R({hint:d("The above contribution should more than minimum contribution amount and less than the remaining value.")},{children:[(0,r.jsx)(o.H,{defaultValue:m.consts.crowdloan.minContribution,isDisabled:!0,label:d("minimum allowed")}),(0,r.jsx)(o.H,{defaultValue:P,isDisabled:!0,label:d("remaining till cap")})]}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:j,icon:"plus",isDisabled:T||I,label:d("Contribute"),onStart:x,params:[l,N,C],tx:m.tx.crowdloan.contribute})})]}))]})}));var Z=function(){return Z=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Z.apply(this,arguments)};const L=a.memo((function(e){var n=e.className,t=e.paraId,s=(0,c.$)().t,l=(0,i.h)().api,u=(0,v.x)().hasAccounts,d=(0,g.O)(),m=d[0],h=d[1],p=(0,a.useState)(null),f=p[0],x=p[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{icon:"minus",isDisabled:!u,label:s("Refund"),onClick:h}),m&&(0,r.jsxs)(o.u_,Z({className:n,header:s("Withdraw from fund"),onClose:h,size:"large"},{children:[(0,r.jsx)(o.u_.Content,{children:(0,r.jsx)(o.u_.Columns,Z({hint:s("This account will be used to send the transaction.")},{children:(0,r.jsx)(o.rp,{label:s("requesting from"),onChange:x,type:"account",value:f})}))}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:f,icon:"credit-card",label:s("Refund"),onStart:h,params:[t],tx:l.tx.crowdloan.refund})})]}))]})}));var H=t(11677),z=t(90107),W=function(){return W=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},W.apply(this,arguments)},$={blockHash:"-",contributorsHex:[],hasLoaded:!1,myAccounts:[],myAccountsHex:[],myContributions:{}};const U=(0,H.e)("useContributions",(function(e){var n=(0,i.h)().api,t=(0,v.x)().allAccountsHex,r=(0,a.useState)((function(){return $})),s=r[0],o=r[1],c=(0,l.W7)(n.derive.crowdloan.contributions,[e]),u=(0,l.W7)(n.derive.crowdloan.ownContributions,[e,s.myAccountsHex]);return(0,a.useEffect)((function(){c&&o((function(e){var r,a=c.contributorsHex.filter((function(e){return t.includes(e)}));return a.length===e.myAccountsHex.length?(a=e.myAccountsHex,r=e.myAccounts):r=a.map((function(e){return(0,z.m)(e,n.registry.chainSS58)})),W(W(W({},e),c),{hasLoaded:!0,myAccounts:r,myAccountsHex:a})}))}),[n,t,c]),(0,a.useEffect)((function(){u&&o((function(e){return W(W({},e),{myContributions:u})}))}),[u]),s}));var J=function(){return J=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},J.apply(this,arguments)};const G=a.memo((function(e){var n=e.bestHash,t=e.bestNumber,s=e.className,l=void 0===s?"":s,u=e.isOngoing,m=e.leasePeriod,h=e.value,p=h.info,f=p.cap,x=p.depositor,g=p.end,b=p.firstPeriod,j=p.lastPeriod,y=p.raised,w=p.verifier,N=h.isCapped,k=h.isEnded,C=h.isWinner,S=h.paraId,I=(0,c.$)().t,P=(0,i.h)().api,A=(0,v.x)().isAccount,M=(0,D.jC)(S),T=U(S),E=T.blockHash,F=T.contributorsHex,V=T.hasLoaded,R=T.myAccounts,_=T.myAccountsHex,Z=T.myContributions,H=(0,a.useState)((function(){return{prevHash:"",prevLength:0}})),z=H[0],W=H[1],$=(0,a.useMemo)((function(){return A(x.toString())}),[x,A]),G=(0,a.useMemo)((function(){return t&&g.gt(t)?g.sub(t):null}),[t,g]),Q=(0,a.useMemo)((function(){return f.isZero()?"100.00%":"".concat((y.muln(1e4).div(f).toNumber()/100).toFixed(2),"%")}),[f,y]),X=!G&&!!m&&(C?m.currentPeriod.gt(j):m.currentPeriod.gt(b)),K=u&&!N&&!C&&!!G,Y=y.isZero(),ee=!y.isZero()&&X,ne=0!==M.length&&M[0].homepage;return(0,a.useEffect)((function(){W((function(e){var n=F.length;return e.prevLength!==n?{prevHash:E,prevLength:n}:e}))}),[F,E]),(0,r.jsxs)("tr",J({className:l},{children:[(0,r.jsx)(o.iA.Column.Id,{value:S}),(0,r.jsx)("td",J({className:"badge"},{children:(0,r.jsx)(o.f,{id:S})})),(0,r.jsx)("td",J({className:"media--800"},{children:I(C?"Winner":G?N?"Capped":u?"Active":"Past":"Ended")})),(0,r.jsx)("td",J({className:"address media--2000"},{children:(0,r.jsx)(o.ax,{value:x})})),(0,r.jsxs)("td",J({className:"all number together media--1200"},{children:[G&&(0,r.jsx)(q.Z,{value:G}),"#",(0,d.u)(g)]})),(0,r.jsx)("td",J({className:"number all together"},{children:b.eq(j)?(0,d.u)(b):"".concat((0,d.u)(b)," - ").concat((0,d.u)(j))})),(0,r.jsxs)("td",J({className:"number together"},{children:[(0,r.jsx)(O.Z,{value:y,withCurrency:!1})," / ",(0,r.jsx)(O.Z,{value:f}),(0,r.jsx)("div",{children:Q}),0!==R.length&&(0,r.jsx)(o.xH,J({summary:I("My contributions ({{count}})",{replace:{count:R.length}}),withBreaks:!0},{children:R.map((function(e,n){return(0,r.jsx)(o.ax,{balance:Z[_[n]],value:e,withBalance:!0},e)}))}))]})),(0,r.jsx)("td",J({className:"number together media--1100"},{children:V?(0,r.jsxs)(r.Fragment,{children:[n&&(0,r.jsx)(o.JO,{color:z.prevHash===n?"green":"transparent",icon:"chevron-up",isPadded:!0}),0!==F.length&&(0,d.u)(F.length)]}):(0,r.jsx)("span",J({className:"--tmp"},{children:"999"}))})),(0,r.jsxs)("td",J({className:"button media--1000"},{children:[ee&&0!==F.length&&(0,r.jsx)(L,{paraId:S}),Y&&(0,r.jsx)(o.cA,{accountId:x,className:"media--1400",icon:"times",isDisabled:!($||X),label:I(k?"Close":"Cancel"),params:[S],tx:P.tx.crowdloan.dissolve}),u&&K&&(0,r.jsx)(B,{cap:f,needsSignature:w.isSome,paraId:S,raised:y}),u&&ne&&(0,r.jsxs)("div",{children:[(0,r.jsx)("a",J({href:ne,rel:"noopener noreferrer",target:"_blank"},{children:I("Homepage")})),"   "]})]}))]}))}));var Q=function(){return Q=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Q.apply(this,arguments)};function X(e,n){return null==n?void 0:n.sort((function(n,t){var r=n.key,a=t.key,s=e[r]||!1;return s===(e[a]||!1)?0:s?-1:1}))}const K=a.memo((function(e){var n=e.bestNumber,t=e.className,s=e.leasePeriod,i=e.value,l=(0,c.$)().t,u=(0,E.P)(),d=(0,a.useMemo)((function(){return function(e,n){var t=null==n?void 0:n.currentPeriod,r=null,a=null,s=null;return e&&t&&(r=e.filter((function(e){var n=e.firstSlot,r=e.isCapped,a=e.isEnded,s=e.isWinner;return!(r||a||s)&&t.lte(n)})),a=e.filter((function(e){var n=e.firstSlot,r=e.isCapped,a=e.isEnded,s=e.isWinner;return r||a||s||t.gt(n)})),s=e.map((function(e){return e.paraId}))),[r,a,s]}(i,s)}),[s,i]),m=d[0],h=d[1],p=d[2],f=(0,D.gW)(p),v=(0,a.useMemo)((function(){return[X(f,m),X(f,h)]}),[m,h,f]),x=v[0],g=v[1],b=(0,a.useRef)([[l("ongoing"),"start",2],[void 0,"media--800"],[void 0,"media--2000"],[l("ending"),"media--1200"],[l("leases")],[l("raised")],[l("count"),"media--1100"],[void 0,"media--1000"]]),j=(0,a.useRef)([[l("completed"),"start",2],[void 0,"media--800"],[void 0,"media--2000"],[l("ending"),"media--1200"],[l("leases")],[l("raised")],[l("count"),"media--1100"],[void 0,"media--1000"]]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Pd,{className:"warning centered",content:l('Do not transfer any funds directly to a specific account that is associated with a loan or a team. Use the "Contribute" action to record the contribution on-chain using the crowdloan runtime module. When the fund is dissolved, after either the parachain lease expires or the loan ending without winning, the full value will be returned to your account by the runtime. Funds sent directly to an account, without using the crowdloan functionality, may not be returned by the receiving account.')}),(0,r.jsx)(o.iA,Q({className:t,empty:i&&x&&l("No active campaigns found"),header:b.current},{children:null==x?void 0:x.map((function(e){return(0,r.jsx)(G,{bestHash:u,bestNumber:n,isOngoing:!0,value:e},e.accountId)}))})),(0,r.jsx)(o.iA,Q({className:t,empty:i&&g&&l("No completed campaigns found"),header:j.current},{children:null==g?void 0:g.map((function(e){return(0,r.jsx)(G,{bestNumber:n,leasePeriod:s,value:e},e.accountId)}))}))]})}));var Y=function(){return Y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Y.apply(this,arguments)};const ee=a.memo((function(e){var n=e.activeCap,t=e.activeRaised,a=e.className,s=e.fundCount,i=e.isLoading,l=e.totalCap,u=e.totalRaised,m=(0,c.$)().t;return(0,r.jsxs)(o.Ty,Y({className:a},{children:[(0,r.jsx)(o.Jy,Y({label:m("funds")},{children:void 0===s?(0,r.jsx)("span",Y({className:"--tmp"},{children:"99"})):(0,d.u)(s)})),(0,r.jsx)(o.Jy,Y({label:"".concat(m("active raised / cap")),progress:{hideValue:!0,isBlurred:i,total:i?b.Jo:n,value:i?b.um:t}},{children:(0,r.jsxs)("span",Y({className:i?"--tmp":""},{children:[(0,r.jsx)(O.Z,{value:t,withCurrency:!1,withSi:!0})," / ",(0,r.jsx)(O.Z,{value:n,withSi:!0})]}))})),(0,r.jsx)(o.Jy,Y({label:"".concat(m("total raised / cap")),progress:{hideValue:!0,isBlurred:i,total:i?b.Jo:l,value:i?b.um:u}},{children:(0,r.jsxs)("span",Y({className:i?"--tmp":""},{children:[(0,r.jsx)(O.Z,{value:u,withCurrency:!1,withSi:!0})," / ",(0,r.jsx)(O.Z,{value:l,withSi:!0})]}))}))]}))}));var ne=function(){return ne=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ne.apply(this,arguments)};const te=a.memo((function(e){var n=e.auctionInfo,t=e.campaigns,a=t.activeCap,s=t.activeRaised,i=t.funds,l=t.isLoading,c=t.totalCap,u=t.totalRaised,d=e.className,m=e.leasePeriod,h=e.ownedIds,p=(0,x.C)();return(0,r.jsxs)("div",ne({className:d},{children:[(0,r.jsx)(ee,{activeCap:a,activeRaised:s,fundCount:null==i?void 0:i.length,isLoading:l,totalCap:c,totalRaised:u}),(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(T,{auctionInfo:n,bestNumber:p,leasePeriod:m,ownedIds:h})}),(0,r.jsx)(K,{bestNumber:p,leasePeriod:m,value:i})]}))}));var re=t(99924);const ae=a.memo((function(e){var n=e.lifecycle,t=e.nextAction;return n&&(0,r.jsxs)(r.Fragment,{children:[n.toString(),t&&(0,r.jsx)(re.Z,{value:t.sessionIndex})]})}));var se=t(36198),oe={transform:function(e){return e.number.unwrap()}};const ie=(0,H.e)("useChainDetails",(function(e){var n=(0,se.x)(e).api;return{bestNumber:(0,l.W7)(null==n?void 0:n.rpc.chain.subscribeNewHeads,void 0,oe),runtimeVersion:(0,l.W7)(null==n?void 0:n.rpc.state.subscribeRuntimeVersion)}}));var le,ce,ue=function(){return ue=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ue.apply(this,arguments)},de=o.zo.div(he||(le=["\n  .version {\n    font-size: var(--font-size-small);\n    white-space: nowrap;\n\n    > div {\n      display: inline-block;\n      overflow: hidden;\n      max-width: 10em;\n      text-overflow: ellipsis;\n    }\n  }\n"],ce=["\n  .version {\n    font-size: var(--font-size-small);\n    white-space: nowrap;\n\n    > div {\n      display: inline-block;\n      overflow: hidden;\n      max-width: 10em;\n      text-overflow: ellipsis;\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(le,"raw",{value:ce}):le.raw=ce,he=le));const me=a.memo((function(e){var n=e.className,t=e.id,a=ie(t),s=a.bestNumber,o=a.runtimeVersion;return(0,r.jsxs)(de,ue({className:n},{children:[s&&(0,r.jsx)("div",{children:(0,d.u)(s)}),o&&(0,r.jsxs)("div",ue({className:"version"},{children:[(0,r.jsx)("div",ue({className:"media--1100"},{children:o.specName.toString()})),(0,r.jsx)("div",ue({className:"media--1100"},{children:"/"})),(0,r.jsx)("div",{children:o.specVersion.toString()})]}))]}))}));var he,pe=t(12372),fe=function(){return fe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},fe.apply(this,arguments)};const ve=a.memo((function(e){var n=e.children,t=e.className,s=e.leasePeriod,o=e.value,i=(0,a.useMemo)((function(){return function(e,n){return e&&n&&(0,pe.G)(n).sub(b.If).imul(e.length).iadd(e.remainder)}(s,o)}),[s,o]);return i?(0,r.jsx)(q.Z,fe({className:t,value:i},{children:n})):null}));var xe=function(){return xe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},xe.apply(this,arguments)};const ge=a.memo((function(e){var n=e.className,t=e.fromFirst,s=e.leasePeriod,o=e.periods,i=(0,a.useMemo)((function(){return function(e,n){return n&&e&&e.reduce((function(e,t){var r=n.addn(t);return!e.length||e[e.length-1][1].add(b.If).lt(r)?e.push([r,r]):e[e.length-1][1]=r,e}),[]).map((function(e){var n=e[0],t=e[1];return n.eq(t)?(0,d.u)(n):"".concat((0,d.u)(n)," - ").concat((0,d.u)(t))})).join(", ")}(o,null==s?void 0:s.currentPeriod)}),[null==s?void 0:s.currentPeriod,o]);return(0,r.jsxs)("div",xe({className:n},{children:[(0,r.jsx)("div",{children:i}),o&&(0,r.jsx)(ve,{leasePeriod:s,value:t?o[0]:o[o.length-1]+1})]}))}));var be=t(54890),je={defaultValue:{headHex:null,leases:[],lifecycle:null,paraInfo:null,pendingAvail:null,qDmp:0,qHrmpE:0,qHrmpI:0,qUmp:0,updateAt:null,watermark:null},transform:function(e){var n=e[0],t=e[1],r=e[2],a=e[3],s=e[4],o=e[5],i=e[6],l=e[7],c=e[8],u=e[9],d=e[10];return{headHex:n.isSome?n.unwrap().toHex():null,leases:d.map((function(e,n){return e.isSome?n:-1})).filter((function(e){return-1!==e})),lifecycle:r.unwrapOr(null),paraInfo:u.unwrapOr(null),pendingAvail:c.unwrapOr(null),qDmp:a.length,qHrmpE:o.length,qHrmpI:i.length,qUmp:s.length,updateAt:t.unwrapOr(null),watermark:l.unwrapOr(null)}}};const ye=(0,H.e)("useParaInfo",(function(e){var n,t,r,a,s,o,l=(0,i.h)().api;return(0,be.L)([[l.query.paras.heads,e],[l.query.paras.futureCodeUpgrades,e],[l.query.paras.paraLifecycles,e],[null===(n=l.query.parasDmp||l.query.paraDmp||l.query.dmp)||void 0===n?void 0:n.downwardMessageQueues,e],[null===(t=l.query.parasUmp||l.query.ump)||void 0===t?void 0:t.relayDispatchQueues,e],[null===(r=l.query.parasHrmp||l.query.paraHrmp||l.query.hrmp)||void 0===r?void 0:r.hrmpEgressChannelsIndex,e],[null===(a=l.query.parasHrmp||l.query.paraHrmp||l.query.hrmp)||void 0===a?void 0:a.hrmpIngressChannelsIndex,e],[null===(s=l.query.parasHrmp||l.query.paraHrmp||l.query.hrmp)||void 0===s?void 0:s.hrmpWatermarks,e],[null===(o=l.query.parasInclusion||l.query.paraInclusion||l.query.inclusion)||void 0===o?void 0:o.pendingAvailability,e],[l.query.registrar.paras,e],[l.query.slots.leases,e]],je)}));var we=function(){return we=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},we.apply(this,arguments)};function Ne(e,n){return null==e?void 0:e.map((function(e,t){return(0,r.jsx)(o.ax,{nameExtra:n&&(0,r.jsxs)(r.Fragment,{children:[" ","(".concat((0,d.u)(n[t]),")")]}),value:e},e.toString())}))}var ke=o.zo.tr(Ce||(Ce=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  &.isDisabled {\n    td {\n      opacity: 0.5\n    }\n  }\n\n  td.badge.together > div {\n    display: inline-block;\n    margin: 0 0.25rem 0 0;\n    vertical-align: middle;\n  }\n"],["\n  &.isDisabled {\n    td {\n      opacity: 0.5\n    }\n  }\n\n  td.badge.together > div {\n    display: inline-block;\n    margin: 0 0.25rem 0 0;\n    vertical-align: middle;\n  }\n"])));const Oe=a.memo((function(e){var n,t,s,i,l=e.bestNumber,u=e.className,m=void 0===u?"":u,h=e.id,p=e.lastBacked,f=e.lastInclusion,v=e.lastTimeout,x=e.leasePeriod,g=e.nextAction,b=e.sessionValidators,j=e.validators,y=(0,c.$)().t,w=ye(h),N=(0,a.useState)([]),k=N[0],O=N[1],C=(0,a.useMemo)((function(){return l&&(f?l.sub(f.blockNumber):w.watermark?l.sub(w.watermark):void 0)}),[l,f,w]),S=(0,a.useCallback)((function(){return Ne(j&&j[1].map((function(e){return e.validatorId})),j&&j[1].map((function(e){return e.indexValidator})))}),[j]),I=(0,a.useCallback)((function(){return Ne(k)}),[k]);return(0,a.useEffect)((function(){if(b)if(w.pendingAvail){var e=w.pendingAvail.availabilityVotes.toHuman().slice(2).replace(/_/g,"").split("").map((function(e,n){return"0"===e?b[n]:null})).filter((function(e,n){return!!e&&n<b.length}));e.length!==b.length&&O(e)}else O([])}),[w,b]),(0,r.jsxs)(ke,we({className:"".concat(m," ").concat(p||f||w.watermark?"":"isDisabled")},{children:[(0,r.jsx)(o.iA.Column.Id,{value:h}),(0,r.jsxs)("td",we({className:"badge together"},{children:[(null===(t=null===(n=w.paraInfo)||void 0===n?void 0:n.locked)||void 0===t?void 0:t.isFalse)?(0,r.jsx)(o.Ct,{color:"orange",icon:"unlock"}):(0,r.jsx)(o.Ct,{color:"transparent"}),(0,r.jsx)(o.f,{id:h})]})),(0,r.jsxs)("td",we({className:"number media--1400"},{children:[(0,r.jsx)(o.xH,{className:j?"":"--tmp",renderChildren:S,summary:y("Val. Group {{group}} ({{count}})",{replace:{count:(0,d.u)((null===(s=null==j?void 0:j[1])||void 0===s?void 0:s.length)||0),group:j?j[0]:0}})}),(0,r.jsx)(o.xH,{renderChildren:I,summary:y("Non-voters ({{count}})",{replace:{count:(0,d.u)(k.length)}})})]})),(0,r.jsx)("td",we({className:"start together hash media--1500"},{children:(0,r.jsx)("div",we({className:"shortHash"},{children:w.headHex}))})),(0,r.jsx)("td",we({className:"start"},{children:w.updateAt&&l&&(null===(i=w.lifecycle)||void 0===i?void 0:i.isParachain)?(0,r.jsxs)(r.Fragment,{children:[y("Upgrading"),(0,r.jsx)(q.Z,{value:w.updateAt.sub(l)}),"#",(0,d.u)(w.updateAt)]}):(0,r.jsx)(ae,{lifecycle:w.lifecycle,nextAction:g})})),(0,r.jsx)("td",{className:"all"}),(0,r.jsx)("td",we({className:"number"},{children:C&&(0,r.jsx)(q.Z,{value:C})})),(0,r.jsx)("td",we({className:"number no-pad-left"},{children:f?(0,r.jsx)("a",we({href:"#/explorer/query/".concat(f.blockHash)},{children:(0,d.u)(f.blockNumber)})):w.watermark&&(0,d.u)(w.watermark)})),(0,r.jsx)("td",we({className:"number no-pad-left media--900"},{children:p&&(0,r.jsx)("a",we({href:"#/explorer/query/".concat(p.blockHash)},{children:(0,d.u)(p.blockNumber)}))})),(0,r.jsx)("td",we({className:"number no-pad-left media--1600"},{children:v&&(0,r.jsx)("a",we({href:"#/explorer/query/".concat(v.blockHash)},{children:(0,d.u)(v.blockNumber)}))})),(0,r.jsx)("td",we({className:"number no-pad-left"},{children:(0,r.jsx)(me,{id:h})})),(0,r.jsx)("td",we({className:"number media--1700"},{children:(0,d.u)(w.qHrmpI)})),(0,r.jsx)("td",we({className:"number no-pad-left media--1700"},{children:(0,d.u)(w.qHrmpE)})),(0,r.jsx)("td",we({className:"number together media--1100"},{children:(0,r.jsx)(ge,{leasePeriod:x,periods:w.leases})}))]}))}));var Ce,Se=t(11147),Ie=function(){return Ie=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ie.apply(this,arguments)},Pe={lastBacked:{},lastIncluded:{},lastTimeout:{}};function Ae(e,n,t,r){try{var a=n.data[0].descriptor;a&&a.paraId&&(e[a.paraId.toString()]={blockHash:t,blockNumber:r,relayParent:a.relayParent.toHex()})}catch(e){throw new Error("".concat(n.section,".").concat(n.method,"(").concat((0,Se.P)(n.data),"):: ").concat(e.message))}}const Me=(0,H.e)("useEvents",(function(){var e=(0,i.h)().api,n=(0,l.W7)(e.derive.chain.subscribeNewBlocks),t=(0,a.useState)(Pe),r=t[0],s=t[1];return(0,a.useEffect)((function(){n&&s((function(t){return function(e,n,t){var r={},a={},s={},o=n.block.header.number.unwrap(),i=n.block.header.hash.toHex(),l=e.events.paraInclusion||e.events.parasInclusion||e.events.inclusion,c=!1,u=!1,d=!1;return l&&n.events.forEach((function(e){var n=e.event;e.phase.isApplyExtrinsic&&(l.CandidateBacked.is(n)?(Ae(r,n,i,o),c=!0):l.CandidateIncluded.is(n)?(Ae(a,n,i,o),u=!0):l.CandidateTimedOut.is(n)&&(Ae(s,n,i,o),d=!0))})),c||u||d?{lastBacked:c?Ie(Ie({},t.lastBacked),r):t.lastBacked,lastIncluded:u?Ie(Ie({},t.lastIncluded),a):t.lastIncluded,lastTimeout:d?Ie(Ie({},t.lastTimeout),s):t.lastTimeout}:t}(e,n,t)}))}),[e,n]),r}));var Te=function(){return Te=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Te.apply(this,arguments)},Ee={defaultValue:[null,null,null,null]};const De=(0,H.e)("useValidators",(function(e){var n,t,r,s=(0,i.h)().api,o=(0,be.L)([s.query.session.validators,null===(n=s.query.parasScheduler||s.query.paraScheduler||s.query.scheduler)||void 0===n?void 0:n.scheduled,null===(t=s.query.parasScheduler||s.query.paraScheduler||s.query.scheduler)||void 0===t?void 0:t.validatorGroups,null===(r=s.query.parasShared||s.query.paraShared||s.query.shared)||void 0===r?void 0:r.activeValidatorIndices],Ee),l=o[0],c=o[1],u=o[2],d=o[3],m=(0,a.useState)({}),h=m[0],p=m[1];return(0,a.useEffect)((function(){u&&e&&d&&c&&l&&p((function(n){return function(e,n,t,r,a,s){return n.reduce((function(e,n){var o,i=s.find((function(e){var t=e.paraId;return t&&t.eq(n)}));return i?Te(Te({},e),((o={})[n.toString()]=[i.groupIdx,(r[i.groupIdx.toNumber()]||[]).map((function(e){return[e,a[e.toNumber()]]})).filter((function(e){return e[1]})).map((function(e){var n=e[0],r=e[1];return{indexActive:n,indexValidator:r,validatorId:t[r.toNumber()]}}))],o)):e}),Te({},e))}(n,e,l,u,d,c)}))}),[u,e,d,c,l]),(0,a.useMemo)((function(){return[l,h]}),[h,l])}));var qe=function(){return qe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},qe.apply(this,arguments)};const Fe=a.memo((function(e){var n=e.actionsQueue,t=e.ids,s=e.leasePeriod,i=e.scheduled,l=(0,c.$)().t,u=(0,x.C)(),d=Me(),m=d.lastBacked,h=d.lastIncluded,p=d.lastTimeout,f=(0,D.gW)(t),v=De(t),g=v[0],b=v[1],j=(0,a.useRef)([[l("parachains"),"start",2],["","media--1400"],[l("head"),"start media--1500"],[l("lifecycle"),"start"],[],[l("included"),void 0,2],[l("backed"),"no-pad-left media--900"],[l("timeout"),"no-pad-left media--1600"],[l("chain"),"no-pad-left"],[l("in/out"),"media--1700",2],[l("leases"),"media--1100"]]),y=(0,a.useMemo)((function(){return function(e){return void 0===e&&(e=[]),e.reduce((function(e,n){return n.scheduledIds.reduce((function(e,n){var t;return qe(qe({},e),((t={})[n.toString()]=!0,t))}),e)}),{})}(i)}),[i]),w=(0,a.useMemo)((function(){return t&&function(e,n){return n.map((function(e){return[e,e.toString()]})).sort((function(n,t){var r=n[0],a=n[1],s=t[0],o=t[1],i=e[a]||!1;return i===(e[o]||!1)?r.cmp(s):i?-1:1}))}(f,t)}),[t,f]),N=(0,a.useMemo)((function(){return function(e,n){return void 0===n&&(n=[]),n.reduce((function(n,t){var r,a=t[0],s=t[1];return qe(qe({},n),((r={})[s]=e.find((function(e){return e.paraIds.some((function(e){return e.eq(a)}))})),r))}),{})}(n,w)}),[n,w]);return(0,r.jsx)(o.iA,qe({empty:w&&l("There are no registered parachains"),header:j.current},{children:null==w?void 0:w.map((function(e){var n=e[0],t=e[1];return(0,r.jsx)(Oe,{bestNumber:u,id:n,isScheduled:y[t],lastBacked:m[t],lastInclusion:h[t],lastTimeout:p[t],leasePeriod:s,nextAction:N[t],sessionValidators:g,validators:b[t]},t)}))}))}));var Ve=t(54705),Re=t(26839),_e=t(65968),Be=function(){return Be=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Be.apply(this,arguments)};const Ze=function(e){var n=e.leasePeriod,t=e.parachainCount,a=e.proposalCount,s=e.upcomingCount,i=(0,c.$)().t;return(0,r.jsxs)(o.Ty,{children:[(0,r.jsxs)("section",{children:[(0,r.jsx)(o.Jy,Be({label:i("parachains")},{children:(0,_e.h)(t)?(0,d.u)(t):(0,r.jsx)("span",Be({className:"--tmp"},{children:"99"}))})),(0,r.jsx)(o.Jy,Be({className:"media--1000",label:i("parathreads")},{children:(0,_e.h)(s)?(0,d.u)(s):(0,r.jsx)("span",Be({className:"--tmp"},{children:"99"}))})),(0,_e.h)(a)&&(0,r.jsx)(o.Jy,Be({className:"media--1000",label:i("proposals")},{children:(0,d.u)(a)}))]}),(0,r.jsxs)("section",{children:[(0,r.jsx)(o.Jy,Be({label:i("current lease")},{children:n?(0,d.u)(n.currentPeriod):(0,r.jsx)("span",Be({className:"--tmp"},{children:"99"}))})),(0,r.jsx)(o.Jy,{className:"media--1200",label:i("lease period"),progress:{isBlurred:!n,total:n?n.length:b.Jo,value:n?n.progress:b.um,withTime:!0}})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)(o.Jy,Be({label:i("finalized")},{children:(0,r.jsx)(Re.Z,{})})),(0,r.jsx)(Ve.Z,{className:"media--1200",withEra:!1})]})]})};var Le=function(){return Le=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Le.apply(this,arguments)};const He=a.memo((function(e){var n=e.actionsQueue,t=e.className,a=e.leasePeriod,s=e.paraIds,o=e.proposals,i=e.threadIds;return(0,r.jsxs)("div",Le({className:t},{children:[(0,r.jsx)(Ze,{leasePeriod:a,parachainCount:null==s?void 0:s.length,proposalCount:null==o?void 0:o.proposalIds.length,upcomingCount:null==i?void 0:i.length}),(0,r.jsx)(Fe,{actionsQueue:n,ids:s,leasePeriod:a,scheduled:null==o?void 0:o.scheduled})]}))}));var ze=t(48801),We=t.n(ze),$e=new(We())(2e3),Ue=$e.sub(b.If),Je=function(){return Je=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Je.apply(this,arguments)};const Ge=a.memo((function(e){var n=e.className,t=e.nextParaId,s=e.onClose,l=(0,c.$)().t,u=(0,i.h)().api,d=(0,a.useState)(null),m=d[0],h=d[1];return(0,r.jsxs)(o.u_,Je({className:n,header:l("Reserve ParaId"),onClose:s,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,Je({hint:l("This account will be used to the Id reservation and for the future parathread.")},{children:(0,r.jsx)(o.rp,{label:l("reserve from"),onChange:h,type:"account",value:m})})),(0,r.jsx)(o.u_.Columns,Je({hint:l("The Id of this parachain as known on the network (selected from nextFreeId)")},{children:(0,r.jsx)(o.Rn,{defaultValue:t,isDisabled:!0,label:l("parachain id")})})),(0,r.jsx)(o.u_.Columns,Je({hint:l("The reservation fee for this Id")},{children:(0,r.jsx)(o.H,{defaultValue:u.consts.registrar.paraDeposit,isDisabled:!0,label:l("reserved deposit")})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:m,icon:"plus",isDisabled:!t,onStart:s,params:[],tx:u.tx.registrar.reserve})})]}))}));var Qe=t(88311),Xe=function(){return Xe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Xe.apply(this,arguments)};const Ke=a.memo((function(e){var n=e.className,t=e.nextParaId,s=e.onClose,l=e.ownedIds,u=(0,c.$)().t,d=(0,i.h)().api,m=(0,a.useState)(null),h=m[0],p=m[1],f=(0,a.useState)(),v=f[0],x=f[1],g=(0,a.useState)(null),b=g[0],j=g[1],w=(0,a.useState)(null),N=w[0],k=w[1],O=(0,a.useCallback)((function(e){return k((0,Qe.N)(e))}),[]),C=(0,a.useCallback)((function(e){return j((0,Qe.N)(e))}),[]),S=(0,a.useCallback)((function(e){var n=e.accountId,t=e.paraId;p(n),x(new(We())(t))}),[]),I=(0,a.useMemo)((function(){return d.consts.registrar.paraDeposit.add(d.consts.registrar.dataDepositPerByte.muln(b?b.length:0)).iadd(d.consts.registrar.dataDepositPerByte.muln(N?N.length:0))}),[d,b,N]),P=!v||!v.gt(Ue);return(0,r.jsxs)(o.u_,Xe({className:n,header:u("Register parathread"),onClose:s,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[d.tx.registrar.reserve?(0,r.jsx)(y,{noCodeCheck:!0,onChange:S,ownedIds:l}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.u_.Columns,Xe({hint:u("This account will be associated with the parachain and pay the deposit.")},{children:(0,r.jsx)(o.rp,{label:u("register from"),onChange:p,type:"account",value:h})})),(0,r.jsx)(o.u_.Columns,Xe({hint:u("The id of this parachain as known on the network")},{children:(0,r.jsx)(o.Rn,{autoFocus:!0,defaultValue:t,isError:P,isZeroable:!1,label:u("parachain id"),onChange:x})}))]}),(0,r.jsx)(o.u_.Columns,Xe({hint:u("The WASM validation function for this parachain.")},{children:(0,r.jsx)(o.ht,{isError:!b,label:u("code"),onChange:C})})),(0,r.jsx)(o.u_.Columns,Xe({hint:u("The genesis state for this parachain.")},{children:(0,r.jsx)(o.ht,{isError:!N,label:u("initial state"),onChange:O})})),(0,r.jsx)(o.u_.Columns,Xe({hint:u("The reservation fee for this parachain, including base fee and per-byte fees")},{children:(0,r.jsx)(o.H,{defaultValue:I,isDisabled:!0,label:u("reserved deposit")})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:h,icon:"plus",isDisabled:!b||!N||P,onStart:s,params:[v,N,b],tx:d.tx.registrar.register})})]}))}));var Ye=function(){return Ye=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ye.apply(this,arguments)},en={transform:function(e){return e.isZero()?$e:e}};const nn=a.memo((function(e){var n=e.className,t=e.ownedIds,a=(0,c.$)().t,s=(0,i.h)().api,u=(0,g.O)(),d=u[0],m=u[1],h=(0,g.O)(),p=h[0],f=h[1],v=(0,l.W7)(s.query.registrar.nextFreeParaId,[],en);return(0,r.jsxs)(o.zx.Group,Ye({className:n},{children:[(0,r.jsx)(o.zx,{icon:"plus",isDisabled:!s.tx.registrar.reserve,label:a("ParaId"),onClick:f}),p&&(0,r.jsx)(Ge,{nextParaId:v,onClose:f}),(0,r.jsx)(o.zx,{icon:"plus",isDisabled:!!s.tx.registrar.reserve&&!t.length,label:a("ParaThread"),onClick:m}),d&&(0,r.jsx)(Ke,{nextParaId:v,onClose:m,ownedIds:t})]}))}));var tn={defaultValue:{headHex:null,lifecycle:null,manager:null},transform:function(e){var n=e[0],t=e[1],r=e[2],a=e[3];return{headHex:n.isSome?n.unwrap().toHex():t.isSome?t.unwrap().genesisHead.toHex():null,lifecycle:r.unwrapOr(null),manager:a.isSome?a.unwrap().manager:null}}};const rn=(0,H.e)("useThreadInfo",(function(e){var n=(0,i.h)().api;return(0,be.L)([[n.query.paras.heads,e],[n.query.paras.upcomingParasGenesis,e],[n.query.paras.paraLifecycles,e],[n.query.registrar.paras,e]],tn)}));var an=function(){return an=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},an.apply(this,arguments)};const sn=a.memo((function(e){var n=e.id,t=e.leasePeriod,s=e.leases,l=e.nextAction,u=(0,c.$)().t,d=(0,i.h)().api,m=(0,v.x)().isAccount,h=rn(n),p=h.headHex,f=h.lifecycle,x=h.manager,g=(0,a.useMemo)((function(){return(null==t?void 0:t.currentPeriod)&&s&&s.map((function(e){return e.period}))}),[null==t?void 0:t.currentPeriod,s]),b=m(null==x?void 0:x.toString());return(0,r.jsxs)("tr",{children:[(0,r.jsx)(o.iA.Column.Id,{value:n}),(0,r.jsx)("td",an({className:"badge"},{children:(0,r.jsx)(o.f,{id:n})})),(0,r.jsx)("td",an({className:"address media--2000"},{children:x&&(0,r.jsx)(o.N,{value:x})})),(0,r.jsx)("td",an({className:"start together hash media--1500"},{children:(0,r.jsx)("div",an({className:"shortHash"},{children:p}))})),(0,r.jsx)("td",an({className:"start"},{children:(0,r.jsx)(ae,{lifecycle:f,nextAction:l})})),(0,r.jsx)("td",{className:"all"}),(0,r.jsx)("td",{className:"number no-pad-left"}),(0,r.jsx)("td",an({className:"number together"},{children:t&&s&&g&&(s.length?(0,r.jsx)(ge,{fromFirst:!0,leasePeriod:t,periods:g}):u("None"))})),(0,r.jsx)("td",an({className:"button media--900"},{children:(0,r.jsx)(o.cA,{accountId:x,icon:"times",isDisabled:!b,label:u("Deregister"),params:[n],tx:d.tx.registrar.deregister})}))]})})),on=(0,H.e)("useParaMap",(function(e){var n=(0,i.h)().api,t=(0,D.gW)(e),r=(0,a.useCallback)((function(e){var n=e[0][0],r=e[1];return function(e,n,t){return n.reduce((function(e,n,r){return e.push([n,t[r].map((function(e,n){if(e.isNone)return null;var t=e.unwrap();return{accountId:t[0],balance:t[1],period:n}})).filter((function(e){return!!e}))]),e}),[]).sort((function(n,t){var r=n[0],a=n[1],s=t[0],o=t[1],i=e[r.toString()]||!1,l=e[s.toString()]||!1;return a.length&&o.length?a[0].period-o[0].period||r.cmp(s):a.length?-1:o.length?1:i===l?r.cmp(s):i?-1:1}))}(t,n,r)}),[t]);return(0,l.W7)(e&&n.query.slots.leases.multi,[e],{transform:r,withParamsTransform:!0})}));var ln=function(){return ln=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ln.apply(this,arguments)};const cn=a.memo((function(e){var n=e.actionsQueue,t=e.className,s=e.ids,i=e.leasePeriod,l=e.ownedIds,u=(0,c.$)().t,d=on(s),m=(0,a.useRef)([[u("parathreads"),"start",2],["","media--2000"],[u("head"),"start media--1500"],[u("lifecycle"),"start"],[],[],[u("leases")],["","media--900"]]);return(0,r.jsxs)("div",ln({className:t},{children:[(0,r.jsx)(nn,{ownedIds:l}),(0,r.jsx)(o.iA,ln({empty:i&&s&&(0===s.length||d)&&u("There are no available parathreads"),header:m.current},{children:i&&(null==d?void 0:d.map((function(e){var t=e[0],a=e[1];return(0,r.jsx)(sn,{id:t,leasePeriod:i,leases:a,nextAction:n.find((function(e){return e.paraIds.some((function(e){return e.eq(t)}))}))},t.toString())})))}))]}))}));var un=function(){return un=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},un.apply(this,arguments)},dn=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))};function mn(e){var n=e.address,t=e.index,s=e.setAddress,i=e.t,l=(0,a.useCallback)((function(e){return e&&s(t,e)}),[t,s]);return(0,r.jsx)(o.rp,{defaultValue:n,label:i("validator {{index}}",{replace:{index:t+1}}),onChange:l})}const hn=a.memo((function(e){var n,t=e.className,s=e.onClose,l=(0,c.$)().t,u=(0,i.h)().api,d=(0,a.useState)(null),m=d[0],h=d[1],p=(0,a.useState)(""),f=p[0],v=p[1],x=(0,a.useState)(),g=x[0],j=x[1],y=(0,a.useState)((function(){return b.D_.mul(b.aP.pow(new(We())(u.registry.chainDecimals[0])))})),w=y[0],N=y[1],k=(0,a.useState)([""]),O=k[0],C=k[1],S=(0,a.useState)({isWasmValid:!1,wasm:null}),I=S[0],P=I.isWasmValid,A=I.wasm,M=S[1],T=(0,a.useState)(null),E=T[0],D=T[1],q=(0,a.useCallback)((function(e){return D((0,Qe.N)(e))}),[]),F=(0,a.useCallback)((function(e,n){return M({isWasmValid:n,wasm:e})}),[]),V=(0,a.useCallback)((function(e,n){return C((function(t){return t.map((function(t,r){return r===e?n:t}))}))}),[]),R=(0,a.useCallback)((function(){return C((function(e){return dn(dn([],e,!0),[""],!1)}))}),[]),_=(0,a.useCallback)((function(){return C((function(e){return dn([],e.slice(0,e.length-1),!0)}))}),[]),B=f.length>=3,Z=O.some((function(e,n){return O.some((function(t,r){return n!==r&&e===t}))}));return(0,r.jsxs)(o.u_,un({className:t,header:l("Propose parachain"),onClose:s,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,un({hint:l("This account will be associated with the parachain and pay the deposit.")},{children:(0,r.jsx)(o.rp,{label:l("propose from"),onChange:h,type:"account",value:m})})),(0,r.jsxs)(o.u_.Columns,un({hint:l("The name for this parachain, the id and the allocated/requested balance.")},{children:[(0,r.jsx)(o.II,{autoFocus:!0,isError:!B,label:l("parachain name"),onChange:v}),(0,r.jsx)(o.Rn,{isZeroable:!1,label:l("requested id"),onChange:j}),(0,r.jsx)(o.H,{defaultValue:w,label:l("initial balance"),onChange:N})]})),(0,r.jsxs)(o.u_.Columns,un({hint:l("The WASM validation function as well as the genesis state for this parachain.")},{children:[(0,r.jsx)(o.RF,{isError:!P,label:l("validation code"),onChange:F,placeholder:A&&!P&&l("The code is not recognized as being in valid WASM format")}),(0,r.jsx)(o.ht,{isError:!E,label:l("genesis state"),onChange:q})]})),(0,r.jsxs)(o.u_.Columns,un({hint:l("The validators for this parachain. At least one is required and where multiple is supplied, they need to be unique.")},{children:[O.map((function(e,n){return(0,r.jsx)(mn,{address:e,index:n,setAddress:V,t:l},n)})),!O.length&&(0,r.jsx)(o.Pd,{content:l("You need to supply at last one running validator for your parachain alongside this request.")}),Z&&(0,r.jsx)(o.Pd,{content:l("You have duplicated validator entries, ensure each is unique.")}),(0,r.jsxs)(o.zx.Group,{children:[(0,r.jsx)(o.zx,{icon:"plus",label:l("Add validator"),onClick:R}),(0,r.jsx)(o.zx,{icon:"minus",isDisabled:0===O.length,label:l("Remove validator"),onClick:_})]})]}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:m,icon:"plus",isDisabled:!(P&&E&&B&&O.length&&(null==g?void 0:g.gt(b.nw))),onStart:s,params:[g,f,A,E,O,w],tx:null===(n=u.tx.proposeParachain)||void 0===n?void 0:n.proposeParachain})})]}))})),pn=a.memo((function(){var e=(0,c.$)().t,n=(0,v.x)().hasAccounts,t=(0,g.O)(),a=t[0],s=t[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(o.zx,{icon:"plus",isDisabled:!n,label:e("Propose"),onClick:s})}),a&&(0,r.jsx)(hn,{onClose:s})]})}));var fn=t(74421);const vn=(0,H.e)("useProposal",(function(e,n,t){var r=(0,i.h)().api,s=(0,l.W7)(r.query.proposeParachain.proposals,[e]);return(0,a.useMemo)((function(){return{id:e,isApproved:n.some((function(n){return n.eq(e)})),isScheduled:t.some((function(n){return n.scheduledIds.some((function(n){return n.eq(e)}))})),proposal:s&&s.isSome?s.unwrap():void 0}}),[n,e,s,t])}));var xn=function(){return xn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},xn.apply(this,arguments)};const gn=a.memo((function(e){var n,t,s,l,u=e.approvedIds,m=e.id,h=e.scheduled,p=(0,c.$)().t,f=(0,i.h)().api,x=(0,v.x)().allAccounts,g=(0,fn.p)(),b=g.hasSudoKey,j=g.sudoKey,y=vn(m,u,h),w=(0,a.useMemo)((function(){return f.tx.sudo&&b?f.tx.sudo.sudo(f.tx.proposeParachain.cancelProposal(m)):x.some((function(e){var n;return null===(n=y.proposal)||void 0===n?void 0:n.proposer.eq(e)}))?f.tx.proposeParachain.cancelProposal(m):null}),[f,x,b,m,y]),N=(0,a.useMemo)((function(){return f.tx.sudo&&f.tx.sudo.sudo(f.tx.proposeParachain.approveProposal(m))}),[f,m]),k=(0,a.useMemo)((function(){return(null==y?void 0:y.proposal)&&function(e,n){void 0===n&&(n=6);var t=e.toHex();return t.length>2*n+2?"".concat(t.slice(0,n+2),"…").concat(t.slice(-n)):"0x"===t?"":t}(y.proposal.genesisHead)}),[y]),C=(0,a.useCallback)((function(){var e;return null===(e=y.proposal)||void 0===e?void 0:e.validators.map((function(e){return(0,r.jsx)(o.ax,{value:e},e.toString())}))}),[y.proposal]);return(0,r.jsxs)("tr",{children:[(0,r.jsx)(o.iA.Column.Id,{value:m}),(0,r.jsx)("td",xn({className:"badge together"},{children:(y.isApproved||y.isScheduled)&&(0,r.jsx)(o.Ct,{color:"green",icon:y.isScheduled?"clock":"check"})})),(0,r.jsx)("td",xn({className:"badge"},{children:(0,r.jsx)(o.f,{id:m})})),(0,r.jsx)("td",xn({className:"start together"},{children:null===(n=y.proposal)||void 0===n?void 0:n.name.toUtf8()})),(0,r.jsx)("td",xn({className:"address"},{children:(null===(t=y.proposal)||void 0===t?void 0:t.validators)&&(0,r.jsx)(o.xH,{renderChildren:C,summary:p("Validators ({{count}})",{replace:{count:(0,d.u)(null===(s=y.proposal)||void 0===s?void 0:s.validators.length)}})})})),(0,r.jsx)("td",xn({className:"address"},{children:y.proposal&&(0,r.jsx)(o.N,{value:y.proposal.proposer})})),(0,r.jsx)("td",xn({className:"number media--1100"},{children:y.proposal&&(0,r.jsx)(O.Z,{value:y.proposal.balance})})),(0,r.jsx)("td",xn({className:"start hash together all"},{children:k})),(0,r.jsx)("td",xn({className:"button"},{children:!(y.isApproved||y.isScheduled)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.cA,{accountId:j,className:"media--800",extrinsic:N,icon:"check",isDisabled:!b,label:p("Approve")}),(0,r.jsx)(o.cA,{accountId:b?j:null===(l=y.proposal)||void 0===l?void 0:l.proposer,className:"media--1100",extrinsic:w,icon:"ban",isDisabled:!b||!y.proposal,label:p("Cancel")})]})}))]})}));var bn=function(){return bn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},bn.apply(this,arguments)};const jn=a.memo((function(e){var n=e.proposals,t=(0,c.$)().t,s=(0,a.useMemo)((function(){return n&&n.proposalIds.sort((function(e,n){return e.cmp(n)}))}),[n]),i=(0,a.useRef)([[t("proposals"),"start",3],[],[],[t("proposer"),"address"],[t("balance"),"media--1100"],[t("initial state"),"start media--1400"],[]]);return(0,r.jsx)(o.iA,bn({empty:n&&s&&t("There are no pending proposals"),header:i.current},{children:n&&(null==s?void 0:s.map((function(e){return(0,r.jsx)(gn,{approvedIds:n.approvedIds,id:e,scheduled:n.scheduled},e.toString())})))}))}));var yn=function(){return yn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},yn.apply(this,arguments)};const wn=a.memo((function(e){var n=e.className,t=e.proposals;return(0,r.jsxs)("div",yn({className:n},{children:[(0,r.jsx)(pn,{}),(0,r.jsx)(jn,{proposals:t})]}))}));var Nn=[b.If,b.um,b.Jo,b.bX,b.nr,b.Ln,b.wJ,b.ru,b.xZ,b.aP],kn={withParams:!0};const On=(0,H.e)("useActionsQueue",(function(){var e=(0,i.h)().api,n=(0,l.W7)(e.query.session.currentIndex),t=(0,a.useMemo)((function(){return n&&Nn.map((function(e){return n.add(e)}))}),[n]),r=(0,l.W7)(t&&e.query.paras.actionsQueue.multi,[t],kn);return(0,a.useMemo)((function(){return r?r[0][0].map((function(e,n){return{paraIds:r[1][n],sessionIndex:e}})).filter((function(e){return e.paraIds.length})):[]}),[r])}));var Cn={transform:function(e){var n=e[0],t=e[1].unwrapOr([null,null]),r=t[0];return{endBlock:t[1],leasePeriod:r,numAuctions:n}}};const Sn=(0,H.e)("useAuctionInfo",(function(){var e,n,t=(0,i.h)().api;return(0,be.L)([null===(e=t.query.auctions)||void 0===e?void 0:e.auctionCounter,null===(n=t.query.auctions)||void 0===n?void 0:n.auctionInfo],Cn)}));var In=t(74065),Pn=t(24305),An=t(12298),Mn=t(51330),Tn=t(65417),En=(0,t(64021).d)("modlpy/cfund"),Dn={activeCap:b.nw,activeRaised:b.nw,funds:null,isLoading:!0,totalCap:b.nw,totalRaised:b.nw},qn=new Uint8Array(32);function Fn(e,n){return n.some((function(n){return n.eq(e)}))}function Vn(e,n){return e.isWinner!==n.isWinner?e.isWinner?-1:1:e.isCapped!==n.isCapped?e.isCapped?-1:1:e.isEnded!==n.isEnded?e.isEnded?1:-1:0}var Rn={transform:function(e){var n=e[0][0],t=e[1];return n.map((function(e,n){return[e,t[n].unwrapOr(null)]})).filter((function(e){return!!e[1]})).map((function(e){var n,t=e[0],r=e[1];return{accountId:(0,z.m)((n=t,(0,Mn.e)(En,n.toU8a(),qn).subarray(0,32))),firstSlot:r.firstPeriod,info:r,isCrowdloan:!0,key:t.toString(),lastSlot:r.lastPeriod,paraId:t,value:r.raised}})).sort((function(e,n){return e.info.end.cmp(n.info.end)||e.info.firstPeriod.cmp(n.info.firstPeriod)||e.info.lastPeriod.cmp(n.info.lastPeriod)||e.paraId.cmp(n.paraId)}))},withParamsTransform:!0},_n={transform:function(e){var n=e[0][0],t=e[1];return n.filter((function(e,n){return 0!==t[n].map((function(e){return e.unwrapOr(null)})).filter((function(e){return!!e})).filter((function(e){return n=e[0],(0,Tn.S)(n.slice(0,En.length),En);var n})).length}))},withParamsTransform:!0},Bn={transform:function(e){return e.map((function(e){return e.args[0]}))}};const Zn=(0,H.e)("useFunds",(function(){var e,n,t,r=(0,i.h)().api,s=(0,x.C)(),o=(0,In.X)(),c=(0,Pn.b)([null===(e=r.events.crowdloan)||void 0===e?void 0:e.Created]),u=(0,An.k)(null===(n=r.query.crowdloan)||void 0===n?void 0:n.funds,[],Bn,c.blockHash),d=(0,l.W7)(null===(t=r.query.crowdloan)||void 0===t?void 0:t.funds.multi,[u],Rn),m=(0,l.W7)(r.query.slots.leases.multi,[u],_n),h=(0,a.useState)(Dn),p=h[0],f=h[1];return(0,a.useEffect)((function(){o.current&&s&&d&&m&&f((function(e){return function(e,n,t,r,a){var s=t.reduce((function(n,t){var r=n[0],a=n[1],s=n[2],o=n[3],i=t.info,l=i.cap,c=i.end,u=i.raised,d=t.isWinner;return[e.gt(c)||d?r:r.iadd(u),e.gt(c)||d?a:a.iadd(l),s.iadd(u),o.iadd(l)]}),[new(We())(0),new(We())(0),new(We())(0),new(We())(0)]),o=s[0],i=s[1],l=s[2],c=s[3],u=!a.activeCap.eq(i),d=!a.activeRaised.eq(o),m=!a.totalCap.eq(c),h=!a.totalRaised.eq(l),p=!a.funds||a.funds.length!==t.length||u||d||m||h||t.some((function(t){return function(e,n,t,r,a){var s,o=t.info,i=o.cap,l=o.end,c=o.raised,u=t.paraId,d=null===(s=a.funds)||void 0===s?void 0:s.find((function(e){return e.paraId.eq(u)}));return!d||!d.isEnded&&e.gt(l)||!d.isCapped&&i.sub(c).lt(n)||!d.isWinner&&Fn(u,r)}(e,n,t,r,a)}));return p?{activeCap:u?i:a.activeCap,activeRaised:d?o:a.activeRaised,funds:t.map((function(t){return function(e,n,t,r){return t.isCapped=t.info.cap.sub(t.info.raised).lt(n),t.isEnded=e.gt(t.info.end),t.isWinner=Fn(t.paraId,r),t}(e,n,t,r)})).sort(Vn),totalCap:m?c:a.totalCap,totalRaised:h?l:a.totalRaised}:a}(s,r.consts.crowdloan.minContribution,d,m,e)}))}),[r,s,d,m,o]),p})),Ln=(0,H.e)("useLeasePeriod",(function(){var e=(0,i.h)().api,n=(0,x.C)();return(0,a.useMemo)((function(){if(e.consts.slots.leasePeriod&&n){var t=e.consts.slots.leasePeriod,r=n.sub(e.consts.slots.leaseOffset||b.nw),a=r.mod(t);return{currentPeriod:r.div(t),length:t,progress:a,remainder:t.sub(a)}}}),[e,n])}));var Hn=t(51240),zn=function(){return zn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},zn.apply(this,arguments)},Wn={transform:function(e){var n=e.map((function(e){var n=e[0].args[0],t=e[1];if(t.isNone)return null;var r=t.unwrap();return{manager:r.manager.toString(),paraId:n,paraInfo:r}})).filter((function(e){return!!e}));return{ids:n.map((function(e){return e.paraId})),owned:n}}},$n={transform:function(e){var n=e[0][0],t=e[1];return n.map((function(e,n){return{hash:t[n].unwrapOr(null),paraId:e}}))},withParamsTransform:!0};const Un=(0,H.e)("useOwnedIds",(function(){var e=(0,i.h)().api,n=(0,v.x)().allAccounts,t=(0,Pn.b)([e.events.registrar.Registered,e.events.registrar.Reserved]),r=(0,Hn.t)(e.query.registrar.paras,[],Wn,t.blockHash),s=(0,l.W7)(e.query.paras.currentCodeHash.multi,[r?r.ids:[]],$n);return(0,a.useMemo)((function(){return r&&s?r.owned.filter((function(e){return n.some((function(n){return n===e.manager}))})).map((function(e){return zn(zn({},e),{hasCode:s.some((function(n){return!!n.hash&&n.paraId.eq(e.paraId)}))})})):[]}),[n,s,r])}));var Jn={defaultValue:[void 0,void 0]},Gn={transform:function(e){return e.map((function(e){return e.args[0]}))}},Qn={transform:function(e){return e.map((function(e){var n=e[0].args[0];return{scheduledIds:e[1],sessionIndex:n}}))}};const Xn=(0,H.e)("useProposals",(function(){var e,n,t,r,s=(0,i.h)().api,o=(0,In.X)(),l=(0,Pn.b)([null===(e=s.events.proposeParachain)||void 0===e?void 0:e.ProposeParachain]),c=(0,An.k)(null===(n=s.query.proposeParachain)||void 0===n?void 0:n.proposals,[],Gn,l.blockHash),u=(0,Hn.t)(null===(t=s.query.proposeParachain)||void 0===t?void 0:t.scheduledProposals,[],Qn,l.blockHash),d=(0,be.L)([s.query.session.currentIndex,null===(r=s.query.proposeParachain)||void 0===r?void 0:r.approvedProposals],Jn),m=d[0],h=d[1];return(0,a.useMemo)((function(){return h&&m&&c&&u&&o.current?{approvedIds:h,proposalIds:c,scheduled:u.filter((function(e){return e.sessionIndex.gt(m)}))}:void 0}),[h,o,c,m,u])}));var Kn={transform:function(e){return e.map((function(e){var n=e[0].args[0],t=e[1].unwrapOr(null);return t&&(t.isParathread||t.isUpgradingParathread||t.isOffboardingParathread||t.isOnboarding)?n:null})).filter((function(e){return!!e})).sort((function(e,n){return e.cmp(n)}))}};const Yn=(0,H.e)("useUpomingIds",(function(){var e=(0,i.h)().api,n=(0,Pn.b)([e.events.session.NewSession,e.events.registrar.Registered]);return(0,Hn.t)(e.query.paras.paraLifecycles,[],Kn,n.blockHash)}));var et=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},nt=[0];function tt(e,n){return JSON.stringify({w:e})!==JSON.stringify({w:n})}function rt(e,n,t){return t.isNone?[]:t.unwrap().reduce((function(t,r,a){if(r.isSome){var s=r.unwrap(),o=s[0],i=s[1],l=s[2],c=n.leasePeriod||b.nw,u=e[a],d=u[0],m=u[1];t.push({accountId:o.toString(),firstSlot:c.addn(d),isCrowdloan:(0,Tn.S)(En,o.subarray(0,En.length)),key:i.toString(),lastSlot:c.addn(m),paraId:i,value:l})}return t}),[])}function at(e,n,t){var r=e.endBlock;return{blockNumber:r&&n?n.add(r):n||b.nw,blockOffset:n||b.nw,total:t.reduce((function(e,n){var t=n.value;return e.iadd(t)}),new(We())(0)),winners:t}}const st=(0,H.e)("useWinningData",(function(e){var n,t,r,s=(0,i.h)().api,o=(0,In.X)(),c=(0,u.E)(),d=(0,a.useState)(),m=d[0],h=d[1],p=(0,x.C)(),f=(0,Pn.b)([null===(n=s.events.auctions)||void 0===n?void 0:n.BidAccepted]),v=(0,a.useRef)(f),g=(0,l.W7)(null===(t=s.query.auctions)||void 0===t?void 0:t.winning.entries),j=(0,l.W7)(null===(r=s.query.auctions)||void 0===r?void 0:r.winning,nt);return(0,a.useEffect)((function(){o.current&&e&&g&&h(function(e,n,t){return t.sort((function(e,n){var t=e[0].args[0],r=n[0].args[0];return t.cmp(r)})).reduce((function(t,r){var a=r[0].args[0],s=r[1],o=rt(e,n,s);return o.length&&(0===t.length||tt(o,t[t.length-1].winners))&&t.push(at(n,a,o)),t}),[]).reverse()}(c,e,g))}),[e,g,o,c]),(0,a.useEffect)((function(){o.current&&e&&j&&h((function(n){return function(e,n,t,r){if(t&&t.length<=1){var a=t||[],s=at(n,null,rt(e,n,r));return s.winners.length?a.length?(a[a.length-1]=s,a.slice()):[s]:a}return t}(c,e,n,j)}))}),[e,j,o,c]),(0,a.useEffect)((function(){var n;if((null==e?void 0:e.endBlock)&&p&&p.gt(e.endBlock)&&v.current!==f){var t=p.sub(e.endBlock).iadd(b.If);v.current=f,null===(n=s.query.auctions)||void 0===n||n.winning(t).then((function(n){return o.current&&h((function(r){return function(e,n,t,r,a){var s,o,i=at(n,a,rt(e,n,r));if(i.winners.length){if(!t||!t.length)return[i];if(tt(i.winners,t[0].winners))return s=i.winners,o=t[0].winners,s.length!==o.length||s.some((function(e,n){var t=e.firstSlot,r=e.lastSlot;return!e.paraId.eq(o[n].paraId)||!t.eq(o[n].firstSlot)||!r.eq(o[n].lastSlot)}))?et([i],t,!0):(t[0]=i,et([],t,!0))}return t}(c,e,r,n,t)}))})).catch(console.error)}}),[s,p,e,o,c,f,v]),m}));var ot=function(){return ot=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ot.apply(this,arguments)};const it=a.memo((function(e){var n=e.basePath,t=e.className,u=(0,c.$)().t,d=(0,i.h)().api,m=(0,s.TH)().pathname,h=Sn(),p=Zn(),f=Ln(),v=Un(),x=st(h),g=Xn(),b=On(),j=Yn(),y=(0,l.W7)(d.query.paras.parachains),w=(0,a.useRef)([{isRoot:!0,name:"overview",text:u("Overview")},{name:"parathreads",text:u("Parathreads")},d.query.proposeParachain&&{name:"proposals",text:u("Proposals")},d.query.auctions&&{name:"auctions",text:u("Auctions")},d.query.crowdloan&&{name:"crowdloan",text:u("Crowdloan")}].filter((function(e){return!!e})));return(0,r.jsxs)("main",ot({className:t},{children:[(0,r.jsx)(o.mQ,{basePath:n,items:w.current}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,ot({path:"".concat(n,"/auctions")},{children:(0,r.jsx)(P,{auctionInfo:h,campaigns:p,ownedIds:v,winningData:x})})),(0,r.jsx)(s.AW,ot({path:"".concat(n,"/crowdloan")},{children:(0,r.jsx)(te,{auctionInfo:h,campaigns:p,leasePeriod:f,ownedIds:v})})),(0,r.jsx)(s.AW,ot({path:"".concat(n,"/proposals")},{children:(0,r.jsx)(wn,{proposals:g})}))]}),(0,r.jsx)(He,{actionsQueue:b,className:m===n?"":"--hidden",leasePeriod:f,paraIds:y,proposals:g,threadIds:j}),(0,r.jsx)(cn,{actionsQueue:b,className:m==="".concat(n,"/parathreads")?"":"--hidden",ids:j,leasePeriod:f,ownedIds:v})]}))}))},58464:(e,n,t)=>{t.d(n,{$:()=>a});var r=t(61349);function a(){return(0,r.$G)("app-parachains")}},31132:(e,n,t)=>{t.d(n,{E:()=>c,f:()=>u});var r=t(2784),a=t(90778),s=t(11677),o=t(48801),i=t.n(o),l=[[0,0],[0,1],[0,2],[0,3],[1,1],[1,2],[1,3],[2,2],[2,3],[3,3]],c=(0,s.e)("useLeaseRanges",(function(){var e=(0,a.h)().api;return(0,r.useMemo)((function(){var n;if(null===(n=e.consts.auctions)||void 0===n?void 0:n.leasePeriodsPerSlot){for(var t=[],r=0;e.consts.auctions.leasePeriodsPerSlot.gtn(r);r++)for(var a=r;e.consts.auctions.leasePeriodsPerSlot.gtn(a);a++)t.push([r,a]);return t}return l}),[e])})),u=(0,s.e)("useLeaseRangeMax",(function(){var e=c();return(0,r.useMemo)((function(){return new(i())(e[e.length-1][1])}),[e])}))},94349:(e,n,t)=>{t.d(n,{Z:()=>N});var r,a,s=t(52322),o=t(2784),i=t(61349),l=t(24732),c=t(90778),u=t(54383),d=t(54890),m=t(65874),h=t(58607),p=t(52107),f=t(95292),v=t(48801),x=t.n(v),g=t(92730),b=t(14681),j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},j.apply(this,arguments)},y={defaultValue:[void 0,void 0]},w=l.zo.main(k||(r=["\n  .pollActions {\n    opacity: 0.75;\n  }\n\n  .pollAll {\n    margin-bottom: 0;\n    padding: 0.75rem 1rem;\n    text-align: center;\n  }\n\n  .pollBlocksRight {\n    position: absolute;\n    right: 0;\n    text-align: right;\n    opacity: 0.75;\n    bottom: 0;\n\n    > div {\n      display: inline-block;\n      padding: 0 0.75rem;\n\n      &+div {\n        border-left: 1px solid #bbb;\n      }\n    }\n  }\n\n  .pollContainer {\n    margin: 2rem auto;\n    max-width: 60rem;\n  }\n\n  .pollHeader {\n    position: relative;\n  }\n\n  .options {\n    margin: 1rem 0;\n\n    .ui--Columar {\n      margin: 0 -1.25rem;\n      padding: 0 1.25rem;\n\n      &:nth-child(odd) {\n        background: #f9f8f7;\n      }\n\n      .ui--Column {\n        padding: 1rem 1.5rem;\n      }\n    }\n\n    .optionName {\n      font-size: 1.2rem;\n      font-weight: var(--font-weight-normal);\n      line-height: 1;\n      margin-bottom: 0.75rem;\n    }\n\n    .pollToggle {\n      margin-top: 0.5rem;\n      text-align: right;\n    }\n\n    &:not(.canVote) {\n      .ui--Toggle {\n        opacity: 0;\n\n        .toggle {\n          display: none;\n        }\n      }\n    }\n  }\n\n  .result {\n    align-items: center;\n    display: flex;\n    justify-content: flex-end;\n    margin: 0;\n    text-align: right;\n\n    .ui--FormatBalance {\n      font-size: 1.2rem;\n      font-weight: var(--font-weight-normal);\n      line-height: 1;\n    }\n\n    .ui--Progress {\n      margin: 0.75rem;\n    }\n  }\n"],a=["\n  .pollActions {\n    opacity: 0.75;\n  }\n\n  .pollAll {\n    margin-bottom: 0;\n    padding: 0.75rem 1rem;\n    text-align: center;\n  }\n\n  .pollBlocksRight {\n    position: absolute;\n    right: 0;\n    text-align: right;\n    opacity: 0.75;\n    bottom: 0;\n\n    > div {\n      display: inline-block;\n      padding: 0 0.75rem;\n\n      &+div {\n        border-left: 1px solid #bbb;\n      }\n    }\n  }\n\n  .pollContainer {\n    margin: 2rem auto;\n    max-width: 60rem;\n  }\n\n  .pollHeader {\n    position: relative;\n  }\n\n  .options {\n    margin: 1rem 0;\n\n    .ui--Columar {\n      margin: 0 -1.25rem;\n      padding: 0 1.25rem;\n\n      &:nth-child(odd) {\n        background: #f9f8f7;\n      }\n\n      .ui--Column {\n        padding: 1rem 1.5rem;\n      }\n    }\n\n    .optionName {\n      font-size: 1.2rem;\n      font-weight: var(--font-weight-normal);\n      line-height: 1;\n      margin-bottom: 0.75rem;\n    }\n\n    .pollToggle {\n      margin-top: 0.5rem;\n      text-align: right;\n    }\n\n    &:not(.canVote) {\n      .ui--Toggle {\n        opacity: 0;\n\n        .toggle {\n          display: none;\n        }\n      }\n    }\n  }\n\n  .result {\n    align-items: center;\n    display: flex;\n    justify-content: flex-end;\n    margin: 0;\n    text-align: right;\n\n    .ui--FormatBalance {\n      font-size: 1.2rem;\n      font-weight: var(--font-weight-normal);\n      line-height: 1;\n    }\n\n    .ui--Progress {\n      margin: 0.75rem;\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,k=r));const N=o.memo((function(e){var n,t=e.basePath,r=e.className,a=(0,i.$G)("app-poll").t,v=(0,c.h)().api,N=(0,u.C)(),k=(0,d.L)([null===(n=v.query.balances)||void 0===n?void 0:n.totalIssuance,v.query.poll.totals],y),O=k[0],C=k[1],S=(0,o.useState)(null),I=S[0],P=S[1],A=(0,o.useState)(null),M=A[0],T=A[1],E=(0,o.useState)(!1),D=E[0],q=E[1],F=(0,o.useState)(!1),V=F[0],R=F[1],_=(0,o.useState)(!1),B=_[0],Z=_[1],L=(0,o.useState)(!1),H=L[0],z=L[1],W=(0,o.useState)(),$=W[0],U=W[1],J=(0,o.useRef)([{isRoot:!0,name:"poll",text:a("Denomination poll")}]);if((0,o.useEffect)((function(){if(O&&C){var e=p.x.apply(void 0,function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}([f.If],C,!1));U(C.map((function(n){return n.mul(f.uy).div(e)}))),v.query.poll.voteOf.entries().then((function(e){var n=e.reduce((function(e,n){var t=n[1][1];return e.iadd(t)}),new(x())(0)),t=n.muln(1e4).div(O).toNumber()/100;T({percentage:t,voted:n})})).catch(console.log)}}),[v,O,C]),!C||!$||!N)return(0,s.jsx)("main",j({className:r},{children:(0,s.jsx)("div",j({className:"pollContainer"},{children:(0,s.jsx)(l.$j,{label:a("Retrieving totals...")})}))}));var G=v.consts.poll.end.sub(N),Q=G.gt(f.nw),X=[[a("No change"),a("No change from the original 2017 sale definitions; will mean a total of 10 million DOT from genesis."),D,q],[a("Split of 10x"),a("Split of 10x from the original sale; will mean a total of 100 million DOT from genesis. Apparent DOT price would be 10x lower and apparent account balances 10x higher."),V,R],[a("Split of 100x"),a("Split of 100x from the original sale; will mean a total of 1 billion DOT from genesis. Apparent DOT price would be 100x lower and apparent account balances 100x higher."),B,Z],[a("Split of 1000x"),a("Split of 1000x from the original sale; will mean a total of 10 billion DOT from genesis. Apparent DOT price would be 1000x lower and apparent account balances 1000x higher."),H,z]],K=D||V||B||H;return(0,s.jsxs)(w,j({className:r},{children:[(0,s.jsx)(l.mQ,{basePath:t,items:J.current}),(0,s.jsxs)("div",j({className:"pollContainer"},{children:[(0,s.jsxs)("div",j({className:"pollHeader"},{children:[(0,s.jsx)("h1",{children:a("denomination vote")}),(0,s.jsxs)("div",j({className:"pollBlocksRight"},{children:[M&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:a("{{balance}} voted",{replace:{balance:(0,g.a)(M.voted)}})}),(0,s.jsx)("div",{children:a("{{percentage}}% turnout",{replace:{percentage:M.percentage.toFixed(2)}})})]}),(0,s.jsxs)("div",{children:[Q?(0,s.jsx)(m.Z,{value:G}):a("Completed"),(0,s.jsxs)("div",{children:["#",(0,b.u)(v.consts.poll.end)]})]})]}))]})),(0,s.jsxs)("article",j({className:"keepAlive"},{children:[(0,s.jsx)("p",{children:(0,s.jsx)(i.cC,{children:"The Polkadot DOT denomination vote: Seventy-two hours after the DOT token becomes transferable, the most popular option from this poll will decide the denomination used for the DOT token."},"poll1")}),(0,s.jsx)("p",{children:(0,s.jsxs)(i.cC,{children:["This is an ",(0,s.jsx)("a",j({href:"https://en.wikipedia.org/wiki/Approval_voting",rel:"noreferrer",target:"_blank"},{children:"approval vote"})),". There are four options and you may select any combination of them. The most popular of the four will be selected as the final DOT denomination three days after DOT token transfers are enabled."]},"poll2")}),(0,s.jsx)("p",{children:(0,s.jsxs)(i.cC,{children:["Please see the ",(0,s.jsx)("a",j({href:"https://medium.com/polkadot-network/the-first-polkadot-vote-1fc1b8bd357b",rel:"noreferrer",target:"_blank"},{children:"Medium article "}))," for more information"]},"poll3")}),Q&&(0,s.jsx)("p",j({className:"pollAll"},{children:(0,s.jsx)(i.cC,{children:(0,s.jsx)("b",{children:"Please vote for any combination of options"})},"poll4")})),(0,s.jsx)("div",j({className:"options ".concat(Q?"canVote":"")},{children:X.map((function(e,n){var t=e[0],r=e[1],o=e[2],i=e[3];return(0,s.jsxs)(l.P0,j({is60:!0},{children:[(0,s.jsxs)(l.P0.Column,j({className:"option"},{children:[(0,s.jsx)("div",j({className:"optionName"},{children:t})),(0,s.jsx)("div",j({className:"optionDesc"},{children:r})),Q&&(0,s.jsx)(l.ZD,{className:"pollToggle",isDisabled:!Q,label:a(Q?o?"Aye, I support this":"Nay, I do not support this":"Voting closed"),onChange:i,value:Q&&o})]})),(0,s.jsx)(l.P0.Column,{children:C[n].isZero()?(0,s.jsx)("div",{className:"result"}):(0,s.jsxs)("div",j({className:"result"},{children:[(0,s.jsx)(h.Z,{value:C[n]}),(0,s.jsx)(l.Ex,{isDisabled:!M,total:null==M?void 0:M.voted,value:C[n]})]}))})]}),n)}))})),Q&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.rp,{label:a("vote using my account"),onChange:P,type:"account"}),(0,s.jsx)(l.zx.Group,{children:(0,s.jsx)(l.cA,{accountId:I,icon:"paper-plane",isDisabled:!K,label:a("Vote"),params:[[D,V,B,H]],tx:v.tx.poll.vote})})]})]})),(0,s.jsx)("div",j({className:"pollActions"},{children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:a("Any combination of the four options may be approved of by the voter. There is no need to select only one option!")}),(0,s.jsx)("li",{children:a("Approving of all or none of the options is equivalent and will not affect the outcome of the poll.")}),(0,s.jsx)("li",{children:a("All voters may alter their votes any number of times prior to the close of the poll.")}),(0,s.jsx)("li",{children:a("Voting costs nothing other than the transaction fee and can be done from all accounts with a non-zero spendable balance.")}),(0,s.jsx)("li",{children:a("Locked funds (e.g. for staking) are counted.")}),(0,s.jsx)("li",{children:a("No discretionary lock-voting is in place; all DOT used to vote counts the same.")}),(0,s.jsx)("li",{children:a("Voting is made on a per-account basis; a single account must all vote the same way and cannot split its vote.")}),(0,s.jsx)("li",{children:a('This vote does not affect any economics of the Polkadot platform. Staking rewards, inflation, effective market capitalisation and the underlying balances of every account remain completely unchanged. It is "merely" about what units we use to denominate the balances into "DOT" for the purpose of display.')})]})}))]}))]}))}));var k},77311:(e,n,t)=>{t.d(n,{Z:()=>x});var r=t(52322),a=t(2784),s=t(24732),o=t(38894),i=t(13940),l=t(52450),c=t(90778),u=t(95292),d=t(34323),m=function(){return m=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},m.apply(this,arguments)},h=(0,d.$)(""),p={encodedHash:h,encodedLength:0,encodedProposal:null,notePreimageTx:null,storageFee:u.nw};const f=a.memo((function(e){var n=e.className,t=e.onChange,o=(0,l.$)().t,i=(0,c.h)(),f=i.api,v=i.apiDefaultTxSudo,x=(0,a.useState)(p),g=x[0],b=g.encodedHash,j=g.encodedLength,y=g.storageFee,w=x[1],N=(0,a.useCallback)((function(e){w(e),t(e)}),[t]),k=(0,a.useCallback)((function(e){return N(function(e,n){var t,r,a=h,s=null,o=0,i=null,l=u.nw;return n&&(s=n.method.toHex(),o=Math.ceil((s.length-2)/2),a=(0,d.$)(s),i=e.tx.preimage.notePreimage(s),l=((null===(t=e.consts.preimage)||void 0===t?void 0:t.baseDeposit)||u.nw).add(((null===(r=e.consts.preimage)||void 0===r?void 0:r.byteDeposit)||u.nw).muln(o))),{encodedHash:a,encodedLength:o,encodedProposal:s,notePreimageTx:i,storageFee:l}}(f,e))}),[f,N]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.u_.Columns,m({className:n,hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:o("The image (proposal) will be stored on-chain against the hash of the contents.")}),(0,r.jsx)("p",{children:o("When submitting a proposal the hash needs to be known. Proposals can be submitted with hash-only, but upon dispatch the preimage needs to be available.")})]})},{children:[(0,r.jsx)(s.n6,{defaultValue:v,label:o("propose"),onChange:k}),(0,r.jsx)(s.qG,{label:o("preimage hash"),value:b,withCopy:!0}),(0,r.jsx)(s.qG,{label:o("preimage length"),value:j||"0",withCopy:!0})]})),!y.isZero()&&(0,r.jsx)(s.u_.Columns,m({className:n,hint:o("The calculated storage costs based on the base and the per-bytes fee.")},{children:(0,r.jsx)(s.H,{defaultValue:y,isDisabled:!0,label:o("calculated storage fee")})}))]})}));var v=function(){return v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},v.apply(this,arguments)};const x=a.memo((function(e){var n=e.className,t=e.imageHash,c=(0,l.$)().t,u=(0,o.O)(),d=u[0],m=u[1],h=(0,a.useState)(null),x=h[0],g=h[1],b=(0,a.useState)(p),j=b[0],y=j.encodedHash,w=j.notePreimageTx,N=b[1],k=!t||t===y;return(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsxs)(s.u_,v({className:n,header:c("Submit preimage"),onClose:m,size:"large"},{children:[(0,r.jsxs)(s.u_.Content,{children:[(0,r.jsx)(s.u_.Columns,v({hint:c("This account will pay the fees for the preimage, based on the size thereof.")},{children:(0,r.jsx)(s.rp,{label:c("send from account"),labelExtra:(0,r.jsx)(i.Z,{label:(0,r.jsx)("span",v({className:"label"},{children:c("transferrable")})),params:x}),onChange:g,type:"account"})})),(0,r.jsx)(f,{onChange:N})]}),(0,r.jsx)(s.u_.Actions,{children:(0,r.jsx)(s.cA,{accountId:x,extrinsic:w,icon:"plus",isDisabled:!x||!k||!w,label:c("Submit preimage"),onStart:m})})]})),(0,r.jsx)(s.zx,{icon:"plus",label:c("Add preimage"),onClick:m})]})}))},69338:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(52322),a=t(2784),s=t(24732),o=t(56949),i=t(52450),l=function(){return l=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},l.apply(this,arguments)};const c=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.value,c=(0,i.$)().t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",l({className:"".concat(t," all")},{children:a&&a.isCompleted?(0,r.jsxs)(r.Fragment,{children:[a.proposal&&(0,r.jsx)(s.Uv,{labelHash:c("call"),value:a.proposal}),a.proposalError?(0,r.jsx)(s.oy,{content:a.proposalError}):a.proposalWarning?(0,r.jsx)(s.Pd,{content:a.proposalWarning}):null]}):(0,r.jsx)("div",l({className:"--tmp"},{children:"balances.transfer"}))})),(0,r.jsx)("td",l({className:"address media--1300"},{children:a&&a.isCompleted?a.deposit?(0,r.jsx)(s.ax,{balance:a.deposit.amount,value:a.deposit.who,withBalance:!0}):null:(0,r.jsx)(s.ax,{className:"--tmp",value:o.TS})}))]})}))},74525:(e,n,t)=>{t.d(n,{Z:()=>u});var r,a,s=t(52322),o=t(2784),i=t(24732),l=function(){return l=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},l.apply(this,arguments)},c=i.zo.td(d||(r=["\n  white-space: nowrap;\n\n  > div {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  .shortHash {\n    + div {\n      margin-left: 0.5rem;\n    }\n  }\n"],a=["\n  white-space: nowrap;\n\n  > div {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  .shortHash {\n    + div {\n      margin-left: 0.5rem;\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,d=r));const u=o.memo((function(e){var n=e.className,t=void 0===n?"":n,r=e.value;return(0,s.jsxs)(c,l({className:"".concat(t," hash")},{children:[(0,s.jsx)("div",l({className:"shortHash"},{children:r})),(0,s.jsx)(i.qi,{value:r})]}))}));var d},20600:(e,n,t)=>{t.d(n,{Z:()=>E});var r=t(52322),a=t(2784),s=t(24732),o=t(52450),i=t(90778),l=t(12298),c=t(39824),u=t(11677),d=[],m={transform:function(e){return e.map((function(e){return e.args[0]}))}};function h(e){var n=[],t=[];return e.forEach((function(e){var r=e.event,a=r.data[0];"Noted"===r.method?n.push(a):t.push(a)})),{added:n,removed:t}}const p=(0,u.e)("usePreimages",(function(){var e=(0,i.h)().api,n=(0,l.k)(e.query.preimage.statusFor,d,m),t=(0,c.N)([e.events.preimage.Cleared,e.events.preimage.Noted],h,n);return(0,a.useMemo)((function(){return t&&t.map((function(e){return e.toHex()}))}),[t])}));var f=t(77311),v=t(31313),x=t(14681),g=t(69338),b=t(34814);const j=a.memo((function(e){var n=e.className,t=e.value,l=t.count,c=t.deposit,u=t.proposalHash,d=t.status,m=(0,o.$)().t,h=(0,i.h)().api,p=(0,b.x)().allAccounts;return(0,a.useMemo)((function(){return 0===l&&d&&d.isUnrequested&&c&&p.includes(c.who)}),[p,l,c,d])&&c?(0,r.jsx)(s.cA,{accountId:c.who,className:n,icon:"minus",label:m("Unnote"),params:[u],tx:h.tx.preimage.unnotePreimage}):null}));var y=t(74525),w=function(){return w=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},w.apply(this,arguments)};const N=a.memo((function(e){var n,t=e.className,a=e.value,s=(0,v.CH)(a);return(0,r.jsxs)("tr",w({className:t},{children:[(0,r.jsx)(y.Z,{value:a}),(0,r.jsx)(g.Z,{value:s}),(0,r.jsx)("td",w({className:"number media--1000"},{children:s&&s.proposalLength?(0,x.u)(s.proposalLength):(0,r.jsx)("span",w({className:"--tmp"},{children:"999,999"}))})),(0,r.jsx)("td",w({className:"preimageStatus together media--1200"},{children:s?(0,r.jsxs)(r.Fragment,{children:[s.status&&(0,r.jsxs)("div",{children:[null===(n=s.status)||void 0===n?void 0:n.type,0!==s.count&&(0,r.jsxs)(r.Fragment,{children:[" / ",(0,x.u)(s.count)]})]}),(0,r.jsx)(j,{value:s})]}):(0,r.jsx)("span",w({className:"--tmp"},{children:"Unrequested"}))}))]}))}));var k=function(){return k=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},k.apply(this,arguments)};const O=a.memo((function(e){var n=e.className,t=e.hashes,a=(0,o.$)().t;return(0,r.jsx)(s.Ty,k({className:n},{children:(0,r.jsx)(s.Jy,k({label:a("images")},{children:void 0===t?(0,r.jsx)("span",k({className:"--tmp"},{children:"99"})):(0,x.u)(t.length)}))}))}));var C,S,I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)},P=s.zo.div(M||(C=["\n  td.preimageStatus {\n    div+.ui--Button {\n      margin-top: 0.25rem;\n    }\n  }\n"],S=["\n  td.preimageStatus {\n    div+.ui--Button {\n      margin-top: 0.25rem;\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(C,"raw",{value:S}):C.raw=S,M=C));const A=a.memo((function(e){var n=e.className,t=(0,o.$)().t,i=p(),l=(0,a.useRef)([[t("preimages"),"start",2],[void 0,"media--1300"],[t("length"),"media--1000"],[t("status"),"start media--1200"]]);return(0,r.jsxs)(P,I({className:n},{children:[(0,r.jsx)(O,{hashes:i}),(0,r.jsx)(s.zx.Group,{children:(0,r.jsx)(f.Z,{})}),(0,r.jsx)(s.iA,I({className:n,empty:i&&t("No hashes found"),header:l.current},{children:i&&i.map((function(e){return(0,r.jsx)(N,{value:e},e)}))}))]}))}));var M,T=function(){return T=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},T.apply(this,arguments)};const E=a.memo((function(e){var n=e.basePath,t=e.className,i=(0,o.$)().t,l=(0,a.useRef)([{isRoot:!0,name:"overview",text:i("Overview")}]);return(0,r.jsxs)("main",T({className:t},{children:[(0,r.jsx)(s.mQ,{basePath:n,items:l.current}),(0,r.jsx)(A,{})]}))}))},52450:(e,n,t)=>{t.d(n,{$:()=>a});var r=t(61349);function a(){return(0,r.$G)("app-preimages")}},10257:(e,n,t)=>{t.d(n,{Z:()=>M});var r=t(52322),a=t(2784),s=t(7267),o=t(1398),i=t(99501),l=t(24732),c=t(61349);function u(){return(0,c.$G)("app-ranked")}var d=function(){return d=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},d.apply(this,arguments)},m=["grey","grey","yellow","orange","purple","blue","green","black"],h=m[m.length-1];const p=a.memo((function(e){var n=e.className,t=e.value,a=t.accountId,s=t.info.rank,o=u().t;return(0,r.jsx)("tr",d({className:n},{children:(0,r.jsxs)("td",d({className:"address all relative"},{children:[(0,r.jsx)(l.N,{value:a}),(0,r.jsx)(l.Vp,{className:"absolute",color:m[s.toNumber()]||h,hover:o("Membership rank"),label:s.toString()})]}))}))}));var f=t(14681),v=function(){return v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},v.apply(this,arguments)};const x=a.memo((function(e){var n=e.className,t=e.members,a=u().t;return(0,r.jsx)(l.Ty,v({className:n},{children:(0,r.jsx)(l.Jy,v({label:a("members")},{children:void 0===t?(0,r.jsx)("span",v({className:"--tmp"},{children:"99"})):(0,f.u)(t.length)}))}))}));var g=function(){return g=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},g.apply(this,arguments)};const b=a.memo((function(e){var n=e.className,t=e.members,s=u().t,o=(0,a.useRef)([[s("members"),"start"]]);return(0,r.jsxs)("div",g({className:n},{children:[(0,r.jsx)(x,{members:t}),(0,r.jsx)(l.iA,g({className:n,empty:t&&s("No members found"),header:o.current,isSplit:!0},{children:t&&t.map((function(e){return(0,r.jsx)(p,{value:e},e.accountId)}))}))]}))}));var j=t(90778),y=t(9118),w=t(11677),N=t(12298),k=t(39824),O={transform:function(e){return e.map((function(e){return e.args[0]}))}};function C(e){var n=[],t=[];return e.forEach((function(e){var r=e.event,a=r.data[0];"MemberAdded"===r.method?n.push(a):t.push(a)})),{added:n,removed:t}}const S=(0,w.e)("useMemberIds",(function(e){var n=(0,j.h)().api,t=(0,N.k)(n.query[e].members,[],O);return(0,k.N)([n.events[e].MemberAdded,n.events[e].MemberRemoved],C,t)}));var I={transform:function(e){var n=e[0][0],t=e[1].map((function(e,t){return[e.unwrapOr(null),n[t]]})).filter((function(e){return!!e[0]})).sort((function(e,n){var t=e[0];return n[0].rank.cmp(t.rank)})).map((function(e){var n=e[0];return{accountId:e[1].toString(),info:n}}));return{memberIds:t.map((function(e){return e.accountId})),memberRanks:t.map((function(e){return e.info.rank})),members:t}},withParamsTransform:!0};const P=(0,w.e)("useMembers",(function(e){var n=(0,j.h)().api,t=S(e),r=(0,y.W7)(t&&0!==t.length&&n.query[e].members.multi,[t],I);return(0,a.useMemo)((function(){return t&&0===t.length?{memberIds:[],memberRanks:[],members:[]}:r}),[t,r])}));var A=function(){return A=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},A.apply(this,arguments)};const M=a.memo((function(e){var n=e.basePath,t=e.className,c=e.palletColl,d=e.palletPoll,m=u().t,h=P(c),p=(0,o.E)(d),f=(0,a.useMemo)((function(){return[{isRoot:!0,name:"overview",text:m("Overview")},{name:"referenda",text:m("Referenda ({{count}})",{replace:{count:p||0}})}]}),[p,m]);return(0,r.jsxs)("main",A({className:t},{children:[(0,r.jsx)(l.mQ,{basePath:n,items:f}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,A({path:"".concat(n,"/referenda")},{children:(0,r.jsx)(i.Z,{members:h&&h.memberIds,palletReferenda:d,palletVote:c,ranks:h&&h.memberRanks})})),(0,r.jsx)(s.AW,{children:(0,r.jsx)(b,{members:h&&h.members})})]})]}))}))},41857:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(52322),a=t(2784),s=t(10257);const o=a.memo((function(e){var n=e.basePath,t=e.className;return(0,r.jsx)(s.Z,{basePath:n,className:t,palletColl:"rankedCollective",palletPoll:"rankedPolls"})}))},76288:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(1398);const a=(0,t(11677).e)("useCounter",(function(){return(0,r.E)("rankedPolls")}))},99501:(e,n,t)=>{t.d(n,{Z:()=>sn});var r=t(52322),a=t(2784),s=t(77311),o=t(24732),i=t(90778),l=t(9118),c=t(34814),u=t(95292),d=t(54062),m=t(80973),h=t(11677);const p=(0,h.e)("useSummary",(function(e,n){var t=(0,i.h)().api,r=(0,l.W7)(t.query[e].referendumCount),s=(0,a.useMemo)((function(){return function(e){return void 0===e&&(e=[]),e.reduce((function(e,n){var t=n.referenda;return e+(void 0===t?[]:t).filter((function(e){return e.info.isOngoing})).length}),0)}(n)}),[n]);return(0,a.useMemo)((function(){return{refActive:s,refCount:r}}),[s,r])}));var f=t(38894),v=t(98551),x=t(33661),g=t(12372),b=t(57387),j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},j.apply(this,arguments)};const y=(0,h.e)("useTrackOptions",(function(e,n,t,s){var o=(0,i.h)(),l=o.api,c=o.specName;return(0,a.useMemo)((function(){return function(e,n,t,a,s,o){var i=s&&s.map((function(e){return(0,g.G)(e)})),l=o&&o.map((function(e){return(0,g.G)(e)}));return a.filter((function(e){var n=e.id;return(!i||i.some((function(e){return e.eq(n)})))&&(!l||!l.some((function(e){return e.eq(n)})))})).map((function(s){var o=s.id,i=s.info,l=(0,b.K2)(e,n,t,a,o.toNumber()),c=(0,b.tp)(o,i);return{text:(null==l?void 0:l.text)?(0,r.jsxs)("div",j({className:"trackOption"},{children:[(0,r.jsx)("div",j({className:"normal"},{children:c})),(0,r.jsx)("div",j({className:"faded"},{children:l.text}))]})):c,value:o.toNumber()}}))}(l,c,e,n,t,s)}),[l,s,t,e,c,n])}));const w=a.memo((0,o.zo)((function(e){var n=e.className,t=e.exclude,a=e.include,s=e.onChange,i=e.palletReferenda,l=e.tracks,c=(0,d.$)().t,u=y(i,l,a,t);return(0,r.jsx)(o.Lt,{className:n,defaultValue:u[0].value,label:c("submission track"),onChange:s,options:u})}))(O||(N=["\n  .trackOption {\n    .faded {\n      font-size: var(--font-size-small);\n      font-weight: var(--font-weight-normal);\n      margin-top: 0.125rem;\n      opacity: 0.6;\n    }\n  }\n"],k=["\n  .trackOption {\n    .faded {\n      font-size: var(--font-size-small);\n      font-weight: var(--font-weight-normal);\n      margin-top: 0.125rem;\n      opacity: 0.6;\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(N,"raw",{value:k}):N.raw=k,O=N)));var N,k,O,C=function(){return C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)},S=o.zo.div(P||(P=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--Table {\n    font-size: var(--font-percent-small);\n    opacity: var(--opacity-light);\n    padding-left: 2rem;\n  }\n"],["\n  .ui--Table {\n    font-size: var(--font-percent-small);\n    opacity: var(--opacity-light);\n    padding-left: 2rem;\n  }\n"])));const I=a.memo((function(e){var n=e.allowEmpty,t=e.className,s=e.palletReferenda,l=e.tracks,c=e.value,u=(0,d.$)().t,m=(0,i.h)(),h=m.api,p=m.specName,f=(0,a.useMemo)((function(){return c&&c.map((function(e){return[e,(0,b.K2)(h,p,s,l,e.classId.toNumber())]}))}),[h,s,p,l,c]);return f?(0,r.jsxs)(S,C({className:t},{children:[f.length?(0,r.jsx)(o.iA,C({isInline:!0},{children:f.map((function(e,n){var t=e[0],a=t.casting,s=t.classId,o=t.delegating,i=e[1];return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",C({className:"all"},{children:i&&i.trackName||s.toString()})),(0,r.jsx)("td",C({className:"together"},{children:o&&u("delegating")||a&&"".concat(a.length," ").concat(1===a.length?u("vote"):u("votes"))}))]},n)}))})):(0,r.jsx)(o.Pd,{content:u("This account has no voting/delating activity in the chain state")}),!n&&f.some((function(e){return e[0].delegating}))&&(0,r.jsx)(o.Pd,{content:u("This account has some delegations in itself")})]})):null}));var P,A=function(){return A=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},A.apply(this,arguments)},M={transform:function(e){var n=e[0][0],t=e[1];return n.reduce((function(e,n,r){var a;return A(A({},e),((a={})[n]=t[r].map((function(e){var n=e[0];return{balance:e[1].toBn(),classId:n.toBn()}})),a))}),{})},withParamsTransform:!0};const T=(0,h.e)("useVotingLocks",(function(e,n){var t,r,s=(0,i.h)().api,o=(0,a.useMemo)((function(){return n?n.length?[n]:[]:void 0}),[n]),c=(0,l.W7)(o&&o[0]&&(null===(r=null===(t=s.query[e])||void 0===t?void 0:t.classLocksFor)||void 0===r?void 0:r.multi),o,M);return(0,a.useMemo)((function(){var n;return o?o[0]?(0,x.m)(null===(n=s.query[e])||void 0===n?void 0:n.classLocksFor)?c:o[0].reduce((function(e,n){var t;return A(A({},e),((t={})[n]=[],t))}),{}):{}:null}),[s,c,o,e])}));var E={transform:function(e){var n=e[0][0],t=e[1];return n.sort((function(e,n){return e[1].cmp(n[1])})).reduce((function(e,n,r){var a,s,o=n[0],i=n[1];if(e[o]||(e[o]=[]),t[r].isCasting)a=t[r].asCasting.votes.map((function(e){return{refId:e[0]}}));else if(t[r].isDelegating){var l=t[r].asDelegating,c=l.conviction,u=l.target;s={conviction:c.type,targetId:u.toString()}}else console.error("Unable to handle PalletConvictionVotingVoteVoting type ".concat(t[r].type));return e[o].push({casting:a,classId:i,delegating:s}),e}),{})},withParamsTransform:!0};function D(e){return e&&Object.entries(e).reduce((function(e,n){var t=n[0];return n[1].reduce((function(e,n){var r=n.classId;return e.push([t,r]),e}),e)}),[])}const q=(0,h.e)("useVotingFor",(function(e,n){var t,r,s=(0,i.h)().api,o=T(e,n),c=(0,a.useMemo)((function(){return[D(o)]}),[o]),u=(0,l.W7)(c&&c[0]&&(null===(r=null===(t=s.query[e])||void 0===t?void 0:t.votingFor)||void 0===r?void 0:r.multi),c,E);return(0,a.useMemo)((function(){var n;return o&&c?c[0]?(0,x.m)(null===(n=s.query[e])||void 0===n?void 0:n.votingFor)?u&&function(e,n){return Object.keys(e).reduce((function(e,n){return e[n]||(e[n]=[]),e}),n)}(o,u):o:{}:null}),[s,o,c,e,u])})),F=(0,h.e)("useActivityAccount",(function(e,n){var t=(0,a.useMemo)((function(){return n&&[n]||null}),[n]),r=q(e,t);return r&&n?r[n]||[]:null}));var V={transform:function(e){var n=e[0][0];return e[1].map((function(e,t){return e.isSome?e.unwrap()[0].toString():n[t]})).reduce((function(e,n){return e.includes(n)||e.push(n),e}),[])},withParamsTransform:!0};const R=(0,h.e)("useSuperIds",(function(e){var n,t,r=(0,i.h)().api,s=(0,a.useMemo)((function(){return e&&[e]}),[e]),o=(0,l.W7)(s&&!!s[0].length&&(null===(t=null===(n=r.query.identity)||void 0===n?void 0:n.superOf)||void 0===t?void 0:t.multi),s,V);return(0,a.useMemo)((function(){var n;return s?s[0].length?(0,x.m)(null===(n=r.query.identity)||void 0===n?void 0:n.superOf)?o:e:[]:null}),[r,e,o,s])})),_=(0,h.e)("useActivity",(function(e,n){var t=R(n);return q(e,t)}));var B=t(12298),Z={transform:function(e){return e.map((function(e){return e.args[0].toString()}))}};const L=(0,h.e)("useFellows",(function(){var e,n=(0,i.h)().api,t=(0,B.k)(null===(e=n.query.fellowshipCollective)||void 0===e?void 0:e.members,[],Z);return(0,a.useMemo)((function(){var e;return(0,x.m)(null===(e=n.query.fellowshipCollective)||void 0===e?void 0:e.members)?t:[]}),[n,t])})),H=(0,h.e)("useActivityFellows",(function(e){var n=L();return _(e,n)}));var z={transform:function(e){return e.reduce((function(e,n){return n.isSome?e.concat(n.unwrap().targets.map((function(e){return e.toString()})).filter((function(n){return!e.includes(n)}))):e}),[])}};const W=(0,h.e)("useNominators",(function(){var e,n,t=(0,i.h)().api,r=(0,c.x)().allAccounts,s=(0,a.useMemo)((function(){return[r]}),[r]),o=(0,l.W7)(!!r.length&&s&&(null===(n=null===(e=t.query.staking)||void 0===e?void 0:e.nominators)||void 0===n?void 0:n.multi),s,z);return(0,a.useMemo)((function(){var e;return(0,x.m)(null===(e=t.query.staking)||void 0===e?void 0:e.nominators)&&r.length?o:[]}),[r,t,o])})),$=(0,h.e)("useActivityNominators",(function(e){var n=W();return _(e,n)}));var U=function(){return U=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},U.apply(this,arguments)};const J=a.memo((function(e){var n=e.className,t=e.palletReferenda,s=e.palletVote,l=e.tracks,u=(0,d.$)().t,m=(0,i.h)().api,h=(0,c.x)().hasAccounts,p=(0,f.O)(),g=p[0],b=p[1],j=(0,f.O)(),y=j[0],N=j[1],k=(0,v.t)(),O=k[0],C=k[1],S=k[2],P=(0,a.useState)(null),A=P[0],M=P[1],T=(0,a.useState)(null),E=T[0],D=T[1],q=(0,a.useState)(0),V=q[0],R=q[1],_=(0,a.useState)(),B=_[0],Z=_[1],L=(0,a.useState)(1),z=L[0],W=L[1],J=H(s),G=$(s),Q=F(s,A),X=F(s,E),K=(0,a.useState)({index:0,type:"address"}),Y=K[0],ee=K[1],ne=(0,a.useMemo)((function(){return Q&&l.filter((function(e){return!Q.some((function(n){return e.id.eq(n.classId)}))})).map((function(e){return e.id}))}),[Q,l]),te=(0,a.useMemo)((function(){return J&&Object.entries(J).map((function(e){var n=e[0];return e[1].length>0&&{key:n,name:n,value:n}})).filter((function(e){return!!e}))}),[J]),re=(0,a.useMemo)((function(){return G&&Object.entries(G).map((function(e){var n=e[0];return{key:n,name:n,value:n}})).filter((function(e){return!!e}))}),[G]),ae=(0,a.useMemo)((function(){var e,n;return[{text:u("Addresses"),value:"address"},(0,x.m)(null===(e=m.query.staking)||void 0===e?void 0:e.nominators)&&{isDisabled:!re||!re.length,text:u("Validators"),value:"validators"},(0,x.m)(null===(n=m.query.fellowshipCollective)||void 0===n?void 0:n.members)&&{isDisabled:!te||!te.length,text:u("Fellows"),value:"fellows"}]}),[te,re,m,u]),se=(0,a.useCallback)((function(e,n){return ee({index:e,type:n.toString()})}),[]),oe=(0,a.useMemo)((function(){return B&&z&&E&&ne?y?m.tx.utility.forceBatch(ne.map((function(e){return m.tx[s].delegate(e,E,z,B)}))):m.tx[s].delegate(V,E,z,B):null}),[m,B,z,ne,y,s,E,V]),ie=!!(A&&Q&&ne&&ne.length>0),le=!(!E||!X);return(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsxs)(o.u_,U({className:n,header:u("Delegate votes {{step}}/{{numSteps}}",{replace:{numSteps:2,step:O}}),onClose:b,size:"large"},{children:[1===O&&(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsxs)(o.u_.Columns,U({hint:u("Delegate from this account to another. All votes made on the target would count as a delegated vote for this account.")},{children:[(0,r.jsx)(o.rp,{label:u("delegate from account"),onChange:M,type:"account",withLabel:!0}),(0,r.jsx)(I,{allowEmpty:!0,palletReferenda:t,trackId:-1,tracks:l,value:Q})]})),(0,r.jsxs)(o.u_.Columns,U({align:"right",hint:u("Either delegate your votes for a single track as selected or delegate for all available tracks.")},{children:[(0,r.jsx)(o.ZD,{label:u("apply delegation to all tracks"),onChange:N,value:y}),!y&&ne&&ne.length>0&&(0,r.jsx)(w,{include:ne,onChange:R,palletReferenda:t,tracks:l})]})),(0,r.jsxs)(o.u_.Columns,U({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:u("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,r.jsx)("p",{children:u("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]})},{children:[(0,r.jsx)(o.xb,{accountId:A,autoFocus:!0,label:u("delegated vote value"),onChange:Z}),(0,r.jsx)(o.v,{label:u("conviction"),onChange:W,value:z,voteLockingPeriod:m.consts[s].voteLockingPeriod})]}))]}),2===O&&(0,r.jsxs)(o.u_.Content,{children:[ae.length>1&&(0,r.jsx)(o.u_.Columns,U({align:"center",hint:u("Select from a list of pre-propulated accounts (based on your account activity) or supply your own")},{children:(0,r.jsx)(o.tX,{onChange:se,options:ae,value:Y.index})})),(0,r.jsxs)(o.u_.Columns,U({hint:u("The account that you wish to delegate to")},{children:["address"===Y.type?(0,r.jsx)(o.rp,{label:u("delegate to address"),onChange:D,type:"allPlus"},"address"):"validators"===Y.type?(0,r.jsx)(o.rp,{defaultValue:null==re?void 0:re[0].value,label:u("delegate to validator"),onChange:D,options:re,type:"allPlus"},"validators"):"fellows"===Y.type?(0,r.jsx)(o.rp,{defaultValue:null==te?void 0:te[0].value,label:u("delegate to fellow"),onChange:D,options:te,type:"allPlus"},"fellows"):null,(0,r.jsx)(I,{palletReferenda:t,trackId:y?-1:V,tracks:l,value:"fellows"===Y.type?J&&!!E&&J[E]:"validators"===Y.type?G&&!!E&&G[E]:X})]}))]}),(0,r.jsxs)(o.u_.Actions,{children:[1!==O&&(0,r.jsx)(o.zx,{icon:"step-backward",label:u("Prev"),onClick:S}),2!==O&&(0,r.jsx)(o.zx,{activeOnEnter:!0,icon:"step-forward",isDisabled:1===O?!ie:!le,label:u("Next"),onClick:C}),(0,r.jsx)(o.cA,{accountId:A,extrinsic:oe,icon:"code-merge",isDisabled:!ie||!le||2!==O,label:u("Delegate"),onStart:b})]})]})),(0,r.jsx)(o.zx,{icon:"code-merge",isDisabled:!h,label:u("Delegate"),onClick:b})]})}));var G=t(54383),Q=t(56360),X=t(97794),K=t(14681),Y=t(52107),ee=t(33403),ne=t(65874),te=function(){return te=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},te.apply(this,arguments)};const re=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.label,s=e.when,o=(0,G.C)();return(0,r.jsx)("td",te({className:"".concat(t," number")},{children:o&&s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:a}),s.gt(o)&&(0,r.jsx)(ne.Z,{value:s.sub(o)}),(0,r.jsxs)("div",{children:["#",(0,K.u)(s)]})]})}))})),ae=a.memo((function(e){var n=e.value.info,t=(0,a.useMemo)((function(){return n.isKilled?n.asKilled:null}),[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{className:"all no-pad",colSpan:5}),(0,r.jsx)(re,{label:n.type,when:t})]})}));var se=t(31313),oe=t(13940),ie=function(){return ie=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ie.apply(this,arguments)};const le=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.id,l=e.palletReferenda,c=e.track,u=(0,d.$)().t,m=(0,i.h)().api,h=(0,f.O)(),p=h[0],v=h[1],x=(0,a.useState)(null),g=x[0],b=x[1];return(0,r.jsxs)(r.Fragment,{children:[p&&(0,r.jsxs)(o.u_,ie({className:t,header:u("Place decision deposit"),onClose:v,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,ie({hint:u("The deposit will be registered from this account and the balance lock will be applied here.")},{children:(0,r.jsx)(o.rp,{label:u("deposit from account"),labelExtra:(0,r.jsx)(oe.Z,{label:(0,r.jsx)("span",ie({className:"label"},{children:u("transferrable")})),params:g}),onChange:b,type:"account"})})),(0,r.jsx)(o.u_.Columns,ie({hint:u("The referendum this deposit would apply to.")},{children:(0,r.jsx)(o.Rn,{defaultValue:s,isDisabled:!0,label:u("referendum id")})})),(0,r.jsx)(o.u_.Columns,ie({hint:u("The deposit for this proposal will be locked for the referendum duration.")},{children:(0,r.jsx)(o.H,{defaultValue:c.decisionDeposit,isDisabled:!0,label:u("decision deposit")})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:g,icon:"plus",label:u("Place deposit"),onStart:v,params:[s],tx:m.tx[l].placeDecisionDeposit})})]})),(0,r.jsx)(o.zx,{icon:"plus",label:u("Decision deposit"),onClick:v})]})}));var ce=function(){return ce=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ce.apply(this,arguments)};const ue=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.id,l=e.palletReferenda,c=(0,d.$)().t,u=(0,i.h)().api,m=(0,f.O)(),h=m[0],p=m[1],v=(0,a.useState)(null),x=v[0],g=v[1];return(0,r.jsxs)(r.Fragment,{children:[h&&(0,r.jsxs)(o.u_,ce({className:t,header:c("Refund decision deposit"),onClose:p,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,ce({hint:c("The transaction will be submitted from this account.")},{children:(0,r.jsx)(o.rp,{label:c("refund from account"),onChange:g,type:"account"})})),(0,r.jsx)(o.u_.Columns,ce({hint:c("The referendum this deposit would apply to.")},{children:(0,r.jsx)(o.Rn,{defaultValue:s,isDisabled:!0,label:c("referendum id")})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:x,icon:"minus",label:c("Refund deposit"),onStart:p,params:[s],tx:u.tx[l].refundDecisionDeposit})})]})),(0,r.jsx)(o.zx,{icon:"minus",label:c("Refund deposit"),onClick:p})]})}));var de=function(){return de=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},de.apply(this,arguments)},me=o.zo.td(pe||(pe=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--AddressMini+.ui--Button {\n    margin-top: 0.25rem;\n  }\n"],["\n  .ui--AddressMini+.ui--Button {\n    margin-top: 0.25rem;\n  }\n"])));const he=a.memo((function(e){var n=e.canDeposit,t=e.canRefund,a=e.className,s=void 0===a?"":a,i=e.decision,l=e.id,c=e.noMedia,u=e.palletReferenda,d=e.submit,m=e.track;return(0,r.jsxs)(me,de({className:"".concat(s," address ").concat(c?"":"media--1000-noPad")},{children:[d&&(0,r.jsx)(o.ax,{balance:d.amount,className:c?"":"media--1000",value:d.who,withBalance:!0}),i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.ax,{balance:i.amount,className:c?"":"media--1000",value:i.who,withBalance:!0}),t&&(0,r.jsx)("div",de({className:c?"":"media--1000"},{children:(0,r.jsx)(ue,{id:l,palletReferenda:u})}))]}):n&&m&&(0,r.jsx)("div",de({className:c?"":"media--1000"},{children:(0,r.jsx)(le,{id:l,palletReferenda:u,track:m})}))]}))}));var pe,fe=t(37602);function ve(e){return e instanceof fe.W?e.unwrapOr(null):e}var xe=function(){return xe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},xe.apply(this,arguments)};const ge=a.memo((function(e){var n=e.accountId,t=e.id,s=e.onChange,i=(0,d.$)().t,l=(0,a.useState)(),c=l[0],u=l[1],m=(0,a.useState)(),h=m[0],p=m[1],f=(0,a.useState)(),v=f[0],x=f[1];return(0,a.useEffect)((function(){s([t,{SplitAbstain:{abstain:c,aye:h,nay:v}}])}),[c,h,v,t,s]),(0,r.jsxs)(o.u_.Columns,xe({hint:i("The value of the balance that is to be split to the abstain, aye and nay parts of the vote")},{children:[(0,r.jsx)(o.xb,{accountId:n,autoFocus:!0,label:i("abstain vote value"),onChange:u}),(0,r.jsx)(o.xb,{accountId:n,autoFocus:!0,label:i("aye vote value"),noDefault:!0,onChange:p}),(0,r.jsx)(o.xb,{accountId:n,label:i("nay vote value"),noDefault:!0,onChange:x})]}))}));var be=function(){return be=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},be.apply(this,arguments)};const je=a.memo((function(e){var n=e.accountId,t=e.id,s=e.onChange,i=(0,d.$)().t,l=(0,a.useState)(),c=l[0],u=l[1],m=(0,a.useState)(),h=m[0],p=m[1];return(0,a.useEffect)((function(){s([t,{Split:{aye:c,nay:h}}])}),[c,h,t,s]),(0,r.jsxs)(o.u_.Columns,be({hint:i("The value of the balance that is to be split to the aye and nay parts of the vote")},{children:[(0,r.jsx)(o.xb,{accountId:n,autoFocus:!0,label:i("aye vote value"),onChange:u}),(0,r.jsx)(o.xb,{accountId:n,label:i("nay vote value"),noDefault:!0,onChange:p})]}))}));var ye=function(){return ye=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ye.apply(this,arguments)};const we=a.memo((function(e){var n=e.accountId,t=e.id,s=e.isAye,i=e.onChange,l=e.voteLockingPeriod,c=(0,d.$)().t,u=(0,a.useState)(),m=u[0],h=u[1],p=(0,a.useState)(1),f=p[0],v=p[1];return(0,a.useEffect)((function(){i([t,{Standard:{balance:m,vote:{aye:s,conviction:f}}}])}),[m,f,t,s,i]),(0,r.jsxs)(o.u_.Columns,ye({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:c("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,r.jsx)("p",{children:c("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]})},{children:[(0,r.jsx)(o.xb,{accountId:n,autoFocus:!0,label:c(s?"aye vote value":"nay vote value"),onChange:h}),(0,r.jsx)(o.v,{label:c("conviction"),onChange:v,value:f,voteLockingPeriod:l})]}))}));var Ne=function(){return Ne=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ne.apply(this,arguments)},ke=(0,o.zo)(o.u_)(Ce||(Ce=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--Modal-Columns.centerVoteType > div:first-child {\n    text-align: center;\n  }\n"],["\n  .ui--Modal-Columns.centerVoteType > div:first-child {\n    text-align: center;\n  }\n"])));const Oe=a.memo((function(e){var n=e.className,t=e.id,s=e.isConvictionVote,l=e.isMember,u=e.members,m=e.palletVote,h=e.preimage,p=e.ranks,v=e.trackInfo,x=(0,d.$)().t,g=(0,i.h)().api,b=(0,c.x)(),j=b.allAccounts,y=b.hasAccounts,w=(0,a.useState)(null),N=w[0],k=w[1],O=(0,f.O)(),C=O[0],S=O[1],I=(0,a.useState)(0),P=I[0],A=I[1],M=(0,a.useState)(),T=M[0],E=M[1],D=(0,a.useMemo)((function(){return function(e,n){var t=!1;try{t=!!e.createType("PalletConvictionVotingVoteAccountVote",{SplitAbstain:{abstain:1}}).isSplitAbstain}catch(e){t=!1}return t?[{text:n("Aye"),value:"aye"},{text:n("Nay"),value:"nay"},{text:n("Split"),value:"split"},{text:n("Abstain"),value:"abstain"}]:[{text:n("Aye"),value:"aye"},{text:n("Nay"),value:"nay"},{text:n("Split"),value:"split"}]}(g,x)}),[g,x]),q=(0,a.useMemo)((function(){return function(e,n,t,r){if(n){var a=n.filter((function(n){return e.includes(n)}));if(t&&r&&r.compare){var s=r.compare;return a.filter((function(e,n){return s(t[n])}))}return a}return n}(j,u,p,v)}),[j,u,p,v]),F=(0,a.useMemo)((function(){return!l||!(!u||!q)&&!q.length}),[q,l,u]);return y?(0,r.jsxs)(r.Fragment,{children:[C&&(0,r.jsxs)(ke,Ne({className:n,header:x("Vote on referendum"),onClose:S,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[h&&(0,r.jsx)(o.u_.Columns,Ne({hint:x("If this proposal is passed, the changes will be applied via dispatch and the deposit returned.")},{children:(0,r.jsx)(o.lV,{idNumber:t,proposal:h.proposal})})),(0,r.jsx)(o.u_.Columns,Ne({hint:x("The vote will be recorded for this account. If another account delegated to this one, the delegated votes will also be counted.")},{children:(0,r.jsx)(o.UE,{filter:q,onChange:k})})),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.u_.Columns,Ne({className:"centerVoteType",hint:x("The type of vote that you wish to cast on the referendum.")},{children:(0,r.jsx)(o.tX,{onChange:A,options:D,value:P})})),0===P?(0,r.jsx)(we,{accountId:N,id:t,isAye:!0,onChange:E,voteLockingPeriod:g.consts[m].voteLockingPeriod}):1===P?(0,r.jsx)(we,{accountId:N,id:t,onChange:E,voteLockingPeriod:g.consts[m].voteLockingPeriod}):2===P?(0,r.jsx)(je,{accountId:N,id:t,onChange:E}):(0,r.jsx)(ge,{accountId:N,id:t,onChange:E})]})]}),(0,r.jsx)(o.u_.Actions,{children:s?(0,r.jsx)(o.cA,{accountId:N,icon:"check-to-slot",label:x("Vote"),onStart:S,params:T,tx:g.tx[m].vote}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.cA,{accountId:N,icon:"ban",label:x("Vote Nay"),onStart:S,params:[t,!1],tx:g.tx[m].vote}),(0,r.jsx)(o.cA,{accountId:N,icon:"check",label:x("Vote Aye"),onStart:S,params:[t,!0],tx:g.tx[m].vote})]})})]})),(0,r.jsx)(o.zx,{icon:"check-to-slot",isDisabled:F,label:x("Vote"),onClick:S})]}):null}));var Ce,Se=t(58607),Ie=t(39824),Pe={transform:function(e){return e.map((function(e){return e.args[1]}))}},Ae={transform:function(e){var n=e[0][0],t=e[1];return n.reduce((function(e,n,r){var a=n[1];return t[r]&&t[r].isSome&&(e[a.toString()]=t[r].unwrap()),e}),{})},withParamsTransform:!0};function Me(e,n,t){var r=[];return e.forEach((function(e){var n=e.event.data,a=n[0],s=n[1];t&&s.eq(t)&&r.push(a)})),{added:r}}const Te=(0,h.e)("useVotes",(function(e,n,t){var r=(0,i.h)().api,s=(0,B.k)(!1===t&&r.query[e].voting,[n],Pe),o=(0,Ie.N)([r.events[e].Voted],Me,s,n),c=(0,a.useMemo)((function(){return null==o?void 0:o.map((function(e){return[n,e]}))}),[o,n]);return(0,l.W7)(c&&r.query[e].voting.multi,[c],Ae)}));var Ee=function(){return Ee=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ee.apply(this,arguments)};function De(e){return null==e?void 0:e.sort((function(e,n){var t=e[1];return n[1].cmp(t)})).map((function(e){var n=e[0];return(0,r.jsx)(o.ax,{value:n},n)}))}const qe=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.id,i=e.isConvictionVote,l=e.palletVote,c=e.tally,u=(0,d.$)().t,m=Te(l,s,i),h=(0,a.useMemo)((function(){return function(e){void 0===e&&(e={});for(var n=[],t=[],r=Object.entries(e),a=0;a<r.length;a++){var s=r[a],o=s[0],i=s[1];i.isAye?n.push([o,i.asAye]):t.push([o,i.asNay])}return[n.length?n:void 0,t.length?t:void 0]}(m)}),[m]),p=h[0],f=h[1],v=(0,a.useCallback)((function(){return De(p)}),[p]),x=(0,a.useCallback)((function(){return De(f)}),[f]);return(0,r.jsxs)("td",Ee({className:"".concat(t," expand media--1200-noPad")},{children:[(0,r.jsx)(o.xH,{className:"media--1200",renderChildren:p&&v,summary:i?(0,r.jsxs)(r.Fragment,{children:[u("Aye"),(0,r.jsx)("div",{children:(0,r.jsx)(Se.Z,{value:c.ayes})})]}):u("Aye {{count}}",{replace:{count:(0,K.u)(c.ayes)}})}),(0,r.jsx)(o.xH,{className:"media--1200",renderChildren:f&&x,summary:i?(0,r.jsxs)(r.Fragment,{children:[u("Nay"),(0,r.jsx)("div",{children:(0,r.jsx)(Se.Z,{value:c.nays})})]}):u("Nay {{count}}",{replace:{count:(0,K.u)(c.nays)}})})]}))}));var Fe=function(){return Fe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Fe.apply(this,arguments)};const Ve=a.memo((function(e){var n=e.isMember,t=e.members,s=e.palletReferenda,l=e.palletVote,c=e.ranks,u=e.trackInfo,m=e.value,h=m.id,p=m.info,f=m.isConvictionVote,v=m.track,x=(0,d.$)().t,g=(0,i.h)().api,b=(0,a.useMemo)((function(){return function(e,n,t){var r=n.asOngoing,a=(0,se.uD)(e,r.proposal||r.proposalHash).proposalHash,s=null,o=null,i=null;if(t){var l=r.deciding,c=r.submitted;if(l.isSome){var u=l.unwrap(),d=u.confirming,m=u.since;d.isSome?i=d.unwrap():o=m.add(t.decisionPeriod)}else s=c.add(t.preparePeriod)}return{decisionDeposit:ve(r.decisionDeposit),ongoing:r,periods:{confirmEnd:i,decideEnd:o,periodEnd:i||o||s,prepareEnd:s},proposalHash:a,submissionDeposit:ve(r.submissionDeposit),tally:r.tally,tallyTotal:r.tally.ayes.add(r.tally.nays)}}(g,p,v)}),[g,p,v]),j=b.decisionDeposit,y=b.ongoing,w=b.periods,N=w.confirmEnd,k=w.decideEnd,O=w.periodEnd,C=b.submissionDeposit,S=b.tally,I=b.tallyTotal,P=(0,se.CH)(y.proposal||y.proposalHash);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",Fe({className:"all"},{children:P&&P.proposal?(0,r.jsx)(o.Uv,{labelHash:x("preimage"),value:P.proposal,withHash:!0}):(0,r.jsx)("div",Fe({className:"shortHash"},{children:null==P?void 0:P.proposalHash}))})),(0,r.jsx)(he,{canDeposit:!0,decision:j,id:h,palletReferenda:s,submit:C,track:v}),(0,r.jsx)(re,{label:x(N?"Confirming":k?"Deciding":"Preparing"),when:O}),(0,r.jsx)(qe,{id:h,isConvictionVote:f,palletVote:l,tally:S}),(0,r.jsx)("td",Fe({className:"middle chart media--1300-noPad"},{children:(0,r.jsx)(o.Ex,{className:"media--1300",total:I,value:S.ayes})})),(0,r.jsx)("td",Fe({className:"actions button"},{children:(0,r.jsx)(Oe,{id:h,isConvictionVote:f,isMember:n,members:t,palletVote:l,preimage:P,ranks:c,trackInfo:u})}))]})})),Re=a.memo((function(e){var n=e.palletReferenda,t=e.value,s=t.id,o=t.info,i=t.track,l=(0,a.useMemo)((function(){return function(e){var n=e.isApproved?e.asApproved:e.isRejected?e.asRejected:e.isCancelled?e.asCancelled:e.isTimedOut?e.asTimedOut:null;return n?{decision:ve(n[2]),submit:ve(n[1]),when:n[0]}:{decision:null,submit:null,when:null}}(o)}),[o]),c=l.decision,u=l.submit,d=l.when;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{className:"no-pad",colSpan:4}),(0,r.jsx)(he,{canRefund:!0,className:"all",decision:c,id:s,noMedia:!0,palletReferenda:n,submit:u,track:i}),(0,r.jsx)(re,{label:o.type,when:d})]})}));var _e=function(){return _e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},_e.apply(this,arguments)},Be={Killed:ae,Ongoing:Ve},Ze=["#ff8c00","#9c3333","#339c33"],Le={aspectRatio:2.25,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0}}};var He=o.zo.tr(We||(We=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .shortHash {\n    max-width: var(--width-shorthash);\n    min-width: 3em;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    width: var(--width-shorthash);\n  }\n"],["\n  .shortHash {\n    max-width: var(--width-shorthash);\n    min-width: 3em;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    width: var(--width-shorthash);\n  }\n"])));const ze=a.memo((function(e){var n=(0,d.$)().t,t=(0,G.C)(),s=(0,Q.n)(),i=e.activeIssuance,l=e.className,c=void 0===l?"":l,m=e.palletReferenda,h=e.value,p=h.id,v=h.info,x=h.isConvictionVote,b=h.track,j=h.trackGraph,y=(0,f.O)(!1),w=y[0],N=y[1],k=(0,a.useMemo)((function(){return Be[v.type]||Re}),[v]),O=(0,a.useMemo)((function(){return i&&b&&j&&function(e,n,t,r,a){if(e&&n&&t.isOngoing){var s=t.asOngoing;if(s.deciding.isSome){for(var o=a.approval,i=a.support,l=a.x,c=s.deciding,d=s.tally,m=c.unwrap(),h=m.confirming,p=m.since,f=h.unwrapOr(null),v=n?d.support:d.bareAyes,x=[],g=[[[],[],[]],[[],[],[]]],b=e.isZero()?0:v.mul(u.D_).div(e).toNumber()/10,j=d.ayes.isZero()?0:d.ayes.mul(u.D_).div(d.ayes.add(d.nays)).toNumber()/10,y=-1,w=-1,N=[],k=0;k<o.length;k++){x.push((0,K.u)(p.add(l[k]))),N.push(l[k]);var O=o[k].div(u.uy).toNumber()/10,C=j<O;g[0][0][k]=O,g[0][C?1:2][k]=j,y=C||-1!==y?y:k;var S=i[k].div(u.uy).toNumber()/10,I=b<S;g[1][0][k]=S,g[1][I?1:2][k]=b,w=I||-1!==w?w:k}var P=l[1].sub(l[0]),A=l.length-1,M=null==f?void 0:f.add(r.minEnactmentPeriod);if(null==M?void 0:M.gt(p.add(l[A]))){var T=l[A].add(p).add(P);do{x.push((0,K.u)(T)),N.push(T.sub(p)),g[0][1].push(g[0][1][A]),g[0][2].push(g[0][2][A]),g[1][1].push(g[1][1][A]),g[1][2].push(g[1][2][A]),T=T.add(P)}while(T.lt(M))}return[{changeX:y,currentY:j,endConfirm:f,labels:x,points:N,progress:{percent:j,total:s.tally.ayes.add(s.tally.nays),value:s.tally.ayes},since:p,values:g[0]},{changeX:w,currentY:b,endConfirm:f,labels:x,points:N,progress:{percent:b,total:e,value:v},since:p,values:g[1]}]}}return null}(i,x,v,b,j)}),[i,v,x,b,j]),C=(0,a.useMemo)((function(){return t&&O&&w&&b&&function(e,n,t,r,a,s){var o=t.reduce((function(e,n){var t=n.changeX;return-1===e||-1===t?-1:Math.max(e,t)}),0);return t.map((function(t,i){var l=t.changeX,c=t.currentY,u=t.endConfirm,d=t.labels,m=t.points,h=t.progress,p=t.since,f=t.values,v=d.length,x=0===i?100:50,b=function(e){return Math.max(0,Math.min(v,v*(e.sub(p).toNumber()/m[m.length-1].toNumber())))},j=-1===l?-1:v*(l/m.length),y=-1!==o&&(0,Y.x)(e,m[o].add(p)),w=u?[u.sub(a.confirmPeriod),u,u.add(a.minEnactmentPeriod)]:y?[y,y.add(a.confirmPeriod),y.add(a.confirmPeriod).add(a.minEnactmentPeriod)]:null,N=function(e,n,t,r){return function(a){var s=a[0].label;try{var o=(0,g.G)(s.replace(/,/g,"")),i=r(o);if(o.gt(n)){var l=o.sub(n),c=new Date(Date.now()+l.mul(t).toNumber()).toLocaleString(),u=(0,X.A)(t,l,e),d=["#".concat(s),e("{{when}} (est.)",{replace:{when:c}}),u[1]];return i&&d.push(i),d}if(i)return["#".concat(s),i]}catch(e){}return"#".concat(s)}}(s,e,n,(function(e){return w&&e.gte(w[0])?e.lte(w[1])?s("Confirmation period"):e.lte(w[2])?s("Enactment period"):"":""}));return{colors:Ze,labels:d,options:(0,ee.Z)({plugins:{annotation:{annotations:(0,ee.Z)({past:{backgroundColor:"rgba(140, 140, 140, 0.2)",borderWidth:0,type:"box",xMax:b(e),xMin:0,yMax:x,yMin:0}},w?{conf:{backgroundColor:"rgba(255, 140, 0, 0.1)",borderWidth:0,type:"box",xMax:b(w[1]),xMin:b(w[0]),yMax:x,yMin:0},enac:{backgroundColor:"rgba(0, 0, 140, 0.1)",borderWidth:0,type:"box",xMax:b(w[2]),xMin:b(w[1]),yMax:x,yMin:0}}:{},{fail:{backgroundColor:"rgba(140, 0, 0, 0.02)",borderWidth:0,type:"box",xMax:-1===j?v:j,xMin:0,yMax:c,yMin:0}},-1!==j?{pass:{backgroundColor:"rgba(0, 140, 0, 0.02)",borderWidth:0,type:"box",xMax:v,xMin:j,yMax:c,yMin:0}}:{})},crosshair:{sync:{group:r.toNumber()}},tooltip:{callbacks:{title:N}}}},Le),progress:h,values:f}}))}(t,s,O,p,b,n)}),[t,s,O,p,w,n,b]),S=(0,a.useMemo)((function(){return function(e,n){var t=null,r=null,a=null,s=null;if(e.isOngoing){var o=e.asOngoing,i=o.alarm,l=o.deciding,c=o.enactment,u=o.submitted;if(r={at:c.isAt,blocks:c.isAt?c.asAt:c.asAfter,end:null},a=i.unwrapOr([null])[0],s=u,l.isSome){var d=l.unwrap().confirming;if(d.isSome&&(t=d.unwrap(),n)){var m=t.add(n.minEnactmentPeriod);r.end=c.isAt?(0,Y.x)(m,c.asAt):m.add(c.asAfter)}}}return{confirmEnd:t,enactAt:r,nextAlarm:a,submittedIn:s}}(v,b)}),[v,b]),I=S.confirmEnd,P=S.enactAt,A=S.nextAlarm,M=S.submittedIn,T=(0,a.useMemo)((function(){return[[n("minimum approval"),n("current approval (failing)"),n("current approval (passing)")],[n("minimum support"),n("current support (failing)"),n("current support (passing)")]]}),[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(He,_e({className:"".concat(c," isExpanded isFirst ").concat(w?"":"isLast")},{children:[(0,r.jsx)(o.iA.Column.Id,{value:p}),(0,r.jsx)(k,_e({},e)),(0,r.jsx)(o.iA.Column.Expand,{isExpanded:w,toggle:N})]})),(0,r.jsxs)(He,_e({className:"".concat(c," ").concat(w?"isExpanded isLast":"isCollapsed")},{children:[(0,r.jsx)("td",{}),(0,r.jsxs)("td",_e({className:"columar",colSpan:6},{children:[C&&(0,r.jsxs)(o.P0,{children:[(0,r.jsx)(o.P0.Column,{children:(0,r.jsx)(o.kL.Line,_e({legends:T[0],title:n("approval / {{percent}}%",{replace:{percent:C[0].progress.percent.toFixed(1)}})},C[0]))}),(0,r.jsx)(o.P0.Column,{children:(0,r.jsx)(o.kL.Line,_e({legends:T[1],title:n("support / {{percent}}%",{replace:{percent:C[1].progress.percent.toFixed(1)}})},C[1]))})]}),(0,r.jsxs)(o.P0,_e({size:"tiny"},{children:[(0,r.jsxs)(o.P0.Column,{children:[M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:n("Submitted at")}),"#",(0,K.u)(M)]}),A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:n("Next alarm")}),"#",(0,K.u)(A)]})]}),(0,r.jsxs)(o.P0.Column,{children:[P&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:P.at?n("Enact at"):n("Enact after")}),P.at&&"#",n("{{blocks}} blocks",{replace:{blocks:(0,K.u)(P.blocks)}})]}),I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:n("Confirm end")}),"#",(0,K.u)(I)]}),(null==P?void 0:P.end)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:n("Enact end")}),"#",(0,K.u)(P.end)]})]})]})),(0,r.jsx)(o.P0,_e({is100:!0,size:"tiny"},{children:(0,r.jsx)(o.P0.Column,{children:(0,r.jsx)(o.NR,{data:p,type:m,withTitle:!0})})}))]})),(0,r.jsx)("td",{})]}))]})}));var We,$e=function(){return $e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},$e.apply(this,arguments)};const Ue=a.memo((function(e){var n=e.activeIssuance,t=e.className,s=e.isMember,l=e.members,c=e.palletReferenda,u=e.palletVote,m=e.ranks,h=e.referenda,p=e.trackId,v=e.trackName,x=e.tracks,g=(0,d.$)().t,j=(0,i.h)(),y=j.api,w=j.specName,N=(0,f.O)(),k=N[0],O=N[1],C=(0,a.useMemo)((function(){return(0,b.K2)(y,w,c,x,null==p?void 0:p.toNumber())}),[y,w,c,x,p]),S=(0,a.useMemo)((function(){return[!1,k&&C&&(0,r.jsx)("tr",{children:(0,r.jsx)("th",{colSpan:8})})]}),[k,O,C]),I=S[0],P=S[1],A=(0,a.useMemo)((function(){return[[[v?(0,r.jsxs)(r.Fragment,{children:[v,(0,r.jsx)("div",$e({className:"sub"},{children:null==C?void 0:C.text}))]}):g("referenda"),"start",8],null],v?"track:".concat(v):"untracked"]}),[I,g,C,v]),M=A[0],T=A[1];return(0,r.jsx)(o.iA,$e({className:t,empty:h&&g("No active referenda"),header:M,headerChildren:P,isSplit:!p},{children:h&&h.map((function(e){return(0,r.jsx)(ze,{activeIssuance:n,isMember:s,members:l,palletReferenda:c,palletVote:u,ranks:m,trackInfo:C,value:e},e.key)}))}),T)}));var Je=t(87418),Ge=t(6046),Qe=t(74076),Xe=function(){return Xe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Xe.apply(this,arguments)},Ke=(0,o.zo)(o.u_)(en||(en=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .originSelect, .timeSelect {\n    > .ui--Params-Content {\n      padding-left: 0;\n    }\n  }\n"],["\n  .originSelect, .timeSelect {\n    > .ui--Params-Content {\n      padding-left: 0;\n    }\n  }\n"])));const Ye=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.isMember,l=e.members,c=e.palletReferenda,m=e.tracks,h=(0,d.$)().t,p=(0,i.h)(),v=p.api,x=p.specName,g=(0,G.C)(),j=(0,f.O)(),y=j[0],N=j[1],k=(0,a.useState)(null),O=k[0],C=k[1],S=(0,a.useState)(void 0),I=S[0],P=S[1],A=(0,a.useState)(null),M=A[0],T=A[1],E=(0,a.useState)({imageHash:null,isImageHashValid:!1}),D=E[0],q=D.imageHash,F=D.isImageHashValid,V=E[1],R=(0,a.useState)({imageLen:u.nw,isImageLenValid:!1}),_=R[0],B=_.imageLen,Z=_.imageLenDefault,L=_.isImageLenValid,H=R[1],z=(0,a.useState)(0),W=z[0],$=z[1],U=(0,a.useState)(u.S8),J=U[0],Q=U[1],X=(0,a.useState)(u.If),K=X[0],Y=X[1],ee=(0,a.useState)(),ne=ee[0],te=ee[1],re=(0,se.CH)(q);(0,a.useEffect)((function(){g&&te((function(e){return e||g.add(u.D_)}))}),[g]),(0,a.useEffect)((function(){(null==re?void 0:re.proposalLength)&&H((function(e){return{imageLen:e.imageLen,imageLenDefault:re.proposalLength,isImageLenValid:e.isImageLenValid}}))}),[re]);var ae=(0,a.useMemo)((function(){return(0,b.K2)(v,x,c,m,I)}),[v,c,x,I,m]),ie=(0,a.useMemo)((function(){return!g||(0===W?null==J?void 0:J.lt(u.If):null==K?void 0:K.lt(g))}),[J,K,g,W]),le=(0,a.useMemo)((function(){return[{name:"origin",type:(0,Ge.s)(v.tx[c].submit.meta.args[0].type.toString())}]}),[v,c]),ce=(0,a.useMemo)((function(){return ae&&Array.isArray(ae.origin)?ae.origin.map((function(e,n){return{text:Object.values(e)[0],value:n+1}})):null}),[ae]),ue=(0,a.useMemo)((function(){return!(null==ae?void 0:ae.origin)||Array.isArray(null==ae?void 0:ae.origin)?M:ae.origin}),[M,ae]),de=(0,a.useMemo)((function(){return[{text:h("After delay"),value:"after"},{text:h("At block"),value:"at"}]}),[h]),me=(0,a.useCallback)((function(e){return T(ae&&Array.isArray(ae.origin)?ae.origin[e-1]:null)}),[ae]),he=(0,a.useCallback)((function(e){var n=e[0],t=n.isValid,r=n.value;return T(t?r:null)}),[]),pe=(0,a.useCallback)((function(e){return V({imageHash:e,isImageHashValid:(0,Qe.vq)(e,256)})}),[]),fe=(0,a.useCallback)((function(e){e&&H((function(n){return{imageLen:e,imageLenDefault:n.imageLenDefault,isImageLenValid:!e.isZero()}}))}),[]);return(0,r.jsxs)(r.Fragment,{children:[y&&(0,r.jsxs)(Ke,Xe({className:t,header:h("Submit proposal"),onClose:N,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,Xe({hint:h("The proposal will be registered from this account and the balance lock will be applied here.")},{children:(0,r.jsx)(o.rp,{filter:l,label:h("propose from account"),labelExtra:(0,r.jsx)(oe.Z,{label:(0,r.jsx)("span",Xe({className:"label"},{children:h("transferrable")})),params:O}),onChange:C,type:"account"})})),(0,r.jsxs)(o.u_.Columns,Xe({hint:h("The origin (and by extension track) that you wish to submit for, each has a different period, different root and acceptance criteria.")},{children:[(0,r.jsx)(w,{onChange:P,palletReferenda:c,tracks:m}),!(null==ae?void 0:ae.origin)&&(0,r.jsx)(Je.Z,{className:"originSelect",onChange:he,params:le}),ce&&(0,r.jsx)(o.Lt,{defaultValue:ce[0].value,label:h("track origin"),onChange:me,options:ce})]})),(0,r.jsxs)(o.u_.Columns,Xe({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:h("The hash of the preimage for the proposal as previously submitted or intended.")}),(0,r.jsx)("p",{children:h("The length value witll be auto-populated from the on-chain value if is is found.")})]})},{children:[(0,r.jsx)(o.II,{autoFocus:!0,isError:!F,label:h("preimage hash"),onChange:pe,value:q||""}),(0,r.jsx)(o.Rn,{defaultValue:Z,isDisabled:!!(null==re?void 0:re.proposalLength)&&!(null==re?void 0:re.proposalLength.isZero())&&F&&L,isError:!L,label:h("preimage length"),onChange:fe,value:B},"inputLength")]})),(0,r.jsx)(o.u_.Columns,Xe({align:"center",hint:h("The moment of enactment, either at a specific block, or after a specific number of blocks.")},{children:(0,r.jsx)(o.tX,{onChange:$,options:de,value:W})})),0===W?(0,r.jsx)(o.u_.Columns,Xe({hint:h("The number of blocks to delay enactment after proposal approval.")},{children:(0,r.jsx)(o.Rn,{defaultValue:u.S8,isError:ie,label:h("after number of blocks"),onChange:Q,value:J})})):(0,r.jsx)(o.u_.Columns,Xe({hint:h("A specific block to enact the proposal at.")},{children:(0,r.jsx)(o.Rn,{defaultValue:ne,isError:ie,label:h("at specific block"),onChange:Y,value:K})})),(0,r.jsx)(o.u_.Columns,Xe({hint:h("The deposit for this proposal will be locked for the referendum duration.")},{children:(0,r.jsx)(o.H,{defaultValue:v.consts[c].submissionDeposit,isDisabled:!0,label:h("submission deposit")})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:O,icon:"plus",isDisabled:!ue||!F||!L||!O||ie||!(null==re?void 0:re.proposalHash),label:h("Submit proposal"),onStart:N,params:[ue,{Lookup:re?{hash:re.proposalHash,len:B}:{hash:q,len:B}},0===W?{After:J}:{At:K}],tx:v.tx[c].submit})})]})),(0,r.jsx)(o.zx,{icon:"plus",isDisabled:!s,label:h("Submit proposal"),onClick:N})]})}));var en,nn=function(){return nn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},nn.apply(this,arguments)};const tn=a.memo((function(e){var n=e.className,t=e.issuanceActive,a=e.issuanceInactive,s=e.issuanceTotal,l=e.summary,c=l.refActive,u=l.refCount,m=e.withIssuance,h=(0,d.$)().t,p=(0,i.h)().api;return(0,r.jsxs)(o.Ty,nn({className:n},{children:[(0,r.jsxs)("section",{children:[(0,r.jsx)(o.Jy,nn({label:h("active")},{children:void 0===c?(0,r.jsx)("span",nn({className:"--tmp"},{children:"99"})):(0,K.u)(c)})),(0,r.jsx)(o.Jy,nn({label:h("total")},{children:void 0===u?(0,r.jsx)("span",nn({className:"--tmp"},{children:"99"})):(0,K.u)(u)}))]}),m&&(0,r.jsxs)("section",{children:[(0,r.jsx)(o.Jy,nn({label:h("total issuance")},{children:(0,r.jsx)(Se.Z,{className:s?"":"--tmp",value:s||1,withSi:!0})})),(0,x.m)(p.query.balances.inactiveIssuance)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Jy,nn({className:"media--1000",label:h("inactive issuance")},{children:(0,r.jsx)(Se.Z,{className:a?"":"--tmp",value:a||1,withSi:!0})})),(0,r.jsx)(o.Jy,nn({className:"media--800",label:h("active issuance")},{children:(0,r.jsx)(Se.Z,{className:t?"":"--tmp",value:t||1,withSi:!0})}))]})]})]}))}));var rn=function(){return rn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},rn.apply(this,arguments)},an=o.zo.div(on||(on=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--Dropdown.topDropdown {\n    min-width: 25rem;\n    padding-left: 0;\n\n    > label {\n      left: 1.55rem !important;\n    }\n  }\n"],["\n  .ui--Dropdown.topDropdown {\n    min-width: 25rem;\n    padding-left: 0;\n\n    > label {\n      left: 1.55rem !important;\n    }\n  }\n"])));const sn=a.memo((function(e){var n=e.className,t=e.isConvictionVote,h=e.members,f=e.palletReferenda,v=e.palletVote,x=e.ranks,g=(0,d.$)().t,b=(0,i.h)().api,j=(0,l.W7)(b.query.balances.totalIssuance),y=(0,l.W7)(b.query.balances.inactiveIssuance),w=(0,c.x)().allAccounts,N=(0,m.Z)(f),k=N[0],O=N[1],C=p(f,k),S=(0,a.useState)(-1),I=S[0],P=S[1],A=(0,a.useMemo)((function(){return j&&j.sub(y||u.nw)}),[y,j]),M=(0,a.useMemo)((function(){return[{text:g("All active/available tracks"),value:-1}].concat(k.map((function(e){var n=e.trackId;return{text:e.trackName,value:n?n.toNumber():-1}})).filter((function(e){return!!e.text})))}),[k,g]),T=(0,a.useMemo)((function(){return(-1===I?k:k.filter((function(e){var n=e.trackId;return!!n&&n.eqn(I)})))||[{referenda:[]}]}),[k,I]),E=(0,a.useMemo)((function(){return!h||w.some((function(e){return h.includes(e)}))}),[w,h]);return(0,r.jsxs)(an,rn({className:n},{children:[(0,r.jsx)(tn,{issuanceActive:A,issuanceInactive:y,issuanceTotal:j,summary:C,withIssuance:t}),(0,r.jsxs)(o.zx.Group,{children:[(0,r.jsx)(o.Lt,{className:"topDropdown media--800",label:g("selected track"),onChange:P,options:M,value:I}),t&&(0,r.jsx)(J,{palletReferenda:f,palletVote:v,tracks:O}),(0,r.jsx)(s.Z,{}),(0,r.jsx)(Ye,{isMember:E,members:h,palletReferenda:f,tracks:O})]}),T.map((function(e){var n=e.key,t=e.referenda,a=e.trackId,s=e.trackName;return(0,r.jsx)(Ue,{activeIssuance:A,isMember:E,members:h,palletReferenda:f,palletVote:v,ranks:x,referenda:t,trackId:a,trackName:s,tracks:O},n)}))]}))}));var on},89139:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(52322),a=t(2784),s=t(24732),o=t(99501),i=t(54062),l=function(){return l=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},l.apply(this,arguments)};const c=a.memo((function(e){var n=e.basePath,t=e.className,c=(0,i.$)().t,u=(0,a.useRef)([{isRoot:!0,name:"overview",text:c("Overview")}]);return(0,r.jsxs)("main",l({className:t},{children:[(0,r.jsx)(s.mQ,{basePath:n,items:u.current}),(0,r.jsx)(o.Z,{isConvictionVote:!0,palletReferenda:"referenda",palletVote:"convictionVoting"})]}))}))},54062:(e,n,t)=>{t.d(n,{$:()=>a});var r=t(61349);function a(){return(0,r.$G)("app-referenda")}},15336:(e,n,t)=>{t.d(n,{Z:()=>d});var r=t(2784),a=t(90778),s=t(9118),o=t(11677),i=t(95292),l={transform:function(e){return e.map((function(e){return e[0]}))}},c={transform:function(e){var n=e[0][0];return e[1].map((function(e,t){if(!e.isCasting)return null;var r=e.asCasting;return[n[t][1],r.votes.map((function(e){return e[0]})),r]})).filter((function(e){return!!e}))},withParamsTransform:!0},u={transform:function(e){var n=e[0][0];return e[1].map((function(e,t){return e.isSome?[n[t],e.unwrap()]:null})).filter((function(e){return!!e}))},withParamsTransform:!0};const d=(0,o.e)("useAccountLocks",(function(e,n,t){var o,d,m,h=(0,a.h)().api,p=(0,r.useMemo)((function(){return[t]}),[t]),f=(0,s.W7)(p&&(null===(o=h.query[n])||void 0===o?void 0:o.classLocksFor),p,l),v=(0,r.useMemo)((function(){return function(e,n){if(n)return[n.map((function(n){return[e,n]}))]}(t,f)}),[t,f]),x=(0,s.W7)(v&&(null===(d=h.query[n])||void 0===d?void 0:d.votingFor.multi),v,c),g=(0,r.useMemo)((function(){return function(e){if(e&&e.length){var n=e.reduce((function(e,n){var t=n[1];return e.concat(t)}),[]);if(n.length)return[n]}}(x)}),[x]),b=(0,s.W7)(g&&(null===(m=h.query[e])||void 0===m?void 0:m.referendumInfoFor.multi),g,u);return(0,r.useMemo)((function(){return x&&b&&function(e,n,t,r){for(var a=e.consts[n].voteLockingPeriod,s=[],o=0;o<t.length;o++)for(var l=t[o],c=l[0],u=l[2],d=function(e){var n=u.votes[e],t=n[0],o=n[1],l=r.find((function(e){return e[0].eq(t)}));if(l){var d=l[1],m=void 0,h=void 0,p=0,f="None";if(o.isStandard){var v=o.asStandard,x=v.balance,g=v.vote;m=x,(d.isApproved&&g.isAye||d.isRejected&&g.isNay)&&(p=g.conviction.index,f=g.conviction.type)}else if(o.isSplit){var b=o.asSplit,j=b.aye,y=b.nay;m=j.add(y)}else if(o.isSplitAbstain){var w=o.asSplitAbstain,N=w.abstain;j=w.aye,y=w.nay,m=j.add(y).add(N)}else console.error("Unable to handle ".concat(o.type));d.isOngoing?h=i.Ew:d.isKilled?h=d.asKilled:d.isCancelled||d.isTimedOut?h=d.isCancelled?d.asCancelled[0]:d.asTimedOut[0]:d.isApproved||d.isRejected?h=a.muln(p).add(d.isApproved?d.asApproved[0]:d.asRejected[0]):console.error("Unable to handle ".concat(d.type)),m&&h&&s.push({classId:c,endBlock:h,locked:f,refId:t,total:m})}},m=0;m<u.votes.length;m++)d(m);return s}(h,n,x,b)}),[h,n,b,x])}))},1398:(e,n,t)=>{t.d(n,{E:()=>o,Z:()=>i});var r=t(2784),a=t(11677),s=t(80973);function o(e){var n=(0,s.Z)(e)[0];return(0,r.useMemo)((function(){return n?n.reduce((function(e,n){var t=n.referenda;return e+(t?t.filter((function(e){return e.info.isOngoing})).length:0)}),0):0}),[n])}const i=(0,a.e)("useCounter",(function(){return o("referenda")}))},80973:(e,n,t)=>{t.d(n,{Z:()=>g});var r=t(2784),a=t(90778),s=t(9118),o=t(11677),i=t(12298),l=t(39824),c={transform:function(e){return e.map((function(e){return e.args[0]}))}};function u(e){var n=[],t=[];return e.forEach((function(e){var r=e.event,a=r.data[0];"Submitted"===r.method?n.push(a):t.push(a)})),{added:n,removed:t}}const d=(0,o.e)("useReferendaIds",(function(e){var n=(0,a.h)().api,t=(0,i.k)(n.query[e].referendumInfoFor,[],c);return(0,l.N)([n.events[e].Submitted],u,t)}));var m=t(57387);const h=(0,o.e)("useTracks",(function(e){var n=(0,a.h)().api;return(0,r.useMemo)((function(){return n.consts[e].tracks.map((function(e){var n=e[0],t=e[1];return{graph:(0,m.nb)(t),id:n,info:t}}))}),[n,e])}));function p(e,n){return(e.info.isOngoing===n.info.isOngoing?e.info.isOngoing?function(e,n){var t=e.info.asOngoing,r=n.info.asOngoing;return t.track.cmp(r.track)||(t.deciding.isSome===r.deciding.isSome?t.deciding.isSome?e.info.asOngoing.deciding.unwrap().since.cmp(n.info.asOngoing.deciding.unwrap().since):0:t.deciding.isSome?-1:1)}(e,n):0:e.info.isOngoing?-1:1)||n.id.cmp(e.id)}function f(e,n){return e.trackId&&n.trackId?e.trackId.cmp(n.trackId):e.trackId?-1:1}var v={transform:function(e){var n=e[0][0];return e[1].map((function(e,t){return e.isSome?[n[t],e.unwrap()]:null})).filter((function(e){return!!e})).map((function(e){var n=e[0],t=e[1];return{id:n,info:t,isConvictionVote:(0,m.pq)(t),key:n.toString()}}))},withParamsTransform:!0};function x(e,n,t){if(!t||!n)return[{key:"empty"}];if(!e)return[{key:"referenda",referenda:t.sort(p)}];for(var r=[],a={key:"referenda",referenda:[]},s=function(s){var o=t[s],i=o.info.isOngoing?e.find((function(e){return e.id.eq(o.info.asOngoing.track)})):void 0;if(i){if(o.trackGraph=i.graph,o.trackId=i.id,o.track=i.info,o.isConvictionVote&&o.info.isOngoing){var l=o.info.asOngoing,c=l.deciding,u=l.tally;if(c.isSome){var d=c.unwrap().since;o.decidingEnd=(0,m.z9)(n,u,i.info,d)}}var h=r.find((function(e){var n=e.track;return o.track===n}));h?h.referenda.push(o):r.push({key:"track:".concat(o.trackId.toString()),referenda:[o],track:o.track,trackGraph:o.trackGraph,trackId:o.trackId,trackName:(0,m.tp)(o.trackId,o.track)})}else a.referenda.push(o)},o=0;o<t.length;o++)s(o);for((a.referenda&&0!==a.referenda.length||!r.length)&&r.push(a),o=0;o<r.length;o++)r[o].referenda.sort(p);return r.sort(f)}const g=(0,o.e)("useReferenda",(function(e){var n=(0,a.h)(),t=n.api,o=n.isApiReady,i=(0,s.W7)(o&&t.query.balances.totalIssuance),l=d(e),c=h(e),u=(0,s.W7)(o&&l&&0!==l.length&&t.query[e].referendumInfoFor.multi,[l],v);return(0,r.useMemo)((function(){return[l&&0===l.length?[{key:"referenda",referenda:[]}]:x(c,i,u),c]}),[l,u,i,c])}))},57387:(e,n,t)=>{t.d(n,{K2:()=>h,nb:()=>b,pq:()=>f,tp:()=>m,z9:()=>g});var r=t(80041),a=t(14681),s=t(69543),o=t(33403),i=t(95292),l=t(52107),c=t(48801),u=t.n(c),d=500;function m(e,n){var t=n.name;return"".concat((0,a.u)(e)," / ").concat(t.replace(/_/g," ").split(" ").map(s.KT).join(" "))}function h(e,n,t,a,s){var i;if(a&&void 0!==s&&-1!==s){var l=(0,r.Z)(e,n,t),c=a.find((function(e){return e.id.eqn(s)}));if(c&&l){var u=c.info.name.toString(),d=l.find((function(e){var n=e.id,t=e.name;return n===s&&t===u}));d&&(i=(0,o.Z)({track:c,trackName:m(c.id,c.info)},d))}}return i}function p(e){return!!e.support&&!e.bareAyes}function f(e){return e.isOngoing&&p(e.asOngoing.tally)}function v(e,n,t){if(t.isZero())return i.ed;var r=n.mul(i.ed).div(t);if(e.isLinearDecreasing){var a=e.asLinearDecreasing,s=a.ceil,o=a.floor,c=a.length;return s.sub((0,l.N)(r,c).mul(s.sub(o)).div(c))}if(e.isSteppedDecreasing){var u=e.asSteppedDecreasing,d=u.begin,m=u.end,h=u.period,p=u.step;return(0,l.x)(m,d.sub((0,l.N)(d,p.mul(r).div(h))))}if(e.asReciprocal){var f=e.asReciprocal,v=f.factor,x=f.xOffset,g=f.yOffset,b=r.add(x);return b.isZero()?i.ed:(0,l.N)(i.ed,v.mul(i.ed).div(b).add(g))}throw new Error("Unknown curve found ".concat(e.type))}function x(e,n,t){try{if(t.isZero())return i.ed;var r=n.mul(i.ed).div(t);if(e.isLinearDecreasing){var a=e.asLinearDecreasing,s=a.ceil,o=a.floor,c=a.length;return r.lt(o)?i.ed:r.gt(s)?i.nw:(0,l.N)(i.ed,(0,l.x)(i.nw,s.sub(r).mul(c).div(s.sub(o))))}if(e.isSteppedDecreasing){var u=e.asSteppedDecreasing,d=u.begin,m=u.end,h=u.period,p=u.step;return r.lt(m)?i.ed:(0,l.N)(i.ed,(0,l.x)(i.nw,h.mul(d.sub((0,l.N)(r,d)).add(p.isZero()?p:p.sub(i.If))).div(p)))}if(e.asReciprocal){var f=e.asReciprocal,v=f.factor,x=f.xOffset,g=f.yOffset,b=r.sub(g);return b.isZero()?i.ed:(0,l.N)(i.ed,(0,l.x)(i.nw,v.mul(i.ed).div(b).sub(x)))}}catch(n){throw console.error("Failed on curve ".concat(e.type,":"),e.inner.toHuman()),n}throw new Error("Unknown curve found ".concat(e.type))}function g(e,n,t,r){var a=t.decisionPeriod,s=t.minApproval,o=t.minSupport,c=p(n)?n.support:n.bareAyes;return r.add(a.mul((0,l.x)(x(s,n.ayes,n.ayes.add(n.nays)),x(o,c,e))).div(i.ed))}function b(e){for(var n=e.decisionPeriod,t=e.minApproval,r=e.minSupport,a=new Array(d),s=new Array(d),o=new Array(d),i=n.divn(d),l=new(u())(0),c=0;c<499;c++)a[c]=v(t,l,n),s[c]=v(r,l,n),o[c]=l,l=l.add(i);return a[499]=v(t,n,n),s[499]=v(r,n,n),o[499]=n,{approval:a,support:s,x:o}}},6583:(e,n,t)=>{t.d(n,{Z:()=>S});var r,a,s=t(52322),o=t(2784),i=t(7267),l=t(24732),c=t(86135),u=t(83488),d=t(1346),m=function(){return m=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},m.apply(this,arguments)},h=l.zo.section(f||(r=["\n  .ui--Output > label {\n    text-transform: none;\n  }\n"],a=["\n  .ui--Output > label {\n    text-transform: none;\n  }\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,f=r));const p=o.memo((function(e){var n=e.queue,t=(void 0===n?[]:n).filter((function(e){var n=e.error,t=e.result;return!(0,d.o)(n)||!(0,d.o)(t)})).reverse();return t.length?(0,s.jsx)(h,m({className:"rpc--Results"},{children:t.map((function(e){var n=e.error,t=e.id,r=e.result,a=e.rpc,o=a.method,i=a.section,c=a.type;return(0,s.jsx)(l.r_,{isError:!!n,label:"".concat(t,": ").concat(i,".").concat(o,": ").concat(c),value:n?n.message:(0,s.jsx)("pre",{children:(0,u.Z)("",r)})},t)}))})):null}));var f,v=t(87418),x=t(6046),g=t(13529),b=t(17751),j=t(61349);function y(){return(0,j.$G)("app-rpc")}var w=function(){return w=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},w.apply(this,arguments)},N=g.Z.author.submitExtrinsic;const k=o.memo((function(e){var n=e.queueRpc,t=y().t,r=(0,o.useState)({isValid:!1,rpc:N,values:[]}),a=r[0],i=a.isValid,c=a.rpc,u=a.values,d=r[1],m=(0,o.useMemo)((function(){return c.params.map((function(e){var n=e.isOptional,t=e.name,r=e.type;return{name:t,type:(0,x.s)(n?"Option<".concat(r,">"):r)}}))}),[c]),h=(0,o.useCallback)((function(e){return d((function(n){var t=e.rpc,r=void 0===t?n.rpc:t,a=e.values,s=void 0===a?n.values:a,o=r.params.reduce((function(e,n){return e+(n.isOptional?0:1)}),0);return{isValid:s.reduce((function(e,n){return e&&!0===n.isValid}),o<=s.length),rpc:r,values:s}}))}),[]),p=(0,o.useCallback)((function(e){return h({rpc:e,values:[]})}),[h]),f=(0,o.useCallback)((function(e){return h({values:e})}),[h]),g=(0,o.useCallback)((function(){return n({rpc:c,values:u.filter((function(e){var n=e.value;return!(0,b.F)(n)})).map((function(e){return e.value}))})}),[n,c,u]);return(0,s.jsxs)("section",w({className:"rpc--Selection"},{children:[(0,s.jsx)(l.iQ,{defaultValue:N,label:t("call the selected endpoint"),onChange:p}),(0,s.jsx)(v.Z,{onChange:f,params:m},"".concat(c.section,".").concat(c.method,":params")),(0,s.jsx)(l.zx.Group,{children:(0,s.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:!i,label:t("Submit RPC call"),onClick:g})})]}))})),O=o.memo((function(){var e=(0,c.L)(),n=e.queueRpc,t=e.txqueue;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k,{queueRpc:n}),(0,s.jsx)(p,{queue:t})]})}));var C=function(){return C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)};const S=o.memo((function(e){var n=e.basePath,t=y().t,r=(0,o.useRef)([{isRoot:!0,name:"rpc",text:t("Submission")}]);return(0,s.jsxs)("main",C({className:"rpc--App"},{children:[(0,s.jsx)(l.mQ,{basePath:n,items:r.current}),(0,s.jsx)(i.rs,{children:(0,s.jsx)(i.AW,{children:(0,s.jsx)(O,{})})})]}))}))},39117:(e,n,t)=>{t.d(n,{Z:()=>j});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(90778),l=t(83488),c=function(){return c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},c.apply(this,arguments)};const u=a.memo((function(e){var n=e.results;return n.length?(0,r.jsx)("section",c({className:"runtime--Results"},{children:n.map((function(e){var n=e.def,t=n.method,a=n.section,s=n.type,i=e.error,c=e.id,u=e.result;return(0,r.jsx)(o.r_,{isError:!!i,label:"".concat(c,": ").concat(a,".").concat(t,": ").concat(s),value:i?i.message:(0,r.jsx)("pre",{children:(0,l.Z)("",u)})},c)}))})):null}));var d=t(87418),m=t(6046),h=t(61349);function p(){return(0,h.$G)("app-runtime")}var f=function(){return f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},f.apply(this,arguments)};const v=a.memo((function(e){var n=e.onSubmit,t=p().t,s=(0,a.useState)({isValid:!1,method:null,values:[]}),i=s[0],l=i.isValid,c=i.method,u=i.values,h=s[1],v=(0,a.useMemo)((function(){return c?c.params.map((function(e){var n=e.name,t=e.type;return{name:n,type:(0,m.s)(t)}})):[]}),[c]),x=(0,a.useCallback)((function(e){return h((function(n){var t=e.method,r=void 0===t?n.method:t,a=e.values,s=void 0===a?n.values:a;return{isValid:s.reduce((function(e,n){return e&&!0===n.isValid}),!!r&&r.params.length<=s.length),method:r,values:s}}))}),[]),g=(0,a.useCallback)((function(e){return x({method:e,values:[]})}),[x]),b=(0,a.useCallback)((function(e){return x({values:e})}),[x]),j=(0,a.useCallback)((function(){c&&n(c,u)}),[n,c,u]);return(0,r.jsxs)("section",f({className:"runtime--Selection"},{children:[(0,r.jsx)(o.$q,{label:t("call the selected endpoint"),onChange:g}),c&&(0,r.jsx)(d.Z,{onChange:b,params:v},"".concat(c.section,".").concat(c.method,":params")),(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(o.zx,{icon:"sign-in-alt",isDisabled:!l||!c,label:t("Submit Runtime call"),onClick:j})})]}))}));var x=0;const g=a.memo((function(){var e=(0,i.h)().api,n=(0,a.useState)([]),t=n[0],s=n[1],o=(0,a.useCallback)((function(e){return s((function(n){var t;return(t=[e]).concat.apply(t,n)}))}),[]),l=(0,a.useCallback)((function(n,t){var r;(r=e.call[n.section])[n.method].apply(r,t.map((function(e){return e.value}))).then((function(e){return o({def:n,id:++x,result:e})})).catch((function(e){o({def:n,error:e,id:++x}),console.error(e)}))}),[e,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{onSubmit:l}),(0,r.jsx)(u,{results:t})]})}));var b=function(){return b=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},b.apply(this,arguments)};const j=a.memo((function(e){var n=e.basePath,t=p().t,i=(0,a.useRef)([{isRoot:!0,name:"runtime",text:t("Calls")}]);return(0,r.jsxs)("main",b({className:"runtime--App"},{children:[(0,r.jsx)(o.mQ,{basePath:n,items:i.current}),(0,r.jsx)(s.rs,{children:(0,r.jsx)(s.AW,{children:(0,r.jsx)(g,{})})})]}))}))},14673:(e,n,t)=>{t.d(n,{Z:()=>S});var r=t(52322),a=t(2784),s=t(24732),o=t(90778),i=t(54383),l=t(9118),c=t(71679),u=t(92914),d=t(65874),m=t(14681),h=function(){return h=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},h.apply(this,arguments)};const p=a.memo((function(e){var n=e.value,t=n.at,a=n.image,o=n.imageHash,l=n.index,p=(0,i.C)();return(0,r.jsxs)("tr",{children:[(0,r.jsx)(s.iA.Column.Id,{value:l}),(0,r.jsx)(u.Z,{imageHash:o,proposal:null==a?void 0:a.proposal}),(0,r.jsx)("td",h({className:"number together"},{children:p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{value:t.sub(p)}),"#",(0,m.u)(t)]})})),(0,r.jsx)("td",h({className:"button"},{children:!(null==a?void 0:a.proposal)&&(0,r.jsx)(c.Z,{imageHash:o,isImminent:!0})})),(0,r.jsx)("td",h({className:"links media--1000"},{children:(0,r.jsx)(s.NR,{data:l,type:"democracyReferendum"})}))]})}));var f=t(61349);function v(){return(0,f.$G)("app-scheduler")}var x=function(){return x=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},x.apply(this,arguments)};const g=a.memo((function(e){var n=e.className,t=v().t,c=(0,o.h)().api,u=(0,i.C)(),d=(0,l.W7)(c.derive.democracy.dispatchQueue),m=(0,a.useMemo)((function(){return u&&d&&d.filter((function(e){return e.at.gte(u)})).sort((function(e,n){return e.at.cmp(n.at)}))}),[u,d]),h=(0,a.useRef)([[t("dispatch queue"),"start",2],[t("enact")],[],[void 0,"media--1000"]]);return(0,r.jsx)(s.iA,x({className:n,empty:m&&t("Nothing queued for execution"),header:h.current},{children:null==m?void 0:m.map((function(e){return(0,r.jsx)(p,{value:e},e.index.toString())}))}))}));var b=t(74525),j=t(31313),y=function(){return y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},y.apply(this,arguments)};const w=a.memo((function(e){var n=e.bestNumber,t=e.className,a=void 0===t?"":t,o=e.value,i=o.blockNumber,l=o.call,c=o.maybeId,u=o.maybePeriodic,h=o.preimageHash,p=(0,j.CH)(h),f=u.unwrapOr(null),v=c.unwrapOr(null);return(0,r.jsxs)("tr",y({className:a},{children:[(0,r.jsx)("td",y({className:"all"},{children:(0,r.jsx)(s.Uv,{value:l||(null==p?void 0:p.proposal)})})),v?v.isAscii?(0,r.jsx)("td",y({className:"start"},{children:v.toUtf8()})):(0,r.jsx)(b.Z,{value:v.toHex()}):(0,r.jsx)("td",{}),(0,r.jsx)("td",y({className:"number together"},{children:n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{value:i.sub(n)}),"#",(0,m.u)(i)]})})),(0,r.jsx)("td",y({className:"number together"},{children:f&&(0,m.u)(f[0])})),(0,r.jsx)("td",y({className:"number together"},{children:f&&(0,m.u)(f[1])}))]}))}));var N=function(){return N=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},N.apply(this,arguments)},k={transform:function(e,n){return e.filter((function(e){return e[1].some((function(e){return e.isSome}))})).reduce((function(e,t){var r=t[0],a=t[1],s=r.args[0];return a.filter((function(e){return e.isSome})).map((function(e){return e.unwrap()})).reduce((function(e,t,r){var a,o=t.call,i=t.maybeId,l=t.maybePeriodic,c=t.priority,u=null;if(o.inner)if(o.isValue)u=o.asValue;else if(o.isInline)try{u=n.registry.createType("Call",o.asInline.toHex())}catch(e){console.error(e)}else o.isLookup&&(a=o);else u=o;return e.push({blockNumber:s,call:u,key:"".concat(s.toString(),"-").concat(r),maybeId:i,maybePeriodic:l,preimageHash:a,priority:c}),e}),e)}),[])}};const O=a.memo((function(e){var n=e.className,t=void 0===n?"":n,c=v().t,u=(0,o.h)().api,d=(0,i.C)(),m=(0,l.W7)(u.query.scheduler.agenda.entries,void 0,k),h=(0,a.useMemo)((function(){return d&&m&&m.filter((function(e){return e.blockNumber.gte(d)})).sort((function(e,n){return e.blockNumber.cmp(n.blockNumber)}))}),[d,m]),p=(0,a.useRef)([[c("scheduled"),"start"],[c("id"),"start"],[c("remaining")],[c("period")],[c("count")]]);return(0,r.jsx)(s.iA,N({className:t,empty:h&&c("No active schedules"),header:p.current},{children:null==h?void 0:h.map((function(e){return(0,r.jsx)(w,{bestNumber:d,value:e},e.key)}))}))}));var C=function(){return C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)};const S=a.memo((function(e){var n=e.basePath,t=e.className,i=v().t,l=(0,o.h)().api,c=(0,a.useMemo)((function(){return[{isRoot:!0,name:"overview",text:i("Overview")}]}),[i]);return(0,r.jsxs)("main",C({className:t},{children:[(0,r.jsx)(s.mQ,{basePath:n,items:c}),l.query.democracy&&(0,r.jsx)(g,{}),l.query.scheduler&&(0,r.jsx)(O,{})]}))}))},19433:(e,n,t)=>{t.d(n,{Z:()=>Ie});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(90778),l=t(61349),c=t(23729),u=t.n(c),d=t(81369),m=t(56623),h=t(43357),p=t(64021);function f(){return(0,l.$G)("app-settings")}var v,x,g=function(){return g=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},g.apply(this,arguments)},b="{\n\n}",j={},y=o.zo.div(N||(v=["\n  .editor {\n    height: 21rem;\n    margin-left: 2rem;\n    position: relative;\n  }\n\n  .help {\n    padding: 0.5rem 2rem;\n  }\n"],x=["\n  .editor {\n    height: 21rem;\n    margin-left: 2rem;\n    position: relative;\n  }\n\n  .help {\n    padding: 0.5rem 2rem;\n  }\n"],Object.defineProperty?Object.defineProperty(v,"raw",{value:x}):v.raw=x,N=v));const w=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.onStatusChange,c=f().t,v=(0,i.h)().api,x=(0,a.useState)(b),w=x[0],N=x[1],k=(0,a.useState)(!0),O=k[0],C=k[1],S=(0,a.useState)(!0),I=S[0],P=S[1],A=(0,a.useState)(j),M=A[0],T=A[1],E=(0,a.useState)(null),D=E[0],q=E[1],F=(0,a.useState)(null),V=F[0],R=F[1];(0,a.useEffect)((function(){var e=(0,d.decodeUrlTypes)()||u().get("types")||{};Object.keys(e).length&&(N(JSON.stringify(e,null,2)),T({}),q(Object.keys(e).join(", ")),R((0,d.encodeUrlTypes)(e)))}),[]);var _=(0,a.useCallback)((function(e){var n=e.code,t=e.isJsonValid,r=e.isTypesValid,a=e.types,s=e.typesPlaceholder;N(n),C(t),P(r),T(a),q(s)}),[]),B=(0,a.useCallback)((function(){u().remove("types"),_({code:b,isJsonValid:!0,isTypesValid:!0,types:j,typesPlaceholder:null})}),[_]),Z=(0,a.useCallback)((function(e){var n=(0,m.z)(e);try{var t=JSON.parse(n),r=Object.keys(t).join(", ");console.log("Detected types:",r),_({code:n,isJsonValid:!0,isTypesValid:!0,types:0===Object.keys(t).length?{}:t,typesPlaceholder:r})}catch(e){console.error("Error registering types:",e),_({code:n,isJsonValid:!1,isTypesValid:!1,types:{},typesPlaceholder:e.message})}}),[_]),L=(0,a.useCallback)((function(e){try{if(!(0,h.b)(e))throw Error("This is not a valid JSON object.");Z((0,p.d)(e))}catch(n){N(e),C(!1),q(n.message)}}),[Z]),H=(0,a.useCallback)((function(){var e=null;try{v.registerTypes(M),u().set("types",M),P(!0),s({action:c("Your custom types have been added"),status:"success"}),Object.keys(M).length&&(e=(0,d.encodeUrlTypes)(M),console.log(e))}catch(e){console.error(e),P(!1),s({action:c("Error saving your custom types. ".concat(e.message)),status:"error"})}R(e)}),[v,s,c,M]),z=0===Object.keys(M).length;return(0,r.jsxs)(y,g({className:t},{children:[(0,r.jsx)("div",g({className:"ui--row"},{children:(0,r.jsx)("div",g({className:"full"},{children:(0,r.jsx)(o.ht,{clearContent:z&&I,isError:!I,label:c("Additional types as a JSON file (or edit below)"),onChange:Z,placeholder:D})}))})),(0,r.jsx)("div",g({className:"ui--row"},{children:(0,r.jsx)("div",g({className:"full"},{children:(0,r.jsx)(o.ML,{className:"editor",code:w,isValid:O,onEdit:L})}))})),(0,r.jsx)("div",g({className:"ui--row"},{children:(0,r.jsx)("div",g({className:"full"},{children:(0,r.jsx)(l.cC,g({i18nKey:"devConfig"},{children:(0,r.jsxs)("div",g({className:"help"},{children:["If you are a development team with at least a test network available, consider adding the types directly ",(0,r.jsx)("a",g({href:"https://github.com/polkadot-js/apps/tree/master/packages/apps-config",rel:"noopener noreferrer",target:"_blank"},{children:"to the apps-config"})),", allowing out of the box operation for your spec & chains, both for you and anybody trying to connect to it. This is not a replacement for your chain-specific UI, however doing so does help in allowing users to easily discover and use with zero-config."]}))}))}))})),(0,r.jsxs)(o.zx.Group,{children:[(0,r.jsx)(o.qi,{label:c("Share"),type:c("url"),value:V}),(0,r.jsx)(o.zx,{icon:"sync",label:c("Reset"),onClick:B}),(0,r.jsx)(o.zx,{icon:"save",isDisabled:!I||!O,label:c("Save"),onClick:H})]})]}))}));var N,k=t(9242),O=t(37417),C=t(72570),S=t(83337),I=t(45479),P=t(16039),A=t(35189),M=function(){return M=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},M.apply(this,arguments)},T=P.X.availableLedgerConn;const E=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=f().t,l=(0,i.h)(),c=l.chainSS58,u=l.isApiReady,d=l.isElectron,m=(0,S.g)().isIpfs,h=(0,I.c)(),p=h.hasLedgerChain,v=h.hasWebUsb,x=(0,a.useState)(null),g=x[0],b=x[1],j=(0,a.useState)((function(){var e=P.X.get();return M(M({},e),{uiTheme:"dark"===e.uiTheme?"dark":"light"})})),y=j[0],w=j[1],N=(0,a.useMemo)((function(){return T.filter((function(e){var n=e.value;return!d||"webusb"!==n}))}),[d]),E=(0,a.useMemo)((function(){return P.X.availableIcons.map((function(e){return(0,A.tI)(e,["default"])})).concat((0,A.tI)({info:"robohash",text:"RoboHash",value:"robohash"}))}),[]),D=(0,a.useMemo)((function(){var e=C.FA.find((function(e){return e.prefix===c}));return(0,k.M)(s).map((function(n){return(0,A.SX)(n,["default"],"empty",-1===n.value?u?e?" (".concat(e.displayName,", ").concat(c||0,")"):" (".concat(c||0,")"):void 0:" (".concat(n.value,")"))}))}),[c,u,s]),q=(0,a.useMemo)((function(){return[{text:s("Allow local in-browser account storage"),value:"on"},{text:s("Do not allow local in-browser account storage"),value:"off"}]}),[s]),F=(0,a.useMemo)((function(){return[{text:s("Light theme"),value:"light"},{text:s("Dark theme"),value:"dark"}]}),[s]),V=(0,a.useMemo)((function(){return(0,O.L)(s)}),[s]);(0,a.useEffect)((function(){var e=P.X.get(),n=Object.entries(y).some((function(n){var t=n[0],r=n[1];return e[t]!==r})),t=e.apiUrl!==y.apiUrl||e.prefix!==y.prefix;b(n?t:null)}),[y]);var R=(0,a.useCallback)((function(e){return function(n){return w((function(t){var r;return M(M({},t),((r={})[e]=n,r))}))}}),[]),_=(0,a.useCallback)((function(){return(0,A.wg)(y)}),[y]),B=(0,a.useCallback)((function(){(0,A.a1)(y),b(null)}),[y]);return(0,r.jsxs)("div",M({className:t},{children:[(0,r.jsx)("h1",{children:s("UI options")}),(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Lt,{defaultValue:y.icon,label:s("default icon theme"),onChange:R("icon"),options:E})})),(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Lt,{defaultValue:y.uiTheme,label:s("default interface theme"),onChange:R("uiTheme"),options:F})})),(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Lt,{defaultValue:y.i18nLang,label:s("default interface language"),onChange:R("i18nLang"),options:V})})),(0,r.jsx)("h1",{children:s("account options")}),(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Lt,{defaultValue:y.prefix,label:s("address prefix"),onChange:R("prefix"),options:D})})),!m&&!d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Lt,{defaultValue:y.storage,label:s("in-browser account creation"),onChange:R("storage"),options:q})})),"on"===y.storage&&(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Pd,{content:s("It is recommended that you store all keys externally to the in-page browser local storage, either on browser extensions, signers operating via QR codes or hardware devices. This option is provided for advanced users with strong backup policies.")})}))]}),p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Lt,{defaultValue:v?y.ledgerConn:N[0].value,isDisabled:!v,label:s("manage hardware connections"),onChange:R("ledgerConn"),options:N})})),v?"none"!==y.ledgerConn?(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Pd,{content:s("Ledger support is still experimental and some issues may remain. Trust, but verify the addresses on your devices before transferring large amounts. There are some features that will not work, including batch calls (used extensively in staking and democracy) as well as any identity operations.")})})):null:(0,r.jsx)("div",M({className:"ui--row"},{children:(0,r.jsx)(o.Pd,{content:s("Ledger hardware device support is only available on Chromium-based browsers where WebUSB and WebHID support is available in the browser.")})}))]}),(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(o.zx,{icon:"save",isDisabled:null===g,label:s(g?"Save & Reload":"Save"),onClick:g?_:B})})]}))}));var D=t(46782),q=t.n(D),F=t(94953),V=t(54926),R=t(38894),_=function(){return _=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},_.apply(this,arguments)},B=o.zo.div(L||(L=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .label {\n    font-style: italic;\n    margin-top: 0.5rem;\n\n    +div {\n      margin-left: 1rem;\n    }\n  }\n"],["\n  .label {\n    font-style: italic;\n    margin-top: 0.5rem;\n\n    +div {\n      margin-left: 1rem;\n    }\n  }\n"])));const Z=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.onChange,i=e.original,l=e.tkey,c=e.tval,u=(0,a.useCallback)((function(e){return s(l,e)}),[s,l]);return(0,r.jsxs)(B,_({className:t},{children:[(0,r.jsx)("div",_({className:"label"},{children:i})),(0,r.jsx)(o.II,{onChange:u,value:c,withLabel:!1})]}))}));var L,H=function(){return H=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},H.apply(this,arguments)},z=function(e,n,t,r){return new(t||(t=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,i)}l((r=r.apply(e,n||[])).next())}))},W=function(e,n){var t,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},$=new Map;function U(e){return z(this,void 0,Promise,(function(){var n;return W(this,(function(t){switch(t.label){case 0:return $.has(e)?[2,$.get(e)]:[4,fetch("locales/".concat(e)).then((function(e){return e.json()})).catch((function(e){return console.error(e)}))];case 1:return n=t.sent(),$.set(e,n),[2,n||{}]}}))}))}function J(){return z(this,void 0,Promise,(function(){var e;return W(this,(function(n){switch(n.label){case 0:return[4,U("en/index.json")];case 1:return e=n.sent(),[4,Promise.all(e.map((function(e){return U("en/".concat(e))})))];case 2:return[2,n.sent().reduce((function(n,t,r){return n[e[r]]=t,n}),{})]}}))}))}function G(e,n){var t={},r=0,a=0;return Object.keys(e).forEach((function(s){var o=e[s],i=Object.keys(o).length,l=0;Object.keys(o).forEach((function(e){n[e]&&l++})),r+=l,a+=i,t[s]=[l,i,0]})),[[r,a,0],t]}function Q(e){var n=void 0===e?[0,0,0]:e,t=n[0],r=n[1];return n[2],{done:t,progress:(r?100*t/r:100).toFixed(2),total:r}}var X=o.zo.main(Y||(Y=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--Column {\n    display: flex;\n\n    > div:first-child {\n      flex: 1;\n      text-align: right;\n    }\n  }\n\n  .ui--Progress {\n    margin: 0 0 0 0.25rem;\n  }\n\n  .toggleWrapper {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 0.75rem;\n  }\n"],["\n  .ui--Column {\n    display: flex;\n\n    > div:first-child {\n      flex: 1;\n      text-align: right;\n    }\n  }\n\n  .ui--Progress {\n    margin: 0 0 0 0.25rem;\n  }\n\n  .toggleWrapper {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 0.75rem;\n  }\n"])));const K=a.memo((function(e){var n,t,s=e.className,i=f().t,l=(0,R.O)(),c=l[0],u=l[1],d=(0,a.useState)({english:{},keys:[],modules:[]}),m=d[0],h=m.english,p=m.keys,v=m.modules,x=d[1],g=(0,a.useState)("zh"),b=g[0],j=g[1],y=(0,a.useState)([[0,0,0],{}]),w=y[0],N=w[0],k=w[1],O=y[1],C=(0,a.useState)("app-accounts.json"),S=C[0],I=C[1],A=(0,a.useState)(null),M=A[0],T=A[1];(0,a.useEffect)((function(){(function(){return z(this,void 0,Promise,(function(){var e,n,t,r,a,s;return W(this,(function(o){switch(o.label){case 0:return[4,U("index.json")];case 1:return e=o.sent(),n=e.filter((function(e){return"en"!==e})),t=n.filter((function(e){return!V.Z[e]})),[4,J()];case 2:return r=o.sent(),t.length?[4,Promise.all(t.map((function(e){return U("".concat(e,"/translation.json"))})))]:[3,4];case 3:return s=o.sent(),[3,5];case 4:s=[],o.label=5;case 5:return a=s,t.forEach((function(e,n){V.Z[e]=a[n]})),n.forEach((function(e){Object.keys(r).forEach((function(n){Object.keys(r[n]).forEach((function(n){V.Z[e][n]||(V.Z[e][n]="")}))}))})),[2,{english:r,keys:n.map((function(e){return{text:e,value:e}})),modules:Object.keys(r).map((function(e){return{text:e.replace(".json","").replace("app-","page-"),value:e}})).sort((function(e,n){return e.text.localeCompare(n.text)}))}]}}))}))})().then(x).catch(console.error)}),[]),(0,a.useEffect)((function(){T(V.Z[b]),O(G(h,V.Z[b]))}),[h,b]),(0,a.useEffect)((function(){j(p.some((function(e){return e.value===P.X.i18nLang}))?P.X.i18nLang:"zh")}),[p]);var E=(0,a.useCallback)((function(e,n){T((function(t){var r;return t?H(H({},t),((r={})[e]=n,r)):null}));var t=!!V.Z[b][e],r=n.trim();if(V.Z[b][e]=n,t!==!!r){var a=G(h,V.Z[b]),s=a[0],o=a[1];O((function(e){var n=e[0];return s[2]=Math.max(0,s[0]-n[0]),[s,o]}))}}),[h,b]),D=(0,a.useCallback)((function(){F.Z.reloadResources().catch(console.error)}),[]),_=(0,a.useCallback)((function(){return function(e,n){var t=Object.keys(e).sort().reduce((function(t,r){var a=e[r].trim();return(a||n)&&(t[r]=a),t}),{});q().saveAs(new Blob([JSON.stringify(t,null,2)],{type:"application/json; charset=utf-8"}),"translation.json")}(M||{},c)}),[M,c]);return p.length?(0,r.jsxs)(X,H({className:s},{children:[(0,r.jsx)("header",{children:(0,r.jsxs)(o.P0,{children:[(0,r.jsxs)(o.P0.Column,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Lt,{isFull:!0,label:i("the language to display translations for"),onChange:j,options:p,value:b}),i("{{done}}/{{total}}, {{progress}}% done",{replace:Q(N)})]}),(0,r.jsx)(o.Ex,{total:N[1],value:N[0]})]}),(0,r.jsxs)(o.P0.Column,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Lt,{isFull:!0,label:i("the module to display strings for"),onChange:I,options:v,value:S}),i("{{done}}/{{total}}, {{progress}}% done",{replace:Q(k[S])})]}),(0,r.jsx)(o.Ex,{total:null===(n=k[S])||void 0===n?void 0:n[1],value:null===(t=k[S])||void 0===t?void 0:t[0]})]})]})}),(0,r.jsx)("div",H({className:"toggleWrapper"},{children:(0,r.jsx)(o.ZD,{label:i(c?"include all empty strings in the generated file":"do not include empty strings in the generated file"),onChange:u,value:c})})),(0,r.jsxs)(o.zx.Group,{children:[(0,r.jsx)(o.zx,{icon:"sync",label:i("Apply to UI"),onClick:D}),(0,r.jsx)(o.zx,{icon:"download",label:i("Generate {{lng}}/translation.json",{replace:{lng:b}}),onClick:_})]}),S&&M&&Object.keys(h[S]).map((function(e,n){return(0,r.jsx)(Z,{onChange:E,original:h[S][e],tkey:e,tval:M[e]},n)}))]})):(0,r.jsx)(o.$j,{})}));var Y,ee=t(9652),ne=t(57139),te=t(11677),re=t(91783),ae=t(65968),se=t(92730),oe=t(41444);const ie=(0,te.e)("useChainInfo",(function(){var e=(0,i.h)(),n=e.api,t=e.apiEndpoint,r=e.isApiReady,s=e.isEthereum,o=e.specName,l=e.systemChain,c=e.systemName;return(0,a.useMemo)((function(){return r?{chain:l,chainType:s?"ethereum":"substrate",color:null==t?void 0:t.ui.color,genesisHash:n.genesisHash.toHex(),icon:(0,ee.t)(c,o),metaCalls:(0,oe.h$)(n.runtimeMetadata.asCallsOnly.toU8a()),specVersion:n.runtimeVersion.specVersion.toNumber(),ss58Format:(0,ae.h)(n.registry.chainSS58)?n.registry.chainSS58:ne.DEFAULT_SS58.toNumber(),tokenDecimals:(n.registry.chainDecimals||[ne.DEFAULT_DECIMALS.toNumber()])[0],tokenSymbol:(n.registry.chainTokens||se.a.getDefaults().unit)[0],types:(0,re.kh)(n.registry,l,n.runtimeVersion.specName,n.runtimeVersion.specVersion)}:null}),[n,t,r,o,l,c,s])}));var le=t(79444),ce=t(84522),ue=t(11818),de=function(){return de=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},de.apply(this,arguments)},me=function(){return me=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},me.apply(this,arguments)},he=(0,o.zo)(o.iA)(fe||(fe=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  table {\n    overflow: visible;\n  }\n"],["\n  table {\n    overflow: visible;\n  }\n"])));const pe=a.memo((function(e){var n=e.chainInfo,t=e.className,s=f().t,i=(0,ue.Z)().extensions,l=(0,a.useState)(0),c=l[0],u=l[1],d=(0,R.O)(),m=d[0],h=d[1],p=(0,a.useMemo)((function(){return(i||[]).map((function(e,n){var t,a=e.extension,s=a.name,o=a.version;return function(e,n,t){return{text:(0,r.jsxs)("div",de({className:"ui--Dropdown-item"},{children:[(0,r.jsx)("img",{alt:e,className:"ui--Dropdown-icon",src:t}),(0,r.jsx)("div",de({className:"ui--Dropdown-name"},{children:e}))]}),n),value:n}}("".concat(s," ").concat(o),n,(null===(t=le.J[s])||void 0===t?void 0:t.ui.logo)||ce.h)}))}),[i]),v=(0,a.useCallback)((function(){n&&(null==i?void 0:i[c])&&(h(),i[c].update(n).catch((function(){return!1})).then((function(){return h()})).catch(console.error))}),[n,i,c,h]),x=(0,a.useRef)([[s("Extensions"),"start"]]);return(0,r.jsx)(he,me({className:t,empty:s("No Upgradable extensions"),header:x.current},{children:i?0!==p.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("tr",me({className:"isExpanded isFirst"},{children:(0,r.jsx)("td",{children:(0,r.jsx)(o.Lt,{label:s("upgradable extensions"),onChange:u,options:p,value:c})})})),(0,r.jsx)("tr",me({className:"isExpanded isLast"},{children:(0,r.jsx)("td",{children:(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(o.zx,{icon:"upload",isDisabled:m,label:s("Update metadata"),onClick:v})})})}))]}):(0,r.jsx)(o.$j,{})}))}));var fe,ve=t(27421),xe=o.zo.div((function(e){var n=e.color;return"\n  background-color: ".concat(n," !important;\n  width: 100px;\n  flex: 1;\n  border-radius: 4px;\n")}));const ge=a.memo((function(e){var n=e.className,t=e.color;return(0,r.jsx)(xe,{className:n,color:t})}));var be=function(){return be=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},be.apply(this,arguments)};function je(){for(var e="#",n=0;n<6;n++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}var ye={chainType:"substrate",color:"#FFFFFF",decimals:0,genesisHash:"",prefix:0,title:"",unit:"UNIT"},we=(0,o.zo)(o.iA)(ke||(ke=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  td {\n    padding: 0;\n\n    .input.ui--Input input {\n      border: none !important;\n      background: transparent;\n    }\n  }\n\n  .settings--networkSpecs-name {\n    position: relative;\n\n    .settings--networkSpecs-logo {\n      height: 32px;\n      left: 12px;\n      position: absolute;\n      top: 1rem;\n      width: 32px;\n    }\n  }\n\n  .settings--networkSpecs-color {\n    position: relative;\n\n    > div:first-child {\n      display: flex;\n\n      .settings--networkSpecs-colorInput {\n        min-width: 124px;\n      }\n\n      .settings--networkSpecs-colorChangeButton {\n        user-select: none;\n        cursor: pointer;\n        background: transparent;\n        border: none;\n        outline: none;\n        align-self: flex-end;\n        padding-bottom: 0.9rem;\n      }\n    }\n\n    .settings--networkSpecs-colorBar {\n      border-radius: 50%;\n      border: 1px solid grey;\n      height: 32px;\n      left: 12px;\n      position: absolute;\n      top: 1rem;\n      width: 32px;\n    }\n  }\n\n  .settings--networkSpecs-qr {\n    margin: 0.25rem auto;\n    max-width: 15rem;\n\n    img {\n      border: 1px solid white;\n    }\n  }\n"],["\n  td {\n    padding: 0;\n\n    .input.ui--Input input {\n      border: none !important;\n      background: transparent;\n    }\n  }\n\n  .settings--networkSpecs-name {\n    position: relative;\n\n    .settings--networkSpecs-logo {\n      height: 32px;\n      left: 12px;\n      position: absolute;\n      top: 1rem;\n      width: 32px;\n    }\n  }\n\n  .settings--networkSpecs-color {\n    position: relative;\n\n    > div:first-child {\n      display: flex;\n\n      .settings--networkSpecs-colorInput {\n        min-width: 124px;\n      }\n\n      .settings--networkSpecs-colorChangeButton {\n        user-select: none;\n        cursor: pointer;\n        background: transparent;\n        border: none;\n        outline: none;\n        align-self: flex-end;\n        padding-bottom: 0.9rem;\n      }\n    }\n\n    .settings--networkSpecs-colorBar {\n      border-radius: 50%;\n      border: 1px solid grey;\n      height: 32px;\n      left: 12px;\n      position: absolute;\n      top: 1rem;\n      width: 32px;\n    }\n  }\n\n  .settings--networkSpecs-qr {\n    margin: 0.25rem auto;\n    max-width: 15rem;\n\n    img {\n      border: 1px solid white;\n    }\n  }\n"])));const Ne=a.memo((function(e){var n=e.chainInfo,t=e.className,s=f().t,l=(0,i.h)(),c=l.isApiReady,u=l.systemChain,d=(0,a.useState)(ye),m=d[0],h=d[1],p=(0,ve.N)(m,500),v=(0,a.useReducer)((function(e,n){var t=be(be({},e),n);return h(t),t}),ye),x=v[0],g=v[1];(0,a.useEffect)((function(){n&&g({chainType:n.chainType,color:n.color||je(),decimals:n.tokenDecimals,genesisHash:n.genesisHash,prefix:n.ss58Format,title:u,unit:n.tokenSymbol})}),[n,u]);var b=(0,a.useCallback)((function(e){return g({color:e})}),[]),j=(0,a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),g({color:je()})}),[]),y=(0,a.useCallback)((function(){return/^#[\da-fA-F]{6}|#[\da-fA-F]{3}$/.test(x.color)}),[x]),w=(0,a.useRef)([[s("chain specifications"),"start",2]]);return c?(0,r.jsxs)(we,be({className:t,empty:s("No open tips"),header:w.current},{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsxs)("div",be({className:"settings--networkSpecs-name"},{children:[(0,r.jsx)(o.II,{className:"full",isDisabled:!0,label:s("Network Name"),value:x.title}),(0,r.jsx)(o.Mj,{className:"settings--networkSpecs-logo"})]}))}),(0,r.jsx)("td",be({rowSpan:7},{children:m.genesisHash&&(0,r.jsx)(o.K0,{className:"settings--networkSpecs-qr",networkSpecs:p})}))]}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:(0,r.jsxs)("div",be({className:"settings--networkSpecs-color"},{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.II,{className:"full settings--networkSpecs-colorInput",isError:!y(),label:s("Color"),onChange:b,value:x.color}),(0,r.jsx)("a",be({className:"settings--networkSpecs-colorChangeButton",onClick:j},{children:s("generate random color")}))]}),(0,r.jsx)(ge,{className:"settings--networkSpecs-colorBar",color:x.color})]}))})}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:(0,r.jsx)(o.II,{className:"full",isDisabled:!0,label:s("Genesis Hash"),value:x.genesisHash})})}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:(0,r.jsx)(o.II,{className:"full",isDisabled:!0,label:s("Unit"),value:x.unit})})}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:(0,r.jsx)(o.II,{className:"full",isDisabled:!0,label:s("Address Prefix"),value:x.prefix.toString()})})}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:(0,r.jsx)(o.II,{className:"full",isDisabled:!0,label:s("Decimals"),value:x.decimals.toString()})})}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{children:(0,r.jsx)(o.II,{className:"full",isDisabled:!0,label:s("Chain Type"),value:x.chainType})})})]})):(0,r.jsx)(o.$j,{})}));var ke;function Oe(){var e=(0,i.h)().isDevelopment,n=ie();return(0,r.jsxs)(r.Fragment,{children:[!e&&(0,r.jsx)(pe,{chainInfo:n}),(0,r.jsx)(Ne,{chainInfo:n})]})}var Ce=t(76075),Se=function(){return Se=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Se.apply(this,arguments)};const Ie=a.memo((function(e){var n=e.basePath,t=e.onStatusChange,l=f().t,c=(0,i.h)(),u=c.api,d=c.isApiConnected,m=c.isApiReady,h=c.isDevelopment,p=(0,Ce.Z)(),v=(0,a.useMemo)((function(){return[{isRoot:!0,name:"general",text:l("General")},{count:p,name:"metadata",text:l("Metadata")},{name:"developer",text:l("Developer")},{name:"i18n",text:l("Translate")}]}),[p,l]),x=(0,a.useMemo)((function(){return d&&m?h||u.runtimeMetadata.version<=13?[]:["developer"]:["metadata","i18n"]}),[u,d,m,h]);return(0,r.jsxs)("main",Se({className:"settings--App"},{children:[(0,r.jsx)(o.mQ,{basePath:n,hidden:x,items:v}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,Se({path:"".concat(n,"/developer")},{children:(0,r.jsx)(w,{onStatusChange:t})})),(0,r.jsx)(s.AW,Se({path:"".concat(n,"/i18n")},{children:(0,r.jsx)(K,{})})),(0,r.jsx)(s.AW,Se({path:"".concat(n,"/metadata")},{children:(0,r.jsx)(Oe,{})})),(0,r.jsx)(s.AW,{children:(0,r.jsx)(E,{})})]})]}))}))},76075:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(11677),a=t(11818);const s=(0,r.e)("useCounter",(function(){return(0,a.Z)().count}))},11818:(e,n,t)=>{t.d(n,{Z:()=>v});var r=t(2784),a=t(23729),s=t.n(a),o=t(90778),i=t(11677),l=function(){return l=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},l.apply(this,arguments)},c=function(e,n,t,r){return new(t||(t=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,i)}l((r=r.apply(e,n||[])).next())}))},u=function(e,n){var t,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},d=0,m=new Map;function h(e,n){var t=n.name,r=n.version,a="properties:".concat(e.genesisHash.toHex()),o=s().get(a,{});o[t]={extensionVersion:r,ss58Format:e.registry.chainSS58,tokenDecimals:e.registry.chainDecimals[0],tokenSymbol:e.registry.chainTokens[0]},s().set(a,o)}function p(e,n){return c(this,void 0,Promise,(function(){var t,r,a=this;return u(this,(function(s){switch(s.label){case 0:if(!n.metadata)return[2,null];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(t=n.metadata).get()];case 2:return r=s.sent(),[2,{extension:n,known:r,update:function(r){return c(a,void 0,Promise,(function(){var a;return u(this,(function(s){switch(s.label){case 0:a=!1,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,t.provide(r)];case 2:return(a=s.sent())&&(h(e,n),function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}([],m.values(),!0).forEach((function(e){return e(Date.now())}))),[3,4];case 3:return s.sent(),[3,4];case 4:return[2,a]}}))}))}}];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))}var f={count:0,extensions:[]};const v=(0,i.e)("useExtensions",(function(){var e=(0,o.h)(),n=e.api,t=e.extensions,a=e.isApiReady,i=e.isDevelopment,v=(0,r.useState)(),x=v[0],g=v[1],b=(0,r.useState)(0),j=b[0],y=b[1];return(0,r.useEffect)((function(){var e="".concat(++d,"-").concat(Date.now());return m.set(e,y),function(){m.delete(e)}}),[]),(0,r.useEffect)((function(){t&&function(e,n,t){return c(this,void 0,Promise,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,Promise.all(n.map((function(n){return p(e,n)})))];case 1:return[2,t.sent().filter((function(e){return!!e}))]}}))}))}(n,t).then(g).catch(console.error)}),[n,t,j]),(0,r.useMemo)((function(){return!i&&a&&x?function(e,n){var t=n.map((function(n){var t=n.known.find((function(n){var t=n.genesisHash;return e.genesisHash.eq(t)}))||null;return t&&!e.runtimeVersion.specVersion.gtn(t.specVersion)&&function(e,n){var t=n.extension,r=s().get("properties:".concat(e.genesisHash.toHex()),{});if(!r[t.name])return h(e,t),!0;var a=r[t.name],o=a.ss58Format,i=a.tokenDecimals,l=a.tokenSymbol;return o===e.registry.chainSS58&&i===e.registry.chainDecimals[0]&&l===e.registry.chainTokens[0]}(e,n)?null:l(l({},n),{current:t})})).filter((function(e){return!!e}));return{count:t.length,extensions:t}}(n,x):f}),[x,n,a,i])}))},35189:(e,n,t)=>{t.d(n,{SX:()=>i,a1:()=>c,tI:()=>l,wg:()=>u});var r=t(52322),a=(t(2784),t(24732)),s=t(16039),o=function(){return o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},o.apply(this,arguments)};function i(e,n,t,s){var i=e.info,l=e.isHeader,c=e.text,u=e.value;return void 0===n&&(n=[]),void 0===t&&(t="empty"),l?(0,r.jsx)(a.Lt.Header,{content:c},c):{text:(0,r.jsxs)("div",o({className:"ui--Dropdown-item"},{children:[(0,r.jsx)(a.Mj,{className:"ui--Dropdown-icon",logo:i&&n.includes(i)?t:i}),(0,r.jsxs)("div",o({className:"ui--Dropdown-name"},{children:[c,s]}))]}),u),value:u}}function l(e,n,t){var s=e.info,i=e.text,l=e.value;void 0===n&&(n=[]),void 0===t&&(t="empty");var c=s&&n.includes(s)?t:s;return{text:(0,r.jsxs)("div",o({className:"ui--Dropdown-item"},{children:["empty"===c?(0,r.jsx)(a.Mj,{className:"ui--Dropdown-icon",logo:"empty"}):(0,r.jsx)(a.k,{className:"ui--Dropdown-icon",size:32,theme:c,value:"5F9999K9UgTUgSsbXZQcEmRMvQqwJoBUHMv9e1k2MdgghuRA"}),(0,r.jsx)("div",o({className:"ui--Dropdown-name"},{children:i}))]}),l),value:l}}function c(e){s.X.set(e)}function u(e){c(e),window.location.reload()}},24569:(e,n,t)=>{t.d(n,{Z:()=>E});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(345),l=t(38894),c=t(69187),u=t(33661),d=t(74076),m=t(52256),h=t(55858),p=t(61349);function f(){return(0,p.$G)("app-signing")}var v=t(17965),x=function(){return x=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},x.apply(this,arguments)};const g=a.memo((function(e){var n=e.onClose,t=e.onUnlock,s=e.pair,i=f().t,l=(0,a.useState)(!1),c=l[0],u=l[1],d=(0,a.useState)(""),m=d[0],h=d[1],p=(0,a.useState)(""),g=p[0],b=p[1],j=(0,a.useState)(null),y=j[0],w=j[1];(0,a.useEffect)((function(){h((null==s?void 0:s.address)||"")}),[s]),(0,a.useEffect)((function(){w(null)}),[g]);var N=(0,a.useCallback)((function(){s&&s.isLocked&&(u(!0),(0,v.Y)((function(){try{s.decodePkcs8(g)}catch(e){return u(!1),w(e.message)}u(!1),t()})))}),[t,s,g]);return s?(0,r.jsxs)(o.u_,x({className:"toolbox--Unlock",header:i("Unlock account"),onClose:n,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,x({hint:i("This account that will perform the message signing.")},{children:(0,r.jsx)(o.rp,{isDisabled:!0,label:i("account"),value:m})})),(0,r.jsx)(o.u_.Columns,x({hint:i("Unlock the account for signing. Once active the signature will be generated based on the content provided.")},{children:(0,r.jsx)(o.ro,{autoFocus:!0,isError:!!y,label:i("password"),onChange:b,onEnter:N,value:g})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.zx,{icon:"unlock",isBusy:c,label:i("Unlock"),onClick:N})})]})):null}));var b,j,y=function(){return y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},y.apply(this,arguments)},w=o.zo.div(k||(b=["\n  .toolbox--Sign-input {\n    position: relative;\n    width: 100%;\n    height: 100%;\n\n    .unlock-overlay {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top:0;\n      left:0;\n      background-color: #0f0e0e7a;\n    }\n\n    .unlock-overlay-warning {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height:100%;\n    }\n\n    .unlock-overlay-content {\n      color:#fff;\n      padding: 0 2.5rem;\n      text-align:center;\n\n      .ui--Button-Group {\n        text-align: center;\n      }\n    }\n  }\n"],j=["\n  .toolbox--Sign-input {\n    position: relative;\n    width: 100%;\n    height: 100%;\n\n    .unlock-overlay {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      top:0;\n      left:0;\n      background-color: #0f0e0e7a;\n    }\n\n    .unlock-overlay-warning {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height:100%;\n    }\n\n    .unlock-overlay-content {\n      color:#fff;\n      padding: 0 2.5rem;\n      text-align:center;\n\n      .ui--Button-Group {\n        text-align: center;\n      }\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(b,"raw",{value:j}):b.raw=j,k=b));const N=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=f().t,p=(0,a.useState)((function(){return c.Nn.getPairs()[0]||null})),v=p[0],x=p[1],b=(0,a.useState)({data:"",isHexData:!1}),j=b[0],N=j.data,k=j.isHexData,O=b[1],C=(0,a.useState)({isExternal:!1,isHardware:!1,isInjected:!1}),S=C[0].isInjected,I=C[1],P=(0,a.useState)(!1),A=P[0],M=P[1],T=(0,a.useState)({isUsable:!0,signer:null}),E=T[0],D=E.isUsable,q=E.signer,F=T[1],V=(0,a.useState)(""),R=V[0],_=V[1],B=(0,l.O)(),Z=B[0],L=B[1];(0,a.useEffect)((function(){var e=v&&v.meta||{},n=e.isExternal||!1,t=e.isHardware||!1,r=e.isInjected||!1,a=!(n||t||r);I({isExternal:n,isHardware:t,isInjected:r}),M(!r&&(v&&v.isLocked||!1)),_(""),F({isUsable:a,signer:null}),e.source&&r&&(0,i.R0)(e.source).catch((function(){return null})).then((function(e){var n;return F({isUsable:(0,u.m)(null===(n=null==e?void 0:e.signer)||void 0===n?void 0:n.signRaw),signer:(null==e?void 0:e.signer)||null})})).catch(console.error)}),[v]);var H=(0,a.useCallback)((function(e){return e&&x(c.Nn.getPair(e))}),[]),z=(0,a.useCallback)((function(e){return O({data:e,isHexData:(0,d.vq)(e)})}),[]),W=(0,a.useCallback)((function(){if(!A&&D&&v){var e=(0,m.Rl)(N);q&&(0,u.m)(q.signRaw)?(_(""),q.signRaw({address:v.address,data:(0,h.c)(e),type:"bytes"}).then((function(e){var n=e.signature;return _(n)})).catch(console.error)):_((0,h.c)(v.sign(e)))}}),[v,N,A,D,q]),$=(0,a.useCallback)((function(){M(!1),L()}),[L]);return(0,r.jsxs)(w,y({className:"".concat(t," toolbox--Sign")},{children:[(0,r.jsx)("div",y({className:"ui--row"},{children:(0,r.jsx)(o.rp,{className:"full",isInput:!1,label:s("account"),onChange:H,type:"account"})})),(0,r.jsxs)("div",y({className:"toolbox--Sign-input"},{children:[(0,r.jsx)("div",y({className:"ui--row"},{children:(0,r.jsx)(o.II,{autoFocus:!0,className:"full",label:s("sign the following data"),onChange:z,value:N})})),(0,r.jsx)("div",y({className:"ui--row"},{children:(0,r.jsx)(o.qG,{className:"medium",label:s("hex input data"),value:s(k?"Yes":"No")})})),(0,r.jsx)("div",y({className:"ui--row"},{children:(0,r.jsx)(o.r_,{className:"full",isHidden:0===R.length,isMonospace:!0,label:s("signature of supplied data"),value:R,withCopy:!0})})),(0,r.jsx)("div",y({className:"unlock-overlay",hidden:!D||!A||S},{children:A&&(0,r.jsx)("div",y({className:"unlock-overlay-warning"},{children:(0,r.jsxs)("div",y({className:"unlock-overlay-content"},{children:[s("You need to unlock this account to be able to sign data."),(0,r.jsx)("br",{}),(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(o.zx,{icon:"unlock",label:s("Unlock account"),onClick:L})})]}))}))})),(0,r.jsx)("div",y({className:"unlock-overlay",hidden:D},{children:(0,r.jsx)("div",y({className:"unlock-overlay-warning"},{children:(0,r.jsx)("div",y({className:"unlock-overlay-content"},{children:s(S?"This injected account cannot be used to sign data since the extension does not support raw signing.":"This external account cannot be used to sign data. Only Limited support is currently available for signing from any non-internal accounts.")}))}))})),Z&&(0,r.jsx)(g,{onClose:L,onUnlock:$,pair:v})]})),(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(o.zx,{icon:"key",isDisabled:!(D&&!A),label:s("Sign message"),onClick:W})})]}))}));var k,O=t(90778),C=t(16039),S=t(53501),I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)},P=o.zo.div(M||(M=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--AlignedIconContainer {\n    position: absolute;\n    z-index: 1;\n  }\n\n  .alignedBadge {\n    left: 1.25rem;\n    position: relative;\n    top: 1.25rem;\n  }\n"],["\n  .ui--AlignedIconContainer {\n    position: absolute;\n    z-index: 1;\n  }\n\n  .alignedBadge {\n    left: 1.25rem;\n    position: relative;\n    top: 1.25rem;\n  }\n"])));const A=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=f().t,i=(0,O.h)().isEthereum,l=(0,a.useState)({cryptoType:"unknown",isValid:!1}),u=l[0],m=u.cryptoType,h=u.isValid,p=l[1],v=(0,a.useState)({data:"",isHexData:!1}),x=v[0],g=x.data,b=x.isHexData,j=v[1],y=(0,a.useState)({isValidPk:!1,publicKey:null}),w=y[0],N=w.isValidPk,k=w.publicKey,A=y[1],M=(0,a.useState)({isValidSignature:!1,signature:""}),T=M[0],E=T.isValidSignature,D=T.signature,q=M[1],F=(0,a.useState)([{text:s("Crypto not detected"),value:"unknown"}].concat(C.X.availableCryptos))[0];(0,a.useEffect)((function(){var e="unknown",n=N&&E;if(n&&k){var t=(0,S.D)(g,D,k);"none"!==t.crypto?(e=t.crypto,n=t.isValid):n=!1}p({cryptoType:e,isValid:n})}),[g,N,E,k,D]);var V=(0,a.useCallback)((function(e){var n=null;try{n=c.Nn.decodeAddress(e||"")}catch(e){console.error(e)}A({isValidPk:!!n&&(32===n.length||i&&20===n.length),publicKey:n})}),[i]),R=(0,a.useCallback)((function(e){return j({data:e,isHexData:(0,d.vq)(e)})}),[]),_=(0,a.useCallback)((function(e){return q({isValidSignature:(0,d.vq)(e)&&(130===e.length||i&&132===e.length),signature:e})}),[i]);return(0,r.jsxs)(P,I({className:"".concat(t," toolbox--Verify")},{children:[(0,r.jsx)("div",I({className:"ui--row"},{children:(0,r.jsx)(o.rp,{className:"full",isError:!N,isInput:!0,label:s("verify using address"),onChange:V})})),(0,r.jsx)("div",I({className:"ui--row"},{children:(0,r.jsx)(o.II,{autoFocus:!0,className:"full",label:s("using the following data"),onChange:R,value:g})})),(0,r.jsxs)("div",I({className:"ui--row"},{children:[(0,r.jsx)("div",I({className:"ui--AlignedIconContainer"},{children:(0,r.jsx)(o.Ct,{className:"alignedBadge",color:h?"green":E?"red":"gray",icon:h?"check":E?"exclamation":"question"})})),(0,r.jsx)(o.II,{className:"full",isError:!E,label:s("the supplied signature"),onChange:_,value:D})]})),(0,r.jsxs)("div",I({className:"ui--row"},{children:[(0,r.jsx)(o.Lt,{defaultValue:m,isDisabled:!0,label:s("signature crypto type"),options:F}),(0,r.jsx)(o.qG,{className:"medium",label:s("hex input data"),value:s(b?"Yes":"No")})]}))]}))}));var M,T=function(){return T=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},T.apply(this,arguments)};const E=a.memo((function(e){var n=e.basePath,t=f().t,i=(0,a.useRef)([{isRoot:!0,name:"sign",text:t("Sign message")},{name:"verify",text:t("Verify signature")}]);return(0,r.jsxs)("main",T({className:"toolbox--App"},{children:[(0,r.jsx)(o.mQ,{basePath:n,items:i.current}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,T({path:"".concat(n,"/verify")},{children:(0,r.jsx)(A,{})})),(0,r.jsx)(s.AW,{children:(0,r.jsx)(N,{})})]})]}))}))},96246:(e,n,t)=>{t.d(n,{Z:()=>De});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(90778),l=t(9118),c=t(48801),u=t.n(c),d=t(95292),m=t(38894),h=t(61349);function p(){return(0,h.$G)("app-society")}var f=function(){return f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},f.apply(this,arguments)};const v=a.memo((function(e){var n=e.onClose,t=p().t,s=(0,i.h)().api,l=(0,a.useState)(),c=l[0],u=l[1],d=(0,a.useState)(),m=d[0],h=d[1];return(0,r.jsxs)(o.u_,f({header:t("Bid to join"),onClose:n,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,f({hint:t("Your candidate/bid account. Once accepted this account will become a member.")},{children:(0,r.jsx)(o.rp,{label:t("bid account"),onChange:h,type:"account"})})),(0,r.jsx)(o.u_.Columns,f({hint:t("The amount to tie to your bid. The lowest bidder moves forward.")},{children:(0,r.jsx)(o.H,{autoFocus:!0,label:t("bid amount"),onChange:u})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:m,icon:"sign-in-alt",isDisabled:!c,label:t("Bid"),onStart:n,params:[c],tx:s.tx.society.bid})})]}))}));var x,g,b=t(34814),j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},j.apply(this,arguments)},y=o.zo.div(N||(x=["\n  align-items: center;\n  display: flex;\n  flex-wrap: no-wrap;\n\n  > div {\n    flex: 0;\n\n    &:first-child {\n      padding-right: 1.5rem;\n    }\n  }\n"],g=["\n  align-items: center;\n  display: flex;\n  flex-wrap: no-wrap;\n\n  > div {\n    flex: 0;\n\n    &:first-child {\n      padding-right: 1.5rem;\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(x,"raw",{value:g}):x.raw=g,N=x));const w=a.memo((function(e){var n=e.className,t=e.value,s=(0,a.useMemo)((function(){return(null==t?void 0:t.isVouch)?t.asVouch[0]:null}),[t]);return(0,r.jsxs)(y,j({className:n},{children:[(0,r.jsx)("div",{children:t&&t.type}),s&&(0,r.jsx)(o.N,{value:s})]}))}));var N,k=function(){return k=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},k.apply(this,arguments)};const O=a.memo((function(e){var n=e.index,t=e.value,s=t.kind,l=t.value,c=t.who,u=p().t,d=(0,i.h)().api,m=(0,b.x)().allAccounts,h=(0,a.useMemo)((function(){return s.isVouch?s.asVouch:[null,null]}),[s]),f=h[0],v=h[1],x=(0,a.useMemo)((function(){var e=c.toString(),n=f&&f.toString();return[m.some((function(n){return n===e})),!!n&&m.some((function(e){return e===n}))]}),[m,f,c]),g=x[0],j=x[1];return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",k({className:"address all"},{children:(0,r.jsx)(o.N,{value:c})})),(0,r.jsxs)("td",k({className:"start"},{children:[(0,r.jsx)(w,{value:s}),s.isVouch?j&&(0,r.jsx)(o.cA,{accountId:f,icon:"times",label:u("Unvouch"),params:[n],tx:d.tx.society.unvouch}):g&&(0,r.jsx)(o.cA,{accountId:c,icon:"times",label:u("Unbid"),params:[n],tx:d.tx.society.unbid})]})),(0,r.jsx)(o.iA.Column.Balance,{value:l}),(0,r.jsx)(o.iA.Column.Balance,{value:v})]})}));var C=function(){return C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)};const S=a.memo((function(e){var n=e.className,t=p().t,s=(0,i.h)().api,c=(0,l.W7)(s.query.society.bids),u=(0,a.useRef)([[t("bids"),"start"],[t("bid kind"),"start"],[t("value")],[t("tip")]]);return(0,r.jsx)(o.iA,C({className:n,empty:c&&t("No bids"),header:u.current},{children:null==c?void 0:c.map((function(e,n){return(0,r.jsx)(O,{index:n,value:e},e.who.toString())}))}))}));var I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)};const P=a.memo((function(e){var n=e.label,t=e.votes;return 0===t.length?null:(0,r.jsx)(o.xH,I({summary:"".concat(n," (").concat(t.length,")")},{children:t.map((function(e){var n=e[0];return(0,r.jsx)(o.ax,{value:n},n.toString())}))}))}));var A=function(){return A=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},A.apply(this,arguments)};const M=a.memo((function(e){var n=e.votes,t=p().t,s=(0,a.useState)({allAye:[],allNay:[],allSkeptic:[]}),o=s[0],i=o.allAye,l=o.allNay,c=o.allSkeptic,u=s[1];return(0,a.useEffect)((function(){n&&u({allAye:n.filter((function(e){return e[1].isApprove})),allNay:n.filter((function(e){return e[1].isReject})),allSkeptic:n.filter((function(e){return e[1].isSkeptic}))})}),[n]),(0,r.jsxs)("td",A({className:"expand"},{children:[(0,r.jsx)(P,{label:t("Skeptics"),votes:c}),(0,r.jsx)(P,{label:t("Approvals"),votes:i}),(0,r.jsx)(P,{label:t("Rejections"),votes:l})]}))}));var T=function(){return T=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},T.apply(this,arguments)};const E=a.memo((function(e){var n=e.candidateId,t=e.isMember,s=e.ownMembers,l=p().t,c=(0,i.h)().api,u=(0,m.O)(),d=u[0],h=u[1],f=(0,a.useState)(!0),v=f[0],x=f[1],g=(0,a.useState)(null),b=g[0],j=g[1],y=(0,a.useRef)([{text:l("Aye, I approve"),value:!0},{text:l("Nay, I do not approve"),value:!1}]);return(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsxs)(o.u_,T({header:l("Vote for candidate"),onClose:h},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.rp,{filter:s,label:l("vote from account"),onChange:j}),(0,r.jsx)(o.Lt,{label:l("vote for candidate"),onChange:x,options:y.current,value:v})]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:b,icon:"check",label:l("Vote"),onStart:h,params:[n,v],tx:c.tx.society.vote})})]})),(0,r.jsx)(o.zx,{icon:"check",isDisabled:!t,label:l("Vote"),onClick:h})]})}));var D=function(){return D=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},D.apply(this,arguments)};const q=a.memo((function(e){var n=e.allMembers,t=e.isMember,s=e.ownMembers,c=e.value,u=c.accountId,d=c.kind,m=c.value,h=(0,i.h)().api,p=(0,a.useMemo)((function(){return[n.map((function(e){return[u,e]}))]}),[u,n]),f=(0,l.W7)(h.query.society.votes.multi,p,{transform:function(e){return e.map((function(e,t){return[n[t],e]})).filter((function(e){return e[1].isSome})).map((function(e){return[e[0],e[1].unwrap()]}))}});return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",D({className:"address all"},{children:(0,r.jsx)(o.N,{value:u})})),(0,r.jsx)("td",D({className:"start"},{children:(0,r.jsx)(w,{value:d})})),(0,r.jsx)(o.iA.Column.Balance,{value:m}),(0,r.jsx)(M,{votes:f}),(0,r.jsx)("td",D({className:"button"},{children:(0,r.jsx)(E,{candidateId:u.toString(),isMember:t,ownMembers:s})}))]})}));var F=function(){return F=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},F.apply(this,arguments)};const V=a.memo((function(e){var n=e.allMembers,t=e.candidates,s=e.className,i=void 0===s?"":s,l=e.isMember,c=e.ownMembers,u=p().t,d=(0,a.useRef)([[u("candidates"),"start"],[u("bid kind"),"start"],[u("value")],[void 0,"expand"],[]]);return(0,r.jsx)(o.iA,F({className:i,empty:t&&u("No candidates"),header:d.current},{children:null==t?void 0:t.map((function(e){return(0,r.jsx)(q,{allMembers:n,isMember:l,ownMembers:c,value:e},e.accountId.toString())}))}))}));var R=function(){return R=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},R.apply(this,arguments)};const _=a.memo((function(e){var n=e.allMembers,t=e.onClose,s=p().t,l=(0,i.h)().api,c=(0,a.useState)(),u=c[0],d=c[1],m=(0,a.useState)(),h=m[0],f=m[1],v=(0,a.useState)(),x=v[0],g=v[1],b=(0,a.useState)(),j=b[0],y=b[1];return(0,r.jsxs)(o.u_,R({header:s("Vouch for a new candidate"),onClose:t,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,R({hint:s("Your member account that the vouch is made from.")},{children:(0,r.jsx)(o.rp,{filter:n,label:s("member account"),onChange:g,type:"account"})})),(0,r.jsx)(o.u_.Columns,R({hint:s("The candidate/bid account. Once accepted this account will become a member.")},{children:(0,r.jsx)(o.rp,{label:s("bid account"),onChange:y})})),(0,r.jsx)(o.u_.Columns,R({hint:s("The amount to tie to your bid. The lowest bidder moves forward.")},{children:(0,r.jsx)(o.H,{autoFocus:!0,label:s("bid amount"),onChange:d})})),(0,r.jsx)(o.u_.Columns,R({hint:s("The amount you wish to be tipped for your bid.")},{children:(0,r.jsx)(o.H,{label:s("tip amount"),onChange:f})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:x,icon:"sign-in-alt",isDisabled:!u||!j||!h,label:s("Vouch"),onStart:t,params:[j,u,h],tx:l.tx.society.vouch})})]}))}));var B=function(){return B=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},B.apply(this,arguments)};const Z=a.memo((function(e){var n=e.allMembers,t=e.candidates,a=e.className,s=e.isMember,i=e.ownMembers,l=p().t,c=(0,m.O)(),u=c[0],d=c[1],h=(0,m.O)(),f=h[0],x=h[1];return(0,r.jsxs)("div",B({className:a},{children:[(0,r.jsxs)(o.zx.Group,{children:[(0,r.jsx)(o.zx,{icon:"plus",label:l("Submit bid"),onClick:d}),(0,r.jsx)(o.zx,{icon:"plus",isDisabled:!s,label:l("Vouch for"),onClick:x}),u&&(0,r.jsx)(v,{onClose:d}),f&&(0,r.jsx)(_,{allMembers:n,onClose:x})]}),(0,r.jsx)(V,{allMembers:n,candidates:t,isMember:s,ownMembers:i}),(0,r.jsx)(S,{})]}))}));var L=function(){return L=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},L.apply(this,arguments)};const H=a.memo((function(e){var n=e.isMember,t=e.ownMembers,s=p().t,l=(0,i.h)().api,c=(0,m.O)(),u=c[0],d=c[1],h=(0,a.useState)(!0),f=h[0],v=h[1],x=(0,a.useState)(null),g=x[0],b=x[1],j=(0,a.useRef)([{text:s("Aye, I approve"),value:!0},{text:s("Nay, I do not approve"),value:!1}]);return(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsxs)(o.u_,L({header:s("Vote for defender"),onClose:d},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.rp,{filter:t,label:s("vote from account"),onChange:b}),(0,r.jsx)(o.Lt,{label:s("vote for defender"),onChange:v,options:j.current,value:f})]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:g,icon:"check",label:s("Vote"),onStart:d,params:[f],tx:l.tx.society.defenderVote})})]})),(0,r.jsx)(o.zx,{icon:"check",isDisabled:!n,label:s("Vote"),onClick:d})]})}));var z=function(){return z=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},z.apply(this,arguments)},W={transform:function(e){return e.filter((function(e){return!!e.vote})).map((function(e){var n=e.accountId,t=e.vote;return[n.toString(),t]}))}};const $=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.info,c=e.isMember,u=e.ownMembers,d=p().t,m=(0,i.h)().api,h=(0,l.W7)(m.derive.society.members,void 0,W),f=(0,a.useRef)([[d("defender"),"start"],[void 0,"expand"],[]]);return s&&s.hasDefender&&s.defender?(0,r.jsx)(o.iA,z({className:t,header:f.current},{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",z({className:"address all"},{children:(0,r.jsx)(o.N,{value:s.defender})})),(0,r.jsx)(M,{votes:h}),(0,r.jsx)("td",z({className:"button"},{children:(0,r.jsx)(H,{isMember:c,ownMembers:u})}))]})})):null}));var U=t(54383),J=t(58607),G=t(65874),Q=t(14681),X=t(15968),K=300;function Y(e,n,t,r,a){var s=new Path2D("M373.1,126.9c-5.2-4.1-11.4-9.7-22.7-11.1c-10.6-1.4-21.4,5.7-28.7,10.4c-7.3,4.7-21.1,18.5-26.8,22.7 c-5.7,4.2-20.3,8.1-43.8,22.2s-115.7,73.3-115.7,73.3l24,0.3L52.4,299.8h10.7l-15.4,11.7c0,0,13.6,3.6,25-3.6l0,3.3 c0,0,127.4-50.2,152-37.2l-15,4.4c1.3,0,25.5,1.6,25.5,1.6s0.8,15.1,15.4,24.8c14.6,9.6,14.9,14.9,14.9,14.9s-7.6,3.1-7.6,7 c0,0,11.2-3.4,21.6-3.1c10.4,0.3,19.5,3.1,19.5,3.1s-0.8-4.2-10.9-7c-10.2-2.9-20.1-13.8-25-19.8c-4.9-6-8.3-16.7-4.1-27.4 c3.5-9.1,15.7-14.1,40.9-27.1c29.7-15.4,36.5-26.8,40.7-35.7c4.2-8.9,10.4-26.6,13.9-34.9c4.4-10.7,9.8-16.4,14.3-19.8 c4.4-3.4,24.5-10.9,24.5-10.9S378,130.8,373.1,126.9z");e.save(),e.translate(n/2,t/2),e.scale(r/440,r/440),e.translate(-220,-220),a(e,s),e.restore()}function ee(e,n,t,r){e.save(),e.translate(.5,.5);for(var a=0;a<t.length;a++)e.save(),e.rotate(2*Math.PI/t.length*a),e.translate(0,-n),r(e,t[a]),e.restore();e.restore()}function ne(e,n){var t=0;return n.map((function(n){return e.slice(t,t+=n)}))}var te=function(){return te=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},te.apply(this,arguments)},re={display:"block",margin:"0 auto"};const ae=a.memo((function(e){var n=e.accountId,t=p().t,s=(0,i.h)().api,l=(0,a.useRef)(null),c=(0,a.useState)((function(){return s.genesisHash.eq(X.Cx)}))[0],u=(0,m.O)(),d=u[0],h=u[1];return(0,a.useEffect)((function(){if(l.current){var e=l.current.getContext("2d");e&&function(e,n){console.log("Generating ink for ".concat(n.toString()," as ").concat(n.toHex()));var t=n.toU8a().reduce((function(e,n){for(var t=0;t<8;++t)e.push(0!=(n&1<<7-t));return e}),[]);e.save(),e.translate(0,0),e.scale(K,K),function(e,n){for(var t=ne(n,[71,61,51,41,32]),r=0;r<t.length;++r)ee(e,.5-.062*(r+.5),t[r],(function(e,n){n&&(e.beginPath(),e.arc(0,0,.016,0,2*Math.PI),e.fillStyle="black",e.fill())}));e.lineWidth=10,Y(e,1,1,.4,(function(e,n){return e.stroke(n)}))}(e,t),e.restore(),e.save(),e.translate(325,0),e.scale(K,K),function(e,n){for(var t=ne(n,[71,61,51,41,32]),r=0;r<t.length;++r)ee(e,.5-.062*(r+.5),t[r],(function(e,n){e.beginPath(),e.arc(0,0,(n?8:4)/500,0,2*Math.PI),e.fillStyle=n?"black":"#e6007a",e.fill()}));Y(e,1,1,.44,(function(e,n){return e.fill(n)}))}(e,t),e.restore(),e.save(),e.translate(0,325),e.scale(K,K),function(e,n){for(var t=ne(n,[64,64,64,64]),r=0;r<t.length;++r)ee(e,.5-.072*(r+.5),t[r],(function(e,n){n&&(e.beginPath(),e.moveTo(0,-.036),e.lineTo(0,.036),e.lineWidth=.01,e.stroke())}));Y(e,1,1,.44,(function(e,n){return e.fill(n)}))}(e,t),e.restore(),e.save(),e.translate(325,325),e.scale(K,K),function(e,n){e.lineWidth=.01;for(var t=0;t<8;++t)for(var r=0;r<32;++r)n[32*t+r]&&(e.save(),e.translate((r+.5)/32,t/8),e.beginPath(),e.moveTo(0,0),e.lineTo(0,1/8),e.stroke(),e.restore());e.fillStyle="rgba(255, 255, 255, 0.8)",Y(e,1,1,1,(function(e,n){return e.fill(n)})),e.lineWidth=6,Y(e,1,1,1,(function(e,n){return e.stroke(n)}))}(e,t),e.restore(),e.save(),e.translate(650,0),e.scale(K,K),function(e,n){e.save(),e.translate(.484,.516),e.fillStyle="black";for(var t=.484,r=0;r<n.length;r++)t-=.5/n.length*.75/(4*t),e.rotate(2*Math.PI/n.length*8/(4*t)),e.save(),e.translate(0,-t),e.beginPath(),e.arc(0,0,n[r]?.016:.008,0,2*Math.PI),e.fillStyle=n[r]?"black":"#e6007a",e.fill(),e.restore();e.restore(),e.lineWidth=10,Y(e,.984,1.016,.44,(function(e,n){return e.stroke(n)}))}(e,t),e.restore(),e.save(),e.translate(650,325),e.scale(K,K),function(e,n){for(var t=ne(n,[128,128]),r=0;r<t.length;++r)ee(e,.5-.072*(r+.5),t[r],(function(e,n){n&&(e.beginPath(),e.moveTo(0,-.036),e.lineTo(0,.036),e.lineWidth=.01,e.stroke())}));e.lineWidth=6,Y(e,1,1,.7,(function(e,n){return e.stroke(n)}))}(e,t),e.restore()}(e,n)}})),c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{icon:"pen-nib",onClick:h}),d&&(0,r.jsx)(o.u_,te({header:t("design samples"),onClose:h,size:"large"},{children:(0,r.jsx)(o.u_.Content,{children:(0,r.jsx)("canvas",{height:625,ref:l,style:re,width:950})})}))]}):null}));var se=function(){return se=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},se.apply(this,arguments)},oe=o.zo.tr(le||(le=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .payoutExpander {\n    .payout+.payout {\n      margin-top: 0.5rem;\n    }\n\n    .ui--Columar {\n      flex-wrap: unset;\n\n      .ui--Column {\n        min-width: 15ch;\n\n        &:first-child {\n          max-width: 100% !important;\n        }\n\n        &:last-child {\n          min-width: 15ch;\n          max-width: 15ch;\n          white-space: nowrap;\n        }\n      }\n    }\n  }\n"],["\n  .payoutExpander {\n    .payout+.payout {\n      margin-top: 0.5rem;\n    }\n\n    .ui--Columar {\n      flex-wrap: unset;\n\n      .ui--Column {\n        min-width: 15ch;\n\n        &:first-child {\n          max-width: 100% !important;\n        }\n\n        &:last-child {\n          min-width: 15ch;\n          max-width: 15ch;\n          white-space: nowrap;\n        }\n      }\n    }\n  }\n"])));const ie=a.memo((function(e){var n=e.bestNumber,t=e.className,s=void 0===t?"":t,l=e.value,c=l.accountId,u=l.isCandidateVoter,d=l.isDefenderVoter,m=l.isFounder,h=l.isHead,f=l.isSkeptic,v=l.isSuspended,x=l.isWarned,g=l.key,j=l.payouts,y=l.strikes,w=p().t,N=(0,i.h)().api,k=(0,b.x)().allAccounts,O=(0,a.useCallback)((function(){return n&&j&&function(e,n){return n.map((function(n,t){var a=n[0],s=n[1];return(0,r.jsx)("div",se({className:"payout"},{children:(0,r.jsxs)(o.P0,{children:[(0,r.jsx)(o.P0.Column,{children:(0,r.jsx)(J.Z,{value:s})}),(0,r.jsxs)(o.P0.Column,{children:[(0,r.jsxs)("div",{children:["#",(0,Q.u)(a)]}),a.gt(e)&&(0,r.jsx)(G.Z,{value:a.sub(e)},t)]})]})}),t)}))}(n,j)}),[n,j]),C=(0,a.useMemo)((function(){return k.some((function(e){return e===g}))}),[k,g]),S=(0,a.useMemo)((function(){return n&&j.find((function(e){var t=e[0];return n.gt(t)}))}),[n,j]),I=(0,a.useMemo)((function(){return[u&&w("Candidate"),d&&w("Defender")].filter((function(e){return!!e})).join(", ")}),[u,d,w]);return(0,r.jsxs)(oe,se({className:s},{children:[(0,r.jsxs)("td",se({className:"address relative all"},{children:[(0,r.jsx)(o.N,{value:c}),(0,r.jsxs)("div",se({className:"absolute"},{children:[(u||d)&&(0,r.jsx)(o.Vp,{color:"blue",label:w("voted")}),x&&(0,r.jsx)(o.Vp,{color:"orange",label:w("strikes")}),h&&(0,r.jsx)(o.Vp,{color:"green",label:w("society head")}),m&&(0,r.jsx)(o.Vp,{color:"green",label:w("founder")}),f&&(0,r.jsx)(o.Vp,{color:"yellow",label:w("skeptic")}),v&&(0,r.jsx)(o.Vp,{color:"red",label:w("suspended")}),S&&(0,r.jsx)(o.Vp,{color:"grey",label:w("payout")})]}))]})),(0,r.jsxs)("td",se({className:"number together"},{children:[!!(null==j?void 0:j.length)&&(0,r.jsx)(o.xH,{className:"payoutExpander",renderChildren:O,summary:w("Payouts ({{count}})",{replace:{count:(0,Q.u)(j.length)}})}),C&&S&&(0,r.jsx)(o.cA,{accountId:c,icon:"ellipsis-h",label:"Payout",params:[],tx:N.tx.society.payout})]})),(0,r.jsx)("td",se({className:"together"},{children:I})),(0,r.jsx)("td",se({className:"number"},{children:(0,Q.u)(y)})),(0,r.jsx)("td",se({className:"button start"},{children:(0,r.jsx)(ae,{accountId:c})}))]}))}));var le,ce=function(){return ce=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ce.apply(this,arguments)};const ue=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.mapMembers,i=p().t,l=(0,U.C)(),c=(0,a.useRef)([[i("members"),"start",2],[i("voted on"),"start"],[i("strikes")],[]]);return(0,r.jsx)(o.iA,ce({className:t,empty:s&&i("No active members"),header:c.current},{children:null==s?void 0:s.map((function(e){return(0,r.jsx)(ie,{bestNumber:l,value:e},e.key)}))}))}));var de=function(){return de=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},de.apply(this,arguments)},me=(0,o.zo)(o.Ty)(pe||(pe=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .society--header--account {\n    white-space: nowrap;\n\n    .ui--AccountName {\n      display: inline-block;\n    }\n\n    .ui--IdentityIcon {\n      margin-right: 0.5rem;\n    }\n  }\n"],["\n  .society--header--account {\n    white-space: nowrap;\n\n    .ui--AccountName {\n      display: inline-block;\n    }\n\n    .ui--IdentityIcon {\n      margin-right: 0.5rem;\n    }\n  }\n"])));const he=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.info,c=e.payoutTotal,u=p().t,d=(0,i.h)().api,m=(0,l.W7)(d.derive.society.members),h=(0,U.C)(),f=(0,a.useMemo)((function(){return s&&s.pot.gtn(0)?s.pot:null}),[s]);return(0,r.jsxs)(me,de({className:t},{children:[(0,r.jsx)("section",de({className:"media--1100"},{children:s&&m&&(0,r.jsxs)(o.Jy,de({label:u("members")},{children:[m.length," / ",s.maxMembers.toString()]}))})),h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("section",{children:(0,r.jsx)(o.Jy,{label:u("rotation"),progress:{total:d.consts.society.rotationPeriod,value:h.mod(d.consts.society.rotationPeriod),withTime:!0}})}),(0,r.jsx)("section",de({className:"media--1200"},{children:(0,r.jsx)(o.Jy,{label:u("challenge"),progress:{total:d.consts.society.challengePeriod,value:h.mod(d.consts.society.challengePeriod),withTime:!0}})}))]}),(0,r.jsxs)("section",{children:[c&&(0,r.jsx)(o.Jy,de({label:u("payouts")},{children:(0,r.jsx)(J.Z,{value:c,withSi:!0})})),f&&(0,r.jsx)(o.Jy,de({label:u("pot")},{children:(0,r.jsx)(J.Z,{value:f,withSi:!0})}))]})]}))}));var pe,fe=function(){return fe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},fe.apply(this,arguments)},ve=o.zo.div(ge||(ge=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .overviewSection {\n    margin-bottom: 1.5rem;\n  }\n"],["\n  .overviewSection {\n    margin-bottom: 1.5rem;\n  }\n"])));const xe=a.memo((function(e){var n=e.className,t=e.info,a=e.isMember,s=e.mapMembers,o=e.ownMembers,i=e.payoutTotal;return(0,r.jsxs)(ve,fe({className:n},{children:[(0,r.jsx)(he,{info:t,payoutTotal:i}),(0,r.jsx)($,{info:t,isMember:a,ownMembers:o}),(0,r.jsx)(ue,{mapMembers:s})]}))}));var ge,be=function(){return be=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},be.apply(this,arguments)};const je=a.memo((function(e){var n=e.balance,t=e.bid,a=e.value;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",be({className:"address all"},{children:(0,r.jsx)(o.N,{value:a})})),(0,r.jsx)("td",be({className:"start"},{children:(0,r.jsx)(w,{value:t})})),(0,r.jsx)(o.iA.Column.Balance,{value:n})]})}));var ye=function(){return ye=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ye.apply(this,arguments)},we={transform:function(e){return e.filter((function(e){var n=e[0].args[0];return e[1].isSome&&n})).map((function(e){var n=e[0].args[0],t=e[1].unwrap();return{accountId:n,balance:t[0],bid:t[1]}})).sort((function(e,n){return e.balance.cmp(n.balance)}))}},Ne={transform:function(e){return e.map((function(e){return e.args[0]})).filter((function(e){return!!e}))}};const ke=a.memo((function(e){var n=e.className,t=p().t,s=(0,i.h)().api,c=(0,l.W7)(s.query.society.suspendedCandidates.entries,void 0,we),u=(0,l.W7)(s.query.society.suspendedMembers.keys,void 0,Ne),d=(0,a.useRef)({candidates:[[t("candidates"),"start"],[t("bid kind"),"start"],[t("value")]],members:[[t("members"),"start",3]]});return(0,r.jsxs)("div",ye({className:n},{children:[(0,r.jsx)(o.iA,ye({className:n,empty:u&&t("No suspended members"),header:d.current.members},{children:null==u?void 0:u.map((function(e){return(0,r.jsx)(je,{value:e},e.toString())}))})),(0,r.jsx)(o.iA,ye({className:n,empty:c&&t("No suspended candidates"),header:d.current.candidates},{children:null==c?void 0:c.map((function(e){var n=e.accountId,t=e.balance,a=e.bid;return(0,r.jsx)(je,{balance:t,bid:a,value:n},n.toString())}))}))]}))}));var Oe=t(58900),Ce=t(11677),Se={allMembers:[],isMember:!1,ownMembers:[]};const Ie=(0,Ce.e)("useMembers",(function(){var e=(0,i.h)().api,n=(0,b.x)().allAccounts,t=(0,a.useState)(Se),r=t[0],s=t[1],o=(0,l.W7)(e.derive.society.members);return(0,a.useEffect)((function(){n&&o&&s(function(e,n){var t=n.filter((function(e){return!e.isSuspended})).map((function(e){return e.accountId.toString()})),r=t.filter((function(n){return e.includes(n)}));return{allMembers:t,isMember:0!==r.length,ownMembers:r}}(n,o))}),[n,o]),r}));var Pe=t(24305),Ae={};const Me=(0,Ce.e)("useVoters",(function(){var e=(0,i.h)().api,n=(0,Pe.b)([e.events.society.Vote]),t=(0,l.W7)(e.derive.society.candidates),r=(0,a.useState)(Ae),s=r[0],o=r[1];return(0,a.useEffect)((function(){n&&t&&function(e,n){return t=this,r=void 0,s=function(){var t,r,a;return function(e,n){var t,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(s){switch(s.label){case 0:return t=[],r=[],n.length?[4,Promise.all(n.map((function(n){var t=n.accountId;return e.query.society.votes.entries(t)})))]:[3,2];case 1:return a=s.sent(),[3,3];case 2:a=[],s.label=3;case 3:return a.forEach((function(e){e.forEach((function(e){var n=e[0].args[1],a=e[1];if(a.isSome){var s=n.toString();a.unwrap().isSkeptic?!t.includes(s)&&t.push(s):!r.includes(s)&&r.push(s)}}))})),[2,{candidates:n,skeptics:t,voters:r}]}}))},new((a=Promise)||(a=Promise))((function(e,n){function o(e){try{l(s.next(e))}catch(e){n(e)}}function i(e){try{l(s.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}l((s=s.apply(t,r||[])).next())}));var t,r,a,s}(e,t).then(o).catch(console.error)}),[e,t,n]),s}));var Te=function(){return Te=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Te.apply(this,arguments)};function Ee(e,n){var t=e.isCandidateVoter||e.isDefenderVoter;return e.isHead!==n.isHead?e.isHead?-1:1:e.isFounder!==n.isFounder?e.isFounder?-1:1:e.isSkeptic!==n.isSkeptic?e.isSkeptic?-1:1:t!==(n.isCandidateVoter||n.isDefenderVoter)?t?-1:1:e.isSuspended!==n.isSuspended?e.isSuspended?-1:1:e.isWarned!==n.isWarned?e.isWarned?-1:1:n.strikes.cmp(e.strikes)||n.payouts.length-e.payouts.length}const De=a.memo((function(e){var n=e.basePath,t=e.className,c=p().t,m=(0,i.h)().api,h=(0,Oe.Z)(),f=Ie(),v=f.allMembers,x=f.isMember,g=f.ownMembers,b=(0,l.W7)(m.derive.society.info),j=(0,l.W7)(m.derive.society.members),y=Me(),w=y.candidates,N=y.skeptics,k=y.voters,O=(0,a.useMemo)((function(){return j&&b&&N&&k?function(e,n,t,r,a){var s=r.defender,o=r.founder,i=r.hasDefender,l=r.head,c=e.filter((function(e){return!i||!e.accountId.eq(s)})).map((function(e){var r=e.accountId,s=e.isDefenderVoter,i=e.isSuspended,c=e.payouts,u=e.strikes,d=r.toString();return{accountId:r,isCandidateVoter:t.includes(d),isDefenderVoter:s,isFounder:!!(null==o?void 0:o.eq(r)),isHead:!!(null==l?void 0:l.eq(r)),isSkeptic:n.includes(d),isSuspended:i,isWarned:!i&&u.gt(a),key:d,payouts:c,strikes:u}})).sort(Ee);return[c,c.reduce((function(e,n){return n.payouts.reduce((function(e,n){var t=n[1];return e.iadd(t)}),e)}),new(u())(0))]}(j,N,k,b,m.consts.society.maxStrikes.mul(d.um).div(d.Jo)):[void 0,void 0]}),[m,b,j,N,k]),C=O[0],S=O[1],I=(0,a.useMemo)((function(){return[{isRoot:!0,name:"overview",text:c("Overview")},{count:h,name:"candidates",text:c("Candidates")},{name:"suspended",text:c("Suspended")}]}),[h,c]);return(0,r.jsxs)("main",Te({className:t},{children:[(0,r.jsx)(o.mQ,{basePath:n,items:I}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,Te({path:"".concat(n,"/candidates")},{children:(0,r.jsx)(Z,{allMembers:v,candidates:w,isMember:x,ownMembers:g})})),(0,r.jsx)(s.AW,Te({path:"".concat(n,"/suspended")},{children:(0,r.jsx)(ke,{})})),(0,r.jsx)(s.AW,{children:(0,r.jsx)(xe,{info:b,isMember:x,mapMembers:C,ownMembers:g,payoutTotal:S})})]})]}))}))},58900:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(90778),a=t(9118);const s=(0,t(11677).e)("useCounter",(function(){var e,n=(0,r.h)().api,t=(0,a.W7)(null===(e=n.query.society)||void 0===e?void 0:e.candidates);return(null==t?void 0:t.length)||0}))},27960:(e,n,t)=>{t.d(n,{Z:()=>d});var r,a,s=t(52322),o=t(2784),i=t(24732),l=t(57272),c=function(){return c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},c.apply(this,arguments)},u=i.zo.div(m||(r=["\n  font-size: var(--font-size-small);\n  padding: 1rem 0.5rem;\n  text-align: center;\n\n  .ui--Badge, .ui--Tag {\n    margin-right: 0.5rem;\n  }\n\n  span {\n    vertical-align: middle;\n\n    * {\n      vertical-align: middle;\n    }\n\n    + span {\n      margin-left: 1rem;\n    }\n  }\n"],a=["\n  font-size: var(--font-size-small);\n  padding: 1rem 0.5rem;\n  text-align: center;\n\n  .ui--Badge, .ui--Tag {\n    margin-right: 0.5rem;\n  }\n\n  span {\n    vertical-align: middle;\n\n    * {\n      vertical-align: middle;\n    }\n\n    + span {\n      margin-left: 1rem;\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,m=r));const d=o.memo((function(e){var n=e.className,t=e.isRelay,r=e.minCommission,a=(0,l.$)().t;return(0,s.jsxs)(u,c({className:n},{children:[(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"blue",icon:"chevron-right"}),(0,s.jsx)("span",{children:a("Next session")})]}),r&&(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"red",icon:"cancel"}),(0,s.jsx)("span",{children:a("Chilled")})]}),t&&(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"purple",icon:"vector-square"}),(0,s.jsx)("span",{children:a("Para validator")})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"green",info:"5"}),(0,s.jsx)("span",{children:a("Produced blocks")})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"green",icon:"envelope"}),(0,s.jsx)("span",{children:a("Online message")})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"green",icon:"hand-paper"}),(0,s.jsx)("span",{children:a("Nominating")})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"red",icon:"balance-scale-right"}),(0,s.jsx)("span",{children:a("Oversubscribed")})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"red",icon:"skull-crossbones"}),(0,s.jsx)("span",{children:a("Slashed")})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Ct,{color:"red",icon:"user-slash"}),(0,s.jsx)("span",{children:a("Blocks nominations")})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)(i.Vp,{color:"lightgrey",label:"1,220"}),(0,s.jsx)("span",{children:a("Era points")})]})]}))}));var m},37457:(e,n,t)=>{t.d(n,{Z:()=>Ca});var r=t(52322),a=t(2784),s=t(7267),o=t(75030),i=t(65857),l=t(24732),c=t(90778),u=t(34814),d=t(54131),m=t(9118),h=t(54890),p=t(12213),f=t(43223),v=t(33661),x=t(58607),g=t(48801),b=t.n(g),j=t(95292),y=t(57272);const w=a.memo((function(e){var n=e.isInElection,t=(0,y.$)().t;return n?(0,r.jsx)(l.Pd,{className:"warning centered",content:t("There is currently an ongoing election for new validator candidates. As such staking operations are not permitted.")}):null}));var N=t(86135),k=t(38894),O=t(14681),C=t(11677),S={transform:function(e){return e.isNone?0:e.unwrap().prior.length+1}};const I=(0,C.e)("useSlashingSpans",(function(e){var n=(0,c.h)().api;return(0,m.W7)(n.query.staking.slashingSpans,[e],S)||0}));var P=t(36609),A=t(92730);function M(e){for(var n=(e.mul(j.D_).div(j.aP.pow(new(b())(A.a.getDefaults().decimals))).toNumber()/1e3).toFixed(3);1!==n.length&&[".","0"].includes(n[n.length-1]);){var t=n.endsWith(".");if(n=n.substring(0,n.length-1),t)break}return n}const T=a.memo((function(e){var n,t=e.currentAmount,s=e.isNominating,o=e.minNominated,i=e.minNominatorBond,u=e.minValidatorBond,d=e.onError,h=e.stashId,p=e.value,f=(0,y.$)().t,v=(0,c.h)().api,x=(0,m.W7)(null===(n=v.derive.balances)||void 0===n?void 0:n.all,[h]),g=(0,a.useState)({error:null,warning:null}),b=g[0],w=b.error,N=b.warning,k=g[1];return(0,a.useEffect)((function(){if(x&&p){var e=p.add(t||j.nw),n=v.consts.balances.existentialDeposit,r=x.freeBalance.sub(n.divn(2)),a=null,l=null;e.gte(r)?l=f("The specified value is large and may not allow enough funds to pay future transaction fees."):e.lt(n)?a=f("The bonded amount is less than the minimum bond amount of {{existentialDeposit}}",{replace:{existentialDeposit:M(n)}}):s?i&&e.lt(i)?a=f("The bonded amount is less than the minimum threshold of {{minBond}} for nominators",{replace:{minBond:(0,A.a)(i)}}):o&&e.lt(o)&&(l=f("The bonded amount is less than the current active minimum nominated amount of {{minNomination}} and depending on the network state, may not be selected to participate",{replace:{minNomination:(0,A.a)(o)}})):u&&e.lt(u)&&(a=f("The bonded amount is less than the minimum threshold of {{minBond}} for validators",{replace:{minBond:(0,A.a)(u)}})),k((function(e){var n=e.error!==a?a:e.error,t=e.warning!==l?l:e.warning;return d(n||t?{error:n,warning:t}:null),{error:n,warning:t}}))}}),[v,t,s,o,i,u,d,x,f,p]),w?(0,r.jsx)(l.oy,{content:w}):N?(0,r.jsx)(l.Pd,{content:N}):null}));var E=function(){return E=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},E.apply(this,arguments)};const D=a.memo((function(e){var n,t=e.controllerId,s=e.onClose,o=e.stakingInfo,i=e.stashId,u=(0,y.$)().t,d=(0,c.h)().api,h=(0,a.useState)(null),p=h[0],f=h[1],v=(0,a.useState)(),x=v[0],g=v[1],w=(0,m.W7)(null===(n=d.derive.balances)||void 0===n?void 0:n.all,[i]),N=(0,a.useMemo)((function(){var e,n;return o&&(null===(n=null===(e=o.stakingLedger)||void 0===e?void 0:e.active)||void 0===n?void 0:n.unwrap())}),[o]),k=(0,a.useMemo)((function(){return function(e,n,t){var r;if(n&&n.stakingLedger&&t){var a=(n.unlocking||[]).reduce((function(e,n){var t=n.value;return e.iadd(t)}),new(b())(0)),s=n.redeemable||j.nw,o=t.freeBalance.sub((null===(r=n.stakingLedger.active)||void 0===r?void 0:r.unwrap())||j.nw).sub(a).sub(s);return o.gt(e.consts.balances.existentialDeposit)?o.sub(e.consts.balances.existentialDeposit):j.nw}return null}(d,o,w)}),[d,o,w]);return(0,r.jsxs)(l.u_,E({header:u("Bond more funds"),onClose:s,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsx)(l.u_.Columns,E({hint:u("Since this transaction deals with funding, the stash account will be used.")},{children:(0,r.jsx)(l.rp,{defaultValue:i,isDisabled:!0,label:u("stash account")})})),k&&(0,r.jsxs)(l.u_.Columns,E({hint:u("The amount placed at-stake should allow some free funds for future transactions.")},{children:[(0,r.jsx)(l.H,{autoFocus:!0,defaultValue:k,isError:!!(null==p?void 0:p.error)||!x||x.isZero(),label:u("additional funds to bond"),labelExtra:(0,r.jsx)(P.Z,{label:(0,r.jsx)("span",E({className:"label"},{children:u("balance")})),params:i}),onChange:g}),(0,r.jsx)(T,{controllerId:t,currentAmount:N,onError:f,stashId:i,value:x})]}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:i,icon:"sign-in-alt",isDisabled:!(null==x?void 0:x.gt(j.nw))||!!(null==p?void 0:p.error),label:u("Bond more"),onStart:s,params:[x],tx:d.tx.staking.bondExtra})})]}))}));var q=t(69187),F=t(48731),V=t(55858),R=t(6851),_=t(46186),B=function(){return B=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},B.apply(this,arguments)},Z={aura:["ed25519","sr25519"],babe:["sr25519"],gran:["ed25519"],imon:["ed25519","sr25519"],para:["sr25519"]};const L=a.memo((function(e){var n=e.onClose,t=(0,y.$)().t,s=(0,N.L)().queueRpc,o=(0,a.useState)("sr25519"),i=o[0],c=o[1],u=(0,a.useState)("0x"),d=u[0],m=u[1],h=(0,a.useState)(""),p=h[0],f=h[1],v=(0,a.useState)("babe"),x=v[0],g=v[1],b=(0,a.useRef)([{text:t("Aura"),value:"aura"},{text:t("Babe"),value:"babe"},{text:t("Grandpa"),value:"gran"},{text:t("I'm Online"),value:"imon"},{text:t("Parachains"),value:"para"}]);(0,a.useEffect)((function(){c(Z[x][0])}),[x]),(0,a.useEffect)((function(){try{var e=(0,R.Q)(p).phrase;(0,F.hu)((0,_.S)(e),"Invalid mnemonic phrase"),m((0,V.c)(q.Nn.createFromUri(p,{},i).publicKey))}catch(e){m("0x")}}),[i,p]);var j=(0,a.useCallback)((function(){return s({rpc:{method:"insertKey",section:"author"},values:[x,p,d]})}),[x,d,s,p]),w=(0,a.useMemo)((function(){return Z[x].map((function(e){return{text:t("ed25519"===e?"ed25519, Edwards":"sr15519, Schnorrkel"),value:e}}))}),[x,t]);return(0,r.jsxs)(l.u_,B({header:t("Inject Keys"),onClose:n,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsxs)(l.u_.Columns,B({hint:t("The seed and derivation path will be submitted to the validator node. this is an advanced operation, only to be performed when you are sure of the security and connection risks.")},{children:[(0,r.jsx)(l.II,{autoFocus:!0,isError:66!==d.length,label:t("suri (seed & derivation)"),onChange:f,value:p}),(0,r.jsx)(l.Pd,{content:t("This operation will submit the seed via an RPC call. Do not perform this operation on a public RPC node, but ensure that the node is local, connected to your validator and secure.")})]})),(0,r.jsxs)(l.u_.Columns,B({hint:t("The key type and crypto type to use for this key. Be aware that different keys have different crypto requirements. You should be familiar with the type requirements for the different keys.")},{children:[(0,r.jsx)(l.Lt,{label:t("key type to set"),onChange:g,options:b.current,value:x}),(0,r.jsx)(l.Lt,{isDisabled:1===w.length,label:t("crypto type to use"),onChange:c,options:w,value:i})]})),(0,r.jsx)(l.u_.Columns,B({hint:t("This pubic key is what will be visible in your queued keys list. It is generated based on the seed and the crypto used.")},{children:(0,r.jsx)(l.II,{isDisabled:!0,label:t("generated public key"),value:d})}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.zx,{icon:"sign-in-alt",label:t("Submit key"),onClick:j})})]}))}));var H=function(){return H=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},H.apply(this,arguments)};const z=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.controllerId,s=e.stashId,o=(0,y.$)().t;return s&&a?(0,r.jsxs)(l.u_.Columns,H({className:t,hint:o("The stash that is to be affected. The transaction will be sent from the associated controller account.")},{children:[(0,r.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:o("stash account")}),(0,r.jsx)(l.rp,{defaultValue:a,isDisabled:!0,label:o("controller account")})]})):null}));var W=function(){return W=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},W.apply(this,arguments)},$={withExposure:!0};const U=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.controllerId,o=e.nominating,i=e.onClose,u=e.stashId,d=(0,y.$)().t,h=(0,c.h)().api,p=(0,a.useState)([]),f=p[0],v=p[1],x=(0,a.useState)({}),g=x[0].kickTx,b=x[1],j=(0,m.W7)(h.derive.staking.query,[u,$]),w=(0,a.useMemo)((function(){var e;return null===(e=null==j?void 0:j.exposure)||void 0===e?void 0:e.others.map((function(e){return e.who.toString()}))}),[j]);return(0,a.useEffect)((function(){try{b({kickTx:f.length?h.tx.staking.kick(f):null})}catch(e){b({kickTx:null})}}),[h,f]),(0,r.jsxs)(l.u_,W({className:t,header:d("Remove nominees"),onClose:i,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsx)(z,{controllerId:s,stashId:u}),w?(0,r.jsx)(l.m3,{available:w,availableLabel:d("existing/active nominators"),defaultValue:o,maxCount:128,onChange:v,valueLabel:d("nominators to be removed")}):(0,r.jsx)(l.$j,{label:d("Retrieving active nominators")})]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:s,extrinsic:g,icon:"user-slash",isDisabled:!g,label:d("Remove"),onStart:i})})]}))}));var J=t(3871),G=t(74065);const Q=(0,C.e)("useInactives",(function(e,n){var t=(0,c.h)().api,r=(0,G.X)(),s=(0,a.useState)({}),o=s[0],i=s[1],l=(0,m.W7)(t.derive.session.indexes);return(0,a.useEffect)((function(){var a;return r.current&&n&&n.length&&l&&t.queryMulti([[t.query.staking.nominators,e]].concat(t.query.staking.erasStakers?n.map((function(e){return[t.query.staking.erasStakers,[l.activeEra,e]]})):n.map((function(e){return[t.query.staking.stakers,e]}))).concat(n.map((function(e){return[t.query.staking.slashingSpans,e]}))),(function(a){var s=a[0],o=a.slice(1),c=o.slice(0,n.length),u=o.slice(n.length);r.current&&i(function(e,n,t,r,a,s,o){var i,l=a.activeEra,c=null===(i=e.consts.staking)||void 0===i?void 0:i.maxNominatorRewardedPerValidator,u=e.events.staking.SlashReported?[]:r.filter((function(e,n){return!t[n].isNone&&t[n].unwrap().lastNonzeroSlash.gt(s)})),d=o.map((function(e){return e.others.sort((function(e,n){var t,r;return((null===(t=n.value)||void 0===t?void 0:t.unwrap())||j.nw).cmp((null===(r=e.value)||void 0===r?void 0:r.unwrap())||j.nw)}))})).map((function(e,t){return!c||c.gtn(e.map((function(e){return e.who.toString()})).indexOf(n))?null:r[t]})).filter((function(e){return!!e&&!u.includes(e)})),m=o.map((function(e,t){return e.others.some((function(e){return e.who.eq(n)}))?null:r[t]})).filter((function(e){return!!e})),h=o.map((function(e,n){var t;return(null===(t=e.total)||void 0===t?void 0:t.unwrap().isZero())||m.includes(r[n])&&s.gte(l)?r[n]:null})).filter((function(e){return!!e})).filter((function(e){return!u.includes(e)&&!d.includes(e)})),p=r.filter((function(e){return!m.includes(e)&&!u.includes(e)&&!d.includes(e)}));return m=m.filter((function(e){return!h.includes(e)&&!u.includes(e)&&!d.includes(e)})),{nomsActive:p,nomsChilled:u,nomsInactive:m,nomsOver:d,nomsWaiting:h}}(t,e,u,n,l,s.unwrapOrDefault().submittedIn,c))})).then((function(e){a=e})).catch(console.error),function(){a&&a()}}),[t,l,r,n,e]),o}));var X={};function K(e,n,t){return void 0===n&&(n=[]),n.length?[n.length,function(){var a=function(e,n,t){if(!(null==t?void 0:t.validators))return X;var r={};return n.forEach((function(n){var a;null===(a=t.validators[n])||void 0===a||a.others.some((function(t){return!(!t.who.eq(e)||!(0,J.S)(t.value)||(r[n]=t.value.toBn(),0))}))})),r}(e,n,t);return n.map((function(e,n){return(0,r.jsx)(l.ax,{balance:a[e],value:e,withBalance:!!t&&!!a[e]},n)}))}]:null}const Y=a.memo((function(e){var n,t=e.nominating,s=e.stashId,o=(0,y.$)().t,i=(0,c.h)().api,u=Q(s,t),d=u.nomsActive,h=u.nomsChilled,p=u.nomsInactive,f=u.nomsOver,x=u.nomsWaiting,g=(0,m.W7)(i.query.staking&&(null===(n=i.derive.session)||void 0===n?void 0:n.indexes)),b=(0,m.W7)((0,v.m)(i.query.staking.erasStakers)&&i.derive.staking.eraExposure,[null==g?void 0:g.activeEra]),j=(0,a.useMemo)((function(){return[K(s,d,b),K(s,h),K(s,p),K(s,f),K(s,x)]}),[b,d,h,p,f,x,s]),w=j[0],N=j[1],k=j[2],O=j[3],C=j[4];return(0,r.jsxs)(r.Fragment,{children:[O&&(0,r.jsx)(l.n0,{className:"stakeOver",renderChildren:O[1],summary:o("Oversubscribed nominations ({{count}})",{replace:{count:O[0]}})}),w&&(0,r.jsx)(l.n0,{renderChildren:w[1],summary:o("Active nominations ({{count}})",{replace:{count:w[0]}})}),k&&(0,r.jsx)(l.n0,{renderChildren:k[1],summary:o("Inactive nominations ({{count}})",{replace:{count:k[0]}})}),N&&(0,r.jsx)(l.n0,{renderChildren:N[1],summary:o("Renomination required ({{count}})",{replace:{count:N[0]}})}),C&&(0,r.jsx)(l.n0,{renderChildren:C[1],summary:o("Waiting nominations ({{count}})",{replace:{count:C[0]}})}),d&&p&&0===d.length&&0!==p.length&&(0,r.jsx)(l.Pd,{content:o("This could mean your nomination has not been applied to any validator in the active set by the election algorithm or it has been applied against a validator who is either oversubscribed or chilled.")})]})}));var ee="staking:favorites",ne=function(){return ne=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ne.apply(this,arguments)};const te=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.controllerId,s=e.poolId,o=(0,y.$)().t;return s&&a?(0,r.jsxs)(l.u_.Columns,ne({className:t,hint:o("The pool and pool member that is to be affected. The transaction will be sent from the associated pool member account.")},{children:[(0,r.jsx)(l.Rn,{defaultValue:s,isDisabled:!0,label:o("pool id")}),(0,r.jsx)(l.rp,{defaultValue:a,isDisabled:!0,label:o("member account")})]})):null}));var re,ae,se=function(){return se=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},se.apply(this,arguments)},oe=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},ie=l.zo.div(ce||(re=["\n  article.warning {\n    margin-top: 0;\n  }\n\n  .auto--toggle {\n    margin: 0.5rem 0 0;\n    text-align: right;\n    width: 100%;\n  }\n\n  .ui--Static .ui--AddressMini.padded.addressStatic {\n    padding-top: 0.5rem;\n\n    .ui--AddressMini-info {\n      min-width: 10rem;\n      max-width: 10rem;\n    }\n  }\n\n  .shortlist {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n\n    .candidate {\n      border: 1px solid #eee;\n      border-radius: 0.25rem;\n      margin: 0.25rem;\n      padding-bottom: 0.25rem;\n      padding-right: 0.5rem;\n      position: relative;\n\n      &::after {\n        content: '';\n        position: absolute;\n        top: 0;\n        right: 0;\n        border-color: transparent;\n        border-style: solid;\n        border-radius: 0.25em;\n        border-width: 0.25em;\n      }\n\n      &.isAye {\n        background: #fff;\n        border-color: #ccc;\n      }\n\n      &.member::after {\n        border-color: green;\n      }\n\n      &.runnerup::after {\n        border-color: steelblue;\n      }\n\n      .ui--AddressMini-icon {\n        z-index: 1;\n      }\n\n      .candidate-right {\n        text-align: right;\n      }\n    }\n  }\n"],ae=["\n  article.warning {\n    margin-top: 0;\n  }\n\n  .auto--toggle {\n    margin: 0.5rem 0 0;\n    text-align: right;\n    width: 100%;\n  }\n\n  .ui--Static .ui--AddressMini.padded.addressStatic {\n    padding-top: 0.5rem;\n\n    .ui--AddressMini-info {\n      min-width: 10rem;\n      max-width: 10rem;\n    }\n  }\n\n  .shortlist {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n\n    .candidate {\n      border: 1px solid #eee;\n      border-radius: 0.25rem;\n      margin: 0.25rem;\n      padding-bottom: 0.25rem;\n      padding-right: 0.5rem;\n      position: relative;\n\n      &::after {\n        content: '';\n        position: absolute;\n        top: 0;\n        right: 0;\n        border-color: transparent;\n        border-style: solid;\n        border-radius: 0.25em;\n        border-width: 0.25em;\n      }\n\n      &.isAye {\n        background: #fff;\n        border-color: #ccc;\n      }\n\n      &.member::after {\n        border-color: green;\n      }\n\n      &.runnerup::after {\n        border-color: steelblue;\n      }\n\n      .ui--AddressMini-icon {\n        z-index: 1;\n      }\n\n      .candidate-right {\n        text-align: right;\n      }\n    }\n  }\n"],Object.defineProperty?Object.defineProperty(re,"raw",{value:ae}):re.raw=ae,ce=re));const le=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.controllerId,o=e.nominating,i=e.onChange,u=e.poolId,m=e.stashId,h=e.targets.nominateIds,p=void 0===h?[]:h,f=e.withSenders,v=(0,y.$)().t,x=(0,c.h)().api,g=(0,d.r)(ee)[0],b=(0,a.useState)(o||[]),j=b[0],w=b[1],N=(0,a.useState)((function(){var e=oe(oe([],g.filter((function(e){return p.includes(e)})),!0),(o||[]).filter((function(e){return!g.includes(e)})),!0);return e.concat.apply(e,p.filter((function(n){return!e.includes(n)})))}))[0];(0,a.useEffect)((function(){try{i({nominateTx:j&&j.length?u?x.tx.nominationPools.nominate(u,j):x.tx.staking.nominate(j):null})}catch(e){i({nominateTx:null})}}),[x,i,u,j]);var k=x.consts.staking.maxNominations?x.consts.staking.maxNominations.toNumber():16;return(0,r.jsxs)(ie,se({className:t},{children:[f&&(u?(0,r.jsx)(te,{controllerId:s,poolId:u}):(0,r.jsx)(z,{controllerId:s,stashId:m})),(0,r.jsxs)(l.u_.Columns,se({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:v("Nominators can be selected manually from the list of all currently available validators.")}),(0,r.jsx)("p",{children:v("Once transmitted the new selection will only take effect in 2 eras taking the new validator election cycle into account. Until then, the nominations will show as inactive.")})]})},{children:[(0,r.jsx)(l.m3,{available:N,availableLabel:v("candidate accounts"),defaultValue:o,maxCount:k,onChange:w,valueLabel:v("nominated accounts")}),(0,r.jsx)(l.Pd,{content:v("You should trust your nominations to act competently and honest; basing your decision purely on their current profitability could lead to reduced profits or even loss of funds.")})]}))]}))}));var ce,ue=function(){return ue=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ue.apply(this,arguments)},de=(0,l.zo)(l.u_)(he||(he=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .nominatePartial {\n    .ui--Static .ui--AddressMini .ui--AddressMini-info {\n      max-width: 10rem;\n      min-width: 10rem;\n    }\n  }\n"],["\n  .nominatePartial {\n    .ui--Static .ui--AddressMini .ui--AddressMini-info {\n      max-width: 10rem;\n      min-width: 10rem;\n    }\n  }\n"])));const me=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.controllerId,o=e.nominating,i=e.onClose,c=e.poolId,u=e.stashId,d=e.targets,m=(0,y.$)().t,h=(0,a.useState)({}),p=h[0].nominateTx,f=h[1];return(0,r.jsxs)(de,ue({className:t,header:m("Nominate Validators"),onClose:i,size:"large"},{children:[(0,r.jsx)(l.u_.Content,{children:(0,r.jsx)(le,{className:"nominatePartial",controllerId:s,nominating:o,onChange:f,poolId:c,stashId:u,targets:d,withSenders:!0})}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:s,extrinsic:p,icon:"hand-paper",isDisabled:!p,label:m("Nominate"),onStart:i})})]}))}));var he,pe=function(){return pe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},pe.apply(this,arguments)};const fe=a.memo((function(e){var n=e.controllerId,t=e.onClose,s=e.stakingInfo,o=e.stashId,i=(0,y.$)().t,u=(0,c.h)().api,d=(0,a.useState)(),m=d[0],h=d[1],p=(0,a.useMemo)((function(){return s&&s.unlocking?s.unlocking.reduce((function(e,n){var t=n.value;return e.iadd(t)}),new(b())(0)):j.nw}),[s]);return(0,r.jsxs)(l.u_,pe({header:i("Bond more funds"),onClose:t,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsx)(z,{controllerId:n,stashId:o}),p&&(0,r.jsx)(l.u_.Columns,pe({hint:i("The amount the is to be rebonded from the value currently unlocking, i.e. previously unbonded")},{children:(0,r.jsx)(l.H,{autoFocus:!0,defaultValue:p,isError:!m||m.eqn(0)||m.gt(p),label:i("rebonded amount"),onChange:h})}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:n,icon:"sign-in-alt",isDisabled:!m||m.isZero()||!p||m.gt(p),label:i("Rebond"),onStart:t,params:[m],tx:u.tx.staking.rebond})})]}))}));var ve={transform:function(e){return e.isSome?e.unwrap().toString():null}},xe={transform:function(e){return e.isSome?e.unwrap().stash.toString():null}};const ge=a.memo((function(e){var n,t=e.accountId,s=e.controllerId,o=e.defaultController,i=e.onError,u=(0,y.$)().t,d=(0,c.h)().api,h=(0,m.W7)(s?d.query.staking.bonded:null,[s],ve),p=(0,m.W7)(s?d.query.staking.ledger:null,[s],xe),f=(0,m.W7)(s?null===(n=d.derive.balances)||void 0===n?void 0:n.all:null,[s]),v=(0,a.useState)({error:null,isFatal:!1}),x=v[0],g=x.error,b=x.isFatal,j=v[1];return(0,a.useEffect)((function(){if(o!==s){var e=null,n=!1;h&&s!==t?(n=!0,e=u("A controller account should not map to another stash. This selected controller is a stash, controlled by {{bondedId}}",{replace:{bondedId:h}})):p?(n=!0,e=u("A controller account should not be set to manage multiple stashes. The selected controller is already controlling {{stashId}}",{replace:{stashId:p}})):(null==f?void 0:f.freeBalance.isZero())?(n=!0,e=u("The controller does not have sufficient funds available to cover transaction fees. Ensure that a funded controller is used.")):s===t&&(e=u("Distinct stash and controller accounts are recommended to ensure fund security. You will be allowed to make the transaction, but take care to not tie up all funds, only use a portion of the available funds during this period.")),i(e,n),j((function(t){return t.error!==e?{error:e,isFatal:n}:t}))}}),[t,f,h,s,o,i,p,u]),g&&t?b?(0,r.jsx)(l.oy,{content:g}):(0,r.jsx)(l.Pd,{content:g}):null}));var be=function(){return be=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},be.apply(this,arguments)};const je=a.memo((function(e){var n=e.defaultControllerId,t=e.onClose,s=e.stashId,o=(0,y.$)().t,i=(0,c.h)().api,u=(0,a.useState)(!1),d=u[0],m=u[1],h=(0,a.useState)(null),p=h[0],f=h[1],v=(0,a.useCallback)((function(e,n){return m(n)}),[]);return(0,r.jsxs)(l.u_,be({header:o("Change controller account"),onClose:t,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsx)(l.u_.Columns,be({hint:o("The stash account that is used. This will allow the controller to perform all non-funds related operations on behalf of the account.")},{children:(0,r.jsx)(l.rp,{isDisabled:!0,label:o("stash account"),value:s})})),(0,r.jsxs)(l.u_.Columns,be({hint:o("The selected controller tied to this stash. Once set, this account will be able to control the actions performed by the stash account.")},{children:[(0,r.jsx)(l.rp,{defaultValue:n,label:o("controller account"),onChange:f,type:"account",value:p}),(0,r.jsx)(ge,{accountId:s,controllerId:p,defaultController:n,onError:v})]}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:s,icon:"sign-in-alt",isDisabled:!p||d,label:o("Set controller"),onStart:t,params:[p],tx:i.tx.staking.setController})})]}))}));function ye(e){return function(e){return[{text:e("Stash account (increase the amount at stake)"),value:"Staked"},{text:e("Stash account (do not increase the amount at stake)"),value:"Stash"},{text:e("Controller account"),value:"Controller"}]}(e).concat({text:e("Specified payment account"),value:"Account"})}var we=function(){return we=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},we.apply(this,arguments)};const Ne=a.memo((function(e){var n,t=e.controllerId,s=e.defaultDestination,o=e.onClose,i=e.stashId,u=(0,y.$)().t,d=(0,c.h)().api,h=(0,a.useState)((function(){return((null==s?void 0:s.isAccount)?"Account":null==s?void 0:s.toString())||"Staked"})),p=h[0],f=h[1],v=(0,a.useState)((function(){return(null==s?void 0:s.isAccount)?s.asAccount.toString():null})),x=v[0],g=v[1],b=(0,m.W7)(null===(n=d.derive.balances)||void 0===n?void 0:n.all,[x]),j=(0,a.useMemo)((function(){return ye(u)}),[u]),w="Account"===p,N=w&&b&&b.accountId.eq(x)&&b.freeBalance.isZero();return(0,r.jsxs)(l.u_,we({header:u("Bonding Preferences"),onClose:o,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsxs)(l.u_.Columns,we({hint:u("The stash and controller pair as linked. This operation will be performed via the controller.")},{children:[(0,r.jsx)(l.rp,{defaultValue:i,isDisabled:!0,label:u("stash account")}),(0,r.jsx)(l.rp,{defaultValue:t,isDisabled:!0,label:u("controller account")})]})),(0,r.jsxs)(l.u_.Columns,we({hint:u("All rewards will go towards the selected output destination when a payout is made.")},{children:[(0,r.jsx)(l.Lt,{defaultValue:null==s?void 0:s.toString(),label:u("payment destination"),onChange:f,options:j,value:p}),w&&(0,r.jsx)(l.rp,{label:u("the payment account"),onChange:g,type:"account",value:x}),N&&(0,r.jsx)(l.oy,{content:u("The selected destination account does not exist and cannot be used to receive rewards")})]}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:t,icon:"sign-in-alt",isDisabled:!t||w&&(!x||N),label:u("Set reward destination"),onStart:o,params:[w?{Account:x}:p],tx:d.tx.staking.setPayee})})]}))}));var ke=t(74076),Oe=function(){return Oe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Oe.apply(this,arguments)},Ce=new Uint8Array;const Se=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.controllerId,o=e.onChange,i=e.stashId,u=e.withFocus,d=e.withSenders,m=(0,y.$)().t,h=(0,c.h)().api,p=(0,a.useState)(null),f=p[0],v=p[1];return(0,a.useEffect)((function(){try{o({sessionTx:(0,ke.vq)(f)?h.tx.session.setKeys(f,Ce):null})}catch(e){o({sessionTx:null})}}),[h,f,o]),(0,r.jsxs)("div",Oe({className:t},{children:[d&&(0,r.jsxs)(l.u_.Columns,Oe({hint:m("The stash and controller pair. This transaction, setting the session keys, will be sent from the controller.")},{children:[(0,r.jsx)(l.rp,{defaultValue:i,isDisabled:!0,label:m("stash account")}),(0,r.jsx)(l.rp,{className:"medium",defaultValue:s,isDisabled:!0,label:m("controller account")})]})),(0,r.jsx)(l.u_.Columns,Oe({hint:m("The hex output from author_rotateKeys, as executed on the validator node. The keys will show as pending until applied at the start of a new session.")},{children:(0,r.jsx)(l.II,{autoFocus:u,isError:!f,label:m("Keys from rotateKeys"),onChange:v,placeholder:"0x..."})}))]}))}));var Ie=function(){return Ie=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ie.apply(this,arguments)};const Pe=a.memo((function(e){var n=e.controllerId,t=e.onClose,s=e.stashId,o=(0,y.$)().t,i=(0,a.useState)({}),c=i[0].sessionTx,u=i[1];return(0,r.jsxs)(l.u_,Ie({header:o("Set Session Key"),onClose:t,size:"large"},{children:[(0,r.jsx)(l.u_.Content,{children:(0,r.jsx)(Se,{controllerId:n,onChange:u,stashId:s,withFocus:!0,withSenders:!0})}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:n,extrinsic:c,icon:"sign-in-alt",isDisabled:!c,label:o("Set Session Key"),onStart:t})})]}))}));var Ae=t(65874);const Me=(0,C.e)("useUnbondDuration",(function(){var e=(0,c.h)().api,n=(0,m.W7)(e.derive.session.info);return(0,a.useMemo)((function(){return n&&n.sessionLength.gt(j.If)?n.eraLength.mul(e.consts.staking.bondingDuration):void 0}),[e,n])}));var Te=function(){return Te=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Te.apply(this,arguments)},Ee=(0,l.zo)(l.u_)(qe||(qe=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .staking--Unbond--max > div {\n    justify-content: flex-end;\n\n    & .column {\n      flex: 0;\n    }\n  }\n"],["\n  .staking--Unbond--max > div {\n    justify-content: flex-end;\n\n    & .column {\n      flex: 0;\n    }\n  }\n"])));const De=a.memo((function(e){var n=e.controllerId,t=e.onClose,s=e.stakingLedger,o=e.stashId,i=(0,y.$)().t,u=(0,c.h)().api,d=Me(),m=(0,a.useState)((function(){var e;return(null===(e=null==s?void 0:s.active)||void 0===e?void 0:e.unwrap())||null}))[0],h=(0,a.useState)(),p=h[0],f=h[1];return(0,r.jsxs)(Ee,Te({header:i("Unbond funds"),onClose:t,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsxs)(l.u_.Columns,Te({hint:i("The stash and controller pair, here the controller will be used to send the transaction.")},{children:[(0,r.jsx)(l.rp,{defaultValue:o,isDisabled:!0,label:i("stash account")}),(0,r.jsx)(l.rp,{defaultValue:n,isDisabled:!0,label:i("controller account")})]})),(0,r.jsxs)(l.u_.Columns,Te({hint:i("The funds will only be available for withdrawal after the unbonding period, however will not be part of the staked amount after the next validator election. You can follow the unlock countdown in the UI.")},{children:[(0,r.jsx)(l.H,{autoFocus:!0,defaultValue:m,label:i("unbond amount"),labelExtra:(0,r.jsx)(x.Z,{label:(0,r.jsx)("span",Te({className:"label"},{children:i("bonded")})),value:m}),maxValue:m,onChange:f,withMax:!0}),(null==d?void 0:d.gtn(0))&&(0,r.jsx)(l.qG,Te({label:i("on-chain bonding duration")},{children:(0,r.jsx)(Ae.Z,{value:d})}))]}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:n,icon:"unlock",isDisabled:!(null==p?void 0:p.gt(j.nw)),label:i("Unbond"),onStart:t,params:[p],tx:u.tx.staking.unbond})})]}))}));var qe,Fe=t(52107),Ve=function(){return Ve=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ve.apply(this,arguments)},Re=new(b())(1e7);const _e=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.controllerId,o=e.minCommission,i=e.onChange,u=e.stashId,d=e.withFocus,m=e.withSenders,h=(0,y.$)().t,p=(0,c.h)().api,f=(0,a.useState)(j.If),x=f[0],g=f[1],b=(0,a.useState)(!0),w=b[0],N=b[1],k=(0,a.useMemo)((function(){return o?(0,Fe.x)(o.div(Re),j.If):j.If}),[o]),O=(0,a.useRef)([{text:h("Yes, allow nominations"),value:!0},{text:h("No, block all nominations"),value:!1}]);(0,a.useEffect)((function(){try{i({validateTx:p.tx.staking.validate({blocked:!w,commission:x})})}catch(e){i({validateTx:null})}}),[p,w,x,i]);var C=(0,a.useCallback)((function(e){return e&&g(e.isZero()?j.If:e.mul(Re))}),[]),S=!!o&&x.lt(o);return(0,r.jsxs)("div",Ve({className:t},{children:[m&&(0,r.jsxs)(l.u_.Columns,Ve({hint:h("The stash and controller pair. This transaction, managing preferences, will be sent from the controller.")},{children:[(0,r.jsx)(l.rp,{defaultValue:u,isDisabled:!0,label:h("stash account")}),(0,r.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:h("controller account")})]})),(0,r.jsxs)(l.u_.Columns,Ve({hint:h("The commission is deducted from all rewards before the remainder is split with nominators.")},{children:[(0,r.jsx)(l.Rn,{autoFocus:d,defaultValue:k,isError:S,isZeroable:!0,label:h("reward commission percentage"),maxValue:j.S8,onChange:C}),S&&(0,r.jsx)(l.oy,{content:h("The commission is below the on-chain minimum of {{p}}%",{replace:{p:(o.mul(j.S8).div(Re).toNumber()/100).toFixed(2)}})})]})),(0,v.m)(p.tx.staking.kick)&&(0,r.jsx)(l.u_.Columns,Ve({hint:h("The validator can block any new nominations. By default it is set to allow all nominations.")},{children:(0,r.jsx)(l.Lt,{defaultValue:!0,label:h("allows new nominations"),onChange:N,options:O.current})}))]}))}));var Be=function(){return Be=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Be.apply(this,arguments)};const Ze=a.memo((function(e){var n=e.controllerId,t=e.minCommission,s=e.onClose,o=e.stashId,i=(0,y.$)().t,c=(0,a.useState)({}),u=c[0].validateTx,d=c[1];return(0,r.jsxs)(l.u_,Be({header:i("Set validator preferences"),onClose:s,size:"large"},{children:[(0,r.jsx)(l.u_.Content,{children:(0,r.jsx)(_e,{controllerId:n,minCommission:t,onChange:d,stashId:o,withFocus:!0,withSenders:!0})}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:n,extrinsic:u,icon:"certificate",isDisabled:!u,label:i("Validate"),onStart:s})})]}))})),Le=a.memo((function(e){var n=e.minBond,t=e.stakingInfo,s=(0,y.$)().t;return(0,a.useMemo)((function(){return n&&t&&t.stakingLedger.active.unwrap().lt(n)}),[n,t])?(0,r.jsx)(l.Pd,{content:s("Your bonded amount is below the on-chain minimum threshold of {{minBond}} and may be chilled. Bond extra funds to increase the bonded amount.",{replace:{minBond:(0,A.a)(n)}})}):null}));var He=function(){return He=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},He.apply(this,arguments)},ze=l.zo.tr($e||($e=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--Button-Group {\n    display: inline-block;\n    margin-right: 0.25rem;\n    vertical-align: inherit;\n  }\n"],["\n  .ui--Button-Group {\n    display: inline-block;\n    margin-right: 0.25rem;\n    vertical-align: inherit;\n  }\n"])));const We=a.memo((function(e){var n,t,s,o=e.allSlashes,i=e.className,u=void 0===i?"":i,d=e.info,h=d.controllerId,p=d.destination,f=d.hexSessionIdNext,x=d.hexSessionIdQueue,g=d.isLoading,b=d.isOwnController,j=d.isOwnStash,w=d.isStashNominating,C=d.isStashValidating,S=d.nominating,P=d.sessionIds,A=d.stakingLedger,M=d.stashId,T=e.isDisabled,E=e.minCommission,q=e.targets,F=(0,y.$)().t,V=(0,c.h)().api,R=(0,N.L)().queueExtrinsic,_=(0,k.O)(),B=_[0],Z=_[1],H=(0,k.O)(),z=H[0],W=H[1],$=(0,k.O)(),J=$[0],G=$[1],Q=(0,k.O)(),X=Q[0],K=Q[1],ee=(0,k.O)(),ne=ee[0],te=ee[1],re=(0,k.O)(),ae=re[0],se=re[1],oe=(0,k.O)(),ie=oe[0],le=oe[1],ce=(0,k.O)(),ue=ce[0],de=ce[1],he=(0,k.O)(),pe=he[0],ve=he[1],xe=(0,k.O)(),ge=xe[0],be=xe[1],ye=function(e,n){var t,r=(0,a.useMemo)((function(){return[n]}),[n]),s=(0,m.W7)(null===(t=e.derive.balances)||void 0===t?void 0:t.all,r),o=(0,m.W7)(e.derive.staking.account,r);return{balancesAll:s,spanCount:I(n),stakingAccount:o}}(V,M),we=ye.balancesAll,ke=ye.spanCount,Oe=ye.stakingAccount,Ce=(0,a.useMemo)((function(){return function(e,n){return void 0===n&&(n=[]),n.map((function(n){return{era:n[0],slashes:n[1].filter((function(n){var t=n.others;return n.validator.eq(e)||t.some((function(n){return n[0].eq(e)}))}))}})).filter((function(e){return e.slashes.length}))}(M,o)}),[o,M]),Se=(0,a.useCallback)((function(){return R({accountId:h,extrinsic:1===V.tx.staking.withdrawUnbonded.meta.args.length?V.tx.staking.withdrawUnbonded(ke):V.tx.staking.withdrawUnbonded()})}),[V,h,R,ke]),Ie=!!(null==Oe?void 0:Oe.stakingLedger)&&!(null===(n=Oe.stakingLedger.active)||void 0===n?void 0:n.isEmpty);return(0,r.jsxs)(ze,He({className:u},{children:[(0,r.jsx)("td",He({className:"badge together"},{children:0!==Ce.length&&(0,r.jsx)(l.Ct,{color:"red",hover:F("Slashed in era {{eras}}",{replace:{eras:Ce.map((function(e){var n=e.era;return(0,O.u)(n)})).join(", ")}}),icon:"skull-crossbones"})})),(0,r.jsxs)("td",He({className:"address"},{children:[(0,r.jsx)(l.N,{value:M}),B&&(0,r.jsx)(D,{controllerId:h,onClose:Z,stakingInfo:Oe,stashId:M}),z&&(0,r.jsx)(L,{onClose:W}),J&&h&&(0,r.jsx)(U,{controllerId:h,onClose:G,stashId:M}),X&&h&&(0,r.jsx)(me,{controllerId:h,nominating:S,onClose:K,stashId:M,targets:q}),ne&&(0,r.jsx)(fe,{controllerId:h,onClose:te,stakingInfo:Oe,stashId:M}),ie&&h&&(0,r.jsx)(je,{defaultControllerId:h,onClose:le,stashId:M}),ae&&h&&(0,r.jsx)(Ne,{controllerId:h,defaultDestination:p,onClose:se,stashId:M}),ue&&h&&(0,r.jsx)(Pe,{controllerId:h,onClose:de,stashId:M}),pe&&(0,r.jsx)(De,{controllerId:h,onClose:ve,stakingLedger:A,stashId:M}),ge&&h&&(0,r.jsx)(Ze,{controllerId:h,minCommission:E,onClose:be,stashId:M})]})),(0,r.jsx)("td",He({className:"address"},{children:(0,r.jsx)(l.ax,{value:h})})),(0,r.jsx)("td",He({className:"start media--1200"},{children:(null==p?void 0:p.isAccount)?(0,r.jsx)(l.ax,{value:p.asAccount}):null==p?void 0:p.toString()})),(0,r.jsxs)("td",He({className:"number"},{children:[(0,r.jsx)(l.d4,{stakingInfo:Oe}),(0,r.jsx)(l.JM,{stakingInfo:Oe}),(0,r.jsx)(l.by,{stakingInfo:Oe})]})),C?(0,r.jsxs)("td",He({className:"all"},{children:[(0,r.jsx)(l.hl,{address:M,withBalance:!1,withHexSessionId:"0x"!==f&&[x,f],withValidatorPrefs:!0}),(0,r.jsx)(Le,{minBond:q.minValidatorBond,stakingInfo:Oe})]})):(0,r.jsx)("td",He({className:"all expand"},{children:w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y,{nominating:S,stashId:M}),(0,r.jsx)(Le,{minBond:q.minNominatorBond,stakingInfo:Oe})]})})),(0,r.jsx)("td",He({className:"button"},{children:!g&&(0,r.jsxs)(r.Fragment,{children:[w||C?(0,r.jsx)(l.cA,{accountId:h,icon:"stop",isDisabled:!b||T,label:F("Stop"),tx:V.tx.staking.chill},"stop"):(0,r.jsxs)(l.zx.Group,{children:[P.length&&"0x"!==f?(0,r.jsx)(l.zx,{icon:"certificate",isDisabled:!b||T||!Ie,label:F("Validate"),onClick:be},"validate"):(0,r.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:!b||T,label:F("Session Key"),onClick:de},"set"),(0,r.jsx)(l.zx,{icon:"hand-paper",isDisabled:!b||T||!Ie,label:F("Nominate"),onClick:K},"nominate")]}),(0,r.jsx)(l.GI,{isDisabled:T,value:(0,r.jsxs)(l.v2,{children:[(0,r.jsx)(l.v2.Item,{isDisabled:!j||!(null==we?void 0:we.freeBalance.gtn(0)),label:F("Bond more funds"),onClick:Z}),(0,r.jsx)(l.v2.Item,{isDisabled:!b||!Oe||!Oe.stakingLedger||(null===(t=Oe.stakingLedger.active)||void 0===t?void 0:t.isEmpty),label:F("Unbond funds"),onClick:ve}),(0,r.jsx)(l.v2.Item,{isDisabled:!(b&&Oe&&Oe.unlocking&&Oe.unlocking.length),label:F("Rebond funds"),onClick:te}),(0,r.jsx)(l.v2.Item,{isDisabled:!(b&&Oe&&Oe.redeemable&&Oe.redeemable.gtn(0)),label:F("Withdraw unbonded funds"),onClick:Se}),(0,r.jsx)(l.v2.Divider,{}),(0,r.jsx)(l.v2.Item,{isDisabled:!j,label:F("Change controller account"),onClick:le}),(0,r.jsx)(l.v2.Item,{isDisabled:!b,label:F("Change reward destination"),onClick:se}),C&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.v2.Item,{isDisabled:!b,label:F("Change validator preferences"),onClick:be}),(0,v.m)(V.tx.staking.kick)&&(0,r.jsx)(l.v2.Item,{isDisabled:!b,label:F("Remove nominees"),onClick:G})]}),(0,r.jsx)(l.v2.Divider,{}),!w&&(0,r.jsx)(l.v2.Item,{isDisabled:!b,label:F("Change session keys"),onClick:de}),w&&(0,r.jsx)(l.v2.Item,{isDisabled:!b||!(null===(s=q.validators)||void 0===s?void 0:s.length),label:F("Set nominees"),onClick:K}),!w&&(0,r.jsx)(l.v2.Item,{label:F("Inject session keys (advanced)"),onClick:W})]})},"settings")]})}))]}))}));var $e,Ue=function(){return Ue=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ue.apply(this,arguments)};const Je=a.memo((function(e){var n=e.allSlashes,t=e.className,s=e.footer,o=e.isInElection,i=e.list,c=e.minCommission,u=e.targets,d=(0,y.$)().t,m=(0,a.useRef)([[d("stashes"),"start",2],[d("controller"),"address"],[d("rewards"),"start media--1200"],[d("bonded"),"number"],[],[]]);return(0,r.jsx)(l.iA,Ue({className:t,empty:i&&d("No funds staked yet. Bond funds to validate or nominate a validator"),footer:s,header:m.current},{children:null==i?void 0:i.map((function(e){return(0,r.jsx)(We,{allSlashes:n,info:e,isDisabled:o,minCommission:c,targets:u},e.stashId)}))}))}));var Ge=function(){return Ge=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ge.apply(this,arguments)},Qe={bondOwnTx:null,bondTx:null,controllerId:null,controllerTx:null,stashId:null};const Xe=a.memo((function(e){var n,t,s=e.className,o=void 0===s?"":s,i=e.isNominating,u=e.minNominated,d=e.minNominatorBond,h=e.minValidatorBond,p=e.onChange,f=(0,y.$)().t,v=(0,c.h)().api,x=(0,a.useState)(),g=x[0],b=x[1],w=(0,a.useState)(null),N=w[0],k=w[1],O=(0,a.useState)(!1),C=O[0],S=O[1],I=(0,a.useState)(null),A=I[0],M=I[1],E=(0,a.useState)("Staked"),D=E[0],q=E[1],F=(0,a.useState)(null),V=F[0],R=F[1],_=(0,a.useState)(null),B=_[0],Z=_[1],L=(0,a.useState)(null),H=L[0],z=L[1],W=(0,m.W7)(null===(n=v.derive.balances)||void 0===n?void 0:n.all,[B]),$=(0,m.W7)(null===(t=v.derive.balances)||void 0===t?void 0:t.all,[V]),U=Me(),J=(0,a.useMemo)((function(){return ye(f)}),[f]),G=(0,a.useCallback)((function(e,n){return S(n)}),[]);(0,a.useEffect)((function(){W&&z(W.freeBalance.gt(v.consts.balances.existentialDeposit)?W.freeBalance.sub(v.consts.balances.existentialDeposit):j.nw)}),[v,W]),(0,a.useEffect)((function(){z(null)}),[B]),(0,a.useEffect)((function(){var e="Account"===D?{Account:V}:D;p(g&&g.gtn(0)&&!(null==N?void 0:N.error)&&!C&&A&&B?{bondOwnTx:v.tx.staking.bond(B,g,e),bondTx:v.tx.staking.bond(A,g,e),controllerId:A,controllerTx:v.tx.staking.setController(A),stashId:B}:Qe)}),[v,g,N,C,A,D,V,B,p]);var Q=!!(null==g?void 0:g.gtn(0)),X="Account"===D,K=X&&$&&$.accountId.eq(V)&&$.freeBalance.isZero();return(0,r.jsxs)("div",Ge({className:o},{children:[(0,r.jsxs)(l.u_.Columns,Ge({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:f("Think of the stash as your cold wallet and the controller as your hot wallet. Funding operations are controlled by the stash, any other non-funding actions by the controller itself.")}),(0,r.jsx)("p",{children:f("To ensure optimal fund security using the same stash/controller is strongly discouraged, but not forbidden.")})]})},{children:[(0,r.jsx)(l.rp,{label:f("stash account"),onChange:Z,type:"account",value:B}),(0,r.jsx)(l.rp,{label:f("controller account"),onChange:M,type:"account",value:A}),(0,r.jsx)(ge,{accountId:B,controllerId:A,onError:G})]})),H&&(0,r.jsxs)(l.u_.Columns,Ge({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:f("The amount placed at-stake should not be your full available amount to allow for transaction fees.")}),(0,r.jsx)("p",{children:f("Once bonded, it will need to be unlocked/withdrawn and will be locked for at least the bonding duration.")})]})},{children:[(0,r.jsx)(l.H,{autoFocus:!0,defaultValue:H,isError:!Q||!!(null==N?void 0:N.error),label:f("value bonded"),labelExtra:(0,r.jsx)(P.Z,{label:(0,r.jsx)("span",Ge({className:"label"},{children:f("balance")})),params:B}),onChange:b}),(0,r.jsx)(T,{controllerId:A,isNominating:i,minNominated:u,minNominatorBond:d,minValidatorBond:h,onError:k,stashId:B,value:g}),(null==U?void 0:U.gtn(0))&&(0,r.jsx)(l.qG,Ge({label:f("on-chain bonding duration")},{children:(0,r.jsx)(Ae.Z,{value:U})}))]})),(0,r.jsxs)(l.u_.Columns,Ge({hint:f("Rewards (once paid) can be deposited to either the stash or controller, with different effects.")},{children:[(0,r.jsx)(l.Lt,{defaultValue:0,label:f("payment destination"),onChange:q,options:J,value:D}),X&&(0,r.jsx)(l.rp,{label:f("the payment account"),onChange:R,type:"account",value:V}),K&&(0,r.jsx)(l.oy,{content:f("The selected destination account does not exist and cannot be used to receive rewards")})]}))]}))}));var Ke=function(){return Ke=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ke.apply(this,arguments)},Ye=[];const en=a.memo((function(e){var n,t,s=e.isInElection,o=e.targets,i=(0,y.$)().t,u=(0,c.h)().api,d=(0,k.O)(),m=d[0],h=d[1],p=(0,a.useState)({}),f=p[0],x=f.bondOwnTx,g=f.bondTx,b=f.controllerId,j=f.controllerTx,w=f.stashId,N=p[1],O=(0,a.useState)({}),C=O[0].nominateTx,S=O[1],I=(0,a.useState)(1),P=I[0],A=I[1],M=s||!(0,v.m)(null===(n=u.tx.utility)||void 0===n?void 0:n.batch),T=(0,a.useCallback)((function(){return A((function(e){return e+1}))}),[]),E=(0,a.useCallback)((function(){return A((function(e){return e-1}))}),[]),D=(0,a.useCallback)((function(){N({}),S({}),A(1),h()}),[h]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.zx,{icon:"plus",isDisabled:M||!(null===(t=o.validators)||void 0===t?void 0:t.length),label:i("Nominator"),onClick:D},"new-nominator"),m&&(0,r.jsxs)(l.u_,Ke({header:i("Setup Nominator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:P}}),onClose:D,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[1===P&&(0,r.jsx)(Xe,{isNominating:!0,minNominated:o.minNominated,minNominatorBond:o.minNominatorBond,onChange:N}),b&&w&&2===P&&(0,r.jsx)(le,{controllerId:b,nominating:Ye,onChange:S,stashId:w,targets:o}),(0,r.jsx)(l.u_.Columns,{children:(0,r.jsx)(l.RN,{})})]}),(0,r.jsxs)(l.u_.Actions,{children:[(0,r.jsx)(l.zx,{icon:"step-backward",isDisabled:1===P,label:i("prev"),onClick:E}),2===P?(0,r.jsx)(l.cA,{accountId:w,icon:"sign-in-alt",isDisabled:!(g&&C&&w&&b),label:i("Bond & Nominate"),onStart:D,params:[w===b?[g,C]:[x,C,j]],tx:u.tx.utility.batchAll||u.tx.utility.batch}):(0,r.jsx)(l.zx,{icon:"step-forward",isDisabled:!g,label:i("next"),onClick:T})]})]}))]})}));var nn=function(){return nn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},nn.apply(this,arguments)};const tn=a.memo((function(){var e=(0,y.$)().t,n=(0,k.O)(),t=n[0],s=n[1],o=(0,a.useState)({}),i=o[0],c=i.bondTx,u=i.stashId,d=o[1],m=(0,a.useCallback)((function(){d({}),s()}),[s]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.zx,{icon:"plus",label:e("Stash"),onClick:m},"new-stash"),t&&(0,r.jsxs)(l.u_,nn({header:e("Bonding Preferences"),onClose:m,size:"large"},{children:[(0,r.jsx)(l.u_.Content,{children:(0,r.jsx)(Xe,{onChange:d})}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:u,extrinsic:c,icon:"sign-in-alt",isDisabled:!c||!u,label:e("Bond"),onStart:m})})]}))]})}));var rn=function(){return rn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},rn.apply(this,arguments)};const an=a.memo((function(e){var n,t=e.isInElection,s=e.minCommission,o=e.targets,i=(0,y.$)().t,u=(0,c.h)().api,d=(0,k.O)(),m=d[0],h=d[1],p=(0,a.useState)({}),f=p[0],x=f.bondOwnTx,g=f.bondTx,b=f.controllerId,j=f.controllerTx,w=f.stashId,N=p[1],O=(0,a.useState)({}),C=O[0].sessionTx,S=O[1],I=(0,a.useState)({}),P=I[0].validateTx,A=I[1],M=(0,a.useState)(1),T=M[0],E=M[1],D=t||!(0,v.m)(null===(n=u.tx.utility)||void 0===n?void 0:n.batch),q=(0,a.useCallback)((function(){return E((function(e){return e+1}))}),[]),F=(0,a.useCallback)((function(){return E((function(e){return e-1}))}),[]),V=(0,a.useCallback)((function(){N({}),S({}),A({}),E(1),h()}),[h]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.zx,{icon:"plus",isDisabled:D,label:i("Validator"),onClick:V},"new-validator"),m&&(0,r.jsxs)(l.u_,rn({header:i("Setup Validator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:T}}),onClose:V,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[1===T&&(0,r.jsx)(Xe,{minValidatorBond:o.minValidatorBond,onChange:N}),b&&w&&2===T&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Se,{controllerId:b,onChange:S,stashId:w,withFocus:!0}),(0,r.jsx)(_e,{controllerId:b,minCommission:s,onChange:A,stashId:w})]}),(0,r.jsx)(l.u_.Columns,{children:(0,r.jsx)(l.RN,{})})]}),(0,r.jsxs)(l.u_.Actions,{children:[(0,r.jsx)(l.zx,{icon:"step-backward",isDisabled:1===T,label:i("prev"),onClick:F}),2===T?(0,r.jsx)(l.cA,{accountId:w,icon:"sign-in-alt",isDisabled:!g||!C||!P,label:i("Bond & Validate"),onStart:V,params:[b===w?[g,C,P]:[x,C,P,j]],tx:u.tx.utility.batchAll||u.tx.utility.batch}):(0,r.jsx)(l.zx,{icon:"step-forward",isDisabled:!g,label:i("next"),onClick:q})]})]}))]})}));var sn=t(19042),on=t(63985),ln=function(){return ln=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ln.apply(this,arguments)},cn="rewards";const un=a.memo((function(e){var n=e.className,t=e.controllerId,s=e.onClose,o=e.poolId,i=(0,y.$)().t,u=(0,c.h)().api,d=(0,a.useState)(cn),m=d[0],h=d[1],p=(0,a.useState)(),f=p[0],v=p[1],x=(0,on.Z)(t,f,j.nw),g=(0,a.useRef)([{text:i("Free balance"),value:"free"},{text:i("Pool rewards"),value:"rewards"}]);return(0,r.jsxs)(l.u_,ln({className:n,header:i("Bond extra into pool"),onClose:s,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsx)(te,{controllerId:t,poolId:o}),(0,r.jsxs)(l.u_.Columns,ln({hint:i("You can either bond a specific amount from your free balance, or all of the accumulated rewards.")},{children:[(0,r.jsx)(l.Lt,{defaultValue:cn,label:i("type of funds to bond"),onChange:h,options:g.current}),"free"===m&&(0,r.jsx)(l.H,{autoFocus:!0,isError:x,label:i("additional free funds to bond"),labelExtra:(0,r.jsx)(P.Z,{label:(0,r.jsx)("span",ln({className:"label"},{children:i("balance")})),params:t}),onChange:v})]}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:t,icon:"sign-in-alt",isDisabled:"free"===m&&x,label:i("Bond Extra"),onStart:s,params:["free"===m?{FreeBalance:f}:"Rewards"],tx:u.tx.nominationPools.bondExtra})})]}))}));var dn=function(){return dn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},dn.apply(this,arguments)};const mn=a.memo((function(e){var n=e.className,t=e.controllerId,s=e.maxUnbond,o=e.onClose,i=e.poolId,u=(0,y.$)().t,d=(0,c.h)().api,m=(0,a.useState)(),h=m[0],p=m[1],f=Me(),v=!h||!s||h.gt(s);return(0,r.jsxs)(l.u_,dn({className:n,header:u("Unbond funds from pool"),onClose:o,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsx)(te,{controllerId:t,poolId:i}),(0,r.jsxs)(l.u_.Columns,dn({hint:u("The amount to unbond. It should be less or equal to the full bonded amount.")},{children:[(0,r.jsx)(l.H,{autoFocus:!0,defaultValue:s,isError:v,label:u("amount to unbond"),labelExtra:(0,r.jsx)(x.Z,{label:(0,r.jsx)("span",dn({className:"label"},{children:u("bonded")})),value:s}),maxValue:s,onChange:p,withMax:!0}),(null==f?void 0:f.gtn(0))&&(0,r.jsx)(l.qG,dn({label:u("on-chain bonding duration")},{children:(0,r.jsx)(Ae.Z,{value:f})}))]}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:t,icon:"unlock",isDisabled:v,label:u("Unbond"),onStart:o,params:[t,h],tx:d.tx.nominationPools.unbond})})]}))}));var hn={transform:function(e){return e.unwrapOr(null)}};const pn=(0,C.e)("useAccountInfo",(function(e){var n=(0,c.h)().api,t=(0,G.X)(),r=(0,a.useState)(null),s=r[0],o=r[1],i=(0,m.W7)(n.query.nominationPools.poolMembers,[e],hn);return(0,a.useEffect)((function(){i&&n.call.nominationPoolsApi&&n.call.nominationPoolsApi.pendingRewards(e).then((function(e){return t.current&&o({claimable:e,member:i})})).catch(console.error)}),[e,i,n,t]),s}));var fn=function(){return fn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},fn.apply(this,arguments)};const vn=a.memo((function(e){var n=e.accountId,t=e.className,s=e.info,o=s.bonded.roles,i=s.metadata,u=s.nominating,d=s.stashId,m=e.isFirst,h=e.poolId,p=e.sessionProgress,f=e.targets,v=(0,y.$)().t,g=(0,c.h)().api,j=I(d),w=(0,N.L)().queueExtrinsic,C=(0,k.O)(),S=C[0],P=C[1],A=(0,k.O)(),M=A[0],T=A[1],E=(0,k.O)(),D=E[0],q=E[1],F=pn(n),V=(0,a.useMemo)((function(){return p&&F&&F.member.unbondingEras&&!F.member.unbondingEras.isEmpty?function(e,n,t,r){for(var a=t.activeEra,s=r.unbondingEras,o=[],i=new(b())(0),l=0,c=s.entries();l<c.length;l++){var u=c[l],d=u[0],m=u[1];d.lte(a)?i.iadd(m):o.push({remainingEras:d.sub(a),value:m})}return{accountId:e,controllerId:e,redeemable:i,stashId:n,unlocking:o}}(n,d,p,F.member):null}),[F,n,d,p]),R=(0,a.useCallback)((function(){return w({accountId:n,extrinsic:g.tx.nominationPools.claimPayout()})}),[g,n,w]),_=(0,a.useCallback)((function(){return w({accountId:n,extrinsic:g.tx.nominationPools.withdrawUnbonded(n,j)})}),[g,n,j,w]),B=(0,a.useMemo)((function(){return function(e,n){var t=n.nominator,r=n.root;return{isNominator:t.eq(e)||r.eq(e)}}(n,o)}),[n,o]).isNominator;return(0,r.jsxs)("tr",fn({className:t},{children:[(0,r.jsx)("td",fn({className:"number"},{children:(0,r.jsx)("h1",{children:m&&(0,O.u)(h)})})),(0,r.jsx)("td",fn({className:"start"},{children:m&&i})),(0,r.jsx)("td",fn({className:"address"},{children:(0,r.jsx)(l.N,{value:n})})),(0,r.jsx)("td",fn({className:"number"},{children:F&&(0,r.jsxs)(r.Fragment,{children:[!F.member.points.isZero()&&(0,r.jsx)(x.Z,{value:F.member.points}),V&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.JM,{stakingInfo:V}),(0,r.jsx)(l.by,{isPool:!0,stakingInfo:V})]})]})})),(0,r.jsx)("td",fn({className:"number"},{children:F&&!F.claimable.isZero()&&(0,r.jsx)(x.Z,{value:F.claimable})})),(0,r.jsx)("td",fn({className:"number"},{children:m&&u&&(0,r.jsx)(Y,{nominating:u,stashId:d})})),(0,r.jsxs)("td",fn({className:"button"},{children:[(0,r.jsx)(l.Ct,{color:B?"green":"transparent",icon:"hand-paper"}),S&&(0,r.jsx)(un,{controllerId:n,onClose:P,poolId:h}),M&&(0,r.jsx)(me,{controllerId:n,nominating:u,onClose:T,poolId:h,stashId:n,targets:f}),F&&D&&(0,r.jsx)(mn,{controllerId:n,maxUnbond:F.member.points,onClose:q,poolId:h}),(0,r.jsx)(l.GI,{value:(0,r.jsxs)(l.v2,{children:[(0,r.jsx)(l.v2.Item,{label:v("Bond more funds"),onClick:P}),(0,r.jsx)(l.v2.Item,{isDisabled:!F||F.member.points.isZero(),label:v("Unbond funds"),onClick:q}),(0,r.jsx)(l.v2.Divider,{}),(0,r.jsx)(l.v2.Item,{isDisabled:!F||F.claimable.isZero(),label:v("Withdraw claimable"),onClick:R}),(0,r.jsx)(l.v2.Item,{isDisabled:!V||V.redeemable.isZero(),label:v("Withdraw unbonded"),onClick:_}),(0,r.jsx)(l.v2.Divider,{}),(0,r.jsx)(l.v2.Item,{isDisabled:!B,label:v("Set nominees"),onClick:T})]})},"settings")]}))]}))})),xn=a.memo((function(e){var n=e.className,t=e.count,a=e.members,s=e.poolId,o=e.sessionProgress,i=e.targets,l=(0,sn.Z)(s);return l?(0,r.jsx)(r.Fragment,{children:Object.keys(a).map((function(e,a){return(0,r.jsx)(vn,{accountId:e,className:"".concat(n||""," ").concat(t%2?"isEven":"isOdd"),info:l,isFirst:0===a,poolId:s,sessionProgress:o,targets:i},"".concat(s.toString(),":").concat(e))}))}):null}));var gn=function(){return gn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},gn.apply(this,arguments)};const bn=a.memo((function(e){var n=e.className,t=e.list,s=e.targets,o=(0,y.$)().t,i=(0,c.h)().api,u=(0,m.W7)(i.derive.session.progress),d=(0,a.useRef)([[o("pools"),"start",2],[o("account"),"address"],[o("bonded")],[o("claimable")],[],[]]);return(0,r.jsx)(l.iA,gn({className:n,empty:t&&o("Not participating in any pools. Join a pool first."),header:d.current},{children:null==t?void 0:t.map((function(e,n){var t=e.members,a=e.poolId;return(0,r.jsx)(xn,{count:n,members:t,poolId:a,sessionProgress:u,targets:s},a.toString())}))}))}));var jn=function(){return jn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},jn.apply(this,arguments)};function yn(e){var n=e.isStashNominating;return e.isStashValidating?1:n?5:99}function wn(e,n){return yn(e)-yn(n)}function Nn(e,n){return n.filter((function(n){var t=n.isStashNominating,r=n.isStashValidating;switch(e){case 1:return t;case 2:return r;case 3:return!t&&!r;default:return!0}}))}function kn(e,n){var t=function(e,n){var t=n.bondedNoms,r=n.bondedNone,a=n.bondedTotal,s=n.bondedVals;switch(e){case 0:default:return a;case 1:return t;case 2:return s;case 3:return r}}(e,n);return t&&(0,r.jsx)(x.Z,{value:t})}const On=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.isInElection,o=e.minCommission,i=e.ownPools,u=e.ownStashes,d=e.targets,m=(0,y.$)().t,h=(0,c.h)().api,p=(0,f.g)(),v=(0,a.useState)(0),x=v[0],g=v[1],N=(0,a.useState)(0),k=N[0],O=N[1],C=(0,a.useRef)([{text:m("Stashed"),value:"stash"},{text:m("Pooled"),value:"pool"}]),S=(0,a.useRef)([{text:m("All stashes"),value:"all"},{text:m("Nominators"),value:"noms"},{text:m("Validators"),value:"vals"},{text:m("Inactive"),value:"chill"}]),I=(0,a.useMemo)((function(){return function(e){if(!e)return{};var n=new(b())(0),t=new(b())(0),r=new(b())(0),a=new(b())(0);return e.forEach((function(e){var s=e.isStashNominating,o=e.isStashValidating,i=e.stakingLedger,l=i&&i.total?i.total.unwrap():j.nw;a.iadd(l),s?n.iadd(l):o?r.iadd(l):t.iadd(l)})),{bondedNoms:n,bondedNone:t,bondedTotal:a,bondedVals:r,foundStashes:e.sort(wn)}}(u)}),[u]),P=(0,a.useMemo)((function(){return[I.foundStashes&&Nn(k,I.foundStashes),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:4}),(0,r.jsx)("td",jn({className:"number"},{children:kn(k,I)})),(0,r.jsx)("td",{colSpan:2})]},"footer")]}),[I,k]),A=P[0],M=P[1];return(0,r.jsxs)("div",jn({className:t},{children:[(0,r.jsxs)(l.zx.Group,{children:[h.consts.nominationPools&&(0,r.jsx)(l.tX,{onChange:g,options:C.current,value:x}),0===x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.tX,{onChange:O,options:S.current,value:k}),(0,r.jsx)(en,{isInElection:s,targets:d}),(0,r.jsx)(an,{isInElection:s,minCommission:o,targets:d}),(0,r.jsx)(tn,{})]})]}),(0,r.jsx)(w,{isInElection:s}),0===x?(0,r.jsx)(Je,{allSlashes:p,footer:M,isInElection:s,list:A,minCommission:o,targets:d}):(0,r.jsx)(bn,{allSlashes:p,list:i,targets:d})]}))}));var Cn=t(79760);const Sn=(0,C.e)("useQueryModule",(function(){var e=(0,c.h)().api;return(0,a.useMemo)((function(){return e.query.voterList||e.query.voterBagsList||e.query.bagsList}),[e])}));var In={transform:function(e){return e.filter((function(e){return e.isSome})).map((function(e){return e.unwrap()})).reduce((function(e,n){var t=n.bagUpper.toString();return e[t]||(e[t]=[]),e[t].push({node:n,stashId:n.id.toString()}),e}),{})}};const Pn=(0,C.e)("useBagsNodes",(function(e){var n=Sn(),t=(0,a.useState)(),r=t[0],s=t[1],o=(0,m.W7)(n.listNodes.multi,[e],In);return(0,a.useEffect)((function(){o&&s((function(e){return function(e,n){return Object.entries(n).reduce((function(n,t){var r=t[0],a=t[1];return n[r]=e&&e[r]&&JSON.stringify(a)===JSON.stringify(e[r])?e[r]:a,n}),{})}(e,o)}))}),[o]),r}));var An=function(){return An=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},An.apply(this,arguments)};const Mn=a.memo((function(e){var n=e.bagUpper,t=e.stashIds,s=(0,y.$)().t,o=(0,c.h)().api,i=(0,a.useState)(null),u=i[0],d=i[1],m=(0,k.O)(),h=m[0],p=m[1],f=Pn(t),v=(0,a.useMemo)((function(){return f?function(e,n){return Object.values(e[n.toString()]||{}).map((function(e){return e.stashId}))}(f,n):[]}),[n,f]),x=(0,a.useState)([]),g=x[0],b=x[1],j=(0,a.useMemo)((function(){return g.map((function(e){return(o.tx.voterBagsList||o.tx.bagsList||o.tx.voterList).rebag(e)}))}),[o,g]),w=(0,Cn.b)(j);return v.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.zx,{icon:"refresh",label:s("Rebag {{count}}",{replace:{count:v.length}}),onClick:p}),h&&(0,r.jsxs)(l.u_,An({header:s("Rebag dislocated entries"),onClose:p,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsx)(l.u_.Columns,An({hint:s("The account that will submit the rebag transaction.")},{children:(0,r.jsx)(l.rp,{label:s("rebag from account"),onChange:d,type:"account"})})),(0,r.jsx)(l.u_.Columns,An({hint:s("The accounts that will be rebagged as a result of this operation.")},{children:(0,r.jsx)(l.m3,{available:v,availableLabel:s("unselected"),defaultValue:v,maxCount:Number.MAX_SAFE_INTEGER,onChange:b,valueLabel:s("to rebag")})}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:u,extrinsic:w,icon:"refresh",isDisabled:!w||!g.length,label:s("Rebag"),onStart:p})})]}))]}):null}));var Tn=function(){return Tn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Tn.apply(this,arguments)},En=l.zo.div(qn||(qn=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--AddressMini {\n    vertical-align: middle;\n  }\n"],["\n  .ui--AddressMini {\n    vertical-align: middle;\n  }\n"])));const Dn=a.memo((function(e){var n=e.bagLower,t=e.bagUpper,s=e.className,o=e.isLoading,i=e.list,u=e.stashId,d=(0,y.$)().t,m=(0,c.h)().api,h=(0,a.useMemo)((function(){return function(e,n,t,r){void 0===r&&(r=[]);var a=r.find((function(e){return e.stashId===t}))||null,s=a&&a.jump&&r.find((function(e){return e.stashId===a.jump}))||null;return{canJump:!!s,jumpCount:a&&s?a.index-s.index:0,stashInfo:a}}(0,0,u,i)}),[n,t,i,u]),p=h.canJump,f=h.jumpCount,v=h.stashInfo;return(0,r.jsxs)(En,Tn({className:s},{children:[(0,r.jsx)(l.ax,{value:u,withBonded:!0}),v&&(p?(0,r.jsx)(l.cA,{accountId:v.stashId,icon:"caret-up",isDisabled:o,label:d("Move up {{jumpCount}}",{replace:{jumpCount:f}}),params:[v.jump],tx:(m.tx.voterBagsList||m.tx.bagsList||m.tx.voterList).putInFrontOf}):null)]}))}));var qn,Fn=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},Vn=[null,{isCompleted:!1,list:[]}],Rn=[];const _n=(0,C.e)("useBagEntries",(function(e,n){var t=Sn(),r=(0,a.useState)(Vn),s=r[0],o=s[0],i=s[1],l=i.isCompleted,c=i.list,u=r[1],d=(0,m.W7)(!!o&&t.listNodes,[o]);return(0,a.useEffect)((function(){return u(e&&n?[e,{isCompleted:!1,list:[e]}]:[null,{isCompleted:!0,list:[]}])}),[e,n]),(0,a.useEffect)((function(){if(d&&d.isSome){var e=d.unwrap().next;if(e.isSome){var n=e.unwrap();u((function(e){var t=e[1].list;return[n,{isCompleted:!1,list:Fn(Fn([],t,!0),[n],!1)}]}))}else u((function(e){return[e[0],{isCompleted:!0,list:e[1].list}]}))}}),[d]),[l,l?c:Rn]}));var Bn={transform:function(e){var n=e.map((function(e,n){var t=e.stakingLedger,r=e.stashId;return{bonded:t.active.unwrap(),index:n,jump:null,stashId:r.toString()}}));return n.map((function(e){var t=n.find((function(n){var t=n.bonded;return n.index<e.index&&t.lt(e.bonded)}));return t&&(e.jump=t.stashId),e}))}};const Zn=(0,C.e)("useBonded",(function(e){var n=(0,c.h)().api;return(0,m.W7)(e&&0!==e.length&&n.derive.staking.accounts,[e],Bn)}));var Ln=function(){return Ln=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ln.apply(this,arguments)};const Hn=a.memo((function(e){var n=e.bagLower,t=e.bagUpper,s=e.info,o=e.nodesOwn,i=(0,a.useState)([null,0]),c=i[0],u=c[0],d=c[1],m=i[1],h=(0,a.useState)([]),p=h[0],f=h[1],v=(0,a.useState)(!0),x=v[0],g=v[1],b=_n(u,d),j=b[0],y=b[1],w=Zn(y);return(0,a.useEffect)((function(){s&&o&&m((function(e){var n=e[1];return[s.head.unwrapOr(null),++n]}))}),[s,o]),(0,a.useEffect)((function(){g(!(!o||!o.length||j&&w))}),[w,j,o]),(0,a.useEffect)((function(){!x&&w&&f(function(e,n,t){return e.filter((function(e){var r=e.bonded;return r.gt(n)||r.lt(t)})).map((function(e){return e.stashId}))}(w,t,n))}),[n,t,w,x]),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"number"}),(0,r.jsx)(l.iA.Column.Balance,{value:t}),(0,r.jsx)(l.iA.Column.Balance,{value:n}),(0,r.jsx)("td",Ln({className:"address"},{children:s.head.isSome&&(0,r.jsx)(l.ax,{value:s.head.unwrap()})})),(0,r.jsx)("td",Ln({className:"address"},{children:s.tail.isSome&&(0,r.jsx)(l.ax,{value:s.tail.unwrap()})})),(0,r.jsx)("td",Ln({className:"address"},{children:null==o?void 0:o.map((function(e){var a=e.stashId;return(0,r.jsx)(Dn,{bagLower:n,bagUpper:t,isLoading:x,list:w,stashId:a},a)}))})),(0,r.jsx)("td",Ln({className:"number"},{children:x?(0,r.jsx)("span",Ln({className:"--tmp"},{children:"99"})):y.length?(0,O.u)(y.length):null})),(0,r.jsx)("td",Ln({className:"button"},{children:!x&&(0,r.jsx)(Mn,{bagLower:n,bagUpper:t,stashIds:p})}))]})}));var zn=t(65968),Wn=function(){return Wn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Wn.apply(this,arguments)};const $n=a.memo((function(e){var n=e.bags,t=e.className,s=void 0===t?"":t,o=e.mapOwn,i=(0,y.$)().t,c=Sn(),u=(0,m.W7)(c.counterForListNodes),d=(0,a.useMemo)((function(){return o&&Object.values(o).reduce((function(e,n){return e+n.length}),0)}),[o]);return(0,r.jsxs)(l.Ty,Wn({className:s},{children:[(0,r.jsx)(l.Jy,Wn({label:i("total bags")},{children:n?(0,O.u)(n.length):(0,r.jsx)("span",Wn({className:"--tmp"},{children:"99"}))})),(0,r.jsxs)("section",{children:[(0,r.jsx)(l.Jy,Wn({label:i("total nodes")},{children:o?(0,O.u)(u):(0,r.jsx)("span",Wn({className:"--tmp"},{children:"99"}))})),(0,r.jsx)(l.Jy,Wn({label:i("my nodes")},{children:(0,zn.h)(d)?(0,O.u)(d):(0,r.jsx)("span",Wn({className:"--tmp"},{children:"99"}))}))]})]}))}));var Un=t(12298),Jn=function(){return Jn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Jn.apply(this,arguments)},Gn={transform:function(e){return e.map((function(e){return e.args[0]}))}},Qn={transform:function(e){var n=e[0][0],t=e[1],r=n.map((function(e,n){return[e,t[n]]})).filter((function(e){return e[1].isSome})).sort((function(e,n){var t=e[0];return n[0].cmp(t)})).map((function(e,n){var t=e[0],r=e[1];return{bagLower:j.nw,bagUpper:t,index:n,info:r.unwrap(),key:t.toString()}}));return r.map((function(e,n){return n===r.length-1?e:Jn(Jn({},e),{bagLower:r[n+1].bagUpper})}))},withParamsTransform:!0};const Xn=(0,C.e)("useBagsList",(function(){var e=Sn(),n=(0,a.useState)(),t=n[0],r=n[1],s=(0,Un.k)(e.listBags,[],Gn),o=(0,m.W7)(s&&0!==s.length&&e.listBags.multi,[s],Qn);return(0,a.useEffect)((function(){o&&r((function(e){return function(e,n){return e&&n.length===e.length?n.map((function(n,t){return JSON.stringify(n)===JSON.stringify(e[t])?e[t]:n})):n}(e,o)}))}),[o]),t}));var Kn=function(){return Kn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Kn.apply(this,arguments)};const Yn=a.memo((function(e){var n=e.className,t=e.ownStashes,s=(0,y.$)().t,o=(0,a.useMemo)((function(){return t?t.map((function(e){return e.stashId})):[]}),[t]),i=(0,a.useState)((function(){return o.length?0:1})),c=i[0],u=i[1],d=Xn(),m=Pn(o),h=(0,a.useRef)([[s("bags")],[s("max"),"number"],[s("min"),"number"],[s("first"),"address"],[s("last"),"address"],[s("stashes"),"address"],[s("nodes"),"number"],[void 0,"mini"]]),p=(0,a.useMemo)((function(){return[{isDisabled:!o.length,text:s("My bags"),value:"mine"},{text:s("All bags"),value:"all"}]}),[o,s]),f=(0,a.useMemo)((function(){return d&&m&&(e=m,n=!c,d.map((function(n){return[n,e[n.key]]})).filter((function(e){var t=e[1];return!n||!!t})));var e,n}),[d,c,m]);return(0,r.jsxs)("div",Kn({className:n},{children:[(0,r.jsx)($n,{bags:d,mapOwn:m}),(0,r.jsx)(l.zx.Group,{children:(0,r.jsx)(l.tX,{onChange:u,options:p,value:c})}),(0,r.jsxs)(l.Pd,Kn({className:"warning centered",withIcon:!1},{children:[(0,r.jsx)("p",{children:s("The All bags list is composed of bags that each describe a range of active bonded funds of the nominators. In each bag is a list of nodes that correspond to a nominator and their staked funds.")}),(0,r.jsx)("p",{children:s("Within the context of a single bag, nodes are not sorted by their stake, but instead placed in insertion order. In other words, the most recently inserted node will be the last node in the bag, regardless of stake. Events like staking rewards or slashes do not automatically put you in a different bag. The bags-list pallet comes with an important permissionless extrinsic: rebag. This allows anyone to specify another account that is in the wrong bag, and place it in the correct one.")})]})),(0,r.jsx)(l.iA,Kn({empty:f&&s("No available bags"),emptySpinner:s("Retrieving all available bags, this will take some time"),header:h.current},{children:null==f?void 0:f.map((function(e){var n=e[0],t=n.bagLower,a=n.bagUpper,s=n.index,o=n.info,i=n.key,l=e[1];return(0,r.jsx)(Hn,{bagLower:t,bagUpper:a,index:s,info:o,nodesOwn:l},i)}))}))]}))}));var et=t(56360),nt=t(59118),tt=function(){return tt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},tt.apply(this,arguments)};function rt(e,n){return n.sort((function(e,n){return e.era.cmp(n.era)})).map((function(n){var t=n.era,r=n.validatorId;return e.tx.staking.payoutStakers(r,t)}))}function at(e,n){if(!Array.isArray(n)){var t=n.eras,r=n.validatorId;return 1===t.length?[e.tx.staking.payoutStakers(r,t[0].era)]:rt(e,t.map((function(e){return{era:e.era,validatorId:r}})))}return 1===n.length?at(e,n[0]):rt(e,n.reduce((function(e,n){var t=n.eras,r=n.validatorId;return t.forEach((function(n){var t=n.era;e.push({era:t,validatorId:r})})),e}),[]))}var st=(0,l.zo)(l.u_)(it||(it=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--AddressMini.padded.addressStatic {\n    display: inline-block;\n    padding-top: 0.5rem;\n\n    .ui--AddressMini-info {\n      min-width: 10rem;\n      max-width: 10rem;\n    }\n  }\n"],["\n  .ui--AddressMini.padded.addressStatic {\n    display: inline-block;\n    padding-top: 0.5rem;\n\n    .ui--AddressMini-info {\n      min-width: 10rem;\n      max-width: 10rem;\n    }\n  }\n"])));const ot=a.memo((function(e){var n=e.className,t=e.isAll,s=e.isDisabled,o=e.payout,i=(0,y.$)().t,u=(0,c.h)().api,d=(0,k.O)(),m=d[0],h=d[1],p=(0,a.useState)(null),f=p[0],v=p[1],x=(0,a.useState)(null),g=x[0],b=x[1],j=(0,a.useMemo)((function(){var e;return{max:2304/((null===(e=u.consts.staking.maxNominatorRewardedPerValidator)||void 0===e?void 0:e.toNumber())||64)}}),[u]),w=(0,Cn.b)(g,j);(0,a.useEffect)((function(){o&&b((function(){return at(u,o)}))}),[u,o]);var N=!o||Array.isArray(o)&&0===o.length;return(0,r.jsxs)(r.Fragment,{children:[o&&m&&(0,r.jsxs)(st,tt({className:n,header:i("Payout all stakers"),onClose:h,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsx)(l.u_.Columns,tt({hint:i("Any account can request payout for stakers, this is not limited to accounts that will be rewarded.")},{children:(0,r.jsx)(l.rp,{label:i("request payout from"),onChange:v,type:"account",value:f})})),(0,r.jsx)(l.u_.Columns,tt({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:i("All the listed validators and all their nominators will receive their rewards.")}),(0,r.jsx)("p",{children:i("The UI puts a limit of 40 payouts at a time, where each payout is a single validator for a single era.")})]})},{children:Array.isArray(o)?(0,r.jsx)(l.qG,{label:i("payout stakers for (multiple)"),value:o.map((function(e){var n=e.validatorId;return(0,r.jsx)(l.ax,{className:"addressStatic",value:n},n)}))}):(0,r.jsx)(l.rp,{defaultValue:o.validatorId,isDisabled:!0,label:i("payout stakers for (single)")})}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:f,extrinsic:w,icon:"credit-card",isDisabled:!w||!w.length||!f,label:i("Payout"),onStart:h})})]})),(0,r.jsx)(l.zx,{icon:"credit-card",isDisabled:s||N,label:t||Array.isArray(o)?i("Payout all"):i("Payout"),onClick:h})]})}));var it;const lt=(0,C.e)("useEraBlocks",(function(e,n){var t=(0,c.h)().api,r=(0,m.W7)(t.derive.session.progress),s=(0,m.W7)(t.query.staking.forceEra);return(0,a.useMemo)((function(){return e&&n&&s&&r&&r.sessionLength.gt(j.If)?(s.isForceAlways?r.sessionLength:r.eraLength).mul(e.sub(r.activeEra).iadd(n).iadd(j.If)).isub(s.isForceAlways?r.sessionProgress:r.eraProgress):void 0}),[n,s,e,r])}));function ct(e){return!Array.isArray(e)}function ut(e){if(!e.length)return"";var n=e.sort((function(e,n){return e.cmp(n)})).reduce((function(e,n){if(0===e.length)return[n];var t=e[e.length-1];return ct(t)?t.add(j.If).eq(n)?e[e.length-1]=[t,n]:e.push(n):t[1].add(j.If).eq(n)?t[1]=n:e.push(n),e}),[]).map((function(e){return ct(e)?(0,O.u)(e):"".concat((0,O.u)(e[0]),"-").concat((0,O.u)(e[1]))}));return(0,r.jsx)(r.Fragment,{children:n.map((function(e,n){return(0,r.jsxs)(a.Fragment,{children:[0!==n&&", ",(0,r.jsx)("span",{children:e})]},e)}))})}var dt=function(){return dt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},dt.apply(this,arguments)};const mt=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.historyDepth,o=e.payout,i=o.available,c=o.rewards,u=o.stashId,d=(0,a.useState)({eraStr:""}),m=d[0],h=m.eraStr,p=m.oldestEra,f=d[1],v=lt(s,p);return(0,a.useEffect)((function(){var e;c&&f({eraStr:ut(c.map((function(e){return e.era}))),oldestEra:null===(e=c[0])||void 0===e?void 0:e.era})}),[c]),(0,r.jsxs)("tr",dt({className:t},{children:[(0,r.jsx)("td",dt({className:"address",colSpan:2},{children:(0,r.jsx)(l.N,{value:u})})),(0,r.jsx)("td",dt({className:"start"},{children:(0,r.jsx)("span",dt({className:"payout-eras"},{children:h}))})),(0,r.jsx)(l.iA.Column.Balance,{value:i}),(0,r.jsx)("td",dt({className:"number"},{children:(0,r.jsx)(Ae.Z,{className:v?"":"--tmp",value:v||j.uy})})),(0,r.jsx)("td",{className:"button",colSpan:3})]}))}));var ht=function(){return ht=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ht.apply(this,arguments)};const pt=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.historyDepth,o=e.isDisabled,i=e.payout,c=(0,y.$)().t,u=(0,a.useMemo)((function(){return function(e){var n,t=ut(e.eras.map((function(e){return e.era}))),r=e.eras.reduce((function(e,n){var t=n.stashes;return Object.entries(t).forEach((function(n){var t=n[0],r=n[1];e[t]?e[t]=e[t].add(r):e[t]=r})),e}),{});return{eraStr:t,nominators:r,numNominators:Object.keys(r).length,oldestEra:null===(n=e.eras[0])||void 0===n?void 0:n.era}}(i)}),[i]),d=u.eraStr,m=u.nominators,h=u.numNominators,p=u.oldestEra,f=lt(s,p);return(0,r.jsxs)("tr",ht({className:t},{children:[(0,r.jsx)("td",ht({className:"address",colSpan:2},{children:(0,r.jsx)(l.N,{value:i.validatorId})})),(0,r.jsx)("td",ht({className:"start"},{children:(0,r.jsx)("span",ht({className:"payout-eras"},{children:d}))})),(0,r.jsx)(l.iA.Column.Balance,{value:i.available}),(0,r.jsx)("td",ht({className:"number"},{children:f&&(0,r.jsx)(Ae.Z,{value:f})})),(0,r.jsx)("td",ht({className:"expand",colSpan:2},{children:(0,r.jsx)(l.xH,ht({summary:c("{{count}} own stashes",{replace:{count:h}})},{children:Object.entries(m).map((function(e){var n=e[0],t=e[1];return(0,r.jsx)(l.ax,{balance:t,value:n,withBalance:!0},n)}))}))})),(0,r.jsx)("td",ht({className:"button"},{children:(0,r.jsx)(ot,{isDisabled:o,payout:i})}))]}))}));var ft=function(){return ft=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ft.apply(this,arguments)},vt=new(b())(864e5);var xt=l.zo.div(bt||(bt=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .payout-eras {\n    padding-left: 0.25rem;\n    vertical-align: middle;\n\n    span {\n      white-space: nowrap;\n    }\n  }\n"],["\n  .payout-eras {\n    padding-left: 0.25rem;\n    vertical-align: middle;\n\n    span {\n      white-space: nowrap;\n    }\n  }\n"])));const gt=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.historyDepth,o=e.isInElection,i=e.ownPools,u=e.ownValidators,d=(0,y.$)().t,h=(0,c.h)().api,p=(0,a.useState)((function(){return 0!==u.length}))[0],f=(0,a.useState)((function(){return p?0:1})),v=f[0],x=f[1],g=(0,a.useState)(0),N=g[0],k=g[1],O=(0,m.W7)(h.derive.session.eraLength),C=(0,et.n)(),S=(0,a.useMemo)((function(){return i&&i.map((function(e){return e.stashId}))}),[i]),I=(0,a.useMemo)((function(){return function(e,n,t,r){if(!n||!t)return[{text:"",value:0}];for(var a=vt.div(e),s=n.mul(t),o=[],i=new(b())(2);;){var l=a.mul(i);if(l.gte(s))break;o.push({text:r("{{days}} days",{replace:{days:i.toString()}}),value:l.div(n).toNumber()}),i.imul(j.Jo)}return o.push({text:r("Max, {{eras}} eras",{replace:{eras:t.toNumber()}}),value:t.toNumber()}),o}(C,O,s,d)}),[C,O,s,d]),P=(0,nt.Q)(I[N].value,v?void 0:u,S),A=P.allRewards,M=P.isLoadingRewards,T=(0,a.useMemo)((function(){return function(e){if(e){var n=function(e){return Object.entries(e).map((function(e){var n=e[0],t=e[1];return{available:t.reduce((function(e,n){var t=n.validators;return Object.values(t).reduce((function(e,n){var t=n.value;return e.iadd(t)}),e)}),new(b())(0)),rewards:t,stashId:n}})).filter((function(e){return!e.available.isZero()})).sort((function(e,n){return n.available.cmp(e.available)}))}(e),t=function(e){return Object.entries(e).reduce((function(e,n){var t=n[0];return n[1].forEach((function(n){Object.entries(n.validators).forEach((function(r){var a,s,o=r[0],i=r[1],l=i.total,c=i.value,u=e.find((function(e){return e.validatorId===o}));if(u){var d=u.eras.find((function(e){return e.era.eq(n.era)}));d?d.stashes[t]=c:u.eras.push({era:n.era,stashes:(a={},a[t]=c,a)}),u.available=u.available.add(c),u.total=u.total.add(l)}else e.push({available:c,eras:[{era:n.era,stashes:(s={},s[t]=c,s)}],total:l,validatorId:o})}))})),e}),[]).sort((function(e,n){return n.available.cmp(e.available)}))}(e),r=n.length?n.reduce((function(e,n){var t=n.available;return e.iadd(t)}),new(b())(0)):null,a=t.length?t.reduce((function(e,n){var t=e[0],r=e[1],a=n.available,s=n.total;return[t.iadd(a),r.iadd(s)]}),[new(b())(0),new(b())(0)]):[null,null];return{stashAvail:r,stashes:n,valAvail:a[0],valTotal:a[1],validators:t}}return{}}(A)}),[A]),E=T.stashAvail,D=T.stashes,q=T.valAvail,F=T.validators,V=(0,a.useMemo)((function(){return[[d(v?"payout/stash":"overall/validator"),"start",2],[d("eras"),"start"],[d(v?"own":"total")],["remaining"],[void 0,void 0,3]]}),[v,d]),R=(0,a.useRef)([[d("payout/validator"),"start",2],[d("eras"),"start"],[d("own")],["remaining"],[void 0,void 0,3]]),_=(0,a.useMemo)((function(){return[{isDisabled:!p,text:d("Own validators"),value:"val"},{text:d("Own stashes"),value:"all"}]}),[p,d]),B=(0,a.useMemo)((function(){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:3}),(0,r.jsx)(l.iA.Column.Balance,{value:E}),(0,r.jsx)("td",{colSpan:4})]})}),[E]),Z=(0,a.useMemo)((function(){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{colSpan:3}),(0,r.jsx)(l.iA.Column.Balance,{value:q}),(0,r.jsx)("td",{colSpan:4})]})}),[q]);return(0,r.jsxs)(xt,ft({className:t},{children:[(0,r.jsxs)(l.zx.Group,{children:[(0,r.jsx)(l.tX,{onChange:x,options:_,value:v}),(0,r.jsx)(l.tX,{onChange:k,options:I,value:N}),(0,r.jsx)(ot,{isAll:!0,isDisabled:o,payout:F})]}),(0,r.jsx)(w,{isInElection:o}),!M&&!(null==D?void 0:D.length)&&(0,r.jsxs)(l.Pd,ft({className:"warning centered",withIcon:!1},{children:[(0,r.jsx)("p",{children:d("Payouts of rewards for a validator can be initiated by any account. This means that as soon as a validator or nominator requests a payout for an era, all the nominators for that validator will be rewarded. Each user does not need to claim individually and the suggestion is that validators should claim rewards for everybody as soon as an era ends.")}),(0,r.jsx)("p",{children:d("If you have not claimed rewards straight after the end of the era, the validator is in the active set and you are seeing no rewards, this would mean that the reward payout transaction was made by another account on your behalf. Always check your favorite explorer to see any historic payouts made to your accounts.")})]})),(0,r.jsx)(l.iA,ft({empty:!M&&D&&d(v?"No pending payouts for your stashes":"No pending payouts for your validators"),emptySpinner:d("Retrieving info for the selected eras, this will take some time"),footer:B,header:V,isFixed:!0},{children:!M&&(null==D?void 0:D.map((function(e){return(0,r.jsx)(mt,{historyDepth:s,payout:e},e.stashId)})))})),1===v&&!M&&F&&0!==F.length&&(0,r.jsx)(l.iA,ft({footer:Z,header:R.current,isFixed:!0},{children:!M&&F.filter((function(e){return!e.available.isZero()})).map((function(e){return(0,r.jsx)(pt,{historyDepth:s,isDisabled:o,payout:e},e.validatorId)}))}))]}))}));var bt,jt=function(){return jt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},jt.apply(this,arguments)},yt=l.zo.div(Nt||(Nt=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  &.isLoading {\n    position: relative;\n\n    canvas, h1 {\n      opacity: 0.25;\n    }\n\n    .ui--Spinner {\n      position: absolute;\n      top: 34%;\n      left: 0;\n      right: 0;\n    }\n  }\n"],["\n  &.isLoading {\n    position: relative;\n\n    canvas, h1 {\n      opacity: 0.25;\n    }\n\n    .ui--Spinner {\n      position: absolute;\n      top: 34%;\n      left: 0;\n      right: 0;\n    }\n  }\n"])));const wt=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.colors,o=e.labels,i=e.legends,c=e.title,u=e.values,d=(0,a.useMemo)((function(){return!(o&&0!==o.length&&u&&0!==u.length&&u[0]&&u[0].length)}),[o,u]);return(0,r.jsxs)(yt,jt({className:"".concat(t," staking--Chart ").concat(d?"isLoading":"")},{children:[(0,r.jsx)(l.kL.Line,{colors:s,labels:o,legends:i,title:c,values:u}),d&&(0,r.jsx)(l.$j,{})]}))}));var Nt,kt=[void 0,"#acacac"];const Ot=a.memo((function(e){var n=e.labels,t=e.validatorId,s=(0,y.$)().t,o=(0,c.h)().api,i=(0,a.useMemo)((function(){return[t,!1]}),[t]),l=(0,m.W7)(o.derive.staking.stakerPoints,i),u=(0,a.useState)([]),d=u[0],h=u[1];(0,a.useEffect)((function(){return h([])}),[t]),(0,a.useEffect)((function(){return l&&h(function(e,n){var t=new Array(e.length),r=new Array(e.length),a=n.reduce((function(e,n){var t=e[0],r=e[1],a=n.points;return a.gtn(0)&&(t+=a.toNumber(),r++),[t,r]}),[0,0]),s=a[0],o=a[1];return n.forEach((function(n){var a=n.era,i=n.points,l=o>0?Math.ceil(100*s/o)/100:0,c=e.indexOf(a.toHuman());-1!==c&&(t[c]=l,r[c]=i.toNumber())})),[r,t]}(n,l))}),[n,l]);var p=(0,a.useRef)([s("points"),s("average")]);return(0,r.jsx)(wt,{colors:kt,labels:n,legends:p.current,title:s("era points"),values:d})}));var Ct=new(b())(1e4),St=[void 0,"#acacac"];const It=a.memo((function(e){var n=e.labels,t=e.validatorId,s=(0,y.$)().t,o=(0,c.h)().api,i=(0,a.useMemo)((function(){return[t,!1]}),[t]),l=(0,m.W7)(o.derive.staking.stakerPrefs,i),u=(0,a.useState)([]),d=u[0],h=u[1];(0,a.useEffect)((function(){return h([])}),[t]),(0,a.useEffect)((function(){return l&&h(function(e,n){var t=new Array(e.length),r=new Array(e.length),a=n.reduce((function(e,n){var t=e[0],r=e[1],a=n.validatorPrefs.commission.unwrap().mul(Ct).div(j.ed).toNumber()/100;return 0!==a&&(t+=a,r++),[t,r]}),[0,0]),s=a[0],o=a[1];return n.forEach((function(n){var a=n.era,i=n.validatorPrefs.commission.unwrap().mul(Ct).div(j.ed).toNumber()/100,l=o>0?Math.ceil(100*s/o)/100:0,c=e.indexOf(a.toHuman());-1!==c&&(t[c]=l,r[c]=i)})),[r,t]}(n,l))}),[n,l]);var p=(0,a.useRef)([s("commission"),s("average")]);return(0,r.jsx)(wt,{colors:St,labels:n,legends:p.current,title:s("commission"),values:d})}));var Pt=t(6485);function At(e,n){return void 0===e&&(e=j.nw),((0,Pt.H)(e)?e:(0,v.m)(e.toBn)?e.toBn():j.nw).mul(j.D_).div(n).toNumber()/1e3}var Mt=["#8c2200","#008c22","#acacac"];const Tt=a.memo((function(e){var n=e.labels,t=e.validatorId,s=(0,y.$)().t,o=(0,c.h)().api,i=(0,a.useMemo)((function(){return[t,!1]}),[t]),l=(0,m.W7)(o.derive.staking.ownSlashes,i),u=(0,m.W7)(o.derive.staking.erasRewards),d=(0,m.W7)(o.derive.staking.stakerPoints,i),h=(0,a.useState)([]),p=h[0],f=h[1],v=(0,a.useMemo)((function(){return{currency:A.a.getDefaults().unit,divisor:new(b())("1".padEnd(A.a.getDefaults().decimals+1,"0"))}}),[]),x=v.currency,g=v.divisor;(0,a.useEffect)((function(){return f([])}),[t]),(0,a.useEffect)((function(){return u&&l&&d&&f(function(e,n,t,r,a){var s=new Array(e.length),o=new Array(e.length),i=new Array(e.length),l=n.reduce((function(e,n){var t=e[0],s=e[1],o=n.era,i=n.eraReward,l=r.find((function(e){return e.era.eq(o)})),c=(null==l?void 0:l.eraPoints.gtn(0))?At(l.points.mul(i).div(l.eraPoints),a):0;return c>0&&(t+=c,s++),[t,s]}),[0,0]),c=l[0],u=l[1];return n.forEach((function(n){var l=n.era,d=n.eraReward,m=r.find((function(e){return e.era.eq(l)})),h=t.find((function(e){return e.era.eq(l)})),p=(null==m?void 0:m.eraPoints.gtn(0))?At(m.points.mul(d).div(m.eraPoints),a):0,f=h?At(h.total,a):0,v=u>0?Math.ceil(100*c/u)/100:0,x=e.indexOf(l.toHuman());-1!==x&&(o[x]=p,i[x]=v,s[x]=f)})),[s,o,i]}(n,u,l,d,g))}),[n,g,u,l,d]);var j=(0,a.useMemo)((function(){return[s("{{currency}} slashed",{replace:{currency:x}}),s("{{currency}} rewards",{replace:{currency:x}}),s("{{currency}} average",{replace:{currency:x}})]}),[x,s]);return(0,r.jsx)(wt,{colors:Mt,labels:n,legends:j,title:s("rewards & slashes"),values:p})}));var Et=[void 0,"#8c2200","#acacac"];const Dt=a.memo((function(e){var n=e.labels,t=e.validatorId,s=(0,y.$)().t,o=(0,c.h)().api,i=(0,a.useMemo)((function(){return[t,!1]}),[t]),l=(0,m.W7)(o.derive.staking.ownExposures,i),u=(0,a.useState)([]),d=u[0],h=u[1],p=(0,a.useMemo)((function(){return{currency:A.a.getDefaults().unit,divisor:new(b())("1".padEnd(A.a.getDefaults().decimals+1,"0"))}}),[]),f=p.currency,v=p.divisor;(0,a.useEffect)((function(){return h([])}),[t]),(0,a.useEffect)((function(){return l&&h(function(e,n,t){var r=new Array(e.length),a=new Array(e.length),s=new Array(e.length),o=n.reduce((function(e,n){var r,a=e[0],s=e[1],o=At(null===(r=n.clipped.total)||void 0===r?void 0:r.unwrap(),t);return o>0&&(a+=o,s++),[a,s]}),[0,0]),i=o[0],l=o[1];return n.forEach((function(n){var o,c,u=n.clipped,d=n.era,m=n.exposure,h=At(null===(o=u.total)||void 0===o?void 0:o.unwrap(),t),p=At(null===(c=m.total)||void 0===c?void 0:c.unwrap(),t),f=l>0?Math.ceil(100*i/l)/100:0,v=e.indexOf(d.toHuman());-1!==v&&(s[v]=f,r[v]=h,a[v]=p)})),[r,a,s]}(n,l,v))}),[n,v,l]);var x=(0,a.useMemo)((function(){return[s("{{currency}} clipped",{replace:{currency:f}}),s("{{currency}} total",{replace:{currency:f}}),s("{{currency}} average",{replace:{currency:f}})]}),[f,s]);return(0,r.jsx)(wt,{colors:Et,labels:n,legends:x,title:s("elected stake"),values:d})}));var qt=function(){return qt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},qt.apply(this,arguments)},Ft=(0,l.zo)(l.P0)(Rt||(Rt=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .staking--Chart {\n    background: var(--bg-table);\n    border: 1px solid var(--border-table);\n    border-radius: 0.25rem;\n    padding: 1rem 1.5rem;\n  }\n"],["\n  .staking--Chart {\n    background: var(--bg-table);\n    border: 1px solid var(--border-table);\n    border-radius: 0.25rem;\n    padding: 1rem 1.5rem;\n  }\n"])));const Vt=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.labels,s=e.validatorId;return(0,r.jsxs)(Ft,qt({className:t},{children:[(0,r.jsxs)(l.P0.Column,{children:[(0,r.jsx)(Ot,{labels:a,validatorId:s}),(0,r.jsx)(Tt,{labels:a,validatorId:s})]}),(0,r.jsxs)(l.P0.Column,{children:[(0,r.jsx)(Dt,{labels:a,validatorId:s}),(0,r.jsx)(It,{labels:a,validatorId:s})]})]}))}));var Rt,_t=function(){return _t=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},_t.apply(this,arguments)};const Bt=a.memo((function(e){var n=e.className,t=(0,y.$)().t,o=(0,c.h)().api,i=(0,s.UO)().value,u=(0,a.useState)(i||null),d=u[0],h=u[1],p=(0,m.W7)(o.derive.staking.erasHistoric),f=(0,a.useMemo)((function(){return p&&p.map((function(e){return e.toHuman()}))}),[p]),v=(0,a.useCallback)((function(){return function(e){e&&(window.location.hash="/staking/query/".concat(e))}(d)}),[d]);return f?(0,r.jsxs)("div",_t({className:n},{children:[(0,r.jsx)(l.bm,_t({className:"staking--queryInput",defaultValue:i,label:t("validator to query"),onChange:h,onEnter:v},{children:(0,r.jsx)(l.zx,{icon:"play",isDisabled:!d,onClick:v})})),i&&(0,r.jsx)(Vt,{labels:f,validatorId:i})]})):(0,r.jsx)(l.$j,{})}));var Zt=t(30943),Lt=t(70563),Ht=t(81190),zt=function(){return zt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},zt.apply(this,arguments)};const Wt=a.memo((function(e){var n=e.index,t=e.isSelected,s=e.onSelect,o=e.slash,i=o.era,u=o.isMine,d=o.slash,m=d.others,h=d.own,p=d.payout,f=d.reporters,v=d.validator,g=o.total,b=o.totalOther,j=(0,y.$)().t,w=(0,c.h)().api,N=(0,a.useCallback)((function(){return s&&s(n)}),[n,s]),k=(0,a.useCallback)((function(){return m.map((function(e,n){var t=e[0],a=e[1];return(0,r.jsx)(l.ax,{balance:a,value:t,withBalance:!0},n)}))}),[m]);return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",zt({className:"badge"},{children:u&&(0,r.jsx)(l.Ct,{color:"red",icon:"skull-crossbones"})})),(0,r.jsx)("td",zt({className:"address"},{children:(0,r.jsx)(l.N,{value:v})})),(0,r.jsx)("td",zt({className:"expand all"},{children:!!m.length&&(0,r.jsx)(l.n0,{renderChildren:k,summary:j("Nominators ({{count}})",{replace:{count:(0,O.u)(m.length)}})})})),(0,r.jsx)("td",zt({className:"address"},{children:f.map((function(e,n){return(0,r.jsx)(l.ax,{value:e},n)}))})),(0,r.jsx)("td",zt({className:"number together"},{children:(0,r.jsx)(x.Z,{value:h})})),(0,r.jsx)("td",zt({className:"number together"},{children:(0,r.jsx)(x.Z,{value:b})})),(0,r.jsx)("td",zt({className:"number together"},{children:(0,r.jsx)(x.Z,{value:g})})),(0,r.jsx)("td",zt({className:"number together"},{children:(0,r.jsx)(x.Z,{value:p})})),!w.query.staking.earliestUnappliedSlash&&!!w.consts.staking.slashDeferDuration&&(0,r.jsx)("td",zt({className:"number together"},{children:(0,O.u)(i)})),(0,r.jsx)("td",{children:(0,r.jsx)(l.XZ,{isDisabled:!s,onChange:N,value:t})})]})}));var $t=function(){return $t=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},$t.apply(this,arguments)};const Ut=a.memo((function(e){var n,t=e.slash,s=t.era,o=t.nominators,i=t.reporters,u=t.total,d=t.validators,h=(0,y.$)().t,p=(0,c.h)().api,f=(0,m.W7)(null===(n=p.derive.session)||void 0===n?void 0:n.progress),v=(0,a.useMemo)((function(){return f?[f.activeEra.sub(s).isub(j.If).imul(f.eraLength).iadd(f.eraProgress),p.consts.staking.slashDeferDuration.mul(f.eraLength)]:[new(b())(0),new(b())(0)]}),[p,s,f]),g=v[0],w=v[1];return(0,r.jsxs)(l.Ty,{children:[(0,r.jsxs)("section",{children:[(0,r.jsx)(l.Jy,$t({label:h("validators")},{children:(0,O.u)(d.length)})),(0,r.jsx)(l.Jy,$t({label:h("nominators")},{children:(0,O.u)(o.length)})),(0,r.jsx)(l.Jy,$t({label:h("reporters")},{children:(0,O.u)(i.length)}))]}),g.gtn(0)&&(0,r.jsx)(l.Jy,{label:h("defer"),progress:{total:w,value:g,withTime:!0}}),(0,r.jsx)(l.Jy,$t({label:h("total")},{children:(0,r.jsx)(x.Z,{value:u})}))]})}));var Jt=function(){return Jt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Jt.apply(this,arguments)};const Gt=a.memo((function(e){var n=e.buttons,t=e.councilId,s=e.councilThreshold,o=e.slash,i=(0,y.$)().t,u=(0,c.h)().api,d=(0,Ht.m)("council"),m=(0,a.useState)((function(){var e=u.tx.staking.cancelDeferredSlash(o.era,o.slashes.map((function(e,n){return n})));return{selected:[],txAll:d?{length:e.encodedLength,proposal:e}:null,txSome:null}})),h=m[0],p=h.selected,f=h.txAll,x=h.txSome,g=m[1],b=(0,a.useRef)([[i("era {{era}}/unapplied",{replace:{era:u.query.staking.earliestUnappliedSlash||!u.consts.staking.slashDeferDuration?o.era.toString():o.era.sub(u.consts.staking.slashDeferDuration).sub(j.If).toString()}}),"start",3],[i("reporters"),"address"],[i("own")],[i("other")],[i("total")],[i("payout")],!u.query.staking.earliestUnappliedSlash&&!!u.consts.staking.slashDeferDuration&&[i("apply")],[]]),w=(0,a.useCallback)((function(e){return g((function(n){var t=n.selected.includes(e)?n.selected.filter((function(n){return n!==e})):n.selected.concat(e).sort((function(e,n){return e-n})),r=t.length?u.tx.staking.cancelDeferredSlash(o.era,t):null;return{selected:t,txAll:n.txAll,txSome:r&&d&&(0,v.m)(u.tx[d].propose)?{length:r.encodedLength,proposal:r}:null}}))}),[u,d,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ut,{slash:o}),(0,r.jsxs)(l.zx.Group,{children:[n,d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.cA,{accountId:t,isDisabled:!x,isToplevel:!0,label:i("Cancel selected"),params:x&&(3===u.tx[d].propose.meta.args.length?[s,x.proposal,x.length]:[s,x.proposal]),tx:u.tx[d].propose}),(0,r.jsx)(l.cA,{accountId:t,isDisabled:!f,isToplevel:!0,label:i("Cancel all"),params:f&&(3===u.tx[d].propose.meta.args.length?[s,f.proposal,f.length]:[s,f.proposal]),tx:u.tx[d].propose})]})]}),(0,r.jsx)(l.iA,Jt({header:b.current},{children:o.slashes.map((function(e,n){return(0,r.jsx)(Wt,{index:n,isSelected:p.includes(n),onSelect:t?w:void 0,slash:e},n)}))}))]})})),Qt=a.memo((function(e){var n=e.ownStashes,t=void 0===n?[]:n,s=e.slashes,o=(0,y.$)().t,i=(0,c.h)().api,d=(0,u.x)().allAccounts,m=(0,Lt.V)("council").members,h=(0,a.useState)(0),p=h[0],f=h[1],v=(0,a.useMemo)((function(){return function(e,n){var t=[];return e.reduce((function(e,t){var r=t[0];return t[1].reduce((function(e,t){var a=t.others.reduce((function(e,n){var t=n[1];return e.add(t)}),new(b())(0)),s=n.some((function(e){var n=e.stashId;return t.validator.eq(n)||t.others.some((function(e){return e[0].eq(n)}))}));return e.push({era:r,isMine:s,slash:t,total:t.own.add(a),totalOther:a}),e}),e)}),[]).forEach((function(e){var n=t.find((function(n){return n.era.eq(e.era)}));n||(n={era:e.era,nominators:[],payout:new(b())(0),reporters:[],slashes:[],total:new(b())(0),validators:[]},t.push(n)),n.payout.iadd(e.slash.payout),n.total.iadd(e.total),n.slashes.push(e);var r=e.slash.validator.toString();n.validators.includes(r)||n.validators.push(r),e.slash.others.forEach((function(e){var t=e[0].toString();n&&!n.nominators.includes(t)&&n.nominators.push(t)})),e.slash.reporters.forEach((function(e){var t=e.toString();n&&!n.reporters.includes(t)&&n.reporters.push(t)}))})),t.sort((function(e,n){return n.era.cmp(e.era)}))}(s,t)}),[t,s]),x=(0,a.useMemo)((function(){return v.map((function(e){var n=e.era;return i.query.staking.earliestUnappliedSlash||!i.consts.staking.slashDeferDuration?n:n.sub(i.consts.staking.slashDeferDuration).sub(j.If)})).map((function(e){return{text:o("era {{era}}",{replace:{era:(0,O.u)(e)}}),value:e.toString()}}))}),[i,v,o]),g=(0,a.useMemo)((function(){return d.find((function(e){return m.includes(e)}))||null}),[d,m]),w=(0,a.useRef)([[o("unapplied"),"start"]]);if(!v.length)return(0,r.jsx)(l.iA,{empty:o("There are no unapplied/pending slashes"),header:w.current});var N=Math.ceil((m.length||0)*(0,Zt.FK)(i));return(0,r.jsx)(Gt,{buttons:(0,r.jsx)(l.tX,{onChange:f,options:x,value:p}),councilId:g,councilThreshold:N,slash:v[p]},v[p].era.toString())}));var Xt=t(49255),Kt=t(69250),Yt=t(85168),er=t(54371),nr=function(){return nr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},nr.apply(this,arguments)};const tr=a.memo((function(e){var n=e.children,t=e.className,s=e.nameFilter,o=e.setNameFilter,i=e.setWithIdentity,u=e.withIdentity,d=(0,y.$)().t,m=(0,c.h)().api;(0,a.useEffect)((function(){var e=Yt.Z.parse(location.href.split("?")[1]).filter;(0,er.H)(e)&&o(e,!0)}),[]);var h=(0,a.useCallback)((function(e){return o(e,!1)}),[o]);return(0,r.jsxs)("div",nr({className:t},{children:[(0,r.jsx)(l.II,{autoFocus:!0,isFull:!0,label:d("filter by name, address or index"),onChange:h,value:s}),(n||i)&&(0,r.jsxs)("div",nr({className:"staking--optionsBar"},{children:[n,i&&m.query.identity&&(0,r.jsx)(l.ZD,{className:"staking--buttonToggle",label:d("with an identity"),onChange:i,value:u})]}))]}))}));var rr=t(27960),ar={transform:function(e){for(var n=e[0][0],t=e[1],r={},a=0;a<n.length;a++)r[n[a]]=t[a];return r},withParamsTransform:!0};const sr=(0,C.e)("useIdentities",(function(e){void 0===e&&(e=[]);var n=(0,c.h)().api;return(0,m.W7)(n.derive.accounts.hasIdentityMulti,[e],ar)}));var or=function(){return or=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},or.apply(this,arguments)},ir=(0,l.zo)(l.u_)(cr||(cr=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--AddressMini.padded.addressStatic {\n    padding-top: 0.5rem;\n\n    .ui--AddressMini-info {\n      min-width: 10rem;\n      max-width: 10rem;\n    }\n  }\n"],["\n  .ui--AddressMini.padded.addressStatic {\n    padding-top: 0.5rem;\n\n    .ui--AddressMini-info {\n      min-width: 10rem;\n      max-width: 10rem;\n    }\n  }\n"])));const lr=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.isDisabled,o=e.ownNominators,i=e.targets,u=(0,y.$)().t,d=(0,c.h)().api,m=(0,a.useState)(null),h=m[0],p=m[1],f=(0,k.O)(),v=f[0],x=f[1],g=(0,a.useMemo)((function(){return(o||[]).map((function(e){return e.stashId}))}),[o]),b=(0,a.useCallback)((function(e){var n=o&&o.find((function(n){return n.stashId===e}));p(n?{controllerId:n.controllerId,stashId:n.stashId}:null)}),[o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.zx,{icon:"hand-paper",isDisabled:s||!g.length||!i.length,label:u("Nominate selected"),onClick:x}),v&&(0,r.jsxs)(ir,or({className:t,header:u("Nominate validators"),onClose:x,size:"large"},{children:[(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsxs)(l.u_.Columns,or({hint:u("One of your available nomination accounts, keyed by the stash. The transaction will be sent from the controller.")},{children:[(0,r.jsx)(l.rp,{filter:g,label:u("the stash account to nominate with"),onChange:b,value:null==h?void 0:h.stashId}),(0,r.jsx)(l.rp,{isDisabled:!0,label:u("the associated controller"),value:null==h?void 0:h.controllerId})]})),(0,r.jsx)(l.u_.Columns,or({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:u('The selected validators to nominate, either via the "currently best algorithm" or via a manual selection.')}),(0,r.jsx)("p",{children:u("Once transmitted the new selection will only take effect in 2 eras since the selection criteria for the next era was done at the end of the previous era. Until then, the nominations will show as inactive.")})]})},{children:(0,r.jsx)(l.qG,{label:u("selected validators"),value:i.map((function(e){return(0,r.jsx)(l.ax,{className:"addressStatic",value:e},e)}))})}))]}),(0,r.jsx)(l.u_.Actions,{children:(0,r.jsx)(l.cA,{accountId:null==h?void 0:h.controllerId,label:u("Nominate"),onStart:x,params:[i],tx:d.tx.staking.nominate})})]}))]})}));var cr,ur=function(){return ur=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ur.apply(this,arguments)},dr={transform:function(e){return e.unwrapOrDefault()}};function mr(e,n){return{hideValue:!0,isBlurred:!(e&&n),total:e&&n?n:j.Jo,value:e&&n?e:j.um}}var hr=(0,l.zo)(l.Ty)(fr||(fr=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .percent {\n    font-size: var(--font-percent-tiny);\n  }\n"],["\n  .percent {\n    font-size: var(--font-percent-tiny);\n  }\n"])));const pr=a.memo((function(e){var n=e.avgStaked,t=e.className,s=e.lastEra,o=e.lowStaked,i=e.minNominated,u=e.minNominatorBond,d=e.stakedReturn,h=e.totalIssuance,p=e.totalStaked,f=(0,y.$)().t,v=(0,c.h)().api,g=(0,m.W7)(s&&v.query.staking.erasValidatorReward,[s],dr),b=(0,a.useMemo)((function(){return mr(p,h)}),[h,p]),w=(0,a.useMemo)((function(){return mr(o,n)}),[n,o]),N=(0,r.jsx)("span",ur({className:"percent"},{children:"%"}));return(0,r.jsxs)(hr,ur({className:t},{children:[(0,r.jsx)("section",ur({className:"media--800"},{children:(0,r.jsx)(l.Jy,ur({label:f("total staked"),progress:b},{children:(0,r.jsx)(x.Z,{className:b.isBlurred?"--tmp":"",value:b.value,withSi:!0})}))})),(0,r.jsx)("section",ur({className:"media--800"},{children:(0,r.jsx)(l.Jy,ur({label:f("returns")},{children:h&&d>0?Number.isFinite(d)?(0,r.jsxs)(r.Fragment,{children:[d.toFixed(1),N]}):"-.-%":(0,r.jsxs)("span",ur({className:"--tmp"},{children:["0.0",N]}))}))})),(0,r.jsx)("section",ur({className:"media--1000"},{children:(0,r.jsx)(l.Jy,ur({label:"".concat(f("lowest / avg staked")),progress:w},{children:(0,r.jsxs)("span",ur({className:w.isBlurred?"--tmp":""},{children:[(0,r.jsx)(x.Z,{value:w.value,withCurrency:!1,withSi:!0})," / ",(0,r.jsx)(x.Z,{className:w.isBlurred?"--tmp":"",value:w.total,withSi:!0})]}))}))})),(0,r.jsx)("section",ur({className:"media--1600"},{children:(null==i?void 0:i.gt(j.nw))&&(0,r.jsxs)(l.Jy,ur({className:"media--1600",label:f(u?"min nominated / threshold":"min nominated")},{children:[(0,r.jsx)(x.Z,{value:i,withCurrency:!u,withSi:!0}),u&&(0,r.jsxs)(r.Fragment,{children:[" / ",(0,r.jsx)(x.Z,{value:u,withSi:!0})]})]}))})),(0,r.jsx)("section",{children:(0,r.jsx)(l.Jy,ur({label:f("last reward")},{children:(0,r.jsx)(x.Z,{className:g?"":"--tmp",value:g||1,withSi:!0})}))})]}))}));var fr;const vr=(0,C.e)("useOwnNominators",(function(e){return(0,a.useMemo)((function(){return e&&e.filter((function(e){var n=e.isOwnController,t=e.isStashValidating;return n&&!t}))}),[e])}));var xr=t(11798),gr=t(60773),br=t(97794);const jr=a.memo((function(e){var n,t=e.numNominators,a=null===(n=(0,c.h)().api.consts.staking)||void 0===n?void 0:n.maxNominatorRewardedPerValidator;return t&&a&&!a.gten(t)?(0,r.jsx)(l.Ct,{className:"media--1200",color:"red",icon:"balance-scale-right"}):null}));var yr=function(){return yr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},yr.apply(this,arguments)};const wr=a.memo((function(e){var n=e.allSlashes,t=e.canSelect,s=e.filterName,o=e.info,i=o.accountId,u=o.bondOther,d=o.bondOwn,m=o.bondTotal,h=o.commissionPer,p=o.isBlocking,f=o.isElected,v=o.isFavorite,g=o.key,b=o.lastPayout,j=o.numNominators,w=o.rankOverall,N=o.stakedReturnCmp,k=e.isNominated,C=e.isSelected,S=e.nominatedBy,I=void 0===S?[]:S,P=e.toggleFavorite,A=e.toggleSelected,M=(0,y.$)().t,T=(0,c.h)().api,E=(0,gr.Y)(i),D=(0,br.h)(b)[2],q=(0,a.useMemo)((function(){return!E||(0,xr.r7)(T,g,E,s)}),[E,T,s,g]),F=(0,a.useMemo)((function(){return(n||[]).map((function(e){return{era:e[0],slashes:e[1].filter((function(e){return e.validator.eq(i)}))}})).filter((function(e){return e.slashes.length}))}),[n,i]),V=(0,a.useCallback)((function(){return e=g,void(window.location.hash="/staking/query/".concat(e));var e}),[g]),R=(0,a.useCallback)((function(){return A(g)}),[g,A]);return q?(0,r.jsxs)("tr",{children:[(0,r.jsx)(l.iA.Column.Favorite,{address:g,isFavorite:v,toggle:P}),(0,r.jsxs)("td",yr({className:"badge together"},{children:[k?(0,r.jsx)(l.Ct,{color:"green",icon:"hand-paper"}):(0,r.jsx)(l.Ct,{color:"transparent"}),f?(0,r.jsx)(l.Ct,{color:"blue",icon:"chevron-right"}):(0,r.jsx)(l.Ct,{color:"transparent"}),(0,r.jsx)(jr,{numNominators:j||I.length}),p&&(0,r.jsx)(l.Ct,{color:"red",icon:"user-slash"}),0!==F.length&&(0,r.jsx)(l.Ct,{color:"red",hover:M("Slashed in era {{eras}}",{replace:{eras:F.map((function(e){var n=e.era;return(0,O.u)(n)})).join(", ")}}),icon:"skull-crossbones"})]})),(0,r.jsx)("td",yr({className:"number"},{children:0!==w&&(0,O.u)(w)})),(0,r.jsx)("td",yr({className:"address all"},{children:(0,r.jsx)(l.N,{value:i})})),(0,r.jsx)("td",yr({className:"number media--1400"},{children:b&&(T.consts.babe?D.days?1===D.days?M("yesterday"):M("{{days}} days",{replace:{days:D.days}}):M("recently"):(0,O.u)(b))})),(0,r.jsx)("td",yr({className:"number media--1200 no-pad-right"},{children:j||""})),(0,r.jsx)("td",yr({className:"number media--1200 no-pad-left"},{children:I.length||""})),(0,r.jsxs)("td",yr({className:"number media--1100"},{children:[h.toFixed(2),"%"]})),(0,r.jsx)("td",yr({className:"number together"},{children:!m.isZero()&&(0,r.jsx)(x.Z,{value:m})})),(0,r.jsx)("td",yr({className:"number together media--900"},{children:!d.isZero()&&(0,r.jsx)(x.Z,{value:d})})),(0,r.jsx)("td",yr({className:"number together media--1600"},{children:!u.isZero()&&(0,r.jsx)(x.Z,{value:u})})),(0,r.jsx)("td",yr({className:"number together"},{children:N>0&&(0,r.jsxs)(r.Fragment,{children:[N.toFixed(2),"%"]})})),(0,r.jsx)("td",{children:!p&&(t||C)&&(0,r.jsx)(l.XZ,{onChange:R,value:C})}),(0,r.jsx)("td",{children:(0,r.jsx)(l.JO,{className:"staking--stats highlight--color",icon:"chart-line",onClick:V})})]}):null}));var Nr=function(){return Nr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Nr.apply(this,arguments)},kr=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},Or={rankBondOther:"media--1600",rankBondOwn:"media--900"},Cr=["rankBondTotal","rankBondOwn","rankBondOther","rankOverall"],Sr={withElected:!1,withGroup:!0,withIdentity:!1,withPayout:!1,withoutComm:!0,withoutOver:!0},Ir={isQueryFiltered:!1,nameFilter:""},Pr={sortBy:"rankOverall",sortFromMax:!0},Ar=l.zo.div(Tr||(Tr=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  text-align: center;\n\n  th.isClickable {\n    .ui--Icon {\n      margin-left: 0.5rem;\n    }\n  }\n\n  .ui--Table {\n    overflow-x: auto;\n  }\n"],["\n  text-align: center;\n\n  th.isClickable {\n    .ui--Icon {\n      margin-left: 0.5rem;\n    }\n  }\n\n  .ui--Table {\n    overflow-x: auto;\n  }\n"])));const Mr=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.isInElection,o=e.nominatedBy,i=e.ownStashes,u=e.targets,d=u.avgStaked,m=u.inflation.stakedReturn,h=u.lastEra,p=u.lowStaked,v=u.medianComm,x=u.minNominated,g=u.minNominatorBond,b=u.nominators,N=u.totalIssuance,k=u.totalStaked,O=u.validatorIds,C=u.validators,S=e.toggleFavorite,I=e.toggleLedger,P=e.toggleNominatedBy,A=(0,y.$)().t,M=(0,c.h)().api,T=(0,f.g)(),E=(0,Xt.u)(7),D=vr(i),q=sr(O),F=(0,a.useState)([]),V=F[0],R=F[1],_=(0,a.useState)(Ir),B=_[0],Z=B.isQueryFiltered,L=B.nameFilter,H=_[1],z=(0,Kt.o)("staking:targets",Sr),W=z[0],$=z[1],U=(0,a.useState)(Pr),J=U[0],G=J.sortBy,Q=J.sortFromMax,X=U[1],K=(0,a.useState)(),Y=K[0],ee=K[1],ne=(0,a.useRef)({rankBondOther:A("other stake"),rankBondOwn:A("own stake"),rankBondTotal:A("total stake"),rankOverall:A("return")}),te=(0,a.useMemo)((function(){var e;return Nr(Nr({},W),{daysPayout:E,isBabe:!!M.consts.babe,isQueryFiltered:Z,maxPaid:null===(e=M.consts.staking)||void 0===e?void 0:e.maxNominatorRewardedPerValidator})}),[M,E,Z,W]),re=(0,a.useMemo)((function(){return q&&C&&o&&function(e,n,t,r,a){var s=r.daysPayout,o=r.isBabe,i=r.maxPaid,l=r.withElected,c=r.withGroup,u=r.withIdentity,d=r.withPayout,m=r.withoutComm,h=r.withoutOver,p=[],f=[];return e.filter((function(e){var n,r=e.accountId,v=e.commissionPer,x=e.isElected,g=e.isFavorite,b=e.lastPayout,y=e.numNominators;if(g)return!0;var w=r.toString(),N=t[w],k=y||(null===(n=null==a?void 0:a[w])||void 0===n?void 0:n.length)||0;if((!l||x)&&(!u||(null==N?void 0:N.hasIdentity))&&(!d||!o||b&&s.gte(b))&&(!m||v<=10)&&(!h||!i||i.muln(100).div(j.S8).gten(k))){if(!c)return!0;if(!N||!N.hasIdentity)return f.push(w),!0;if(N.parentId){if(!f.includes(N.parentId))return f.push(N.parentId),!0}else if(!f.includes(w)){if(N.display){var O=N.display.replace(/[^\x20-\x7E]/g,"").replace(/-/g," ").replace(/_/g," ").split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e}));if(function(e,n){return e.some((function(e){return e.length===n.length&&(1===e.length?e[0]===n[0]:e.reduce((function(e,t,r){return e+(t===n[r]?1:0)}),0)>=n.length-1)}))}(p,O))return!1;p.push(O)}return f.push(w),!0}}return!1}))}(C,0,q,te,o)}),[q,te,v,o,C]);(0,a.useEffect)((function(){re&&ee(function(e,n,t){return t.slice(0).sort((function(t,r){return n?t[e]-r[e]:r[e]-t[e]})).sort((function(e,n){return e.isFavorite===n.isFavorite?0:e.isFavorite?-1:1}))}(G,Q,re))}),[re,G,Q]),(0,a.useEffect)((function(){I(),P()}),[I,P]);var ae=(0,a.useMemo)((function(){return M.consts.staking.maxNominations?M.consts.staking.maxNominations.toNumber():16}),[M]),se=(0,a.useMemo)((function(){return function(e){void 0===e&&(e=[]);var n=[];return e.forEach((function(e){var t=e.nominating;(void 0===t?[]:t).forEach((function(e){!n.includes(e)&&n.push(e)}))})),n}(D)}),[D]),oe=(0,a.useCallback)((function(e){return X((function(n){return{sortBy:e,sortFromMax:e!==n.sortBy||!n.sortFromMax}}))}),[]),ie=(0,a.useCallback)((function(e){return R(V.includes(e)?V.filter((function(n){return e!==n})):kr(kr([],V,!0),[e],!1))}),[V]),le=(0,a.useCallback)((function(){return re&&R(function(e,n){for(var t=[],r=0;r<e.length&&t.length<n;r++){var a=e[r],s=a.isBlocking,o=a.isFavorite,i=a.key,l=a.stakedReturnCmp;!s&&(o||l>0)&&t.push(i)}return t}(re,ae))}),[re,ae]),ce=(0,a.useCallback)((function(e,n){return H({isQueryFiltered:n,nameFilter:e})}),[]),ue=(0,a.useMemo)((function(){return kr(kr([[A("validators"),"start",4],[A("payout"),"media--1400"],[A("nominators"),"media--1200",2],[A("comm."),"media--1100"]],Cr.map((function(e){return[(0,r.jsxs)(r.Fragment,{children:[ne.current[e],(0,r.jsx)(l.JO,{icon:G===e?Q?"chevron-down":"chevron-up":"minus"})]}),"".concat(Y?"isClickable ".concat(G===e?"highlight--border":""," number"):"number"," ").concat(Or[e]||""),1,function(){return oe(e)}]})),!0),[[],[]],!1)}),[oe,ne,G,Y,Q,A]),de=(0,a.useMemo)((function(){return(0,r.jsx)("div",{children:(0,r.jsxs)(tr,Nr({nameFilter:L,setNameFilter:ce,setWithIdentity:$.withIdentity,withIdentity:W.withIdentity},{children:[(0,r.jsx)(l.ZD,{className:"staking--buttonToggle",label:A("one validator per operator"),onChange:$.withGroup,value:W.withGroup}),(0,r.jsx)(l.ZD,{className:"staking--buttonToggle",label:A("comm. <= {{maxComm}}%",{replace:{maxComm:10}}),onChange:$.withoutComm,value:W.withoutComm}),(0,r.jsx)(l.ZD,{className:"staking--buttonToggle",label:A("with capacity"),onChange:$.withoutOver,value:W.withoutOver}),M.consts.babe&&(0,r.jsx)(l.ZD,{className:"staking--buttonToggle",label:A("recent payouts"),onChange:$.withPayout,value:W.withPayout}),(0,r.jsx)(l.ZD,{className:"staking--buttonToggle",label:A("currently elected"),onChange:$.withElected,value:W.withElected})]}))})}),[M,L,ce,$,A,W]),me=Z?C:Y,he=V.length<ae;return(0,r.jsxs)(Ar,Nr({className:t},{children:[(0,r.jsx)(pr,{avgStaked:d,lastEra:h,lowStaked:p,minNominated:x,minNominatorBond:g,numNominators:null==b?void 0:b.length,numValidators:null==C?void 0:C.length,stakedReturn:m,totalIssuance:N,totalStaked:k}),(0,r.jsxs)(l.zx.Group,{children:[(0,r.jsx)(l.zx,{icon:"check",isDisabled:!(null==C?void 0:C.length)||!(null==D?void 0:D.length),label:A("Most profitable"),onClick:le}),(0,r.jsx)(lr,{isDisabled:s||!(null==C?void 0:C.length),ownNominators:D,targets:V})]}),(0,r.jsx)(w,{isInElection:s}),(0,r.jsx)(l.iA,Nr({empty:Y&&A("No active validators to check"),emptySpinner:(0,r.jsxs)(r.Fragment,{children:[!(C&&q)&&(0,r.jsx)("div",{children:A("Retrieving validators")}),!o&&(0,r.jsx)("div",{children:A("Retrieving nominators")}),!me&&(0,r.jsx)("div",{children:A("Preparing target display")})]}),filter:de,header:ue,legend:(0,r.jsx)(rr.Z,{})},{children:me&&me.map((function(e){return(0,r.jsx)(wr,{allSlashes:T,canSelect:he,filterName:L,info:e,isNominated:se.includes(e.key),isSelected:V.includes(e.key),nominatedBy:null==o?void 0:o[e.key],toggleFavorite:S,toggleSelected:ie},e.key)}))}))]}))}));var Tr;const Er=(0,C.e)("useNominations",(function(e){void 0===e&&(e=!0);var n=(0,c.h)().api,t=(0,m.W7)(e&&n.query.staking.nominators.entries);return(0,a.useMemo)((function(){return t&&function(e){for(var n={},t=0;t<e.length;t++){var r=e[t],a=r[0],s=r[1];if(s.isSome&&a.args.length)for(var o=a.args[0].toString(),i=s.unwrap(),l=i.submittedIn,c=i.targets,u=0;u<c.length;u++){var d=c[u].toString();n[d]||(n[d]=[]),n[d].push({index:u+1,nominatorId:o,submittedIn:l})}}return n}(t)}),[t])}));var Dr=t(57493),qr=t(95209),Fr=function(){return Fr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Fr.apply(this,arguments)},Vr={},Rr={withController:!0,withExposure:!0,withPrefs:!0},_r={withController:!0,withPrefs:!0},Br={transform:function(e){var n=e.activeEra,t=e.eraLength,r=e.sessionLength;return{activeEra:n,eraLength:t,lastEra:n.isZero()?j.nw:n.sub(j.If),sessionLength:r}}},Zr={defaultValue:{},transform:function(e){var n=e[0],t=e[1],r=e[2],a=e[3],s=e[4],o=e[5],i=e[6],l=e[7];return{counterForNominators:t,counterForValidators:r,historyDepth:n,maxNominatorsCount:a&&a.isSome?a.unwrap():void 0,maxValidatorsCount:s&&s.isSome?s.unwrap():void 0,minNominatorBond:o,minValidatorBond:i,totalIssuance:l}}};function Lr(e){return function(n,t){return n[e]=t+1,n}}function Hr(e){return!e.nextElected}function zr(e,n,t,r,a,s,o){for(var i,l=a.activeEra,c=a.eraLength,u=a.lastEra,d=a.sessionLength,m={},h=e.createType("Exposure"),p=s&&u.sub(s).iadd(j.If),f=new Array(t.info.length),v=function(a){var s=t.info[a],v=s.accountId,x=s.exposure,g=void 0===x?h:x,b=s.stakingLedger,y=s.validatorPrefs,w=g.total?[g.own.unwrap(),g.total.unwrap()]:[j.nw,j.nw],N=w[0],k=w[1],O=k.isZero();O&&(k=N=(null===(i=b.total)||void 0===i?void 0:i.unwrap())||j.nw);var C=(g.others||[]).reduce((function(n,t){var r=t.value,a=(void 0===r?e.createType("Compact<Balance>"):r).unwrap();return n.isZero()||a.lt(n)?a:n}),j.nw),S=v.toString(),I=u.isZero()?void 0:b.claimedRewards[b.claimedRewards.length-1];f[a]={accountId:v,bondOther:k.sub(N),bondOwn:N,bondShare:0,bondTotal:k,commissionPer:y.commission.unwrap().toNumber()/1e7,exposure:g,isActive:!O,isBlocking:!(!y.blocked||!y.blocked.isTrue),isElected:!Hr(t)&&t.nextElected.some((function(e){return e.eq(v)})),isFavorite:r.includes(S),isNominating:(g.others||[]).reduce((function(e,t){var r,a=t.who.toString();return m[a]=(m[a]||j.nw).add((null===(r=t.value)||void 0===r?void 0:r.toBn())||j.nw),e||n.includes(a)}),n.includes(S)),key:S,knownLength:l.sub(b.claimedRewards[0]||l),lastPayout:p&&I&&I.gt(p)&&!d.eq(j.If)?u.sub(I).mul(c):void 0,minNominated:C,numNominators:(g.others||[]).length,numRecentPayouts:p?b.claimedRewards.filter((function(e){return e.gte(p)})).length:0,rankBondOther:0,rankBondOwn:0,rankBondTotal:0,rankNumNominators:0,rankOverall:0,rankReward:0,skipRewards:O,stakedReturn:0,stakedReturnCmp:0,validatorPrefs:y,withReturns:o}},x=0;x<t.info.length;x++)v(x);return[f,m]}const Wr=(0,C.e)("useSortedTargets",(function(e,n){var t,r=(0,c.h)().api,s=(0,u.x)().allAccounts,o=(0,h.L)([r.query.staking.historyDepth,r.query.staking.counterForNominators,r.query.staking.counterForValidators,r.query.staking.maxNominatorsCount,r.query.staking.maxValidatorsCount,r.query.staking.minNominatorBond,r.query.staking.minValidatorBond,null===(t=r.query.balances)||void 0===t?void 0:t.totalIssuance],Zr),i=o.counterForNominators,l=o.counterForValidators,d=o.historyDepth,p=o.maxNominatorsCount,f=o.maxValidatorsCount,v=o.minNominatorBond,x=o.minValidatorBond,g=o.totalIssuance,y=(0,m.W7)(r.derive.staking.electedInfo,[Fr(Fr({},Rr),{withLedger:n})]),w=(0,m.W7)(r.derive.staking.waitingInfo,[Fr(Fr({},_r),{withLedger:n})]),N=(0,m.W7)(r.derive.session.info,void 0,Br),k=(0,a.useMemo)((function(){return y&&N&&g&&w?function(e,n,t,r,a,s,o,i){var l=zr(e,n,t,a,o,i,!0),c=l[0],u=l[1],d=zr(e,n,r,a,o)[0],m=c.filter((function(e){return e.isActive})).map((function(e){return e.bondTotal})).sort((function(e,n){return e.cmp(n)})),h=m.reduce((function(e,n){return e.iadd(n)}),new(b())(0)),p=h.divn(m.length),f=Object.values(u).reduce((function(e,n){return e.isZero()||n.lt(e)?n:e}),j.nw),v=(0,qr.a)([c,d]),x=v.map((function(e){return e.commissionPer})).sort((function(e,n){return e-n})),g=Math.floor(x.length/2),y=x.length?x.length%2?x[g]:(x[g-1]+x[g])/2:0,w=d.map((function(e){return e.key})),N=(0,qr.a)([c.map((function(e){return e.key})),w]),k=(0,qr.a)([c.filter((function(e){return!e.isBlocking})).map((function(e){return e.key})),d.filter((function(e){return!e.isBlocking})).map((function(e){return e.key}))]);return{avgStaked:p,lastEra:o.lastEra,lowStaked:m[0]||j.nw,medianComm:y,minNominated:f,nominateIds:k,nominators:Object.keys(u),totalIssuance:s,totalStaked:h,validatorIds:N,validators:v,waitingIds:w}}(r,s,y,w,e,g,N,r.consts.staking.historyDepth||d):Vr}),[r,s,y,e,d,N,g,w]),O=(0,Dr.V)(null==k?void 0:k.totalStaked);return(0,a.useMemo)((function(){return Fr({counterForNominators:i,counterForValidators:l,historyDepth:r.consts.staking.historyDepth||d,inflation:O,maxNominatorsCount:p,maxValidatorsCount:f,medianComm:0,minNominated:j.nw,minNominatorBond:v,minValidatorBond:x},O&&O.stakedReturn?function(e,n){var t,r,a=n.avgStaked,s=n.validators;return s?(a&&!a.isZero()&&s.forEach((function(n){if(!n.skipRewards&&n.withReturns){var t=a.mul(j.S8).imuln(e.stakedReturn).div(n.bondTotal);n.stakedReturn=(t.gt(j.Ew)?j.Ew:t).toNumber()/j.S8.toNumber(),n.stakedReturnCmp=n.stakedReturn*(100-n.commissionPer)/100}})),Fr(Fr({},n),{validators:(t=s,r=[],t.filter((function(e){var n=e.accountId.toString();return!r.includes(n)&&(r.push(n),!0)})).sort((function(e,n){return n.bondOther.cmp(e.bondOther)})).map(Lr("rankBondOther")).sort((function(e,n){return n.bondOwn.cmp(e.bondOwn)})).map(Lr("rankBondOwn")).sort((function(e,n){return n.bondTotal.cmp(e.bondTotal)})).map(Lr("rankBondTotal")).sort((function(e,n){return e.stakedReturnCmp-n.stakedReturnCmp})).map(Lr("rankReward")).sort((function(e,n){return n.stakedReturnCmp-e.stakedReturnCmp||e.commissionPer-n.commissionPer||n.rankBondTotal-e.rankBondTotal})).map(Lr("rankOverall")).sort((function(e,n){return e.isFavorite===n.isFavorite?0:e.isFavorite?-1:1})))})):n}(O,k):k)}),[r,k,i,l,d,O,p,f,v,x])}));var $r=t(75387);const Ur=a.memo((function(){var e=(0,y.$)().t;return(0,r.jsx)(l.Pd,{className:"warning centered",content:e("Use the account actions to create a new validator/nominator stash and bond it to participate in staking. Do not send funds directly via a transfer to a validator.")})}));var Jr=t(47623),Gr=function(){return Gr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Gr.apply(this,arguments)};function Qr(e){return e.length?[e.length,function(){return e.map((function(e){return(0,r.jsx)(l.ax,{value:e},e)}))}]:null}const Xr=a.memo((function(e){var n=e.nominators,t=e.slashingSpans,s=(0,y.$)().t,o=(0,c.h)().api,i=(0,a.useMemo)((function(){return function(e,n,t){void 0===n&&(n=[]);var r=t&&!e.events.staking.SlashReported?n.filter((function(e){var n=e.submittedIn;return t.lastNonzeroSlash.gt(n)})).map((function(e){return e.nominatorId})):[];return{active:Qr(n.filter((function(e){var n=e.nominatorId;return!r.includes(n)})).map((function(e){return e.nominatorId}))),chilled:Qr(r)}}(o,n,t)}),[o,n,t]),u=i.active,d=i.chilled;return(0,r.jsxs)("td",Gr({className:"expand all"},{children:[u&&(0,r.jsx)(l.n0,{renderChildren:u[1],summary:s("Nominations ({{count}})",{replace:{count:(0,O.u)(u[0])}})}),d&&(0,r.jsx)(l.n0,{renderChildren:d[1],summary:s("Renomination required ({{count}})",{replace:{count:(0,O.u)(d[0])}})})]}))}));var Kr=function(){return Kr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Kr.apply(this,arguments)};function Yr(e){return[e.length,function(){return e.map((function(e){var n=e.nominatorId,t=e.value;return(0,r.jsx)(l.ax,{bonded:t,value:n,withBonded:!0},n)}))}]}function ea(e){for(var n=new(b())(0),t=0;t<e.length;t++)n.iadd(e[t].value);return n}const na=a.memo((function(e){var n=e.nominators,t=e.stakeOther,s=(0,c.h)().api,o=(0,a.useMemo)((function(){var e;return function(e,n,t){if(!n)return[null,j.nw,null,j.nw];var r=n.sort((function(e,n){return n.value.cmp(e.value)}));if(!e||e.gtn(r.length))return[Yr(r),t||j.nw,null,j.nw];var a=e.toNumber(),s=r.slice(0,a),o=ea(s),i=r.slice(a),l=ea(i);return[Yr(s),o,Yr(i),l]}(null===(e=s.consts.staking)||void 0===e?void 0:e.maxNominatorRewardedPerValidator,n,t)}),[s,n,t]),i=o[0],u=o[1],d=o[2],m=o[3];return(0,r.jsxs)("td",Kr({className:"expand all"},{children:[(!i||0!==i[0])&&(0,r.jsx)(l.n0,{className:i?"":"--tmp",renderChildren:i&&i[1],summary:(0,r.jsx)(x.Z,{labelPost:" (".concat(i?i[0]:"0",")"),value:u})}),d&&(0,r.jsx)(l.n0,{className:"stakeOver",renderChildren:d[1],summary:(0,r.jsx)(x.Z,{labelPost:" (".concat(d[0],")"),value:m})})]}))}));var ta=[];const ra=a.memo((function(e){var n=e.isChilled,t=e.isElected,s=e.isMain,o=e.isPara,i=e.isRelay,c=e.nominators,d=void 0===c?ta:c,m=e.onlineCount,h=e.onlineMessage,p=(0,u.x)().allAccounts,f=m&&m.toNumber(),v=(0,a.useMemo)((function(){return d.some((function(e){var n=e.nominatorId;return p.includes(n)}))}),[p,d]);return(0,r.jsxs)(r.Fragment,{children:[v?(0,r.jsx)(l.Ct,{className:"media--1100",color:"green",icon:"hand-paper"}):(0,r.jsx)(l.Ct,{className:"media--1100",color:"transparent"}),i&&(o?(0,r.jsx)(l.Ct,{className:"media--1100",color:"purple",icon:"vector-square"}):(0,r.jsx)(l.Ct,{className:"media--1100",color:"transparent"})),n?(0,r.jsx)(l.Ct,{className:"media--1000",color:"red",icon:"cancel"}):t?(0,r.jsx)(l.Ct,{className:"media--1000",color:"blue",icon:"chevron-right"}):(0,r.jsx)(l.Ct,{className:"media--1000",color:"transparent"}),s&&(f?(0,r.jsx)(l.Ct,{className:"media--900",color:"green",info:f}):h?(0,r.jsx)(l.Ct,{className:"media--900",color:"green",icon:"envelope"}):(0,r.jsx)(l.Ct,{className:"media--900",color:"transparent"})),(0,r.jsx)(jr,{numNominators:d.length})]})}));var aa=function(){return aa=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},aa.apply(this,arguments)},sa={transform:function(e){return e.unwrapOr(null)}};const oa=a.memo((function(e){var n,t=e.address,s=e.className,o=void 0===s?"":s,i=e.filterName,u=e.hasQueries,d=e.isElected,h=e.isFavorite,p=e.isMain,f=e.isPara,v=e.lastBlock,g=e.minCommission,b=e.nominatedBy,w=e.points,N=e.recentlyOnline,O=e.toggleFavorite,C=e.validatorInfo,S=e.withIdentity,I=(0,y.$)().t,P=(0,c.h)().api,A=(0,k.O)(!1),M=A[0],T=A[1],E=function(e,n,t){var r=(0,a.useMemo)((function(){return[n]}),[n]);return{accountInfo:(0,gr.Y)(n),slashingSpans:(0,m.W7)(!t&&e.query.staking.slashingSpans,r,sa)}}(P,t,p),D=E.accountInfo,q=E.slashingSpans,F=(0,a.useMemo)((function(){return C?function(e,n){var t,r,a,s,o,i,l=e.exposure,c=e.validatorPrefs;l&&l.total&&(a=l.others.map((function(e){var n=e.value;return{nominatorId:e.who.toString(),value:n.unwrap()}})),s=(null===(t=l.total)||void 0===t?void 0:t.unwrap())||j.nw,i=l.own.unwrap(),o=s.sub(i));var u=null===(r=null==c?void 0:c.commission)||void 0===r?void 0:r.unwrap();return{commission:null==u?void 0:u.toHuman(),isChilled:u&&n&&u.isZero()&&u.lt(n),nominators:a,stakeOther:o,stakeOwn:i,stakeTotal:s}}(C,g):{}}),[g,C]),V=F.commission,R=F.isChilled,_=F.nominators,B=F.stakeOther,Z=F.stakeOwn,L=(0,a.useMemo)((function(){return!D||(0,xr.r7)(P,t,D,i,S)}),[P,D,t,i,S]),H=(0,a.useMemo)((function(){return"#/staking/query/".concat(t)}),[t]),z=(0,a.useMemo)((function(){return w&&"greyAnim-".concat(Date.now()%25)}),[w]);return L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",aa({className:"".concat(o," isExpanded isFirst ").concat(M?"packedBottom":"isLast")},{children:[(0,r.jsx)(l.iA.Column.Favorite,{address:t,isFavorite:h,toggle:O}),(0,r.jsx)("td",aa({className:"badge together"},{children:(0,r.jsx)(ra,{isChilled:R,isElected:d,isMain:p,isPara:f,isRelay:!!(null===(n=P.query.parasShared||P.query.shared)||void 0===n?void 0:n.activeValidatorIndices),nominators:p?_:b,onlineCount:null==N?void 0:N.blockCount,onlineMessage:null==N?void 0:N.hasMessage})})),(0,r.jsxs)("td",aa({className:"address all relative"},{children:[(0,r.jsx)(l.N,{value:t}),p&&z&&(0,r.jsx)(l.Vp,{className:"".concat(z," absolute"),color:"lightgrey",label:w})]})),p?(0,r.jsx)(na,{nominators:_,stakeOther:B}):(0,r.jsx)(Xr,{nominators:b,slashingSpans:q}),(0,r.jsx)("td",aa({className:"number"},{children:V||(0,r.jsx)("span",aa({className:"--tmp"},{children:"50.00%"}))})),p&&(0,r.jsx)("td",aa({className:"number"},{children:v})),(0,r.jsx)(l.iA.Column.Expand,{isExpanded:M,toggle:T})]})),M&&(0,r.jsxs)("tr",aa({className:"".concat(o," ").concat(M?"isExpanded isLast":"isCollapsed"," packedTop")},{children:[(0,r.jsx)("td",{colSpan:2}),(0,r.jsxs)("td",aa({className:"columar",colSpan:p?4:3},{children:[(0,r.jsxs)(l.P0,aa({size:"small"},{children:[(0,r.jsx)(l.P0.Column,{children:p&&(null==Z?void 0:Z.gtn(0))&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:I("own stake")}),(0,r.jsx)(x.Z,{value:Z})]})}),(0,r.jsx)(l.P0.Column,{children:u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h5",{children:I("graphs")}),(0,r.jsxs)("a",aa({href:H},{children:[(0,r.jsx)(l.JO,{className:"highlight--color",icon:"chart-line"})," ",I("historic results")]}))]})})]})),(0,r.jsx)(l.P0,aa({is100:!0},{children:(0,r.jsx)(l.P0.Column,{children:(0,r.jsx)(l.NR,{data:t,type:"validator",withTitle:!0})})}))]})),(0,r.jsx)("td",{})]}))]}):null}));var ia=function(){return ia=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ia.apply(this,arguments)};function la(e,n,t,r,a,s){return void 0===n&&(n=[]),void 0===t&&(t=[]),n.filter((function(n){return!s.includes(n)&&(!e||t.includes(n))})).map((function(e){return[e,r.includes(e),a.includes(e)]})).sort((function(e,n){var r=e[0],a=e[2],s=n[0],o=n[2],i=t.includes(r),l=t.includes(s);return a===o?i===l?0:i?-1:1:a?-1:1}))}function ca(e){for(var n=new Array(e.length),t=0;t<e.length;t++)n[t]=e[t].toString();return n}var ua={};const da=a.memo((function(e){var n,t=e.className,s=e.favorites,o=e.hasQueries,i=e.isIntentions,u=e.isOwn,d=e.minCommission,m=e.nominatedBy,h=e.ownStashIds,p=e.paraValidators,f=void 0===p?ua:p,v=e.recentlyOnline,x=e.stakingOverview,g=e.targets,b=e.toggleFavorite,j=(0,y.$)().t,w=(0,c.h)().api,N=(0,$r.E)(),k=N.byAuthor,O=N.eraPoints,C=(0,a.useState)(""),S=C[0],I=C[1],P=(0,Jr.q)(),A=(0,a.useMemo)((function(){return function(e,n,t,r,a){if(!n)return{};var s=ca(n.nextElected),o=ca(n.validators);return{validators:la(e,o,a,s,t,[]),waiting:la(e,s,a,s,t,o).concat(la(e,r,a,[],t,s))}}(u,x,s,g.waitingIds,h)}),[s,u,h,x,g]),M=A.validators,T=A.waiting,E=(0,a.useMemo)((function(){return P?i?m&&T:M:void 0}),[i,P,m,M,T]),D=(0,a.useMemo)((function(){return g.validators&&function(e){for(var n={},t=0;t<e.length;t++){var r=e[t];n[r.key]=r}return n}(g.validators)}),[g]),q=(0,a.useRef)(i?[[j("intentions"),"start",3],[j("nominators"),"expand"],[j("commission"),"number"],[]]:[[j("validators"),"start",3],[j("other stake"),"expand"],[j("commission")],[j("last #")],[]]);return(0,r.jsx)(l.iA,ia({className:t,empty:i?E&&j("No waiting validators found"):E&&v&&D&&j("No active validators found"),emptySpinner:(0,r.jsxs)(r.Fragment,{children:[!T&&(0,r.jsx)("div",{children:j("Retrieving validators")}),!D&&(0,r.jsx)("div",{children:j("Retrieving validator info")}),i?!m&&(0,r.jsx)("div",{children:j("Retrieving nominators")}):!v&&(0,r.jsx)("div",{children:j("Retrieving online status")}),!E&&(0,r.jsx)("div",{children:j("Preparing validator list")})]}),filter:(0,r.jsx)(tr,{nameFilter:S,setNameFilter:I}),header:q.current,legend:(0,r.jsx)(rr.Z,{isRelay:!i&&!!(null===(n=w.query.parasShared||w.query.shared)||void 0===n?void 0:n.activeValidatorIndices),minCommission:d})},{children:E&&E.map((function(e){var n=e[0],t=e[1],a=e[2];return(0,r.jsx)(oa,{address:n,filterName:S,hasQueries:o,isElected:t,isFavorite:a,isMain:!i,isPara:f[n],lastBlock:k[n],minCommission:d,nominatedBy:null==m?void 0:m[n],points:O[n],recentlyOnline:null==v?void 0:v[n],toggleFavorite:b,validatorInfo:null==D?void 0:D[n]},n)}))}))}));var ma=t(54705),ha=function(){return ha=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ha.apply(this,arguments)},pa=(0,l.zo)(l.Ty)(va||(va=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .validator--Account-block-icon {\n    display: inline-block;\n    margin-right: 0.75rem;\n    margin-top: -0.25rem;\n    vertical-align: middle;\n  }\n\n  .validator--Summary-authors {\n    .validator--Account-block-icon+.validator--Account-block-icon {\n      margin-left: -1.5rem;\n    }\n  }\n\n  .percent {\n    font-size: var(--font-percent-tiny);\n  }\n"],["\n  .validator--Account-block-icon {\n    display: inline-block;\n    margin-right: 0.75rem;\n    margin-top: -0.25rem;\n    vertical-align: middle;\n  }\n\n  .validator--Summary-authors {\n    .validator--Account-block-icon+.validator--Account-block-icon {\n      margin-left: -1.5rem;\n    }\n  }\n\n  .percent {\n    font-size: var(--font-percent-tiny);\n  }\n"])));const fa=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.stakingOverview,s=e.targets,o=s.counterForNominators,i=s.inflation,c=i.idealStake,u=i.inflation,d=i.stakedFraction,m=s.nominators,h=s.waitingIds,p=(0,y.$)().t,f=(0,r.jsx)("span",ha({className:"percent"},{children:"%"}));return(0,r.jsxs)(pa,ha({className:t},{children:[(0,r.jsxs)("section",{children:[(0,r.jsx)(l.Jy,ha({label:p("validators")},{children:a?(0,r.jsxs)(r.Fragment,{children:[(0,O.u)(a.validators.length)," / ",(0,O.u)(a.validatorCount)]}):(0,r.jsx)("span",ha({className:"--tmp"},{children:"999 / 999"}))})),(0,r.jsx)(l.Jy,ha({className:"media--900",label:p("waiting")},{children:h?(0,O.u)(h.length):(0,r.jsx)("span",ha({className:"--tmp"},{children:"99"}))})),(0,r.jsx)(l.Jy,ha({className:"media--1000",label:p(o?"active / nominators":"nominators")},{children:m?(0,r.jsxs)(r.Fragment,{children:[(0,O.u)(m.length),o&&(0,r.jsxs)(r.Fragment,{children:[" / ",(0,O.u)(o)]})]}):(0,r.jsx)("span",ha({className:"--tmp"},{children:"999 / 999"}))}))]}),(0,r.jsxs)("section",{children:[c>0&&Number.isFinite(c)&&(0,r.jsx)(l.Jy,ha({className:"media--1400",label:p("ideal staked")},{children:(0,r.jsxs)(r.Fragment,{children:[(100*c).toFixed(1),f]})})),d>0&&(0,r.jsx)(l.Jy,ha({className:"media--1300",label:p("staked")},{children:(0,r.jsxs)(r.Fragment,{children:[(100*d).toFixed(1),f]})})),u>0&&Number.isFinite(u)&&(0,r.jsx)(l.Jy,ha({className:"media--1200",label:p("inflation")},{children:(0,r.jsxs)(r.Fragment,{children:[u.toFixed(1),f]})}))]}),(0,r.jsx)("section",{children:(0,r.jsx)(ma.Z,{})})]}))}));var va,xa=function(){return xa=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},xa.apply(this,arguments)},ga={},ba={},ja={};const ya=a.memo((function(e){var n,t=e.className,s=void 0===t?"":t,o=e.favorites,i=e.hasAccounts,u=e.hasQueries,d=e.minCommission,h=e.nominatedBy,p=e.ownStashes,f=e.paraValidators,v=e.stakingOverview,x=e.targets,g=e.toggleFavorite,b=e.toggleLedger,j=e.toggleNominatedBy,w=(0,y.$)().t,N=(0,c.h)().api,k=(0,$r.E)(),O=k.byAuthor,C=k.eraPoints,S=(0,a.useState)(0),I=S[0],P=S[1],A=(0,a.useState)(1),M=A[0],T=A[1],E=(0,m.W7)(null===(n=N.derive.imOnline)||void 0===n?void 0:n.receivedHeartbeats),D=(0,a.useCallback)((function(e){e&&j(),P(e)}),[j]),q=(0,a.useRef)([{text:w("Own validators"),value:"mine"},{text:w("All validators"),value:"all"}]),F=(0,a.useRef)([{text:w("Active"),value:"active"},{text:w("Waiting"),value:"waiting"}]),V=(0,a.useMemo)((function(){return p&&p.map((function(e){return e.stashId}))}),[p]);(0,a.useEffect)((function(){b&&b()}),[b]);var R=0===M;return(0,r.jsxs)("div",xa({className:"".concat(s," staking--Overview")},{children:[(0,r.jsx)(fa,{stakingOverview:v,targets:x}),i&&0===(null==p?void 0:p.length)&&(0,r.jsx)(Ur,{}),(0,r.jsxs)(l.zx.Group,{children:[(0,r.jsx)(l.tX,{onChange:T,options:q.current,value:M}),(0,r.jsx)(l.tX,{onChange:D,options:F.current,value:I})]}),(0,r.jsx)(da,{byAuthor:0===I?O:ba,eraPoints:0===I?C:ja,favorites:o,hasQueries:u,isIntentions:1===I,isOwn:R,minCommission:0===I?d:void 0,nominatedBy:1===I?h:void 0,ownStashIds:V,paraValidators:0===I&&f||ga,recentlyOnline:0===I?E:void 0,stakingOverview:v,targets:x,toggleFavorite:g},I)]}))}));var wa=function(){return wa=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},wa.apply(this,arguments)},Na=["actions","payout"],ka={defaultValue:[!1,void 0,{}],transform:function(e){var n=e[0],t=e[1],r=e[2],a=e[3];return[!!n&&n.isOpen,t&&!t.isZero()?t:void 0,r&&a?a.reduce((function(e,n){var t;return wa(wa({},e),((t={})[r[n.toNumber()].toString()]=!0,t))}),{}):{}]}},Oa=l.zo.main(Sa||(Sa=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .staking--Chart {\n    margin-top: 1.5rem;\n\n    h1 {\n      margin-bottom: 0.5rem;\n    }\n\n    .ui--Spinner {\n      margin: 2.5rem auto;\n    }\n  }\n\n  .staking--optionsBar {\n    margin: 0.5rem 0 1rem;\n    text-align: center;\n    white-space: normal;\n\n    .staking--buttonToggle {\n      display: inline-block;\n      margin-right: 1rem;\n      margin-top: 0.5rem;\n    }\n  }\n\n  .ui--Expander.stakeOver {\n    .ui--Expander-summary {\n      color: var(--color-error);\n    }\n  }\n"],["\n  .staking--Chart {\n    margin-top: 1.5rem;\n\n    h1 {\n      margin-bottom: 0.5rem;\n    }\n\n    .ui--Spinner {\n      margin: 2.5rem auto;\n    }\n  }\n\n  .staking--optionsBar {\n    margin: 0.5rem 0 1rem;\n    text-align: center;\n    white-space: normal;\n\n    .staking--buttonToggle {\n      display: inline-block;\n      margin-right: 1rem;\n      margin-top: 0.5rem;\n    }\n  }\n\n  .ui--Expander.stakeOver {\n    .ui--Expander-summary {\n      color: var(--color-error);\n    }\n  }\n"])));const Ca=a.memo((function(e){var n,t=e.basePath,x=e.className,g=void 0===x?"":x,b=(0,y.$)().t,j=(0,c.h)().api,w=(0,u.x)(),N=w.areAccountsLoaded,k=w.hasAccounts,O=(0,s.TH)().pathname,C=(0,a.useState)(!1),S=C[0],I=C[1],P=(0,d.r)(ee),A=P[0],M=P[1],T=(0,a.useState)(!1),E=T[0],D=T[1],q=Er(E),F=(0,m.W7)(j.derive.staking.overview),V=(0,h.L)([j.query.staking.eraElectionStatus,j.query.staking.minCommission,j.query.session.validators,null===(n=j.query.parasShared||j.query.shared)||void 0===n?void 0:n.activeValidatorIndices],ka),R=V[0],_=V[1],B=V[2],Z=(0,i.Z)(),L=(0,p.w)(),H=(0,f.g)(),z=Wr(A,S),W=(0,a.useRef)(function(e){return{bags:"".concat(e,"/bags"),payout:"".concat(e,"/payout"),pools:"".concat(e,"/pools"),query:["".concat(e,"/query/:value"),"".concat(e,"/query")],slashes:"".concat(e,"/slashes"),targets:"".concat(e,"/targets")}}(t)),$=(0,a.useMemo)((function(){var e;return k&&!!(null===(e=j.query.imOnline)||void 0===e?void 0:e.authoredBlocks)&&!!j.query.staking.activeEra}),[j,k]),U=(0,a.useMemo)((function(){return k&&!!L&&0!==L.length}),[k,L]),J=(0,a.useMemo)((function(){return(L||[]).filter((function(e){return e.isStashValidating}))}),[L]),G=(0,a.useCallback)((function(){return I(!0)}),[]),Q=(0,a.useCallback)((function(){return D(!0)}),[]),X=(0,a.useMemo)((function(){var e,n;return[{isRoot:!0,name:"overview",text:b("Overview")},{name:"actions",text:b("Accounts")},U&&(0,v.m)(j.query.staking.activeEra)&&{name:"payout",text:b("Payouts")},(0,v.m)(null===(e=j.query.nominationPools)||void 0===e?void 0:e.minCreateBond)&&{name:"pools",text:b("Pools")},{alias:"returns",name:"targets",text:b("Targets")},U&&(0,v.m)(null===(n=j.query.voterBagsList||j.query.bagsList||j.query.voterList)||void 0===n?void 0:n.counterForListNodes)&&{name:"bags",text:b("Bags")},{count:H.reduce((function(e,n){return e+n[1].length}),0),name:"slashes",text:b("Slashes")},{hasParams:!0,name:"query",text:b("Validator stats")}].filter((function(e){return!!e}))}),[j,U,H,b]);return(0,r.jsxs)(Oa,wa({className:"".concat(g," staking--App")},{children:[(0,r.jsx)(l.mQ,{basePath:t,hidden:N&&!k?Na:void 0,items:X}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,wa({path:W.current.bags},{children:(0,r.jsx)(Yn,{ownStashes:L})})),(0,r.jsx)(s.AW,wa({path:W.current.payout},{children:(0,r.jsx)(gt,{historyDepth:z.historyDepth,isInElection:R,ownPools:Z,ownValidators:J})})),(0,r.jsx)(s.AW,wa({path:W.current.pools},{children:(0,r.jsx)(o.Z,{ownPools:Z})})),(0,r.jsx)(s.AW,wa({path:W.current.query},{children:(0,r.jsx)(Bt,{})})),(0,r.jsx)(s.AW,wa({path:W.current.slashes},{children:(0,r.jsx)(Qt,{ownStashes:L,slashes:H})})),(0,r.jsx)(s.AW,wa({path:W.current.targets},{children:(0,r.jsx)(Mr,{isInElection:R,nominatedBy:q,ownStashes:L,stakingOverview:F,targets:z,toggleFavorite:M,toggleLedger:G,toggleNominatedBy:Q})}))]}),(0,r.jsx)(On,{className:O==="".concat(t,"/actions")?"":"--hidden",isInElection:R,minCommission:_,ownPools:Z,ownStashes:L,targets:z}),(0,r.jsx)(ya,{className:t===O?"":"--hidden",favorites:A,hasAccounts:k,hasQueries:$,minCommission:_,nominatedBy:q,ownStashes:L,paraValidators:B,stakingOverview:F,targets:z,toggleFavorite:M,toggleNominatedBy:Q})]}))}));var Sa},57272:(e,n,t)=>{t.d(n,{$:()=>a});var r=t(61349);function a(){return(0,r.$G)("app-staking")}},75030:(e,n,t)=>{t.d(n,{Z:()=>Q});var r=t(52322),a=t(2784),s=t(24732),o=t(95209),i=t(90760),l=t(90778),c=t(38894),u=t(52107),d=t(63985),m=function(){return m=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},m.apply(this,arguments)};const h=a.memo((function(e){var n=e.className,t=e.isDisabled,o=e.ownAccounts,h=e.params,p=h.minCreateBond,f=h.minNominatorBond,v=h.nextPoolId,x=(0,i.$)().t,g=(0,l.h)().api,b=(0,c.O)(),j=b[0],y=b[1],w=(0,a.useState)(null),N=w[0],k=w[1],O=(0,a.useState)(),C=O[0],S=O[1],I=(0,a.useState)(""),P=I[0],A=I[1],M=(0,a.useMemo)((function(){return p&&f&&(0,u.x)(p,f,g.consts.balances.existentialDeposit)}),[g,p,f]),T=(0,d.Z)(N,C,M),E=(0,a.useMemo)((function(){return!P||P.length<3||P.length>32}),[P]),D=(0,a.useMemo)((function(){return C&&N&&!T&&v?g.tx.utility.batch([g.tx.nominationPools.create(C,N,N,N),g.tx.nominationPools.setMetadata(v,P)]):null}),[g,N,C,T,P,v]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.zx,{icon:"plus",isDisabled:t||!M,label:x("Add pool"),onClick:y}),j&&(0,r.jsxs)(s.u_,m({className:n,header:x("Create nomination pool"),onClose:y,size:"large"},{children:[(0,r.jsxs)(s.u_.Content,{children:[(0,r.jsx)(s.u_.Columns,m({hint:x("The origin account will also be set as the pool admin, nominator and state toggler.")},{children:(0,r.jsx)(s.rp,{filter:o,label:x("create pool from"),onChange:k,type:"account",value:N,withExclude:!0})})),(0,r.jsx)(s.u_.Columns,m({hint:x("The initial value to assign to the pool. It is set to the maximum of the minimum bond and the minium nomination value.")},{children:(0,r.jsx)(s.H,{autoFocus:!0,defaultValue:M,isError:T,label:x("initial value"),onChange:S})})),(0,r.jsx)(s.u_.Columns,m({hint:x("The metadata description to set for this pool")},{children:(0,r.jsx)(s.II,{isError:E,label:x("description"),maxLength:32,onChange:A})})),(0,r.jsx)(s.u_.Columns,m({hint:x("The id that will be assigned to this nomination pool.")},{children:(0,r.jsx)(s.Rn,{defaultValue:v,isDisabled:!0,label:x("pool id")})}))]}),(0,r.jsx)(s.u_.Actions,{children:(0,r.jsx)(s.cA,{accountId:N,extrinsic:D,icon:"plus",isDisabled:!N||T||E,label:x("Create"),onStart:y})})]}))]})}));var p=t(58607),f=function(){return f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},f.apply(this,arguments)};const v=a.memo((function(e){var n=e.className,t=e.isDisabled,o=e.ownAccounts,u=e.params.minMemberBond,m=e.poolId,h=(0,i.$)().t,p=(0,l.h)().api,v=(0,c.O)(),x=v[0],g=v[1],b=(0,a.useState)(null),j=b[0],y=b[1],w=(0,a.useState)(),N=w[0],k=w[1],O=(0,d.Z)(j,N,u);return t?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.zx,{icon:"plus",isDisabled:!u,label:h("Join"),onClick:g}),x&&(0,r.jsxs)(s.u_,f({className:n,header:h("Join nomination pool"),onClose:g,size:"large"},{children:[(0,r.jsxs)(s.u_.Content,{children:[(0,r.jsx)(s.u_.Columns,f({hint:h("The account that will join the pool.")},{children:(0,r.jsx)(s.rp,{filter:o,label:h("join pool from"),onChange:y,type:"account",value:j,withExclude:!0})})),(0,r.jsx)(s.u_.Columns,f({hint:h("The initial value to assign to the pool. It is set to the minimum value required to join a pool.")},{children:(0,r.jsx)(s.H,{autoFocus:!0,defaultValue:u,isError:O,label:h("initial value"),onChange:k})}))]}),(0,r.jsx)(s.u_.Actions,{children:(0,r.jsx)(s.cA,{accountId:j,icon:"plus",isDisabled:!j||O,label:h("Join"),onStart:g,params:[N,m],tx:p.tx.nominationPools.join})})]}))]})}));var x,g,b=t(19042),j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},j.apply(this,arguments)},y=s.zo.tr(N||(x=["\n  .label-column-right,\n  .label-column-left{\n    display: flex;\n    align-items: center;\n\n    .label {\n      width: 50%;\n    }\n  }\n\n  .label {\n    text-align: right;\n    padding: 0 1.7rem 0 0;\n    line-height: normal;\n    color: var(--color-label);\n    text-transform: lowercase;\n  }\n\n  .clamp {\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 1;\n    box-orient: vertical;\n    display: -webkit-box;\n    line-clamp: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n"],g=["\n  .label-column-right,\n  .label-column-left{\n    display: flex;\n    align-items: center;\n\n    .label {\n      width: 50%;\n    }\n  }\n\n  .label {\n    text-align: right;\n    padding: 0 1.7rem 0 0;\n    line-height: normal;\n    color: var(--color-label);\n    text-transform: lowercase;\n  }\n\n  .clamp {\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 1;\n    box-orient: vertical;\n    display: -webkit-box;\n    line-clamp: 1;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n"],Object.defineProperty?Object.defineProperty(x,"raw",{value:g}):x.raw=g,N=x));const w=a.memo((function(e){var n,t=e.className,o=void 0===t?"":t,l=e.members,u=e.ownAccounts,d=e.params,m=e.poolId,h=(0,i.$)().t,f=(0,b.Z)(m),x=(0,c.O)(!1),g=x[0],w=x[1],N=(0,a.useCallback)((function(){return l.map((function(e,n){var t=e.accountId,a=e.member;return(0,r.jsx)(s.ax,{balance:a.points,value:t,withBalance:!0,withShrink:!0},"".concat(n,":").concat(t))}))}),[l]),k=(0,a.useCallback)((function(){return f&&f.nominating.map((function(e,n){return(0,r.jsx)(s.ax,{value:e,withShrink:!0},"".concat(n,":").concat(e))}))}),[f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(y,j({className:"".concat(o," isFirst isExpanded ").concat(g?"":"isLast")},{children:[(0,r.jsx)(s.iA.Column.Id,{value:m}),(0,r.jsx)("td",j({className:"start"},{children:(0,r.jsx)("div",j({className:"".concat(g?"":"clamp")},{children:f?f.metadata:(0,r.jsx)("span",j({className:"--tmp"},{children:"This is a pool placeholder"}))}))})),(0,r.jsx)("td",j({className:"number media--1100"},{children:f?f.bonded.state.type:(0,r.jsx)("span",j({className:"--tmp"},{children:"Destroying"}))})),(0,r.jsx)(s.iA.Column.Balance,{value:null==f?void 0:f.bonded.points,withLoading:!0}),(0,r.jsx)("td",j({className:"number media--1400"},{children:f&&!f.rewardClaimable.isZero()&&(0,r.jsx)(p.Z,{value:f.rewardClaimable})})),(0,r.jsx)("td",j({className:"number"},{children:f&&0!==f.nominating.length&&(0,r.jsx)(s.n0,{className:"media--1300",empty:h("No nominees"),renderChildren:k,summary:h("Nominees ({{count}})",{replace:{count:f.nominating.length}})})})),(0,r.jsx)("td",j({className:"number"},{children:l&&0!==l.length&&(0,r.jsx)(s.n0,{className:"media--1200",empty:h("No members"),renderChildren:N,summary:h("Members ({{count}})",{replace:{count:l.length}})})})),(0,r.jsx)("td",j({className:"button"},{children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{isDisabled:!f.bonded.state.isOpen||!!d.maxMembersPerPool&&!f.bonded.memberCounter.ltn(d.maxMembersPerPool),ownAccounts:u,params:d,poolId:m}),(0,r.jsx)(s.Vh,{expanded:g,onClick:w})]}):(0,r.jsx)(s.$j,{noLabel:!0})}))]})),f&&g&&(0,r.jsxs)(y,j({className:"".concat(o," isExpanded isLast")},{children:[(0,r.jsxs)("td",j({colSpan:4},{children:[(0,r.jsxs)("div",j({className:"label-column-right"},{children:[(0,r.jsx)("div",j({className:"label"},{children:h("creator")})),(0,r.jsx)("div",j({className:"inline-balance"},{children:(0,r.jsx)(s.ax,{value:f.bonded.roles.depositor})}))]})),f.bonded.roles.root.isSome&&(0,r.jsxs)("div",j({className:"label-column-right"},{children:[(0,r.jsx)("div",j({className:"label"},{children:h("root")})),(0,r.jsx)("div",j({className:"inline-balance"},{children:(0,r.jsx)(s.ax,{value:f.bonded.roles.root.unwrap()})}))]})),f.bonded.roles.nominator.isSome&&(0,r.jsxs)("div",j({className:"label-column-right"},{children:[(0,r.jsx)("div",j({className:"label"},{children:h("nominator")})),(0,r.jsx)("div",j({className:"inline-balance"},{children:(0,r.jsx)(s.ax,{value:f.bonded.roles.nominator.unwrap()})}))]})),(null===(n=f.bonded.roles.stateToggler)||void 0===n?void 0:n.isSome)&&(0,r.jsxs)("div",j({className:"label-column-right"},{children:[(0,r.jsx)("div",j({className:"label"},{children:h("toggler")})),(0,r.jsx)("div",j({className:"inline-balance"},{children:(0,r.jsx)(s.ax,{value:f.bonded.roles.stateToggler.unwrap()})}))]}))]})),(0,r.jsxs)("td",j({colSpan:4},{children:[(0,r.jsxs)("div",j({className:"label-column-right"},{children:[(0,r.jsx)("div",j({className:"label"},{children:h("stash")})),(0,r.jsx)("div",j({className:"inline-balance"},{children:(0,r.jsx)(s.ax,{value:f.stashId})}))]})),(0,r.jsxs)("div",j({className:"label-column-right"},{children:[(0,r.jsx)("div",j({className:"label"},{children:h("rewards")})),(0,r.jsx)("div",j({className:"inline-balance"},{children:(0,r.jsx)(s.ax,{value:f.rewardId})}))]}))]}))]}))]})}));var N,k=t(51240),O=t(39824),C=t(9118),S=t(11677),I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)},P=[],A={transform:function(e){return e.reduce((function(e,n){var t=n[0].args[0],r=n[1];if(r.isSome){var a=r.unwrap(),s=a.poolId.toString();e[s]||(e[s]=[]),e[s].push({accountId:t.toString(),member:a})}return e}),{})}},M={transform:function(e){var n=e[0][0],t=e[1];return n.filter((function(e,n){return t[n].isSome})).map((function(e,n){return{accountId:e.toString(),member:t[n].unwrap()}}))},withParamsTransform:!0};function T(e){var n=[];return e.forEach((function(e){var t=e.event,r=t.data;if("Bonded"===t.method){var a=r,s=a[0];a[3].isTrue&&n.push(s)}})),{added:n,removed:[]}}const E=(0,S.e)("useMembers",(function(){var e=(0,l.h)().api,n=(0,a.useState)(),t=n[0],r=n[1],s=(0,k.t)(e.query.nominationPools.poolMembers,[],A),o=(0,O.N)([e.events.nominationPools.Bonded],T,P),i=(0,C.W7)(o&&0!==o.length&&e.query.nominationPools.poolMembers.multi,[o],M);return(0,a.useEffect)((function(){s&&r(s)}),[s]),(0,a.useEffect)((function(){i&&r((function(e){return e&&function(e,n){return n.reduce((function(e,n){var t=n.member.poolId.toString(),r=[];return e[t]&&e[t].forEach((function(e){e.accountId!==n.accountId&&r.push(e)})),r.push(n),e[t]=r,e}),I({},e))}(e,i)}))}),[i]),t}));var D=function(){return D=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},D.apply(this,arguments)};const q=a.memo((function(e){var n=e.className,t=e.ids,l=e.ownPools,c=e.params,u=(0,i.$)().t,d=E(),m=(0,a.useState)((function(){return l&&l.length?0:1})),p=m[0],f=m[1],v=(0,a.useMemo)((function(){return l&&(0,o.a)(l.map((function(e){var n=e.members;return Object.keys(n)})))}),[l]),x=(0,a.useMemo)((function(){return!t||!!c.maxPools&&t.length>c.maxPools}),[t,c]),g=(0,a.useMemo)((function(){return l&&t?p?t:t.filter((function(e){return l.some((function(n){var t=n.poolId;return e.eq(t)}))})):void 0}),[t,l,p]),b=(0,a.useMemo)((function(){return[[u("pools"),"start",2],[u("state"),"media--1100"],[u("points")],[u("claimable"),"media--1400"],[void 0,void 0,3]]}),[u]),j=(0,a.useRef)([{text:u("Own pools"),value:"mine"},{text:u("All pools"),value:"all"}]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.zx.Group,{children:[(0,r.jsx)(s.tX,{onChange:f,options:j.current,value:p}),(0,r.jsx)(h,{isDisabled:x,ownAccounts:v,params:c})]}),(0,r.jsx)(s.iA,D({className:n,empty:d&&g&&u("No available nomination pools"),emptySpinner:u("Retrieving nomination pools"),header:b},{children:d&&g&&g.map((function(e){return(0,r.jsx)(w,{members:d[e.toString()],ownAccounts:v,params:c,poolId:e},e.toString())}))}))]})}));var F=t(65968),V=t(14681),R=function(){return R=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},R.apply(this,arguments)};const _=a.memo((function(e){var n=e.className,t=e.params,a=t.maxMembers,o=t.maxMembersPerPool,l=t.maxPools,c=e.poolCount,u=(0,i.$)().t;return(0,r.jsxs)(s.Ty,R({className:n},{children:[(0,r.jsx)(s.Jy,R({label:u("pools")},{children:(0,F.h)(c)&&(0,r.jsxs)(r.Fragment,{children:[(0,V.u)(c),l>0&&(0,r.jsxs)(r.Fragment,{children:[" / ",(0,V.u)(l)]})]})})),(0,r.jsxs)("section",{children:[a>0&&(0,r.jsx)(s.Jy,R({label:u("max. members")},{children:(0,V.u)(a)})),o>0&&(0,r.jsx)(s.Jy,R({label:u("max. members / pool")},{children:(0,V.u)(o)}))]})]}))}));var B=t(65857),Z=t(54890),L=t(95292),H={defaultValue:{lastPoolId:L.nw,maxMembers:0,maxMembersPerPool:0,maxPools:0,nextPoolId:L.If},transform:function(e){var n=e[0],t=e[1],r=e[2],a=e[3],s=e[4],o=e[5],i=e[6];return{lastPoolId:n,maxMembers:t.unwrapOr(L.nw).toNumber(),maxMembersPerPool:r.unwrapOr(L.nw).toNumber(),maxPools:a.unwrapOr(L.nw).toNumber(),minCreateBond:s,minJoinBond:o,minMemberBond:o,minNominatorBond:i,nextPoolId:n.add(L.If)}}};const z=(0,S.e)("useParams",(function(){var e=(0,l.h)().api;return(0,Z.L)([e.query.nominationPools.lastPoolId,e.query.nominationPools.maxPoolMembers,e.query.nominationPools.maxPoolMembersPerPool,e.query.nominationPools.maxPools,e.query.nominationPools.minCreateBond,e.query.nominationPools.minJoinBond,e.query.staking.minNominatorBond],H)}));var W=t(12298),$={transform:function(e){return e.map((function(e){return e.args[0]})).sort((function(e,n){return e.cmp(n)}))}};function U(e){var n=[],t=[];return e.forEach((function(e){var r=e.event,a=r.data;"Created"===r.method?n.push(a[1]):t.push(a[0])})),{added:n,removed:t}}const J=(0,S.e)("usePoolIds",(function(){var e=(0,l.h)().api,n=(0,W.k)(e.query.nominationPools.bondedPools,[],$);return(0,O.N)([e.events.nominationPools.Created,e.events.nominationPools.Destroyed],U,n)}));var G=function(){return G=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},G.apply(this,arguments)};const Q=a.memo((function(e){var n=e.className,t=e.ownPools,a=J(),s=(0,B.Z)(),o=z();return(0,r.jsxs)("div",G({className:n},{children:[(0,r.jsx)(_,{params:o,poolCount:null==a?void 0:a.length}),(0,r.jsx)(q,{ids:a,ownPools:s||t,params:o})]}))}))},63985:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(2784),a=t(90778),s=t(9118);const o=(0,t(11677).e)("useAmountError",(function(e,n,t){var o=(0,a.h)().api,i=(0,s.W7)(!!e&&o.derive.balances.all,[e]);return(0,r.useMemo)((function(){return!n||n.isZero()||!t||t.gt(n)||!!i&&n.gt(i.availableBalance.sub(o.consts.balances.existentialDeposit))}),[o,n,i,t])}))},65857:(e,n,t)=>{t.d(n,{Z:()=>d});var r=t(2784),a=t(90778),s=t(34814),o=t(9118),i=t(11677),l=t(43002),c=function(){return c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},c.apply(this,arguments)},u={transform:function(e){for(var n=e[0][0],t=e[1],r=[],a=function(e){if(t[e].isSome){var a=t[e].unwrap(),s=r.find((function(e){return e.poolId.eq(a.poolId)}));s||(s={members:{},poolId:a.poolId},r.push(s)),s.members[n[e]]=a}},s=0;s<n.length;s++)a(s);return r},withParamsTransform:!0};const d=(0,i.e)("useOwnPools",(function(){var e,n=(0,a.h)().api,t=(0,s.x)().allAccounts,i=(0,o.W7)(null===(e=n.query.nominationPools)||void 0===e?void 0:e.poolMembers.multi,[t],u);return(0,r.useMemo)((function(){return i&&i.map((function(e){return c(c({},e),(0,l.i)(n,e.poolId))}))}),[n,i])}))},43002:(e,n,t)=>{t.d(n,{Z:()=>p,i:()=>h});var r=t(2784),a=t(90778),s=t(11677),o=t(64021),i=t(51330),l=t(57928),c=new Uint8Array(32),u=(0,o.d)("modl"),d={bitLength:32,isLe:!0};function m(e,n,t,r){return e.registry.createType("AccountId32",(0,i.e)(u,n,new Uint8Array([r]),(0,l.a)(t,d),c)).toString()}function h(e,n){var t=e.consts.nominationPools.palletId.toU8a();return{rewardId:m(e,t,n,1),stashId:m(e,t,n,0)}}const p=(0,s.e)("usePoolAccounts",(function(e){var n=(0,a.h)().api;return(0,r.useMemo)((function(){return h(n,e)}),[n,e])}))},19042:(e,n,t)=>{t.d(n,{Z:()=>m});var r=t(2784),a=t(90778),s=t(54890),o=t(11677),i=t(52107),l=t(95292),c=t(43002),u=function(){return u=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},u.apply(this,arguments)},d={defaultValue:null,transform:function(e){var n,t=e[0],r=e[1],a=e[2],s=e[3],o=e[4];return t.isSome&&a.isSome?{bonded:t.unwrap(),metadata:r.length?(n=r.isUtf8?r.toUtf8():r.toString(),n.replace(/[^\x20-\x7E]/g,"")):null,nominating:s.unwrapOr({targets:[]}).targets.map((function(e){return e.toString()})),reward:a.unwrap(),rewardClaimable:o.data.free}:null}};const m=(0,o.e)("usePoolInfo",(function(e){var n=(0,a.h)().api,t=(0,c.Z)(e),o=(0,s.L)([[n.query.nominationPools.bondedPools,e],[n.query.nominationPools.metadata,e],[n.query.nominationPools.rewardPools,e],[n.query.staking.nominators,t.stashId],[n.query.system.account,t.rewardId]],d);return(0,r.useMemo)((function(){return o&&u(u(u({},t),o),{rewardClaimable:(0,i.x)(l.nw,o.rewardClaimable.sub(n.consts.balances.existentialDeposit))})}),[n,o,t])}))},97473:(e,n,t)=>{t.d(n,{Z:()=>Ie});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(90778),l=t(54131),c=t(33661),u=t(75030),d=t(90760),m={useExposure:{},useHeartbeat:{}},h={useElectedValidators:{},usePoints:{},useValidatorsActive:{},useValidatorsAll:{},useValidatorsWaiting:{}};function p(e,n,t){var r;return(0,a.useEffect)((function(){t&&(m[e][n]={value:t})}),[n,e,t]),t||(null===(r=m[e][n])||void 0===r?void 0:r.value)}function f(e,n){var t;return(0,a.useEffect)((function(){n&&(h[e]={value:n})}),[e,n]),n||(null===(t=h[e])||void 0===t?void 0:t.value)}var v=t(9118),x=t(11677),g={transform:function(e){return e.isSome?e.unwrap().index:null}},b={transform:function(e){return e.unwrapOr(null)}};const j=(0,x.e)("useSessionInfo",(function(){var e=(0,i.h)().api,n=(0,v.W7)(e.query.staking.activeEra,void 0,g),t=(0,v.W7)(e.query.staking.currentEra,void 0,b),r=(0,v.W7)(e.query.session.currentIndex);return(0,a.useMemo)((function(){return{activeEra:n,currentEra:t,currentSession:r}}),[n,t,r])}));var y=t(27960),w=t(33403),N=t(34814),k=t(12298),O={transform:function(e){return e.map((function(e){return e.args[1].toString()}))}};const C=(0,x.e)("useElectedValidators",(function(e){var n=e.currentEra,t=(0,i.h)().api,r=(0,a.useMemo)((function(){return n&&[n]}),[n]);return f("useElectedValidators",(0,k.k)(r&&t.query.staking.erasStakers,r,O))}));function S(e,n){return e.isFavorite===n.isFavorite?e.isOwned===n.isOwned?e.isElected===n.isElected?0:e.isElected?-1:1:e.isOwned?-1:1:e.isFavorite?-1:1}const I=(0,x.e)("useTaggedValidators",(function(e,n,t){var r=(0,N.x)().allAccounts,s=C(n),o=(0,a.useMemo)((function(){return s&&t&&function(e,n){return e.map((function(e){var t=n.includes(e.stashId);return e.isElected!==t?(0,w.Z)({},e,{isElected:t}):e}))}(t,s)}),[s,t]);return(0,a.useMemo)((function(){return o&&function(e,n,t){return t.map((function(t){var r=n.includes(t.stashId),a=e.includes(t.stashId);return t.isFavorite!==r||t.isOwned!==a?(0,w.Z)({},t,{isFavorite:r,isOwned:a}):t})).sort(S)}(r,e,o)}),[r,e,o])}));var P={transform:function(e){return e.map((function(e,n){var t=e.toString();return{isElected:!1,isFavorite:!1,isOwned:!1,key:"".concat(t,":").concat(n),stashId:t,stashIndex:n}}))}},A={transform:function(e){return e.map((function(e){return e.toNumber()}))}};const M=(0,x.e)("useValidatorsActive",(function(e,n){var t,r=(0,i.h)().api,s=(0,v.W7)(r.query.session.validators,void 0,P),o=(0,v.W7)(null===(t=r.query.parasShared||r.query.shared)||void 0===t?void 0:t.activeValidatorIndices,void 0,A),l=(0,a.useMemo)((function(){return o&&s?s.map((function(e,n){return o.includes(n)?(0,w.Z)({isPara:!0},e):e})):s}),[o,s]);return f("useValidatorsActive",I(e,n,l))}));var T=t(47623),E=t(38894),D=t(58607),q=t(14681),F=t(48801),V=t.n(F),R={transform:function(e){var n=e.others,t=e.own,r=e.total;return{others:n.map((function(e){var n=e.value,t=e.who;return{value:n.unwrap(),who:t.toString()}})).sort((function(e,n){return n.value.cmp(e.value)})),own:t.unwrap(),total:r.unwrap()}}};const _=(0,x.e)("useExposure",(function(e,n){var t=e.stashId,r=n.activeEra,s=(0,i.h)().api,o=(0,a.useMemo)((function(){return r&&[r,t]}),[r,t]),l=(0,v.W7)(o&&s.query.staking.erasStakers,o,R),c=(0,v.W7)(o&&s.query.staking.erasStakersClipped,o,R),u=(0,a.useMemo)((function(){return l&&c&&(n=c,r=(e=l).others.filter((function(e){var t=e.who;return!n.others.find((function(e){return t===e.who}))})),r.length&&(t={others:r,total:r.reduce((function(e,n){var t=n.value;return e.iadd(t)}),new(V())(0))}),{clipped:n,exposure:e,waiting:t});var e,n,t,r}),[c,l]);return p("useExposure",t,u)}));var B=t(65968),Z=t(47538),L={},H={transform:function(e){return e.toNumber()}},z={transform:function(e){return e.isSome}};const W=(0,x.e)("useHeartbeat",(function(e,n){var t=e.stashId,r=e.stashIndex,s=n.currentSession,o=(0,i.h)().api,l=(0,a.useMemo)((function(){return-1===r?void 0:s&&{authoredBlocks:[s,t],receivedHeartbeats:[s,r]}}),[s,t,r]),c=(0,v.W7)(l&&o.query.imOnline.authoredBlocks,null==l?void 0:l.authoredBlocks,H),u=(0,v.W7)(l&&o.query.imOnline.receivedHeartbeats,null==l?void 0:l.receivedHeartbeats,z),d=(0,a.useMemo)((function(){return(0,B.h)(c)&&(0,Z.j)(u)&&{authoredBlocks:c,isOnline:!(!c&&!u)}}),[c,u]);return p("useHeartbeat",t,d)||L}));var $=function(){return $=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},$.apply(this,arguments)};const U=a.memo((function(e){var n=e.children,t=e.className,a=void 0===t?"":t;return e.isExpanded?(0,r.jsxs)("tr",$({className:"".concat(a," isExpanded isLast")},{children:[(0,r.jsx)("td",{}),(0,r.jsx)("td",{}),n,(0,r.jsx)("td",{})]})):null}));var J=function(){return J=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},J.apply(this,arguments)};const G=a.memo((function(e){var n=e.children,t=e.className,a=void 0===t?"":t,s=e.isExpanded;return(0,r.jsxs)("tr",J({className:"".concat(a," isExpanded ").concat(s?"":"isLast"," packedTop")},{children:[(0,r.jsx)("td",{}),n,(0,r.jsx)("td",{})]}))}));var Q,X,K=function(){return K=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},K.apply(this,arguments)},Y=o.zo.div(ne||(Q=["\n  .authoredBlocks {\n    vertical-align: top;\n    font-size: var(--font-percent-tiny);\n  }\n"],X=["\n  .authoredBlocks {\n    vertical-align: top;\n    font-size: var(--font-percent-tiny);\n  }\n"],Object.defineProperty?Object.defineProperty(Q,"raw",{value:X}):Q.raw=X,ne=Q));const ee=a.memo((function(e){var n=e.className,t=e.heartbeat,s=void 0===t?{}:t,i=s.authoredBlocks,l=s.isOnline,c=e.isChilled,u=e.nominators,d=e.validator,m=d.isElected,h=d.isPara,p=(0,N.x)().allAccounts,f=(0,a.useMemo)((function(){return u&&u.some((function(e){return p.includes(e)}))}),[p,u]),v=(0,r.jsx)(o.Ct,{className:"opaque",color:"gray"});return(0,r.jsxs)(Y,K({className:n},{children:[f?(0,r.jsx)(o.Ct,{color:"green",icon:"hand-paper"}):v,h?(0,r.jsx)(o.Ct,{color:"purple",icon:"vector-square"}):v,c?(0,r.jsx)(o.Ct,{color:"red",icon:"cancel"}):m?(0,r.jsx)(o.Ct,{color:"blue",icon:"chevron-right"}):v,l?i?(0,r.jsx)(o.Ct,{color:"green",info:(0,r.jsx)("span",K({className:"authoredBlocks"},{children:i}))}):(0,r.jsx)(o.Ct,{color:"green",icon:"envelope"}):v]}))}));var ne,te=function(){return te=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},te.apply(this,arguments)};const re=a.memo((function(e){var n=e.children,t=e.className,a=void 0===t?"":t,s=e.heartbeat,i=e.isExpanded,l=e.toggleExpanded,c=e.toggleFavorite,u=e.validator;return(0,r.jsxs)("tr",te({className:"".concat(a," isExpanded isFirst packedBottom")},{children:[(0,r.jsx)(o.iA.Column.Favorite,{address:u.stashId,isFavorite:u.isFavorite,toggle:c}),(0,r.jsx)("td",te({className:"statusInfo",rowSpan:2},{children:(0,r.jsx)(ee,{heartbeat:s,validator:u})})),(0,r.jsxs)("td",te({className:"address relative all"},{children:[(0,r.jsx)(o.N,{value:u.stashId}),n]})),(0,r.jsx)(o.iA.Column.Expand,{isExpanded:i,toggle:l})]}))}));var ae=function(){return ae=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ae.apply(this,arguments)};function se(e){var n=e.className,t=void 0===n?"":n;return(0,r.jsx)("td",{className:t})}const oe=a.memo((function(e){var n,t=e.className,s=void 0===t?"":t,i=e.points,l=e.sessionInfo,c=e.toggleFavorite,u=e.validator,d=(0,E.O)(),m=d[0],h=d[1],p=(0,a.useRef)({counter:0,points:0}),f=_(u,l),v=W(u,l),x=(0,a.useMemo)((function(){return i&&p.current.points!==i?(p.current.points=i,p.current.counter=(p.current.counter+1)%25,"greyAnim-".concat(p.current.counter)):""}),[i,p]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(re,ae({className:s,heartbeat:v,isExpanded:m,toggleExpanded:h,toggleFavorite:c,validator:u},{children:i&&(0,r.jsx)(o.Vp,{className:"".concat(x," absolute"),color:"lightgrey",label:(0,q.u)(i)})})),(0,r.jsx)(G,ae({className:s,isExpanded:m},{children:(0,r.jsx)(o.iA.Column.Balance,{className:"relative",label:(null==f?void 0:f.waiting)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"("}),(0,r.jsx)(D.Z,{value:f.waiting.total}),(0,r.jsxs)("span",{children:[", ",f.waiting.others.length,")"]})]}),value:null===(n=null==f?void 0:f.clipped)||void 0===n?void 0:n.total,withLoading:!0})})),(0,r.jsx)(U,ae({className:s,isExpanded:m},{children:(0,r.jsx)(se,{validator:u})}))]})}));var ie=function(){return ie=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ie.apply(this,arguments)};const le=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.legend,i=e.points,l=e.sessionInfo,c=e.toggleFavorite,u=e.validatorsActive,m=(0,d.$)().t,h=(0,T.q)(),p=(0,a.useRef)([[m("validators"),"start",4]]);return(0,r.jsx)(o.iA,ie({className:t,empty:h&&u&&m("No session validators found"),emptySpinner:m("Retrieving session validators"),header:p.current,isSplit:!0,legend:s},{children:h&&(null==u?void 0:u.map((function(e){return(0,r.jsx)(oe,{points:null==i?void 0:i[e.stashId],sessionInfo:l,toggleFavorite:c,validator:e},e.key)})))}))}));var ce=t(95292),ue={transform:function(e){return function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}([],e.individual.entries(),!0).filter((function(e){return e[1].gt(ce.nw)})).reduce((function(e,n){var t=n[0],r=n[1];return e[t.toString()]=r.toNumber(),e}),{})}};const de=(0,x.e)("usePoints",(function(e){var n=e.activeEra,t=(0,i.h)().api,r=(0,a.useMemo)((function(){return n&&[n]}),[n]);return f("usePoints",(0,v.W7)(r&&t.query.staking.erasRewardPoints,r,ue))}));var me=t(39824),he=[],pe={transform:function(e){return e.map((function(e){return e.args[0]}))}};function fe(e){var n=[],t=[];return e.forEach((function(e){var r=e.event,a=r.data[0];"Bonded"===r.method?n.push(a):t.push(a)})),{added:n,removed:t}}const ve=(0,x.e)("useValidatorsAll",(function(e,n){var t=(0,i.h)().api,r=(0,k.k)(t.query.staking.validators,he,pe),s=(0,me.N)([t.events.staking.Bonded],fe,r),o=(0,a.useMemo)((function(){return function(e){return e&&e.map((function(e){var n=e.toString();return{isElected:!1,isFavorite:!1,isOwned:!1,key:"".concat(n,"::-1"),stashId:n,stashIndex:-1}}))}(s)}),[s]);return f("useValidatorsAll",I(e,n,o))})),xe=(0,x.e)("useValidatorsWaiting",(function(e,n,t){var r=ve(e,n);return f("useValidatorsWaiting",(0,a.useMemo)((function(){return r&&t&&(e=t,r.filter((function(n){var t=n.stashId;return!e.some((function(e){return e.stashId===t}))})));var e}),[t,r]))}));var ge=function(){return ge=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ge.apply(this,arguments)};function be(e){var n=e.className,t=void 0===n?"":n;return(0,r.jsx)("td",{className:t})}const je=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.toggleFavorite,s=e.validator,o=(0,E.O)(),i=o[0],l=o[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(re,{className:t,isExpanded:i,toggleExpanded:l,toggleFavorite:a,validator:s}),(0,r.jsx)(G,ge({className:t,isExpanded:i},{children:(0,r.jsx)("td",{})})),(0,r.jsx)(U,ge({className:t,isExpanded:i},{children:(0,r.jsx)(be,{validator:s})}))]})}));var ye=function(){return ye=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ye.apply(this,arguments)};const we=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.favorites,i=e.legend,l=e.sessionInfo,c=e.toggleFavorite,u=e.validatorsActive,m=(0,d.$)().t,h=(0,T.q)(),p=xe(s,l,u),f=(0,a.useRef)([[m("waiting"),"start",4]]);return(0,r.jsx)(o.iA,ye({className:t,empty:h&&p&&m("No waiting validators found"),emptySpinner:m("Retrieving waiting validators"),header:f.current,isSplit:!0,legend:i},{children:h&&(null==p?void 0:p.map((function(e){return(0,r.jsx)(je,{toggleFavorite:c,validator:e},e.key)})))}))}));var Ne=function(){return Ne=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Ne.apply(this,arguments)},ke=o.zo.div(Ce||(Ce=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--Table table {\n    td.statusInfo {\n      padding: 0 0 0 0.5rem;\n      vertical-align: middle;\n\n      > div {\n        display: inline-block;\n        max-width: 3.6rem;\n        min-width: 3.6rem;\n\n        .ui--Badge {\n          margin: 0.125rem;\n\n          &.opaque {\n            opacity: var(--opacity-gray);\n          }\n        }\n      }\n\n      + td.address {\n        padding-left: 0.5rem;\n      }\n    }\n  }\n"],["\n  .ui--Table table {\n    td.statusInfo {\n      padding: 0 0 0 0.5rem;\n      vertical-align: middle;\n\n      > div {\n        display: inline-block;\n        max-width: 3.6rem;\n        min-width: 3.6rem;\n\n        .ui--Badge {\n          margin: 0.125rem;\n\n          &.opaque {\n            opacity: var(--opacity-gray);\n          }\n        }\n      }\n\n      + td.address {\n        padding-left: 0.5rem;\n      }\n    }\n  }\n"])));const Oe=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.favorites,i=e.isRelay,l=e.sessionInfo,c=e.toggleFavorite,u=(0,d.$)().t,m=(0,a.useState)(0),h=m[0],p=m[1],f=M(s,l),v=de(l),x=(0,a.useRef)([{text:u("Active"),value:"active"},{text:u("Waiting"),value:"waiting"}]),g=(0,r.jsx)(y.Z,{isRelay:i});return(0,r.jsxs)(ke,Ne({className:t},{children:[(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(o.tX,{onChange:p,options:x.current,value:h})}),0===h?(0,r.jsx)(le,{legend:g,points:v,sessionInfo:l,toggleFavorite:c,validatorsActive:f}):(0,r.jsx)(we,{favorites:s,legend:g,sessionInfo:l,toggleFavorite:c,validatorsActive:f})]}))}));var Ce,Se=function(){return Se=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Se.apply(this,arguments)};const Ie=a.memo((function(e){var n,t=e.basePath,p=(0,d.$)().t,f=(0,i.h)().api,v=(0,a.useRef)(function(e){return{bags:"".concat(e,"/bags"),payout:"".concat(e,"/payout"),pools:"".concat(e,"/pools"),query:["".concat(e,"/query/:value"),"".concat(e,"/query")],slashes:"".concat(e,"/slashes"),targets:"".concat(e,"/targets")}}(t));(0,a.useEffect)((function(){return function(){!function(){for(var e=0,n=Object.keys(m);e<n.length;e++){var t=n[e];m[t]={}}for(var r=0,a=Object.keys(h);r<a.length;r++)t=a[r],h[t]={}}()}}),[]);var x=(0,l.r)("staking:favorites"),g=x[0],b=x[1],y=j(),w=(0,a.useMemo)((function(){var e;return!!(null===(e=f.query.parasShared||f.query.shared)||void 0===e?void 0:e.activeValidatorIndices)}),[f]),N=(0,a.useRef)([{isRoot:!0,name:"sign",text:p("Validators")},(0,c.m)(null===(n=f.query.nominationPools)||void 0===n?void 0:n.minCreateBond)&&{name:"pools",text:p("Pools")}]);return(0,r.jsxs)("main",Se({className:"staking--App"},{children:[(0,r.jsx)(o.mQ,{basePath:t,items:N.current}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,Se({path:v.current.pools},{children:(0,r.jsx)(u.Z,{})})),(0,r.jsx)(s.AW,Se({path:t},{children:(0,r.jsx)(Oe,{favorites:g,isRelay:w,sessionInfo:y,toggleFavorite:b})}))]})]}))}))},90760:(e,n,t)=>{t.d(n,{$:()=>a});var r=t(61349);function a(){return(0,r.$G)("app-staking")}},46717:(e,n,t)=>{t.d(n,{Z:()=>te});var r=t(52322),a=t(2784),s=t(24732),o=t(69356),i=t(90778),l=t(83488),c=t(44055),u=t(12782),d=t(48358),m=t(84789),h=t(56623),p=t(55858),f=function(){return f=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},f.apply(this,arguments)},v=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},x=[];function g(e,n){if(e){var t=n;return"const ".concat(t.section,".").concat(t.method)}var r=n;if((0,d.U)(r)){var a=(0,m.o)(r)[1];return 58===a[0]?(0,h.z)(a):(0,p.c)(a)}return"".concat(r.creator.section,".").concat(r.creator.method)}function b(e,n){var t=n.meta;return(0,c.I)(e.lookup,t.type)}function j(e,n){var t=n.creator.meta,r=t.modifier,a=t.type,s=(0,u.PL)(e,a);return r.isOptional?"Option<".concat(s,">"):s}function y(e,n){var t=n,a=t.blockHash,s=t.id,i=t.isConst,c=t.key,u=t.params,m=void 0===u?[]:u;if(!x[s]){var h,p=void 0;if(i){var f=c,g=f.method,y=f.section;p=(0,o.withCallDiv)("consts.".concat(y,".").concat(g),{withIndicator:!0}),h=b(e,c)}else{if((0,d.U)(c))p=(0,o.withCallDiv)("rpc.state.subscribeStorage",{paramName:"params",paramValid:!0,params:[[c]],transform:function(e){return e[0]},withIndicator:!0});else{var w=m.map((function(e){return e.value})),N=c.creator.meta.type,k=N.isPlain?0:N.asMap.hashers.length,O=w.length!==k;p=(0,o.withCallDiv)("subscribe",{paramName:"params",paramValid:!0,params:v(O?[c.entries]:a?[c.at,a]:[c],w,!0),withIndicator:!0})}h=c.creator&&c.creator.meta?j(e,c):"Raw"}var C={className:"ui--output"},S=p((function(e){return(0,r.jsx)("pre",{children:(0,l.Z)(h,e)})}),C);x[n.id]=function(e,n,t,a){return{Component:n,refresh:function(){return a((function(n){return(0,r.jsx)("pre",{children:(0,l.Z)(e,n)})}),t)},render:function(e){return a(e,t)}}}(h,S,C,p)}return x[s]}var w,N,k=s.zo.div(C||(w=["\n  margin-bottom: 0.25em;\n\n  label {\n    text-transform: none !important;\n  }\n\n  .ui.disabled.dropdown.selection {\n    color: #aaa;\n    opacity: 1;\n  }\n\n  .ui--IdentityIcon {\n    margin: -10px 0;\n    vertical-align: middle;\n  }\n\n  pre {\n    margin: 0;\n\n    .ui--Param-text {\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n\n  .storage--actionrow-buttons {\n    margin-top: -0.25rem; /* offset parent spacing for buttons */\n  }\n"],N=["\n  margin-bottom: 0.25em;\n\n  label {\n    text-transform: none !important;\n  }\n\n  .ui.disabled.dropdown.selection {\n    color: #aaa;\n    opacity: 1;\n  }\n\n  .ui--IdentityIcon {\n    margin: -10px 0;\n    vertical-align: middle;\n  }\n\n  pre {\n    margin: 0;\n\n    .ui--Param-text {\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n\n  .storage--actionrow-buttons {\n    margin-top: -0.25rem; /* offset parent spacing for buttons */\n  }\n"],Object.defineProperty?Object.defineProperty(w,"raw",{value:N}):w.raw=N,C=w));const O=a.memo((function(e){var n=e.className,t=void 0===n?"":n,o=e.onRemove,l=e.value,c=(0,i.h)().api,u=(0,a.useMemo)((function(){return[y(c.registry,l),g(l.isConst,l.key),l.isConst?b(c.registry,l.key):(0,d.U)(l.key)?"Raw":j(c.registry,l.key)]}),[c,l]),m=u[0].Component,h=u[1],p=u[2],v=(0,a.useCallback)((function(){delete x[l.id],o(l.id)}),[o,l]);return m?(0,r.jsxs)(k,f({className:"".concat(t," storage--Query storage--actionrow")},{children:[(0,r.jsx)("div",f({className:"storage--actionrow-value"},{children:(0,r.jsx)(s.jN,f({label:(0,r.jsxs)("div",f({className:"storage--actionrow-label"},{children:[h,": ",p]}))},{children:(0,r.jsx)(m,{})}))})),(0,r.jsx)("div",f({className:"storage--actionrow-buttons"},{children:(0,r.jsx)(s.zx,{icon:"times",onClick:v},"close")}))]})):null}));var C,S=function(){return S=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},S.apply(this,arguments)};const I=a.memo((function(e){var n=e.onRemove,t=e.value;return t&&t.length?(0,r.jsx)("section",S({className:"storage--Queries"},{children:t.map((function(e){return(0,r.jsx)(O,{onRemove:n,value:e},e.id)}))})):null}));var P=t(7267),A=t(61349);function M(){return(0,A.$G)("app-storage")}var T=function(){return T=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},T.apply(this,arguments)};const E=a.memo((function(e){var n=e.onAdd,t=M().t,o=(0,i.h)().api,l=(0,a.useState)((function(){var e=Object.keys(o.consts)[0],n=Object.keys(o.consts[e])[0];return{meta:o.consts[e][n].meta,method:n,section:e}}))[0],c=(0,a.useState)(l),u=c[0],d=c[1],m=(0,a.useCallback)((function(){return n({isConst:!0,key:u})}),[n,u]);return(0,r.jsxs)("section",T({className:"storage--actionrow"},{children:[(0,r.jsx)("div",T({className:"storage--actionrow-value"},{children:(0,r.jsx)(s.eV,{defaultValue:l,label:t("selected constant query"),onChange:d})})),(0,r.jsx)("div",T({className:"storage--actionrow-buttons"},{children:(0,r.jsx)(s.zx,{icon:"plus",onClick:m})}))]}))}));var D=t(87418),q=t(6046),F=t(23601),V=t(1346),R=t(17751),_=t(74076),B=function(){return B=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},B.apply(this,arguments)};function Z(e,n){var t=e.creator.meta.type;return n.reduce((function(e,n){return e&&!(0,V.o)(n)&&!(0,V.o)(n.value)&&n.isValid}),n.length===(t.isPlain?0:t.asMap.hashers.length))}function L(e,n,t){var r=[];if(n.isMap){var a=n.asMap,s=a.hashers,o=a.key;r=1===s.length?[(0,c.I)(e.lookup,o)]:e.lookup.getSiType(o).def.asTuple.map((function(n){return(0,c.I)(e.lookup,n)}))}return r.map((function(e,n){var a;return t&&n===r.length-1?(a=(0,q.s)("Option<".concat(e,">"))).withOptionActive=!0:a=(0,q.s)(e),{name:void 0,type:a}}))}function H(e,n){var t=n.filter((function(t,r){var a=t.value;return!e||r!==n.length-1||!(0,R.F)(a)}));return[t,t.length===n.length]}var z=s.zo.section($||($=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .ui--Column:last-child .ui--Labelled {\n    padding-left: 0.5rem;\n\n    label {\n      left: 2.05rem; /* 3.55 - 1.5 (diff from padding above) */\n    }\n  }\n"],["\n  .ui--Column:last-child .ui--Labelled {\n    padding-left: 0.5rem;\n\n    label {\n      left: 2.05rem; /* 3.55 - 1.5 (diff from padding above) */\n    }\n  }\n"])));const W=a.memo((function(e){var n=e.className,t=void 0===n?"":n,o=e.onAdd,l=M().t,c=(0,i.h)().api,u=(0,a.useState)((function(){var e;return{defaultValues:void 0,isHeadKey:!0,isIterable:!1,key:(null===(e=c.query.timestamp)||void 0===e?void 0:e.now)||c.query.system.events,params:[]}})),d=u[0],h=d.defaultValues,f=d.isIterable,v=d.key,x=d.params,g=u[1],b=(0,a.useState)((function(){return{isValid:!0,values:[]}})),j=b[0],y=j.isValid,w=j.values,N=b[1],k=(0,a.useState)({blockHash:null,textHash:""}),O=k[0],C=O.blockHash,S=O.textHash,I=k[1],P=(0,a.useMemo)((function(){var e,n;return(null===(e=c.query.timestamp)||void 0===e?void 0:e.now)||(null===(n=c.query.system)||void 0===n?void 0:n.events)||c.query.substrate.changesTrieConfig}),[c]),A=(0,a.useMemo)((function(){var e,n;if(y)try{var t=H(f,w)[0].map((function(e){return e.value})),r=t.length!==(v.creator.meta.type.isPlain?0:v.creator.meta.type.asMap.hashers.length);return[r,r&&v.creator.iterKey?(e=v.creator).iterKey.apply(e,t).toHex():(0,p.c)((0,m.o)(v.creator.apply(v,t))[1]),r?null:(n=v.creator).inspect.apply(n,t)]}catch(e){}return[!1,"0x",null]}),[f,y,v,w]),T=A[0],E=A[1],q=A[2],V=(0,a.useCallback)((function(){var e=H(f,w),n=e[0],t=e[1];y&&o({blockHash:t?C:null,isConst:!1,key:v,params:n})}),[C,f,y,v,o,w]),R=(0,a.useCallback)((function(e){return I({blockHash:(0,_.vq)(e,256)?e:null,textHash:e})}),[]),W=(0,a.useCallback)((function(e){return N({isValid:Z(v,e),values:e})}),[v]),$=(0,a.useCallback)((function(e){g(function(e,n){var t=n.creator,r=t.meta.type,a=t.section,s=function(e,n){if(n.isPlain)return!0;var t=n.asMap,r=t.hashers,a=t.key;if(1===r.length)return e.lookup.getTypeDef(a).info!==F.u.Option;var s=e.lookup.getSiType(a).def.asTuple;return e.lookup.getTypeDef(s[s.length-1]).info!==F.u.Option}(e.registry,r);return{defaultValues:"session"===a&&r.isMap&&e.consts.session&&e.consts.session.dedupKeyPrefix?[{isValid:!0,value:e.consts.session.dedupKeyPrefix.toHex()}]:null,isIterable:s,key:n,params:L(e.registry,r,s)}}(c,e)),W([])}),[W,c]),U=(0,a.useMemo)((function(){return!!y&&H(f,w)[1]}),[f,y,w]),J=v.creator,G=J.method,Q=J.section;return(0,r.jsxs)(z,B({className:"".concat(t," storage--actionrow")},{children:[(0,r.jsxs)("div",B({className:"storage--actionrow-value"},{children:[(0,r.jsx)(s.nU,{defaultValue:P,label:l("selected state query"),onChange:$}),(0,r.jsx)(D.Z,{onChange:W,onEnter:V,params:x,values:h},"".concat(Q,".").concat(G,":params")),(0,r.jsx)(s.II,{isDisabled:!y||!U,isError:!!S&&!C,label:l("blockhash to query at"),onChange:R,placeholder:l("0x...")}),(0,r.jsxs)(s.P0,B({className:"keyColumar",isPadded:!1},{children:[(0,r.jsx)(s.P0.Column,{children:(0,r.jsx)(s.r_,{isDisabled:!0,label:l(T?"encoded partial key":"encoded storage key"),value:E,withCopy:!0})}),(0,r.jsx)(s.P0.Column,{children:(0,r.jsx)(s.R2,{inspect:q,label:l("encoded key details")})})]}))]})),(0,r.jsx)("div",B({className:"storage--actionrow-buttons"},{children:(0,r.jsx)(s.zx,{icon:"plus",isDisabled:!y,onClick:V})}))]}))}));var $,U=t(46610),J=t(88311),G=function(){return G=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},G.apply(this,arguments)};const Q=a.memo((function(e){var n=e.onAdd,t=M().t,o=(0,a.useState)((function(){return{isValid:!1,key:new Uint8Array([])}})),i=o[0],l=i.isValid,c=i.key,u=o[1],d=(0,a.useCallback)((function(){l&&n({isConst:!1,key:c})}),[l,c,n]),m=(0,a.useCallback)((function(e){var n=(0,U.Y)(e);u({isValid:0!==n.length,key:(0,J.N)(n)})}),[]);return(0,r.jsxs)("section",G({className:"storage--actionrow"},{children:[(0,r.jsx)("div",G({className:"storage--actionrow-value"},{children:(0,r.jsx)(s.II,{autoFocus:!0,label:t("hex-encoded storage key"),onChange:m,onEnter:d})})),(0,r.jsx)("div",G({className:"storage--actionrow-buttons"},{children:(0,r.jsx)(s.zx,{icon:"plus",isDisabled:!l,onClick:d})}))]}))}));var X=function(){return X=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},X.apply(this,arguments)},K=-1;const Y=a.memo((function(e){var n=e.basePath,t=e.onAdd,o=M().t,i=(0,a.useRef)([{isRoot:!0,name:"modules",text:o("Storage")},{name:"constants",text:o("Constants")},{name:"raw",text:o("Raw storage")}]),l=(0,a.useCallback)((function(e){return t(X(X({},e),{id:++K}))}),[t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.mQ,{basePath:n,items:i.current}),(0,r.jsxs)(P.rs,{children:[(0,r.jsx)(P.AW,X({path:"".concat(n,"/constants")},{children:(0,r.jsx)(E,{onAdd:l})})),(0,r.jsx)(P.AW,X({path:"".concat(n,"/raw")},{children:(0,r.jsx)(Q,{onAdd:l})})),(0,r.jsx)(P.AW,{children:(0,r.jsx)(W,{onAdd:l})})]})]})}));var ee=function(){return ee=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ee.apply(this,arguments)},ne=s.zo.main(re||(re=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .storage--actionrow {\n    align-items: flex-start;\n    display: flex;\n\n    .ui--Button {\n      margin: 0.25rem;\n    }\n\n    &.head {\n      flex: 1 1 100%;\n      margin: 0 auto;\n      max-width: 620px;\n    }\n  }\n\n  .storage--actionrow-value {\n    flex: 1;\n    min-width: 0;\n\n    .ui--output {\n      word-break: break-all;\n    }\n  }\n\n  .storage--actionrow-buttons {\n    flex: 0;\n    padding: 0.5rem 0.25rem;\n  }\n"],["\n  .storage--actionrow {\n    align-items: flex-start;\n    display: flex;\n\n    .ui--Button {\n      margin: 0.25rem;\n    }\n\n    &.head {\n      flex: 1 1 100%;\n      margin: 0 auto;\n      max-width: 620px;\n    }\n  }\n\n  .storage--actionrow-value {\n    flex: 1;\n    min-width: 0;\n\n    .ui--output {\n      word-break: break-all;\n    }\n  }\n\n  .storage--actionrow-buttons {\n    flex: 0;\n    padding: 0.5rem 0.25rem;\n  }\n"])));const te=a.memo((function(e){var n=e.basePath,t=e.className,s=void 0===t?"":t,o=(0,a.useState)([]),i=o[0],l=o[1],c=(0,a.useCallback)((function(e){return l((function(n){return function(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}([e],n,!0)}))}),[]),u=(0,a.useCallback)((function(e){return l((function(n){return n.filter((function(n){return n.id!==e}))}))}),[]);return(0,r.jsxs)(ne,ee({className:"".concat(s," storage--App")},{children:[(0,r.jsx)(Y,{basePath:n,onAdd:c}),(0,r.jsx)(I,{onRemove:u,value:i})]}))}));var re},54676:(e,n,t)=>{t.d(n,{Z:()=>O});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(74421),l=t(90778),c=t(61349);function u(){return(0,c.$G)("app-sudo")}var d,m,h=function(){return h=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},h.apply(this,arguments)},p=o.zo.section(v||(d=["\n  align-items: flex-end;\n  justify-content: center;\n\n  .summary {\n    text-align: center;\n  }\n\n  .sudoInputAddress {\n    margin: -0.25rem 0.5rem -0.25rem 0;\n  }\n\n  .sudoLabelled {\n    align-items: center;\n  }\n"],m=["\n  align-items: flex-end;\n  justify-content: center;\n\n  .summary {\n    text-align: center;\n  }\n\n  .sudoInputAddress {\n    margin: -0.25rem 0.5rem -0.25rem 0;\n  }\n\n  .sudoLabelled {\n    align-items: center;\n  }\n"],Object.defineProperty?Object.defineProperty(d,"raw",{value:m}):d.raw=m,v=d));const f=a.memo((function(e){var n=e.allAccounts,t=e.className,s=void 0===t?"":t,i=e.isMine,c=e.sudoKey,d=u().t,m=(0,l.h)().api,f=(0,a.useState)(null),v=f[0],x=f[1];(0,a.useEffect)((function(){c&&!v&&x(c)}),[v,c]);var g=i&&!!v&&v!==c&&n.some((function(e){return e===v}));return(0,r.jsxs)("section",{children:[(0,r.jsx)(p,h({className:"".concat(s," ui--row")},{children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.rp,{className:"sudoInputAddress",isInput:!0,label:d("sudo key"),onChange:x,type:"all",value:v}),(0,r.jsx)(o.cA,{accountId:c,icon:"sign-in-alt",isDisabled:!i||c===v,label:d("Reassign"),params:[v],tx:m.tx.sudo.setKey})]}):(0,r.jsx)(o.jN,h({className:"ui--Dropdown sudoLabelled",label:d("sudo key"),withLabel:!0},{children:(0,r.jsx)(o.ax,{value:c})}))})),g&&(0,r.jsx)("article",h({className:"warning padded"},{children:(0,r.jsx)("div",{children:d("You will no longer have sudo access")})}))]})}));var v,x=t(38894),g=t(95292),b=t(33661),j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},j.apply(this,arguments)},y=o.zo.section(N||(N=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .sudoToggle {\n    width: 100%;\n    text-align: right;\n  }\n"],["\n  .sudoToggle {\n    width: 100%;\n    text-align: right;\n  }\n"])));const w=a.memo((function(e){var n=e.className,t=e.isMine,s=e.sudoKey,i=u().t,c=(0,l.h)(),d=c.api,m=c.apiDefaultTxSudo,h=(0,x.O)(),p=h[0],f=h[1],v=(0,a.useState)(null),w=v[0],N=v[1],k=(0,a.useState)(g.nw),O=k[0],C=k[1],S=(0,a.useCallback)((function(e){return void 0===e&&(e=null),N((function(){return e}))}),[]),I=(0,a.useCallback)((function(e){return void 0===e&&(e=g.nw),C(e)}),[]);return t?(0,r.jsxs)(y,j({className:n},{children:[(0,r.jsx)(o.n6,{defaultValue:m,label:i("submit the following change"),onChange:S}),(0,b.m)(d.tx.sudo.sudoUncheckedWeight)&&(0,r.jsx)(o.Rn,{isDisabled:!p,isError:O.eq(g.nw),isZeroable:!1,label:i("unchecked weight for this call"),labelExtra:(0,r.jsx)(o.ZD,{className:"sudoToggle",label:i("with weight override"),onChange:f,value:p}),onChange:I,value:O}),(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(o.cA,{accountId:s,icon:"sign-in-alt",isDisabled:!w||!!p&&O.eq(g.nw),label:i(p?"Submit Sudo Unchecked":"Submit Sudo"),params:p?[w,O]:[w],tx:p?d.tx.sudo.sudoUncheckedWeight:d.tx.sudo.sudo})})]})):(0,r.jsx)("article",j({className:"error padded"},{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(o.JO,{icon:"ban"}),i("You do not have access to the current sudo key")]})}))}));var N,k=function(){return k=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},k.apply(this,arguments)};const O=a.memo((function(e){var n=e.basePath,t=u().t,l=(0,i.p)(),c=l.allAccounts,d=l.hasSudoKey,m=l.sudoKey,h=(0,a.useRef)([{isRoot:!0,name:"index",text:t("Sudo access")},{name:"key",text:t("Set sudo key")}]);return(0,r.jsxs)("main",{children:[(0,r.jsx)(o.mQ,{basePath:n,items:h.current}),d?(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,k({path:"".concat(n,"/key")},{children:(0,r.jsx)(f,{allAccounts:c,isMine:d,sudoKey:m})})),(0,r.jsx)(s.AW,{children:(0,r.jsx)(w,{isMine:d,sudoKey:m})})]}):(0,r.jsx)("article",k({className:"error padded"},{children:(0,r.jsxs)("div",{children:[(0,r.jsx)(o.JO,{icon:"ban"}),t("You do not have access to the current sudo key")]})}))]})}))},95499:(e,n,t)=>{t.d(n,{Z:()=>w});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(90778),l=t(70563),c=t(9118),u=t(51985),d=function(){return d=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},d.apply(this,arguments)};const m=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.members,i=e.prime,l=(0,u.$)().t,c=(0,a.useRef)([[l("members"),"start",3]]);return(0,r.jsx)(o.iA,d({className:t,empty:s&&l("No members found"),header:c.current,isSplit:!0},{children:null==s?void 0:s.map((function(e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",d({className:"address"},{children:(0,r.jsx)(o.N,{value:e})})),(0,r.jsx)("td",{children:i===e&&(0,r.jsx)(o.Vp,{color:"green",hover:l("Committee prime member, default voting"),label:l("prime member")})}),(0,r.jsx)("td",d({className:"all"},{children:" "}))]},e)}))}))}));var h=t(14681),p=function(){return p=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},p.apply(this,arguments)};const f=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.members,s=e.proposalHashes,l=e.type,d=(0,u.$)().t,m=(0,i.h)().api,f=(0,c.W7)(m.derive[l].proposalCount);return(0,r.jsxs)(o.Ty,p({className:t},{children:[(0,r.jsx)(o.Jy,p({label:d("members")},{children:(0,h.u)(a.length)})),(0,r.jsxs)("section",{children:[(0,r.jsx)(o.Jy,p({label:d("proposals")},{children:s?(0,h.u)(null==s?void 0:s.length):(0,r.jsx)("span",p({className:"--tmp"},{children:"99"}))})),(0,r.jsx)(o.Jy,p({label:d("total")},{children:f?(0,h.u)(f):(0,r.jsx)("span",p({className:"--tmp"},{children:"99"}))}))]})]}))}));var v=function(){return v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},v.apply(this,arguments)};const x=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.isMember,s=e.members,o=e.prime,i=e.proposalHashes,l=e.type;return(0,r.jsxs)("div",v({className:t},{children:[(0,r.jsx)(f,{isMember:a,members:s,proposalHashes:i,type:l}),(0,r.jsx)(m,{members:s,prime:o})]}))}));var g=t(92858),b=function(){return b=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},b.apply(this,arguments)},j=[],y=["proposals"];const w=a.memo((function(e){var n=e.basePath,t=e.className,d=e.type,m=(0,u.$)().t,h=(0,i.h)().api,p=(0,l.V)(d),f=p.isMember,v=p.members,w=p.prime,N=(0,c.W7)(h.derive[d].hasProposals),k=(0,c.W7)(h.derive[d].proposalHashes),O=(0,a.useMemo)((function(){return[{isRoot:!0,name:"overview",text:m("Overview")},{name:"proposals",text:m("Proposals ({{count}})",{replace:{count:k&&k.length||0}})}]}),[k,m]);return(0,r.jsxs)("main",b({className:t},{children:[(0,r.jsx)(o.mQ,{basePath:n,hidden:N?j:y,items:O}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,b({path:"".concat(n,"/proposals")},{children:(0,r.jsx)(g.Z,{isMember:f,members:v,prime:w,proposalHashes:k,type:d})})),(0,r.jsx)(s.AW,b({path:n},{children:(0,r.jsx)(x,{isMember:f,members:v,prime:w,proposalHashes:k,type:d})}))]})]}))}))},92858:(e,n,t)=>{t.d(n,{Z:()=>P});var r=t(52322),a=t(2784),s=t(24732),o=t(51985),i=t(92914),l=t(90778),c=t(9118),u=t(87660),d=t(81190),m=t(65874),h=t(14681),p=t(38894),f=t(56949),v=function(){return v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},v.apply(this,arguments)};const x=a.memo((function(e){var n=e.hasFailed,t=e.hash,i=e.idNumber,c=e.proposal,u=e.type,m=(0,o.$)().t,h=(0,l.h)().api,x=(0,p.O)(),g=x[0],b=x[1],j=(0,a.useState)(null),y=j[0],w=j[1],N=(0,f.h7)(c),k=N.encodedCallLength,O=N.weight,C=(0,d.m)(u);return C?(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsxs)(s.u_,v({header:m("Close proposal"),onClose:b,size:"large"},{children:[(0,r.jsxs)(s.u_.Content,{children:[(0,r.jsx)(s.u_.Columns,v({hint:m("The proposal that will be affected. Once closed for the current voting round, it would need to be re-submitted for a subsequent voting round.")},{children:(0,r.jsx)(s.lV,{idNumber:i,proposal:c})})),(0,r.jsx)(s.u_.Columns,v({hint:m("The committee account that will apply the close for the current round.")},{children:(0,r.jsx)(s.rp,{label:m("close from account"),onChange:w,type:"account"})}))]}),(0,r.jsx)(s.u_.Actions,{children:(0,r.jsx)(s.cA,{accountId:y,isDisabled:!n&&!k,onStart:b,params:4===h.tx[C].close.meta.args.length?n?[t,i,0,0]:[t,i,O,k]:[t,i],tx:h.tx[C].closeOperational||h.tx[C].close})})]})),(0,r.jsx)(s.zx,{icon:"times",label:m("Close"),onClick:b})]}):null}));var g=t(34814),b=function(){return b=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},b.apply(this,arguments)};const j=a.memo((function(e){var n=e.hash,t=e.isMember,i=e.members,c=e.prime,u=e.proposalId,m=e.type,h=(0,o.$)().t,f=(0,l.h)().api,v=(0,g.x)().hasAccounts,x=(0,a.useState)(null),j=x[0],y=x[1],w=(0,p.O)(),N=w[0],k=w[1],O=(0,d.m)(m);return O&&v?(0,r.jsxs)(r.Fragment,{children:[N&&(0,r.jsxs)(s.u_,b({header:h("Vote on proposal"),onClose:k,size:"small"},{children:[(0,r.jsxs)(s.u_.Content,{children:[(0,r.jsx)(s.UE,{filter:i,onChange:y}),j===c&&(0,r.jsx)(s.Pd,{content:h("You are voting with this collective's prime account. The vote will be the default outcome in case of any abstentions.")})]}),(0,r.jsxs)(s.u_.Actions,{children:[(0,r.jsx)(s.cA,{accountId:j,icon:"ban",label:h("Vote Nay"),onStart:k,params:[n,u,!1],tx:f.tx[O].vote}),(0,r.jsx)(s.cA,{accountId:j,icon:"check",label:h("Vote Aye"),onStart:k,params:[n,u,!0],tx:f.tx[O].vote})]})]})),(0,r.jsx)(s.zx,{icon:"check",isDisabled:!t,label:h("Vote"),onClick:k})]}):null}));var y=function(){return y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},y.apply(this,arguments)};const w=a.memo((function(e){var n=e.className,t=void 0===n?"":n,a=e.imageHash,o=e.isMember,p=e.members,f=e.prime,v=e.type,g=(0,l.h)().api,b=(0,c.W7)(g.derive[v].proposal,[a]),w=(0,u.I)(null==b?void 0:b.votes,p.length,v),N=w.hasFailed,k=w.isCloseable,O=w.isVoteable,C=w.remainingBlocks;if(!(0,d.m)(v)||!b||!b.votes)return null;var S=b.votes,I=S.ayes,P=S.end,A=S.index,M=S.nays,T=S.threshold;return(0,r.jsxs)("tr",y({className:t},{children:[(0,r.jsx)(s.iA.Column.Id,{value:A}),(0,r.jsx)(i.Z,{imageHash:a,isCollective:!0,proposal:b.proposal}),(0,r.jsxs)("td",y({className:"number"},{children:[(0,h.u)(I.length),"/",(0,h.u)(T)]})),(0,r.jsx)("td",y({className:"number together"},{children:C&&P&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{value:C}),"#",(0,h.u)(P)]})})),(0,r.jsx)("td",y({className:"address"},{children:I.map((function(e,n){return(0,r.jsx)(s.ax,{value:e,withBalance:!1},"".concat(n,":").concat(e.toHex()))}))})),(0,r.jsx)("td",y({className:"address"},{children:M.map((function(e,n){return(0,r.jsx)(s.ax,{value:e,withBalance:!1},"".concat(n,":").concat(e.toHex()))}))})),(0,r.jsxs)("td",y({className:"button"},{children:[O&&!k&&(0,r.jsx)(j,{hash:a,isMember:o,members:p,prime:f,proposalId:A,type:v}),k&&(0,r.jsx)(x,{hasFailed:N,hash:a,idNumber:A,proposal:b.proposal,type:v})]}))]}))}));var N=t(65121),k=t(48801),O=t.n(k),C=function(){return C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)};const S=a.memo((function(e){var n=e.defaultThreshold,t=void 0===n?.5:n,i=e.defaultValue,c=e.filter,u=e.isMember,m=e.members,h=e.type,p=(0,o.$)().t,f=(0,l.h)(),v=f.api,x=f.apiDefaultTxSudo,g=(0,N.d)(),b=g.isOpen,j=g.onClose,y=g.onOpen,w=(0,a.useState)(null),k=w[0],S=w[1],I=(0,a.useState)({proposalLength:0}),P=I[0],A=P.proposal,M=P.proposalLength,T=I[1],E=(0,a.useState)([new(O())(Math.min(m.length,m.length*t+1)),!0]),D=E[0],q=D[0],F=D[1],V=E[1],R=(0,d.m)(h),_=(0,a.useCallback)((function(e){return!!e&&!e.isZero()&&e.lten(m.length)}),[m]),B=(0,a.useCallback)((function(e){return T({proposal:e,proposalLength:(null==e?void 0:e.length)||0})}),[]),Z=(0,a.useCallback)((function(e){return V([e||null,_(e)])}),[_]);return R?(0,r.jsxs)(r.Fragment,{children:[b&&(0,r.jsxs)(s.u_,C({header:p("Propose a committee motion"),onClose:j},{children:[(0,r.jsxs)(s.u_.Content,{children:[(0,r.jsx)(s.rp,{filter:m,label:p("propose from account"),onChange:S,type:"account",withLabel:!0}),(0,r.jsx)(s.Rn,{className:"medium",isError:!F,label:p("threshold"),onChange:Z,placeholder:p("Positive number between 1 and {{count}}",{replace:{count:m.length}}),value:q||void 0}),(0,r.jsx)(s.n6,{defaultValue:i||x,filter:c,label:p("proposal"),onChange:B})]}),(0,r.jsx)(s.u_.Actions,{children:(0,r.jsx)(s.cA,{accountId:k,isDisabled:!F||!A,onStart:j,params:3===v.tx[R].propose.meta.args.length?[q,A,M]:[q,A],tx:v.tx[R].propose})})]})),(0,r.jsx)(s.zx,{icon:"plus",isDisabled:!u,label:p("Submit proposal"),onClick:y})]}):null}));var I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)};const P=a.memo((function(e){var n=e.className,t=void 0===n?"":n,i=e.defaultProposal,l=e.defaultThreshold,c=e.filter,u=e.isMember,d=e.members,m=e.prime,h=e.proposalHashes,p=e.type,f=(0,o.$)().t,v=(0,a.useRef)([[f("proposals"),"start",2],[f("threshold")],[f("voting end")],[f("aye"),"address"],[f("nay"),"address"],[]]);return(0,r.jsxs)("div",I({className:t},{children:[(0,r.jsx)(s.zx.Group,{children:(0,r.jsx)(S,{defaultThreshold:l,defaultValue:i,filter:c,isMember:u,members:d,type:p})}),(0,r.jsx)(s.iA,I({empty:h&&f("No committee proposals"),header:v.current},{children:null==h?void 0:h.map((function(e){return(0,r.jsx)(w,{imageHash:e,isMember:u,members:d,prime:m,type:p},e.toHex())}))}))]}))}))},75509:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(52322),a=t(2784),s=t(95499);const o=a.memo((function(e){var n=e.basePath,t=e.className;return(0,r.jsx)(s.Z,{basePath:n,className:t,type:"technicalCommittee"})}))},51985:(e,n,t)=>{t.d(n,{$:()=>a});var r=t(61349);function a(){return(0,r.$G)("app-tech-comm")}},87340:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(90778),a=t(9118),s=t(11677),o={transform:function(e){return e.length}};const i=(0,s.e)("useCounter",(function(){var e,n=(0,r.h)(),t=n.api,s=n.isApiReady;return(0,a.W7)(s&&(null===(e=t.derive.technicalCommittee)||void 0===e?void 0:e.proposals),void 0,o)||0}))},27613:(e,n,t)=>{t.d(n,{Z:()=>ue});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(90778),l=t(70563),c=t(33661),u=t(9118),d=t(38894),m=t(95292),h=t(43814),p=function(){return p=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},p.apply(this,arguments)};const f=a.memo((function(e){var n=e.className,t=(0,h.$)().t,s=(0,i.h)().api,l=(0,a.useState)(null),c=l[0],u=l[1],f=(0,a.useState)(null),v=f[0],x=f[1],g=(0,d.O)(),b=g[0],j=g[1],y=(0,a.useState)(),w=y[0],N=y[1],k=null==w?void 0:w.gtn(0),O=(0,a.useMemo)((function(){var e;return[s.consts.treasury.proposalBondMinimum.toString(),(null===(e=s.consts.treasury.proposalBondMaximum)||void 0===e?void 0:e.isSome)?s.consts.treasury.proposalBondMaximum.unwrap().toString():null,"".concat(s.consts.treasury.proposalBond.mul(m.S8).div(m.uy).toNumber().toFixed(2),"%")]}),[s]),C=O[0],S=O[1],I=O[2];return(0,r.jsxs)(r.Fragment,{children:[b&&(0,r.jsxs)(o.u_,p({className:n,header:t("Submit treasury proposal"),onClose:j,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,p({hint:t("This account will make the proposal and be responsible for the bond.")},{children:(0,r.jsx)(o.rp,{label:t("submit with account"),onChange:u,type:"account",withLabel:!0})})),(0,r.jsx)(o.u_.Columns,p({hint:t("The beneficiary will receive the full amount if the proposal passes.")},{children:(0,r.jsx)(o.rp,{label:t("beneficiary"),onChange:x,type:"allPlus"})})),(0,r.jsxs)(o.u_.Columns,p({hint:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:t("The value is the amount that is being asked for and that will be allocated to the beneficiary if the proposal is approved.")}),S?(0,r.jsx)("p",{children:t("Of the beneficiary amount, no less than the minimum bond amount and no more than maximum on-chain bond would need to be put up as collateral. This is calculated from {{bondPercentage}} of the requested amount.",{replace:{bondPercentage:I}})}):(0,r.jsx)("p",{children:t("Of the beneficiary amount, no less than the minimum bond amount would need to be put up as collateral. This is calculated from {{bondPercentage}} of the requested amount.",{replace:{bondPercentage:I}})})]})},{children:[(0,r.jsx)(o.H,{isError:!k,label:t("value"),onChange:N}),(0,r.jsx)(o.qG,p({label:t("proposal bond")},{children:I})),(0,r.jsx)(o.H,{defaultValue:C,isDisabled:!0,label:t("minimum bond")}),S&&(0,r.jsx)(o.H,{defaultValue:S,isDisabled:!0,label:t("maximum bond")}),(0,r.jsx)(o.Pd,{content:t("Be aware that once submitted the proposal will be put to a vote. If the proposal is rejected due to a lack of info, invalid requirements or non-benefit to the network as a whole, the full bond posted (as describe above) will be lost.")})]}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:c,icon:"plus",isDisabled:!c||!k,label:t("Submit proposal"),onStart:j,params:[w,v],tx:s.tx.treasury.proposeSpend})})]})),(0,r.jsx)(o.zx,{icon:"plus",label:t("Submit proposal"),onClick:j})]})}));var v=t(30943),x=t(81190),g=function(){return g=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},g.apply(this,arguments)};const b=a.memo((function(e){var n=e.id,t=e.isDisabled,s=e.members,l=(0,h.$)().t,c=(0,i.h)().api,u=(0,d.O)(),m=u[0],p=u[1],f=(0,a.useState)(null),b=f[0],j=f[1],y=(0,a.useState)("accept"),w=y[0],N=y[1],k=(0,a.useState)((function(){return{proposalLength:0}})),O=k[0],C=O.proposal,S=O.proposalLength,I=k[1],P=(0,x.m)("council"),A=Math.ceil(((null==s?void 0:s.length)||0)*(0,v.mo)(c)),M=(0,a.useRef)([{text:l("Acceptance proposal to council"),value:"accept"},{text:l("Rejection proposal to council"),value:"reject"}]);return(0,a.useEffect)((function(){var e="reject"===w?c.tx.treasury.rejectProposal(n):c.tx.treasury.approveProposal(n);I({proposal:e,proposalLength:e.length})}),[c,n,w]),P?(0,r.jsxs)(r.Fragment,{children:[m&&(0,r.jsxs)(o.u_,g({header:l("Send to council"),onClose:p,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,g({hint:l('The council member that is proposing this, submission equates to an "aye" vote.')},{children:(0,r.jsx)(o.rp,{filter:s,label:l("submit with council account"),onChange:j,type:"account",withLabel:!0})})),(0,r.jsx)(o.u_.Columns,g({hint:l("Proposal can either be to approve or reject this spend. Once approved, the change is applied by either removing the proposal or scheduling payout.")},{children:(0,r.jsx)(o.Lt,{label:l("council proposal type"),onChange:N,options:M.current,value:w})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:b,icon:"check",isDisabled:!b||!A,label:l("Send to council"),onStart:p,params:3===c.tx[P].propose.meta.args.length?[A,C,S]:[A,C],tx:c.tx[P].propose})})]})),(0,r.jsx)(o.zx,{icon:"step-forward",isDisabled:t,label:l("To council"),onClick:p})]}):null}));var j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},j.apply(this,arguments)};const y=a.memo((function(e){var n,t=e.className,s=void 0===t?"":t,l=e.isMember,u=e.members,m=e.proposal,p=m.council,f=m.id,v=m.proposal,x=e.withSend,g=(0,h.$)().t,y=(0,i.h)().api,w=(0,d.O)(!1),N=w[0],k=w[1],O=(0,c.m)(null===(n=y.tx.council)||void 0===n?void 0:n.propose),C=(0,a.useMemo)((function(){return!!p.map((function(e){var n=e.votes;return n?n.index.toNumber():-1})).filter((function(e){return-1!==e})).length}),[p]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",j({className:"".concat(s," isExpanded isFirst ").concat(N?"":"isLast")},{children:[(0,r.jsx)(o.iA.Column.Id,{value:f}),(0,r.jsx)("td",j({className:"address all"},{children:(0,r.jsx)(o.N,{value:v.beneficiary})})),(0,r.jsx)(o.iA.Column.Balance,{value:v.value}),(0,r.jsx)("td",j({className:"address"},{children:(0,r.jsx)(o.ax,{balance:v.bond,value:v.proposer,withBalance:!0})})),(0,r.jsx)("td",j({className:C?"middle":"button"},{children:O?C?(0,r.jsx)("a",j({href:"#/council/motions"},{children:g("Voting")})):x&&(0,r.jsx)(b,{id:f,isDisabled:!l,members:u}):null})),(0,r.jsx)(o.iA.Column.Expand,{isExpanded:N,toggle:k})]})),(0,r.jsxs)("tr",j({className:"".concat(s," ").concat(N?"isExpanded isLast":"isCollapsed"," packedTop")},{children:[(0,r.jsx)("td",{}),(0,r.jsx)("td",j({className:"columar",colSpan:4},{children:(0,r.jsx)(o.P0,j({is100:!0},{children:(0,r.jsx)(o.P0.Column,{children:(0,r.jsx)(o.NR,{data:f,type:"treasury",withTitle:!0})})}))})),(0,r.jsx)("td",{})]}))]})}));var w=function(){return w=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},w.apply(this,arguments)};const N=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.isApprovals,i=e.isMember,l=e.members,c=e.proposals,u=(0,h.$)().t,d=(0,a.useMemo)((function(){return[[u(s?"Approved":"Proposals"),"start",2],[],[u("proposer"),"address"],[],[]]}),[s,u]);return(0,r.jsx)(o.iA,w({className:t,empty:c&&u(s?"No approved proposals":"No pending proposals"),header:d},{children:null==c?void 0:c.map((function(e){return(0,r.jsx)(y,{isMember:i,members:l,proposal:e,withSend:!s},e.id.toString())}))}))}));var k=t(54383),O=t(68920),C=t(58607),S=t(14681),I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)};const P=a.memo((function(e){var n=e.approvalCount,t=e.proposalCount,s=(0,h.$)().t,l=(0,i.h)().api,c=(0,k.C)(),d=(0,u.W7)(l.query.treasury.proposalCount),p=(0,O._)(),f=p.burn,v=p.pendingBounties,x=p.pendingProposals,g=p.spendPeriod,b=p.value,j=(0,a.useMemo)((function(){return b&&b.sub(v).sub(x)}),[b,v,x]),y=!(!b||!j);return(0,r.jsxs)(o.Ty,{children:[(0,r.jsxs)("section",{children:[(0,r.jsx)(o.Jy,I({className:"media--1700",label:s("open")},{children:void 0===t?(0,r.jsx)("span",I({className:"--tmp"},{children:"99"})):(0,S.u)(t)})),(0,r.jsx)(o.Jy,I({className:"media--1600",label:s("approved")},{children:void 0===n?(0,r.jsx)("span",I({className:"--tmp"},{children:"99"})):(0,S.u)(n)})),(0,r.jsx)(o.Jy,I({className:"media--1400",label:s("total")},{children:void 0===d?(0,r.jsx)("span",I({className:"--tmp"},{children:"99"})):(0,S.u)(d)}))]}),(0,r.jsxs)("section",{children:[!x.isZero()&&(0,r.jsx)(o.Jy,I({className:"media--1100",label:s("approved")},{children:(0,r.jsx)(C.Z,{value:x,withSi:!0})})),!v.isZero()&&(0,r.jsx)(o.Jy,I({className:"media--1200",label:s("bounties")},{children:(0,r.jsx)(C.Z,{value:v,withSi:!0})})),(0,r.jsx)(o.Jy,I({className:"media--1300",label:s("next burn")},{children:(0,r.jsx)(C.Z,{className:f?"":"--tmp",value:f||1,withSi:!0})}))]}),(0,r.jsx)("section",{children:(0,r.jsx)(o.Jy,I({label:s("spendable / available"),progress:{hideValue:!0,isBlurred:!y,total:y?b:m.Jo,value:y?j:m.um}},{children:(0,r.jsxs)("span",I({className:y?"":"--tmp"},{children:[(0,r.jsx)(C.Z,{value:j||m.um,withSi:!0}),(0,r.jsx)(r.Fragment,{children:" / "}),(0,r.jsx)(C.Z,{value:b||m.Jo,withSi:!0})]}))}))}),c&&g.gt(m.nw)&&(0,r.jsx)("section",{children:(0,r.jsx)(o.Jy,{label:s("spend period"),progress:{total:g,value:c.mod(g),withTime:!0}})})]})}));var A=function(){return A=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},A.apply(this,arguments)};const M=a.memo((function(e){var n=e.className,t=e.isMember,a=e.members,s=(0,i.h)().api,l=(0,u.W7)(s.derive.treasury.proposals);return(0,r.jsxs)("div",A({className:n},{children:[(0,r.jsx)(P,{approvalCount:null==l?void 0:l.approvals.length,proposalCount:null==l?void 0:l.proposals.length}),(0,r.jsx)(o.zx.Group,{children:(0,r.jsx)(f,{})}),(0,r.jsx)(N,{isMember:t,members:a,proposals:null==l?void 0:l.proposals}),(0,r.jsx)(N,{isApprovals:!0,isMember:t,members:a,proposals:null==l?void 0:l.approvals})]}))}));var T=t(34814),E=t(79760),D=function(){return D=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},D.apply(this,arguments)};const q=a.memo((function(e){var n=e.members,t=(0,h.$)().t,s=(0,i.h)().api,l=(0,d.O)(),c=l[0],u=l[1],p=(0,a.useState)(null),f=p[0],v=p[1],x=(0,a.useState)(null),g=x[0],b=x[1],j=(0,a.useState)(""),y=j[0],w=j[1],N=(0,a.useState)(),k=N[0],O=N[1],C=(0,a.useMemo)((function(){var e,n;return Math.min(256,(null===(n=null===(e=s.consts.tips||s.consts.treasury)||void 0===e?void 0:e.maximumReasonLength)||void 0===n?void 0:n.toNumber())||256)}),[s]),S=(0,a.useMemo)((function(){return!!f&&n.includes(f)}),[f,n]),I=!!k&&k.gt(m.nw),P=!!y&&y.length>=5&&y.length<=C;return s.tx.tips.tipNew||s.tx.treasury.tipNew?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{icon:"plus",label:t("Propose tip"),onClick:u}),c&&(0,r.jsxs)(o.u_,D({header:t("Submit tip request"),onClose:u,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,D({hint:t("Use this account to request the tip from. This can be a normal or council account.")},{children:(0,r.jsx)(o.rp,{label:t("submit with account"),onChange:v,type:"account",withLabel:!0})})),(0,r.jsx)(o.u_.Columns,D({hint:t("The beneficiary will received the tip as approved by council members.")},{children:(0,r.jsx)(o.rp,{label:t("beneficiary"),onChange:b,type:"allPlus"})})),(0,r.jsx)(o.u_.Columns,D({hint:t("A reason (to be stored-on-chain) as to why the recipient deserves a tip payout.")},{children:(0,r.jsx)(o.II,{autoFocus:!0,isError:!P,label:t("tip reason"),onChange:w})})),S&&(0,r.jsx)(o.u_.Columns,D({hint:t("As a council member, you can suggest an initial value for the tip, each other council member can suggest their own.")},{children:(0,r.jsx)(o.H,{isError:!I,label:t("tip value"),onChange:O})}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:f,icon:"plus",isDisabled:!f||S&&!I||!P,label:t("Propose tip"),onStart:u,params:S?[y,g,k]:[y,g],tx:S?(s.tx.tips||s.tx.treasury).tipNew:(s.tx.tips||s.tx.treasury).reportAwesome})})]}))]}):null}));var F=t(65874),V=function(){return V=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},V.apply(this,arguments)},R={transform:function(e){var n=e.freeBalance,t=e.reservedBalance;return n.add(t)}};const _=a.memo((function(e){var n,t=e.defaultId,s=e.hash,l=e.isMember,c=e.isTipped,m=e.median,p=e.members,f=e.recipient,v=(0,h.$)().t,x=(0,i.h)().api,g=(0,d.O)(),b=g[0],j=g[1],y=(0,a.useState)(t),w=y[0],N=y[1],k=(0,a.useState)(),O=k[0],C=k[1],S=(0,u.W7)(null===(n=x.derive.balances)||void 0===n?void 0:n.all,[f],R),I=(x.tx.tips||x.tx.treasury).tip;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.zx,{icon:"check",isDisabled:!l,label:v("Tip"),onClick:j}),(0,r.jsx)(o.cA,{accountId:t,className:"media--1600",icon:"fighter-jet",isDisabled:!l||!c,isIcon:!0,params:[s,m],tx:I,withoutLink:!0}),b&&(0,r.jsxs)(o.u_,V({header:v("Submit tip endorsement"),onClose:j,size:"large"},{children:[(0,r.jsxs)(o.u_.Content,{children:[(0,r.jsx)(o.u_.Columns,V({hint:v("Your endorsement will be applied for this account.")},{children:(0,r.jsx)(o.rp,{filter:p,label:v("submit with account"),onChange:N,type:"account",withLabel:!0})})),(0,r.jsxs)(o.u_.Columns,V({hint:v("Allocate a suggested tip amount. With enough endorsements, the suggested values are averaged and sent to the beneficiary.")},{children:[(0,r.jsx)(o.H,{autoFocus:!0,defaultValue:m,isZeroable:!0,label:v("value"),onChange:C}),S&&S.isZero()&&(0,r.jsx)(o.Pd,{content:v("The recipient account has no balance, ensure the tip is more than the existential deposit to create the account.")})]}))]}),(0,r.jsx)(o.u_.Actions,{children:(0,r.jsx)(o.cA,{accountId:w,icon:"plus",isDisabled:!w,label:v("Submit tip"),onStart:j,params:[s,O],tx:I})})]}))]})}));var B=t(94158),Z=function(){return Z=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Z.apply(this,arguments)},L={transform:function(e){return e.isSome?(0,B.r)(e.unwrap().toHex()):null}};const H=a.memo((function(e){var n=e.hash,t=(0,i.h)().api,a=(0,u.W7)((t.query.tips||t.query.treasury).reasons,[n],L);return(0,r.jsx)("td",Z({className:"start all"},{children:a||n.toHex()}))}));var z,W,$=function(){return $=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},$.apply(this,arguments)},U=o.zo.tr(G||(z=["\n  .closingTimer {\n    display: inline-block;\n    padding: 0 0.5rem;\n  }\n"],W=["\n  .closingTimer {\n    display: inline-block;\n    padding: 0 0.5rem;\n  }\n"],Object.defineProperty?Object.defineProperty(z,"raw",{value:W}):z.raw=W,G=z));const J=a.memo((function(e){var n=e.bestNumber,t=e.className,s=void 0===t?"":t,l=e.defaultId,c=e.hash,u=e.isMember,d=e.members,p=e.onSelect,f=e.onlyUntipped,v=e.tip,x=(0,i.h)().api,g=(0,h.$)().t,b=(0,T.x)().allAccounts,j=(0,a.useMemo)((function(){return function(e,n){var t=e.closes.unwrapOr(null),r=null,a=null;if(function(e){return!!(null==e?void 0:e.findersFee)}(e))r=e.finder,a=e.deposit;else if(e.finder.isSome){var s=e.finder.unwrap();r=s[0],a=s[1]}var o=e.tips.map((function(e){return e[1]})).sort((function(e,n){return e.cmp(n)})),i=Math.floor(o.length/2),l=o.length?o.length%2?o[i]:o[i-1].add(o[i]).divn(2):m.nw;return{closesAt:t,deposit:a,finder:r,isFinder:!!r&&n.includes(r.toString()),isTipped:!!o.length,isTipper:e.tips.some((function(e){var t=e[0];return n.includes(t.toString())})),median:l}}(v,b)}),[b,v]),y=j.closesAt,w=j.finder,N=j.isFinder,k=j.isTipped,O=j.isTipper,I=j.median,P=(0,a.useMemo)((function(){return b.find((function(e){return d.includes(e)}))||null}),[b,d]),A=(0,a.useState)(!1),M=A[0],E=A[1],D=(0,a.useCallback)((function(){return v.tips.map((function(e){var n=e[0],t=e[1];return(0,r.jsx)(o.ax,{balance:t,value:n,withBalance:!0},n.toString())}))}),[v]);if((0,a.useEffect)((function(){p(c,M,I)}),[c,M,I,p]),(0,a.useEffect)((function(){E(u&&!O)}),[u,O]),f&&!y&&O)return null;var q=v.reason,V=v.tips,R=v.who,B=R.toString();return(0,r.jsxs)(U,$({className:s},{children:[(0,r.jsx)("td",$({className:"address"},{children:(0,r.jsx)(o.N,{value:R})})),(0,r.jsx)("td",$({className:"address media--1400"},{children:w&&(0,r.jsx)(o.ax,{value:w})})),(0,r.jsx)(H,{hash:q}),(0,r.jsx)("td",$({className:"expand media--1100"},{children:0!==V.length&&(0,r.jsx)(o.n0,{renderChildren:D,summary:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:g("Tippers ({{count}})",{replace:{count:V.length}})}),(0,r.jsx)(C.Z,{value:I})]})})})),(0,r.jsxs)("td",$({className:"button together"},{children:[y?n&&y.gt(n)&&(0,r.jsxs)("div",$({className:"closingTimer"},{children:[(0,r.jsx)(F.Z,{value:y.sub(n)}),"#",(0,S.u)(y)]})):w&&N&&(0,r.jsx)(o.cA,{accountId:w,className:"media--1400",icon:"times",label:g("Cancel"),params:[c],tx:(x.tx.tips||x.tx.treasury).retractTip}),y&&n&&!y.gt(n)?(0,r.jsx)(o.cA,{accountId:P,icon:"times",label:g("Close"),params:[c],tx:(x.tx.tips||x.tx.treasury).closeTip}):(0,r.jsx)(_,{defaultId:l,hash:c,isMember:u,isTipped:k,median:I,members:d,recipient:B})]})),(0,r.jsx)("td",$({className:"badge media--1700"},{children:u&&(0,r.jsx)(o.JO,{color:O?"green":"gray",icon:"asterisk"})})),(0,r.jsx)("td",{children:(0,r.jsx)(o.XZ,{isDisabled:!u,onChange:E,value:M})}),(0,r.jsx)("td",$({className:"links media--1700"},{children:(0,r.jsx)(o.NR,{data:c,type:"tip"})}))]}))}));var G,Q=function(){return Q=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},Q.apply(this,arguments)},X={withParams:!0},K=(0,o.zo)(o.iA)(ee||(ee=function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}(["\n  .tipsFilter {\n    text-align: right;\n\n    .ui--Toggle {\n      margin-right: 1rem;\n      margin-top: 0.75rem;\n    }\n  }\n"],["\n  .tipsFilter {\n    text-align: right;\n\n    .ui--Toggle {\n      margin-right: 1rem;\n      margin-top: 0.75rem;\n    }\n  }\n"])));const Y=a.memo((function(e){var n=e.className,t=void 0===n?"":n,s=e.defaultId,l=e.hashes,c=e.isMember,d=e.members,m=e.onSelectTip,p=(0,h.$)().t,f=(0,i.h)().api,v=(0,a.useState)(!1),x=v[0],g=v[1],b=(0,k.C)(),j=(0,u.W7)(l&&(f.query.tips||f.query.treasury).tips.multi,[l],X),y=(0,a.useMemo)((function(){return function(e,n){if(e&&n){var t=e[0][0];return e[1].map((function(e,n){return[t[n],e.unwrapOr(null)]})).filter((function(e){return n.includes(e[0])&&!!e[1]})).sort((function(e,n){return e[1].closes.isNone?n[1].closes.isNone?0:-1:n[1].closes.isSome?n[1].closes.unwrap().cmp(e[1].closes.unwrap()):1}))}}(j,l)}),[l,j]),w=(0,a.useRef)([[p("tips"),"start"],[p("finder"),"address media--1400"],[p("reason"),"start"],[void 0,"media--1100"],[],[void 0,"badge media--1700"],[],[void 0,"media--1700"]]);return(0,r.jsx)(K,Q({className:t,empty:y&&p("No open tips"),filter:c&&(0,r.jsx)("div",Q({className:"tipsFilter"},{children:(0,r.jsx)(o.ZD,{label:p("show only untipped/closing"),onChange:g,value:x})})),header:w.current},{children:y&&y.map((function(e){var n=e[0],t=e[1];return(0,r.jsx)(J,{bestNumber:b,defaultId:s,hash:n,isMember:c,members:d,onSelect:m,onlyUntipped:x,tip:t},n)}))}))}));var ee,ne=function(){return ne=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ne.apply(this,arguments)},te={quickTips:{},quickTxs:[]};const re=a.memo((function(e){var n=e.className,t=e.hashes,s=e.isMember,l=e.members,c=(0,h.$)().t,u=(0,T.x)().allAccounts,d=(0,i.h)().api,m=(0,a.useState)(te),p=m[0].quickTxs,f=m[1],v=(0,E.b)(p),x=(0,a.useMemo)((function(){return l.find((function(e){return u.includes(e)}))||null}),[u,l]),g=(0,a.useCallback)((function(e,n,t){return f((function(r){var a=r.quickTips;return a[e]=n?t:null,{quickTips:a,quickTxs:Object.entries(a).map((function(e){var n=e[0],t=e[1];return t&&(d.tx.tips||d.tx.treasury).tip(n,t)})).filter((function(e){return!!e}))}}))}),[d]);return(0,r.jsxs)("div",ne({className:n},{children:[(0,r.jsxs)(o.zx.Group,{children:[(0,r.jsx)(q,{members:l}),(0,r.jsx)(o.cA,{accountId:x,extrinsic:v,icon:"fighter-jet",isDisabled:!s||!v,label:c("Median tip selected")})]}),(0,r.jsx)(Y,{defaultId:x,hashes:t,isMember:s,members:l,onSelectTip:g})]}))}));var ae=t(24305),se=t(12298),oe=t(11677),ie={transform:function(e){return e.map((function(e){return e.args[0].toHex()}))}};const le=(0,oe.e)("useTipHashes",(function(){var e,n,t,r,a=(0,i.h)().api,s=(0,ae.b)([null===(e=a.events.tips)||void 0===e?void 0:e.NewTip,null===(n=a.events.tips)||void 0===n?void 0:n.TipClosed,null===(t=a.events.tips)||void 0===t?void 0:t.TipRetracted]);return(0,se.k)(null===(r=a.query.tips||a.query.treasury)||void 0===r?void 0:r.tips,[],ie,s.blockHash)}));var ce=function(){return ce=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},ce.apply(this,arguments)};const ue=a.memo((function(e){var n=e.basePath,t=(0,h.$)().t,u=(0,i.h)().api,d=(0,l.V)("council"),m=d.isMember,p=d.members,f=le(),v=(0,a.useMemo)((function(){var e;return[{isRoot:!0,name:"overview",text:t("Overview")},(0,c.m)(null===(e=u.query.tips||u.query.treasury)||void 0===e?void 0:e.tips)&&{count:null==f?void 0:f.length,name:"tips",text:t("Tips")}].filter((function(e){return!!e}))}),[u,t,f]);return(0,r.jsxs)("main",ce({className:"treasury--App"},{children:[(0,r.jsx)(o.mQ,{basePath:n,items:v}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,ce({path:"".concat(n,"/tips")},{children:(0,r.jsx)(re,{hashes:f,isMember:m,members:p})})),(0,r.jsx)(s.AW,{children:(0,r.jsx)(M,{isMember:m,members:p})})]})]}))}))},43814:(e,n,t)=>{t.d(n,{$:()=>a});var r=t(61349);function a(){return(0,r.$G)("app-treasury")}},9039:(e,n,t)=>{t.d(n,{Z:()=>i});var r=t(2784),a=t(34814),s=t(90778),o=t(9118);const i=(0,t(11677).e)("useCounter",(function(){var e,n=(0,a.x)().hasAccounts,t=(0,s.h)(),i=t.api,l=t.isApiReady,c=(0,o.W7)(l&&n&&(null===(e=i.derive.treasury)||void 0===e?void 0:e.proposals));return(0,r.useMemo)((function(){return(null==c?void 0:c.proposals.length)||0}),[c])}))},26822:(e,n,t)=>{t.d(n,{Z:()=>S});var r=t(52322),a=t(2784),s=t(7267),o=t(24732),i=t(35189),l=t(9242),c=t(72570),u=t(90778),d=t(14681),m=t(61162),h=t(70416),p=t(66850),f=t(90107),v=t(61349);function x(){return(0,v.$G)("app-utilities")}var g=function(){return g=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},g.apply(this,arguments)};const b=a.memo((function(e){var n=e.className,t=x().t,s=(0,u.h)().chainSS58,v=(0,a.useState)({address:null,inputSS58:42}),b=v[0],j=b.address,y=b.inputSS58,w=v[1],N=(0,a.useState)(-1),k=N[0],O=N[1],C=(0,a.useCallback)((function(e){return w(function(e){var n=null,t=42;if(e&&(0,m.U)(e)){var r=(0,h.MW)(e);n=e,t=(0,p.l)(r)[3]}return{address:n,inputSS58:t}}(e))}),[]),S=(0,a.useMemo)((function(){var e=c.FA.find((function(e){return e.prefix===s}));return(0,l.M)(t).map((function(n){return(0,i.SX)(n,["default"],"empty",-1===n.value?e?" (".concat(e.displayName,", ").concat(s||0,")"):" (".concat(s||0,")"):" (".concat(n.value,")"))}))}),[s,t]),I=(0,a.useMemo)((function(){return j&&(0,f.m)(j,-1===k?s:k)}),[j,s,k]);return(0,r.jsxs)("div",g({className:n},{children:[(0,r.jsx)("div",g({className:"ui--row"},{children:(0,r.jsx)(o.bm,{autoFocus:!0,isError:!j,label:t("address to convert"),noConvert:!0,onChange:C})})),(0,r.jsx)("div",g({className:"ui--row"},{children:(0,r.jsx)(o.Lt,{defaultValue:k,label:t("address prefix"),onChange:O,options:S})})),j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",g({className:"ui--row"},{children:(0,r.jsx)(o.qG,{className:"medium",label:t("input ss58 prefix"),value:(0,d.u)(y)})})),I&&(0,r.jsx)("div",g({className:"ui--row"},{children:(0,r.jsx)(o.bm,{defaultValue:I,isDisabled:!0,label:t("converted address")},I)}))]})]}))}));var j=t(64021),y=t(74076),w=t(48533),N=t(34323),k=function(){return k=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},k.apply(this,arguments)};const O=a.memo((function(e){var n=e.className,t=x().t,s=(0,a.useState)({data:"",hash:(0,N.$)((0,j.d)(""),256),isHexData:!1}),i=s[0],l=i.data,c=i.hash,u=i.isHexData,d=s[1],m=(0,a.useCallback)((function(e){var n=(0,y.vq)(e);d({data:e,hash:(0,N.$)(n?(0,w.G)(e):(0,j.d)(e),256),isHexData:n})}),[]);return(0,r.jsxs)("div",k({className:n},{children:[(0,r.jsx)("div",k({className:"ui--row"},{children:(0,r.jsx)(o.II,{autoFocus:!0,className:"full",label:t("from the following data"),onChange:m,value:l})})),(0,r.jsx)("div",k({className:"ui--row"},{children:(0,r.jsx)(o.qG,{className:"medium",label:t("hex input data"),value:t(u?"Yes":"No")})})),(0,r.jsx)("div",k({className:"ui--row"},{children:(0,r.jsx)(o.r_,{className:"full",isHidden:0===c.length,isMonospace:!0,label:t("the resulting hash is"),value:c,withCopy:!0})}))]}))}));var C=function(){return C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},C.apply(this,arguments)};const S=a.memo((function(e){var n=e.basePath,t=e.className,i=x().t,l=(0,a.useRef)([{isRoot:!0,name:"convert",text:i("Convert address")},{name:"hash",text:i("Hash data")}]);return(0,r.jsxs)("main",C({className:t},{children:[(0,r.jsx)(o.mQ,{basePath:n,items:l.current}),(0,r.jsxs)(s.rs,{children:[(0,r.jsx)(s.AW,C({path:"".concat(n,"/hash")},{children:(0,r.jsx)(O,{})})),(0,r.jsx)(s.AW,{children:(0,r.jsx)(b,{})})]})]}))}))},7644:(e,n,t)=>{t.d(n,{Z:()=>C});var r=t(52322),a=t(2784),s=t(24732),o=t(61349);function i(){return(0,o.$G)("app-whitelist")}var l=t(90778),c=t(12298),u=t(39824),d=t(11677),m={transform:function(e){return e.map((function(e){return e.args[0]}))}};function h(e){var n=[],t=[];return e.forEach((function(e){var r=e.event,a=r.data[0];"CallWhitelisted"===r.method?n.push(a):t.push(a)})),{added:n,removed:t}}const p=(0,d.e)("useHashes",(function(){var e=(0,l.h)().api,n=(0,c.k)(e.query.whitelist.whitelistedCall,[],m),t=(0,u.N)([e.events.whitelist.CallWhitelisted,e.events.whitelist.WhitelistedCallRemoved],h,n);return(0,a.useMemo)((function(){return t&&t.map((function(e){return e.toHex()}))}),[t])}));var f=t(69338),v=t(74525),x=t(31313),g=function(){return g=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},g.apply(this,arguments)};const b=a.memo((function(e){var n=e.className,t=e.value,a=(0,x.CH)(t);return(0,r.jsxs)("tr",g({className:n},{children:[(0,r.jsx)(v.Z,{value:t}),(0,r.jsx)(f.Z,{value:a})]}))}));var j=t(14681),y=function(){return y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},y.apply(this,arguments)};const w=a.memo((function(e){var n=e.className,t=e.hashes,a=i().t;return(0,r.jsx)(s.Ty,y({className:n},{children:(0,r.jsx)(s.Jy,y({label:a("hashes")},{children:void 0===t?(0,r.jsx)("span",y({className:"--tmp"},{children:"99"})):(0,j.u)(t.length)}))}))}));var N=function(){return N=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},N.apply(this,arguments)};const k=a.memo((function(e){var n=e.className,t=i().t,o=p(),l=(0,a.useRef)([[t("calls"),"start"],[void 0,"all"],[void 0,"media--1300"]]);return(0,r.jsxs)("div",N({className:n},{children:[(0,r.jsx)(w,{hashes:o}),(0,r.jsx)(s.iA,N({className:n,empty:o&&t("No call hashes found"),header:l.current},{children:o&&o.map((function(e){return(0,r.jsx)(b,{value:e},e)}))}))]}))}));var O=function(){return O=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},O.apply(this,arguments)};const C=a.memo((function(e){var n=e.basePath,t=e.className,o=i().t,l=(0,a.useRef)([{isRoot:!0,name:"overview",text:o("Overview")}]);return(0,r.jsxs)("main",O({className:t},{children:[(0,r.jsx)(s.mQ,{basePath:n,items:l.current}),(0,r.jsx)(k,{})]}))}))}}]);